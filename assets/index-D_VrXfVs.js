(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const y of document.querySelectorAll('link[rel="modulepreload"]'))f(y);new MutationObserver(y=>{for(const S of y)if(S.type==="childList")for(const A of S.addedNodes)A.tagName==="LINK"&&A.rel==="modulepreload"&&f(A)}).observe(document,{childList:!0,subtree:!0});function u(y){const S={};return y.integrity&&(S.integrity=y.integrity),y.referrerPolicy&&(S.referrerPolicy=y.referrerPolicy),y.crossOrigin==="use-credentials"?S.credentials="include":y.crossOrigin==="anonymous"?S.credentials="omit":S.credentials="same-origin",S}function f(y){if(y.ep)return;y.ep=!0;const S=u(y);fetch(y.href,S)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs$1(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var jsxRuntime={exports:{}},reactJsxRuntime_production={};var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var s=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function u(f,y,S){var A=null;if(S!==void 0&&(A=""+S),y.key!==void 0&&(A=""+y.key),"key"in y){S={};for(var w in y)w!=="key"&&(S[w]=y[w])}else S=y;return y=S.ref,{$$typeof:s,type:f,key:A,ref:y!==void 0?y:null,props:S}}return reactJsxRuntime_production.Fragment=n,reactJsxRuntime_production.jsx=u,reactJsxRuntime_production.jsxs=u,reactJsxRuntime_production}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),react={exports:{}},react_production={};var hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var s=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),S=Symbol.for("react.consumer"),A=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),T=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),N=Symbol.iterator;function L(ae){return ae===null||typeof ae!="object"?null:(ae=N&&ae[N]||ae["@@iterator"],typeof ae=="function"?ae:null)}var F={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},H=Object.assign,z={};function U(ae,be,he){this.props=ae,this.context=be,this.refs=z,this.updater=he||F}U.prototype.isReactComponent={},U.prototype.setState=function(ae,be){if(typeof ae!="object"&&typeof ae!="function"&&ae!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ae,be,"setState")},U.prototype.forceUpdate=function(ae){this.updater.enqueueForceUpdate(this,ae,"forceUpdate")};function G(){}G.prototype=U.prototype;function Y(ae,be,he){this.props=ae,this.context=be,this.refs=z,this.updater=he||F}var K=Y.prototype=new G;K.constructor=Y,H(K,U.prototype),K.isPureReactComponent=!0;var Z=Array.isArray;function J(){}var te={H:null,A:null,T:null,S:null},de=Object.prototype.hasOwnProperty;function se(ae,be,he){var ue=he.ref;return{$$typeof:s,type:ae,key:be,ref:ue!==void 0?ue:null,props:he}}function ne(ae,be){return se(ae.type,be,ae.props)}function ge(ae){return typeof ae=="object"&&ae!==null&&ae.$$typeof===s}function Ee(ae){var be={"=":"=0",":":"=2"};return"$"+ae.replace(/[=:]/g,function(he){return be[he]})}var we=/\/+/g;function Ie(ae,be){return typeof ae=="object"&&ae!==null&&ae.key!=null?Ee(""+ae.key):be.toString(36)}function Be(ae){switch(ae.status){case"fulfilled":return ae.value;case"rejected":throw ae.reason;default:switch(typeof ae.status=="string"?ae.then(J,J):(ae.status="pending",ae.then(function(be){ae.status==="pending"&&(ae.status="fulfilled",ae.value=be)},function(be){ae.status==="pending"&&(ae.status="rejected",ae.reason=be)})),ae.status){case"fulfilled":return ae.value;case"rejected":throw ae.reason}}throw ae}function Me(ae,be,he,ue,ye){var ce=typeof ae;(ce==="undefined"||ce==="boolean")&&(ae=null);var _e=!1;if(ae===null)_e=!0;else switch(ce){case"bigint":case"string":case"number":_e=!0;break;case"object":switch(ae.$$typeof){case s:case n:_e=!0;break;case R:return _e=ae._init,Me(_e(ae._payload),be,he,ue,ye)}}if(_e)return ye=ye(ae),_e=ue===""?"."+Ie(ae,0):ue,Z(ye)?(he="",_e!=null&&(he=_e.replace(we,"$&/")+"/"),Me(ye,be,he,"",function($e){return $e})):ye!=null&&(ge(ye)&&(ye=ne(ye,he+(ye.key==null||ae&&ae.key===ye.key?"":(""+ye.key).replace(we,"$&/")+"/")+_e)),be.push(ye)),1;_e=0;var ke=ue===""?".":ue+":";if(Z(ae))for(var Pe=0;Pe<ae.length;Pe++)ue=ae[Pe],ce=ke+Ie(ue,Pe),_e+=Me(ue,be,he,ce,ye);else if(Pe=L(ae),typeof Pe=="function")for(ae=Pe.call(ae),Pe=0;!(ue=ae.next()).done;)ue=ue.value,ce=ke+Ie(ue,Pe++),_e+=Me(ue,be,he,ce,ye);else if(ce==="object"){if(typeof ae.then=="function")return Me(Be(ae),be,he,ue,ye);throw be=String(ae),Error("Objects are not valid as a React child (found: "+(be==="[object Object]"?"object with keys {"+Object.keys(ae).join(", ")+"}":be)+"). If you meant to render a collection of children, use an array instead.")}return _e}function Re(ae,be,he){if(ae==null)return ae;var ue=[],ye=0;return Me(ae,ue,"","",function(ce){return be.call(he,ce,ye++)}),ue}function Te(ae){if(ae._status===-1){var be=ae._result;be=be(),be.then(function(he){(ae._status===0||ae._status===-1)&&(ae._status=1,ae._result=he)},function(he){(ae._status===0||ae._status===-1)&&(ae._status=2,ae._result=he)}),ae._status===-1&&(ae._status=0,ae._result=be)}if(ae._status===1)return ae._result.default;throw ae._result}var Se=typeof reportError=="function"?reportError:function(ae){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var be=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof ae=="object"&&ae!==null&&typeof ae.message=="string"?String(ae.message):String(ae),error:ae});if(!window.dispatchEvent(be))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",ae);return}console.error(ae)},oe={map:Re,forEach:function(ae,be,he){Re(ae,function(){be.apply(this,arguments)},he)},count:function(ae){var be=0;return Re(ae,function(){be++}),be},toArray:function(ae){return Re(ae,function(be){return be})||[]},only:function(ae){if(!ge(ae))throw Error("React.Children.only expected to receive a single React element child.");return ae}};return react_production.Activity=I,react_production.Children=oe,react_production.Component=U,react_production.Fragment=u,react_production.Profiler=y,react_production.PureComponent=Y,react_production.StrictMode=f,react_production.Suspense=C,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=te,react_production.__COMPILER_RUNTIME={__proto__:null,c:function(ae){return te.H.useMemoCache(ae)}},react_production.cache=function(ae){return function(){return ae.apply(null,arguments)}},react_production.cacheSignal=function(){return null},react_production.cloneElement=function(ae,be,he){if(ae==null)throw Error("The argument must be a React element, but you passed "+ae+".");var ue=H({},ae.props),ye=ae.key;if(be!=null)for(ce in be.key!==void 0&&(ye=""+be.key),be)!de.call(be,ce)||ce==="key"||ce==="__self"||ce==="__source"||ce==="ref"&&be.ref===void 0||(ue[ce]=be[ce]);var ce=arguments.length-2;if(ce===1)ue.children=he;else if(1<ce){for(var _e=Array(ce),ke=0;ke<ce;ke++)_e[ke]=arguments[ke+2];ue.children=_e}return se(ae.type,ye,ue)},react_production.createContext=function(ae){return ae={$$typeof:A,_currentValue:ae,_currentValue2:ae,_threadCount:0,Provider:null,Consumer:null},ae.Provider=ae,ae.Consumer={$$typeof:S,_context:ae},ae},react_production.createElement=function(ae,be,he){var ue,ye={},ce=null;if(be!=null)for(ue in be.key!==void 0&&(ce=""+be.key),be)de.call(be,ue)&&ue!=="key"&&ue!=="__self"&&ue!=="__source"&&(ye[ue]=be[ue]);var _e=arguments.length-2;if(_e===1)ye.children=he;else if(1<_e){for(var ke=Array(_e),Pe=0;Pe<_e;Pe++)ke[Pe]=arguments[Pe+2];ye.children=ke}if(ae&&ae.defaultProps)for(ue in _e=ae.defaultProps,_e)ye[ue]===void 0&&(ye[ue]=_e[ue]);return se(ae,ce,ye)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function(ae){return{$$typeof:w,render:ae}},react_production.isValidElement=ge,react_production.lazy=function(ae){return{$$typeof:R,_payload:{_status:-1,_result:ae},_init:Te}},react_production.memo=function(ae,be){return{$$typeof:T,type:ae,compare:be===void 0?null:be}},react_production.startTransition=function(ae){var be=te.T,he={};te.T=he;try{var ue=ae(),ye=te.S;ye!==null&&ye(he,ue),typeof ue=="object"&&ue!==null&&typeof ue.then=="function"&&ue.then(J,Se)}catch(ce){Se(ce)}finally{be!==null&&he.types!==null&&(be.types=he.types),te.T=be}},react_production.unstable_useCacheRefresh=function(){return te.H.useCacheRefresh()},react_production.use=function(ae){return te.H.use(ae)},react_production.useActionState=function(ae,be,he){return te.H.useActionState(ae,be,he)},react_production.useCallback=function(ae,be){return te.H.useCallback(ae,be)},react_production.useContext=function(ae){return te.H.useContext(ae)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function(ae,be){return te.H.useDeferredValue(ae,be)},react_production.useEffect=function(ae,be){return te.H.useEffect(ae,be)},react_production.useEffectEvent=function(ae){return te.H.useEffectEvent(ae)},react_production.useId=function(){return te.H.useId()},react_production.useImperativeHandle=function(ae,be,he){return te.H.useImperativeHandle(ae,be,he)},react_production.useInsertionEffect=function(ae,be){return te.H.useInsertionEffect(ae,be)},react_production.useLayoutEffect=function(ae,be){return te.H.useLayoutEffect(ae,be)},react_production.useMemo=function(ae,be){return te.H.useMemo(ae,be)},react_production.useOptimistic=function(ae,be){return te.H.useOptimistic(ae,be)},react_production.useReducer=function(ae,be,he){return te.H.useReducer(ae,be,he)},react_production.useRef=function(ae){return te.H.useRef(ae)},react_production.useState=function(ae){return te.H.useState(ae)},react_production.useSyncExternalStore=function(ae,be,he){return te.H.useSyncExternalStore(ae,be,he)},react_production.useTransition=function(){return te.H.useTransition()},react_production.version="19.2.4",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var reactExports=requireReact();const React=getDefaultExportFromCjs$1(reactExports);var client={exports:{}},reactDomClient_production={},scheduler={exports:{}},scheduler_production={};var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,(function(s){function n(Me,Re){var Te=Me.length;Me.push(Re);e:for(;0<Te;){var Se=Te-1>>>1,oe=Me[Se];if(0<y(oe,Re))Me[Se]=Re,Me[Te]=oe,Te=Se;else break e}}function u(Me){return Me.length===0?null:Me[0]}function f(Me){if(Me.length===0)return null;var Re=Me[0],Te=Me.pop();if(Te!==Re){Me[0]=Te;e:for(var Se=0,oe=Me.length,ae=oe>>>1;Se<ae;){var be=2*(Se+1)-1,he=Me[be],ue=be+1,ye=Me[ue];if(0>y(he,Te))ue<oe&&0>y(ye,he)?(Me[Se]=ye,Me[ue]=Te,Se=ue):(Me[Se]=he,Me[be]=Te,Se=be);else if(ue<oe&&0>y(ye,Te))Me[Se]=ye,Me[ue]=Te,Se=ue;else break e}}return Re}function y(Me,Re){var Te=Me.sortIndex-Re.sortIndex;return Te!==0?Te:Me.id-Re.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var S=performance;s.unstable_now=function(){return S.now()}}else{var A=Date,w=A.now();s.unstable_now=function(){return A.now()-w}}var C=[],T=[],R=1,I=null,N=3,L=!1,F=!1,H=!1,z=!1,U=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,Y=typeof setImmediate<"u"?setImmediate:null;function K(Me){for(var Re=u(T);Re!==null;){if(Re.callback===null)f(T);else if(Re.startTime<=Me)f(T),Re.sortIndex=Re.expirationTime,n(C,Re);else break;Re=u(T)}}function Z(Me){if(H=!1,K(Me),!F)if(u(C)!==null)F=!0,J||(J=!0,Ee());else{var Re=u(T);Re!==null&&Be(Z,Re.startTime-Me)}}var J=!1,te=-1,de=5,se=-1;function ne(){return z?!0:!(s.unstable_now()-se<de)}function ge(){if(z=!1,J){var Me=s.unstable_now();se=Me;var Re=!0;try{e:{F=!1,H&&(H=!1,G(te),te=-1),L=!0;var Te=N;try{t:{for(K(Me),I=u(C);I!==null&&!(I.expirationTime>Me&&ne());){var Se=I.callback;if(typeof Se=="function"){I.callback=null,N=I.priorityLevel;var oe=Se(I.expirationTime<=Me);if(Me=s.unstable_now(),typeof oe=="function"){I.callback=oe,K(Me),Re=!0;break t}I===u(C)&&f(C),K(Me)}else f(C);I=u(C)}if(I!==null)Re=!0;else{var ae=u(T);ae!==null&&Be(Z,ae.startTime-Me),Re=!1}}break e}finally{I=null,N=Te,L=!1}Re=void 0}}finally{Re?Ee():J=!1}}}var Ee;if(typeof Y=="function")Ee=function(){Y(ge)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,Ie=we.port2;we.port1.onmessage=ge,Ee=function(){Ie.postMessage(null)}}else Ee=function(){U(ge,0)};function Be(Me,Re){te=U(function(){Me(s.unstable_now())},Re)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(Me){Me.callback=null},s.unstable_forceFrameRate=function(Me){0>Me||125<Me?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):de=0<Me?Math.floor(1e3/Me):5},s.unstable_getCurrentPriorityLevel=function(){return N},s.unstable_next=function(Me){switch(N){case 1:case 2:case 3:var Re=3;break;default:Re=N}var Te=N;N=Re;try{return Me()}finally{N=Te}},s.unstable_requestPaint=function(){z=!0},s.unstable_runWithPriority=function(Me,Re){switch(Me){case 1:case 2:case 3:case 4:case 5:break;default:Me=3}var Te=N;N=Me;try{return Re()}finally{N=Te}},s.unstable_scheduleCallback=function(Me,Re,Te){var Se=s.unstable_now();switch(typeof Te=="object"&&Te!==null?(Te=Te.delay,Te=typeof Te=="number"&&0<Te?Se+Te:Se):Te=Se,Me){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=Te+oe,Me={id:R++,callback:Re,priorityLevel:Me,startTime:Te,expirationTime:oe,sortIndex:-1},Te>Se?(Me.sortIndex=Te,n(T,Me),u(C)===null&&Me===u(T)&&(H?(G(te),te=-1):H=!0,Be(Z,Te-Se))):(Me.sortIndex=oe,n(C,Me),F||L||(F=!0,J||(J=!0,Ee()))),Me},s.unstable_shouldYield=ne,s.unstable_wrapCallback=function(Me){var Re=N;return function(){var Te=N;N=Re;try{return Me.apply(this,arguments)}finally{N=Te}}}})(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var reactDom={exports:{}},reactDom_production={};var hasRequiredReactDom_production;function requireReactDom_production(){if(hasRequiredReactDom_production)return reactDom_production;hasRequiredReactDom_production=1;var s=requireReact();function n(C){var T="https://react.dev/errors/"+C;if(1<arguments.length){T+="?args[]="+encodeURIComponent(arguments[1]);for(var R=2;R<arguments.length;R++)T+="&args[]="+encodeURIComponent(arguments[R])}return"Minified React error #"+C+"; visit "+T+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(){}var f={d:{f:u,r:function(){throw Error(n(522))},D:u,C:u,L:u,m:u,X:u,S:u,M:u},p:0,findDOMNode:null},y=Symbol.for("react.portal");function S(C,T,R){var I=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:y,key:I==null?null:""+I,children:C,containerInfo:T,implementation:R}}var A=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function w(C,T){if(C==="font")return"";if(typeof T=="string")return T==="use-credentials"?T:""}return reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=f,reactDom_production.createPortal=function(C,T){var R=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!T||T.nodeType!==1&&T.nodeType!==9&&T.nodeType!==11)throw Error(n(299));return S(C,T,null,R)},reactDom_production.flushSync=function(C){var T=A.T,R=f.p;try{if(A.T=null,f.p=2,C)return C()}finally{A.T=T,f.p=R,f.d.f()}},reactDom_production.preconnect=function(C,T){typeof C=="string"&&(T?(T=T.crossOrigin,T=typeof T=="string"?T==="use-credentials"?T:"":void 0):T=null,f.d.C(C,T))},reactDom_production.prefetchDNS=function(C){typeof C=="string"&&f.d.D(C)},reactDom_production.preinit=function(C,T){if(typeof C=="string"&&T&&typeof T.as=="string"){var R=T.as,I=w(R,T.crossOrigin),N=typeof T.integrity=="string"?T.integrity:void 0,L=typeof T.fetchPriority=="string"?T.fetchPriority:void 0;R==="style"?f.d.S(C,typeof T.precedence=="string"?T.precedence:void 0,{crossOrigin:I,integrity:N,fetchPriority:L}):R==="script"&&f.d.X(C,{crossOrigin:I,integrity:N,fetchPriority:L,nonce:typeof T.nonce=="string"?T.nonce:void 0})}},reactDom_production.preinitModule=function(C,T){if(typeof C=="string")if(typeof T=="object"&&T!==null){if(T.as==null||T.as==="script"){var R=w(T.as,T.crossOrigin);f.d.M(C,{crossOrigin:R,integrity:typeof T.integrity=="string"?T.integrity:void 0,nonce:typeof T.nonce=="string"?T.nonce:void 0})}}else T==null&&f.d.M(C)},reactDom_production.preload=function(C,T){if(typeof C=="string"&&typeof T=="object"&&T!==null&&typeof T.as=="string"){var R=T.as,I=w(R,T.crossOrigin);f.d.L(C,R,{crossOrigin:I,integrity:typeof T.integrity=="string"?T.integrity:void 0,nonce:typeof T.nonce=="string"?T.nonce:void 0,type:typeof T.type=="string"?T.type:void 0,fetchPriority:typeof T.fetchPriority=="string"?T.fetchPriority:void 0,referrerPolicy:typeof T.referrerPolicy=="string"?T.referrerPolicy:void 0,imageSrcSet:typeof T.imageSrcSet=="string"?T.imageSrcSet:void 0,imageSizes:typeof T.imageSizes=="string"?T.imageSizes:void 0,media:typeof T.media=="string"?T.media:void 0})}},reactDom_production.preloadModule=function(C,T){if(typeof C=="string")if(T){var R=w(T.as,T.crossOrigin);f.d.m(C,{as:typeof T.as=="string"&&T.as!=="script"?T.as:void 0,crossOrigin:R,integrity:typeof T.integrity=="string"?T.integrity:void 0})}else f.d.m(C)},reactDom_production.requestFormReset=function(C){f.d.r(C)},reactDom_production.unstable_batchedUpdates=function(C,T){return C(T)},reactDom_production.useFormState=function(C,T,R){return A.H.useFormState(C,T,R)},reactDom_production.useFormStatus=function(){return A.H.useHostTransitionStatus()},reactDom_production.version="19.2.4",reactDom_production}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(n){console.error(n)}}return s(),reactDom.exports=requireReactDom_production(),reactDom.exports}var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;var s=requireScheduler(),n=requireReact(),u=requireReactDom();function f(M){var O="https://react.dev/errors/"+M;if(1<arguments.length){O+="?args[]="+encodeURIComponent(arguments[1]);for(var V=2;V<arguments.length;V++)O+="&args[]="+encodeURIComponent(arguments[V])}return"Minified React error #"+M+"; visit "+O+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function y(M){return!(!M||M.nodeType!==1&&M.nodeType!==9&&M.nodeType!==11)}function S(M){var O=M,V=M;if(M.alternate)for(;O.return;)O=O.return;else{M=O;do O=M,(O.flags&4098)!==0&&(V=O.return),M=O.return;while(M)}return O.tag===3?V:null}function A(M){if(M.tag===13){var O=M.memoizedState;if(O===null&&(M=M.alternate,M!==null&&(O=M.memoizedState)),O!==null)return O.dehydrated}return null}function w(M){if(M.tag===31){var O=M.memoizedState;if(O===null&&(M=M.alternate,M!==null&&(O=M.memoizedState)),O!==null)return O.dehydrated}return null}function C(M){if(S(M)!==M)throw Error(f(188))}function T(M){var O=M.alternate;if(!O){if(O=S(M),O===null)throw Error(f(188));return O!==M?null:M}for(var V=M,Q=O;;){var me=V.return;if(me===null)break;var ve=me.alternate;if(ve===null){if(Q=me.return,Q!==null){V=Q;continue}break}if(me.child===ve.child){for(ve=me.child;ve;){if(ve===V)return C(me),M;if(ve===Q)return C(me),O;ve=ve.sibling}throw Error(f(188))}if(V.return!==Q.return)V=me,Q=ve;else{for(var Ge=!1,rt=me.child;rt;){if(rt===V){Ge=!0,V=me,Q=ve;break}if(rt===Q){Ge=!0,Q=me,V=ve;break}rt=rt.sibling}if(!Ge){for(rt=ve.child;rt;){if(rt===V){Ge=!0,V=ve,Q=me;break}if(rt===Q){Ge=!0,Q=ve,V=me;break}rt=rt.sibling}if(!Ge)throw Error(f(189))}}if(V.alternate!==Q)throw Error(f(190))}if(V.tag!==3)throw Error(f(188));return V.stateNode.current===V?M:O}function R(M){var O=M.tag;if(O===5||O===26||O===27||O===6)return M;for(M=M.child;M!==null;){if(O=R(M),O!==null)return O;M=M.sibling}return null}var I=Object.assign,N=Symbol.for("react.element"),L=Symbol.for("react.transitional.element"),F=Symbol.for("react.portal"),H=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),G=Symbol.for("react.consumer"),Y=Symbol.for("react.context"),K=Symbol.for("react.forward_ref"),Z=Symbol.for("react.suspense"),J=Symbol.for("react.suspense_list"),te=Symbol.for("react.memo"),de=Symbol.for("react.lazy"),se=Symbol.for("react.activity"),ne=Symbol.for("react.memo_cache_sentinel"),ge=Symbol.iterator;function Ee(M){return M===null||typeof M!="object"?null:(M=ge&&M[ge]||M["@@iterator"],typeof M=="function"?M:null)}var we=Symbol.for("react.client.reference");function Ie(M){if(M==null)return null;if(typeof M=="function")return M.$$typeof===we?null:M.displayName||M.name||null;if(typeof M=="string")return M;switch(M){case H:return"Fragment";case U:return"Profiler";case z:return"StrictMode";case Z:return"Suspense";case J:return"SuspenseList";case se:return"Activity"}if(typeof M=="object")switch(M.$$typeof){case F:return"Portal";case Y:return M.displayName||"Context";case G:return(M._context.displayName||"Context")+".Consumer";case K:var O=M.render;return M=M.displayName,M||(M=O.displayName||O.name||"",M=M!==""?"ForwardRef("+M+")":"ForwardRef"),M;case te:return O=M.displayName||null,O!==null?O:Ie(M.type)||"Memo";case de:O=M._payload,M=M._init;try{return Ie(M(O))}catch{}}return null}var Be=Array.isArray,Me=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Re=u.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Te={pending:!1,data:null,method:null,action:null},Se=[],oe=-1;function ae(M){return{current:M}}function be(M){0>oe||(M.current=Se[oe],Se[oe]=null,oe--)}function he(M,O){oe++,Se[oe]=M.current,M.current=O}var ue=ae(null),ye=ae(null),ce=ae(null),_e=ae(null);function ke(M,O){switch(he(ce,O),he(ye,M),he(ue,null),O.nodeType){case 9:case 11:M=(M=O.documentElement)&&(M=M.namespaceURI)?ip(M):0;break;default:if(M=O.tagName,O=O.namespaceURI)O=ip(O),M=ap(O,M);else switch(M){case"svg":M=1;break;case"math":M=2;break;default:M=0}}be(ue),he(ue,M)}function Pe(){be(ue),be(ye),be(ce)}function $e(M){M.memoizedState!==null&&he(_e,M);var O=ue.current,V=ap(O,M.type);O!==V&&(he(ye,M),he(ue,V))}function xe(M){ye.current===M&&(be(ue),be(ye)),_e.current===M&&(be(_e),Kd._currentValue=Te)}var Ne,je;function He(M){if(Ne===void 0)try{throw Error()}catch(V){var O=V.stack.trim().match(/\n( *(at )?)/);Ne=O&&O[1]||"",je=-1<V.stack.indexOf(`
    at`)?" (<anonymous>)":-1<V.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ne+M+je}var Ye=!1;function Je(M,O){if(!M||Ye)return"";Ye=!0;var V=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var Q={DetermineComponentFrameRoot:function(){try{if(O){var yn=function(){throw Error()};if(Object.defineProperty(yn.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(yn,[])}catch(rn){var Jt=rn}Reflect.construct(M,[],yn)}else{try{yn.call()}catch(rn){Jt=rn}M.call(yn.prototype)}}else{try{throw Error()}catch(rn){Jt=rn}(yn=M())&&typeof yn.catch=="function"&&yn.catch(function(){})}}catch(rn){if(rn&&Jt&&typeof rn.stack=="string")return[rn.stack,Jt.stack]}return[null,null]}};Q.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var me=Object.getOwnPropertyDescriptor(Q.DetermineComponentFrameRoot,"name");me&&me.configurable&&Object.defineProperty(Q.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var ve=Q.DetermineComponentFrameRoot(),Ge=ve[0],rt=ve[1];if(Ge&&rt){var Rt=Ge.split(`
`),Wt=rt.split(`
`);for(me=Q=0;Q<Rt.length&&!Rt[Q].includes("DetermineComponentFrameRoot");)Q++;for(;me<Wt.length&&!Wt[me].includes("DetermineComponentFrameRoot");)me++;if(Q===Rt.length||me===Wt.length)for(Q=Rt.length-1,me=Wt.length-1;1<=Q&&0<=me&&Rt[Q]!==Wt[me];)me--;for(;1<=Q&&0<=me;Q--,me--)if(Rt[Q]!==Wt[me]){if(Q!==1||me!==1)do if(Q--,me--,0>me||Rt[Q]!==Wt[me]){var un=`
`+Rt[Q].replace(" at new "," at ");return M.displayName&&un.includes("<anonymous>")&&(un=un.replace("<anonymous>",M.displayName)),un}while(1<=Q&&0<=me);break}}}finally{Ye=!1,Error.prepareStackTrace=V}return(V=M?M.displayName||M.name:"")?He(V):""}function ot(M,O){switch(M.tag){case 26:case 27:case 5:return He(M.type);case 16:return He("Lazy");case 13:return M.child!==O&&O!==null?He("Suspense Fallback"):He("Suspense");case 19:return He("SuspenseList");case 0:case 15:return Je(M.type,!1);case 11:return Je(M.type.render,!1);case 1:return Je(M.type,!0);case 31:return He("Activity");default:return""}}function ze(M){try{var O="",V=null;do O+=ot(M,V),V=M,M=M.return;while(M);return O}catch(Q){return`
Error generating stack: `+Q.message+`
`+Q.stack}}var pt=Object.prototype.hasOwnProperty,yt=s.unstable_scheduleCallback,ut=s.unstable_cancelCallback,Et=s.unstable_shouldYield,qe=s.unstable_requestPaint,Le=s.unstable_now,lt=s.unstable_getCurrentPriorityLevel,We=s.unstable_ImmediatePriority,Qe=s.unstable_UserBlockingPriority,at=s.unstable_NormalPriority,St=s.unstable_LowPriority,Ct=s.unstable_IdlePriority,jt=s.log,Gt=s.unstable_setDisableYieldValue,Ft=null,ct=null;function st(M){if(typeof jt=="function"&&Gt(M),ct&&typeof ct.setStrictMode=="function")try{ct.setStrictMode(Ft,M)}catch{}}var nt=Math.clz32?Math.clz32:ht,At=Math.log,Yt=Math.LN2;function ht(M){return M>>>=0,M===0?32:31-(At(M)/Yt|0)|0}var Tt=256,Kt=262144,_n=4194304;function Ht(M){var O=M&42;if(O!==0)return O;switch(M&-M){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return M&261888;case 262144:case 524288:case 1048576:case 2097152:return M&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return M&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return M}}function Ot(M,O,V){var Q=M.pendingLanes;if(Q===0)return 0;var me=0,ve=M.suspendedLanes,Ge=M.pingedLanes;M=M.warmLanes;var rt=Q&134217727;return rt!==0?(Q=rt&~ve,Q!==0?me=Ht(Q):(Ge&=rt,Ge!==0?me=Ht(Ge):V||(V=rt&~M,V!==0&&(me=Ht(V))))):(rt=Q&~ve,rt!==0?me=Ht(rt):Ge!==0?me=Ht(Ge):V||(V=Q&~M,V!==0&&(me=Ht(V)))),me===0?0:O!==0&&O!==me&&(O&ve)===0&&(ve=me&-me,V=O&-O,ve>=V||ve===32&&(V&4194048)!==0)?O:me}function cn(M,O){return(M.pendingLanes&~(M.suspendedLanes&~M.pingedLanes)&O)===0}function Mn(M,O){switch(M){case 1:case 2:case 4:case 8:case 64:return O+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return O+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function In(){var M=_n;return _n<<=1,(_n&62914560)===0&&(_n=4194304),M}function On(M){for(var O=[],V=0;31>V;V++)O.push(M);return O}function rr(M,O){M.pendingLanes|=O,O!==268435456&&(M.suspendedLanes=0,M.pingedLanes=0,M.warmLanes=0)}function Ar(M,O,V,Q,me,ve){var Ge=M.pendingLanes;M.pendingLanes=V,M.suspendedLanes=0,M.pingedLanes=0,M.warmLanes=0,M.expiredLanes&=V,M.entangledLanes&=V,M.errorRecoveryDisabledLanes&=V,M.shellSuspendCounter=0;var rt=M.entanglements,Rt=M.expirationTimes,Wt=M.hiddenUpdates;for(V=Ge&~V;0<V;){var un=31-nt(V),yn=1<<un;rt[un]=0,Rt[un]=-1;var Jt=Wt[un];if(Jt!==null)for(Wt[un]=null,un=0;un<Jt.length;un++){var rn=Jt[un];rn!==null&&(rn.lane&=-536870913)}V&=~yn}Q!==0&&hr(M,Q,0),ve!==0&&me===0&&M.tag!==0&&(M.suspendedLanes|=ve&~(Ge&~O))}function hr(M,O,V){M.pendingLanes|=O,M.suspendedLanes&=~O;var Q=31-nt(O);M.entangledLanes|=O,M.entanglements[Q]=M.entanglements[Q]|1073741824|V&261930}function Yr(M,O){var V=M.entangledLanes|=O;for(M=M.entanglements;V;){var Q=31-nt(V),me=1<<Q;me&O|M[Q]&O&&(M[Q]|=O),V&=~me}}function $r(M,O){var V=O&-O;return V=(V&42)!==0?1:wr(V),(V&(M.suspendedLanes|O))!==0?0:V}function wr(M){switch(M){case 2:M=1;break;case 8:M=4;break;case 32:M=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:M=128;break;case 268435456:M=134217728;break;default:M=0}return M}function mr(M){return M&=-M,2<M?8<M?(M&134217727)!==0?32:268435456:8:2}function ir(){var M=Re.p;return M!==0?M:(M=window.event,M===void 0?32:Rp(M.type))}function zn(M,O){var V=Re.p;try{return Re.p=M,O()}finally{Re.p=V}}var Lr=Math.random().toString(36).slice(2),Hr="__reactFiber$"+Lr,Xe="__reactProps$"+Lr,it="__reactContainer$"+Lr,xt="__reactEvents$"+Lr,$t="__reactListeners$"+Lr,en="__reactHandles$"+Lr,Qt="__reactResources$"+Lr,pn="__reactMarker$"+Lr;function mn(M){delete M[Hr],delete M[Xe],delete M[xt],delete M[$t],delete M[en]}function bn(M){var O=M[Hr];if(O)return O;for(var V=M.parentNode;V;){if(O=V[it]||V[Hr]){if(V=O.alternate,O.child!==null||V!==null&&V.child!==null)for(M=hp(M);M!==null;){if(V=M[Hr])return V;M=hp(M)}return O}M=V,V=M.parentNode}return null}function vn(M){if(M=M[Hr]||M[it]){var O=M.tag;if(O===5||O===6||O===13||O===31||O===26||O===27||O===3)return M}return null}function wn(M){var O=M.tag;if(O===5||O===26||O===27||O===6)return M.stateNode;throw Error(f(33))}function qt(M){var O=M[Qt];return O||(O=M[Qt]={hoistableStyles:new Map,hoistableScripts:new Map}),O}function Ke(M){M[pn]=!0}var _t=new Set,It={};function Nt(M,O){Mt(M,O),Mt(M+"Capture",O)}function Mt(M,O){for(It[M]=O,M=0;M<O.length;M++)_t.add(O[M])}var on=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),dn={},ln={};function kn(M){return pt.call(ln,M)?!0:pt.call(dn,M)?!1:on.test(M)?ln[M]=!0:(dn[M]=!0,!1)}function An(M,O,V){if(kn(O))if(V===null)M.removeAttribute(O);else{switch(typeof V){case"undefined":case"function":case"symbol":M.removeAttribute(O);return;case"boolean":var Q=O.toLowerCase().slice(0,5);if(Q!=="data-"&&Q!=="aria-"){M.removeAttribute(O);return}}M.setAttribute(O,""+V)}}function Gn(M,O,V){if(V===null)M.removeAttribute(O);else{switch(typeof V){case"undefined":case"function":case"symbol":case"boolean":M.removeAttribute(O);return}M.setAttribute(O,""+V)}}function Tn(M,O,V,Q){if(Q===null)M.removeAttribute(V);else{switch(typeof Q){case"undefined":case"function":case"symbol":case"boolean":M.removeAttribute(V);return}M.setAttributeNS(O,V,""+Q)}}function Bn(M){switch(typeof M){case"bigint":case"boolean":case"number":case"string":case"undefined":return M;case"object":return M;default:return""}}function nr(M){var O=M.type;return(M=M.nodeName)&&M.toLowerCase()==="input"&&(O==="checkbox"||O==="radio")}function Nr(M,O,V){var Q=Object.getOwnPropertyDescriptor(M.constructor.prototype,O);if(!M.hasOwnProperty(O)&&typeof Q<"u"&&typeof Q.get=="function"&&typeof Q.set=="function"){var me=Q.get,ve=Q.set;return Object.defineProperty(M,O,{configurable:!0,get:function(){return me.call(this)},set:function(Ge){V=""+Ge,ve.call(this,Ge)}}),Object.defineProperty(M,O,{enumerable:Q.enumerable}),{getValue:function(){return V},setValue:function(Ge){V=""+Ge},stopTracking:function(){M._valueTracker=null,delete M[O]}}}}function ar(M){if(!M._valueTracker){var O=nr(M)?"checked":"value";M._valueTracker=Nr(M,O,""+M[O])}}function Pn(M){if(!M)return!1;var O=M._valueTracker;if(!O)return!0;var V=O.getValue(),Q="";return M&&(Q=nr(M)?M.checked?"true":"false":M.value),M=Q,M!==V?(O.setValue(M),!0):!1}function fn(M){if(M=M||(typeof document<"u"?document:void 0),typeof M>"u")return null;try{return M.activeElement||M.body}catch{return M.body}}var Vn=/[\n"\\]/g;function Rn(M){return M.replace(Vn,function(O){return"\\"+O.charCodeAt(0).toString(16)+" "})}function Mr(M,O,V,Q,me,ve,Ge,rt){M.name="",Ge!=null&&typeof Ge!="function"&&typeof Ge!="symbol"&&typeof Ge!="boolean"?M.type=Ge:M.removeAttribute("type"),O!=null?Ge==="number"?(O===0&&M.value===""||M.value!=O)&&(M.value=""+Bn(O)):M.value!==""+Bn(O)&&(M.value=""+Bn(O)):Ge!=="submit"&&Ge!=="reset"||M.removeAttribute("value"),O!=null?dr(M,Ge,Bn(O)):V!=null?dr(M,Ge,Bn(V)):Q!=null&&M.removeAttribute("value"),me==null&&ve!=null&&(M.defaultChecked=!!ve),me!=null&&(M.checked=me&&typeof me!="function"&&typeof me!="symbol"),rt!=null&&typeof rt!="function"&&typeof rt!="symbol"&&typeof rt!="boolean"?M.name=""+Bn(rt):M.removeAttribute("name")}function fi(M,O,V,Q,me,ve,Ge,rt){if(ve!=null&&typeof ve!="function"&&typeof ve!="symbol"&&typeof ve!="boolean"&&(M.type=ve),O!=null||V!=null){if(!(ve!=="submit"&&ve!=="reset"||O!=null)){ar(M);return}V=V!=null?""+Bn(V):"",O=O!=null?""+Bn(O):V,rt||O===M.value||(M.value=O),M.defaultValue=O}Q=Q??me,Q=typeof Q!="function"&&typeof Q!="symbol"&&!!Q,M.checked=rt?M.checked:!!Q,M.defaultChecked=!!Q,Ge!=null&&typeof Ge!="function"&&typeof Ge!="symbol"&&typeof Ge!="boolean"&&(M.name=Ge),ar(M)}function dr(M,O,V){O==="number"&&fn(M.ownerDocument)===M||M.defaultValue===""+V||(M.defaultValue=""+V)}function si(M,O,V,Q){if(M=M.options,O){O={};for(var me=0;me<V.length;me++)O["$"+V[me]]=!0;for(V=0;V<M.length;V++)me=O.hasOwnProperty("$"+M[V].value),M[V].selected!==me&&(M[V].selected=me),me&&Q&&(M[V].defaultSelected=!0)}else{for(V=""+Bn(V),O=null,me=0;me<M.length;me++){if(M[me].value===V){M[me].selected=!0,Q&&(M[me].defaultSelected=!0);return}O!==null||M[me].disabled||(O=M[me])}O!==null&&(O.selected=!0)}}function Or(M,O,V){if(O!=null&&(O=""+Bn(O),O!==M.value&&(M.value=O),V==null)){M.defaultValue!==O&&(M.defaultValue=O);return}M.defaultValue=V!=null?""+Bn(V):""}function li(M,O,V,Q){if(O==null){if(Q!=null){if(V!=null)throw Error(f(92));if(Be(Q)){if(1<Q.length)throw Error(f(93));Q=Q[0]}V=Q}V==null&&(V=""),O=V}V=Bn(O),M.defaultValue=V,Q=M.textContent,Q===V&&Q!==""&&Q!==null&&(M.value=Q),ar(M)}function ci(M,O){if(O){var V=M.firstChild;if(V&&V===M.lastChild&&V.nodeType===3){V.nodeValue=O;return}}M.textContent=O}var pi=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function xi(M,O,V){var Q=O.indexOf("--")===0;V==null||typeof V=="boolean"||V===""?Q?M.setProperty(O,""):O==="float"?M.cssFloat="":M[O]="":Q?M.setProperty(O,V):typeof V!="number"||V===0||pi.has(O)?O==="float"?M.cssFloat=V:M[O]=(""+V).trim():M[O]=V+"px"}function va(M,O,V){if(O!=null&&typeof O!="object")throw Error(f(62));if(M=M.style,V!=null){for(var Q in V)!V.hasOwnProperty(Q)||O!=null&&O.hasOwnProperty(Q)||(Q.indexOf("--")===0?M.setProperty(Q,""):Q==="float"?M.cssFloat="":M[Q]="");for(var me in O)Q=O[me],O.hasOwnProperty(me)&&V[me]!==Q&&xi(M,me,Q)}else for(var ve in O)O.hasOwnProperty(ve)&&xi(M,ve,O[ve])}function Ce(M){if(M.indexOf("-")===-1)return!1;switch(M){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fe=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ve=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function mt(M){return Ve.test(""+M)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":M}function Pt(){}var an=null;function zt(M){return M=M.target||M.srcElement||window,M.correspondingUseElement&&(M=M.correspondingUseElement),M.nodeType===3?M.parentNode:M}var sn=null,xn=null;function Un(M){var O=vn(M);if(O&&(M=O.stateNode)){var V=M[Xe]||null;e:switch(M=O.stateNode,O.type){case"input":if(Mr(M,V.value,V.defaultValue,V.defaultValue,V.checked,V.defaultChecked,V.type,V.name),O=V.name,V.type==="radio"&&O!=null){for(V=M;V.parentNode;)V=V.parentNode;for(V=V.querySelectorAll('input[name="'+Rn(""+O)+'"][type="radio"]'),O=0;O<V.length;O++){var Q=V[O];if(Q!==M&&Q.form===M.form){var me=Q[Xe]||null;if(!me)throw Error(f(90));Mr(Q,me.value,me.defaultValue,me.defaultValue,me.checked,me.defaultChecked,me.type,me.name)}}for(O=0;O<V.length;O++)Q=V[O],Q.form===M.form&&Pn(Q)}break e;case"textarea":Or(M,V.value,V.defaultValue);break e;case"select":O=V.value,O!=null&&si(M,!!V.multiple,O,!1)}}}var tr=!1;function Tr(M,O,V){if(tr)return M(O,V);tr=!0;try{var Q=M(O);return Q}finally{if(tr=!1,(sn!==null||xn!==null)&&(Is(),sn&&(O=sn,M=xn,xn=sn=null,Un(O),M)))for(O=0;O<M.length;O++)Un(M[O])}}function lr(M,O){var V=M.stateNode;if(V===null)return null;var Q=V[Xe]||null;if(Q===null)return null;V=Q[O];e:switch(O){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(Q=!Q.disabled)||(M=M.type,Q=!(M==="button"||M==="input"||M==="select"||M==="textarea")),M=!Q;break e;default:M=!1}if(M)return null;if(V&&typeof V!="function")throw Error(f(231,O,typeof V));return V}var Xn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fn=!1;if(Xn)try{var Hn={};Object.defineProperty(Hn,"passive",{get:function(){Fn=!0}}),window.addEventListener("test",Hn,Hn),window.removeEventListener("test",Hn,Hn)}catch{Fn=!1}var Kn=null,Er=null,ii=null;function Pr(){if(ii)return ii;var M,O=Er,V=O.length,Q,me="value"in Kn?Kn.value:Kn.textContent,ve=me.length;for(M=0;M<V&&O[M]===me[M];M++);var Ge=V-M;for(Q=1;Q<=Ge&&O[V-Q]===me[ve-Q];Q++);return ii=me.slice(M,1<Q?1-Q:void 0)}function vi(M){var O=M.keyCode;return"charCode"in M?(M=M.charCode,M===0&&O===13&&(M=13)):M=O,M===10&&(M=13),32<=M||M===13?M:0}function Gr(){return!0}function Qn(){return!1}function Wn(M){function O(V,Q,me,ve,Ge){this._reactName=V,this._targetInst=me,this.type=Q,this.nativeEvent=ve,this.target=Ge,this.currentTarget=null;for(var rt in M)M.hasOwnProperty(rt)&&(V=M[rt],this[rt]=V?V(ve):ve[rt]);return this.isDefaultPrevented=(ve.defaultPrevented!=null?ve.defaultPrevented:ve.returnValue===!1)?Gr:Qn,this.isPropagationStopped=Qn,this}return I(O.prototype,{preventDefault:function(){this.defaultPrevented=!0;var V=this.nativeEvent;V&&(V.preventDefault?V.preventDefault():typeof V.returnValue!="unknown"&&(V.returnValue=!1),this.isDefaultPrevented=Gr)},stopPropagation:function(){var V=this.nativeEvent;V&&(V.stopPropagation?V.stopPropagation():typeof V.cancelBubble!="unknown"&&(V.cancelBubble=!0),this.isPropagationStopped=Gr)},persist:function(){},isPersistent:Gr}),O}var gr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(M){return M.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fr=Wn(gr),br=I({},gr,{view:0,detail:0}),yr=Wn(br),da,Ja,cs,Di=I({},br,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rl,button:0,buttons:0,relatedTarget:function(M){return M.relatedTarget===void 0?M.fromElement===M.srcElement?M.toElement:M.fromElement:M.relatedTarget},movementX:function(M){return"movementX"in M?M.movementX:(M!==cs&&(cs&&M.type==="mousemove"?(da=M.screenX-cs.screenX,Ja=M.screenY-cs.screenY):Ja=da=0,cs=M),da)},movementY:function(M){return"movementY"in M?M.movementY:Ja}}),Ns=Wn(Di),Os=I({},Di,{dataTransfer:0}),ro=Wn(Os),ao=I({},br,{relatedTarget:0}),so=Wn(ao),Qi=I({},gr,{animationName:0,elapsedTime:0,pseudoElement:0}),Aa=Wn(Qi),ea=I({},gr,{clipboardData:function(M){return"clipboardData"in M?M.clipboardData:window.clipboardData}}),Ua=Wn(ea),Ds=I({},gr,{data:0}),Tl=Wn(Ds),Cl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fc(M){var O=this.nativeEvent;return O.getModifierState?O.getModifierState(M):(M=hc[M])?!!O[M]:!1}function Rl(){return fc}var Ml=I({},br,{key:function(M){if(M.key){var O=Cl[M.key]||M.key;if(O!=="Unidentified")return O}return M.type==="keypress"?(M=vi(M),M===13?"Enter":String.fromCharCode(M)):M.type==="keydown"||M.type==="keyup"?Xc[M.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rl,charCode:function(M){return M.type==="keypress"?vi(M):0},keyCode:function(M){return M.type==="keydown"||M.type==="keyup"?M.keyCode:0},which:function(M){return M.type==="keypress"?vi(M):M.type==="keydown"||M.type==="keyup"?M.keyCode:0}}),oo=Wn(Ml),kl=I({},Di,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pc=Wn(kl),Co=I({},br,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rl}),Yc=Wn(Co),Zc=I({},gr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Hu=Wn(Zc),ta=I({},Di,{deltaX:function(M){return"deltaX"in M?M.deltaX:"wheelDeltaX"in M?-M.wheelDeltaX:0},deltaY:function(M){return"deltaY"in M?M.deltaY:"wheelDeltaY"in M?-M.wheelDeltaY:"wheelDelta"in M?-M.wheelDelta:0},deltaZ:0,deltaMode:0}),mc=Wn(ta),pe=I({},gr,{newState:0,oldState:0}),Oe=Wn(pe),Ue=[9,13,27,32],Ze=Xn&&"CompositionEvent"in window,ft=null;Xn&&"documentMode"in document&&(ft=document.documentMode);var bt=Xn&&"TextEvent"in window&&!ft,gt=Xn&&(!Ze||ft&&8<ft&&11>=ft),Dt=" ",Zt=!1;function En(M,O){switch(M){case"keyup":return Ue.indexOf(O.keyCode)!==-1;case"keydown":return O.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ln(M){return M=M.detail,typeof M=="object"&&"data"in M?M.data:null}var er=!1;function Yn(M,O){switch(M){case"compositionend":return Ln(O);case"keypress":return O.which!==32?null:(Zt=!0,Dt);case"textInput":return M=O.data,M===Dt&&Zt?null:M;default:return null}}function $n(M,O){if(er)return M==="compositionend"||!Ze&&En(M,O)?(M=Pr(),ii=Er=Kn=null,er=!1,M):null;switch(M){case"paste":return null;case"keypress":if(!(O.ctrlKey||O.altKey||O.metaKey)||O.ctrlKey&&O.altKey){if(O.char&&1<O.char.length)return O.char;if(O.which)return String.fromCharCode(O.which)}return null;case"compositionend":return gt&&O.locale!=="ko"?null:O.data;default:return null}}var cr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cr(M){var O=M&&M.nodeName&&M.nodeName.toLowerCase();return O==="input"?!!cr[M.type]:O==="textarea"}function ui(M,O,V,Q){sn?xn?xn.push(Q):xn=[Q]:sn=Q,O=af(O,"onChange"),0<O.length&&(V=new fr("onChange","change",null,V,Q),M.push({event:V,listeners:O}))}var Qr=null,Ri=null;function Ma(M){Jf(M,0)}function qi(M){var O=wn(M);if(Pn(O))return M}function Zr(M,O){if(M==="change")return O}var bi=!1;if(Xn){var $a;if(Xn){var gc="oninput"in document;if(!gc){var yc=document.createElement("div");yc.setAttribute("oninput","return;"),gc=typeof yc.oninput=="function"}$a=gc}else $a=!1;bi=$a&&(!document.documentMode||9<document.documentMode)}function za(){Qr&&(Qr.detachEvent("onpropertychange",el),Ri=Qr=null)}function el(M){if(M.propertyName==="value"&&qi(Ri)){var O=[];ui(O,Ri,M,zt(M)),Tr(Ma,O)}}function Kc(M,O,V){M==="focusin"?(za(),Qr=O,Ri=V,Qr.attachEvent("onpropertychange",el)):M==="focusout"&&za()}function Ro(M){if(M==="selectionchange"||M==="keyup"||M==="keydown")return qi(Ri)}function th(M,O){if(M==="click")return qi(O)}function nh(M,O){if(M==="input"||M==="change")return qi(O)}function qu(M,O){return M===O&&(M!==0||1/M===1/O)||M!==M&&O!==O}var ka=typeof Object.is=="function"?Object.is:qu;function Il(M,O){if(ka(M,O))return!0;if(typeof M!="object"||M===null||typeof O!="object"||O===null)return!1;var V=Object.keys(M),Q=Object.keys(O);if(V.length!==Q.length)return!1;for(Q=0;Q<V.length;Q++){var me=V[Q];if(!pt.call(O,me)||!ka(M[me],O[me]))return!1}return!0}function vc(M){for(;M&&M.firstChild;)M=M.firstChild;return M}function Nl(M,O){var V=vc(M);M=0;for(var Q;V;){if(V.nodeType===3){if(Q=M+V.textContent.length,M<=O&&Q>=O)return{node:V,offset:O-M};M=Q}e:{for(;V;){if(V.nextSibling){V=V.nextSibling;break e}V=V.parentNode}V=void 0}V=vc(V)}}function Ei(M,O){return M&&O?M===O?!0:M&&M.nodeType===3?!1:O&&O.nodeType===3?Ei(M,O.parentNode):"contains"in M?M.contains(O):M.compareDocumentPosition?!!(M.compareDocumentPosition(O)&16):!1:!1}function rh(M){M=M!=null&&M.ownerDocument!=null&&M.ownerDocument.defaultView!=null?M.ownerDocument.defaultView:window;for(var O=fn(M.document);O instanceof M.HTMLIFrameElement;){try{var V=typeof O.contentWindow.location.href=="string"}catch{V=!1}if(V)M=O.contentWindow;else break;O=fn(M.document)}return O}function Wu(M){var O=M&&M.nodeName&&M.nodeName.toLowerCase();return O&&(O==="input"&&(M.type==="text"||M.type==="search"||M.type==="tel"||M.type==="url"||M.type==="password")||O==="textarea"||M.contentEditable==="true")}var ih=Xn&&"documentMode"in document&&11>=document.documentMode,Ls=null,Ps=null,Ol=null,Jc=!1;function Dl(M,O,V){var Q=V.window===V?V.document:V.nodeType===9?V:V.ownerDocument;Jc||Ls==null||Ls!==fn(Q)||(Q=Ls,"selectionStart"in Q&&Wu(Q)?Q={start:Q.selectionStart,end:Q.selectionEnd}:(Q=(Q.ownerDocument&&Q.ownerDocument.defaultView||window).getSelection(),Q={anchorNode:Q.anchorNode,anchorOffset:Q.anchorOffset,focusNode:Q.focusNode,focusOffset:Q.focusOffset}),Ol&&Il(Ol,Q)||(Ol=Q,Q=af(Ps,"onSelect"),0<Q.length&&(O=new fr("onSelect","select",null,O,V),M.push({event:O,listeners:Q}),O.target=Ls)))}function wa(M,O){var V={};return V[M.toLowerCase()]=O.toLowerCase(),V["Webkit"+M]="webkit"+O,V["Moz"+M]="moz"+O,V}var tl={animationend:wa("Animation","AnimationEnd"),animationiteration:wa("Animation","AnimationIteration"),animationstart:wa("Animation","AnimationStart"),transitionrun:wa("Transition","TransitionRun"),transitionstart:wa("Transition","TransitionStart"),transitioncancel:wa("Transition","TransitionCancel"),transitionend:wa("Transition","TransitionEnd")},bc={},Xu={};Xn&&(Xu=document.createElement("div").style,"AnimationEvent"in window||(delete tl.animationend.animation,delete tl.animationiteration.animation,delete tl.animationstart.animation),"TransitionEvent"in window||delete tl.transitionend.transition);function lo(M){if(bc[M])return bc[M];if(!tl[M])return M;var O=tl[M],V;for(V in O)if(O.hasOwnProperty(V)&&V in Xu)return bc[M]=O[V];return M}var Qc=lo("animationend"),_c=lo("animationiteration"),Yu=lo("animationstart"),ah=lo("transitionrun"),_f=lo("transitionstart"),sh=lo("transitioncancel"),Zu=lo("transitionend"),us=new Map,Sc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Sc.push("scrollEnd");function ds(M,O){us.set(M,O),Nt(O,[M])}var xc=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var O=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(O))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},hs=[],co=0,ha=0;function Ec(){for(var M=co,O=ha=co=0;O<M;){var V=hs[O];hs[O++]=null;var Q=hs[O];hs[O++]=null;var me=hs[O];hs[O++]=null;var ve=hs[O];if(hs[O++]=null,Q!==null&&me!==null){var Ge=Q.pending;Ge===null?me.next=me:(me.next=Ge.next,Ge.next=me),Q.pending=me}ve!==0&&Mo(V,me,ve)}}function fa(M,O,V,Q){hs[co++]=M,hs[co++]=O,hs[co++]=V,hs[co++]=Q,ha|=Q,M.lanes|=Q,M=M.alternate,M!==null&&(M.lanes|=Q)}function eu(M,O,V,Q){return fa(M,O,V,Q),fs(M)}function Ia(M,O){return fa(M,null,null,O),fs(M)}function Mo(M,O,V){M.lanes|=V;var Q=M.alternate;Q!==null&&(Q.lanes|=V);for(var me=!1,ve=M.return;ve!==null;)ve.childLanes|=V,Q=ve.alternate,Q!==null&&(Q.childLanes|=V),ve.tag===22&&(M=ve.stateNode,M===null||M._visibility&1||(me=!0)),M=ve,ve=ve.return;return M.tag===3?(ve=M.stateNode,me&&O!==null&&(me=31-nt(V),M=ve.hiddenUpdates,Q=M[me],Q===null?M[me]=[O]:Q.push(O),O.lane=V|536870912),ve):null}function fs(M){if(50<Xo)throw Xo=0,xl=null,Error(f(185));for(var O=M.return;O!==null;)M=O,O=M.return;return M.tag===3?M.stateNode:null}var ko={};function Ku(M,O,V,Q){this.tag=M,this.key=V,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=O,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=Q,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Li(M,O,V,Q){return new Ku(M,O,V,Q)}function tu(M){return M=M.prototype,!(!M||!M.isReactComponent)}function Ga(M,O){var V=M.alternate;return V===null?(V=Li(M.tag,O,M.key,M.mode),V.elementType=M.elementType,V.type=M.type,V.stateNode=M.stateNode,V.alternate=M,M.alternate=V):(V.pendingProps=O,V.type=M.type,V.flags=0,V.subtreeFlags=0,V.deletions=null),V.flags=M.flags&65011712,V.childLanes=M.childLanes,V.lanes=M.lanes,V.child=M.child,V.memoizedProps=M.memoizedProps,V.memoizedState=M.memoizedState,V.updateQueue=M.updateQueue,O=M.dependencies,V.dependencies=O===null?null:{lanes:O.lanes,firstContext:O.firstContext},V.sibling=M.sibling,V.index=M.index,V.ref=M.ref,V.refCleanup=M.refCleanup,V}function Ll(M,O){M.flags&=65011714;var V=M.alternate;return V===null?(M.childLanes=0,M.lanes=O,M.child=null,M.subtreeFlags=0,M.memoizedProps=null,M.memoizedState=null,M.updateQueue=null,M.dependencies=null,M.stateNode=null):(M.childLanes=V.childLanes,M.lanes=V.lanes,M.child=V.child,M.subtreeFlags=0,M.deletions=null,M.memoizedProps=V.memoizedProps,M.memoizedState=V.memoizedState,M.updateQueue=V.updateQueue,M.type=V.type,O=V.dependencies,M.dependencies=O===null?null:{lanes:O.lanes,firstContext:O.firstContext}),M}function Fs(M,O,V,Q,me,ve){var Ge=0;if(Q=M,typeof M=="function")tu(M)&&(Ge=1);else if(typeof M=="string")Ge=rm(M,V,ue.current)?26:M==="html"||M==="head"||M==="body"?27:5;else e:switch(M){case se:return M=Li(31,V,O,me),M.elementType=se,M.lanes=ve,M;case H:return Io(V.children,me,ve,O);case z:Ge=8,me|=24;break;case U:return M=Li(12,V,O,me|2),M.elementType=U,M.lanes=ve,M;case Z:return M=Li(13,V,O,me),M.elementType=Z,M.lanes=ve,M;case J:return M=Li(19,V,O,me),M.elementType=J,M.lanes=ve,M;default:if(typeof M=="object"&&M!==null)switch(M.$$typeof){case Y:Ge=10;break e;case G:Ge=9;break e;case K:Ge=11;break e;case te:Ge=14;break e;case de:Ge=16,Q=null;break e}Ge=29,V=Error(f(130,M===null?"null":typeof M,"")),Q=null}return O=Li(Ge,V,O,me),O.elementType=M,O.type=Q,O.lanes=ve,O}function Io(M,O,V,Q){return M=Li(7,M,Q,O),M.lanes=V,M}function nu(M,O,V){return M=Li(6,M,null,O),M.lanes=V,M}function Pl(M){var O=Li(18,null,null,0);return O.stateNode=M,O}function ru(M,O,V){return O=Li(4,M.children!==null?M.children:[],M.key,O),O.lanes=V,O.stateNode={containerInfo:M.containerInfo,pendingChildren:null,implementation:M.implementation},O}var Ac=new WeakMap;function Qa(M,O){if(typeof M=="object"&&M!==null){var V=Ac.get(M);return V!==void 0?V:(O={value:M,source:O,stack:ze(O)},Ac.set(M,O),O)}return{value:M,source:O,stack:ze(O)}}var No=[],Oo=0,Fl=null,Bl=0,ja=[],ki=0,uo=null,Pi=1,Cs="";function Bs(M,O){No[Oo++]=Bl,No[Oo++]=Fl,Fl=M,Bl=O}function oh(M,O,V){ja[ki++]=Pi,ja[ki++]=Cs,ja[ki++]=uo,uo=M;var Q=Pi;M=Cs;var me=32-nt(Q)-1;Q&=~(1<<me),V+=1;var ve=32-nt(O)+me;if(30<ve){var Ge=me-me%5;ve=(Q&(1<<Ge)-1).toString(32),Q>>=Ge,me-=Ge,Pi=1<<32-nt(O)+me|V<<me|Q,Cs=ve+M}else Pi=1<<ve|V<<me|Q,Cs=M}function Us(M){M.return!==null&&(Bs(M,1),oh(M,1,0))}function iu(M){for(;M===Fl;)Fl=No[--Oo],No[Oo]=null,Bl=No[--Oo],No[Oo]=null;for(;M===uo;)uo=ja[--ki],ja[ki]=null,Cs=ja[--ki],ja[ki]=null,Pi=ja[--ki],ja[ki]=null}function au(M,O){ja[ki++]=Pi,ja[ki++]=Cs,ja[ki++]=uo,Pi=O.id,Cs=O.overflow,uo=M}var Gi=null,Ai=null,Kr=!1,ho=null,es=!1,Ul=Error(f(519));function $s(M){var O=Error(f(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw zs(Qa(O,M)),Ul}function lh(M){var O=M.stateNode,V=M.type,Q=M.memoizedProps;switch(O[Hr]=M,O[Xe]=Q,V){case"dialog":ti("cancel",O),ti("close",O);break;case"iframe":case"object":case"embed":ti("load",O);break;case"video":case"audio":for(V=0;V<Ts.length;V++)ti(Ts[V],O);break;case"source":ti("error",O);break;case"img":case"image":case"link":ti("error",O),ti("load",O);break;case"details":ti("toggle",O);break;case"input":ti("invalid",O),fi(O,Q.value,Q.defaultValue,Q.checked,Q.defaultChecked,Q.type,Q.name,!0);break;case"select":ti("invalid",O);break;case"textarea":ti("invalid",O),li(O,Q.value,Q.defaultValue,Q.children)}V=Q.children,typeof V!="string"&&typeof V!="number"&&typeof V!="bigint"||O.textContent===""+V||Q.suppressHydrationWarning===!0||np(O.textContent,V)?(Q.popover!=null&&(ti("beforetoggle",O),ti("toggle",O)),Q.onScroll!=null&&ti("scroll",O),Q.onScrollEnd!=null&&ti("scrollend",O),Q.onClick!=null&&(O.onclick=Pt),O=!0):O=!1,O||$s(M,!0)}function ch(M){for(Gi=M.return;Gi;)switch(Gi.tag){case 5:case 31:case 13:es=!1;return;case 27:case 3:es=!0;return;default:Gi=Gi.return}}function $l(M){if(M!==Gi)return!1;if(!Kr)return ch(M),Kr=!0,!1;var O=M.tag,V;if((V=O!==3&&O!==27)&&((V=O===5)&&(V=M.type,V=!(V!=="form"&&V!=="button")||Pf(M.type,M.memoizedProps)),V=!V),V&&Ai&&$s(M),ch(M),O===13){if(M=M.memoizedState,M=M!==null?M.dehydrated:null,!M)throw Error(f(317));Ai=dp(M)}else if(O===31){if(M=M.memoizedState,M=M!==null?M.dehydrated:null,!M)throw Error(f(317));Ai=dp(M)}else O===27?(O=Ai,sc(M.type)?(M=zf,zf=null,Ai=M):Ai=O):Ai=Gi?to(M.stateNode.nextSibling):null;return!0}function Do(){Ai=Gi=null,Kr=!1}function su(){var M=ho;return M!==null&&(Vi===null?Vi=M:Vi.push.apply(Vi,M),ho=null),M}function zs(M){ho===null?ho=[M]:ho.push(M)}var zl=ae(null),Lo=null,Gs=null;function fo(M,O,V){he(zl,O._currentValue),O._currentValue=V}function js(M){M._currentValue=zl.current,be(zl)}function ou(M,O,V){for(;M!==null;){var Q=M.alternate;if((M.childLanes&O)!==O?(M.childLanes|=O,Q!==null&&(Q.childLanes|=O)):Q!==null&&(Q.childLanes&O)!==O&&(Q.childLanes|=O),M===V)break;M=M.return}}function lu(M,O,V,Q){var me=M.child;for(me!==null&&(me.return=M);me!==null;){var ve=me.dependencies;if(ve!==null){var Ge=me.child;ve=ve.firstContext;e:for(;ve!==null;){var rt=ve;ve=me;for(var Rt=0;Rt<O.length;Rt++)if(rt.context===O[Rt]){ve.lanes|=V,rt=ve.alternate,rt!==null&&(rt.lanes|=V),ou(ve.return,V,M),Q||(Ge=null);break e}ve=rt.next}}else if(me.tag===18){if(Ge=me.return,Ge===null)throw Error(f(341));Ge.lanes|=V,ve=Ge.alternate,ve!==null&&(ve.lanes|=V),ou(Ge,V,M),Ge=null}else Ge=me.child;if(Ge!==null)Ge.return=me;else for(Ge=me;Ge!==null;){if(Ge===M){Ge=null;break}if(me=Ge.sibling,me!==null){me.return=Ge.return,Ge=me;break}Ge=Ge.return}me=Ge}}function Vs(M,O,V,Q){M=null;for(var me=O,ve=!1;me!==null;){if(!ve){if((me.flags&524288)!==0)ve=!0;else if((me.flags&262144)!==0)break}if(me.tag===10){var Ge=me.alternate;if(Ge===null)throw Error(f(387));if(Ge=Ge.memoizedProps,Ge!==null){var rt=me.type;ka(me.pendingProps.value,Ge.value)||(M!==null?M.push(rt):M=[rt])}}else if(me===_e.current){if(Ge=me.alternate,Ge===null)throw Error(f(387));Ge.memoizedState.memoizedState!==me.memoizedState.memoizedState&&(M!==null?M.push(Kd):M=[Kd])}me=me.return}M!==null&&lu(O,M,V,Q),O.flags|=262144}function wc(M){for(M=M.firstContext;M!==null;){if(!ka(M.context._currentValue,M.memoizedValue))return!0;M=M.next}return!1}function Po(M){Lo=M,Gs=null,M=M.dependencies,M!==null&&(M.firstContext=null)}function Sr(M){return uh(Lo,M)}function Gl(M,O){return Lo===null&&Po(M),uh(M,O)}function uh(M,O){var V=O._currentValue;if(O={context:O,memoizedValue:V,next:null},Gs===null){if(M===null)throw Error(f(308));Gs=O,M.dependencies={lanes:0,firstContext:O},M.flags|=524288}else Gs=Gs.next=O;return V}var dh=typeof AbortController<"u"?AbortController:function(){var M=[],O=this.signal={aborted:!1,addEventListener:function(V,Q){M.push(Q)}};this.abort=function(){O.aborted=!0,M.forEach(function(V){return V()})}},Sf=s.unstable_scheduleCallback,xf=s.unstable_NormalPriority,na={$$typeof:Y,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ju(){return{controller:new dh,data:new Map,refCount:0}}function nl(M){M.refCount--,M.refCount===0&&Sf(xf,function(){M.controller.abort()})}var ts=null,cu=0,po=0,ps=null;function Qu(M,O){if(ts===null){var V=ts=[];cu=0,po=tn(),ps={status:"pending",value:void 0,then:function(Q){V.push(Q)}}}return cu++,O.then(ed,ed),O}function ed(){if(--cu===0&&ts!==null){ps!==null&&(ps.status="fulfilled");var M=ts;ts=null,po=0,ps=null;for(var O=0;O<M.length;O++)(0,M[O])()}}function nd(M,O){var V=[],Q={status:"pending",value:null,reason:null,then:function(me){V.push(me)}};return M.then(function(){Q.status="fulfilled",Q.value=O;for(var me=0;me<V.length;me++)(0,V[me])(O)},function(me){for(Q.status="rejected",Q.reason=me,me=0;me<V.length;me++)(0,V[me])(void 0)}),Q}var hh=Me.S;Me.S=function(M,O){Hd=Le(),typeof O=="object"&&O!==null&&typeof O.then=="function"&&Qu(M,O),hh!==null&&hh(M,O)};var Fo=ae(null);function uu(){var M=Fo.current;return M!==null?M:xr.pooledCache}function Tc(M,O){O===null?he(Fo,Fo.current):he(Fo,O.pool)}function rd(){var M=uu();return M===null?null:{parent:na._currentValue,pool:M}}var rl=Error(f(460)),Cc=Error(f(474)),Fr=Error(f(542)),du={then:function(){}};function Va(M){return M=M.status,M==="fulfilled"||M==="rejected"}function hu(M,O,V){switch(V=M[V],V===void 0?M.push(O):V!==O&&(O.then(Pt,Pt),O=V),O.status){case"fulfilled":return O.value;case"rejected":throw M=O.reason,ol(M),M;default:if(typeof O.status=="string")O.then(Pt,Pt);else{if(M=xr,M!==null&&100<M.shellSuspendCounter)throw Error(f(482));M=O,M.status="pending",M.then(function(Q){if(O.status==="pending"){var me=O;me.status="fulfilled",me.value=Q}},function(Q){if(O.status==="pending"){var me=O;me.status="rejected",me.reason=Q}})}switch(O.status){case"fulfilled":return O.value;case"rejected":throw M=O.reason,ol(M),M}throw Hs=O,rl}}function il(M){try{var O=M._init;return O(M._payload)}catch(V){throw V!==null&&typeof V=="object"&&typeof V.then=="function"?(Hs=V,rl):V}}var Hs=null;function sl(){if(Hs===null)throw Error(f(459));var M=Hs;return Hs=null,M}function ol(M){if(M===rl||M===Fr)throw Error(f(483))}var ll=null,cl=0;function Rc(M){var O=cl;return cl+=1,ll===null&&(ll=[]),hu(ll,M,O)}function ms(M,O){O=O.props.ref,M.ref=O!==void 0?O:null}function jl(M,O){throw O.$$typeof===N?Error(f(525)):(M=Object.prototype.toString.call(O),Error(f(31,M==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":M)))}function fu(M){function O(Bt,Lt){if(M){var Vt=Bt.deletions;Vt===null?(Bt.deletions=[Lt],Bt.flags|=16):Vt.push(Lt)}}function V(Bt,Lt){if(!M)return null;for(;Lt!==null;)O(Bt,Lt),Lt=Lt.sibling;return null}function Q(Bt){for(var Lt=new Map;Bt!==null;)Bt.key!==null?Lt.set(Bt.key,Bt):Lt.set(Bt.index,Bt),Bt=Bt.sibling;return Lt}function me(Bt,Lt){return Bt=Ga(Bt,Lt),Bt.index=0,Bt.sibling=null,Bt}function ve(Bt,Lt,Vt){return Bt.index=Vt,M?(Vt=Bt.alternate,Vt!==null?(Vt=Vt.index,Vt<Lt?(Bt.flags|=67108866,Lt):Vt):(Bt.flags|=67108866,Lt)):(Bt.flags|=1048576,Lt)}function Ge(Bt){return M&&Bt.alternate===null&&(Bt.flags|=67108866),Bt}function rt(Bt,Lt,Vt,hn){return Lt===null||Lt.tag!==6?(Lt=nu(Vt,Bt.mode,hn),Lt.return=Bt,Lt):(Lt=me(Lt,Vt),Lt.return=Bt,Lt)}function Rt(Bt,Lt,Vt,hn){var or=Vt.type;return or===H?un(Bt,Lt,Vt.props.children,hn,Vt.key):Lt!==null&&(Lt.elementType===or||typeof or=="object"&&or!==null&&or.$$typeof===de&&il(or)===Lt.type)?(Lt=me(Lt,Vt.props),ms(Lt,Vt),Lt.return=Bt,Lt):(Lt=Fs(Vt.type,Vt.key,Vt.props,null,Bt.mode,hn),ms(Lt,Vt),Lt.return=Bt,Lt)}function Wt(Bt,Lt,Vt,hn){return Lt===null||Lt.tag!==4||Lt.stateNode.containerInfo!==Vt.containerInfo||Lt.stateNode.implementation!==Vt.implementation?(Lt=ru(Vt,Bt.mode,hn),Lt.return=Bt,Lt):(Lt=me(Lt,Vt.children||[]),Lt.return=Bt,Lt)}function un(Bt,Lt,Vt,hn,or){return Lt===null||Lt.tag!==7?(Lt=Io(Vt,Bt.mode,hn,or),Lt.return=Bt,Lt):(Lt=me(Lt,Vt),Lt.return=Bt,Lt)}function yn(Bt,Lt,Vt){if(typeof Lt=="string"&&Lt!==""||typeof Lt=="number"||typeof Lt=="bigint")return Lt=nu(""+Lt,Bt.mode,Vt),Lt.return=Bt,Lt;if(typeof Lt=="object"&&Lt!==null){switch(Lt.$$typeof){case L:return Vt=Fs(Lt.type,Lt.key,Lt.props,null,Bt.mode,Vt),ms(Vt,Lt),Vt.return=Bt,Vt;case F:return Lt=ru(Lt,Bt.mode,Vt),Lt.return=Bt,Lt;case de:return Lt=il(Lt),yn(Bt,Lt,Vt)}if(Be(Lt)||Ee(Lt))return Lt=Io(Lt,Bt.mode,Vt,null),Lt.return=Bt,Lt;if(typeof Lt.then=="function")return yn(Bt,Rc(Lt),Vt);if(Lt.$$typeof===Y)return yn(Bt,Gl(Bt,Lt),Vt);jl(Bt,Lt)}return null}function Jt(Bt,Lt,Vt,hn){var or=Lt!==null?Lt.key:null;if(typeof Vt=="string"&&Vt!==""||typeof Vt=="number"||typeof Vt=="bigint")return or!==null?null:rt(Bt,Lt,""+Vt,hn);if(typeof Vt=="object"&&Vt!==null){switch(Vt.$$typeof){case L:return Vt.key===or?Rt(Bt,Lt,Vt,hn):null;case F:return Vt.key===or?Wt(Bt,Lt,Vt,hn):null;case de:return Vt=il(Vt),Jt(Bt,Lt,Vt,hn)}if(Be(Vt)||Ee(Vt))return or!==null?null:un(Bt,Lt,Vt,hn,null);if(typeof Vt.then=="function")return Jt(Bt,Lt,Rc(Vt),hn);if(Vt.$$typeof===Y)return Jt(Bt,Lt,Gl(Bt,Vt),hn);jl(Bt,Vt)}return null}function rn(Bt,Lt,Vt,hn,or){if(typeof hn=="string"&&hn!==""||typeof hn=="number"||typeof hn=="bigint")return Bt=Bt.get(Vt)||null,rt(Lt,Bt,""+hn,or);if(typeof hn=="object"&&hn!==null){switch(hn.$$typeof){case L:return Bt=Bt.get(hn.key===null?Vt:hn.key)||null,Rt(Lt,Bt,hn,or);case F:return Bt=Bt.get(hn.key===null?Vt:hn.key)||null,Wt(Lt,Bt,hn,or);case de:return hn=il(hn),rn(Bt,Lt,Vt,hn,or)}if(Be(hn)||Ee(hn))return Bt=Bt.get(Vt)||null,un(Lt,Bt,hn,or,null);if(typeof hn.then=="function")return rn(Bt,Lt,Vt,Rc(hn),or);if(hn.$$typeof===Y)return rn(Bt,Lt,Vt,Gl(Lt,hn),or);jl(Lt,hn)}return null}function qn(Bt,Lt,Vt,hn){for(var or=null,di=null,Zn=Lt,zr=Lt=0,ri=null;Zn!==null&&zr<Vt.length;zr++){Zn.index>zr?(ri=Zn,Zn=null):ri=Zn.sibling;var hi=Jt(Bt,Zn,Vt[zr],hn);if(hi===null){Zn===null&&(Zn=ri);break}M&&Zn&&hi.alternate===null&&O(Bt,Zn),Lt=ve(hi,Lt,zr),di===null?or=hi:di.sibling=hi,di=hi,Zn=ri}if(zr===Vt.length)return V(Bt,Zn),Kr&&Bs(Bt,zr),or;if(Zn===null){for(;zr<Vt.length;zr++)Zn=yn(Bt,Vt[zr],hn),Zn!==null&&(Lt=ve(Zn,Lt,zr),di===null?or=Zn:di.sibling=Zn,di=Zn);return Kr&&Bs(Bt,zr),or}for(Zn=Q(Zn);zr<Vt.length;zr++)ri=rn(Zn,Bt,zr,Vt[zr],hn),ri!==null&&(M&&ri.alternate!==null&&Zn.delete(ri.key===null?zr:ri.key),Lt=ve(ri,Lt,zr),di===null?or=ri:di.sibling=ri,di=ri);return M&&Zn.forEach(function(dc){return O(Bt,dc)}),Kr&&Bs(Bt,zr),or}function vr(Bt,Lt,Vt,hn){if(Vt==null)throw Error(f(151));for(var or=null,di=null,Zn=Lt,zr=Lt=0,ri=null,hi=Vt.next();Zn!==null&&!hi.done;zr++,hi=Vt.next()){Zn.index>zr?(ri=Zn,Zn=null):ri=Zn.sibling;var dc=Jt(Bt,Zn,hi.value,hn);if(dc===null){Zn===null&&(Zn=ri);break}M&&Zn&&dc.alternate===null&&O(Bt,Zn),Lt=ve(dc,Lt,zr),di===null?or=dc:di.sibling=dc,di=dc,Zn=ri}if(hi.done)return V(Bt,Zn),Kr&&Bs(Bt,zr),or;if(Zn===null){for(;!hi.done;zr++,hi=Vt.next())hi=yn(Bt,hi.value,hn),hi!==null&&(Lt=ve(hi,Lt,zr),di===null?or=hi:di.sibling=hi,di=hi);return Kr&&Bs(Bt,zr),or}for(Zn=Q(Zn);!hi.done;zr++,hi=Vt.next())hi=rn(Zn,Bt,zr,hi.value,hn),hi!==null&&(M&&hi.alternate!==null&&Zn.delete(hi.key===null?zr:hi.key),Lt=ve(hi,Lt,zr),di===null?or=hi:di.sibling=hi,di=hi);return M&&Zn.forEach(function(pm){return O(Bt,pm)}),Kr&&Bs(Bt,zr),or}function Ci(Bt,Lt,Vt,hn){if(typeof Vt=="object"&&Vt!==null&&Vt.type===H&&Vt.key===null&&(Vt=Vt.props.children),typeof Vt=="object"&&Vt!==null){switch(Vt.$$typeof){case L:e:{for(var or=Vt.key;Lt!==null;){if(Lt.key===or){if(or=Vt.type,or===H){if(Lt.tag===7){V(Bt,Lt.sibling),hn=me(Lt,Vt.props.children),hn.return=Bt,Bt=hn;break e}}else if(Lt.elementType===or||typeof or=="object"&&or!==null&&or.$$typeof===de&&il(or)===Lt.type){V(Bt,Lt.sibling),hn=me(Lt,Vt.props),ms(hn,Vt),hn.return=Bt,Bt=hn;break e}V(Bt,Lt);break}else O(Bt,Lt);Lt=Lt.sibling}Vt.type===H?(hn=Io(Vt.props.children,Bt.mode,hn,Vt.key),hn.return=Bt,Bt=hn):(hn=Fs(Vt.type,Vt.key,Vt.props,null,Bt.mode,hn),ms(hn,Vt),hn.return=Bt,Bt=hn)}return Ge(Bt);case F:e:{for(or=Vt.key;Lt!==null;){if(Lt.key===or)if(Lt.tag===4&&Lt.stateNode.containerInfo===Vt.containerInfo&&Lt.stateNode.implementation===Vt.implementation){V(Bt,Lt.sibling),hn=me(Lt,Vt.children||[]),hn.return=Bt,Bt=hn;break e}else{V(Bt,Lt);break}else O(Bt,Lt);Lt=Lt.sibling}hn=ru(Vt,Bt.mode,hn),hn.return=Bt,Bt=hn}return Ge(Bt);case de:return Vt=il(Vt),Ci(Bt,Lt,Vt,hn)}if(Be(Vt))return qn(Bt,Lt,Vt,hn);if(Ee(Vt)){if(or=Ee(Vt),typeof or!="function")throw Error(f(150));return Vt=or.call(Vt),vr(Bt,Lt,Vt,hn)}if(typeof Vt.then=="function")return Ci(Bt,Lt,Rc(Vt),hn);if(Vt.$$typeof===Y)return Ci(Bt,Lt,Gl(Bt,Vt),hn);jl(Bt,Vt)}return typeof Vt=="string"&&Vt!==""||typeof Vt=="number"||typeof Vt=="bigint"?(Vt=""+Vt,Lt!==null&&Lt.tag===6?(V(Bt,Lt.sibling),hn=me(Lt,Vt),hn.return=Bt,Bt=hn):(V(Bt,Lt),hn=nu(Vt,Bt.mode,hn),hn.return=Bt,Bt=hn),Ge(Bt)):V(Bt,Lt)}return function(Bt,Lt,Vt,hn){try{cl=0;var or=Ci(Bt,Lt,Vt,hn);return ll=null,or}catch(Zn){if(Zn===rl||Zn===Fr)throw Zn;var di=Li(29,Zn,null,Bt.mode);return di.lanes=hn,di.return=Bt,di}}}var mo=fu(!0),pu=fu(!1),Na=!1;function Mc(M){M.updateQueue={baseState:M.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ad(M,O){M=M.updateQueue,O.updateQueue===M&&(O.updateQueue={baseState:M.baseState,firstBaseUpdate:M.firstBaseUpdate,lastBaseUpdate:M.lastBaseUpdate,shared:M.shared,callbacks:null})}function yo(M){return{lane:M,tag:0,payload:null,callback:null,next:null}}function Bo(M,O,V){var Q=M.updateQueue;if(Q===null)return null;if(Q=Q.shared,(Jn&2)!==0){var me=Q.pending;return me===null?O.next=O:(O.next=me.next,me.next=O),Q.pending=O,O=fs(M),Mo(M,null,V),O}return fa(M,Q,O,V),fs(M)}function Uo(M,O,V){if(O=O.updateQueue,O!==null&&(O=O.shared,(V&4194048)!==0)){var Q=O.lanes;Q&=M.pendingLanes,V|=Q,O.lanes=V,Yr(M,V)}}function sr(M,O){var V=M.updateQueue,Q=M.alternate;if(Q!==null&&(Q=Q.updateQueue,V===Q)){var me=null,ve=null;if(V=V.firstBaseUpdate,V!==null){do{var Ge={lane:V.lane,tag:V.tag,payload:V.payload,callback:null,next:null};ve===null?me=ve=Ge:ve=ve.next=Ge,V=V.next}while(V!==null);ve===null?me=ve=O:ve=ve.next=O}else me=ve=O;V={baseState:Q.baseState,firstBaseUpdate:me,lastBaseUpdate:ve,shared:Q.shared,callbacks:Q.callbacks},M.updateQueue=V;return}M=V.lastBaseUpdate,M===null?V.firstBaseUpdate=O:M.next=O,V.lastBaseUpdate=O}var sd=!1;function kc(){if(sd){var M=ps;if(M!==null)throw M}}function Vl(M,O,V,Q){sd=!1;var me=M.updateQueue;Na=!1;var ve=me.firstBaseUpdate,Ge=me.lastBaseUpdate,rt=me.shared.pending;if(rt!==null){me.shared.pending=null;var Rt=rt,Wt=Rt.next;Rt.next=null,Ge===null?ve=Wt:Ge.next=Wt,Ge=Rt;var un=M.alternate;un!==null&&(un=un.updateQueue,rt=un.lastBaseUpdate,rt!==Ge&&(rt===null?un.firstBaseUpdate=Wt:rt.next=Wt,un.lastBaseUpdate=Rt))}if(ve!==null){var yn=me.baseState;Ge=0,un=Wt=Rt=null,rt=ve;do{var Jt=rt.lane&-536870913,rn=Jt!==rt.lane;if(rn?(Dr&Jt)===Jt:(Q&Jt)===Jt){Jt!==0&&Jt===po&&(sd=!0),un!==null&&(un=un.next={lane:0,tag:rt.tag,payload:rt.payload,callback:null,next:null});e:{var qn=M,vr=rt;Jt=O;var Ci=V;switch(vr.tag){case 1:if(qn=vr.payload,typeof qn=="function"){yn=qn.call(Ci,yn,Jt);break e}yn=qn;break e;case 3:qn.flags=qn.flags&-65537|128;case 0:if(qn=vr.payload,Jt=typeof qn=="function"?qn.call(Ci,yn,Jt):qn,Jt==null)break e;yn=I({},yn,Jt);break e;case 2:Na=!0}}Jt=rt.callback,Jt!==null&&(M.flags|=64,rn&&(M.flags|=8192),rn=me.callbacks,rn===null?me.callbacks=[Jt]:rn.push(Jt))}else rn={lane:Jt,tag:rt.tag,payload:rt.payload,callback:rt.callback,next:null},un===null?(Wt=un=rn,Rt=yn):un=un.next=rn,Ge|=Jt;if(rt=rt.next,rt===null){if(rt=me.shared.pending,rt===null)break;rn=rt,rt=rn.next,rn.next=null,me.lastBaseUpdate=rn,me.shared.pending=null}}while(!0);un===null&&(Rt=yn),me.baseState=Rt,me.firstBaseUpdate=Wt,me.lastBaseUpdate=un,ve===null&&(me.shared.lanes=0),Js|=Ge,M.lanes=Ge,M.memoizedState=yn}}function Hl(M,O){if(typeof M!="function")throw Error(f(191,M));M.call(O)}function fh(M,O){var V=M.callbacks;if(V!==null)for(M.callbacks=null,M=0;M<V.length;M++)Hl(V[M],O)}var ql=ae(null),mu=ae(0);function ph(M,O){M=ss,he(mu,M),he(ql,O),ss=M|O.baseLanes}function od(){he(mu,ss),he(ql,ql.current)}function Ic(){ss=mu.current,be(ql),be(mu)}var Ha=ae(null),Oa=null;function vo(M){var O=M.alternate;he(Jr,Jr.current&1),he(Ha,M),Oa===null&&(O===null||ql.current!==null||O.memoizedState!==null)&&(Oa=M)}function ld(M){he(Jr,Jr.current),he(Ha,M),Oa===null&&(Oa=M)}function mh(M){M.tag===22?(he(Jr,Jr.current),he(Ha,M),Oa===null&&(Oa=M)):qa()}function qa(){he(Jr,Jr.current),he(Ha,Ha.current)}function Wi(M){be(Ha),Oa===M&&(Oa=null),be(Jr)}var Jr=ae(0);function ns(M){for(var O=M;O!==null;){if(O.tag===13){var V=O.memoizedState;if(V!==null&&(V=V.dehydrated,V===null||Uf(V)||$f(V)))return O}else if(O.tag===19&&(O.memoizedProps.revealOrder==="forwards"||O.memoizedProps.revealOrder==="backwards"||O.memoizedProps.revealOrder==="unstable_legacy-backwards"||O.memoizedProps.revealOrder==="together")){if((O.flags&128)!==0)return O}else if(O.child!==null){O.child.return=O,O=O.child;continue}if(O===M)break;for(;O.sibling===null;){if(O.return===null||O.return===M)return null;O=O.return}O.sibling.return=O.return,O=O.sibling}return null}var Ii=0,kr=null,_i=null,qr=null,gs=!1,Wl=!1,ul=!1,gu=0,Nc=0,Xl=null,cd=0;function Fi(){throw Error(f(321))}function ud(M,O){if(O===null)return!1;for(var V=0;V<O.length&&V<M.length;V++)if(!ka(M[V],O[V]))return!1;return!0}function yu(M,O,V,Q,me,ve){return Ii=ve,kr=O,O.memoizedState=null,O.updateQueue=null,O.lanes=0,Me.H=M===null||M.memoizedState===null?Xh:Id,ul=!1,ve=V(Q,me),ul=!1,Wl&&(ve=dl(O,V,Q,me)),gh(M),ve}function gh(M){Me.H=Yl;var O=_i!==null&&_i.next!==null;if(Ii=0,qr=_i=kr=null,gs=!1,Nc=0,Xl=null,O)throw Error(f(300));M===null||ra||(M=M.dependencies,M!==null&&wc(M)&&(ra=!0))}function dl(M,O,V,Q){kr=M;var me=0;do{if(Wl&&(Xl=null),Nc=0,Wl=!1,25<=me)throw Error(f(301));if(me+=1,qr=_i=null,M.updateQueue!=null){var ve=M.updateQueue;ve.lastEffect=null,ve.events=null,ve.stores=null,ve.memoCache!=null&&(ve.memoCache.index=0)}Me.H=ys,ve=O(V,Q)}while(Wl);return ve}function hl(){var M=Me.H,O=M.useState()[0];return O=typeof O.then=="function"?Oc(O):O,M=M.useState()[0],(_i!==null?_i.memoizedState:null)!==M&&(kr.flags|=1024),O}function dd(){var M=gu!==0;return gu=0,M}function hd(M,O,V){O.updateQueue=M.updateQueue,O.flags&=-2053,M.lanes&=~V}function pd(M){if(gs){for(M=M.memoizedState;M!==null;){var O=M.queue;O!==null&&(O.pending=null),M=M.next}gs=!1}Ii=0,qr=_i=kr=null,Wl=!1,Nc=gu=0,Xl=null}function sa(){var M={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qr===null?kr.memoizedState=qr=M:qr=qr.next=M,qr}function Xi(){if(_i===null){var M=kr.alternate;M=M!==null?M.memoizedState:null}else M=_i.next;var O=qr===null?kr.memoizedState:qr.next;if(O!==null)qr=O,_i=M;else{if(M===null)throw kr.alternate===null?Error(f(467)):Error(f(310));_i=M,M={memoizedState:_i.memoizedState,baseState:_i.baseState,baseQueue:_i.baseQueue,queue:_i.queue,next:null},qr===null?kr.memoizedState=qr=M:qr=qr.next=M}return qr}function vu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Oc(M){var O=Nc;return Nc+=1,Xl===null&&(Xl=[]),M=hu(Xl,M,O),O=kr,(qr===null?O.memoizedState:qr.next)===null&&(O=O.alternate,Me.H=O===null||O.memoizedState===null?Xh:Id),M}function $o(M){if(M!==null&&typeof M=="object"){if(typeof M.then=="function")return Oc(M);if(M.$$typeof===Y)return Sr(M)}throw Error(f(438,String(M)))}function md(M){var O=null,V=kr.updateQueue;if(V!==null&&(O=V.memoCache),O==null){var Q=kr.alternate;Q!==null&&(Q=Q.updateQueue,Q!==null&&(Q=Q.memoCache,Q!=null&&(O={data:Q.data.map(function(me){return me.slice()}),index:0})))}if(O==null&&(O={data:[],index:0}),V===null&&(V=vu(),kr.updateQueue=V),V.memoCache=O,V=O.data[O.index],V===void 0)for(V=O.data[O.index]=Array(M),Q=0;Q<M;Q++)V[Q]=ne;return O.index++,V}function bo(M,O){return typeof O=="function"?O(M):O}function bu(M){var O=Xi();return gd(O,_i,M)}function gd(M,O,V){var Q=M.queue;if(Q===null)throw Error(f(311));Q.lastRenderedReducer=V;var me=M.baseQueue,ve=Q.pending;if(ve!==null){if(me!==null){var Ge=me.next;me.next=ve.next,ve.next=Ge}O.baseQueue=me=ve,Q.pending=null}if(ve=M.baseState,me===null)M.memoizedState=ve;else{O=me.next;var rt=Ge=null,Rt=null,Wt=O,un=!1;do{var yn=Wt.lane&-536870913;if(yn!==Wt.lane?(Dr&yn)===yn:(Ii&yn)===yn){var Jt=Wt.revertLane;if(Jt===0)Rt!==null&&(Rt=Rt.next={lane:0,revertLane:0,gesture:null,action:Wt.action,hasEagerState:Wt.hasEagerState,eagerState:Wt.eagerState,next:null}),yn===po&&(un=!0);else if((Ii&Jt)===Jt){Wt=Wt.next,Jt===po&&(un=!0);continue}else yn={lane:0,revertLane:Wt.revertLane,gesture:null,action:Wt.action,hasEagerState:Wt.hasEagerState,eagerState:Wt.eagerState,next:null},Rt===null?(rt=Rt=yn,Ge=ve):Rt=Rt.next=yn,kr.lanes|=Jt,Js|=Jt;yn=Wt.action,ul&&V(ve,yn),ve=Wt.hasEagerState?Wt.eagerState:V(ve,yn)}else Jt={lane:yn,revertLane:Wt.revertLane,gesture:Wt.gesture,action:Wt.action,hasEagerState:Wt.hasEagerState,eagerState:Wt.eagerState,next:null},Rt===null?(rt=Rt=Jt,Ge=ve):Rt=Rt.next=Jt,kr.lanes|=yn,Js|=yn;Wt=Wt.next}while(Wt!==null&&Wt!==O);if(Rt===null?Ge=ve:Rt.next=rt,!ka(ve,M.memoizedState)&&(ra=!0,un&&(V=ps,V!==null)))throw V;M.memoizedState=ve,M.baseState=Ge,M.baseQueue=Rt,Q.lastRenderedState=ve}return me===null&&(Q.lanes=0),[M.memoizedState,Q.dispatch]}function yd(M){var O=Xi(),V=O.queue;if(V===null)throw Error(f(311));V.lastRenderedReducer=M;var Q=V.dispatch,me=V.pending,ve=O.memoizedState;if(me!==null){V.pending=null;var Ge=me=me.next;do ve=M(ve,Ge.action),Ge=Ge.next;while(Ge!==me);ka(ve,O.memoizedState)||(ra=!0),O.memoizedState=ve,O.baseQueue===null&&(O.baseState=ve),V.lastRenderedState=ve}return[ve,Q]}function yh(M,O,V){var Q=kr,me=Xi(),ve=Kr;if(ve){if(V===void 0)throw Error(f(407));V=V()}else V=O();var Ge=!ka((_i||me).memoizedState,V);if(Ge&&(me.memoizedState=V,ra=!0),me=me.queue,wd(Sh.bind(null,Q,me,M),[M]),me.getSnapshot!==O||Ge||qr!==null&&qr.memoizedState.tag&1){if(Q.flags|=2048,zo(9,{destroy:void 0},_h.bind(null,Q,me,V,O),null),xr===null)throw Error(f(349));ve||(Ii&127)!==0||bh(Q,O,V)}return V}function bh(M,O,V){M.flags|=16384,M={getSnapshot:O,value:V},O=kr.updateQueue,O===null?(O=vu(),kr.updateQueue=O,O.stores=[M]):(V=O.stores,V===null?O.stores=[M]:V.push(M))}function _h(M,O,V,Q){O.value=V,O.getSnapshot=Q,xh(O)&&Eh(M)}function Sh(M,O,V){return V(function(){xh(O)&&Eh(M)})}function xh(M){var O=M.getSnapshot;M=M.value;try{var V=O();return!ka(M,V)}catch{return!0}}function Eh(M){var O=Ia(M,2);O!==null&&Ur(O,M,2)}function vd(M){var O=sa();if(typeof M=="function"){var V=M;if(M=V(),ul){st(!0);try{V()}finally{st(!1)}}}return O.memoizedState=O.baseState=M,O.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bo,lastRenderedState:M},O}function bd(M,O,V,Q){return M.baseState=V,gd(M,_i,typeof Q=="function"?Q:bo)}function Ef(M,O,V,Q,me){if(Eu(M))throw Error(f(485));if(M=O.action,M!==null){var ve={payload:me,action:M,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Ge){ve.listeners.push(Ge)}};Me.T!==null?V(!0):ve.isTransition=!1,Q(ve),V=O.pending,V===null?(ve.next=O.pending=ve,Ah(O,ve)):(ve.next=V.next,O.pending=V.next=ve)}}function Ah(M,O){var V=O.action,Q=O.payload,me=M.state;if(O.isTransition){var ve=Me.T,Ge={};Me.T=Ge;try{var rt=V(me,Q),Rt=Me.S;Rt!==null&&Rt(Ge,rt),wh(M,O,rt)}catch(Wt){_d(M,O,Wt)}finally{ve!==null&&Ge.types!==null&&(ve.types=Ge.types),Me.T=ve}}else try{ve=V(me,Q),wh(M,O,ve)}catch(Wt){_d(M,O,Wt)}}function wh(M,O,V){V!==null&&typeof V=="object"&&typeof V.then=="function"?V.then(function(Q){Th(M,O,Q)},function(Q){return _d(M,O,Q)}):Th(M,O,V)}function Th(M,O,V){O.status="fulfilled",O.value=V,Ch(O),M.state=V,O=M.pending,O!==null&&(V=O.next,V===O?M.pending=null:(V=V.next,O.next=V,Ah(M,V)))}function _d(M,O,V){var Q=M.pending;if(M.pending=null,Q!==null){Q=Q.next;do O.status="rejected",O.reason=V,Ch(O),O=O.next;while(O!==Q)}M.action=null}function Ch(M){M=M.listeners;for(var O=0;O<M.length;O++)(0,M[O])()}function Sd(M,O){return O}function xd(M,O){if(Kr){var V=xr.formState;if(V!==null){e:{var Q=kr;if(Kr){if(Ai){t:{for(var me=Ai,ve=es;me.nodeType!==8;){if(!ve){me=null;break t}if(me=to(me.nextSibling),me===null){me=null;break t}}ve=me.data,me=ve==="F!"||ve==="F"?me:null}if(me){Ai=to(me.nextSibling),Q=me.data==="F!";break e}}$s(Q)}Q=!1}Q&&(O=V[0])}}return V=sa(),V.memoizedState=V.baseState=O,Q={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sd,lastRenderedState:O},V.queue=Q,V=Hh.bind(null,kr,Q),Q.dispatch=V,Q=vd(!1),ve=kd.bind(null,kr,!1,Q.queue),Q=sa(),me={state:O,dispatch:null,action:M,pending:null},Q.queue=me,V=Ef.bind(null,kr,me,ve,V),me.dispatch=V,Q.memoizedState=M,[O,V,!1]}function Rh(M){var O=Xi();return Ed(O,_i,M)}function Ed(M,O,V){if(O=gd(M,O,Sd)[0],M=bu(bo)[0],typeof O=="object"&&O!==null&&typeof O.then=="function")try{var Q=Oc(O)}catch(Ge){throw Ge===rl?Fr:Ge}else Q=O;O=Xi();var me=O.queue,ve=me.dispatch;return V!==O.memoizedState&&(kr.flags|=2048,zo(9,{destroy:void 0},Mh.bind(null,me,V),null)),[Q,ve,M]}function Mh(M,O){M.action=O}function Ad(M){var O=Xi(),V=_i;if(V!==null)return Ed(O,V,M);Xi(),O=O.memoizedState,V=Xi();var Q=V.queue.dispatch;return V.memoizedState=M,[O,Q,!1]}function zo(M,O,V,Q){return M={tag:M,create:V,deps:Q,inst:O,next:null},O=kr.updateQueue,O===null&&(O=vu(),kr.updateQueue=O),V=O.lastEffect,V===null?O.lastEffect=M.next=M:(Q=V.next,V.next=M,M.next=Q,O.lastEffect=M),M}function _u(){return Xi().memoizedState}function Su(M,O,V,Q){var me=sa();kr.flags|=M,me.memoizedState=zo(1|O,{destroy:void 0},V,Q===void 0?null:Q)}function xu(M,O,V,Q){var me=Xi();Q=Q===void 0?null:Q;var ve=me.memoizedState.inst;_i!==null&&Q!==null&&ud(Q,_i.memoizedState.deps)?me.memoizedState=zo(O,ve,V,Q):(kr.flags|=M,me.memoizedState=zo(1|O,ve,V,Q))}function kh(M,O){Su(8390656,8,M,O)}function wd(M,O){xu(2048,8,M,O)}function Ih(M){kr.flags|=4;var O=kr.updateQueue;if(O===null)O=vu(),kr.updateQueue=O,O.events=[M];else{var V=O.events;V===null?O.events=[M]:V.push(M)}}function Nh(M){var O=Xi().memoizedState;return Ih({ref:O,nextImpl:M}),function(){if((Jn&2)!==0)throw Error(f(440));return O.impl.apply(void 0,arguments)}}function Oh(M,O){return xu(4,2,M,O)}function Dh(M,O){return xu(4,4,M,O)}function Lh(M,O){if(typeof O=="function"){M=M();var V=O(M);return function(){typeof V=="function"?V():O(null)}}if(O!=null)return M=M(),O.current=M,function(){O.current=null}}function Ph(M,O,V){V=V!=null?V.concat([M]):null,xu(4,4,Lh.bind(null,O,M),V)}function Td(){}function Fh(M,O){var V=Xi();O=O===void 0?null:O;var Q=V.memoizedState;return O!==null&&ud(O,Q[1])?Q[0]:(V.memoizedState=[M,O],M)}function Bh(M,O){var V=Xi();O=O===void 0?null:O;var Q=V.memoizedState;if(O!==null&&ud(O,Q[1]))return Q[0];if(Q=M(),ul){st(!0);try{M()}finally{st(!1)}}return V.memoizedState=[Q,O],Q}function Cd(M,O,V){return V===void 0||(Ii&1073741824)!==0&&(Dr&261930)===0?M.memoizedState=O:(M.memoizedState=V,M=jr(),kr.lanes|=M,Js|=M,V)}function Uh(M,O,V,Q){return ka(V,O)?V:ql.current!==null?(M=Cd(M,V,Q),ka(M,O)||(ra=!0),M):(Ii&42)===0||(Ii&1073741824)!==0&&(Dr&261930)===0?(ra=!0,M.memoizedState=V):(M=jr(),kr.lanes|=M,Js|=M,O)}function $h(M,O,V,Q,me){var ve=Re.p;Re.p=ve!==0&&8>ve?ve:8;var Ge=Me.T,rt={};Me.T=rt,kd(M,!1,O,V);try{var Rt=me(),Wt=Me.S;if(Wt!==null&&Wt(rt,Rt),Rt!==null&&typeof Rt=="object"&&typeof Rt.then=="function"){var un=nd(Rt,Q);Dc(M,O,un,ls(M))}else Dc(M,O,Q,ls(M))}catch(yn){Dc(M,O,{then:function(){},status:"rejected",reason:yn},ls())}finally{Re.p=ve,Ge!==null&&rt.types!==null&&(Ge.types=rt.types),Me.T=Ge}}function Af(){}function Rd(M,O,V,Q){if(M.tag!==5)throw Error(f(476));var me=zh(M).queue;$h(M,me,O,Te,V===null?Af:function(){return Gh(M),V(Q)})}function zh(M){var O=M.memoizedState;if(O!==null)return O;O={memoizedState:Te,baseState:Te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bo,lastRenderedState:Te},next:null};var V={};return O.next={memoizedState:V,baseState:V,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:bo,lastRenderedState:V},next:null},M.memoizedState=O,M=M.alternate,M!==null&&(M.memoizedState=O),O}function Gh(M){var O=zh(M);O.next===null&&(O=M.alternate.memoizedState),Dc(M,O.next.queue,{},ls())}function Md(){return Sr(Kd)}function jh(){return Xi().memoizedState}function Vh(){return Xi().memoizedState}function wf(M){for(var O=M.return;O!==null;){switch(O.tag){case 24:case 3:var V=ls();M=yo(V);var Q=Bo(O,M,V);Q!==null&&(Ur(Q,O,V),Uo(Q,O,V)),O={cache:Ju()},M.payload=O;return}O=O.return}}function Tf(M,O,V){var Q=ls();V={lane:Q,revertLane:0,gesture:null,action:V,hasEagerState:!1,eagerState:null,next:null},Eu(M)?qh(O,V):(V=eu(M,O,V,Q),V!==null&&(Ur(V,M,Q),Wh(V,O,Q)))}function Hh(M,O,V){var Q=ls();Dc(M,O,V,Q)}function Dc(M,O,V,Q){var me={lane:Q,revertLane:0,gesture:null,action:V,hasEagerState:!1,eagerState:null,next:null};if(Eu(M))qh(O,me);else{var ve=M.alternate;if(M.lanes===0&&(ve===null||ve.lanes===0)&&(ve=O.lastRenderedReducer,ve!==null))try{var Ge=O.lastRenderedState,rt=ve(Ge,V);if(me.hasEagerState=!0,me.eagerState=rt,ka(rt,Ge))return fa(M,O,me,0),xr===null&&Ec(),!1}catch{}if(V=eu(M,O,me,Q),V!==null)return Ur(V,M,Q),Wh(V,O,Q),!0}return!1}function kd(M,O,V,Q){if(Q={lane:2,revertLane:tn(),gesture:null,action:Q,hasEagerState:!1,eagerState:null,next:null},Eu(M)){if(O)throw Error(f(479))}else O=eu(M,V,Q,2),O!==null&&Ur(O,M,2)}function Eu(M){var O=M.alternate;return M===kr||O!==null&&O===kr}function qh(M,O){Wl=gs=!0;var V=M.pending;V===null?O.next=O:(O.next=V.next,V.next=O),M.pending=O}function Wh(M,O,V){if((V&4194048)!==0){var Q=O.lanes;Q&=M.pendingLanes,V|=Q,O.lanes=V,Yr(M,V)}}var Yl={readContext:Sr,use:$o,useCallback:Fi,useContext:Fi,useEffect:Fi,useImperativeHandle:Fi,useLayoutEffect:Fi,useInsertionEffect:Fi,useMemo:Fi,useReducer:Fi,useRef:Fi,useState:Fi,useDebugValue:Fi,useDeferredValue:Fi,useTransition:Fi,useSyncExternalStore:Fi,useId:Fi,useHostTransitionStatus:Fi,useFormState:Fi,useActionState:Fi,useOptimistic:Fi,useMemoCache:Fi,useCacheRefresh:Fi};Yl.useEffectEvent=Fi;var Xh={readContext:Sr,use:$o,useCallback:function(M,O){return sa().memoizedState=[M,O===void 0?null:O],M},useContext:Sr,useEffect:kh,useImperativeHandle:function(M,O,V){V=V!=null?V.concat([M]):null,Su(4194308,4,Lh.bind(null,O,M),V)},useLayoutEffect:function(M,O){return Su(4194308,4,M,O)},useInsertionEffect:function(M,O){Su(4,2,M,O)},useMemo:function(M,O){var V=sa();O=O===void 0?null:O;var Q=M();if(ul){st(!0);try{M()}finally{st(!1)}}return V.memoizedState=[Q,O],Q},useReducer:function(M,O,V){var Q=sa();if(V!==void 0){var me=V(O);if(ul){st(!0);try{V(O)}finally{st(!1)}}}else me=O;return Q.memoizedState=Q.baseState=me,M={pending:null,lanes:0,dispatch:null,lastRenderedReducer:M,lastRenderedState:me},Q.queue=M,M=M.dispatch=Tf.bind(null,kr,M),[Q.memoizedState,M]},useRef:function(M){var O=sa();return M={current:M},O.memoizedState=M},useState:function(M){M=vd(M);var O=M.queue,V=Hh.bind(null,kr,O);return O.dispatch=V,[M.memoizedState,V]},useDebugValue:Td,useDeferredValue:function(M,O){var V=sa();return Cd(V,M,O)},useTransition:function(){var M=vd(!1);return M=$h.bind(null,kr,M.queue,!0,!1),sa().memoizedState=M,[!1,M]},useSyncExternalStore:function(M,O,V){var Q=kr,me=sa();if(Kr){if(V===void 0)throw Error(f(407));V=V()}else{if(V=O(),xr===null)throw Error(f(349));(Dr&127)!==0||bh(Q,O,V)}me.memoizedState=V;var ve={value:V,getSnapshot:O};return me.queue=ve,kh(Sh.bind(null,Q,ve,M),[M]),Q.flags|=2048,zo(9,{destroy:void 0},_h.bind(null,Q,ve,V,O),null),V},useId:function(){var M=sa(),O=xr.identifierPrefix;if(Kr){var V=Cs,Q=Pi;V=(Q&~(1<<32-nt(Q)-1)).toString(32)+V,O="_"+O+"R_"+V,V=gu++,0<V&&(O+="H"+V.toString(32)),O+="_"}else V=cd++,O="_"+O+"r_"+V.toString(32)+"_";return M.memoizedState=O},useHostTransitionStatus:Md,useFormState:xd,useActionState:xd,useOptimistic:function(M){var O=sa();O.memoizedState=O.baseState=M;var V={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return O.queue=V,O=kd.bind(null,kr,!0,V),V.dispatch=O,[M,O]},useMemoCache:md,useCacheRefresh:function(){return sa().memoizedState=wf.bind(null,kr)},useEffectEvent:function(M){var O=sa(),V={impl:M};return O.memoizedState=V,function(){if((Jn&2)!==0)throw Error(f(440));return V.impl.apply(void 0,arguments)}}},Id={readContext:Sr,use:$o,useCallback:Fh,useContext:Sr,useEffect:wd,useImperativeHandle:Ph,useInsertionEffect:Oh,useLayoutEffect:Dh,useMemo:Bh,useReducer:bu,useRef:_u,useState:function(){return bu(bo)},useDebugValue:Td,useDeferredValue:function(M,O){var V=Xi();return Uh(V,_i.memoizedState,M,O)},useTransition:function(){var M=bu(bo)[0],O=Xi().memoizedState;return[typeof M=="boolean"?M:Oc(M),O]},useSyncExternalStore:yh,useId:jh,useHostTransitionStatus:Md,useFormState:Rh,useActionState:Rh,useOptimistic:function(M,O){var V=Xi();return bd(V,_i,M,O)},useMemoCache:md,useCacheRefresh:Vh};Id.useEffectEvent=Nh;var ys={readContext:Sr,use:$o,useCallback:Fh,useContext:Sr,useEffect:wd,useImperativeHandle:Ph,useInsertionEffect:Oh,useLayoutEffect:Dh,useMemo:Bh,useReducer:yd,useRef:_u,useState:function(){return yd(bo)},useDebugValue:Td,useDeferredValue:function(M,O){var V=Xi();return _i===null?Cd(V,M,O):Uh(V,_i.memoizedState,M,O)},useTransition:function(){var M=yd(bo)[0],O=Xi().memoizedState;return[typeof M=="boolean"?M:Oc(M),O]},useSyncExternalStore:yh,useId:jh,useHostTransitionStatus:Md,useFormState:Ad,useActionState:Ad,useOptimistic:function(M,O){var V=Xi();return _i!==null?bd(V,_i,M,O):(V.baseState=M,[M,V.queue.dispatch])},useMemoCache:md,useCacheRefresh:Vh};ys.useEffectEvent=Nh;function Au(M,O,V,Q){O=M.memoizedState,V=V(Q,O),V=V==null?O:I({},O,V),M.memoizedState=V,M.lanes===0&&(M.updateQueue.baseState=V)}var Lc={enqueueSetState:function(M,O,V){M=M._reactInternals;var Q=ls(),me=yo(Q);me.payload=O,V!=null&&(me.callback=V),O=Bo(M,me,Q),O!==null&&(Ur(O,M,Q),Uo(O,M,Q))},enqueueReplaceState:function(M,O,V){M=M._reactInternals;var Q=ls(),me=yo(Q);me.tag=1,me.payload=O,V!=null&&(me.callback=V),O=Bo(M,me,Q),O!==null&&(Ur(O,M,Q),Uo(O,M,Q))},enqueueForceUpdate:function(M,O){M=M._reactInternals;var V=ls(),Q=yo(V);Q.tag=2,O!=null&&(Q.callback=O),O=Bo(M,Q,V),O!==null&&(Ur(O,M,V),Uo(O,M,V))}};function Nd(M,O,V,Q,me,ve,Ge){return M=M.stateNode,typeof M.shouldComponentUpdate=="function"?M.shouldComponentUpdate(Q,ve,Ge):O.prototype&&O.prototype.isPureReactComponent?!Il(V,Q)||!Il(me,ve):!0}function Od(M,O,V,Q){M=O.state,typeof O.componentWillReceiveProps=="function"&&O.componentWillReceiveProps(V,Q),typeof O.UNSAFE_componentWillReceiveProps=="function"&&O.UNSAFE_componentWillReceiveProps(V,Q),O.state!==M&&Lc.enqueueReplaceState(O,O.state,null)}function Go(M,O){var V=O;if("ref"in O){V={};for(var Q in O)Q!=="ref"&&(V[Q]=O[Q])}if(M=M.defaultProps){V===O&&(V=I({},V));for(var me in M)V[me]===void 0&&(V[me]=M[me])}return V}function Yh(M){xc(M)}function Dd(M){console.error(M)}function Ld(M){xc(M)}function wu(M,O){try{var V=M.onUncaughtError;V(O.value,{componentStack:O.stack})}catch(Q){setTimeout(function(){throw Q})}}function Zh(M,O,V){try{var Q=M.onCaughtError;Q(V.value,{componentStack:V.stack,errorBoundary:O.tag===1?O.stateNode:null})}catch(me){setTimeout(function(){throw me})}}function Pd(M,O,V){return V=yo(V),V.tag=3,V.payload={element:null},V.callback=function(){wu(M,O)},V}function Fd(M){return M=yo(M),M.tag=3,M}function Kh(M,O,V,Q){var me=V.type.getDerivedStateFromError;if(typeof me=="function"){var ve=Q.value;M.payload=function(){return me(ve)},M.callback=function(){Zh(O,V,Q)}}var Ge=V.stateNode;Ge!==null&&typeof Ge.componentDidCatch=="function"&&(M.callback=function(){Zh(O,V,Q),typeof me!="function"&&(Ki===null?Ki=new Set([this]):Ki.add(this));var rt=Q.stack;this.componentDidCatch(Q.value,{componentStack:rt!==null?rt:""})})}function oa(M,O,V,Q,me){if(V.flags|=32768,Q!==null&&typeof Q=="object"&&typeof Q.then=="function"){if(O=V.alternate,O!==null&&Vs(O,V,me,!0),V=Ha.current,V!==null){switch(V.tag){case 31:case 13:return Oa===null?nc():V.alternate===null&&Bi===0&&(Bi=3),V.flags&=-257,V.flags|=65536,V.lanes=me,Q===du?V.flags|=16384:(O=V.updateQueue,O===null?V.updateQueue=new Set([Q]):O.add(Q),Wc(M,Q,me)),!1;case 22:return V.flags|=65536,Q===du?V.flags|=16384:(O=V.updateQueue,O===null?(O={transitions:null,markerInstances:null,retryQueue:new Set([Q])},V.updateQueue=O):(V=O.retryQueue,V===null?O.retryQueue=new Set([Q]):V.add(Q)),Wc(M,Q,me)),!1}throw Error(f(435,V.tag))}return Wc(M,Q,me),nc(),!1}if(Kr)return O=Ha.current,O!==null?((O.flags&65536)===0&&(O.flags|=256),O.flags|=65536,O.lanes=me,Q!==Ul&&(M=Error(f(422),{cause:Q}),zs(Qa(M,V)))):(Q!==Ul&&(O=Error(f(423),{cause:Q}),zs(Qa(O,V))),M=M.current.alternate,M.flags|=65536,me&=-me,M.lanes|=me,Q=Qa(Q,V),me=Pd(M.stateNode,Q,me),sr(M,me),Bi!==4&&(Bi=2)),!1;var ve=Error(f(520),{cause:Q});if(ve=Qa(ve,V),Sl===null?Sl=[ve]:Sl.push(ve),Bi!==4&&(Bi=2),O===null)return!0;Q=Qa(Q,V),V=O;do{switch(V.tag){case 3:return V.flags|=65536,M=me&-me,V.lanes|=M,M=Pd(V.stateNode,Q,M),sr(V,M),!1;case 1:if(O=V.type,ve=V.stateNode,(V.flags&128)===0&&(typeof O.getDerivedStateFromError=="function"||ve!==null&&typeof ve.componentDidCatch=="function"&&(Ki===null||!Ki.has(ve))))return V.flags|=65536,me&=-me,V.lanes|=me,me=Fd(me),Kh(me,M,V,Q),sr(V,me),!1}V=V.return}while(V!==null);return!1}var Tu=Error(f(461)),ra=!1;function pa(M,O,V,Q){O.child=M===null?pu(O,null,V,Q):mo(O,M.child,V,Q)}function Bd(M,O,V,Q,me){V=V.render;var ve=O.ref;if("ref"in Q){var Ge={};for(var rt in Q)rt!=="ref"&&(Ge[rt]=Q[rt])}else Ge=Q;return Po(O),Q=yu(M,O,V,Ge,ve,me),rt=dd(),M!==null&&!ra?(hd(M,O,me),Yi(M,O,me)):(Kr&&rt&&Us(O),O.flags|=1,pa(M,O,Q,me),O.child)}function pl(M,O,V,Q,me){if(M===null){var ve=V.type;return typeof ve=="function"&&!tu(ve)&&ve.defaultProps===void 0&&V.compare===null?(O.tag=15,O.type=ve,Cu(M,O,ve,Q,me)):(M=Fs(V.type,null,Q,O,O.mode,me),M.ref=O.ref,M.return=O,O.child=M)}if(ve=M.child,!Ou(M,me)){var Ge=ve.memoizedProps;if(V=V.compare,V=V!==null?V:Il,V(Ge,Q)&&M.ref===O.ref)return Yi(M,O,me)}return O.flags|=1,M=Ga(ve,Q),M.ref=O.ref,M.return=O,O.child=M}function Cu(M,O,V,Q,me){if(M!==null){var ve=M.memoizedProps;if(Il(ve,Q)&&M.ref===O.ref)if(ra=!1,O.pendingProps=Q=ve,Ou(M,me))(M.flags&131072)!==0&&(ra=!0);else return O.lanes=M.lanes,Yi(M,O,me)}return Zl(M,O,V,Q,me)}function ml(M,O,V,Q){var me=Q.children,ve=M!==null?M.memoizedState:null;if(M===null&&O.stateNode===null&&(O.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),Q.mode==="hidden"){if((O.flags&128)!==0){if(ve=ve!==null?ve.baseLanes|V:V,M!==null){for(Q=O.child=M.child,me=0;Q!==null;)me=me|Q.lanes|Q.childLanes,Q=Q.sibling;Q=me&~ve}else Q=0,O.child=null;return Wa(M,O,ve,V,Q)}if((V&536870912)!==0)O.memoizedState={baseLanes:0,cachePool:null},M!==null&&Tc(O,ve!==null?ve.cachePool:null),ve!==null?ph(O,ve):od(),mh(O);else return Q=O.lanes=536870912,Wa(M,O,ve!==null?ve.baseLanes|V:V,V,Q)}else ve!==null?(Tc(O,ve.cachePool),ph(O,ve),qa(),O.memoizedState=null):(M!==null&&Tc(O,null),od(),qa());return pa(M,O,me,V),O.child}function qs(M,O){return M!==null&&M.tag===22||O.stateNode!==null||(O.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),O.sibling}function Wa(M,O,V,Q,me){var ve=uu();return ve=ve===null?null:{parent:na._currentValue,pool:ve},O.memoizedState={baseLanes:V,cachePool:ve},M!==null&&Tc(O,null),od(),mh(O),M!==null&&Vs(M,O,Q,!0),O.childLanes=me,null}function Ru(M,O){return O=Nu({mode:O.mode,children:O.children},M.mode),O.ref=M.ref,M.child=O,O.return=M,O}function Jh(M,O,V){return mo(O,M.child,null,V),M=Ru(O,O.pendingProps),M.flags|=2,Wi(O),O.memoizedState=null,M}function Mu(M,O,V){var Q=O.pendingProps,me=(O.flags&128)!==0;if(O.flags&=-129,M===null){if(Kr){if(Q.mode==="hidden")return M=Ru(O,Q),O.lanes=536870912,qs(null,M);if(ld(O),(M=Ai)?(M=up(M,es),M=M!==null&&M.data==="&"?M:null,M!==null&&(O.memoizedState={dehydrated:M,treeContext:uo!==null?{id:Pi,overflow:Cs}:null,retryLane:536870912,hydrationErrors:null},V=Pl(M),V.return=O,O.child=V,Gi=O,Ai=null)):M=null,M===null)throw $s(O);return O.lanes=536870912,null}return Ru(O,Q)}var ve=M.memoizedState;if(ve!==null){var Ge=ve.dehydrated;if(ld(O),me)if(O.flags&256)O.flags&=-257,O=Jh(M,O,V);else if(O.memoizedState!==null)O.child=M.child,O.flags|=128,O=null;else throw Error(f(558));else if(ra||Vs(M,O,V,!1),me=(V&M.childLanes)!==0,ra||me){if(Q=xr,Q!==null&&(Ge=$r(Q,V),Ge!==0&&Ge!==ve.retryLane))throw ve.retryLane=Ge,Ia(M,Ge),Ur(Q,M,Ge),Tu;nc(),O=Jh(M,O,V)}else M=ve.treeContext,Ai=to(Ge.nextSibling),Gi=O,Kr=!0,ho=null,es=!1,M!==null&&au(O,M),O=Ru(O,Q),O.flags|=4096;return O}return M=Ga(M.child,{mode:Q.mode,children:Q.children}),M.ref=O.ref,O.child=M,M.return=O,M}function gl(M,O){var V=O.ref;if(V===null)M!==null&&M.ref!==null&&(O.flags|=4194816);else{if(typeof V!="function"&&typeof V!="object")throw Error(f(284));(M===null||M.ref!==V)&&(O.flags|=4194816)}}function Zl(M,O,V,Q,me){return Po(O),V=yu(M,O,V,Q,void 0,me),Q=dd(),M!==null&&!ra?(hd(M,O,me),Yi(M,O,me)):(Kr&&Q&&Us(O),O.flags|=1,pa(M,O,V,me),O.child)}function Pc(M,O,V,Q,me,ve){return Po(O),O.updateQueue=null,V=dl(O,Q,V,me),gh(M),Q=dd(),M!==null&&!ra?(hd(M,O,ve),Yi(M,O,ve)):(Kr&&Q&&Us(O),O.flags|=1,pa(M,O,V,ve),O.child)}function ku(M,O,V,Q,me){if(Po(O),O.stateNode===null){var ve=ko,Ge=V.contextType;typeof Ge=="object"&&Ge!==null&&(ve=Sr(Ge)),ve=new V(Q,ve),O.memoizedState=ve.state!==null&&ve.state!==void 0?ve.state:null,ve.updater=Lc,O.stateNode=ve,ve._reactInternals=O,ve=O.stateNode,ve.props=Q,ve.state=O.memoizedState,ve.refs={},Mc(O),Ge=V.contextType,ve.context=typeof Ge=="object"&&Ge!==null?Sr(Ge):ko,ve.state=O.memoizedState,Ge=V.getDerivedStateFromProps,typeof Ge=="function"&&(Au(O,V,Ge,Q),ve.state=O.memoizedState),typeof V.getDerivedStateFromProps=="function"||typeof ve.getSnapshotBeforeUpdate=="function"||typeof ve.UNSAFE_componentWillMount!="function"&&typeof ve.componentWillMount!="function"||(Ge=ve.state,typeof ve.componentWillMount=="function"&&ve.componentWillMount(),typeof ve.UNSAFE_componentWillMount=="function"&&ve.UNSAFE_componentWillMount(),Ge!==ve.state&&Lc.enqueueReplaceState(ve,ve.state,null),Vl(O,Q,ve,me),kc(),ve.state=O.memoizedState),typeof ve.componentDidMount=="function"&&(O.flags|=4194308),Q=!0}else if(M===null){ve=O.stateNode;var rt=O.memoizedProps,Rt=Go(V,rt);ve.props=Rt;var Wt=ve.context,un=V.contextType;Ge=ko,typeof un=="object"&&un!==null&&(Ge=Sr(un));var yn=V.getDerivedStateFromProps;un=typeof yn=="function"||typeof ve.getSnapshotBeforeUpdate=="function",rt=O.pendingProps!==rt,un||typeof ve.UNSAFE_componentWillReceiveProps!="function"&&typeof ve.componentWillReceiveProps!="function"||(rt||Wt!==Ge)&&Od(O,ve,Q,Ge),Na=!1;var Jt=O.memoizedState;ve.state=Jt,Vl(O,Q,ve,me),kc(),Wt=O.memoizedState,rt||Jt!==Wt||Na?(typeof yn=="function"&&(Au(O,V,yn,Q),Wt=O.memoizedState),(Rt=Na||Nd(O,V,Rt,Q,Jt,Wt,Ge))?(un||typeof ve.UNSAFE_componentWillMount!="function"&&typeof ve.componentWillMount!="function"||(typeof ve.componentWillMount=="function"&&ve.componentWillMount(),typeof ve.UNSAFE_componentWillMount=="function"&&ve.UNSAFE_componentWillMount()),typeof ve.componentDidMount=="function"&&(O.flags|=4194308)):(typeof ve.componentDidMount=="function"&&(O.flags|=4194308),O.memoizedProps=Q,O.memoizedState=Wt),ve.props=Q,ve.state=Wt,ve.context=Ge,Q=Rt):(typeof ve.componentDidMount=="function"&&(O.flags|=4194308),Q=!1)}else{ve=O.stateNode,ad(M,O),Ge=O.memoizedProps,un=Go(V,Ge),ve.props=un,yn=O.pendingProps,Jt=ve.context,Wt=V.contextType,Rt=ko,typeof Wt=="object"&&Wt!==null&&(Rt=Sr(Wt)),rt=V.getDerivedStateFromProps,(Wt=typeof rt=="function"||typeof ve.getSnapshotBeforeUpdate=="function")||typeof ve.UNSAFE_componentWillReceiveProps!="function"&&typeof ve.componentWillReceiveProps!="function"||(Ge!==yn||Jt!==Rt)&&Od(O,ve,Q,Rt),Na=!1,Jt=O.memoizedState,ve.state=Jt,Vl(O,Q,ve,me),kc();var rn=O.memoizedState;Ge!==yn||Jt!==rn||Na||M!==null&&M.dependencies!==null&&wc(M.dependencies)?(typeof rt=="function"&&(Au(O,V,rt,Q),rn=O.memoizedState),(un=Na||Nd(O,V,un,Q,Jt,rn,Rt)||M!==null&&M.dependencies!==null&&wc(M.dependencies))?(Wt||typeof ve.UNSAFE_componentWillUpdate!="function"&&typeof ve.componentWillUpdate!="function"||(typeof ve.componentWillUpdate=="function"&&ve.componentWillUpdate(Q,rn,Rt),typeof ve.UNSAFE_componentWillUpdate=="function"&&ve.UNSAFE_componentWillUpdate(Q,rn,Rt)),typeof ve.componentDidUpdate=="function"&&(O.flags|=4),typeof ve.getSnapshotBeforeUpdate=="function"&&(O.flags|=1024)):(typeof ve.componentDidUpdate!="function"||Ge===M.memoizedProps&&Jt===M.memoizedState||(O.flags|=4),typeof ve.getSnapshotBeforeUpdate!="function"||Ge===M.memoizedProps&&Jt===M.memoizedState||(O.flags|=1024),O.memoizedProps=Q,O.memoizedState=rn),ve.props=Q,ve.state=rn,ve.context=Rt,Q=un):(typeof ve.componentDidUpdate!="function"||Ge===M.memoizedProps&&Jt===M.memoizedState||(O.flags|=4),typeof ve.getSnapshotBeforeUpdate!="function"||Ge===M.memoizedProps&&Jt===M.memoizedState||(O.flags|=1024),Q=!1)}return ve=Q,gl(M,O),Q=(O.flags&128)!==0,ve||Q?(ve=O.stateNode,V=Q&&typeof V.getDerivedStateFromError!="function"?null:ve.render(),O.flags|=1,M!==null&&Q?(O.child=mo(O,M.child,null,me),O.child=mo(O,null,V,me)):pa(M,O,V,me),O.memoizedState=ve.state,M=O.child):M=Yi(M,O,me),M}function Qh(M,O,V,Q){return Do(),O.flags|=256,pa(M,O,V,Q),O.child}var Ud={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ta(M){return{baseLanes:M,cachePool:rd()}}function Iu(M,O,V){return M=M!==null?M.childLanes&~V:0,O&&(M|=Pa),M}function ef(M,O,V){var Q=O.pendingProps,me=!1,ve=(O.flags&128)!==0,Ge;if((Ge=ve)||(Ge=M!==null&&M.memoizedState===null?!1:(Jr.current&2)!==0),Ge&&(me=!0,O.flags&=-129),Ge=(O.flags&32)!==0,O.flags&=-33,M===null){if(Kr){if(me?vo(O):qa(),(M=Ai)?(M=up(M,es),M=M!==null&&M.data!=="&"?M:null,M!==null&&(O.memoizedState={dehydrated:M,treeContext:uo!==null?{id:Pi,overflow:Cs}:null,retryLane:536870912,hydrationErrors:null},V=Pl(M),V.return=O,O.child=V,Gi=O,Ai=null)):M=null,M===null)throw $s(O);return $f(M)?O.lanes=32:O.lanes=536870912,null}var rt=Q.children;return Q=Q.fallback,me?(qa(),me=O.mode,rt=Nu({mode:"hidden",children:rt},me),Q=Io(Q,me,V,null),rt.return=O,Q.return=O,rt.sibling=Q,O.child=rt,Q=O.child,Q.memoizedState=Ta(V),Q.childLanes=Iu(M,Ge,V),O.memoizedState=Ud,qs(null,Q)):(vo(O),Fc(O,rt))}var Rt=M.memoizedState;if(Rt!==null&&(rt=Rt.dehydrated,rt!==null)){if(ve)O.flags&256?(vo(O),O.flags&=-257,O=$d(M,O,V)):O.memoizedState!==null?(qa(),O.child=M.child,O.flags|=128,O=null):(qa(),rt=Q.fallback,me=O.mode,Q=Nu({mode:"visible",children:Q.children},me),rt=Io(rt,me,V,null),rt.flags|=2,Q.return=O,rt.return=O,Q.sibling=rt,O.child=Q,mo(O,M.child,null,V),Q=O.child,Q.memoizedState=Ta(V),Q.childLanes=Iu(M,Ge,V),O.memoizedState=Ud,O=qs(null,Q));else if(vo(O),$f(rt)){if(Ge=rt.nextSibling&&rt.nextSibling.dataset,Ge)var Wt=Ge.dgst;Ge=Wt,Q=Error(f(419)),Q.stack="",Q.digest=Ge,zs({value:Q,source:null,stack:null}),O=$d(M,O,V)}else if(ra||Vs(M,O,V,!1),Ge=(V&M.childLanes)!==0,ra||Ge){if(Ge=xr,Ge!==null&&(Q=$r(Ge,V),Q!==0&&Q!==Rt.retryLane))throw Rt.retryLane=Q,Ia(M,Q),Ur(Ge,M,Q),Tu;Uf(rt)||nc(),O=$d(M,O,V)}else Uf(rt)?(O.flags|=192,O.child=M.child,O=null):(M=Rt.treeContext,Ai=to(rt.nextSibling),Gi=O,Kr=!0,ho=null,es=!1,M!==null&&au(O,M),O=Fc(O,Q.children),O.flags|=4096);return O}return me?(qa(),rt=Q.fallback,me=O.mode,Rt=M.child,Wt=Rt.sibling,Q=Ga(Rt,{mode:"hidden",children:Q.children}),Q.subtreeFlags=Rt.subtreeFlags&65011712,Wt!==null?rt=Ga(Wt,rt):(rt=Io(rt,me,V,null),rt.flags|=2),rt.return=O,Q.return=O,Q.sibling=rt,O.child=Q,qs(null,Q),Q=O.child,rt=M.child.memoizedState,rt===null?rt=Ta(V):(me=rt.cachePool,me!==null?(Rt=na._currentValue,me=me.parent!==Rt?{parent:Rt,pool:Rt}:me):me=rd(),rt={baseLanes:rt.baseLanes|V,cachePool:me}),Q.memoizedState=rt,Q.childLanes=Iu(M,Ge,V),O.memoizedState=Ud,qs(M.child,Q)):(vo(O),V=M.child,M=V.sibling,V=Ga(V,{mode:"visible",children:Q.children}),V.return=O,V.sibling=null,M!==null&&(Ge=O.deletions,Ge===null?(O.deletions=[M],O.flags|=16):Ge.push(M)),O.child=V,O.memoizedState=null,V)}function Fc(M,O){return O=Nu({mode:"visible",children:O},M.mode),O.return=M,M.child=O}function Nu(M,O){return M=Li(22,M,null,O),M.lanes=0,M}function $d(M,O,V){return mo(O,M.child,null,V),M=Fc(O,O.pendingProps.children),M.flags|=2,O.memoizedState=null,M}function tf(M,O,V){M.lanes|=O;var Q=M.alternate;Q!==null&&(Q.lanes|=O),ou(M.return,O,V)}function yl(M,O,V,Q,me,ve){var Ge=M.memoizedState;Ge===null?M.memoizedState={isBackwards:O,rendering:null,renderingStartTime:0,last:Q,tail:V,tailMode:me,treeForkCount:ve}:(Ge.isBackwards=O,Ge.rendering=null,Ge.renderingStartTime=0,Ge.last=Q,Ge.tail=V,Ge.tailMode=me,Ge.treeForkCount=ve)}function Xa(M,O,V){var Q=O.pendingProps,me=Q.revealOrder,ve=Q.tail;Q=Q.children;var Ge=Jr.current,rt=(Ge&2)!==0;if(rt?(Ge=Ge&1|2,O.flags|=128):Ge&=1,he(Jr,Ge),pa(M,O,Q,V),Q=Kr?Bl:0,!rt&&M!==null&&(M.flags&128)!==0)e:for(M=O.child;M!==null;){if(M.tag===13)M.memoizedState!==null&&tf(M,V,O);else if(M.tag===19)tf(M,V,O);else if(M.child!==null){M.child.return=M,M=M.child;continue}if(M===O)break e;for(;M.sibling===null;){if(M.return===null||M.return===O)break e;M=M.return}M.sibling.return=M.return,M=M.sibling}switch(me){case"forwards":for(V=O.child,me=null;V!==null;)M=V.alternate,M!==null&&ns(M)===null&&(me=V),V=V.sibling;V=me,V===null?(me=O.child,O.child=null):(me=V.sibling,V.sibling=null),yl(O,!1,me,V,ve,Q);break;case"backwards":case"unstable_legacy-backwards":for(V=null,me=O.child,O.child=null;me!==null;){if(M=me.alternate,M!==null&&ns(M)===null){O.child=me;break}M=me.sibling,me.sibling=V,V=me,me=M}yl(O,!0,V,null,ve,Q);break;case"together":yl(O,!1,null,null,void 0,Q);break;default:O.memoizedState=null}return O.child}function Yi(M,O,V){if(M!==null&&(O.dependencies=M.dependencies),Js|=O.lanes,(V&O.childLanes)===0)if(M!==null){if(Vs(M,O,V,!1),(V&O.childLanes)===0)return null}else return null;if(M!==null&&O.child!==M.child)throw Error(f(153));if(O.child!==null){for(M=O.child,V=Ga(M,M.pendingProps),O.child=V,V.return=O;M.sibling!==null;)M=M.sibling,V=V.sibling=Ga(M,M.pendingProps),V.return=O;V.sibling=null}return O.child}function Ou(M,O){return(M.lanes&O)!==0?!0:(M=M.dependencies,!!(M!==null&&wc(M)))}function Cf(M,O,V){switch(O.tag){case 3:ke(O,O.stateNode.containerInfo),fo(O,na,M.memoizedState.cache),Do();break;case 27:case 5:$e(O);break;case 4:ke(O,O.stateNode.containerInfo);break;case 10:fo(O,O.type,O.memoizedProps.value);break;case 31:if(O.memoizedState!==null)return O.flags|=128,ld(O),null;break;case 13:var Q=O.memoizedState;if(Q!==null)return Q.dehydrated!==null?(vo(O),O.flags|=128,null):(V&O.child.childLanes)!==0?ef(M,O,V):(vo(O),M=Yi(M,O,V),M!==null?M.sibling:null);vo(O);break;case 19:var me=(M.flags&128)!==0;if(Q=(V&O.childLanes)!==0,Q||(Vs(M,O,V,!1),Q=(V&O.childLanes)!==0),me){if(Q)return Xa(M,O,V);O.flags|=128}if(me=O.memoizedState,me!==null&&(me.rendering=null,me.tail=null,me.lastEffect=null),he(Jr,Jr.current),Q)break;return null;case 22:return O.lanes=0,ml(M,O,V,O.pendingProps);case 24:fo(O,na,M.memoizedState.cache)}return Yi(M,O,V)}function Du(M,O,V){if(M!==null)if(M.memoizedProps!==O.pendingProps)ra=!0;else{if(!Ou(M,V)&&(O.flags&128)===0)return ra=!1,Cf(M,O,V);ra=(M.flags&131072)!==0}else ra=!1,Kr&&(O.flags&1048576)!==0&&oh(O,Bl,O.index);switch(O.lanes=0,O.tag){case 16:e:{var Q=O.pendingProps;if(M=il(O.elementType),O.type=M,typeof M=="function")tu(M)?(Q=Go(M,Q),O.tag=1,O=ku(null,O,M,Q,V)):(O.tag=0,O=Zl(null,O,M,Q,V));else{if(M!=null){var me=M.$$typeof;if(me===K){O.tag=11,O=Bd(null,O,M,Q,V);break e}else if(me===te){O.tag=14,O=pl(null,O,M,Q,V);break e}}throw O=Ie(M)||M,Error(f(306,O,""))}}return O;case 0:return Zl(M,O,O.type,O.pendingProps,V);case 1:return Q=O.type,me=Go(Q,O.pendingProps),ku(M,O,Q,me,V);case 3:e:{if(ke(O,O.stateNode.containerInfo),M===null)throw Error(f(387));Q=O.pendingProps;var ve=O.memoizedState;me=ve.element,ad(M,O),Vl(O,Q,null,V);var Ge=O.memoizedState;if(Q=Ge.cache,fo(O,na,Q),Q!==ve.cache&&lu(O,[na],V,!0),kc(),Q=Ge.element,ve.isDehydrated)if(ve={element:Q,isDehydrated:!1,cache:Ge.cache},O.updateQueue.baseState=ve,O.memoizedState=ve,O.flags&256){O=Qh(M,O,Q,V);break e}else if(Q!==me){me=Qa(Error(f(424)),O),zs(me),O=Qh(M,O,Q,V);break e}else for(M=O.stateNode.containerInfo,M.nodeType===9?M=M.body:M=M.nodeName==="HTML"?M.ownerDocument.body:M,Ai=to(M.firstChild),Gi=O,Kr=!0,ho=null,es=!0,V=pu(O,null,Q,V),O.child=V;V;)V.flags=V.flags&-3|4096,V=V.sibling;else{if(Do(),Q===me){O=Yi(M,O,V);break e}pa(M,O,Q,V)}O=O.child}return O;case 26:return gl(M,O),M===null?(V=gp(O.type,null,O.pendingProps,null))?O.memoizedState=V:Kr||(V=O.type,M=O.pendingProps,Q=sf(ce.current).createElement(V),Q[Hr]=O,Q[Xe]=M,Ba(Q,V,M),Ke(Q),O.stateNode=Q):O.memoizedState=gp(O.type,M.memoizedProps,O.pendingProps,M.memoizedState),null;case 27:return $e(O),M===null&&Kr&&(Q=O.stateNode=fp(O.type,O.pendingProps,ce.current),Gi=O,es=!0,me=Ai,sc(O.type)?(zf=me,Ai=to(Q.firstChild)):Ai=me),pa(M,O,O.pendingProps.children,V),gl(M,O),M===null&&(O.flags|=4194304),O.child;case 5:return M===null&&Kr&&((me=Q=Ai)&&(Q=Vp(Q,O.type,O.pendingProps,es),Q!==null?(O.stateNode=Q,Gi=O,Ai=to(Q.firstChild),es=!1,me=!0):me=!1),me||$s(O)),$e(O),me=O.type,ve=O.pendingProps,Ge=M!==null?M.memoizedProps:null,Q=ve.children,Pf(me,ve)?Q=null:Ge!==null&&Pf(me,Ge)&&(O.flags|=32),O.memoizedState!==null&&(me=yu(M,O,hl,null,null,V),Kd._currentValue=me),gl(M,O),pa(M,O,Q,V),O.child;case 6:return M===null&&Kr&&((M=V=Ai)&&(V=Hp(V,O.pendingProps,es),V!==null?(O.stateNode=V,Gi=O,Ai=null,M=!0):M=!1),M||$s(O)),null;case 13:return ef(M,O,V);case 4:return ke(O,O.stateNode.containerInfo),Q=O.pendingProps,M===null?O.child=mo(O,null,Q,V):pa(M,O,Q,V),O.child;case 11:return Bd(M,O,O.type,O.pendingProps,V);case 7:return pa(M,O,O.pendingProps,V),O.child;case 8:return pa(M,O,O.pendingProps.children,V),O.child;case 12:return pa(M,O,O.pendingProps.children,V),O.child;case 10:return Q=O.pendingProps,fo(O,O.type,Q.value),pa(M,O,Q.children,V),O.child;case 9:return me=O.type._context,Q=O.pendingProps.children,Po(O),me=Sr(me),Q=Q(me),O.flags|=1,pa(M,O,Q,V),O.child;case 14:return pl(M,O,O.type,O.pendingProps,V);case 15:return Cu(M,O,O.type,O.pendingProps,V);case 19:return Xa(M,O,V);case 31:return Mu(M,O,V);case 22:return ml(M,O,V,O.pendingProps);case 24:return Po(O),Q=Sr(na),M===null?(me=uu(),me===null&&(me=xr,ve=Ju(),me.pooledCache=ve,ve.refCount++,ve!==null&&(me.pooledCacheLanes|=V),me=ve),O.memoizedState={parent:Q,cache:me},Mc(O),fo(O,na,me)):((M.lanes&V)!==0&&(ad(M,O),Vl(O,null,null,V),kc()),me=M.memoizedState,ve=O.memoizedState,me.parent!==Q?(me={parent:Q,cache:Q},O.memoizedState=me,O.lanes===0&&(O.memoizedState=O.updateQueue.baseState=me),fo(O,na,Q)):(Q=ve.cache,fo(O,na,Q),Q!==me.cache&&lu(O,[na],V,!0))),pa(M,O,O.pendingProps.children,V),O.child;case 29:throw O.pendingProps}throw Error(f(156,O.tag))}function Ws(M){M.flags|=4}function Bc(M,O,V,Q,me){if((O=(M.mode&32)!==0)&&(O=!1),O){if(M.flags|=16777216,(me&335544128)===me)if(M.stateNode.complete)M.flags|=8192;else if($i())M.flags|=8192;else throw Hs=du,Cc}else M.flags&=-16777217}function zd(M,O){if(O.type!=="stylesheet"||(O.state.loading&4)!==0)M.flags&=-16777217;else if(M.flags|=16777216,!Sp(O))if($i())M.flags|=8192;else throw Hs=du,Cc}function _o(M,O){O!==null&&(M.flags|=4),M.flags&16384&&(O=M.tag!==22?In():536870912,M.lanes|=O,Mi|=O)}function Xs(M,O){if(!Kr)switch(M.tailMode){case"hidden":O=M.tail;for(var V=null;O!==null;)O.alternate!==null&&(V=O),O=O.sibling;V===null?M.tail=null:V.sibling=null;break;case"collapsed":V=M.tail;for(var Q=null;V!==null;)V.alternate!==null&&(Q=V),V=V.sibling;Q===null?O||M.tail===null?M.tail=null:M.tail.sibling=null:Q.sibling=null}}function Si(M){var O=M.alternate!==null&&M.alternate.child===M.child,V=0,Q=0;if(O)for(var me=M.child;me!==null;)V|=me.lanes|me.childLanes,Q|=me.subtreeFlags&65011712,Q|=me.flags&65011712,me.return=M,me=me.sibling;else for(me=M.child;me!==null;)V|=me.lanes|me.childLanes,Q|=me.subtreeFlags,Q|=me.flags,me.return=M,me=me.sibling;return M.subtreeFlags|=Q,M.childLanes=V,O}function Uc(M,O,V){var Q=O.pendingProps;switch(iu(O),O.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Si(O),null;case 1:return Si(O),null;case 3:return V=O.stateNode,Q=null,M!==null&&(Q=M.memoizedState.cache),O.memoizedState.cache!==Q&&(O.flags|=2048),js(na),Pe(),V.pendingContext&&(V.context=V.pendingContext,V.pendingContext=null),(M===null||M.child===null)&&($l(O)?Ws(O):M===null||M.memoizedState.isDehydrated&&(O.flags&256)===0||(O.flags|=1024,su())),Si(O),null;case 26:var me=O.type,ve=O.memoizedState;return M===null?(Ws(O),ve!==null?(Si(O),zd(O,ve)):(Si(O),Bc(O,me,null,Q,V))):ve?ve!==M.memoizedState?(Ws(O),Si(O),zd(O,ve)):(Si(O),O.flags&=-16777217):(M=M.memoizedProps,M!==Q&&Ws(O),Si(O),Bc(O,me,M,Q,V)),null;case 27:if(xe(O),V=ce.current,me=O.type,M!==null&&O.stateNode!=null)M.memoizedProps!==Q&&Ws(O);else{if(!Q){if(O.stateNode===null)throw Error(f(166));return Si(O),null}M=ue.current,$l(O)?lh(O):(M=fp(me,Q,V),O.stateNode=M,Ws(O))}return Si(O),null;case 5:if(xe(O),me=O.type,M!==null&&O.stateNode!=null)M.memoizedProps!==Q&&Ws(O);else{if(!Q){if(O.stateNode===null)throw Error(f(166));return Si(O),null}if(ve=ue.current,$l(O))lh(O);else{var Ge=sf(ce.current);switch(ve){case 1:ve=Ge.createElementNS("http://www.w3.org/2000/svg",me);break;case 2:ve=Ge.createElementNS("http://www.w3.org/1998/Math/MathML",me);break;default:switch(me){case"svg":ve=Ge.createElementNS("http://www.w3.org/2000/svg",me);break;case"math":ve=Ge.createElementNS("http://www.w3.org/1998/Math/MathML",me);break;case"script":ve=Ge.createElement("div"),ve.innerHTML="<script><\/script>",ve=ve.removeChild(ve.firstChild);break;case"select":ve=typeof Q.is=="string"?Ge.createElement("select",{is:Q.is}):Ge.createElement("select"),Q.multiple?ve.multiple=!0:Q.size&&(ve.size=Q.size);break;default:ve=typeof Q.is=="string"?Ge.createElement(me,{is:Q.is}):Ge.createElement(me)}}ve[Hr]=O,ve[Xe]=Q;e:for(Ge=O.child;Ge!==null;){if(Ge.tag===5||Ge.tag===6)ve.appendChild(Ge.stateNode);else if(Ge.tag!==4&&Ge.tag!==27&&Ge.child!==null){Ge.child.return=Ge,Ge=Ge.child;continue}if(Ge===O)break e;for(;Ge.sibling===null;){if(Ge.return===null||Ge.return===O)break e;Ge=Ge.return}Ge.sibling.return=Ge.return,Ge=Ge.sibling}O.stateNode=ve;e:switch(Ba(ve,me,Q),me){case"button":case"input":case"select":case"textarea":Q=!!Q.autoFocus;break e;case"img":Q=!0;break e;default:Q=!1}Q&&Ws(O)}}return Si(O),Bc(O,O.type,M===null?null:M.memoizedProps,O.pendingProps,V),null;case 6:if(M&&O.stateNode!=null)M.memoizedProps!==Q&&Ws(O);else{if(typeof Q!="string"&&O.stateNode===null)throw Error(f(166));if(M=ce.current,$l(O)){if(M=O.stateNode,V=O.memoizedProps,Q=null,me=Gi,me!==null)switch(me.tag){case 27:case 5:Q=me.memoizedProps}M[Hr]=O,M=!!(M.nodeValue===V||Q!==null&&Q.suppressHydrationWarning===!0||np(M.nodeValue,V)),M||$s(O,!0)}else M=sf(M).createTextNode(Q),M[Hr]=O,O.stateNode=M}return Si(O),null;case 31:if(V=O.memoizedState,M===null||M.memoizedState!==null){if(Q=$l(O),V!==null){if(M===null){if(!Q)throw Error(f(318));if(M=O.memoizedState,M=M!==null?M.dehydrated:null,!M)throw Error(f(557));M[Hr]=O}else Do(),(O.flags&128)===0&&(O.memoizedState=null),O.flags|=4;Si(O),M=!1}else V=su(),M!==null&&M.memoizedState!==null&&(M.memoizedState.hydrationErrors=V),M=!0;if(!M)return O.flags&256?(Wi(O),O):(Wi(O),null);if((O.flags&128)!==0)throw Error(f(558))}return Si(O),null;case 13:if(Q=O.memoizedState,M===null||M.memoizedState!==null&&M.memoizedState.dehydrated!==null){if(me=$l(O),Q!==null&&Q.dehydrated!==null){if(M===null){if(!me)throw Error(f(318));if(me=O.memoizedState,me=me!==null?me.dehydrated:null,!me)throw Error(f(317));me[Hr]=O}else Do(),(O.flags&128)===0&&(O.memoizedState=null),O.flags|=4;Si(O),me=!1}else me=su(),M!==null&&M.memoizedState!==null&&(M.memoizedState.hydrationErrors=me),me=!0;if(!me)return O.flags&256?(Wi(O),O):(Wi(O),null)}return Wi(O),(O.flags&128)!==0?(O.lanes=V,O):(V=Q!==null,M=M!==null&&M.memoizedState!==null,V&&(Q=O.child,me=null,Q.alternate!==null&&Q.alternate.memoizedState!==null&&Q.alternate.memoizedState.cachePool!==null&&(me=Q.alternate.memoizedState.cachePool.pool),ve=null,Q.memoizedState!==null&&Q.memoizedState.cachePool!==null&&(ve=Q.memoizedState.cachePool.pool),ve!==me&&(Q.flags|=2048)),V!==M&&V&&(O.child.flags|=8192),_o(O,O.updateQueue),Si(O),null);case 4:return Pe(),M===null&&If(O.stateNode.containerInfo),Si(O),null;case 10:return js(O.type),Si(O),null;case 19:if(be(Jr),Q=O.memoizedState,Q===null)return Si(O),null;if(me=(O.flags&128)!==0,ve=Q.rendering,ve===null)if(me)Xs(Q,!1);else{if(Bi!==0||M!==null&&(M.flags&128)!==0)for(M=O.child;M!==null;){if(ve=ns(M),ve!==null){for(O.flags|=128,Xs(Q,!1),M=ve.updateQueue,O.updateQueue=M,_o(O,M),O.subtreeFlags=0,M=V,V=O.child;V!==null;)Ll(V,M),V=V.sibling;return he(Jr,Jr.current&1|2),Kr&&Bs(O,Q.treeForkCount),O.child}M=M.sibling}Q.tail!==null&&Le()>Zi&&(O.flags|=128,me=!0,Xs(Q,!1),O.lanes=4194304)}else{if(!me)if(M=ns(ve),M!==null){if(O.flags|=128,me=!0,M=M.updateQueue,O.updateQueue=M,_o(O,M),Xs(Q,!0),Q.tail===null&&Q.tailMode==="hidden"&&!ve.alternate&&!Kr)return Si(O),null}else 2*Le()-Q.renderingStartTime>Zi&&V!==536870912&&(O.flags|=128,me=!0,Xs(Q,!1),O.lanes=4194304);Q.isBackwards?(ve.sibling=O.child,O.child=ve):(M=Q.last,M!==null?M.sibling=ve:O.child=ve,Q.last=ve)}return Q.tail!==null?(M=Q.tail,Q.rendering=M,Q.tail=M.sibling,Q.renderingStartTime=Le(),M.sibling=null,V=Jr.current,he(Jr,me?V&1|2:V&1),Kr&&Bs(O,Q.treeForkCount),M):(Si(O),null);case 22:case 23:return Wi(O),Ic(),Q=O.memoizedState!==null,M!==null?M.memoizedState!==null!==Q&&(O.flags|=8192):Q&&(O.flags|=8192),Q?(V&536870912)!==0&&(O.flags&128)===0&&(Si(O),O.subtreeFlags&6&&(O.flags|=8192)):Si(O),V=O.updateQueue,V!==null&&_o(O,V.retryQueue),V=null,M!==null&&M.memoizedState!==null&&M.memoizedState.cachePool!==null&&(V=M.memoizedState.cachePool.pool),Q=null,O.memoizedState!==null&&O.memoizedState.cachePool!==null&&(Q=O.memoizedState.cachePool.pool),Q!==V&&(O.flags|=2048),M!==null&&be(Fo),null;case 24:return V=null,M!==null&&(V=M.memoizedState.cache),O.memoizedState.cache!==V&&(O.flags|=2048),js(na),Si(O),null;case 25:return null;case 30:return null}throw Error(f(156,O.tag))}function vs(M,O){switch(iu(O),O.tag){case 1:return M=O.flags,M&65536?(O.flags=M&-65537|128,O):null;case 3:return js(na),Pe(),M=O.flags,(M&65536)!==0&&(M&128)===0?(O.flags=M&-65537|128,O):null;case 26:case 27:case 5:return xe(O),null;case 31:if(O.memoizedState!==null){if(Wi(O),O.alternate===null)throw Error(f(340));Do()}return M=O.flags,M&65536?(O.flags=M&-65537|128,O):null;case 13:if(Wi(O),M=O.memoizedState,M!==null&&M.dehydrated!==null){if(O.alternate===null)throw Error(f(340));Do()}return M=O.flags,M&65536?(O.flags=M&-65537|128,O):null;case 19:return be(Jr),null;case 4:return Pe(),null;case 10:return js(O.type),null;case 22:case 23:return Wi(O),Ic(),M!==null&&be(Fo),M=O.flags,M&65536?(O.flags=M&-65537|128,O):null;case 24:return js(na),null;case 25:return null;default:return null}}function rs(M,O){switch(iu(O),O.tag){case 3:js(na),Pe();break;case 26:case 27:case 5:xe(O);break;case 4:Pe();break;case 31:O.memoizedState!==null&&Wi(O);break;case 13:Wi(O);break;case 19:be(Jr);break;case 10:js(O.type);break;case 22:case 23:Wi(O),Ic(),M!==null&&be(Fo);break;case 24:js(na)}}function bs(M,O){try{var V=O.updateQueue,Q=V!==null?V.lastEffect:null;if(Q!==null){var me=Q.next;V=me;do{if((V.tag&M)===M){Q=void 0;var ve=V.create,Ge=V.inst;Q=ve(),Ge.destroy=Q}V=V.next}while(V!==me)}}catch(rt){ai(O,O.return,rt)}}function ba(M,O,V){try{var Q=O.updateQueue,me=Q!==null?Q.lastEffect:null;if(me!==null){var ve=me.next;Q=ve;do{if((Q.tag&M)===M){var Ge=Q.inst,rt=Ge.destroy;if(rt!==void 0){Ge.destroy=void 0,me=O;var Rt=V,Wt=rt;try{Wt()}catch(un){ai(me,Rt,un)}}}Q=Q.next}while(Q!==ve)}}catch(un){ai(O,O.return,un)}}function Rs(M){var O=M.updateQueue;if(O!==null){var V=M.stateNode;try{fh(O,V)}catch(Q){ai(M,M.return,Q)}}}function ma(M,O,V){V.props=Go(M.type,M.memoizedProps),V.state=M.memoizedState;try{V.componentWillUnmount()}catch(Q){ai(M,O,Q)}}function So(M,O){try{var V=M.ref;if(V!==null){switch(M.tag){case 26:case 27:case 5:var Q=M.stateNode;break;case 30:Q=M.stateNode;break;default:Q=M.stateNode}typeof V=="function"?M.refCleanup=V(Q):V.current=Q}}catch(me){ai(M,O,me)}}function Sa(M,O){var V=M.ref,Q=M.refCleanup;if(V!==null)if(typeof Q=="function")try{Q()}catch(me){ai(M,O,me)}finally{M.refCleanup=null,M=M.alternate,M!=null&&(M.refCleanup=null)}else if(typeof V=="function")try{V(null)}catch(me){ai(M,O,me)}else V.current=null}function $c(M){var O=M.type,V=M.memoizedProps,Q=M.stateNode;try{e:switch(O){case"button":case"input":case"select":case"textarea":V.autoFocus&&Q.focus();break e;case"img":V.src?Q.src=V.src:V.srcSet&&(Q.srcset=V.srcSet)}}catch(me){ai(M,M.return,me)}}function la(M,O,V){try{var Q=M.stateNode;Bp(Q,M.type,V,O),Q[Xe]=O}catch(me){ai(M,M.return,me)}}function Ni(M){return M.tag===5||M.tag===3||M.tag===26||M.tag===27&&sc(M.type)||M.tag===4}function Wr(M){e:for(;;){for(;M.sibling===null;){if(M.return===null||Ni(M.return))return null;M=M.return}for(M.sibling.return=M.return,M=M.sibling;M.tag!==5&&M.tag!==6&&M.tag!==18;){if(M.tag===27&&sc(M.type)||M.flags&2||M.child===null||M.tag===4)continue e;M.child.return=M,M=M.child}if(!(M.flags&2))return M.stateNode}}function Ys(M,O,V){var Q=M.tag;if(Q===5||Q===6)M=M.stateNode,O?(V.nodeType===9?V.body:V.nodeName==="HTML"?V.ownerDocument.body:V).insertBefore(M,O):(O=V.nodeType===9?V.body:V.nodeName==="HTML"?V.ownerDocument.body:V,O.appendChild(M),V=V._reactRootContainer,V!=null||O.onclick!==null||(O.onclick=Pt));else if(Q!==4&&(Q===27&&sc(M.type)&&(V=M.stateNode,O=null),M=M.child,M!==null))for(Ys(M,O,V),M=M.sibling;M!==null;)Ys(M,O,V),M=M.sibling}function Da(M,O,V){var Q=M.tag;if(Q===5||Q===6)M=M.stateNode,O?V.insertBefore(M,O):V.appendChild(M);else if(Q!==4&&(Q===27&&sc(M.type)&&(V=M.stateNode),M=M.child,M!==null))for(Da(M,O,V),M=M.sibling;M!==null;)Da(M,O,V),M=M.sibling}function Lu(M){var O=M.stateNode,V=M.memoizedProps;try{for(var Q=M.type,me=O.attributes;me.length;)O.removeAttributeNode(me[0]);Ba(O,Q,V),O[Hr]=M,O[Xe]=V}catch(ve){ai(M,M.return,ve)}}var _s=!1,wi=!1,Ms=!1,nf=typeof WeakSet=="function"?WeakSet:Set,ga=null;function Rf(M,O){if(M=M.containerInfo,Df=ff,M=rh(M),Wu(M)){if("selectionStart"in M)var V={start:M.selectionStart,end:M.selectionEnd};else e:{V=(V=M.ownerDocument)&&V.defaultView||window;var Q=V.getSelection&&V.getSelection();if(Q&&Q.rangeCount!==0){V=Q.anchorNode;var me=Q.anchorOffset,ve=Q.focusNode;Q=Q.focusOffset;try{V.nodeType,ve.nodeType}catch{V=null;break e}var Ge=0,rt=-1,Rt=-1,Wt=0,un=0,yn=M,Jt=null;t:for(;;){for(var rn;yn!==V||me!==0&&yn.nodeType!==3||(rt=Ge+me),yn!==ve||Q!==0&&yn.nodeType!==3||(Rt=Ge+Q),yn.nodeType===3&&(Ge+=yn.nodeValue.length),(rn=yn.firstChild)!==null;)Jt=yn,yn=rn;for(;;){if(yn===M)break t;if(Jt===V&&++Wt===me&&(rt=Ge),Jt===ve&&++un===Q&&(Rt=Ge),(rn=yn.nextSibling)!==null)break;yn=Jt,Jt=yn.parentNode}yn=rn}V=rt===-1||Rt===-1?null:{start:rt,end:Rt}}else V=null}V=V||{start:0,end:0}}else V=null;for(Lf={focusedElem:M,selectionRange:V},ff=!1,ga=O;ga!==null;)if(O=ga,M=O.child,(O.subtreeFlags&1028)!==0&&M!==null)M.return=O,ga=M;else for(;ga!==null;){switch(O=ga,ve=O.alternate,M=O.flags,O.tag){case 0:if((M&4)!==0&&(M=O.updateQueue,M=M!==null?M.events:null,M!==null))for(V=0;V<M.length;V++)me=M[V],me.ref.impl=me.nextImpl;break;case 11:case 15:break;case 1:if((M&1024)!==0&&ve!==null){M=void 0,V=O,me=ve.memoizedProps,ve=ve.memoizedState,Q=V.stateNode;try{var qn=Go(V.type,me);M=Q.getSnapshotBeforeUpdate(qn,ve),Q.__reactInternalSnapshotBeforeUpdate=M}catch(vr){ai(V,V.return,vr)}}break;case 3:if((M&1024)!==0){if(M=O.stateNode.containerInfo,V=M.nodeType,V===9)Bf(M);else if(V===1)switch(M.nodeName){case"HEAD":case"HTML":case"BODY":Bf(M);break;default:M.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((M&1024)!==0)throw Error(f(163))}if(M=O.sibling,M!==null){M.return=O.return,ga=M;break}ga=O.return}}function Oi(M,O,V){var Q=V.flags;switch(V.tag){case 0:case 11:case 15:Es(M,V),Q&4&&bs(5,V);break;case 1:if(Es(M,V),Q&4)if(M=V.stateNode,O===null)try{M.componentDidMount()}catch(Ge){ai(V,V.return,Ge)}else{var me=Go(V.type,O.memoizedProps);O=O.memoizedState;try{M.componentDidUpdate(me,O,M.__reactInternalSnapshotBeforeUpdate)}catch(Ge){ai(V,V.return,Ge)}}Q&64&&Rs(V),Q&512&&So(V,V.return);break;case 3:if(Es(M,V),Q&64&&(M=V.updateQueue,M!==null)){if(O=null,V.child!==null)switch(V.child.tag){case 27:case 5:O=V.child.stateNode;break;case 1:O=V.child.stateNode}try{fh(M,O)}catch(Ge){ai(V,V.return,Ge)}}break;case 27:O===null&&Q&4&&Lu(V);case 26:case 5:Es(M,V),O===null&&Q&4&&$c(V),Q&512&&So(V,V.return);break;case 12:Es(M,V);break;case 31:Es(M,V),Q&4&&jo(M,V);break;case 13:Es(M,V),Q&4&&Kl(M,V),Q&64&&(M=V.memoizedState,M!==null&&(M=M.dehydrated,M!==null&&(V=ee.bind(null,V),qp(M,V))));break;case 22:if(Q=V.memoizedState!==null||_s,!Q){O=O!==null&&O.memoizedState!==null||wi,me=_s;var ve=wi;_s=Q,(wi=O)&&!ve?La(M,V,(V.subtreeFlags&8772)!==0):Es(M,V),_s=me,wi=ve}break;case 30:break;default:Es(M,V)}}function zc(M){var O=M.alternate;O!==null&&(M.alternate=null,zc(O)),M.child=null,M.deletions=null,M.sibling=null,M.tag===5&&(O=M.stateNode,O!==null&&mn(O)),M.stateNode=null,M.return=null,M.dependencies=null,M.memoizedProps=null,M.memoizedState=null,M.pendingProps=null,M.stateNode=null,M.updateQueue=null}var mi=null,Ca=!1;function Ss(M,O,V){for(V=V.child;V!==null;)Pu(M,O,V),V=V.sibling}function Pu(M,O,V){if(ct&&typeof ct.onCommitFiberUnmount=="function")try{ct.onCommitFiberUnmount(Ft,V)}catch{}switch(V.tag){case 26:wi||Sa(V,O),Ss(M,O,V),V.memoizedState?V.memoizedState.count--:V.stateNode&&(V=V.stateNode,V.parentNode.removeChild(V));break;case 27:wi||Sa(V,O);var Q=mi,me=Ca;sc(V.type)&&(mi=V.stateNode,Ca=!1),Ss(M,O,V),Xd(V.stateNode),mi=Q,Ca=me;break;case 5:wi||Sa(V,O);case 6:if(Q=mi,me=Ca,mi=null,Ss(M,O,V),mi=Q,Ca=me,mi!==null)if(Ca)try{(mi.nodeType===9?mi.body:mi.nodeName==="HTML"?mi.ownerDocument.body:mi).removeChild(V.stateNode)}catch(ve){ai(V,O,ve)}else try{mi.removeChild(V.stateNode)}catch(ve){ai(V,O,ve)}break;case 18:mi!==null&&(Ca?(M=mi,lp(M.nodeType===9?M.body:M.nodeName==="HTML"?M.ownerDocument.body:M,V.stateNode),Vu(M)):lp(mi,V.stateNode));break;case 4:Q=mi,me=Ca,mi=V.stateNode.containerInfo,Ca=!0,Ss(M,O,V),mi=Q,Ca=me;break;case 0:case 11:case 14:case 15:ba(2,V,O),wi||ba(4,V,O),Ss(M,O,V);break;case 1:wi||(Sa(V,O),Q=V.stateNode,typeof Q.componentWillUnmount=="function"&&ma(V,O,Q)),Ss(M,O,V);break;case 21:Ss(M,O,V);break;case 22:wi=(Q=wi)||V.memoizedState!==null,Ss(M,O,V),wi=Q;break;default:Ss(M,O,V)}}function jo(M,O){if(O.memoizedState===null&&(M=O.alternate,M!==null&&(M=M.memoizedState,M!==null))){M=M.dehydrated;try{Vu(M)}catch(V){ai(O,O.return,V)}}}function Kl(M,O){if(O.memoizedState===null&&(M=O.alternate,M!==null&&(M=M.memoizedState,M!==null&&(M=M.dehydrated,M!==null))))try{Vu(M)}catch(V){ai(O,O.return,V)}}function Gd(M){switch(M.tag){case 31:case 13:case 19:var O=M.stateNode;return O===null&&(O=M.stateNode=new nf),O;case 22:return M=M.stateNode,O=M._retryCache,O===null&&(O=M._retryCache=new nf),O;default:throw Error(f(435,M.tag))}}function xo(M,O){var V=Gd(M);O.forEach(function(Q){if(!V.has(Q)){V.add(Q);var me=fe.bind(null,M,Q);Q.then(me,me)}})}function ca(M,O){var V=O.deletions;if(V!==null)for(var Q=0;Q<V.length;Q++){var me=V[Q],ve=M,Ge=O,rt=Ge;e:for(;rt!==null;){switch(rt.tag){case 27:if(sc(rt.type)){mi=rt.stateNode,Ca=!1;break e}break;case 5:mi=rt.stateNode,Ca=!1;break e;case 3:case 4:mi=rt.stateNode.containerInfo,Ca=!0;break e}rt=rt.return}if(mi===null)throw Error(f(160));Pu(ve,Ge,me),mi=null,Ca=!1,ve=me.alternate,ve!==null&&(ve.return=null),me.return=null}if(O.subtreeFlags&13886)for(O=O.child;O!==null;)Vo(O,M),O=O.sibling}var xs=null;function Vo(M,O){var V=M.alternate,Q=M.flags;switch(M.tag){case 0:case 11:case 14:case 15:ca(O,M),ua(M),Q&4&&(ba(3,M,M.return),bs(3,M),ba(5,M,M.return));break;case 1:ca(O,M),ua(M),Q&512&&(wi||V===null||Sa(V,V.return)),Q&64&&_s&&(M=M.updateQueue,M!==null&&(Q=M.callbacks,Q!==null&&(V=M.shared.hiddenCallbacks,M.shared.hiddenCallbacks=V===null?Q:V.concat(Q))));break;case 26:var me=xs;if(ca(O,M),ua(M),Q&512&&(wi||V===null||Sa(V,V.return)),Q&4){var ve=V!==null?V.memoizedState:null;if(Q=M.memoizedState,V===null)if(Q===null)if(M.stateNode===null){e:{Q=M.type,V=M.memoizedProps,me=me.ownerDocument||me;t:switch(Q){case"title":ve=me.getElementsByTagName("title")[0],(!ve||ve[pn]||ve[Hr]||ve.namespaceURI==="http://www.w3.org/2000/svg"||ve.hasAttribute("itemprop"))&&(ve=me.createElement(Q),me.head.insertBefore(ve,me.querySelector("head > title"))),Ba(ve,Q,V),ve[Hr]=M,Ke(ve),Q=ve;break e;case"link":var Ge=bp("link","href",me).get(Q+(V.href||""));if(Ge){for(var rt=0;rt<Ge.length;rt++)if(ve=Ge[rt],ve.getAttribute("href")===(V.href==null||V.href===""?null:V.href)&&ve.getAttribute("rel")===(V.rel==null?null:V.rel)&&ve.getAttribute("title")===(V.title==null?null:V.title)&&ve.getAttribute("crossorigin")===(V.crossOrigin==null?null:V.crossOrigin)){Ge.splice(rt,1);break t}}ve=me.createElement(Q),Ba(ve,Q,V),me.head.appendChild(ve);break;case"meta":if(Ge=bp("meta","content",me).get(Q+(V.content||""))){for(rt=0;rt<Ge.length;rt++)if(ve=Ge[rt],ve.getAttribute("content")===(V.content==null?null:""+V.content)&&ve.getAttribute("name")===(V.name==null?null:V.name)&&ve.getAttribute("property")===(V.property==null?null:V.property)&&ve.getAttribute("http-equiv")===(V.httpEquiv==null?null:V.httpEquiv)&&ve.getAttribute("charset")===(V.charSet==null?null:V.charSet)){Ge.splice(rt,1);break t}}ve=me.createElement(Q),Ba(ve,Q,V),me.head.appendChild(ve);break;default:throw Error(f(468,Q))}ve[Hr]=M,Ke(ve),Q=ve}M.stateNode=Q}else _p(me,M.type,M.stateNode);else M.stateNode=vp(me,Q,M.memoizedProps);else ve!==Q?(ve===null?V.stateNode!==null&&(V=V.stateNode,V.parentNode.removeChild(V)):ve.count--,Q===null?_p(me,M.type,M.stateNode):vp(me,Q,M.memoizedProps)):Q===null&&M.stateNode!==null&&la(M,M.memoizedProps,V.memoizedProps)}break;case 27:ca(O,M),ua(M),Q&512&&(wi||V===null||Sa(V,V.return)),V!==null&&Q&4&&la(M,M.memoizedProps,V.memoizedProps);break;case 5:if(ca(O,M),ua(M),Q&512&&(wi||V===null||Sa(V,V.return)),M.flags&32){me=M.stateNode;try{ci(me,"")}catch(qn){ai(M,M.return,qn)}}Q&4&&M.stateNode!=null&&(me=M.memoizedProps,la(M,me,V!==null?V.memoizedProps:me)),Q&1024&&(Ms=!0);break;case 6:if(ca(O,M),ua(M),Q&4){if(M.stateNode===null)throw Error(f(162));Q=M.memoizedProps,V=M.stateNode;try{V.nodeValue=Q}catch(qn){ai(M,M.return,qn)}}break;case 3:if(cf=null,me=xs,xs=of(O.containerInfo),ca(O,M),xs=me,ua(M),Q&4&&V!==null&&V.memoizedState.isDehydrated)try{Vu(O.containerInfo)}catch(qn){ai(M,M.return,qn)}Ms&&(Ms=!1,Fu(M));break;case 4:Q=xs,xs=of(M.stateNode.containerInfo),ca(O,M),ua(M),xs=Q;break;case 12:ca(O,M),ua(M);break;case 31:ca(O,M),ua(M),Q&4&&(Q=M.updateQueue,Q!==null&&(M.updateQueue=null,xo(M,Q)));break;case 13:ca(O,M),ua(M),M.child.flags&8192&&M.memoizedState!==null!=(V!==null&&V.memoizedState!==null)&&(Jl=Le()),Q&4&&(Q=M.updateQueue,Q!==null&&(M.updateQueue=null,xo(M,Q)));break;case 22:me=M.memoizedState!==null;var Rt=V!==null&&V.memoizedState!==null,Wt=_s,un=wi;if(_s=Wt||me,wi=un||Rt,ca(O,M),wi=un,_s=Wt,ua(M),Q&8192)e:for(O=M.stateNode,O._visibility=me?O._visibility&-2:O._visibility|1,me&&(V===null||Rt||_s||wi||Zs(M)),V=null,O=M;;){if(O.tag===5||O.tag===26){if(V===null){Rt=V=O;try{if(ve=Rt.stateNode,me)Ge=ve.style,typeof Ge.setProperty=="function"?Ge.setProperty("display","none","important"):Ge.display="none";else{rt=Rt.stateNode;var yn=Rt.memoizedProps.style,Jt=yn!=null&&yn.hasOwnProperty("display")?yn.display:null;rt.style.display=Jt==null||typeof Jt=="boolean"?"":(""+Jt).trim()}}catch(qn){ai(Rt,Rt.return,qn)}}}else if(O.tag===6){if(V===null){Rt=O;try{Rt.stateNode.nodeValue=me?"":Rt.memoizedProps}catch(qn){ai(Rt,Rt.return,qn)}}}else if(O.tag===18){if(V===null){Rt=O;try{var rn=Rt.stateNode;me?cp(rn,!0):cp(Rt.stateNode,!1)}catch(qn){ai(Rt,Rt.return,qn)}}}else if((O.tag!==22&&O.tag!==23||O.memoizedState===null||O===M)&&O.child!==null){O.child.return=O,O=O.child;continue}if(O===M)break e;for(;O.sibling===null;){if(O.return===null||O.return===M)break e;V===O&&(V=null),O=O.return}V===O&&(V=null),O.sibling.return=O.return,O=O.sibling}Q&4&&(Q=M.updateQueue,Q!==null&&(V=Q.retryQueue,V!==null&&(Q.retryQueue=null,xo(M,V))));break;case 19:ca(O,M),ua(M),Q&4&&(Q=M.updateQueue,Q!==null&&(M.updateQueue=null,xo(M,Q)));break;case 30:break;case 21:break;default:ca(O,M),ua(M)}}function ua(M){var O=M.flags;if(O&2){try{for(var V,Q=M.return;Q!==null;){if(Ni(Q)){V=Q;break}Q=Q.return}if(V==null)throw Error(f(160));switch(V.tag){case 27:var me=V.stateNode,ve=Wr(M);Da(M,ve,me);break;case 5:var Ge=V.stateNode;V.flags&32&&(ci(Ge,""),V.flags&=-33);var rt=Wr(M);Da(M,rt,Ge);break;case 3:case 4:var Rt=V.stateNode.containerInfo,Wt=Wr(M);Ys(M,Wt,Rt);break;default:throw Error(f(161))}}catch(un){ai(M,M.return,un)}M.flags&=-3}O&4096&&(M.flags&=-4097)}function Fu(M){if(M.subtreeFlags&1024)for(M=M.child;M!==null;){var O=M;Fu(O),O.tag===5&&O.flags&1024&&O.stateNode.reset(),M=M.sibling}}function Es(M,O){if(O.subtreeFlags&8772)for(O=O.child;O!==null;)Oi(M,O.alternate,O),O=O.sibling}function Zs(M){for(M=M.child;M!==null;){var O=M;switch(O.tag){case 0:case 11:case 14:case 15:ba(4,O,O.return),Zs(O);break;case 1:Sa(O,O.return);var V=O.stateNode;typeof V.componentWillUnmount=="function"&&ma(O,O.return,V),Zs(O);break;case 27:Xd(O.stateNode);case 26:case 5:Sa(O,O.return),Zs(O);break;case 22:O.memoizedState===null&&Zs(O);break;case 30:Zs(O);break;default:Zs(O)}M=M.sibling}}function La(M,O,V){for(V=V&&(O.subtreeFlags&8772)!==0,O=O.child;O!==null;){var Q=O.alternate,me=M,ve=O,Ge=ve.flags;switch(ve.tag){case 0:case 11:case 15:La(me,ve,V),bs(4,ve);break;case 1:if(La(me,ve,V),Q=ve,me=Q.stateNode,typeof me.componentDidMount=="function")try{me.componentDidMount()}catch(Wt){ai(Q,Q.return,Wt)}if(Q=ve,me=Q.updateQueue,me!==null){var rt=Q.stateNode;try{var Rt=me.shared.hiddenCallbacks;if(Rt!==null)for(me.shared.hiddenCallbacks=null,me=0;me<Rt.length;me++)Hl(Rt[me],rt)}catch(Wt){ai(Q,Q.return,Wt)}}V&&Ge&64&&Rs(ve),So(ve,ve.return);break;case 27:Lu(ve);case 26:case 5:La(me,ve,V),V&&Q===null&&Ge&4&&$c(ve),So(ve,ve.return);break;case 12:La(me,ve,V);break;case 31:La(me,ve,V),V&&Ge&4&&jo(me,ve);break;case 13:La(me,ve,V),V&&Ge&4&&Kl(me,ve);break;case 22:ve.memoizedState===null&&La(me,ve,V),So(ve,ve.return);break;case 30:break;default:La(me,ve,V)}O=O.sibling}}function Ho(M,O){var V=null;M!==null&&M.memoizedState!==null&&M.memoizedState.cachePool!==null&&(V=M.memoizedState.cachePool.pool),M=null,O.memoizedState!==null&&O.memoizedState.cachePool!==null&&(M=O.memoizedState.cachePool.pool),M!==V&&(M!=null&&M.refCount++,V!=null&&nl(V))}function vl(M,O){M=null,O.alternate!==null&&(M=O.alternate.memoizedState.cache),O=O.memoizedState.cache,O!==M&&(O.refCount++,M!=null&&nl(M))}function xa(M,O,V,Q){if(O.subtreeFlags&10256)for(O=O.child;O!==null;)jd(M,O,V,Q),O=O.sibling}function jd(M,O,V,Q){var me=O.flags;switch(O.tag){case 0:case 11:case 15:xa(M,O,V,Q),me&2048&&bs(9,O);break;case 1:xa(M,O,V,Q);break;case 3:xa(M,O,V,Q),me&2048&&(M=null,O.alternate!==null&&(M=O.alternate.memoizedState.cache),O=O.memoizedState.cache,O!==M&&(O.refCount++,M!=null&&nl(M)));break;case 12:if(me&2048){xa(M,O,V,Q),M=O.stateNode;try{var ve=O.memoizedProps,Ge=ve.id,rt=ve.onPostCommit;typeof rt=="function"&&rt(Ge,O.alternate===null?"mount":"update",M.passiveEffectDuration,-0)}catch(Rt){ai(O,O.return,Rt)}}else xa(M,O,V,Q);break;case 31:xa(M,O,V,Q);break;case 13:xa(M,O,V,Q);break;case 23:break;case 22:ve=O.stateNode,Ge=O.alternate,O.memoizedState!==null?ve._visibility&2?xa(M,O,V,Q):Ks(M,O):ve._visibility&2?xa(M,O,V,Q):(ve._visibility|=2,Ea(M,O,V,Q,(O.subtreeFlags&10256)!==0||!1)),me&2048&&Ho(Ge,O);break;case 24:xa(M,O,V,Q),me&2048&&vl(O.alternate,O);break;default:xa(M,O,V,Q)}}function Ea(M,O,V,Q,me){for(me=me&&((O.subtreeFlags&10256)!==0||!1),O=O.child;O!==null;){var ve=M,Ge=O,rt=V,Rt=Q,Wt=Ge.flags;switch(Ge.tag){case 0:case 11:case 15:Ea(ve,Ge,rt,Rt,me),bs(8,Ge);break;case 23:break;case 22:var un=Ge.stateNode;Ge.memoizedState!==null?un._visibility&2?Ea(ve,Ge,rt,Rt,me):Ks(ve,Ge):(un._visibility|=2,Ea(ve,Ge,rt,Rt,me)),me&&Wt&2048&&Ho(Ge.alternate,Ge);break;case 24:Ea(ve,Ge,rt,Rt,me),me&&Wt&2048&&vl(Ge.alternate,Ge);break;default:Ea(ve,Ge,rt,Rt,me)}O=O.sibling}}function Ks(M,O){if(O.subtreeFlags&10256)for(O=O.child;O!==null;){var V=M,Q=O,me=Q.flags;switch(Q.tag){case 22:Ks(V,Q),me&2048&&Ho(Q.alternate,Q);break;case 24:Ks(V,Q),me&2048&&vl(Q.alternate,Q);break;default:Ks(V,Q)}O=O.sibling}}var bl=8192;function as(M,O,V){if(M.subtreeFlags&bl)for(M=M.child;M!==null;)Bu(M,O,V),M=M.sibling}function Bu(M,O,V){switch(M.tag){case 26:as(M,O,V),M.flags&bl&&M.memoizedState!==null&&im(V,xs,M.memoizedState,M.memoizedProps);break;case 5:as(M,O,V);break;case 3:case 4:var Q=xs;xs=of(M.stateNode.containerInfo),as(M,O,V),xs=Q;break;case 22:M.memoizedState===null&&(Q=M.alternate,Q!==null&&Q.memoizedState!==null?(Q=bl,bl=16777216,as(M,O,V),bl=Q):as(M,O,V));break;default:as(M,O,V)}}function _l(M){var O=M.alternate;if(O!==null&&(M=O.child,M!==null)){O.child=null;do O=M.sibling,M.sibling=null,M=O;while(M!==null)}}function qo(M){var O=M.deletions;if((M.flags&16)!==0){if(O!==null)for(var V=0;V<O.length;V++){var Q=O[V];ga=Q,ji(Q,M)}_l(M)}if(M.subtreeFlags&10256)for(M=M.child;M!==null;)Ya(M),M=M.sibling}function Ya(M){switch(M.tag){case 0:case 11:case 15:qo(M),M.flags&2048&&ba(9,M,M.return);break;case 3:qo(M);break;case 12:qo(M);break;case 22:var O=M.stateNode;M.memoizedState!==null&&O._visibility&2&&(M.return===null||M.return.tag!==13)?(O._visibility&=-3,Za(M)):qo(M);break;default:qo(M)}}function Za(M){var O=M.deletions;if((M.flags&16)!==0){if(O!==null)for(var V=0;V<O.length;V++){var Q=O[V];ga=Q,ji(Q,M)}_l(M)}for(M=M.child;M!==null;){switch(O=M,O.tag){case 0:case 11:case 15:ba(8,O,O.return),Za(O);break;case 22:V=O.stateNode,V._visibility&2&&(V._visibility&=-3,Za(O));break;default:Za(O)}M=M.sibling}}function ji(M,O){for(;ga!==null;){var V=ga;switch(V.tag){case 0:case 11:case 15:ba(8,V,O);break;case 23:case 22:if(V.memoizedState!==null&&V.memoizedState.cachePool!==null){var Q=V.memoizedState.cachePool.pool;Q!=null&&Q.refCount++}break;case 24:nl(V.memoizedState.cache)}if(Q=V.child,Q!==null)Q.return=V,ga=Q;else e:for(V=M;ga!==null;){Q=ga;var me=Q.sibling,ve=Q.return;if(zc(Q),Q===V){ga=null;break e}if(me!==null){me.return=ve,ga=me;break e}ga=ve}}}var Eo={getCacheForType:function(M){var O=Sr(na),V=O.data.get(M);return V===void 0&&(V=M(),O.data.set(M,V)),V},cacheSignal:function(){return Sr(na).controller.signal}},Ir=typeof WeakMap=="function"?WeakMap:Map,Jn=0,xr=null,Br=null,Dr=0,ei=0,Ra=null,As=!1,ks=!1,Vd=!1,ss=0,Bi=0,Js=0,Wo=0,Gc=0,Pa=0,Mi=0,Sl=null,Vi=null,Hi=!1,Jl=0,Hd=0,Zi=1/0,Ui=null,Ki=null,gi=0,os=null,Ql=null,ws=0,ec=0,tc=null,jc=null,Xo=0,xl=null;function ls(){return(Jn&2)!==0&&Dr!==0?Dr&-Dr:Me.T!==null?tn():ir()}function jr(){if(Pa===0)if((Dr&536870912)===0||Kr){var M=Kt;Kt<<=1,(Kt&3932160)===0&&(Kt=262144),Pa=M}else Pa=536870912;return M=Ha.current,M!==null&&(M.flags|=32),Pa}function Ur(M,O,V){(M===xr&&(ei===2||ei===9)||M.cancelPendingCommit!==null)&&(Zo(M,0),ia(M,Dr,Pa,!1)),rr(M,V),((Jn&2)===0||M!==xr)&&(M===xr&&((Jn&2)===0&&(Wo|=V),Bi===4&&ia(M,Dr,Pa,!1)),Cn(M))}function Vr(M,O,V){if((Jn&6)!==0)throw Error(f(327));var Q=!V&&(O&127)===0&&(O&M.expiredLanes)===0||cn(M,O),me=Q?Vc(M,O):Fa(M,O,!0),ve=Q;do{if(me===0){ks&&!Q&&ia(M,O,0,!1);break}else{if(V=M.current.alternate,ve&&!yi(V)){me=Fa(M,O,!1),ve=!1;continue}if(me===2){if(ve=O,M.errorRecoveryDisabledLanes&ve)var Ge=0;else Ge=M.pendingLanes&-536870913,Ge=Ge!==0?Ge:Ge&536870912?536870912:0;if(Ge!==0){O=Ge;e:{var rt=M;me=Sl;var Rt=rt.current.memoizedState.isDehydrated;if(Rt&&(Zo(rt,Ge).flags|=256),Ge=Fa(rt,Ge,!1),Ge!==2){if(Vd&&!Rt){rt.errorRecoveryDisabledLanes|=ve,Wo|=ve,me=4;break e}ve=Vi,Vi=me,ve!==null&&(Vi===null?Vi=ve:Vi.push.apply(Vi,ve))}me=Ge}if(ve=!1,me!==2)continue}}if(me===1){Zo(M,0),ia(M,O,0,!0);break}e:{switch(Q=M,ve=me,ve){case 0:case 1:throw Error(f(345));case 4:if((O&4194048)!==O)break;case 6:ia(Q,O,Pa,!As);break e;case 2:Vi=null;break;case 3:case 5:break;default:throw Error(f(329))}if((O&62914560)===O&&(me=Jl+300-Le(),10<me)){if(ia(Q,O,Pa,!As),Ot(Q,0,!0)!==0)break e;ws=O,Q.timeoutHandle=sp(Xr.bind(null,Q,V,Vi,Ui,Hi,O,Pa,Wo,Mi,As,ve,"Throttled",-0,0),me);break e}Xr(Q,V,Vi,Ui,Hi,O,Pa,Wo,Mi,As,ve,null,-0,0)}}break}while(!0);Cn(M)}function Xr(M,O,V,Q,me,ve,Ge,rt,Rt,Wt,un,yn,Jt,rn){if(M.timeoutHandle=-1,yn=O.subtreeFlags,yn&8192||(yn&16785408)===16785408){yn={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Pt},Bu(O,ve,yn);var qn=(ve&62914560)===ve?Jl-Le():(ve&4194048)===ve?Hd-Le():0;if(qn=am(yn,qn),qn!==null){ws=ve,M.cancelPendingCommit=qn(wo.bind(null,M,O,ve,V,Q,me,Ge,rt,Rt,un,yn,null,Jt,rn)),ia(M,ve,Ge,!Wt);return}}wo(M,O,ve,V,Q,me,Ge,rt,Rt)}function yi(M){for(var O=M;;){var V=O.tag;if((V===0||V===11||V===15)&&O.flags&16384&&(V=O.updateQueue,V!==null&&(V=V.stores,V!==null)))for(var Q=0;Q<V.length;Q++){var me=V[Q],ve=me.getSnapshot;me=me.value;try{if(!ka(ve(),me))return!1}catch{return!1}}if(V=O.child,O.subtreeFlags&16384&&V!==null)V.return=O,O=V;else{if(O===M)break;for(;O.sibling===null;){if(O.return===null||O.return===M)return!0;O=O.return}O.sibling.return=O.return,O=O.sibling}}return!0}function ia(M,O,V,Q){O&=~Gc,O&=~Wo,M.suspendedLanes|=O,M.pingedLanes&=~O,Q&&(M.warmLanes|=O),Q=M.expirationTimes;for(var me=O;0<me;){var ve=31-nt(me),Ge=1<<ve;Q[ve]=-1,me&=~Ge}V!==0&&hr(M,V,O)}function Is(){return(Jn&6)===0?(jn(0),!1):!0}function Yo(){if(Br!==null){if(ei===0)var M=Br.return;else M=Br,Gs=Lo=null,pd(M),ll=null,cl=0,M=Br;for(;M!==null;)rs(M.alternate,M),M=M.return;Br=null}}function Zo(M,O){var V=M.timeoutHandle;V!==-1&&(M.timeoutHandle=-1,zp(V)),V=M.cancelPendingCommit,V!==null&&(M.cancelPendingCommit=null,V()),ws=0,Yo(),xr=M,Br=V=Ga(M.current,null),Dr=O,ei=0,Ra=null,As=!1,ks=cn(M,O),Vd=!1,Mi=Pa=Gc=Wo=Js=Bi=0,Vi=Sl=null,Hi=!1,(O&8)!==0&&(O|=O&32);var Q=M.entangledLanes;if(Q!==0)for(M=M.entanglements,Q&=O;0<Q;){var me=31-nt(Q),ve=1<<me;O|=M[me],Q&=~ve}return ss=O,Ec(),V}function Qs(M,O){kr=null,Me.H=Yl,O===rl||O===Fr?(O=sl(),ei=3):O===Cc?(O=sl(),ei=4):ei=O===Tu?8:O!==null&&typeof O=="object"&&typeof O.then=="function"?6:1,Ra=O,Br===null&&(Bi=1,wu(M,Qa(O,M.current)))}function $i(){var M=Ha.current;return M===null?!0:(Dr&4194048)===Dr?Oa===null:(Dr&62914560)===Dr||(Dr&536870912)!==0?M===Oa:!1}function Ao(){var M=Me.H;return Me.H=Yl,M===null?Yl:M}function Ko(){var M=Me.A;return Me.A=Eo,M}function nc(){Bi=4,As||(Dr&4194048)!==Dr&&Ha.current!==null||(ks=!0),(Js&134217727)===0&&(Wo&134217727)===0||xr===null||ia(xr,Dr,Pa,!1)}function Fa(M,O,V){var Q=Jn;Jn|=2;var me=Ao(),ve=Ko();(xr!==M||Dr!==O)&&(Ui=null,Zo(M,O)),O=!1;var Ge=Bi;e:do try{if(ei!==0&&Br!==null){var rt=Br,Rt=Ra;switch(ei){case 8:Yo(),Ge=6;break e;case 3:case 2:case 9:case 6:Ha.current===null&&(O=!0);var Wt=ei;if(ei=0,Ra=null,El(M,rt,Rt,Wt),V&&ks){Ge=0;break e}break;default:Wt=ei,ei=0,Ra=null,El(M,rt,Rt,Wt)}}rc(),Ge=Bi;break}catch(un){Qs(M,un)}while(!0);return O&&M.shellSuspendCounter++,Gs=Lo=null,Jn=Q,Me.H=me,Me.A=ve,Br===null&&(xr=null,Dr=0,Ec()),Ge}function rc(){for(;Br!==null;)Uu(Br)}function Vc(M,O){var V=Jn;Jn|=2;var Q=Ao(),me=Ko();xr!==M||Dr!==O?(Ui=null,Zi=Le()+500,Zo(M,O)):ks=cn(M,O);e:do try{if(ei!==0&&Br!==null){O=Br;var ve=Ra;t:switch(ei){case 1:ei=0,Ra=null,El(M,O,ve,1);break;case 2:case 9:if(Va(ve)){ei=0,Ra=null,Hc(O);break}O=function(){ei!==2&&ei!==9||xr!==M||(ei=7),Cn(M)},ve.then(O,O);break e;case 3:ei=7;break e;case 4:ei=5;break e;case 7:Va(ve)?(ei=0,Ra=null,Hc(O)):(ei=0,Ra=null,El(M,O,ve,7));break;case 5:var Ge=null;switch(Br.tag){case 26:Ge=Br.memoizedState;case 5:case 27:var rt=Br;if(Ge?Sp(Ge):rt.stateNode.complete){ei=0,Ra=null;var Rt=rt.sibling;if(Rt!==null)Br=Rt;else{var Wt=rt.return;Wt!==null?(Br=Wt,Jo(Wt)):Br=null}break t}}ei=0,Ra=null,El(M,O,ve,5);break;case 6:ei=0,Ra=null,El(M,O,ve,6);break;case 8:Yo(),Bi=6;break e;default:throw Error(f(462))}}Ka();break}catch(un){Qs(M,un)}while(!0);return Gs=Lo=null,Me.H=Q,Me.A=me,Jn=V,Br!==null?0:(xr=null,Dr=0,Ec(),Bi)}function Ka(){for(;Br!==null&&!Et();)Uu(Br)}function Uu(M){var O=Du(M.alternate,M,ss);M.memoizedProps=M.pendingProps,O===null?Jo(M):Br=O}function Hc(M){var O=M,V=O.alternate;switch(O.tag){case 15:case 0:O=Pc(V,O,O.pendingProps,O.type,void 0,Dr);break;case 11:O=Pc(V,O,O.pendingProps,O.type.render,O.ref,Dr);break;case 5:pd(O);default:rs(V,O),O=Br=Ll(O,ss),O=Du(V,O,ss)}M.memoizedProps=M.pendingProps,O===null?Jo(M):Br=O}function El(M,O,V,Q){Gs=Lo=null,pd(O),ll=null,cl=0;var me=O.return;try{if(oa(M,me,O,V,Dr)){Bi=1,wu(M,Qa(V,M.current)),Br=null;return}}catch(ve){if(me!==null)throw Br=me,ve;Bi=1,wu(M,Qa(V,M.current)),Br=null;return}O.flags&32768?(Kr||Q===1?M=!0:ks||(Dr&536870912)!==0?M=!1:(As=M=!0,(Q===2||Q===9||Q===3||Q===6)&&(Q=Ha.current,Q!==null&&Q.tag===13&&(Q.flags|=16384))),qc(O,M)):Jo(O)}function Jo(M){var O=M;do{if((O.flags&32768)!==0){qc(O,As);return}M=O.return;var V=Uc(O.alternate,O,ss);if(V!==null){Br=V;return}if(O=O.sibling,O!==null){Br=O;return}Br=O=M}while(O!==null);Bi===0&&(Bi=5)}function qc(M,O){do{var V=vs(M.alternate,M);if(V!==null){V.flags&=32767,Br=V;return}if(V=M.return,V!==null&&(V.flags|=32768,V.subtreeFlags=0,V.deletions=null),!O&&(M=M.sibling,M!==null)){Br=M;return}Br=M=V}while(M!==null);Bi=6,Br=null}function wo(M,O,V,Q,me,ve,Ge,rt,Rt){M.cancelPendingCommit=null;do ic();while(gi!==0);if((Jn&6)!==0)throw Error(f(327));if(O!==null){if(O===M.current)throw Error(f(177));if(ve=O.lanes|O.childLanes,ve|=ha,Ar(M,V,ve,Ge,rt,Rt),M===xr&&(Br=xr=null,Dr=0),Ql=O,os=M,ws=V,ec=ve,tc=me,jc=Q,(O.subtreeFlags&10256)!==0||(O.flags&10256)!==0?(M.callbackNode=null,M.callbackPriority=0,Ae(at,function(){return $u(),null})):(M.callbackNode=null,M.callbackPriority=0),Q=(O.flags&13878)!==0,(O.subtreeFlags&13878)!==0||Q){Q=Me.T,Me.T=null,me=Re.p,Re.p=2,Ge=Jn,Jn|=4;try{Rf(M,O,V)}finally{Jn=Ge,Re.p=me,Me.T=Q}}gi=1,aa(),To(),Al()}}function aa(){if(gi===1){gi=0;var M=os,O=Ql,V=(O.flags&13878)!==0;if((O.subtreeFlags&13878)!==0||V){V=Me.T,Me.T=null;var Q=Re.p;Re.p=2;var me=Jn;Jn|=4;try{Vo(O,M);var ve=Lf,Ge=rh(M.containerInfo),rt=ve.focusedElem,Rt=ve.selectionRange;if(Ge!==rt&&rt&&rt.ownerDocument&&Ei(rt.ownerDocument.documentElement,rt)){if(Rt!==null&&Wu(rt)){var Wt=Rt.start,un=Rt.end;if(un===void 0&&(un=Wt),"selectionStart"in rt)rt.selectionStart=Wt,rt.selectionEnd=Math.min(un,rt.value.length);else{var yn=rt.ownerDocument||document,Jt=yn&&yn.defaultView||window;if(Jt.getSelection){var rn=Jt.getSelection(),qn=rt.textContent.length,vr=Math.min(Rt.start,qn),Ci=Rt.end===void 0?vr:Math.min(Rt.end,qn);!rn.extend&&vr>Ci&&(Ge=Ci,Ci=vr,vr=Ge);var Bt=Nl(rt,vr),Lt=Nl(rt,Ci);if(Bt&&Lt&&(rn.rangeCount!==1||rn.anchorNode!==Bt.node||rn.anchorOffset!==Bt.offset||rn.focusNode!==Lt.node||rn.focusOffset!==Lt.offset)){var Vt=yn.createRange();Vt.setStart(Bt.node,Bt.offset),rn.removeAllRanges(),vr>Ci?(rn.addRange(Vt),rn.extend(Lt.node,Lt.offset)):(Vt.setEnd(Lt.node,Lt.offset),rn.addRange(Vt))}}}}for(yn=[],rn=rt;rn=rn.parentNode;)rn.nodeType===1&&yn.push({element:rn,left:rn.scrollLeft,top:rn.scrollTop});for(typeof rt.focus=="function"&&rt.focus(),rt=0;rt<yn.length;rt++){var hn=yn[rt];hn.element.scrollLeft=hn.left,hn.element.scrollTop=hn.top}}ff=!!Df,Lf=Df=null}finally{Jn=me,Re.p=Q,Me.T=V}}M.current=O,gi=2}}function To(){if(gi===2){gi=0;var M=os,O=Ql,V=(O.flags&8772)!==0;if((O.subtreeFlags&8772)!==0||V){V=Me.T,Me.T=null;var Q=Re.p;Re.p=2;var me=Jn;Jn|=4;try{Oi(M,O.alternate,O)}finally{Jn=me,Re.p=Q,Me.T=V}}gi=3}}function Al(){if(gi===4||gi===3){gi=0,qe();var M=os,O=Ql,V=ws,Q=jc;(O.subtreeFlags&10256)!==0||(O.flags&10256)!==0?gi=5:(gi=0,Ql=os=null,eo(M,M.pendingLanes));var me=M.pendingLanes;if(me===0&&(Ki=null),mr(V),O=O.stateNode,ct&&typeof ct.onCommitFiberRoot=="function")try{ct.onCommitFiberRoot(Ft,O,void 0,(O.current.flags&128)===128)}catch{}if(Q!==null){O=Me.T,me=Re.p,Re.p=2,Me.T=null;try{for(var ve=M.onRecoverableError,Ge=0;Ge<Q.length;Ge++){var rt=Q[Ge];ve(rt.value,{componentStack:rt.stack})}}finally{Me.T=O,Re.p=me}}(ws&3)!==0&&ic(),Cn(M),me=M.pendingLanes,(V&261930)!==0&&(me&42)!==0?M===xl?Xo++:(Xo=0,xl=M):Xo=0,jn(0)}}function eo(M,O){(M.pooledCacheLanes&=O)===0&&(O=M.pooledCache,O!=null&&(M.pooledCache=null,nl(O)))}function ic(){return aa(),To(),Al(),$u()}function $u(){if(gi!==5)return!1;var M=os,O=ec;ec=0;var V=mr(ws),Q=Me.T,me=Re.p;try{Re.p=32>V?32:V,Me.T=null,V=tc,tc=null;var ve=os,Ge=ws;if(gi=0,Ql=os=null,ws=0,(Jn&6)!==0)throw Error(f(331));var rt=Jn;if(Jn|=4,Ya(ve.current),jd(ve,ve.current,Ge,V),Jn=rt,jn(0,!1),ct&&typeof ct.onPostCommitFiberRoot=="function")try{ct.onPostCommitFiberRoot(Ft,ve)}catch{}return!0}finally{Re.p=me,Me.T=Q,eo(M,O)}}function qd(M,O,V){O=Qa(V,O),O=Pd(M.stateNode,O,2),M=Bo(M,O,2),M!==null&&(rr(M,2),Cn(M))}function ai(M,O,V){if(M.tag===3)qd(M,M,V);else for(;O!==null;){if(O.tag===3){qd(O,M,V);break}else if(O.tag===1){var Q=O.stateNode;if(typeof O.type.getDerivedStateFromError=="function"||typeof Q.componentDidCatch=="function"&&(Ki===null||!Ki.has(Q))){M=Qa(V,M),V=Fd(2),Q=Bo(O,V,2),Q!==null&&(Kh(V,Q,O,M),rr(Q,2),Cn(Q));break}}O=O.return}}function Wc(M,O,V){var Q=M.pingCache;if(Q===null){Q=M.pingCache=new Ir;var me=new Set;Q.set(O,me)}else me=Q.get(O),me===void 0&&(me=new Set,Q.set(O,me));me.has(V)||(Vd=!0,me.add(V),M=B.bind(null,M,O,V),O.then(M,M))}function B(M,O,V){var Q=M.pingCache;Q!==null&&Q.delete(O),M.pingedLanes|=M.suspendedLanes&V,M.warmLanes&=~V,xr===M&&(Dr&V)===V&&(Bi===4||Bi===3&&(Dr&62914560)===Dr&&300>Le()-Jl?(Jn&2)===0&&Zo(M,0):Gc|=V,Mi===Dr&&(Mi=0)),Cn(M)}function $(M,O){O===0&&(O=In()),M=Ia(M,O),M!==null&&(rr(M,O),Cn(M))}function ee(M){var O=M.memoizedState,V=0;O!==null&&(V=O.retryLane),$(M,V)}function fe(M,O){var V=0;switch(M.tag){case 31:case 13:var Q=M.stateNode,me=M.memoizedState;me!==null&&(V=me.retryLane);break;case 19:Q=M.stateNode;break;case 22:Q=M.stateNode._retryCache;break;default:throw Error(f(314))}Q!==null&&Q.delete(O),$(M,V)}function Ae(M,O){return yt(M,O)}var De=null,tt=null,kt=!1,nn=!1,Sn=!1,Dn=0;function Cn(M){M!==tt&&M.next===null&&(tt===null?De=tt=M:tt=tt.next=M),nn=!0,kt||(kt=!0,Ut())}function jn(M,O){if(!Sn&&nn){Sn=!0;do for(var V=!1,Q=De;Q!==null;){if(M!==0){var me=Q.pendingLanes;if(me===0)var ve=0;else{var Ge=Q.suspendedLanes,rt=Q.pingedLanes;ve=(1<<31-nt(42|M)+1)-1,ve&=me&~(Ge&~rt),ve=ve&201326741?ve&201326741|1:ve?ve|2:0}ve!==0&&(V=!0,Xt(Q,ve))}else ve=Dr,ve=Ot(Q,Q===xr?ve:0,Q.cancelPendingCommit!==null||Q.timeoutHandle!==-1),(ve&3)===0||cn(Q,ve)||(V=!0,Xt(Q,ve));Q=Q.next}while(V);Sn=!1}}function Rr(){Ji()}function Ji(){nn=kt=!1;var M=0;Dn!==0&&$p()&&(M=Dn);for(var O=Le(),V=null,Q=De;Q!==null;){var me=Q.next,ve=ac(Q,O);ve===0?(Q.next=null,V===null?De=me:V.next=me,me===null&&(tt=V)):(V=Q,(M!==0||(ve&3)!==0)&&(nn=!0)),Q=me}gi!==0&&gi!==5||jn(M),Dn!==0&&(Dn=0)}function ac(M,O){for(var V=M.suspendedLanes,Q=M.pingedLanes,me=M.expirationTimes,ve=M.pendingLanes&-62914561;0<ve;){var Ge=31-nt(ve),rt=1<<Ge,Rt=me[Ge];Rt===-1?((rt&V)===0||(rt&Q)!==0)&&(me[Ge]=Mn(rt,O)):Rt<=O&&(M.expiredLanes|=rt),ve&=~rt}if(O=xr,V=Dr,V=Ot(M,M===O?V:0,M.cancelPendingCommit!==null||M.timeoutHandle!==-1),Q=M.callbackNode,V===0||M===O&&(ei===2||ei===9)||M.cancelPendingCommit!==null)return Q!==null&&Q!==null&&ut(Q),M.callbackNode=null,M.callbackPriority=0;if((V&3)===0||cn(M,V)){if(O=V&-V,O===M.callbackPriority)return O;switch(Q!==null&&ut(Q),mr(V)){case 2:case 8:V=Qe;break;case 32:V=at;break;case 268435456:V=Ct;break;default:V=at}return Q=Qo.bind(null,M),V=yt(V,Q),M.callbackPriority=O,M.callbackNode=V,O}return Q!==null&&Q!==null&&ut(Q),M.callbackPriority=2,M.callbackNode=null,2}function Qo(M,O){if(gi!==0&&gi!==5)return M.callbackNode=null,M.callbackPriority=0,null;var V=M.callbackNode;if(ic()&&M.callbackNode!==V)return null;var Q=Dr;return Q=Ot(M,M===xr?Q:0,M.cancelPendingCommit!==null||M.timeoutHandle!==-1),Q===0?null:(Vr(M,Q,O),ac(M,Le()),M.callbackNode!=null&&M.callbackNode===V?Qo.bind(null,M):null)}function Xt(M,O){if(ic())return null;Vr(M,O,!0)}function Ut(){Gp(function(){(Jn&6)!==0?yt(We,Rr):Ji()})}function tn(){if(Dn===0){var M=po;M===0&&(M=Tt,Tt<<=1,(Tt&261888)===0&&(Tt=256)),Dn=M}return Dn}function Nn(M){return M==null||typeof M=="symbol"||typeof M=="boolean"?null:typeof M=="function"?M:mt(""+M)}function ur(M,O){var V=O.ownerDocument.createElement("input");return V.name=O.name,V.value=O.value,M.id&&V.setAttribute("form",M.id),O.parentNode.insertBefore(V,O),M=new FormData(M),V.parentNode.removeChild(V),M}function zi(M,O,V,Q,me){if(O==="submit"&&V&&V.stateNode===me){var ve=Nn((me[Xe]||null).action),Ge=Q.submitter;Ge&&(O=(O=Ge[Xe]||null)?Nn(O.formAction):Ge.getAttribute("formAction"),O!==null&&(ve=O,Ge=null));var rt=new fr("action","action",null,Q,me);M.push({event:rt,listeners:[{instance:null,listener:function(){if(Q.defaultPrevented){if(Dn!==0){var Rt=Ge?ur(me,Ge):new FormData(me);Rd(V,{pending:!0,data:Rt,method:me.method,action:ve},null,Rt)}}else typeof ve=="function"&&(rt.preventDefault(),Rt=Ge?ur(me,Ge):new FormData(me),Rd(V,{pending:!0,data:Rt,method:me.method,action:ve},ve,Rt))},currentTarget:me}]})}}for(var pr=0;pr<Sc.length;pr++){var ni=Sc[pr],ya=ni.toLowerCase(),oi=ni[0].toUpperCase()+ni.slice(1);ds(ya,"on"+oi)}ds(Qc,"onAnimationEnd"),ds(_c,"onAnimationIteration"),ds(Yu,"onAnimationStart"),ds("dblclick","onDoubleClick"),ds("focusin","onFocus"),ds("focusout","onBlur"),ds(ah,"onTransitionRun"),ds(_f,"onTransitionStart"),ds(sh,"onTransitionCancel"),ds(Zu,"onTransitionEnd"),Mt("onMouseEnter",["mouseout","mouseover"]),Mt("onMouseLeave",["mouseout","mouseover"]),Mt("onPointerEnter",["pointerout","pointerover"]),Mt("onPointerLeave",["pointerout","pointerover"]),Nt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Nt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Nt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Nt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Nt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Nt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ts="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mf=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ts));function Jf(M,O){O=(O&4)!==0;for(var V=0;V<M.length;V++){var Q=M[V],me=Q.event;Q=Q.listeners;e:{var ve=void 0;if(O)for(var Ge=Q.length-1;0<=Ge;Ge--){var rt=Q[Ge],Rt=rt.instance,Wt=rt.currentTarget;if(rt=rt.listener,Rt!==ve&&me.isPropagationStopped())break e;ve=rt,me.currentTarget=Wt;try{ve(me)}catch(un){xc(un)}me.currentTarget=null,ve=Rt}else for(Ge=0;Ge<Q.length;Ge++){if(rt=Q[Ge],Rt=rt.instance,Wt=rt.currentTarget,rt=rt.listener,Rt!==ve&&me.isPropagationStopped())break e;ve=rt,me.currentTarget=Wt;try{ve(me)}catch(un){xc(un)}me.currentTarget=null,ve=Rt}}}}function ti(M,O){var V=O[xt];V===void 0&&(V=O[xt]=new Set);var Q=M+"__bubble";V.has(Q)||(Qf(O,M,2,!1),V.add(Q))}function kf(M,O,V){var Q=0;O&&(Q|=4),Qf(V,M,Q,O)}var rf="_reactListening"+Math.random().toString(36).slice(2);function If(M){if(!M[rf]){M[rf]=!0,_t.forEach(function(V){V!=="selectionchange"&&(Mf.has(V)||kf(V,!1,M),kf(V,!0,M))});var O=M.nodeType===9?M:M.ownerDocument;O===null||O[rf]||(O[rf]=!0,kf("selectionchange",!1,O))}}function Qf(M,O,V,Q){switch(Rp(O)){case 2:var me=lm;break;case 8:me=cm;break;default:me=qf}V=me.bind(null,O,V,M),me=void 0,!Fn||O!=="touchstart"&&O!=="touchmove"&&O!=="wheel"||(me=!0),Q?me!==void 0?M.addEventListener(O,V,{capture:!0,passive:me}):M.addEventListener(O,V,!0):me!==void 0?M.addEventListener(O,V,{passive:me}):M.addEventListener(O,V,!1)}function Nf(M,O,V,Q,me){var ve=Q;if((O&1)===0&&(O&2)===0&&Q!==null)e:for(;;){if(Q===null)return;var Ge=Q.tag;if(Ge===3||Ge===4){var rt=Q.stateNode.containerInfo;if(rt===me)break;if(Ge===4)for(Ge=Q.return;Ge!==null;){var Rt=Ge.tag;if((Rt===3||Rt===4)&&Ge.stateNode.containerInfo===me)return;Ge=Ge.return}for(;rt!==null;){if(Ge=bn(rt),Ge===null)return;if(Rt=Ge.tag,Rt===5||Rt===6||Rt===26||Rt===27){Q=ve=Ge;continue e}rt=rt.parentNode}}Q=Q.return}Tr(function(){var Wt=ve,un=zt(V),yn=[];e:{var Jt=us.get(M);if(Jt!==void 0){var rn=fr,qn=M;switch(M){case"keypress":if(vi(V)===0)break e;case"keydown":case"keyup":rn=oo;break;case"focusin":qn="focus",rn=so;break;case"focusout":qn="blur",rn=so;break;case"beforeblur":case"afterblur":rn=so;break;case"click":if(V.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":rn=Ns;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":rn=ro;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":rn=Yc;break;case Qc:case _c:case Yu:rn=Aa;break;case Zu:rn=Hu;break;case"scroll":case"scrollend":rn=yr;break;case"wheel":rn=mc;break;case"copy":case"cut":case"paste":rn=Ua;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":rn=pc;break;case"toggle":case"beforetoggle":rn=Oe}var vr=(O&4)!==0,Ci=!vr&&(M==="scroll"||M==="scrollend"),Bt=vr?Jt!==null?Jt+"Capture":null:Jt;vr=[];for(var Lt=Wt,Vt;Lt!==null;){var hn=Lt;if(Vt=hn.stateNode,hn=hn.tag,hn!==5&&hn!==26&&hn!==27||Vt===null||Bt===null||(hn=lr(Lt,Bt),hn!=null&&vr.push(Wd(Lt,hn,Vt))),Ci)break;Lt=Lt.return}0<vr.length&&(Jt=new rn(Jt,qn,null,V,un),yn.push({event:Jt,listeners:vr}))}}if((O&7)===0){e:{if(Jt=M==="mouseover"||M==="pointerover",rn=M==="mouseout"||M==="pointerout",Jt&&V!==an&&(qn=V.relatedTarget||V.fromElement)&&(bn(qn)||qn[it]))break e;if((rn||Jt)&&(Jt=un.window===un?un:(Jt=un.ownerDocument)?Jt.defaultView||Jt.parentWindow:window,rn?(qn=V.relatedTarget||V.toElement,rn=Wt,qn=qn?bn(qn):null,qn!==null&&(Ci=S(qn),vr=qn.tag,qn!==Ci||vr!==5&&vr!==27&&vr!==6)&&(qn=null)):(rn=null,qn=Wt),rn!==qn)){if(vr=Ns,hn="onMouseLeave",Bt="onMouseEnter",Lt="mouse",(M==="pointerout"||M==="pointerover")&&(vr=pc,hn="onPointerLeave",Bt="onPointerEnter",Lt="pointer"),Ci=rn==null?Jt:wn(rn),Vt=qn==null?Jt:wn(qn),Jt=new vr(hn,Lt+"leave",rn,V,un),Jt.target=Ci,Jt.relatedTarget=Vt,hn=null,bn(un)===Wt&&(vr=new vr(Bt,Lt+"enter",qn,V,un),vr.target=Vt,vr.relatedTarget=Ci,hn=vr),Ci=hn,rn&&qn)t:{for(vr=Lp,Bt=rn,Lt=qn,Vt=0,hn=Bt;hn;hn=vr(hn))Vt++;hn=0;for(var or=Lt;or;or=vr(or))hn++;for(;0<Vt-hn;)Bt=vr(Bt),Vt--;for(;0<hn-Vt;)Lt=vr(Lt),hn--;for(;Vt--;){if(Bt===Lt||Lt!==null&&Bt===Lt.alternate){vr=Bt;break t}Bt=vr(Bt),Lt=vr(Lt)}vr=null}else vr=null;rn!==null&&ep(yn,Jt,rn,vr,!1),qn!==null&&Ci!==null&&ep(yn,Ci,qn,vr,!0)}}e:{if(Jt=Wt?wn(Wt):window,rn=Jt.nodeName&&Jt.nodeName.toLowerCase(),rn==="select"||rn==="input"&&Jt.type==="file")var di=Zr;else if(Cr(Jt))if(bi)di=nh;else{di=Ro;var Zn=Kc}else rn=Jt.nodeName,!rn||rn.toLowerCase()!=="input"||Jt.type!=="checkbox"&&Jt.type!=="radio"?Wt&&Ce(Wt.elementType)&&(di=Zr):di=th;if(di&&(di=di(M,Wt))){ui(yn,di,V,un);break e}Zn&&Zn(M,Jt,Wt),M==="focusout"&&Wt&&Jt.type==="number"&&Wt.memoizedProps.value!=null&&dr(Jt,"number",Jt.value)}switch(Zn=Wt?wn(Wt):window,M){case"focusin":(Cr(Zn)||Zn.contentEditable==="true")&&(Ls=Zn,Ps=Wt,Ol=null);break;case"focusout":Ol=Ps=Ls=null;break;case"mousedown":Jc=!0;break;case"contextmenu":case"mouseup":case"dragend":Jc=!1,Dl(yn,V,un);break;case"selectionchange":if(ih)break;case"keydown":case"keyup":Dl(yn,V,un)}var zr;if(Ze)e:{switch(M){case"compositionstart":var ri="onCompositionStart";break e;case"compositionend":ri="onCompositionEnd";break e;case"compositionupdate":ri="onCompositionUpdate";break e}ri=void 0}else er?En(M,V)&&(ri="onCompositionEnd"):M==="keydown"&&V.keyCode===229&&(ri="onCompositionStart");ri&&(gt&&V.locale!=="ko"&&(er||ri!=="onCompositionStart"?ri==="onCompositionEnd"&&er&&(zr=Pr()):(Kn=un,Er="value"in Kn?Kn.value:Kn.textContent,er=!0)),Zn=af(Wt,ri),0<Zn.length&&(ri=new Tl(ri,M,null,V,un),yn.push({event:ri,listeners:Zn}),zr?ri.data=zr:(zr=Ln(V),zr!==null&&(ri.data=zr)))),(zr=bt?Yn(M,V):$n(M,V))&&(ri=af(Wt,"onBeforeInput"),0<ri.length&&(Zn=new Tl("onBeforeInput","beforeinput",null,V,un),yn.push({event:Zn,listeners:ri}),Zn.data=zr)),zi(yn,M,Wt,V,un)}Jf(yn,O)})}function Wd(M,O,V){return{instance:M,listener:O,currentTarget:V}}function af(M,O){for(var V=O+"Capture",Q=[];M!==null;){var me=M,ve=me.stateNode;if(me=me.tag,me!==5&&me!==26&&me!==27||ve===null||(me=lr(M,V),me!=null&&Q.unshift(Wd(M,me,ve)),me=lr(M,O),me!=null&&Q.push(Wd(M,me,ve))),M.tag===3)return Q;M=M.return}return[]}function Lp(M){if(M===null)return null;do M=M.return;while(M&&M.tag!==5&&M.tag!==27);return M||null}function ep(M,O,V,Q,me){for(var ve=O._reactName,Ge=[];V!==null&&V!==Q;){var rt=V,Rt=rt.alternate,Wt=rt.stateNode;if(rt=rt.tag,Rt!==null&&Rt===Q)break;rt!==5&&rt!==26&&rt!==27||Wt===null||(Rt=Wt,me?(Wt=lr(V,ve),Wt!=null&&Ge.unshift(Wd(V,Wt,Rt))):me||(Wt=lr(V,ve),Wt!=null&&Ge.push(Wd(V,Wt,Rt)))),V=V.return}Ge.length!==0&&M.push({event:O,listeners:Ge})}var Pp=/\r\n?/g,Fp=/\u0000|\uFFFD/g;function tp(M){return(typeof M=="string"?M:""+M).replace(Pp,`
`).replace(Fp,"")}function np(M,O){return O=tp(O),tp(M)===O}function Ti(M,O,V,Q,me,ve){switch(V){case"children":typeof Q=="string"?O==="body"||O==="textarea"&&Q===""||ci(M,Q):(typeof Q=="number"||typeof Q=="bigint")&&O!=="body"&&ci(M,""+Q);break;case"className":Gn(M,"class",Q);break;case"tabIndex":Gn(M,"tabindex",Q);break;case"dir":case"role":case"viewBox":case"width":case"height":Gn(M,V,Q);break;case"style":va(M,Q,ve);break;case"data":if(O!=="object"){Gn(M,"data",Q);break}case"src":case"href":if(Q===""&&(O!=="a"||V!=="href")){M.removeAttribute(V);break}if(Q==null||typeof Q=="function"||typeof Q=="symbol"||typeof Q=="boolean"){M.removeAttribute(V);break}Q=mt(""+Q),M.setAttribute(V,Q);break;case"action":case"formAction":if(typeof Q=="function"){M.setAttribute(V,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof ve=="function"&&(V==="formAction"?(O!=="input"&&Ti(M,O,"name",me.name,me,null),Ti(M,O,"formEncType",me.formEncType,me,null),Ti(M,O,"formMethod",me.formMethod,me,null),Ti(M,O,"formTarget",me.formTarget,me,null)):(Ti(M,O,"encType",me.encType,me,null),Ti(M,O,"method",me.method,me,null),Ti(M,O,"target",me.target,me,null)));if(Q==null||typeof Q=="symbol"||typeof Q=="boolean"){M.removeAttribute(V);break}Q=mt(""+Q),M.setAttribute(V,Q);break;case"onClick":Q!=null&&(M.onclick=Pt);break;case"onScroll":Q!=null&&ti("scroll",M);break;case"onScrollEnd":Q!=null&&ti("scrollend",M);break;case"dangerouslySetInnerHTML":if(Q!=null){if(typeof Q!="object"||!("__html"in Q))throw Error(f(61));if(V=Q.__html,V!=null){if(me.children!=null)throw Error(f(60));M.innerHTML=V}}break;case"multiple":M.multiple=Q&&typeof Q!="function"&&typeof Q!="symbol";break;case"muted":M.muted=Q&&typeof Q!="function"&&typeof Q!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(Q==null||typeof Q=="function"||typeof Q=="boolean"||typeof Q=="symbol"){M.removeAttribute("xlink:href");break}V=mt(""+Q),M.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",V);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":Q!=null&&typeof Q!="function"&&typeof Q!="symbol"?M.setAttribute(V,""+Q):M.removeAttribute(V);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":Q&&typeof Q!="function"&&typeof Q!="symbol"?M.setAttribute(V,""):M.removeAttribute(V);break;case"capture":case"download":Q===!0?M.setAttribute(V,""):Q!==!1&&Q!=null&&typeof Q!="function"&&typeof Q!="symbol"?M.setAttribute(V,Q):M.removeAttribute(V);break;case"cols":case"rows":case"size":case"span":Q!=null&&typeof Q!="function"&&typeof Q!="symbol"&&!isNaN(Q)&&1<=Q?M.setAttribute(V,Q):M.removeAttribute(V);break;case"rowSpan":case"start":Q==null||typeof Q=="function"||typeof Q=="symbol"||isNaN(Q)?M.removeAttribute(V):M.setAttribute(V,Q);break;case"popover":ti("beforetoggle",M),ti("toggle",M),An(M,"popover",Q);break;case"xlinkActuate":Tn(M,"http://www.w3.org/1999/xlink","xlink:actuate",Q);break;case"xlinkArcrole":Tn(M,"http://www.w3.org/1999/xlink","xlink:arcrole",Q);break;case"xlinkRole":Tn(M,"http://www.w3.org/1999/xlink","xlink:role",Q);break;case"xlinkShow":Tn(M,"http://www.w3.org/1999/xlink","xlink:show",Q);break;case"xlinkTitle":Tn(M,"http://www.w3.org/1999/xlink","xlink:title",Q);break;case"xlinkType":Tn(M,"http://www.w3.org/1999/xlink","xlink:type",Q);break;case"xmlBase":Tn(M,"http://www.w3.org/XML/1998/namespace","xml:base",Q);break;case"xmlLang":Tn(M,"http://www.w3.org/XML/1998/namespace","xml:lang",Q);break;case"xmlSpace":Tn(M,"http://www.w3.org/XML/1998/namespace","xml:space",Q);break;case"is":An(M,"is",Q);break;case"innerText":case"textContent":break;default:(!(2<V.length)||V[0]!=="o"&&V[0]!=="O"||V[1]!=="n"&&V[1]!=="N")&&(V=Fe.get(V)||V,An(M,V,Q))}}function Of(M,O,V,Q,me,ve){switch(V){case"style":va(M,Q,ve);break;case"dangerouslySetInnerHTML":if(Q!=null){if(typeof Q!="object"||!("__html"in Q))throw Error(f(61));if(V=Q.__html,V!=null){if(me.children!=null)throw Error(f(60));M.innerHTML=V}}break;case"children":typeof Q=="string"?ci(M,Q):(typeof Q=="number"||typeof Q=="bigint")&&ci(M,""+Q);break;case"onScroll":Q!=null&&ti("scroll",M);break;case"onScrollEnd":Q!=null&&ti("scrollend",M);break;case"onClick":Q!=null&&(M.onclick=Pt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!It.hasOwnProperty(V))e:{if(V[0]==="o"&&V[1]==="n"&&(me=V.endsWith("Capture"),O=V.slice(2,me?V.length-7:void 0),ve=M[Xe]||null,ve=ve!=null?ve[V]:null,typeof ve=="function"&&M.removeEventListener(O,ve,me),typeof Q=="function")){typeof ve!="function"&&ve!==null&&(V in M?M[V]=null:M.hasAttribute(V)&&M.removeAttribute(V)),M.addEventListener(O,Q,me);break e}V in M?M[V]=Q:Q===!0?M.setAttribute(V,""):An(M,V,Q)}}}function Ba(M,O,V){switch(O){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ti("error",M),ti("load",M);var Q=!1,me=!1,ve;for(ve in V)if(V.hasOwnProperty(ve)){var Ge=V[ve];if(Ge!=null)switch(ve){case"src":Q=!0;break;case"srcSet":me=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(f(137,O));default:Ti(M,O,ve,Ge,V,null)}}me&&Ti(M,O,"srcSet",V.srcSet,V,null),Q&&Ti(M,O,"src",V.src,V,null);return;case"input":ti("invalid",M);var rt=ve=Ge=me=null,Rt=null,Wt=null;for(Q in V)if(V.hasOwnProperty(Q)){var un=V[Q];if(un!=null)switch(Q){case"name":me=un;break;case"type":Ge=un;break;case"checked":Rt=un;break;case"defaultChecked":Wt=un;break;case"value":ve=un;break;case"defaultValue":rt=un;break;case"children":case"dangerouslySetInnerHTML":if(un!=null)throw Error(f(137,O));break;default:Ti(M,O,Q,un,V,null)}}fi(M,ve,rt,Rt,Wt,Ge,me,!1);return;case"select":ti("invalid",M),Q=Ge=ve=null;for(me in V)if(V.hasOwnProperty(me)&&(rt=V[me],rt!=null))switch(me){case"value":ve=rt;break;case"defaultValue":Ge=rt;break;case"multiple":Q=rt;default:Ti(M,O,me,rt,V,null)}O=ve,V=Ge,M.multiple=!!Q,O!=null?si(M,!!Q,O,!1):V!=null&&si(M,!!Q,V,!0);return;case"textarea":ti("invalid",M),ve=me=Q=null;for(Ge in V)if(V.hasOwnProperty(Ge)&&(rt=V[Ge],rt!=null))switch(Ge){case"value":Q=rt;break;case"defaultValue":me=rt;break;case"children":ve=rt;break;case"dangerouslySetInnerHTML":if(rt!=null)throw Error(f(91));break;default:Ti(M,O,Ge,rt,V,null)}li(M,Q,me,ve);return;case"option":for(Rt in V)V.hasOwnProperty(Rt)&&(Q=V[Rt],Q!=null)&&(Rt==="selected"?M.selected=Q&&typeof Q!="function"&&typeof Q!="symbol":Ti(M,O,Rt,Q,V,null));return;case"dialog":ti("beforetoggle",M),ti("toggle",M),ti("cancel",M),ti("close",M);break;case"iframe":case"object":ti("load",M);break;case"video":case"audio":for(Q=0;Q<Ts.length;Q++)ti(Ts[Q],M);break;case"image":ti("error",M),ti("load",M);break;case"details":ti("toggle",M);break;case"embed":case"source":case"link":ti("error",M),ti("load",M);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Wt in V)if(V.hasOwnProperty(Wt)&&(Q=V[Wt],Q!=null))switch(Wt){case"children":case"dangerouslySetInnerHTML":throw Error(f(137,O));default:Ti(M,O,Wt,Q,V,null)}return;default:if(Ce(O)){for(un in V)V.hasOwnProperty(un)&&(Q=V[un],Q!==void 0&&Of(M,O,un,Q,V,void 0));return}}for(rt in V)V.hasOwnProperty(rt)&&(Q=V[rt],Q!=null&&Ti(M,O,rt,Q,V,null))}function Bp(M,O,V,Q){switch(O){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var me=null,ve=null,Ge=null,rt=null,Rt=null,Wt=null,un=null;for(rn in V){var yn=V[rn];if(V.hasOwnProperty(rn)&&yn!=null)switch(rn){case"checked":break;case"value":break;case"defaultValue":Rt=yn;default:Q.hasOwnProperty(rn)||Ti(M,O,rn,null,Q,yn)}}for(var Jt in Q){var rn=Q[Jt];if(yn=V[Jt],Q.hasOwnProperty(Jt)&&(rn!=null||yn!=null))switch(Jt){case"type":ve=rn;break;case"name":me=rn;break;case"checked":Wt=rn;break;case"defaultChecked":un=rn;break;case"value":Ge=rn;break;case"defaultValue":rt=rn;break;case"children":case"dangerouslySetInnerHTML":if(rn!=null)throw Error(f(137,O));break;default:rn!==yn&&Ti(M,O,Jt,rn,Q,yn)}}Mr(M,Ge,rt,Rt,Wt,un,ve,me);return;case"select":rn=Ge=rt=Jt=null;for(ve in V)if(Rt=V[ve],V.hasOwnProperty(ve)&&Rt!=null)switch(ve){case"value":break;case"multiple":rn=Rt;default:Q.hasOwnProperty(ve)||Ti(M,O,ve,null,Q,Rt)}for(me in Q)if(ve=Q[me],Rt=V[me],Q.hasOwnProperty(me)&&(ve!=null||Rt!=null))switch(me){case"value":Jt=ve;break;case"defaultValue":rt=ve;break;case"multiple":Ge=ve;default:ve!==Rt&&Ti(M,O,me,ve,Q,Rt)}O=rt,V=Ge,Q=rn,Jt!=null?si(M,!!V,Jt,!1):!!Q!=!!V&&(O!=null?si(M,!!V,O,!0):si(M,!!V,V?[]:"",!1));return;case"textarea":rn=Jt=null;for(rt in V)if(me=V[rt],V.hasOwnProperty(rt)&&me!=null&&!Q.hasOwnProperty(rt))switch(rt){case"value":break;case"children":break;default:Ti(M,O,rt,null,Q,me)}for(Ge in Q)if(me=Q[Ge],ve=V[Ge],Q.hasOwnProperty(Ge)&&(me!=null||ve!=null))switch(Ge){case"value":Jt=me;break;case"defaultValue":rn=me;break;case"children":break;case"dangerouslySetInnerHTML":if(me!=null)throw Error(f(91));break;default:me!==ve&&Ti(M,O,Ge,me,Q,ve)}Or(M,Jt,rn);return;case"option":for(var qn in V)Jt=V[qn],V.hasOwnProperty(qn)&&Jt!=null&&!Q.hasOwnProperty(qn)&&(qn==="selected"?M.selected=!1:Ti(M,O,qn,null,Q,Jt));for(Rt in Q)Jt=Q[Rt],rn=V[Rt],Q.hasOwnProperty(Rt)&&Jt!==rn&&(Jt!=null||rn!=null)&&(Rt==="selected"?M.selected=Jt&&typeof Jt!="function"&&typeof Jt!="symbol":Ti(M,O,Rt,Jt,Q,rn));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var vr in V)Jt=V[vr],V.hasOwnProperty(vr)&&Jt!=null&&!Q.hasOwnProperty(vr)&&Ti(M,O,vr,null,Q,Jt);for(Wt in Q)if(Jt=Q[Wt],rn=V[Wt],Q.hasOwnProperty(Wt)&&Jt!==rn&&(Jt!=null||rn!=null))switch(Wt){case"children":case"dangerouslySetInnerHTML":if(Jt!=null)throw Error(f(137,O));break;default:Ti(M,O,Wt,Jt,Q,rn)}return;default:if(Ce(O)){for(var Ci in V)Jt=V[Ci],V.hasOwnProperty(Ci)&&Jt!==void 0&&!Q.hasOwnProperty(Ci)&&Of(M,O,Ci,void 0,Q,Jt);for(un in Q)Jt=Q[un],rn=V[un],!Q.hasOwnProperty(un)||Jt===rn||Jt===void 0&&rn===void 0||Of(M,O,un,Jt,Q,rn);return}}for(var Bt in V)Jt=V[Bt],V.hasOwnProperty(Bt)&&Jt!=null&&!Q.hasOwnProperty(Bt)&&Ti(M,O,Bt,null,Q,Jt);for(yn in Q)Jt=Q[yn],rn=V[yn],!Q.hasOwnProperty(yn)||Jt===rn||Jt==null&&rn==null||Ti(M,O,yn,Jt,Q,rn)}function rp(M){switch(M){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Up(){if(typeof performance.getEntriesByType=="function"){for(var M=0,O=0,V=performance.getEntriesByType("resource"),Q=0;Q<V.length;Q++){var me=V[Q],ve=me.transferSize,Ge=me.initiatorType,rt=me.duration;if(ve&&rt&&rp(Ge)){for(Ge=0,rt=me.responseEnd,Q+=1;Q<V.length;Q++){var Rt=V[Q],Wt=Rt.startTime;if(Wt>rt)break;var un=Rt.transferSize,yn=Rt.initiatorType;un&&rp(yn)&&(Rt=Rt.responseEnd,Ge+=un*(Rt<rt?1:(rt-Wt)/(Rt-Wt)))}if(--Q,O+=8*(ve+Ge)/(me.duration/1e3),M++,10<M)break}}if(0<M)return O/M/1e6}return navigator.connection&&(M=navigator.connection.downlink,typeof M=="number")?M:5}var Df=null,Lf=null;function sf(M){return M.nodeType===9?M:M.ownerDocument}function ip(M){switch(M){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ap(M,O){if(M===0)switch(O){case"svg":return 1;case"math":return 2;default:return 0}return M===1&&O==="foreignObject"?0:M}function Pf(M,O){return M==="textarea"||M==="noscript"||typeof O.children=="string"||typeof O.children=="number"||typeof O.children=="bigint"||typeof O.dangerouslySetInnerHTML=="object"&&O.dangerouslySetInnerHTML!==null&&O.dangerouslySetInnerHTML.__html!=null}var Ff=null;function $p(){var M=window.event;return M&&M.type==="popstate"?M===Ff?!1:(Ff=M,!0):(Ff=null,!1)}var sp=typeof setTimeout=="function"?setTimeout:void 0,zp=typeof clearTimeout=="function"?clearTimeout:void 0,op=typeof Promise=="function"?Promise:void 0,Gp=typeof queueMicrotask=="function"?queueMicrotask:typeof op<"u"?function(M){return op.resolve(null).then(M).catch(jp)}:sp;function jp(M){setTimeout(function(){throw M})}function sc(M){return M==="head"}function lp(M,O){var V=O,Q=0;do{var me=V.nextSibling;if(M.removeChild(V),me&&me.nodeType===8)if(V=me.data,V==="/$"||V==="/&"){if(Q===0){M.removeChild(me),Vu(O);return}Q--}else if(V==="$"||V==="$?"||V==="$~"||V==="$!"||V==="&")Q++;else if(V==="html")Xd(M.ownerDocument.documentElement);else if(V==="head"){V=M.ownerDocument.head,Xd(V);for(var ve=V.firstChild;ve;){var Ge=ve.nextSibling,rt=ve.nodeName;ve[pn]||rt==="SCRIPT"||rt==="STYLE"||rt==="LINK"&&ve.rel.toLowerCase()==="stylesheet"||V.removeChild(ve),ve=Ge}}else V==="body"&&Xd(M.ownerDocument.body);V=me}while(V);Vu(O)}function cp(M,O){var V=M;M=0;do{var Q=V.nextSibling;if(V.nodeType===1?O?(V._stashedDisplay=V.style.display,V.style.display="none"):(V.style.display=V._stashedDisplay||"",V.getAttribute("style")===""&&V.removeAttribute("style")):V.nodeType===3&&(O?(V._stashedText=V.nodeValue,V.nodeValue=""):V.nodeValue=V._stashedText||""),Q&&Q.nodeType===8)if(V=Q.data,V==="/$"){if(M===0)break;M--}else V!=="$"&&V!=="$?"&&V!=="$~"&&V!=="$!"||M++;V=Q}while(V)}function Bf(M){var O=M.firstChild;for(O&&O.nodeType===10&&(O=O.nextSibling);O;){var V=O;switch(O=O.nextSibling,V.nodeName){case"HTML":case"HEAD":case"BODY":Bf(V),mn(V);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(V.rel.toLowerCase()==="stylesheet")continue}M.removeChild(V)}}function Vp(M,O,V,Q){for(;M.nodeType===1;){var me=V;if(M.nodeName.toLowerCase()!==O.toLowerCase()){if(!Q&&(M.nodeName!=="INPUT"||M.type!=="hidden"))break}else if(Q){if(!M[pn])switch(O){case"meta":if(!M.hasAttribute("itemprop"))break;return M;case"link":if(ve=M.getAttribute("rel"),ve==="stylesheet"&&M.hasAttribute("data-precedence"))break;if(ve!==me.rel||M.getAttribute("href")!==(me.href==null||me.href===""?null:me.href)||M.getAttribute("crossorigin")!==(me.crossOrigin==null?null:me.crossOrigin)||M.getAttribute("title")!==(me.title==null?null:me.title))break;return M;case"style":if(M.hasAttribute("data-precedence"))break;return M;case"script":if(ve=M.getAttribute("src"),(ve!==(me.src==null?null:me.src)||M.getAttribute("type")!==(me.type==null?null:me.type)||M.getAttribute("crossorigin")!==(me.crossOrigin==null?null:me.crossOrigin))&&ve&&M.hasAttribute("async")&&!M.hasAttribute("itemprop"))break;return M;default:return M}}else if(O==="input"&&M.type==="hidden"){var ve=me.name==null?null:""+me.name;if(me.type==="hidden"&&M.getAttribute("name")===ve)return M}else return M;if(M=to(M.nextSibling),M===null)break}return null}function Hp(M,O,V){if(O==="")return null;for(;M.nodeType!==3;)if((M.nodeType!==1||M.nodeName!=="INPUT"||M.type!=="hidden")&&!V||(M=to(M.nextSibling),M===null))return null;return M}function up(M,O){for(;M.nodeType!==8;)if((M.nodeType!==1||M.nodeName!=="INPUT"||M.type!=="hidden")&&!O||(M=to(M.nextSibling),M===null))return null;return M}function Uf(M){return M.data==="$?"||M.data==="$~"}function $f(M){return M.data==="$!"||M.data==="$?"&&M.ownerDocument.readyState!=="loading"}function qp(M,O){var V=M.ownerDocument;if(M.data==="$~")M._reactRetry=O;else if(M.data!=="$?"||V.readyState!=="loading")O();else{var Q=function(){O(),V.removeEventListener("DOMContentLoaded",Q)};V.addEventListener("DOMContentLoaded",Q),M._reactRetry=Q}}function to(M){for(;M!=null;M=M.nextSibling){var O=M.nodeType;if(O===1||O===3)break;if(O===8){if(O=M.data,O==="$"||O==="$!"||O==="$?"||O==="$~"||O==="&"||O==="F!"||O==="F")break;if(O==="/$"||O==="/&")return null}}return M}var zf=null;function dp(M){M=M.nextSibling;for(var O=0;M;){if(M.nodeType===8){var V=M.data;if(V==="/$"||V==="/&"){if(O===0)return to(M.nextSibling);O--}else V!=="$"&&V!=="$!"&&V!=="$?"&&V!=="$~"&&V!=="&"||O++}M=M.nextSibling}return null}function hp(M){M=M.previousSibling;for(var O=0;M;){if(M.nodeType===8){var V=M.data;if(V==="$"||V==="$!"||V==="$?"||V==="$~"||V==="&"){if(O===0)return M;O--}else V!=="/$"&&V!=="/&"||O++}M=M.previousSibling}return null}function fp(M,O,V){switch(O=sf(V),M){case"html":if(M=O.documentElement,!M)throw Error(f(452));return M;case"head":if(M=O.head,!M)throw Error(f(453));return M;case"body":if(M=O.body,!M)throw Error(f(454));return M;default:throw Error(f(451))}}function Xd(M){for(var O=M.attributes;O.length;)M.removeAttributeNode(O[0]);mn(M)}var no=new Map,pp=new Set;function of(M){return typeof M.getRootNode=="function"?M.getRootNode():M.nodeType===9?M:M.ownerDocument}var wl=Re.d;Re.d={f:Wp,r:Xp,D:Yp,C:Zp,L:Kp,m:Jp,X:em,S:Qp,M:tm};function Wp(){var M=wl.f(),O=Is();return M||O}function Xp(M){var O=vn(M);O!==null&&O.tag===5&&O.type==="form"?Gh(O):wl.r(M)}var zu=typeof document>"u"?null:document;function mp(M,O,V){var Q=zu;if(Q&&typeof O=="string"&&O){var me=Rn(O);me='link[rel="'+M+'"][href="'+me+'"]',typeof V=="string"&&(me+='[crossorigin="'+V+'"]'),pp.has(me)||(pp.add(me),M={rel:M,crossOrigin:V,href:O},Q.querySelector(me)===null&&(O=Q.createElement("link"),Ba(O,"link",M),Ke(O),Q.head.appendChild(O)))}}function Yp(M){wl.D(M),mp("dns-prefetch",M,null)}function Zp(M,O){wl.C(M,O),mp("preconnect",M,O)}function Kp(M,O,V){wl.L(M,O,V);var Q=zu;if(Q&&M&&O){var me='link[rel="preload"][as="'+Rn(O)+'"]';O==="image"&&V&&V.imageSrcSet?(me+='[imagesrcset="'+Rn(V.imageSrcSet)+'"]',typeof V.imageSizes=="string"&&(me+='[imagesizes="'+Rn(V.imageSizes)+'"]')):me+='[href="'+Rn(M)+'"]';var ve=me;switch(O){case"style":ve=Gu(M);break;case"script":ve=ju(M)}no.has(ve)||(M=I({rel:"preload",href:O==="image"&&V&&V.imageSrcSet?void 0:M,as:O},V),no.set(ve,M),Q.querySelector(me)!==null||O==="style"&&Q.querySelector(Yd(ve))||O==="script"&&Q.querySelector(Zd(ve))||(O=Q.createElement("link"),Ba(O,"link",M),Ke(O),Q.head.appendChild(O)))}}function Jp(M,O){wl.m(M,O);var V=zu;if(V&&M){var Q=O&&typeof O.as=="string"?O.as:"script",me='link[rel="modulepreload"][as="'+Rn(Q)+'"][href="'+Rn(M)+'"]',ve=me;switch(Q){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":ve=ju(M)}if(!no.has(ve)&&(M=I({rel:"modulepreload",href:M},O),no.set(ve,M),V.querySelector(me)===null)){switch(Q){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(V.querySelector(Zd(ve)))return}Q=V.createElement("link"),Ba(Q,"link",M),Ke(Q),V.head.appendChild(Q)}}}function Qp(M,O,V){wl.S(M,O,V);var Q=zu;if(Q&&M){var me=qt(Q).hoistableStyles,ve=Gu(M);O=O||"default";var Ge=me.get(ve);if(!Ge){var rt={loading:0,preload:null};if(Ge=Q.querySelector(Yd(ve)))rt.loading=5;else{M=I({rel:"stylesheet",href:M,"data-precedence":O},V),(V=no.get(ve))&&Gf(M,V);var Rt=Ge=Q.createElement("link");Ke(Rt),Ba(Rt,"link",M),Rt._p=new Promise(function(Wt,un){Rt.onload=Wt,Rt.onerror=un}),Rt.addEventListener("load",function(){rt.loading|=1}),Rt.addEventListener("error",function(){rt.loading|=2}),rt.loading|=4,lf(Ge,O,Q)}Ge={type:"stylesheet",instance:Ge,count:1,state:rt},me.set(ve,Ge)}}}function em(M,O){wl.X(M,O);var V=zu;if(V&&M){var Q=qt(V).hoistableScripts,me=ju(M),ve=Q.get(me);ve||(ve=V.querySelector(Zd(me)),ve||(M=I({src:M,async:!0},O),(O=no.get(me))&&jf(M,O),ve=V.createElement("script"),Ke(ve),Ba(ve,"link",M),V.head.appendChild(ve)),ve={type:"script",instance:ve,count:1,state:null},Q.set(me,ve))}}function tm(M,O){wl.M(M,O);var V=zu;if(V&&M){var Q=qt(V).hoistableScripts,me=ju(M),ve=Q.get(me);ve||(ve=V.querySelector(Zd(me)),ve||(M=I({src:M,async:!0,type:"module"},O),(O=no.get(me))&&jf(M,O),ve=V.createElement("script"),Ke(ve),Ba(ve,"link",M),V.head.appendChild(ve)),ve={type:"script",instance:ve,count:1,state:null},Q.set(me,ve))}}function gp(M,O,V,Q){var me=(me=ce.current)?of(me):null;if(!me)throw Error(f(446));switch(M){case"meta":case"title":return null;case"style":return typeof V.precedence=="string"&&typeof V.href=="string"?(O=Gu(V.href),V=qt(me).hoistableStyles,Q=V.get(O),Q||(Q={type:"style",instance:null,count:0,state:null},V.set(O,Q)),Q):{type:"void",instance:null,count:0,state:null};case"link":if(V.rel==="stylesheet"&&typeof V.href=="string"&&typeof V.precedence=="string"){M=Gu(V.href);var ve=qt(me).hoistableStyles,Ge=ve.get(M);if(Ge||(me=me.ownerDocument||me,Ge={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},ve.set(M,Ge),(ve=me.querySelector(Yd(M)))&&!ve._p&&(Ge.instance=ve,Ge.state.loading=5),no.has(M)||(V={rel:"preload",as:"style",href:V.href,crossOrigin:V.crossOrigin,integrity:V.integrity,media:V.media,hrefLang:V.hrefLang,referrerPolicy:V.referrerPolicy},no.set(M,V),ve||nm(me,M,V,Ge.state))),O&&Q===null)throw Error(f(528,""));return Ge}if(O&&Q!==null)throw Error(f(529,""));return null;case"script":return O=V.async,V=V.src,typeof V=="string"&&O&&typeof O!="function"&&typeof O!="symbol"?(O=ju(V),V=qt(me).hoistableScripts,Q=V.get(O),Q||(Q={type:"script",instance:null,count:0,state:null},V.set(O,Q)),Q):{type:"void",instance:null,count:0,state:null};default:throw Error(f(444,M))}}function Gu(M){return'href="'+Rn(M)+'"'}function Yd(M){return'link[rel="stylesheet"]['+M+"]"}function yp(M){return I({},M,{"data-precedence":M.precedence,precedence:null})}function nm(M,O,V,Q){M.querySelector('link[rel="preload"][as="style"]['+O+"]")?Q.loading=1:(O=M.createElement("link"),Q.preload=O,O.addEventListener("load",function(){return Q.loading|=1}),O.addEventListener("error",function(){return Q.loading|=2}),Ba(O,"link",V),Ke(O),M.head.appendChild(O))}function ju(M){return'[src="'+Rn(M)+'"]'}function Zd(M){return"script[async]"+M}function vp(M,O,V){if(O.count++,O.instance===null)switch(O.type){case"style":var Q=M.querySelector('style[data-href~="'+Rn(V.href)+'"]');if(Q)return O.instance=Q,Ke(Q),Q;var me=I({},V,{"data-href":V.href,"data-precedence":V.precedence,href:null,precedence:null});return Q=(M.ownerDocument||M).createElement("style"),Ke(Q),Ba(Q,"style",me),lf(Q,V.precedence,M),O.instance=Q;case"stylesheet":me=Gu(V.href);var ve=M.querySelector(Yd(me));if(ve)return O.state.loading|=4,O.instance=ve,Ke(ve),ve;Q=yp(V),(me=no.get(me))&&Gf(Q,me),ve=(M.ownerDocument||M).createElement("link"),Ke(ve);var Ge=ve;return Ge._p=new Promise(function(rt,Rt){Ge.onload=rt,Ge.onerror=Rt}),Ba(ve,"link",Q),O.state.loading|=4,lf(ve,V.precedence,M),O.instance=ve;case"script":return ve=ju(V.src),(me=M.querySelector(Zd(ve)))?(O.instance=me,Ke(me),me):(Q=V,(me=no.get(ve))&&(Q=I({},V),jf(Q,me)),M=M.ownerDocument||M,me=M.createElement("script"),Ke(me),Ba(me,"link",Q),M.head.appendChild(me),O.instance=me);case"void":return null;default:throw Error(f(443,O.type))}else O.type==="stylesheet"&&(O.state.loading&4)===0&&(Q=O.instance,O.state.loading|=4,lf(Q,V.precedence,M));return O.instance}function lf(M,O,V){for(var Q=V.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),me=Q.length?Q[Q.length-1]:null,ve=me,Ge=0;Ge<Q.length;Ge++){var rt=Q[Ge];if(rt.dataset.precedence===O)ve=rt;else if(ve!==me)break}ve?ve.parentNode.insertBefore(M,ve.nextSibling):(O=V.nodeType===9?V.head:V,O.insertBefore(M,O.firstChild))}function Gf(M,O){M.crossOrigin==null&&(M.crossOrigin=O.crossOrigin),M.referrerPolicy==null&&(M.referrerPolicy=O.referrerPolicy),M.title==null&&(M.title=O.title)}function jf(M,O){M.crossOrigin==null&&(M.crossOrigin=O.crossOrigin),M.referrerPolicy==null&&(M.referrerPolicy=O.referrerPolicy),M.integrity==null&&(M.integrity=O.integrity)}var cf=null;function bp(M,O,V){if(cf===null){var Q=new Map,me=cf=new Map;me.set(V,Q)}else me=cf,Q=me.get(V),Q||(Q=new Map,me.set(V,Q));if(Q.has(M))return Q;for(Q.set(M,null),V=V.getElementsByTagName(M),me=0;me<V.length;me++){var ve=V[me];if(!(ve[pn]||ve[Hr]||M==="link"&&ve.getAttribute("rel")==="stylesheet")&&ve.namespaceURI!=="http://www.w3.org/2000/svg"){var Ge=ve.getAttribute(O)||"";Ge=M+Ge;var rt=Q.get(Ge);rt?rt.push(ve):Q.set(Ge,[ve])}}return Q}function _p(M,O,V){M=M.ownerDocument||M,M.head.insertBefore(V,O==="title"?M.querySelector("head > title"):null)}function rm(M,O,V){if(V===1||O.itemProp!=null)return!1;switch(M){case"meta":case"title":return!0;case"style":if(typeof O.precedence!="string"||typeof O.href!="string"||O.href==="")break;return!0;case"link":if(typeof O.rel!="string"||typeof O.href!="string"||O.href===""||O.onLoad||O.onError)break;return O.rel==="stylesheet"?(M=O.disabled,typeof O.precedence=="string"&&M==null):!0;case"script":if(O.async&&typeof O.async!="function"&&typeof O.async!="symbol"&&!O.onLoad&&!O.onError&&O.src&&typeof O.src=="string")return!0}return!1}function Sp(M){return!(M.type==="stylesheet"&&(M.state.loading&3)===0)}function im(M,O,V,Q){if(V.type==="stylesheet"&&(typeof Q.media!="string"||matchMedia(Q.media).matches!==!1)&&(V.state.loading&4)===0){if(V.instance===null){var me=Gu(Q.href),ve=O.querySelector(Yd(me));if(ve){O=ve._p,O!==null&&typeof O=="object"&&typeof O.then=="function"&&(M.count++,M=uf.bind(M),O.then(M,M)),V.state.loading|=4,V.instance=ve,Ke(ve);return}ve=O.ownerDocument||O,Q=yp(Q),(me=no.get(me))&&Gf(Q,me),ve=ve.createElement("link"),Ke(ve);var Ge=ve;Ge._p=new Promise(function(rt,Rt){Ge.onload=rt,Ge.onerror=Rt}),Ba(ve,"link",Q),V.instance=ve}M.stylesheets===null&&(M.stylesheets=new Map),M.stylesheets.set(V,O),(O=V.state.preload)&&(V.state.loading&3)===0&&(M.count++,V=uf.bind(M),O.addEventListener("load",V),O.addEventListener("error",V))}}var Vf=0;function am(M,O){return M.stylesheets&&M.count===0&&hf(M,M.stylesheets),0<M.count||0<M.imgCount?function(V){var Q=setTimeout(function(){if(M.stylesheets&&hf(M,M.stylesheets),M.unsuspend){var ve=M.unsuspend;M.unsuspend=null,ve()}},6e4+O);0<M.imgBytes&&Vf===0&&(Vf=62500*Up());var me=setTimeout(function(){if(M.waitingForImages=!1,M.count===0&&(M.stylesheets&&hf(M,M.stylesheets),M.unsuspend)){var ve=M.unsuspend;M.unsuspend=null,ve()}},(M.imgBytes>Vf?50:800)+O);return M.unsuspend=V,function(){M.unsuspend=null,clearTimeout(Q),clearTimeout(me)}}:null}function uf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)hf(this,this.stylesheets);else if(this.unsuspend){var M=this.unsuspend;this.unsuspend=null,M()}}}var df=null;function hf(M,O){M.stylesheets=null,M.unsuspend!==null&&(M.count++,df=new Map,O.forEach(sm,M),df=null,uf.call(M))}function sm(M,O){if(!(O.state.loading&4)){var V=df.get(M);if(V)var Q=V.get(null);else{V=new Map,df.set(M,V);for(var me=M.querySelectorAll("link[data-precedence],style[data-precedence]"),ve=0;ve<me.length;ve++){var Ge=me[ve];(Ge.nodeName==="LINK"||Ge.getAttribute("media")!=="not all")&&(V.set(Ge.dataset.precedence,Ge),Q=Ge)}Q&&V.set(null,Q)}me=O.instance,Ge=me.getAttribute("data-precedence"),ve=V.get(Ge)||Q,ve===Q&&V.set(null,me),V.set(Ge,me),this.count++,Q=uf.bind(this),me.addEventListener("load",Q),me.addEventListener("error",Q),ve?ve.parentNode.insertBefore(me,ve.nextSibling):(M=M.nodeType===9?M.head:M,M.insertBefore(me,M.firstChild)),O.state.loading|=4}}var Kd={$$typeof:Y,Provider:null,Consumer:null,_currentValue:Te,_currentValue2:Te,_threadCount:0};function om(M,O,V,Q,me,ve,Ge,rt,Rt){this.tag=1,this.containerInfo=M,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=On(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=On(0),this.hiddenUpdates=On(null),this.identifierPrefix=Q,this.onUncaughtError=me,this.onCaughtError=ve,this.onRecoverableError=Ge,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Rt,this.incompleteTransitions=new Map}function xp(M,O,V,Q,me,ve,Ge,rt,Rt,Wt,un,yn){return M=new om(M,O,V,Ge,Rt,Wt,un,yn,rt),O=1,ve===!0&&(O|=24),ve=Li(3,null,null,O),M.current=ve,ve.stateNode=M,O=Ju(),O.refCount++,M.pooledCache=O,O.refCount++,ve.memoizedState={element:Q,isDehydrated:V,cache:O},Mc(ve),M}function Ep(M){return M?(M=ko,M):ko}function Ap(M,O,V,Q,me,ve){me=Ep(me),Q.context===null?Q.context=me:Q.pendingContext=me,Q=yo(O),Q.payload={element:V},ve=ve===void 0?null:ve,ve!==null&&(Q.callback=ve),V=Bo(M,Q,O),V!==null&&(Ur(V,M,O),Uo(V,M,O))}function wp(M,O){if(M=M.memoizedState,M!==null&&M.dehydrated!==null){var V=M.retryLane;M.retryLane=V!==0&&V<O?V:O}}function Hf(M,O){wp(M,O),(M=M.alternate)&&wp(M,O)}function Tp(M){if(M.tag===13||M.tag===31){var O=Ia(M,67108864);O!==null&&Ur(O,M,67108864),Hf(M,67108864)}}function Cp(M){if(M.tag===13||M.tag===31){var O=ls();O=wr(O);var V=Ia(M,O);V!==null&&Ur(V,M,O),Hf(M,O)}}var ff=!0;function lm(M,O,V,Q){var me=Me.T;Me.T=null;var ve=Re.p;try{Re.p=2,qf(M,O,V,Q)}finally{Re.p=ve,Me.T=me}}function cm(M,O,V,Q){var me=Me.T;Me.T=null;var ve=Re.p;try{Re.p=8,qf(M,O,V,Q)}finally{Re.p=ve,Me.T=me}}function qf(M,O,V,Q){if(ff){var me=Wf(Q);if(me===null)Nf(M,O,Q,pf,V),Mp(M,Q);else if(dm(me,M,O,V,Q))Q.stopPropagation();else if(Mp(M,Q),O&4&&-1<um.indexOf(M)){for(;me!==null;){var ve=vn(me);if(ve!==null)switch(ve.tag){case 3:if(ve=ve.stateNode,ve.current.memoizedState.isDehydrated){var Ge=Ht(ve.pendingLanes);if(Ge!==0){var rt=ve;for(rt.pendingLanes|=2,rt.entangledLanes|=2;Ge;){var Rt=1<<31-nt(Ge);rt.entanglements[1]|=Rt,Ge&=~Rt}Cn(ve),(Jn&6)===0&&(Zi=Le()+500,jn(0))}}break;case 31:case 13:rt=Ia(ve,2),rt!==null&&Ur(rt,ve,2),Is(),Hf(ve,2)}if(ve=Wf(Q),ve===null&&Nf(M,O,Q,pf,V),ve===me)break;me=ve}me!==null&&Q.stopPropagation()}else Nf(M,O,Q,null,V)}}function Wf(M){return M=zt(M),Xf(M)}var pf=null;function Xf(M){if(pf=null,M=bn(M),M!==null){var O=S(M);if(O===null)M=null;else{var V=O.tag;if(V===13){if(M=A(O),M!==null)return M;M=null}else if(V===31){if(M=w(O),M!==null)return M;M=null}else if(V===3){if(O.stateNode.current.memoizedState.isDehydrated)return O.tag===3?O.stateNode.containerInfo:null;M=null}else O!==M&&(M=null)}}return pf=M,null}function Rp(M){switch(M){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(lt()){case We:return 2;case Qe:return 8;case at:case St:return 32;case Ct:return 268435456;default:return 32}default:return 32}}var Yf=!1,oc=null,lc=null,cc=null,Jd=new Map,Qd=new Map,uc=[],um="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Mp(M,O){switch(M){case"focusin":case"focusout":oc=null;break;case"dragenter":case"dragleave":lc=null;break;case"mouseover":case"mouseout":cc=null;break;case"pointerover":case"pointerout":Jd.delete(O.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qd.delete(O.pointerId)}}function eh(M,O,V,Q,me,ve){return M===null||M.nativeEvent!==ve?(M={blockedOn:O,domEventName:V,eventSystemFlags:Q,nativeEvent:ve,targetContainers:[me]},O!==null&&(O=vn(O),O!==null&&Tp(O)),M):(M.eventSystemFlags|=Q,O=M.targetContainers,me!==null&&O.indexOf(me)===-1&&O.push(me),M)}function dm(M,O,V,Q,me){switch(O){case"focusin":return oc=eh(oc,M,O,V,Q,me),!0;case"dragenter":return lc=eh(lc,M,O,V,Q,me),!0;case"mouseover":return cc=eh(cc,M,O,V,Q,me),!0;case"pointerover":var ve=me.pointerId;return Jd.set(ve,eh(Jd.get(ve)||null,M,O,V,Q,me)),!0;case"gotpointercapture":return ve=me.pointerId,Qd.set(ve,eh(Qd.get(ve)||null,M,O,V,Q,me)),!0}return!1}function kp(M){var O=bn(M.target);if(O!==null){var V=S(O);if(V!==null){if(O=V.tag,O===13){if(O=A(V),O!==null){M.blockedOn=O,zn(M.priority,function(){Cp(V)});return}}else if(O===31){if(O=w(V),O!==null){M.blockedOn=O,zn(M.priority,function(){Cp(V)});return}}else if(O===3&&V.stateNode.current.memoizedState.isDehydrated){M.blockedOn=V.tag===3?V.stateNode.containerInfo:null;return}}}M.blockedOn=null}function mf(M){if(M.blockedOn!==null)return!1;for(var O=M.targetContainers;0<O.length;){var V=Wf(M.nativeEvent);if(V===null){V=M.nativeEvent;var Q=new V.constructor(V.type,V);an=Q,V.target.dispatchEvent(Q),an=null}else return O=vn(V),O!==null&&Tp(O),M.blockedOn=V,!1;O.shift()}return!0}function Ip(M,O,V){mf(M)&&V.delete(O)}function hm(){Yf=!1,oc!==null&&mf(oc)&&(oc=null),lc!==null&&mf(lc)&&(lc=null),cc!==null&&mf(cc)&&(cc=null),Jd.forEach(Ip),Qd.forEach(Ip)}function gf(M,O){M.blockedOn===O&&(M.blockedOn=null,Yf||(Yf=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,hm)))}var yf=null;function Np(M){yf!==M&&(yf=M,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){yf===M&&(yf=null);for(var O=0;O<M.length;O+=3){var V=M[O],Q=M[O+1],me=M[O+2];if(typeof Q!="function"){if(Xf(Q||V)===null)continue;break}var ve=vn(V);ve!==null&&(M.splice(O,3),O-=3,Rd(ve,{pending:!0,data:me,method:V.method,action:Q},Q,me))}}))}function Vu(M){function O(Rt){return gf(Rt,M)}oc!==null&&gf(oc,M),lc!==null&&gf(lc,M),cc!==null&&gf(cc,M),Jd.forEach(O),Qd.forEach(O);for(var V=0;V<uc.length;V++){var Q=uc[V];Q.blockedOn===M&&(Q.blockedOn=null)}for(;0<uc.length&&(V=uc[0],V.blockedOn===null);)kp(V),V.blockedOn===null&&uc.shift();if(V=(M.ownerDocument||M).$$reactFormReplay,V!=null)for(Q=0;Q<V.length;Q+=3){var me=V[Q],ve=V[Q+1],Ge=me[Xe]||null;if(typeof ve=="function")Ge||Np(V);else if(Ge){var rt=null;if(ve&&ve.hasAttribute("formAction")){if(me=ve,Ge=ve[Xe]||null)rt=Ge.formAction;else if(Xf(me)!==null)continue}else rt=Ge.action;typeof rt=="function"?V[Q+1]=rt:(V.splice(Q,3),Q-=3),Np(V)}}}function Op(){function M(ve){ve.canIntercept&&ve.info==="react-transition"&&ve.intercept({handler:function(){return new Promise(function(Ge){return me=Ge})},focusReset:"manual",scroll:"manual"})}function O(){me!==null&&(me(),me=null),Q||setTimeout(V,20)}function V(){if(!Q&&!navigation.transition){var ve=navigation.currentEntry;ve&&ve.url!=null&&navigation.navigate(ve.url,{state:ve.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var Q=!1,me=null;return navigation.addEventListener("navigate",M),navigation.addEventListener("navigatesuccess",O),navigation.addEventListener("navigateerror",O),setTimeout(V,100),function(){Q=!0,navigation.removeEventListener("navigate",M),navigation.removeEventListener("navigatesuccess",O),navigation.removeEventListener("navigateerror",O),me!==null&&(me(),me=null)}}}function Zf(M){this._internalRoot=M}vf.prototype.render=Zf.prototype.render=function(M){var O=this._internalRoot;if(O===null)throw Error(f(409));var V=O.current,Q=ls();Ap(V,Q,M,O,null,null)},vf.prototype.unmount=Zf.prototype.unmount=function(){var M=this._internalRoot;if(M!==null){this._internalRoot=null;var O=M.containerInfo;Ap(M.current,2,null,M,null,null),Is(),O[it]=null}};function vf(M){this._internalRoot=M}vf.prototype.unstable_scheduleHydration=function(M){if(M){var O=ir();M={blockedOn:null,target:M,priority:O};for(var V=0;V<uc.length&&O!==0&&O<uc[V].priority;V++);uc.splice(V,0,M),V===0&&kp(M)}};var Dp=n.version;if(Dp!=="19.2.4")throw Error(f(527,Dp,"19.2.4"));Re.findDOMNode=function(M){var O=M._reactInternals;if(O===void 0)throw typeof M.render=="function"?Error(f(188)):(M=Object.keys(M).join(","),Error(f(268,M)));return M=T(O),M=M!==null?R(M):null,M=M===null?null:M.stateNode,M};var fm={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:Me,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bf.isDisabled&&bf.supportsFiber)try{Ft=bf.inject(fm),ct=bf}catch{}}return reactDomClient_production.createRoot=function(M,O){if(!y(M))throw Error(f(299));var V=!1,Q="",me=Yh,ve=Dd,Ge=Ld;return O!=null&&(O.unstable_strictMode===!0&&(V=!0),O.identifierPrefix!==void 0&&(Q=O.identifierPrefix),O.onUncaughtError!==void 0&&(me=O.onUncaughtError),O.onCaughtError!==void 0&&(ve=O.onCaughtError),O.onRecoverableError!==void 0&&(Ge=O.onRecoverableError)),O=xp(M,1,!1,null,null,V,Q,null,me,ve,Ge,Op),M[it]=O.current,If(M),new Zf(O)},reactDomClient_production.hydrateRoot=function(M,O,V){if(!y(M))throw Error(f(299));var Q=!1,me="",ve=Yh,Ge=Dd,rt=Ld,Rt=null;return V!=null&&(V.unstable_strictMode===!0&&(Q=!0),V.identifierPrefix!==void 0&&(me=V.identifierPrefix),V.onUncaughtError!==void 0&&(ve=V.onUncaughtError),V.onCaughtError!==void 0&&(Ge=V.onCaughtError),V.onRecoverableError!==void 0&&(rt=V.onRecoverableError),V.formState!==void 0&&(Rt=V.formState)),O=xp(M,1,!0,O,V??null,Q,me,Rt,ve,Ge,rt,Op),O.context=Ep(null),V=O.current,Q=ls(),Q=wr(Q),me=yo(Q),me.callback=null,Bo(V,me,Q),V=Q,O.current.lanes=V,rr(O,V),Cn(O),M[it]=O.current,If(M),new vf(O)},reactDomClient_production.version="19.2.4",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client.exports;hasRequiredClient=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(n){console.error(n)}}return s(),client.exports=requireReactDomClient_production(),client.exports}var clientExports=requireClient();const VideoFeed=reactExports.forwardRef(({onVideoReady:s},n)=>{const u=reactExports.useRef(null);return reactExports.useEffect(()=>{const f=n?.current||u.current;if(!f)return;(async()=>{try{const S=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280},height:{ideal:720},facingMode:"user"}});f.srcObject=S,f.onloadedmetadata=()=>{f.play(),s?.(f)}}catch(S){console.error("Error accessing webcam:",S)}})()},[s,n]),jsxRuntimeExports.jsx("video",{ref:n||u,className:"fixed top-0 left-0 w-full h-full object-cover -z-10 opacity-0 pointer-events-none",style:{transform:"scaleX(-1)"},playsInline:!0,muted:!0,autoPlay:!0})});VideoFeed.displayName="VideoFeed";var hands={},hasRequiredHands;function requireHands(){return hasRequiredHands||(hasRequiredHands=1,(function(){var s;function n(pe){var Oe=0;return function(){return Oe<pe.length?{done:!1,value:pe[Oe++]}:{done:!0}}}var u=typeof Object.defineProperties=="function"?Object.defineProperty:function(pe,Oe,Ue){return pe==Array.prototype||pe==Object.prototype||(pe[Oe]=Ue.value),pe};function f(pe){pe=[typeof globalThis=="object"&&globalThis,pe,typeof window=="object"&&window,typeof self=="object"&&self,typeof commonjsGlobal=="object"&&commonjsGlobal];for(var Oe=0;Oe<pe.length;++Oe){var Ue=pe[Oe];if(Ue&&Ue.Math==Math)return Ue}throw Error("Cannot find global object")}var y=f(this);function S(pe,Oe){if(Oe)e:{var Ue=y;pe=pe.split(".");for(var Ze=0;Ze<pe.length-1;Ze++){var ft=pe[Ze];if(!(ft in Ue))break e;Ue=Ue[ft]}pe=pe[pe.length-1],Ze=Ue[pe],Oe=Oe(Ze),Oe!=Ze&&Oe!=null&&u(Ue,pe,{configurable:!0,writable:!0,value:Oe})}}S("Symbol",function(pe){function Oe(bt){if(this instanceof Oe)throw new TypeError("Symbol is not a constructor");return new Ue(Ze+(bt||"")+"_"+ft++,bt)}function Ue(bt,gt){this.h=bt,u(this,"description",{configurable:!0,writable:!0,value:gt})}if(pe)return pe;Ue.prototype.toString=function(){return this.h};var Ze="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",ft=0;return Oe}),S("Symbol.iterator",function(pe){if(pe)return pe;pe=Symbol("Symbol.iterator");for(var Oe="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),Ue=0;Ue<Oe.length;Ue++){var Ze=y[Oe[Ue]];typeof Ze=="function"&&typeof Ze.prototype[pe]!="function"&&u(Ze.prototype,pe,{configurable:!0,writable:!0,value:function(){return A(n(this))}})}return pe});function A(pe){return pe={next:pe},pe[Symbol.iterator]=function(){return this},pe}function w(pe){var Oe=typeof Symbol<"u"&&Symbol.iterator&&pe[Symbol.iterator];return Oe?Oe.call(pe):{next:n(pe)}}function C(pe){if(!(pe instanceof Array)){pe=w(pe);for(var Oe,Ue=[];!(Oe=pe.next()).done;)Ue.push(Oe.value);pe=Ue}return pe}var T=typeof Object.assign=="function"?Object.assign:function(pe,Oe){for(var Ue=1;Ue<arguments.length;Ue++){var Ze=arguments[Ue];if(Ze)for(var ft in Ze)Object.prototype.hasOwnProperty.call(Ze,ft)&&(pe[ft]=Ze[ft])}return pe};S("Object.assign",function(pe){return pe||T});var R=typeof Object.create=="function"?Object.create:function(pe){function Oe(){}return Oe.prototype=pe,new Oe},I;if(typeof Object.setPrototypeOf=="function")I=Object.setPrototypeOf;else{var N;e:{var L={a:!0},F={};try{F.__proto__=L,N=F.a;break e}catch{}N=!1}I=N?function(pe,Oe){if(pe.__proto__=Oe,pe.__proto__!==Oe)throw new TypeError(pe+" is not extensible");return pe}:null}var H=I;function z(pe,Oe){if(pe.prototype=R(Oe.prototype),pe.prototype.constructor=pe,H)H(pe,Oe);else for(var Ue in Oe)if(Ue!="prototype")if(Object.defineProperties){var Ze=Object.getOwnPropertyDescriptor(Oe,Ue);Ze&&Object.defineProperty(pe,Ue,Ze)}else pe[Ue]=Oe[Ue];pe.ya=Oe.prototype}function U(){this.m=!1,this.j=null,this.i=void 0,this.h=1,this.v=this.s=0,this.l=null}function G(pe){if(pe.m)throw new TypeError("Generator is already running");pe.m=!0}U.prototype.u=function(pe){this.i=pe};function Y(pe,Oe){pe.l={ma:Oe,na:!0},pe.h=pe.s||pe.v}U.prototype.return=function(pe){this.l={return:pe},this.h=this.v};function K(pe,Oe,Ue){return pe.h=Ue,{value:Oe}}function Z(pe){this.h=new U,this.i=pe}function J(pe,Oe){G(pe.h);var Ue=pe.h.j;return Ue?te(pe,"return"in Ue?Ue.return:function(Ze){return{value:Ze,done:!0}},Oe,pe.h.return):(pe.h.return(Oe),de(pe))}function te(pe,Oe,Ue,Ze){try{var ft=Oe.call(pe.h.j,Ue);if(!(ft instanceof Object))throw new TypeError("Iterator result "+ft+" is not an object");if(!ft.done)return pe.h.m=!1,ft;var bt=ft.value}catch(gt){return pe.h.j=null,Y(pe.h,gt),de(pe)}return pe.h.j=null,Ze.call(pe.h,bt),de(pe)}function de(pe){for(;pe.h.h;)try{var Oe=pe.i(pe.h);if(Oe)return pe.h.m=!1,{value:Oe.value,done:!1}}catch(Ue){pe.h.i=void 0,Y(pe.h,Ue)}if(pe.h.m=!1,pe.h.l){if(Oe=pe.h.l,pe.h.l=null,Oe.na)throw Oe.ma;return{value:Oe.return,done:!0}}return{value:void 0,done:!0}}function se(pe){this.next=function(Oe){return G(pe.h),pe.h.j?Oe=te(pe,pe.h.j.next,Oe,pe.h.u):(pe.h.u(Oe),Oe=de(pe)),Oe},this.throw=function(Oe){return G(pe.h),pe.h.j?Oe=te(pe,pe.h.j.throw,Oe,pe.h.u):(Y(pe.h,Oe),Oe=de(pe)),Oe},this.return=function(Oe){return J(pe,Oe)},this[Symbol.iterator]=function(){return this}}function ne(pe){function Oe(Ze){return pe.next(Ze)}function Ue(Ze){return pe.throw(Ze)}return new Promise(function(Ze,ft){function bt(gt){gt.done?Ze(gt.value):Promise.resolve(gt.value).then(Oe,Ue).then(bt,ft)}bt(pe.next())})}function ge(pe){return ne(new se(new Z(pe)))}S("Promise",function(pe){function Oe(gt){this.i=0,this.j=void 0,this.h=[],this.u=!1;var Dt=this.l();try{gt(Dt.resolve,Dt.reject)}catch(Zt){Dt.reject(Zt)}}function Ue(){this.h=null}function Ze(gt){return gt instanceof Oe?gt:new Oe(function(Dt){Dt(gt)})}if(pe)return pe;Ue.prototype.i=function(gt){if(this.h==null){this.h=[];var Dt=this;this.j(function(){Dt.m()})}this.h.push(gt)};var ft=y.setTimeout;Ue.prototype.j=function(gt){ft(gt,0)},Ue.prototype.m=function(){for(;this.h&&this.h.length;){var gt=this.h;this.h=[];for(var Dt=0;Dt<gt.length;++Dt){var Zt=gt[Dt];gt[Dt]=null;try{Zt()}catch(En){this.l(En)}}}this.h=null},Ue.prototype.l=function(gt){this.j(function(){throw gt})},Oe.prototype.l=function(){function gt(En){return function(Ln){Zt||(Zt=!0,En.call(Dt,Ln))}}var Dt=this,Zt=!1;return{resolve:gt(this.I),reject:gt(this.m)}},Oe.prototype.I=function(gt){if(gt===this)this.m(new TypeError("A Promise cannot resolve to itself"));else if(gt instanceof Oe)this.L(gt);else{e:switch(typeof gt){case"object":var Dt=gt!=null;break e;case"function":Dt=!0;break e;default:Dt=!1}Dt?this.F(gt):this.s(gt)}},Oe.prototype.F=function(gt){var Dt=void 0;try{Dt=gt.then}catch(Zt){this.m(Zt);return}typeof Dt=="function"?this.M(Dt,gt):this.s(gt)},Oe.prototype.m=function(gt){this.v(2,gt)},Oe.prototype.s=function(gt){this.v(1,gt)},Oe.prototype.v=function(gt,Dt){if(this.i!=0)throw Error("Cannot settle("+gt+", "+Dt+"): Promise already settled in state"+this.i);this.i=gt,this.j=Dt,this.i===2&&this.K(),this.H()},Oe.prototype.K=function(){var gt=this;ft(function(){if(gt.D()){var Dt=y.console;typeof Dt<"u"&&Dt.error(gt.j)}},1)},Oe.prototype.D=function(){if(this.u)return!1;var gt=y.CustomEvent,Dt=y.Event,Zt=y.dispatchEvent;return typeof Zt>"u"?!0:(typeof gt=="function"?gt=new gt("unhandledrejection",{cancelable:!0}):typeof Dt=="function"?gt=new Dt("unhandledrejection",{cancelable:!0}):(gt=y.document.createEvent("CustomEvent"),gt.initCustomEvent("unhandledrejection",!1,!0,gt)),gt.promise=this,gt.reason=this.j,Zt(gt))},Oe.prototype.H=function(){if(this.h!=null){for(var gt=0;gt<this.h.length;++gt)bt.i(this.h[gt]);this.h=null}};var bt=new Ue;return Oe.prototype.L=function(gt){var Dt=this.l();gt.T(Dt.resolve,Dt.reject)},Oe.prototype.M=function(gt,Dt){var Zt=this.l();try{gt.call(Dt,Zt.resolve,Zt.reject)}catch(En){Zt.reject(En)}},Oe.prototype.then=function(gt,Dt){function Zt(Yn,$n){return typeof Yn=="function"?function(cr){try{En(Yn(cr))}catch(Cr){Ln(Cr)}}:$n}var En,Ln,er=new Oe(function(Yn,$n){En=Yn,Ln=$n});return this.T(Zt(gt,En),Zt(Dt,Ln)),er},Oe.prototype.catch=function(gt){return this.then(void 0,gt)},Oe.prototype.T=function(gt,Dt){function Zt(){switch(En.i){case 1:gt(En.j);break;case 2:Dt(En.j);break;default:throw Error("Unexpected state: "+En.i)}}var En=this;this.h==null?bt.i(Zt):this.h.push(Zt),this.u=!0},Oe.resolve=Ze,Oe.reject=function(gt){return new Oe(function(Dt,Zt){Zt(gt)})},Oe.race=function(gt){return new Oe(function(Dt,Zt){for(var En=w(gt),Ln=En.next();!Ln.done;Ln=En.next())Ze(Ln.value).T(Dt,Zt)})},Oe.all=function(gt){var Dt=w(gt),Zt=Dt.next();return Zt.done?Ze([]):new Oe(function(En,Ln){function er(cr){return function(Cr){Yn[cr]=Cr,$n--,$n==0&&En(Yn)}}var Yn=[],$n=0;do Yn.push(void 0),$n++,Ze(Zt.value).T(er(Yn.length-1),Ln),Zt=Dt.next();while(!Zt.done)})},Oe});function Ee(pe,Oe){pe instanceof String&&(pe+="");var Ue=0,Ze=!1,ft={next:function(){if(!Ze&&Ue<pe.length){var bt=Ue++;return{value:Oe(bt,pe[bt]),done:!1}}return Ze=!0,{done:!0,value:void 0}}};return ft[Symbol.iterator]=function(){return ft},ft}S("Array.prototype.keys",function(pe){return pe||function(){return Ee(this,function(Oe){return Oe})}}),S("Array.prototype.fill",function(pe){return pe||function(Oe,Ue,Ze){var ft=this.length||0;for(0>Ue&&(Ue=Math.max(0,ft+Ue)),(Ze==null||Ze>ft)&&(Ze=ft),Ze=Number(Ze),0>Ze&&(Ze=Math.max(0,ft+Ze)),Ue=Number(Ue||0);Ue<Ze;Ue++)this[Ue]=Oe;return this}});function we(pe){return pe||Array.prototype.fill}S("Int8Array.prototype.fill",we),S("Uint8Array.prototype.fill",we),S("Uint8ClampedArray.prototype.fill",we),S("Int16Array.prototype.fill",we),S("Uint16Array.prototype.fill",we),S("Int32Array.prototype.fill",we),S("Uint32Array.prototype.fill",we),S("Float32Array.prototype.fill",we),S("Float64Array.prototype.fill",we),S("Object.is",function(pe){return pe||function(Oe,Ue){return Oe===Ue?Oe!==0||1/Oe===1/Ue:Oe!==Oe&&Ue!==Ue}}),S("Array.prototype.includes",function(pe){return pe||function(Oe,Ue){var Ze=this;Ze instanceof String&&(Ze=String(Ze));var ft=Ze.length;for(Ue=Ue||0,0>Ue&&(Ue=Math.max(Ue+ft,0));Ue<ft;Ue++){var bt=Ze[Ue];if(bt===Oe||Object.is(bt,Oe))return!0}return!1}}),S("String.prototype.includes",function(pe){return pe||function(Oe,Ue){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(Oe instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(Oe,Ue||0)!==-1}});var Ie=this||self;function Be(pe,Oe){pe=pe.split(".");var Ue=Ie;pe[0]in Ue||typeof Ue.execScript>"u"||Ue.execScript("var "+pe[0]);for(var Ze;pe.length&&(Ze=pe.shift());)pe.length||Oe===void 0?Ue[Ze]&&Ue[Ze]!==Object.prototype[Ze]?Ue=Ue[Ze]:Ue=Ue[Ze]={}:Ue[Ze]=Oe}function Me(pe){var Oe;e:{if((Oe=Ie.navigator)&&(Oe=Oe.userAgent))break e;Oe=""}return Oe.indexOf(pe)!=-1}var Re=Array.prototype.map?function(pe,Oe){return Array.prototype.map.call(pe,Oe,void 0)}:function(pe,Oe){for(var Ue=pe.length,Ze=Array(Ue),ft=typeof pe=="string"?pe.split(""):pe,bt=0;bt<Ue;bt++)bt in ft&&(Ze[bt]=Oe.call(void 0,ft[bt],bt,pe));return Ze},Te={},Se=null;function oe(pe){var Oe=pe.length,Ue=3*Oe/4;Ue%3?Ue=Math.floor(Ue):"=.".indexOf(pe[Oe-1])!=-1&&(Ue="=.".indexOf(pe[Oe-2])!=-1?Ue-2:Ue-1);var Ze=new Uint8Array(Ue),ft=0;return ae(pe,function(bt){Ze[ft++]=bt}),ft!==Ue?Ze.subarray(0,ft):Ze}function ae(pe,Oe){function Ue(Zt){for(;Ze<pe.length;){var En=pe.charAt(Ze++),Ln=Se[En];if(Ln!=null)return Ln;if(!/^[\s\xa0]*$/.test(En))throw Error("Unknown base64 encoding at char: "+En)}return Zt}be();for(var Ze=0;;){var ft=Ue(-1),bt=Ue(0),gt=Ue(64),Dt=Ue(64);if(Dt===64&&ft===-1)break;Oe(ft<<2|bt>>4),gt!=64&&(Oe(bt<<4&240|gt>>2),Dt!=64&&Oe(gt<<6&192|Dt))}}function be(){if(!Se){Se={};for(var pe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),Oe=["+/=","+/","-_=","-_.","-_"],Ue=0;5>Ue;Ue++){var Ze=pe.concat(Oe[Ue].split(""));Te[Ue]=Ze;for(var ft=0;ft<Ze.length;ft++){var bt=Ze[ft];Se[bt]===void 0&&(Se[bt]=ft)}}}}var he=typeof Uint8Array<"u",ue=!(Me("Trident")||Me("MSIE"))&&typeof Ie.btoa=="function";function ye(pe){if(!ue){var Oe;Oe===void 0&&(Oe=0),be(),Oe=Te[Oe];for(var Ue=Array(Math.floor(pe.length/3)),Ze=Oe[64]||"",ft=0,bt=0;ft<pe.length-2;ft+=3){var gt=pe[ft],Dt=pe[ft+1],Zt=pe[ft+2],En=Oe[gt>>2];gt=Oe[(gt&3)<<4|Dt>>4],Dt=Oe[(Dt&15)<<2|Zt>>6],Zt=Oe[Zt&63],Ue[bt++]=En+gt+Dt+Zt}switch(En=0,Zt=Ze,pe.length-ft){case 2:En=pe[ft+1],Zt=Oe[(En&15)<<2]||Ze;case 1:pe=pe[ft],Ue[bt]=Oe[pe>>2]+Oe[(pe&3)<<4|En>>4]+Zt+Ze}return Ue.join("")}for(Oe="";10240<pe.length;)Oe+=String.fromCharCode.apply(null,pe.subarray(0,10240)),pe=pe.subarray(10240);return Oe+=String.fromCharCode.apply(null,pe),btoa(Oe)}var ce=RegExp("[-_.]","g");function _e(pe){switch(pe){case"-":return"+";case"_":return"/";case".":return"=";default:return""}}function ke(pe){if(!ue)return oe(pe);ce.test(pe)&&(pe=pe.replace(ce,_e)),pe=atob(pe);for(var Oe=new Uint8Array(pe.length),Ue=0;Ue<pe.length;Ue++)Oe[Ue]=pe.charCodeAt(Ue);return Oe}var Pe;function $e(){return Pe||(Pe=new Uint8Array(0))}var xe={},Ne=typeof Uint8Array.prototype.slice=="function",je=0,He=0;function Ye(pe){var Oe=0>pe;pe=Math.abs(pe);var Ue=pe>>>0;pe=Math.floor((pe-Ue)/4294967296),Oe&&(Ue=w(ot(Ue,pe)),Oe=Ue.next().value,pe=Ue.next().value,Ue=Oe),je=Ue>>>0,He=pe>>>0}var Je=typeof BigInt=="function";function ot(pe,Oe){return Oe=~Oe,pe?pe=~pe+1:Oe+=1,[pe,Oe]}function ze(pe,Oe){this.i=pe>>>0,this.h=Oe>>>0}function pt(pe){if(!pe)return yt||(yt=new ze(0,0));if(!/^-?\d+$/.test(pe))return null;if(16>pe.length)Ye(Number(pe));else if(Je)pe=BigInt(pe),je=Number(pe&BigInt(4294967295))>>>0,He=Number(pe>>BigInt(32)&BigInt(4294967295));else{var Oe=+(pe[0]==="-");He=je=0;for(var Ue=pe.length,Ze=Oe,ft=(Ue-Oe)%6+Oe;ft<=Ue;Ze=ft,ft+=6)Ze=Number(pe.slice(Ze,ft)),He*=1e6,je=1e6*je+Ze,4294967296<=je&&(He+=je/4294967296|0,je%=4294967296);Oe&&(Oe=w(ot(je,He)),pe=Oe.next().value,Oe=Oe.next().value,je=pe,He=Oe)}return new ze(je,He)}var yt;function ut(pe,Oe){return Error("Invalid wire type: "+pe+" (at position "+Oe+")")}function Et(){return Error("Failed to read varint, encoding is invalid.")}function qe(pe,Oe){return Error("Tried to read past the end of the data "+Oe+" > "+pe)}function Le(){throw Error("Invalid UTF8")}function lt(pe,Oe){return Oe=String.fromCharCode.apply(null,Oe),pe==null?Oe:pe+Oe}var We=void 0,Qe,at=typeof TextDecoder<"u",St,Ct=typeof TextEncoder<"u",jt;function Gt(pe){if(pe!==xe)throw Error("illegal external caller")}function Ft(pe,Oe){if(Gt(Oe),this.V=pe,pe!=null&&pe.length===0)throw Error("ByteString should be constructed with non-empty values")}function ct(){return jt||(jt=new Ft(null,xe))}function st(pe){Gt(xe);var Oe=pe.V;return Oe=Oe==null||he&&Oe!=null&&Oe instanceof Uint8Array?Oe:typeof Oe=="string"?ke(Oe):null,Oe==null?Oe:pe.V=Oe}function nt(pe){if(typeof pe=="string")return{buffer:ke(pe),C:!1};if(Array.isArray(pe))return{buffer:new Uint8Array(pe),C:!1};if(pe.constructor===Uint8Array)return{buffer:pe,C:!1};if(pe.constructor===ArrayBuffer)return{buffer:new Uint8Array(pe),C:!1};if(pe.constructor===Ft)return{buffer:st(pe)||$e(),C:!0};if(pe instanceof Uint8Array)return{buffer:new Uint8Array(pe.buffer,pe.byteOffset,pe.byteLength),C:!1};throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, a ByteString or an Array of numbers")}function At(pe,Oe){this.i=null,this.m=!1,this.h=this.j=this.l=0,Yt(this,pe,Oe)}function Yt(pe,Oe,Ue){Ue=Ue===void 0?{}:Ue,pe.S=Ue.S===void 0?!1:Ue.S,Oe&&(Oe=nt(Oe),pe.i=Oe.buffer,pe.m=Oe.C,pe.l=0,pe.j=pe.i.length,pe.h=pe.l)}At.prototype.reset=function(){this.h=this.l};function ht(pe,Oe){if(pe.h=Oe,Oe>pe.j)throw qe(pe.j,Oe)}function Tt(pe){var Oe=pe.i,Ue=pe.h,Ze=Oe[Ue++],ft=Ze&127;if(Ze&128&&(Ze=Oe[Ue++],ft|=(Ze&127)<<7,Ze&128&&(Ze=Oe[Ue++],ft|=(Ze&127)<<14,Ze&128&&(Ze=Oe[Ue++],ft|=(Ze&127)<<21,Ze&128&&(Ze=Oe[Ue++],ft|=Ze<<28,Ze&128&&Oe[Ue++]&128&&Oe[Ue++]&128&&Oe[Ue++]&128&&Oe[Ue++]&128&&Oe[Ue++]&128)))))throw Et();return ht(pe,Ue),ft}function Kt(pe,Oe){if(0>Oe)throw Error("Tried to read a negative byte length: "+Oe);var Ue=pe.h,Ze=Ue+Oe;if(Ze>pe.j)throw qe(Oe,pe.j-Ue);return pe.h=Ze,Ue}var _n=[];function Ht(){this.h=[]}Ht.prototype.length=function(){return this.h.length},Ht.prototype.end=function(){var pe=this.h;return this.h=[],pe};function Ot(pe,Oe,Ue){for(;0<Ue||127<Oe;)pe.h.push(Oe&127|128),Oe=(Oe>>>7|Ue<<25)>>>0,Ue>>>=7;pe.h.push(Oe)}function cn(pe,Oe){for(;127<Oe;)pe.h.push(Oe&127|128),Oe>>>=7;pe.h.push(Oe)}function Mn(pe,Oe){if(_n.length){var Ue=_n.pop();Yt(Ue,pe,Oe),pe=Ue}else pe=new At(pe,Oe);this.h=pe,this.j=this.h.h,this.i=this.l=-1,this.setOptions(Oe)}Mn.prototype.setOptions=function(pe){pe=pe===void 0?{}:pe,this.ca=pe.ca===void 0?!1:pe.ca},Mn.prototype.reset=function(){this.h.reset(),this.j=this.h.h,this.i=this.l=-1};function In(pe){var Oe=pe.h;if(Oe.h==Oe.j)return!1;pe.j=pe.h.h;var Ue=Tt(pe.h)>>>0;if(Oe=Ue>>>3,Ue&=7,!(0<=Ue&&5>=Ue))throw ut(Ue,pe.j);if(1>Oe)throw Error("Invalid field number: "+Oe+" (at position "+pe.j+")");return pe.l=Oe,pe.i=Ue,!0}function On(pe){switch(pe.i){case 0:if(pe.i!=0)On(pe);else e:{pe=pe.h;for(var Oe=pe.h,Ue=Oe+10,Ze=pe.i;Oe<Ue;)if((Ze[Oe++]&128)===0){ht(pe,Oe);break e}throw Et()}break;case 1:pe=pe.h,ht(pe,pe.h+8);break;case 2:pe.i!=2?On(pe):(Oe=Tt(pe.h)>>>0,pe=pe.h,ht(pe,pe.h+Oe));break;case 5:pe=pe.h,ht(pe,pe.h+4);break;case 3:Oe=pe.l;do{if(!In(pe))throw Error("Unmatched start-group tag: stream EOF");if(pe.i==4){if(pe.l!=Oe)throw Error("Unmatched end-group tag");break}On(pe)}while(!0);break;default:throw ut(pe.i,pe.j)}}var rr=[];function Ar(){this.j=[],this.i=0,this.h=new Ht}function hr(pe,Oe){Oe.length!==0&&(pe.j.push(Oe),pe.i+=Oe.length)}function Yr(pe,Oe){if(Oe=Oe.R){hr(pe,pe.h.end());for(var Ue=0;Ue<Oe.length;Ue++)hr(pe,st(Oe[Ue])||$e())}}var $r=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol():void 0;function wr(pe,Oe){return $r?pe[$r]|=Oe:pe.A!==void 0?pe.A|=Oe:(Object.defineProperties(pe,{A:{value:Oe,configurable:!0,writable:!0,enumerable:!1}}),Oe)}function mr(pe,Oe){$r?pe[$r]&&(pe[$r]&=~Oe):pe.A!==void 0&&(pe.A&=~Oe)}function ir(pe){var Oe;return $r?Oe=pe[$r]:Oe=pe.A,Oe??0}function zn(pe,Oe){$r?pe[$r]=Oe:pe.A!==void 0?pe.A=Oe:Object.defineProperties(pe,{A:{value:Oe,configurable:!0,writable:!0,enumerable:!1}})}function Lr(pe){return wr(pe,1),pe}function Hr(pe,Oe){zn(Oe,(pe|0)&-51)}function Xe(pe,Oe){zn(Oe,(pe|18)&-41)}var it={};function xt(pe){return pe!==null&&typeof pe=="object"&&!Array.isArray(pe)&&pe.constructor===Object}var $t,en=[];zn(en,23),$t=Object.freeze(en);function Qt(pe){if(ir(pe.o)&2)throw Error("Cannot mutate an immutable Message")}function pn(pe){var Oe=pe.length;(Oe=Oe?pe[Oe-1]:void 0)&&xt(Oe)?Oe.g=1:(Oe={},pe.push((Oe.g=1,Oe)))}function mn(pe){var Oe=pe.i+pe.G;return pe.B||(pe.B=pe.o[Oe]={})}function bn(pe,Oe){return Oe===-1?null:Oe>=pe.i?pe.B?pe.B[Oe]:void 0:pe.o[Oe+pe.G]}function vn(pe,Oe,Ue,Ze){Qt(pe),wn(pe,Oe,Ue,Ze)}function wn(pe,Oe,Ue,Ze){pe.j&&(pe.j=void 0),Oe>=pe.i||Ze?mn(pe)[Oe]=Ue:(pe.o[Oe+pe.G]=Ue,(pe=pe.B)&&Oe in pe&&delete pe[Oe])}function qt(pe,Oe,Ue,Ze){var ft=bn(pe,Oe);Array.isArray(ft)||(ft=$t);var bt=ir(ft);if(bt&1||Lr(ft),Ze)bt&2||wr(ft,2),Ue&1||Object.freeze(ft);else{Ze=!(Ue&2);var gt=bt&2;Ue&1||!gt?Ze&&bt&16&&!gt&&mr(ft,16):(ft=Lr(Array.prototype.slice.call(ft)),wn(pe,Oe,ft))}return ft}function Ke(pe,Oe){var Ue=bn(pe,Oe),Ze=Ue==null?Ue:typeof Ue=="number"||Ue==="NaN"||Ue==="Infinity"||Ue==="-Infinity"?Number(Ue):void 0;return Ze!=null&&Ze!==Ue&&wn(pe,Oe,Ze),Ze}function _t(pe,Oe,Ue,Ze,ft){pe.h||(pe.h={});var bt=pe.h[Ue],gt=qt(pe,Ue,3,ft);if(!bt){var Dt=gt;bt=[];var Zt=!!(ir(pe.o)&16);gt=!!(ir(Dt)&2);var En=Dt;!ft&&gt&&(Dt=Array.prototype.slice.call(Dt));for(var Ln=gt,er=0;er<Dt.length;er++){var Yn=Dt[er],$n=Oe,cr=!1;if(cr=cr===void 0?!1:cr,Yn=Array.isArray(Yn)?new $n(Yn):cr?new $n:void 0,Yn!==void 0){$n=Yn.o;var Cr=cr=ir($n);gt&&(Cr|=2),Zt&&(Cr|=16),Cr!=cr&&zn($n,Cr),$n=Cr,Ln=Ln||!!(2&$n),bt.push(Yn)}}return pe.h[Ue]=bt,Zt=ir(Dt),Oe=Zt|33,Oe=Ln?Oe&-9:Oe|8,Zt!=Oe&&(Ln=Dt,Object.isFrozen(Ln)&&(Ln=Array.prototype.slice.call(Ln)),zn(Ln,Oe),Dt=Ln),En!==Dt&&wn(pe,Ue,Dt),(ft||Ze&&gt)&&wr(bt,2),Ze&&Object.freeze(bt),bt}return ft||(ft=Object.isFrozen(bt),Ze&&!ft?Object.freeze(bt):!Ze&&ft&&(bt=Array.prototype.slice.call(bt),pe.h[Ue]=bt)),bt}function It(pe,Oe,Ue){var Ze=!!(ir(pe.o)&2);if(Oe=_t(pe,Oe,Ue,Ze,Ze),pe=qt(pe,Ue,3,Ze),!(Ze||ir(pe)&8)){for(Ze=0;Ze<Oe.length;Ze++){if(Ue=Oe[Ze],ir(Ue.o)&2){var ft=Pn(Ue,!1);ft.j=Ue}else ft=Ue;Ue!==ft&&(Oe[Ze]=ft,pe[Ze]=ft.o)}wr(pe,8)}return Oe}function Nt(pe,Oe,Ue){if(Ue!=null&&typeof Ue!="number")throw Error("Value of float/double field must be a number|null|undefined, found "+typeof Ue+": "+Ue);vn(pe,Oe,Ue)}function Mt(pe,Oe,Ue,Ze,ft){Qt(pe);var bt=_t(pe,Ue,Oe,!1,!1);return Ue=Ze??new Ue,pe=qt(pe,Oe,2,!1),ft!=null?(bt.splice(ft,0,Ue),pe.splice(ft,0,Ue.o)):(bt.push(Ue),pe.push(Ue.o)),Ue.C()&&mr(pe,8),Ue}function on(pe,Oe){return pe??Oe}function dn(pe,Oe,Ue){return Ue=Ue===void 0?0:Ue,on(Ke(pe,Oe),Ue)}var ln;function kn(pe){switch(typeof pe){case"number":return isFinite(pe)?pe:String(pe);case"object":if(pe)if(Array.isArray(pe)){if((ir(pe)&128)!==0)return pe=Array.prototype.slice.call(pe),pn(pe),pe}else{if(he&&pe!=null&&pe instanceof Uint8Array)return ye(pe);if(pe instanceof Ft){var Oe=pe.V;return Oe==null?"":typeof Oe=="string"?Oe:pe.V=ye(Oe)}}}return pe}function An(pe,Oe,Ue,Ze){if(pe!=null){if(Array.isArray(pe))pe=Gn(pe,Oe,Ue,Ze!==void 0);else if(xt(pe)){var ft={},bt;for(bt in pe)ft[bt]=An(pe[bt],Oe,Ue,Ze);pe=ft}else pe=Oe(pe,Ze);return pe}}function Gn(pe,Oe,Ue,Ze){var ft=ir(pe);Ze=Ze?!!(ft&16):void 0,pe=Array.prototype.slice.call(pe);for(var bt=0;bt<pe.length;bt++)pe[bt]=An(pe[bt],Oe,Ue,Ze);return Ue(ft,pe),pe}function Tn(pe){return pe.ja===it?pe.toJSON():kn(pe)}function Bn(pe,Oe){pe&128&&pn(Oe)}function nr(pe,Oe,Ue){if(Ue=Ue===void 0?Xe:Ue,pe!=null){if(he&&pe instanceof Uint8Array)return pe.length?new Ft(new Uint8Array(pe),xe):ct();if(Array.isArray(pe)){var Ze=ir(pe);return Ze&2?pe:Oe&&!(Ze&32)&&(Ze&16||Ze===0)?(zn(pe,Ze|2),pe):(pe=Gn(pe,nr,Ze&4?Xe:Ue,!0),Oe=ir(pe),Oe&4&&Oe&2&&Object.freeze(pe),pe)}return pe.ja===it?ar(pe):pe}}function Nr(pe,Oe,Ue,Ze,ft,bt,gt){if(pe=pe.h&&pe.h[Ue]){if(Ze=ir(pe),Ze&2?Ze=pe:(bt=Re(pe,ar),Xe(Ze,bt),Object.freeze(bt),Ze=bt),Qt(Oe),gt=Ze==null?$t:Lr([]),Ze!=null){for(bt=!!Ze.length,pe=0;pe<Ze.length;pe++){var Dt=Ze[pe];bt=bt&&!(ir(Dt.o)&2),gt[pe]=Dt.o}bt=(bt?8:0)|1,pe=ir(gt),(pe&bt)!==bt&&(Object.isFrozen(gt)&&(gt=Array.prototype.slice.call(gt)),zn(gt,pe|bt)),Oe.h||(Oe.h={}),Oe.h[Ue]=Ze}else Oe.h&&(Oe.h[Ue]=void 0);wn(Oe,Ue,gt,ft)}else vn(Oe,Ue,nr(Ze,bt,gt),ft)}function ar(pe){return ir(pe.o)&2||(pe=Pn(pe,!0),wr(pe.o,2)),pe}function Pn(pe,Oe){var Ue=pe.o,Ze=[];wr(Ze,16);var ft=pe.constructor.h;if(ft&&Ze.push(ft),ft=pe.B,ft){Ze.length=Ue.length,Ze.fill(void 0,Ze.length,Ue.length);var bt={};Ze[Ze.length-1]=bt}(ir(Ue)&128)!==0&&pn(Ze),Oe=Oe||pe.C()?Xe:Hr,bt=pe.constructor,ln=Ze,Ze=new bt(Ze),ln=void 0,pe.R&&(Ze.R=pe.R.slice()),bt=!!(ir(Ue)&16);for(var gt=ft?Ue.length-1:Ue.length,Dt=0;Dt<gt;Dt++)Nr(pe,Ze,Dt-pe.G,Ue[Dt],!1,bt,Oe);if(ft)for(var Zt in ft)Nr(pe,Ze,+Zt,ft[Zt],!0,bt,Oe);return Ze}function fn(pe,Oe,Ue){pe==null&&(pe=ln),ln=void 0;var Ze=this.constructor.i||0,ft=0<Ze,bt=this.constructor.h,gt=!1;if(pe==null){pe=bt?[bt]:[];var Dt=48,Zt=!0;ft&&(Ze=0,Dt|=128),zn(pe,Dt)}else{if(!Array.isArray(pe)||bt&&bt!==pe[0])throw Error();var En=Dt=wr(pe,0);if((Zt=(16&En)!==0)&&((gt=(32&En)!==0)||(En|=32)),ft){if(128&En)Ze=0;else if(0<pe.length){var Ln=pe[pe.length-1];if(xt(Ln)&&"g"in Ln){Ze=0,En|=128,delete Ln.g;var er=!0,Yn;for(Yn in Ln){er=!1;break}er&&pe.pop()}}}else if(128&En)throw Error();Dt!==En&&zn(pe,En)}this.G=(bt?0:-1)-Ze,this.h=void 0,this.o=pe;e:{if(bt=this.o.length,Ze=bt-1,bt&&(bt=this.o[Ze],xt(bt))){this.B=bt,this.i=Ze-this.G;break e}Oe!==void 0&&-1<Oe?(this.i=Math.max(Oe,Ze+1-this.G),this.B=void 0):this.i=Number.MAX_VALUE}if(!ft&&this.B&&"g"in this.B)throw Error('Unexpected "g" flag in sparse object of message that is not a group type.');if(Ue){Oe=Zt&&!gt&&!0,ft=this.i;var $n;for(Zt=0;Zt<Ue.length;Zt++)gt=Ue[Zt],gt<ft?(gt+=this.G,(Ze=pe[gt])?Vn(Ze,Oe):pe[gt]=$t):($n||($n=mn(this)),(Ze=$n[gt])?Vn(Ze,Oe):$n[gt]=$t)}}fn.prototype.toJSON=function(){return Gn(this.o,Tn,Bn)},fn.prototype.C=function(){return!!(ir(this.o)&2)};function Vn(pe,Oe){if(Array.isArray(pe)){var Ue=ir(pe),Ze=1;!Oe||Ue&2||(Ze|=16),(Ue&Ze)!==Ze&&zn(pe,Ue|Ze)}}fn.prototype.ja=it,fn.prototype.toString=function(){return this.o.toString()};function Rn(pe,Oe,Ue){if(Ue){var Ze={},ft;for(ft in Ue){var bt=Ue[ft],gt=bt.qa;gt||(Ze.J=bt.wa||bt.oa.W,bt.ia?(Ze.aa=xi(bt.ia),gt=(function(Dt){return function(Zt,En,Ln){return Dt.J(Zt,En,Ln,Dt.aa)}})(Ze)):bt.ka?(Ze.Z=va(bt.da.P,bt.ka),gt=(function(Dt){return function(Zt,En,Ln){return Dt.J(Zt,En,Ln,Dt.Z)}})(Ze)):gt=Ze.J,bt.qa=gt),gt(Oe,pe,bt.da),Ze={J:Ze.J,aa:Ze.aa,Z:Ze.Z}}}Yr(Oe,pe)}var Mr=Symbol();function fi(pe,Oe,Ue){return pe[Mr]||(pe[Mr]=function(Ze,ft){return Oe(Ze,ft,Ue)})}function dr(pe){var Oe=pe[Mr];if(!Oe){var Ue=Tr(pe);Oe=function(Ze,ft){return lr(Ze,ft,Ue)},pe[Mr]=Oe}return Oe}function si(pe){var Oe=pe.ia;if(Oe)return dr(Oe);if(Oe=pe.va)return fi(pe.da.P,Oe,pe.ka)}function Or(pe){var Oe=si(pe),Ue=pe.da,Ze=pe.oa.U;return Oe?function(ft,bt){return Ze(ft,bt,Ue,Oe)}:function(ft,bt){return Ze(ft,bt,Ue)}}function li(pe,Oe){var Ue=pe[Oe];return typeof Ue=="function"&&Ue.length===0&&(Ue=Ue(),pe[Oe]=Ue),Array.isArray(Ue)&&(zt in Ue||Ce in Ue||0<Ue.length&&typeof Ue[0]=="function")?Ue:void 0}function ci(pe,Oe,Ue,Ze,ft,bt){Oe.P=pe[0];var gt=1;if(pe.length>gt&&typeof pe[gt]!="number"){var Dt=pe[gt++];Ue(Oe,Dt)}for(;gt<pe.length;){Ue=pe[gt++];for(var Zt=gt+1;Zt<pe.length&&typeof pe[Zt]!="number";)Zt++;switch(Dt=pe[gt++],Zt-=gt,Zt){case 0:Ze(Oe,Ue,Dt);break;case 1:(Zt=li(pe,gt))?(gt++,ft(Oe,Ue,Dt,Zt)):Ze(Oe,Ue,Dt,pe[gt++]);break;case 2:Zt=gt++,Zt=li(pe,Zt),ft(Oe,Ue,Dt,Zt,pe[gt++]);break;case 3:bt(Oe,Ue,Dt,pe[gt++],pe[gt++],pe[gt++]);break;case 4:bt(Oe,Ue,Dt,pe[gt++],pe[gt++],pe[gt++],pe[gt++]);break;default:throw Error("unexpected number of binary field arguments: "+Zt)}}return Oe}var pi=Symbol();function xi(pe){var Oe=pe[pi];if(!Oe){var Ue=an(pe);Oe=function(Ze,ft){return Xn(Ze,ft,Ue)},pe[pi]=Oe}return Oe}function va(pe,Oe){var Ue=pe[pi];return Ue||(Ue=function(Ze,ft){return Rn(Ze,ft,Oe)},pe[pi]=Ue),Ue}var Ce=Symbol();function Fe(pe,Oe){pe.push(Oe)}function Ve(pe,Oe,Ue){pe.push(Oe,Ue.W)}function mt(pe,Oe,Ue,Ze){var ft=xi(Ze),bt=an(Ze).P,gt=Ue.W;pe.push(Oe,function(Dt,Zt,En){return gt(Dt,Zt,En,bt,ft)})}function Pt(pe,Oe,Ue,Ze,ft,bt){var gt=va(Ze,bt),Dt=Ue.W;pe.push(Oe,function(Zt,En,Ln){return Dt(Zt,En,Ln,Ze,gt)})}function an(pe){var Oe=pe[Ce];return Oe||(Oe=ci(pe,pe[Ce]=[],Fe,Ve,mt,Pt),zt in pe&&Ce in pe&&(pe.length=0),Oe)}var zt=Symbol();function sn(pe,Oe){pe[0]=Oe}function xn(pe,Oe,Ue,Ze){var ft=Ue.U;pe[Oe]=Ze?function(bt,gt,Dt){return ft(bt,gt,Dt,Ze)}:ft}function Un(pe,Oe,Ue,Ze,ft){var bt=Ue.U,gt=dr(Ze),Dt=Tr(Ze).P;pe[Oe]=function(Zt,En,Ln){return bt(Zt,En,Ln,Dt,gt,ft)}}function tr(pe,Oe,Ue,Ze,ft,bt,gt){var Dt=Ue.U,Zt=fi(Ze,ft,bt);pe[Oe]=function(En,Ln,er){return Dt(En,Ln,er,Ze,Zt,gt)}}function Tr(pe){var Oe=pe[zt];return Oe||(Oe=ci(pe,pe[zt]={},sn,xn,Un,tr),zt in pe&&Ce in pe&&(pe.length=0),Oe)}function lr(pe,Oe,Ue){for(;In(Oe)&&Oe.i!=4;){var Ze=Oe.l,ft=Ue[Ze];if(!ft){var bt=Ue[0];bt&&(bt=bt[Ze])&&(ft=Ue[Ze]=Or(bt))}if(!ft||!ft(Oe,pe,Ze)){ft=Oe,Ze=pe,bt=ft.j,On(ft);var gt=ft;if(!gt.ca){if(ft=gt.h.h-bt,gt.h.h=bt,gt=gt.h,ft==0)ft=ct();else{if(bt=Kt(gt,ft),gt.S&&gt.m)ft=gt.i.subarray(bt,bt+ft);else{gt=gt.i;var Dt=bt;ft=bt+ft,ft=Dt===ft?$e():Ne?gt.slice(Dt,ft):new Uint8Array(gt.subarray(Dt,ft))}ft=ft.length==0?ct():new Ft(ft,xe)}(bt=Ze.R)?bt.push(ft):Ze.R=[ft]}}}return pe}function Xn(pe,Oe,Ue){for(var Ze=Ue.length,ft=Ze%2==1,bt=ft?1:0;bt<Ze;bt+=2)(0,Ue[bt+1])(Oe,pe,Ue[bt]);Rn(pe,Oe,ft?Ue[0]:void 0)}function Fn(pe,Oe){return{U:pe,W:Oe}}var Hn=Fn(function(pe,Oe,Ue){if(pe.i!==5)return!1;pe=pe.h;var Ze=pe.i,ft=pe.h,bt=Ze[ft],gt=Ze[ft+1],Dt=Ze[ft+2];return Ze=Ze[ft+3],ht(pe,pe.h+4),gt=(bt<<0|gt<<8|Dt<<16|Ze<<24)>>>0,pe=2*(gt>>31)+1,bt=gt>>>23&255,gt&=8388607,vn(Oe,Ue,bt==255?gt?NaN:1/0*pe:bt==0?pe*Math.pow(2,-149)*gt:pe*Math.pow(2,bt-150)*(gt+Math.pow(2,23))),!0},function(pe,Oe,Ue){if(Oe=Ke(Oe,Ue),Oe!=null){cn(pe.h,8*Ue+5),pe=pe.h;var Ze=+Oe;Ze===0?0<1/Ze?je=He=0:(He=0,je=2147483648):isNaN(Ze)?(He=0,je=2147483647):(Ze=(Ue=0>Ze?-2147483648:0)?-Ze:Ze,34028234663852886e22<Ze?(He=0,je=(Ue|2139095040)>>>0):11754943508222875e-54>Ze?(Ze=Math.round(Ze/Math.pow(2,-149)),He=0,je=(Ue|Ze)>>>0):(Oe=Math.floor(Math.log(Ze)/Math.LN2),Ze*=Math.pow(2,-Oe),Ze=Math.round(8388608*Ze),16777216<=Ze&&++Oe,He=0,je=(Ue|Oe+127<<23|Ze&8388607)>>>0)),Ue=je,pe.h.push(Ue>>>0&255),pe.h.push(Ue>>>8&255),pe.h.push(Ue>>>16&255),pe.h.push(Ue>>>24&255)}}),Kn=Fn(function(pe,Oe,Ue){if(pe.i!==0)return!1;var Ze=pe.h,ft=0,bt=pe=0,gt=Ze.i,Dt=Ze.h;do{var Zt=gt[Dt++];ft|=(Zt&127)<<bt,bt+=7}while(32>bt&&Zt&128);for(32<bt&&(pe|=(Zt&127)>>4),bt=3;32>bt&&Zt&128;bt+=7)Zt=gt[Dt++],pe|=(Zt&127)<<bt;if(ht(Ze,Dt),128>Zt)Ze=ft>>>0,Zt=pe>>>0,(pe=Zt&2147483648)&&(Ze=~Ze+1>>>0,Zt=~Zt>>>0,Ze==0&&(Zt=Zt+1>>>0)),Ze=4294967296*Zt+(Ze>>>0);else throw Et();return vn(Oe,Ue,pe?-Ze:Ze),!0},function(pe,Oe,Ue){Oe=bn(Oe,Ue),Oe!=null&&(typeof Oe=="string"&&pt(Oe),Oe!=null&&(cn(pe.h,8*Ue),typeof Oe=="number"?(pe=pe.h,Ye(Oe),Ot(pe,je,He)):(Ue=pt(Oe),Ot(pe.h,Ue.i,Ue.h))))}),Er=Fn(function(pe,Oe,Ue){return pe.i!==0?!1:(vn(Oe,Ue,Tt(pe.h)),!0)},function(pe,Oe,Ue){if(Oe=bn(Oe,Ue),Oe!=null&&Oe!=null)if(cn(pe.h,8*Ue),pe=pe.h,Ue=Oe,0<=Ue)cn(pe,Ue);else{for(Oe=0;9>Oe;Oe++)pe.h.push(Ue&127|128),Ue>>=7;pe.h.push(1)}}),ii=Fn(function(pe,Oe,Ue){if(pe.i!==2)return!1;var Ze=Tt(pe.h)>>>0;pe=pe.h;var ft=Kt(pe,Ze);if(pe=pe.i,at){var bt=pe,gt;(gt=Qe)||(gt=Qe=new TextDecoder("utf-8",{fatal:!0})),pe=ft+Ze,bt=ft===0&&pe===bt.length?bt:bt.subarray(ft,pe);try{var Dt=gt.decode(bt)}catch(er){if(We===void 0){try{gt.decode(new Uint8Array([128]))}catch{}try{gt.decode(new Uint8Array([97])),We=!0}catch{We=!1}}throw!We&&(Qe=void 0),er}}else{Dt=ft,Ze=Dt+Ze,ft=[];for(var Zt=null,En,Ln;Dt<Ze;)En=pe[Dt++],128>En?ft.push(En):224>En?Dt>=Ze?Le():(Ln=pe[Dt++],194>En||(Ln&192)!==128?(Dt--,Le()):ft.push((En&31)<<6|Ln&63)):240>En?Dt>=Ze-1?Le():(Ln=pe[Dt++],(Ln&192)!==128||En===224&&160>Ln||En===237&&160<=Ln||((bt=pe[Dt++])&192)!==128?(Dt--,Le()):ft.push((En&15)<<12|(Ln&63)<<6|bt&63)):244>=En?Dt>=Ze-2?Le():(Ln=pe[Dt++],(Ln&192)!==128||(En<<28)+(Ln-144)>>30!==0||((bt=pe[Dt++])&192)!==128||((gt=pe[Dt++])&192)!==128?(Dt--,Le()):(En=(En&7)<<18|(Ln&63)<<12|(bt&63)<<6|gt&63,En-=65536,ft.push((En>>10&1023)+55296,(En&1023)+56320))):Le(),8192<=ft.length&&(Zt=lt(Zt,ft),ft.length=0);Dt=lt(Zt,ft)}return vn(Oe,Ue,Dt),!0},function(pe,Oe,Ue){if(Oe=bn(Oe,Ue),Oe!=null){var Ze=!1;if(Ze=Ze===void 0?!1:Ze,Ct){if(Ze&&/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/.test(Oe))throw Error("Found an unpaired surrogate");Oe=(St||(St=new TextEncoder)).encode(Oe)}else{for(var ft=0,bt=new Uint8Array(3*Oe.length),gt=0;gt<Oe.length;gt++){var Dt=Oe.charCodeAt(gt);if(128>Dt)bt[ft++]=Dt;else{if(2048>Dt)bt[ft++]=Dt>>6|192;else{if(55296<=Dt&&57343>=Dt){if(56319>=Dt&&gt<Oe.length){var Zt=Oe.charCodeAt(++gt);if(56320<=Zt&&57343>=Zt){Dt=1024*(Dt-55296)+Zt-56320+65536,bt[ft++]=Dt>>18|240,bt[ft++]=Dt>>12&63|128,bt[ft++]=Dt>>6&63|128,bt[ft++]=Dt&63|128;continue}else gt--}if(Ze)throw Error("Found an unpaired surrogate");Dt=65533}bt[ft++]=Dt>>12|224,bt[ft++]=Dt>>6&63|128}bt[ft++]=Dt&63|128}}Oe=ft===bt.length?bt:bt.subarray(0,ft)}cn(pe.h,8*Ue+2),cn(pe.h,Oe.length),hr(pe,pe.h.end()),hr(pe,Oe)}}),Pr=Fn(function(pe,Oe,Ue,Ze,ft){if(pe.i!==2)return!1;Oe=Mt(Oe,Ue,Ze),Ue=pe.h.j,Ze=Tt(pe.h)>>>0;var bt=pe.h.h+Ze,gt=bt-Ue;if(0>=gt&&(pe.h.j=bt,ft(Oe,pe,void 0,void 0,void 0),gt=bt-pe.h.h),gt)throw Error("Message parsing ended unexpectedly. Expected to read "+(Ze+" bytes, instead read "+(Ze-gt)+" bytes, either the data ended unexpectedly or the message misreported its own length"));return pe.h.h=bt,pe.h.j=Ue,!0},function(pe,Oe,Ue,Ze,ft){if(Oe=It(Oe,Ze,Ue),Oe!=null)for(Ze=0;Ze<Oe.length;Ze++){var bt=pe;cn(bt.h,8*Ue+2);var gt=bt.h.end();hr(bt,gt),gt.push(bt.i),bt=gt,ft(Oe[Ze],pe),gt=pe;var Dt=bt.pop();for(Dt=gt.i+gt.h.length()-Dt;127<Dt;)bt.push(Dt&127|128),Dt>>>=7,gt.i++;bt.push(Dt),gt.i++}});function vi(pe){return function(Oe,Ue){e:{if(rr.length){var Ze=rr.pop();Ze.setOptions(Ue),Yt(Ze.h,Oe,Ue),Oe=Ze}else Oe=new Mn(Oe,Ue);try{var ft=Tr(pe),bt=lr(new ft.P,Oe,ft);break e}finally{ft=Oe.h,ft.i=null,ft.m=!1,ft.l=0,ft.j=0,ft.h=0,ft.S=!1,Oe.l=-1,Oe.i=-1,100>rr.length&&rr.push(Oe)}bt=void 0}return bt}}function Gr(pe){return function(){var Oe=new Ar;Xn(this,Oe,an(pe)),hr(Oe,Oe.h.end());for(var Ue=new Uint8Array(Oe.i),Ze=Oe.j,ft=Ze.length,bt=0,gt=0;gt<ft;gt++){var Dt=Ze[gt];Ue.set(Dt,bt),bt+=Dt.length}return Oe.j=[Ue],Ue}}function Qn(pe){fn.call(this,pe)}z(Qn,fn);var Wn=[Qn,1,Er,2,Hn,3,ii,4,ii];Qn.prototype.l=Gr(Wn);function gr(pe){fn.call(this,pe,-1,fr)}z(gr,fn),gr.prototype.addClassification=function(pe,Oe){return Mt(this,1,Qn,pe,Oe),this};var fr=[1],br=vi([gr,1,Pr,Wn]);function yr(pe){fn.call(this,pe)}z(yr,fn);var da=[yr,1,Hn,2,Hn,3,Hn,4,Hn,5,Hn];yr.prototype.l=Gr(da);function Ja(pe){fn.call(this,pe,-1,cs)}z(Ja,fn);var cs=[1],Di=vi([Ja,1,Pr,da]);function Ns(pe){fn.call(this,pe)}z(Ns,fn);var Os=[Ns,1,Hn,2,Hn,3,Hn,4,Hn,5,Hn,6,Kn],ro=vi(Os);Ns.prototype.l=Gr(Os);function ao(pe,Oe,Ue){if(Ue=pe.createShader(Ue===0?pe.VERTEX_SHADER:pe.FRAGMENT_SHADER),pe.shaderSource(Ue,Oe),pe.compileShader(Ue),!pe.getShaderParameter(Ue,pe.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+pe.getShaderInfoLog(Ue));return Ue}function so(pe){return It(pe,Qn,1).map(function(Oe){var Ue=bn(Oe,1);return{index:Ue??0,score:dn(Oe,2),label:bn(Oe,3)!=null?on(bn(Oe,3),""):void 0,displayName:bn(Oe,4)!=null?on(bn(Oe,4),""):void 0}})}function Qi(pe){return{x:dn(pe,1),y:dn(pe,2),z:dn(pe,3),visibility:Ke(pe,4)!=null?dn(pe,4):void 0}}function Aa(pe){return pe.map(function(Oe){return It(Di(Oe),yr,1).map(Qi)})}function ea(pe,Oe){this.i=pe,this.h=Oe,this.m=0}function Ua(pe,Oe,Ue){return Ds(pe,Oe),typeof pe.h.canvas.transferToImageBitmap=="function"?Promise.resolve(pe.h.canvas.transferToImageBitmap()):Ue?Promise.resolve(pe.h.canvas):typeof createImageBitmap=="function"?createImageBitmap(pe.h.canvas):(pe.j===void 0&&(pe.j=document.createElement("canvas")),new Promise(function(Ze){pe.j.height=pe.h.canvas.height,pe.j.width=pe.h.canvas.width,pe.j.getContext("2d",{}).drawImage(pe.h.canvas,0,0,pe.h.canvas.width,pe.h.canvas.height),Ze(pe.j)}))}function Ds(pe,Oe){var Ue=pe.h;if(pe.s===void 0){var Ze=ao(Ue,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),ft=ao(Ue,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),bt=Ue.createProgram();if(Ue.attachShader(bt,Ze),Ue.attachShader(bt,ft),Ue.linkProgram(bt),!Ue.getProgramParameter(bt,Ue.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+Ue.getProgramInfoLog(bt));Ze=pe.s=bt,Ue.useProgram(Ze),ft=Ue.getUniformLocation(Ze,"sampler0"),pe.l={O:Ue.getAttribLocation(Ze,"aVertex"),N:Ue.getAttribLocation(Ze,"aTex"),xa:ft},pe.v=Ue.createBuffer(),Ue.bindBuffer(Ue.ARRAY_BUFFER,pe.v),Ue.enableVertexAttribArray(pe.l.O),Ue.vertexAttribPointer(pe.l.O,2,Ue.FLOAT,!1,0,0),Ue.bufferData(Ue.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),Ue.STATIC_DRAW),Ue.bindBuffer(Ue.ARRAY_BUFFER,null),pe.u=Ue.createBuffer(),Ue.bindBuffer(Ue.ARRAY_BUFFER,pe.u),Ue.enableVertexAttribArray(pe.l.N),Ue.vertexAttribPointer(pe.l.N,2,Ue.FLOAT,!1,0,0),Ue.bufferData(Ue.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),Ue.STATIC_DRAW),Ue.bindBuffer(Ue.ARRAY_BUFFER,null),Ue.uniform1i(ft,0)}Ze=pe.l,Ue.useProgram(pe.s),Ue.canvas.width=Oe.width,Ue.canvas.height=Oe.height,Ue.viewport(0,0,Oe.width,Oe.height),Ue.activeTexture(Ue.TEXTURE0),pe.i.bindTexture2d(Oe.glName),Ue.enableVertexAttribArray(Ze.O),Ue.bindBuffer(Ue.ARRAY_BUFFER,pe.v),Ue.vertexAttribPointer(Ze.O,2,Ue.FLOAT,!1,0,0),Ue.enableVertexAttribArray(Ze.N),Ue.bindBuffer(Ue.ARRAY_BUFFER,pe.u),Ue.vertexAttribPointer(Ze.N,2,Ue.FLOAT,!1,0,0),Ue.bindFramebuffer(Ue.DRAW_FRAMEBUFFER?Ue.DRAW_FRAMEBUFFER:Ue.FRAMEBUFFER,null),Ue.clearColor(0,0,0,0),Ue.clear(Ue.COLOR_BUFFER_BIT),Ue.colorMask(!0,!0,!0,!0),Ue.drawArrays(Ue.TRIANGLE_FAN,0,4),Ue.disableVertexAttribArray(Ze.O),Ue.disableVertexAttribArray(Ze.N),Ue.bindBuffer(Ue.ARRAY_BUFFER,null),pe.i.bindTexture2d(0)}function Tl(pe){this.h=pe}var Cl=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function Xc(pe,Oe){return Oe+pe}function hc(pe,Oe){window[pe]=Oe}function fc(pe){var Oe=document.createElement("script");return Oe.setAttribute("src",pe),Oe.setAttribute("crossorigin","anonymous"),new Promise(function(Ue){Oe.addEventListener("load",function(){Ue()},!1),Oe.addEventListener("error",function(){Ue()},!1),document.body.appendChild(Oe)})}function Rl(){return ge(function(pe){switch(pe.h){case 1:return pe.s=2,K(pe,WebAssembly.instantiate(Cl),4);case 4:pe.h=3,pe.s=0;break;case 2:return pe.s=0,pe.l=null,pe.return(!1);case 3:return pe.return(!0)}})}function Ml(pe){if(this.h=pe,this.listeners={},this.l={},this.L={},this.s={},this.v={},this.M=this.u=this.ga=!0,this.I=Promise.resolve(),this.fa="",this.D={},this.locateFile=pe&&pe.locateFile||Xc,typeof window=="object")var Oe=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location<"u")Oe=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.ha=Oe,pe.options){Oe=w(Object.keys(pe.options));for(var Ue=Oe.next();!Ue.done;Ue=Oe.next()){Ue=Ue.value;var Ze=pe.options[Ue].default;Ze!==void 0&&(this.l[Ue]=typeof Ze=="function"?Ze():Ze)}}}s=Ml.prototype,s.close=function(){return this.j&&this.j.delete(),Promise.resolve()};function oo(pe){var Oe,Ue,Ze,ft,bt,gt,Dt,Zt,En,Ln,er;return ge(function(Yn){switch(Yn.h){case 1:return pe.ga?(Oe=pe.h.files===void 0?[]:typeof pe.h.files=="function"?pe.h.files(pe.l):pe.h.files,K(Yn,Rl(),2)):Yn.return();case 2:if(Ue=Yn.i,typeof window=="object")return hc("createMediapipeSolutionsWasm",{locateFile:pe.locateFile}),hc("createMediapipeSolutionsPackedAssets",{locateFile:pe.locateFile}),gt=Oe.filter(function($n){return $n.data!==void 0}),Dt=Oe.filter(function($n){return $n.data===void 0}),Zt=Promise.all(gt.map(function($n){var cr=Co(pe,$n.url);if($n.path!==void 0){var Cr=$n.path;cr=cr.then(function(ui){return pe.overrideFile(Cr,ui),Promise.resolve(ui)})}return cr})),En=Promise.all(Dt.map(function($n){return $n.simd===void 0||$n.simd&&Ue||!$n.simd&&!Ue?fc(pe.locateFile($n.url,pe.ha)):Promise.resolve()})).then(function(){var $n,cr,Cr;return ge(function(ui){if(ui.h==1)return $n=window.createMediapipeSolutionsWasm,cr=window.createMediapipeSolutionsPackedAssets,Cr=pe,K(ui,$n(cr),2);Cr.i=ui.i,ui.h=0})}),Ln=(function(){return ge(function($n){return pe.h.graph&&pe.h.graph.url?$n=K($n,Co(pe,pe.h.graph.url),0):($n.h=0,$n=void 0),$n})})(),K(Yn,Promise.all([En,Zt,Ln]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return Ze=Oe.filter(function($n){return $n.simd===void 0||$n.simd&&Ue||!$n.simd&&!Ue}).map(function($n){return pe.locateFile($n.url,pe.ha)}),importScripts.apply(null,C(Ze)),ft=pe,K(Yn,createMediapipeSolutionsWasm(Module),6);case 6:ft.i=Yn.i,pe.m=new OffscreenCanvas(1,1),pe.i.canvas=pe.m,bt=pe.i.GL.createContext(pe.m,{antialias:!1,alpha:!1,ua:typeof WebGL2RenderingContext<"u"?2:1}),pe.i.GL.makeContextCurrent(bt),Yn.h=4;break;case 7:if(pe.m=document.createElement("canvas"),er=pe.m.getContext("webgl2",{}),!er&&(er=pe.m.getContext("webgl",{}),!er))return alert("Failed to create WebGL canvas context when passing video frame."),Yn.return();pe.K=er,pe.i.canvas=pe.m,pe.i.createContext(pe.m,!0,!0,{});case 4:pe.j=new pe.i.SolutionWasm,pe.ga=!1,Yn.h=0}})}function kl(pe){var Oe,Ue,Ze,ft,bt,gt,Dt,Zt;return ge(function(En){if(En.h==1){if(pe.h.graph&&pe.h.graph.url&&pe.fa===pe.h.graph.url)return En.return();if(pe.u=!0,!pe.h.graph||!pe.h.graph.url){En.h=2;return}return pe.fa=pe.h.graph.url,K(En,Co(pe,pe.h.graph.url),3)}for(En.h!=2&&(Oe=En.i,pe.j.loadGraph(Oe)),Ue=w(Object.keys(pe.D)),Ze=Ue.next();!Ze.done;Ze=Ue.next())ft=Ze.value,pe.j.overrideFile(ft,pe.D[ft]);if(pe.D={},pe.h.listeners)for(bt=w(pe.h.listeners),gt=bt.next();!gt.done;gt=bt.next())Dt=gt.value,Hu(pe,Dt);Zt=pe.l,pe.l={},pe.setOptions(Zt),En.h=0})}s.reset=function(){var pe=this;return ge(function(Oe){pe.j&&(pe.j.reset(),pe.s={},pe.v={}),Oe.h=0})},s.setOptions=function(pe,Oe){var Ue=this;if(Oe=Oe||this.h.options){for(var Ze=[],ft=[],bt={},gt=w(Object.keys(pe)),Dt=gt.next();!Dt.done;bt={X:bt.X,Y:bt.Y},Dt=gt.next())if(Dt=Dt.value,!(Dt in this.l&&this.l[Dt]===pe[Dt])){this.l[Dt]=pe[Dt];var Zt=Oe[Dt];Zt!==void 0&&(Zt.onChange&&(bt.X=Zt.onChange,bt.Y=pe[Dt],Ze.push((function(En){return function(){var Ln;return ge(function(er){if(er.h==1)return K(er,En.X(En.Y),2);Ln=er.i,Ln===!0&&(Ue.u=!0),er.h=0})}})(bt))),Zt.graphOptionXref&&(Dt=Object.assign({},{calculatorName:"",calculatorIndex:0},Zt.graphOptionXref,{valueNumber:Zt.type===1?pe[Dt]:0,valueBoolean:Zt.type===0?pe[Dt]:!1,valueString:Zt.type===2?pe[Dt]:""}),ft.push(Dt)))}(Ze.length!==0||ft.length!==0)&&(this.u=!0,this.H=(this.H===void 0?[]:this.H).concat(ft),this.F=(this.F===void 0?[]:this.F).concat(Ze))}};function pc(pe){var Oe,Ue,Ze,ft,bt,gt,Dt;return ge(function(Zt){switch(Zt.h){case 1:if(!pe.u)return Zt.return();if(!pe.F){Zt.h=2;break}Oe=w(pe.F),Ue=Oe.next();case 3:if(Ue.done){Zt.h=5;break}return Ze=Ue.value,K(Zt,Ze(),4);case 4:Ue=Oe.next(),Zt.h=3;break;case 5:pe.F=void 0;case 2:if(pe.H){for(ft=new pe.i.GraphOptionChangeRequestList,bt=w(pe.H),gt=bt.next();!gt.done;gt=bt.next())Dt=gt.value,ft.push_back(Dt);pe.j.changeOptions(ft),ft.delete(),pe.H=void 0}pe.u=!1,Zt.h=0}})}s.initialize=function(){var pe=this;return ge(function(Oe){return Oe.h==1?K(Oe,oo(pe),2):Oe.h!=3?K(Oe,kl(pe),3):K(Oe,pc(pe),0)})};function Co(pe,Oe){var Ue,Ze;return ge(function(ft){return Oe in pe.L?ft.return(pe.L[Oe]):(Ue=pe.locateFile(Oe,""),Ze=fetch(Ue).then(function(bt){return bt.arrayBuffer()}),pe.L[Oe]=Ze,ft.return(Ze))})}s.overrideFile=function(pe,Oe){this.j?this.j.overrideFile(pe,Oe):this.D[pe]=Oe},s.clearOverriddenFiles=function(){this.D={},this.j&&this.j.clearOverriddenFiles()},s.send=function(pe,Oe){var Ue=this,Ze,ft,bt,gt,Dt,Zt,En,Ln,er;return ge(function(Yn){switch(Yn.h){case 1:return Ue.h.inputs?(Ze=1e3*(Oe??performance.now()),K(Yn,Ue.I,2)):Yn.return();case 2:return K(Yn,Ue.initialize(),3);case 3:for(ft=new Ue.i.PacketDataList,bt=w(Object.keys(pe)),gt=bt.next();!gt.done;gt=bt.next())if(Dt=gt.value,Zt=Ue.h.inputs[Dt]){e:{var $n=pe[Dt];switch(Zt.type){case"video":var cr=Ue.s[Zt.stream];if(cr||(cr=new ea(Ue.i,Ue.K),Ue.s[Zt.stream]=cr),cr.m===0&&(cr.m=cr.i.createTexture()),typeof HTMLVideoElement<"u"&&$n instanceof HTMLVideoElement)var Cr=$n.videoWidth,ui=$n.videoHeight;else typeof HTMLImageElement<"u"&&$n instanceof HTMLImageElement?(Cr=$n.naturalWidth,ui=$n.naturalHeight):(Cr=$n.width,ui=$n.height);ui={glName:cr.m,width:Cr,height:ui},Cr=cr.h,Cr.canvas.width=ui.width,Cr.canvas.height=ui.height,Cr.activeTexture(Cr.TEXTURE0),cr.i.bindTexture2d(cr.m),Cr.texImage2D(Cr.TEXTURE_2D,0,Cr.RGBA,Cr.RGBA,Cr.UNSIGNED_BYTE,$n),cr.i.bindTexture2d(0),cr=ui;break e;case"detections":for(cr=Ue.s[Zt.stream],cr||(cr=new Tl(Ue.i),Ue.s[Zt.stream]=cr),cr.data||(cr.data=new cr.h.DetectionListData),cr.data.reset($n.length),ui=0;ui<$n.length;++ui){Cr=$n[ui];var Qr=cr.data,Ri=Qr.setBoundingBox,Ma=ui,qi=Cr.la,Zr=new Ns;if(Nt(Zr,1,qi.ra),Nt(Zr,2,qi.sa),Nt(Zr,3,qi.height),Nt(Zr,4,qi.width),Nt(Zr,5,qi.rotation),vn(Zr,6,qi.pa),qi=Zr.l(),Ri.call(Qr,Ma,qi),Cr.ea)for(Qr=0;Qr<Cr.ea.length;++Qr){Zr=Cr.ea[Qr],Ri=cr.data,Ma=Ri.addNormalizedLandmark,qi=ui,Zr=Object.assign({},Zr,{visibility:Zr.visibility?Zr.visibility:0});var bi=new yr;Nt(bi,1,Zr.x),Nt(bi,2,Zr.y),Nt(bi,3,Zr.z),Zr.visibility&&Nt(bi,4,Zr.visibility),Zr=bi.l(),Ma.call(Ri,qi,Zr)}if(Cr.ba)for(Qr=0;Qr<Cr.ba.length;++Qr)Ri=cr.data,Ma=Ri.addClassification,qi=ui,Zr=Cr.ba[Qr],bi=new Qn,Nt(bi,2,Zr.score),Zr.index&&vn(bi,1,Zr.index),Zr.label&&vn(bi,3,Zr.label),Zr.displayName&&vn(bi,4,Zr.displayName),Zr=bi.l(),Ma.call(Ri,qi,Zr)}cr=cr.data;break e;default:cr={}}}switch(En=cr,Ln=Zt.stream,Zt.type){case"video":ft.pushTexture2d(Object.assign({},En,{stream:Ln,timestamp:Ze}));break;case"detections":er=En,er.stream=Ln,er.timestamp=Ze,ft.pushDetectionList(er);break;default:throw Error("Unknown input config type: '"+Zt.type+"'")}}return Ue.j.send(ft),K(Yn,Ue.I,4);case 4:ft.delete(),Yn.h=0}})};function Yc(pe,Oe,Ue){var Ze,ft,bt,gt,Dt,Zt,En,Ln,er,Yn,$n,cr,Cr,ui;return ge(function(Qr){switch(Qr.h){case 1:if(!Ue)return Qr.return(Oe);for(Ze={},ft=0,bt=w(Object.keys(Ue)),gt=bt.next();!gt.done;gt=bt.next())Dt=gt.value,Zt=Ue[Dt],typeof Zt!="string"&&Zt.type==="texture"&&Oe[Zt.stream]!==void 0&&++ft;1<ft&&(pe.M=!1),En=w(Object.keys(Ue)),gt=En.next();case 2:if(gt.done){Qr.h=4;break}if(Ln=gt.value,er=Ue[Ln],typeof er=="string")return Cr=Ze,ui=Ln,K(Qr,Zc(pe,Ln,Oe[er]),14);if(Yn=Oe[er.stream],er.type==="detection_list"){if(Yn){for(var Ri=Yn.getRectList(),Ma=Yn.getLandmarksList(),qi=Yn.getClassificationsList(),Zr=[],bi=0;bi<Ri.size();++bi){var $a=ro(Ri.get(bi)),gc=dn($a,1),yc=dn($a,2),za=dn($a,3),el=dn($a,4),Kc=dn($a,5,0),Ro=void 0;Ro=Ro===void 0?0:Ro,$a={la:{ra:gc,sa:yc,height:za,width:el,rotation:Kc,pa:on(bn($a,6),Ro)},ea:It(Di(Ma.get(bi)),yr,1).map(Qi),ba:so(br(qi.get(bi)))},Zr.push($a)}Ri=Zr}else Ri=[];Ze[Ln]=Ri,Qr.h=7;break}if(er.type==="proto_list"){if(Yn){for(Ri=Array(Yn.size()),Ma=0;Ma<Yn.size();Ma++)Ri[Ma]=Yn.get(Ma);Yn.delete()}else Ri=[];Ze[Ln]=Ri,Qr.h=7;break}if(Yn===void 0){Qr.h=3;break}if(er.type==="float_list"){Ze[Ln]=Yn,Qr.h=7;break}if(er.type==="proto"){Ze[Ln]=Yn,Qr.h=7;break}if(er.type!=="texture")throw Error("Unknown output config type: '"+er.type+"'");return $n=pe.v[Ln],$n||($n=new ea(pe.i,pe.K),pe.v[Ln]=$n),K(Qr,Ua($n,Yn,pe.M),13);case 13:cr=Qr.i,Ze[Ln]=cr;case 7:er.transform&&Ze[Ln]&&(Ze[Ln]=er.transform(Ze[Ln])),Qr.h=3;break;case 14:Cr[ui]=Qr.i;case 3:gt=En.next(),Qr.h=2;break;case 4:return Qr.return(Ze)}})}function Zc(pe,Oe,Ue){var Ze;return ge(function(ft){return typeof Ue=="number"||Ue instanceof Uint8Array||Ue instanceof pe.i.Uint8BlobList?ft.return(Ue):Ue instanceof pe.i.Texture2dDataOut?(Ze=pe.v[Oe],Ze||(Ze=new ea(pe.i,pe.K),pe.v[Oe]=Ze),ft.return(Ua(Ze,Ue,pe.M))):ft.return(void 0)})}function Hu(pe,Oe){for(var Ue=Oe.name||"$",Ze=[].concat(C(Oe.wants)),ft=new pe.i.StringList,bt=w(Oe.wants),gt=bt.next();!gt.done;gt=bt.next())ft.push_back(gt.value);bt=pe.i.PacketListener.implement({onResults:function(Dt){for(var Zt={},En=0;En<Oe.wants.length;++En)Zt[Ze[En]]=Dt.get(En);var Ln=pe.listeners[Ue];Ln&&(pe.I=Yc(pe,Zt,Oe.outs).then(function(er){er=Ln(er);for(var Yn=0;Yn<Oe.wants.length;++Yn){var $n=Zt[Ze[Yn]];typeof $n=="object"&&$n.hasOwnProperty&&$n.hasOwnProperty("delete")&&$n.delete()}er&&(pe.I=er)}))}}),pe.j.attachMultiListener(ft,bt),ft.delete()}s.onResults=function(pe,Oe){this.listeners[Oe||"$"]=pe},Be("Solution",Ml),Be("OptionType",{BOOL:0,NUMBER:1,ta:2,0:"BOOL",1:"NUMBER",2:"STRING"});function ta(pe){return pe===void 0&&(pe=0),pe===1?"hand_landmark_full.tflite":"hand_landmark_lite.tflite"}function mc(pe){var Oe=this;pe=pe||{},this.h=new Ml({locateFile:pe.locateFile,files:function(Ue){return[{url:"hands_solution_packed_assets_loader.js"},{simd:!1,url:"hands_solution_wasm_bin.js"},{simd:!0,url:"hands_solution_simd_wasm_bin.js"},{data:!0,url:ta(Ue.modelComplexity)}]},graph:{url:"hands.binarypb"},inputs:{image:{type:"video",stream:"input_frames_gpu"}},listeners:[{wants:["multi_hand_landmarks","multi_hand_world_landmarks","image_transformed","multi_handedness"],outs:{image:"image_transformed",multiHandLandmarks:{type:"proto_list",stream:"multi_hand_landmarks",transform:Aa},multiHandWorldLandmarks:{type:"proto_list",stream:"multi_hand_world_landmarks",transform:Aa},multiHandedness:{type:"proto_list",stream:"multi_handedness",transform:function(Ue){return Ue.map(function(Ze){return so(br(Ze))[0]})}}}}],options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:typeof window!="object"||window.navigator===void 0?!1:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},maxNumHands:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculator",fieldName:"int_value"}},modelComplexity:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelComplexity",fieldName:"int_value"},onChange:function(Ue){var Ze,ft,bt;return ge(function(gt){return gt.h==1?(Ze=ta(Ue),ft="third_party/mediapipe/modules/hand_landmark/"+Ze,K(gt,Co(Oe.h,Ze),2)):(bt=gt.i,Oe.h.overrideFile(ft,bt),gt.return(!0))})}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"handlandmarktrackinggpu__palmdetectiongpu__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"handlandmarktrackinggpu__handlandmarkgpu__ThresholdingCalculator",fieldName:"threshold"}}}})}s=mc.prototype,s.close=function(){return this.h.close(),Promise.resolve()},s.onResults=function(pe){this.h.onResults(pe)},s.initialize=function(){var pe=this;return ge(function(Oe){return K(Oe,pe.h.initialize(),0)})},s.reset=function(){this.h.reset()},s.send=function(pe){var Oe=this;return ge(function(Ue){return K(Ue,Oe.h.send(pe),0)})},s.setOptions=function(pe){this.h.setOptions(pe)},Be("Hands",mc),Be("HAND_CONNECTIONS",[[0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[5,9],[9,10],[10,11],[11,12],[9,13],[13,14],[14,15],[15,16],[13,17],[0,17],[17,18],[18,19],[19,20]]),Be("VERSION","0.4.1675469240")}).call(hands)),hands}var handsExports=requireHands(),camera_utils={},hasRequiredCamera_utils;function requireCamera_utils(){return hasRequiredCamera_utils||(hasRequiredCamera_utils=1,(function(){function s(ne){var ge=0;return function(){return ge<ne.length?{done:!1,value:ne[ge++]}:{done:!0}}}var n=typeof Object.defineProperties=="function"?Object.defineProperty:function(ne,ge,Ee){return ne==Array.prototype||ne==Object.prototype||(ne[ge]=Ee.value),ne};function u(ne){ne=[typeof globalThis=="object"&&globalThis,ne,typeof window=="object"&&window,typeof self=="object"&&self,typeof commonjsGlobal=="object"&&commonjsGlobal];for(var ge=0;ge<ne.length;++ge){var Ee=ne[ge];if(Ee&&Ee.Math==Math)return Ee}throw Error("Cannot find global object")}var f=u(this);function y(ne,ge){if(ge)e:{var Ee=f;ne=ne.split(".");for(var we=0;we<ne.length-1;we++){var Ie=ne[we];if(!(Ie in Ee))break e;Ee=Ee[Ie]}ne=ne[ne.length-1],we=Ee[ne],ge=ge(we),ge!=we&&ge!=null&&n(Ee,ne,{configurable:!0,writable:!0,value:ge})}}y("Symbol",function(ne){function ge(Be){if(this instanceof ge)throw new TypeError("Symbol is not a constructor");return new Ee(we+(Be||"")+"_"+Ie++,Be)}function Ee(Be,Me){this.g=Be,n(this,"description",{configurable:!0,writable:!0,value:Me})}if(ne)return ne;Ee.prototype.toString=function(){return this.g};var we="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",Ie=0;return ge}),y("Symbol.iterator",function(ne){if(ne)return ne;ne=Symbol("Symbol.iterator");for(var ge="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),Ee=0;Ee<ge.length;Ee++){var we=f[ge[Ee]];typeof we=="function"&&typeof we.prototype[ne]!="function"&&n(we.prototype,ne,{configurable:!0,writable:!0,value:function(){return S(s(this))}})}return ne});function S(ne){return ne={next:ne},ne[Symbol.iterator]=function(){return this},ne}function A(ne){var ge=typeof Symbol<"u"&&Symbol.iterator&&ne[Symbol.iterator];return ge?ge.call(ne):{next:s(ne)}}function w(){this.i=!1,this.g=null,this.o=void 0,this.j=1,this.m=0,this.h=null}function C(ne){if(ne.i)throw new TypeError("Generator is already running");ne.i=!0}w.prototype.l=function(ne){this.o=ne};function T(ne,ge){ne.h={F:ge,G:!0},ne.j=ne.m}w.prototype.return=function(ne){this.h={return:ne},this.j=this.m};function R(ne){this.g=new w,this.h=ne}function I(ne,ge){C(ne.g);var Ee=ne.g.g;return Ee?N(ne,"return"in Ee?Ee.return:function(we){return{value:we,done:!0}},ge,ne.g.return):(ne.g.return(ge),L(ne))}function N(ne,ge,Ee,we){try{var Ie=ge.call(ne.g.g,Ee);if(!(Ie instanceof Object))throw new TypeError("Iterator result "+Ie+" is not an object");if(!Ie.done)return ne.g.i=!1,Ie;var Be=Ie.value}catch(Me){return ne.g.g=null,T(ne.g,Me),L(ne)}return ne.g.g=null,we.call(ne.g,Be),L(ne)}function L(ne){for(;ne.g.j;)try{var ge=ne.h(ne.g);if(ge)return ne.g.i=!1,{value:ge.value,done:!1}}catch(Ee){ne.g.o=void 0,T(ne.g,Ee)}if(ne.g.i=!1,ne.g.h){if(ge=ne.g.h,ne.g.h=null,ge.G)throw ge.F;return{value:ge.return,done:!0}}return{value:void 0,done:!0}}function F(ne){this.next=function(ge){return C(ne.g),ne.g.g?ge=N(ne,ne.g.g.next,ge,ne.g.l):(ne.g.l(ge),ge=L(ne)),ge},this.throw=function(ge){return C(ne.g),ne.g.g?ge=N(ne,ne.g.g.throw,ge,ne.g.l):(T(ne.g,ge),ge=L(ne)),ge},this.return=function(ge){return I(ne,ge)},this[Symbol.iterator]=function(){return this}}function H(ne){function ge(we){return ne.next(we)}function Ee(we){return ne.throw(we)}return new Promise(function(we,Ie){function Be(Me){Me.done?we(Me.value):Promise.resolve(Me.value).then(ge,Ee).then(Be,Ie)}Be(ne.next())})}y("Promise",function(ne){function ge(Me){this.h=0,this.i=void 0,this.g=[],this.o=!1;var Re=this.j();try{Me(Re.resolve,Re.reject)}catch(Te){Re.reject(Te)}}function Ee(){this.g=null}function we(Me){return Me instanceof ge?Me:new ge(function(Re){Re(Me)})}if(ne)return ne;Ee.prototype.h=function(Me){if(this.g==null){this.g=[];var Re=this;this.i(function(){Re.l()})}this.g.push(Me)};var Ie=f.setTimeout;Ee.prototype.i=function(Me){Ie(Me,0)},Ee.prototype.l=function(){for(;this.g&&this.g.length;){var Me=this.g;this.g=[];for(var Re=0;Re<Me.length;++Re){var Te=Me[Re];Me[Re]=null;try{Te()}catch(Se){this.j(Se)}}}this.g=null},Ee.prototype.j=function(Me){this.i(function(){throw Me})},ge.prototype.j=function(){function Me(Se){return function(oe){Te||(Te=!0,Se.call(Re,oe))}}var Re=this,Te=!1;return{resolve:Me(this.A),reject:Me(this.l)}},ge.prototype.A=function(Me){if(Me===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(Me instanceof ge)this.C(Me);else{e:switch(typeof Me){case"object":var Re=Me!=null;break e;case"function":Re=!0;break e;default:Re=!1}Re?this.v(Me):this.m(Me)}},ge.prototype.v=function(Me){var Re=void 0;try{Re=Me.then}catch(Te){this.l(Te);return}typeof Re=="function"?this.D(Re,Me):this.m(Me)},ge.prototype.l=function(Me){this.u(2,Me)},ge.prototype.m=function(Me){this.u(1,Me)},ge.prototype.u=function(Me,Re){if(this.h!=0)throw Error("Cannot settle("+Me+", "+Re+"): Promise already settled in state"+this.h);this.h=Me,this.i=Re,this.h===2&&this.B(),this.H()},ge.prototype.B=function(){var Me=this;Ie(function(){if(Me.I()){var Re=f.console;typeof Re<"u"&&Re.error(Me.i)}},1)},ge.prototype.I=function(){if(this.o)return!1;var Me=f.CustomEvent,Re=f.Event,Te=f.dispatchEvent;return typeof Te>"u"?!0:(typeof Me=="function"?Me=new Me("unhandledrejection",{cancelable:!0}):typeof Re=="function"?Me=new Re("unhandledrejection",{cancelable:!0}):(Me=f.document.createEvent("CustomEvent"),Me.initCustomEvent("unhandledrejection",!1,!0,Me)),Me.promise=this,Me.reason=this.i,Te(Me))},ge.prototype.H=function(){if(this.g!=null){for(var Me=0;Me<this.g.length;++Me)Be.h(this.g[Me]);this.g=null}};var Be=new Ee;return ge.prototype.C=function(Me){var Re=this.j();Me.s(Re.resolve,Re.reject)},ge.prototype.D=function(Me,Re){var Te=this.j();try{Me.call(Re,Te.resolve,Te.reject)}catch(Se){Te.reject(Se)}},ge.prototype.then=function(Me,Re){function Te(be,he){return typeof be=="function"?function(ue){try{Se(be(ue))}catch(ye){oe(ye)}}:he}var Se,oe,ae=new ge(function(be,he){Se=be,oe=he});return this.s(Te(Me,Se),Te(Re,oe)),ae},ge.prototype.catch=function(Me){return this.then(void 0,Me)},ge.prototype.s=function(Me,Re){function Te(){switch(Se.h){case 1:Me(Se.i);break;case 2:Re(Se.i);break;default:throw Error("Unexpected state: "+Se.h)}}var Se=this;this.g==null?Be.h(Te):this.g.push(Te),this.o=!0},ge.resolve=we,ge.reject=function(Me){return new ge(function(Re,Te){Te(Me)})},ge.race=function(Me){return new ge(function(Re,Te){for(var Se=A(Me),oe=Se.next();!oe.done;oe=Se.next())we(oe.value).s(Re,Te)})},ge.all=function(Me){var Re=A(Me),Te=Re.next();return Te.done?we([]):new ge(function(Se,oe){function ae(ue){return function(ye){be[ue]=ye,he--,he==0&&Se(be)}}var be=[],he=0;do be.push(void 0),he++,we(Te.value).s(ae(be.length-1),oe),Te=Re.next();while(!Te.done)})},ge});var z=typeof Object.assign=="function"?Object.assign:function(ne,ge){for(var Ee=1;Ee<arguments.length;Ee++){var we=arguments[Ee];if(we)for(var Ie in we)Object.prototype.hasOwnProperty.call(we,Ie)&&(ne[Ie]=we[Ie])}return ne};y("Object.assign",function(ne){return ne||z});var U=this||self,G={facingMode:"user",width:640,height:480};function Y(ne,ge){this.video=ne,this.i=0,this.h=Object.assign(Object.assign({},G),ge)}Y.prototype.stop=function(){var ne=this,ge,Ee,we,Ie;return H(new F(new R(function(Be){if(ne.g){for(ge=ne.g.getTracks(),Ee=A(ge),we=Ee.next();!we.done;we=Ee.next())Ie=we.value,Ie.stop();ne.g=void 0}Be.j=0})))},Y.prototype.start=function(){var ne=this,ge;return H(new F(new R(function(Ee){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||alert("No navigator.mediaDevices.getUserMedia exists."),ge=ne.h,Ee.return(navigator.mediaDevices.getUserMedia({video:{facingMode:ge.facingMode,width:ge.width,height:ge.height}}).then(function(we){Z(ne,we)}).catch(function(we){var Ie="Failed to acquire camera feed: "+we;throw console.error(Ie),alert(Ie),we}))})))};function K(ne){window.requestAnimationFrame(function(){J(ne)})}function Z(ne,ge){ne.g=ge,ne.video.srcObject=ge,ne.video.onloadedmetadata=function(){ne.video.play(),K(ne)}}function J(ne){var ge=null;ne.video.paused||ne.video.currentTime===ne.i||(ne.i=ne.video.currentTime,ge=ne.h.onFrame()),ge?ge.then(function(){K(ne)}):K(ne)}var te=["Camera"],de=U;te[0]in de||typeof de.execScript>"u"||de.execScript("var "+te[0]);for(var se;te.length&&(se=te.shift());)te.length||Y===void 0?de[se]&&de[se]!==Object.prototype[se]?de=de[se]:de=de[se]={}:de[se]=Y}).call(camera_utils)),camera_utils}var camera_utilsExports=requireCamera_utils();const createStoreImpl=s=>{let n;const u=new Set,f=(T,R)=>{const I=typeof T=="function"?T(n):T;if(!Object.is(I,n)){const N=n;n=R??(typeof I!="object"||I===null)?I:Object.assign({},n,I),u.forEach(L=>L(n,N))}},y=()=>n,w={setState:f,getState:y,getInitialState:()=>C,subscribe:T=>(u.add(T),()=>u.delete(T))},C=n=s(f,y,w);return w},createStore$1=(s=>s?createStoreImpl(s):createStoreImpl),identity$1=s=>s;function useStore$2(s,n=identity$1){const u=React.useSyncExternalStore(s.subscribe,React.useCallback(()=>n(s.getState()),[s,n]),React.useCallback(()=>n(s.getInitialState()),[s,n]));return React.useDebugValue(u),u}const createImpl=s=>{const n=createStore$1(s),u=f=>useStore$2(n,f);return Object.assign(u,n),u},create$2=(s=>s?createImpl(s):createImpl),isTVBrowser=()=>{if(typeof window>"u")return!1;const s=window.navigator.userAgent.toLowerCase();return["smart-tv","smarttv","appletv","tvos","tizen","webos","netcast","googletv","tsbnettv","hbbtv","viera","smart hub","sony","bravia","roku","firetv","aftt","afts","aftm","aftb","hisense","vidaa","smart-tv","crkey","linux armv7l","tv"].some(u=>s.includes(u))},initialHand={present:!1,x:.5,y:.5,z:0,scale:0,gesture:"IDLE",landmarks:[]},initialFace={present:!1,x:.5,y:.5,z:0,rotationY:0,rotationX:0,leftEyeOpen:1,rightEyeOpen:1,iris:{x:0,y:0},gesture:"IDLE"},searchParams=new URLSearchParams(typeof window<"u"?window.location.search:""),initialScene=searchParams.get("scene")||"dashboard",useStore$1=create$2(s=>({hands:{left:{...initialHand},right:{...initialHand}},face:{...initialFace},lastHandActivity:Date.now(),hoveredObject:null,dwellProgress:0,selectedObject:null,trackingMode:isTVBrowser()?"TV":"EYE",tvCursor:{x:.5,y:.5},tvControlMode:"CURSOR",tvOrbitInput:{dx:0,dy:0},joystickInput:{x:0,y:0},scene:initialScene,hdMode:!1,showWebPanel:!0,showVideoPanel:!1,showChessAssistant:!0,showAnimeAssistant:!0,showRealisticAssistant:!0,clampSensibility:1,isSettingsOpen:!1,isSettingsOverlayOpen:!1,gravity:1,minHeight:1.5,cameraGoal:null,debugCameraState:null,setTrackingMode:n=>s({trackingMode:n}),setTvCursor:n=>s({tvCursor:n}),setTvControlMode:n=>s({tvControlMode:n}),setTvOrbitInput:n=>s({tvOrbitInput:n}),setJoystickInput:n=>s({joystickInput:n}),setHdMode:n=>s({hdMode:n}),setShowWebPanel:n=>s({showWebPanel:n}),setShowVideoPanel:n=>s({showVideoPanel:n}),setShowChessAssistant:n=>s({showChessAssistant:n}),setShowAnimeAssistant:n=>s({showAnimeAssistant:n}),setShowRealisticAssistant:n=>s({showRealisticAssistant:n}),setClampSensibility:n=>s({clampSensibility:n}),setSettingsOpen:n=>s({isSettingsOpen:n}),setSettingsOverlayOpen:n=>s({isSettingsOverlayOpen:n}),setGravity:n=>s({gravity:n}),setMinHeight:n=>s({minHeight:n}),setCameraGoal:n=>s({cameraGoal:n}),setDebugCameraState:n=>s({debugCameraState:n}),setScene:n=>{if(typeof window<"u"){const u=new URL(window.location.href);u.searchParams.set("scene",n),window.history.pushState({},"",u.toString())}s({scene:n})},setHand:(n,u)=>s(f=>{const y=u.present!==!1;return{hands:{...f.hands,[n]:{...f.hands[n],...u}},lastHandActivity:y?Date.now():f.lastHandActivity}}),setFace:n=>s(u=>({face:{...u.face,...n}})),setDwellProgress:n=>s({dwellProgress:n}),setHovered:n=>s({hoveredObject:n}),setSelected:n=>s({selectedObject:n})})),useHandTracking=s=>{const n=useStore$1(A=>A.setHand),u=useStore$1(A=>A.trackingMode),f=useStore$1(A=>A.hdMode),[y,S]=reactExports.useState(!1);return reactExports.useEffect(()=>{if(!s||u!=="HAND"){S(!1);return}const A=new handsExports.Hands({locateFile:C=>`https://cdn.jsdelivr.net/npm/@mediapipe/hands/${C}`});A.setOptions({maxNumHands:2,modelComplexity:f?1:0,minDetectionConfidence:.5,minTrackingConfidence:.5}),A.onResults(C=>{const{multiHandLandmarks:T,multiHandedness:R}=C;let I=!1,N=!1;T&&R&&T.forEach((L,F)=>{const z=R[F].label,U=L[8],G=L[4],Y=L[0],K=L[9],J=Math.hypot(U.x-G.x,U.y-G.y)<.015,te=Math.hypot(Y.x-K.x,Y.y-K.y),de={present:!0,x:U.x,y:U.y,z:U.z,scale:te,gesture:J?"PINCH":"IDLE",landmarks:L};z==="Left"?(n("right",de),N=!0):(n("left",de),I=!0)}),I||n("left",{present:!1,landmarks:[]}),N||n("right",{present:!1,landmarks:[]})});const w=new camera_utilsExports.Camera(s,{onFrame:async()=>{useStore$1.getState().trackingMode==="HAND"&&await A.send({image:s})},width:f?1280:640,height:f?720:480});return w.start().then(()=>{S(!0)}),()=>{w.stop(),A.close(),S(!1)}},[s,n,u,f]),{isReady:y}};var face_mesh={},hasRequiredFace_mesh;function requireFace_mesh(){return hasRequiredFace_mesh||(hasRequiredFace_mesh=1,(function(){var s;function n(Ce){var Fe=0;return function(){return Fe<Ce.length?{done:!1,value:Ce[Fe++]}:{done:!0}}}var u=typeof Object.defineProperties=="function"?Object.defineProperty:function(Ce,Fe,Ve){return Ce==Array.prototype||Ce==Object.prototype||(Ce[Fe]=Ve.value),Ce};function f(Ce){Ce=[typeof globalThis=="object"&&globalThis,Ce,typeof window=="object"&&window,typeof self=="object"&&self,typeof commonjsGlobal=="object"&&commonjsGlobal];for(var Fe=0;Fe<Ce.length;++Fe){var Ve=Ce[Fe];if(Ve&&Ve.Math==Math)return Ve}throw Error("Cannot find global object")}var y=f(this);function S(Ce,Fe){if(Fe)e:{var Ve=y;Ce=Ce.split(".");for(var mt=0;mt<Ce.length-1;mt++){var Pt=Ce[mt];if(!(Pt in Ve))break e;Ve=Ve[Pt]}Ce=Ce[Ce.length-1],mt=Ve[Ce],Fe=Fe(mt),Fe!=mt&&Fe!=null&&u(Ve,Ce,{configurable:!0,writable:!0,value:Fe})}}S("Symbol",function(Ce){function Fe(an){if(this instanceof Fe)throw new TypeError("Symbol is not a constructor");return new Ve(mt+(an||"")+"_"+Pt++,an)}function Ve(an,zt){this.g=an,u(this,"description",{configurable:!0,writable:!0,value:zt})}if(Ce)return Ce;Ve.prototype.toString=function(){return this.g};var mt="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",Pt=0;return Fe}),S("Symbol.iterator",function(Ce){if(Ce)return Ce;Ce=Symbol("Symbol.iterator");for(var Fe="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),Ve=0;Ve<Fe.length;Ve++){var mt=y[Fe[Ve]];typeof mt=="function"&&typeof mt.prototype[Ce]!="function"&&u(mt.prototype,Ce,{configurable:!0,writable:!0,value:function(){return A(n(this))}})}return Ce});function A(Ce){return Ce={next:Ce},Ce[Symbol.iterator]=function(){return this},Ce}function w(Ce){var Fe=typeof Symbol<"u"&&Symbol.iterator&&Ce[Symbol.iterator];return Fe?Fe.call(Ce):{next:n(Ce)}}function C(Ce){if(!(Ce instanceof Array)){Ce=w(Ce);for(var Fe,Ve=[];!(Fe=Ce.next()).done;)Ve.push(Fe.value);Ce=Ve}return Ce}var T=typeof Object.create=="function"?Object.create:function(Ce){function Fe(){}return Fe.prototype=Ce,new Fe},R;if(typeof Object.setPrototypeOf=="function")R=Object.setPrototypeOf;else{var I;e:{var N={a:!0},L={};try{L.__proto__=N,I=L.a;break e}catch{}I=!1}R=I?function(Ce,Fe){if(Ce.__proto__=Fe,Ce.__proto__!==Fe)throw new TypeError(Ce+" is not extensible");return Ce}:null}var F=R;function H(Ce,Fe){if(Ce.prototype=T(Fe.prototype),Ce.prototype.constructor=Ce,F)F(Ce,Fe);else for(var Ve in Fe)if(Ve!="prototype")if(Object.defineProperties){var mt=Object.getOwnPropertyDescriptor(Fe,Ve);mt&&Object.defineProperty(Ce,Ve,mt)}else Ce[Ve]=Fe[Ve];Ce.ea=Fe.prototype}function z(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.s=this.m=0,this.j=null}function U(Ce){if(Ce.l)throw new TypeError("Generator is already running");Ce.l=!0}z.prototype.o=function(Ce){this.h=Ce};function G(Ce,Fe){Ce.j={U:Fe,V:!0},Ce.g=Ce.m||Ce.s}z.prototype.return=function(Ce){this.j={return:Ce},this.g=this.s};function Y(Ce,Fe,Ve){return Ce.g=Ve,{value:Fe}}function K(Ce){this.g=new z,this.h=Ce}function Z(Ce,Fe){U(Ce.g);var Ve=Ce.g.i;return Ve?J(Ce,"return"in Ve?Ve.return:function(mt){return{value:mt,done:!0}},Fe,Ce.g.return):(Ce.g.return(Fe),te(Ce))}function J(Ce,Fe,Ve,mt){try{var Pt=Fe.call(Ce.g.i,Ve);if(!(Pt instanceof Object))throw new TypeError("Iterator result "+Pt+" is not an object");if(!Pt.done)return Ce.g.l=!1,Pt;var an=Pt.value}catch(zt){return Ce.g.i=null,G(Ce.g,zt),te(Ce)}return Ce.g.i=null,mt.call(Ce.g,an),te(Ce)}function te(Ce){for(;Ce.g.g;)try{var Fe=Ce.h(Ce.g);if(Fe)return Ce.g.l=!1,{value:Fe.value,done:!1}}catch(Ve){Ce.g.h=void 0,G(Ce.g,Ve)}if(Ce.g.l=!1,Ce.g.j){if(Fe=Ce.g.j,Ce.g.j=null,Fe.V)throw Fe.U;return{value:Fe.return,done:!0}}return{value:void 0,done:!0}}function de(Ce){this.next=function(Fe){return U(Ce.g),Ce.g.i?Fe=J(Ce,Ce.g.i.next,Fe,Ce.g.o):(Ce.g.o(Fe),Fe=te(Ce)),Fe},this.throw=function(Fe){return U(Ce.g),Ce.g.i?Fe=J(Ce,Ce.g.i.throw,Fe,Ce.g.o):(G(Ce.g,Fe),Fe=te(Ce)),Fe},this.return=function(Fe){return Z(Ce,Fe)},this[Symbol.iterator]=function(){return this}}function se(Ce,Fe){return Fe=new de(new K(Fe)),F&&Ce.prototype&&F(Fe,Ce.prototype),Fe}function ne(Ce,Fe){Ce instanceof String&&(Ce+="");var Ve=0,mt=!1,Pt={next:function(){if(!mt&&Ve<Ce.length){var an=Ve++;return{value:Fe(an,Ce[an]),done:!1}}return mt=!0,{done:!0,value:void 0}}};return Pt[Symbol.iterator]=function(){return Pt},Pt}var ge=typeof Object.assign=="function"?Object.assign:function(Ce,Fe){for(var Ve=1;Ve<arguments.length;Ve++){var mt=arguments[Ve];if(mt)for(var Pt in mt)Object.prototype.hasOwnProperty.call(mt,Pt)&&(Ce[Pt]=mt[Pt])}return Ce};S("Object.assign",function(Ce){return Ce||ge}),S("Promise",function(Ce){function Fe(zt){this.h=0,this.i=void 0,this.g=[],this.o=!1;var sn=this.j();try{zt(sn.resolve,sn.reject)}catch(xn){sn.reject(xn)}}function Ve(){this.g=null}function mt(zt){return zt instanceof Fe?zt:new Fe(function(sn){sn(zt)})}if(Ce)return Ce;Ve.prototype.h=function(zt){if(this.g==null){this.g=[];var sn=this;this.i(function(){sn.l()})}this.g.push(zt)};var Pt=y.setTimeout;Ve.prototype.i=function(zt){Pt(zt,0)},Ve.prototype.l=function(){for(;this.g&&this.g.length;){var zt=this.g;this.g=[];for(var sn=0;sn<zt.length;++sn){var xn=zt[sn];zt[sn]=null;try{xn()}catch(Un){this.j(Un)}}}this.g=null},Ve.prototype.j=function(zt){this.i(function(){throw zt})},Fe.prototype.j=function(){function zt(Un){return function(tr){xn||(xn=!0,Un.call(sn,tr))}}var sn=this,xn=!1;return{resolve:zt(this.C),reject:zt(this.l)}},Fe.prototype.C=function(zt){if(zt===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(zt instanceof Fe)this.F(zt);else{e:switch(typeof zt){case"object":var sn=zt!=null;break e;case"function":sn=!0;break e;default:sn=!1}sn?this.u(zt):this.m(zt)}},Fe.prototype.u=function(zt){var sn=void 0;try{sn=zt.then}catch(xn){this.l(xn);return}typeof sn=="function"?this.G(sn,zt):this.m(zt)},Fe.prototype.l=function(zt){this.s(2,zt)},Fe.prototype.m=function(zt){this.s(1,zt)},Fe.prototype.s=function(zt,sn){if(this.h!=0)throw Error("Cannot settle("+zt+", "+sn+"): Promise already settled in state"+this.h);this.h=zt,this.i=sn,this.h===2&&this.D(),this.A()},Fe.prototype.D=function(){var zt=this;Pt(function(){if(zt.B()){var sn=y.console;typeof sn<"u"&&sn.error(zt.i)}},1)},Fe.prototype.B=function(){if(this.o)return!1;var zt=y.CustomEvent,sn=y.Event,xn=y.dispatchEvent;return typeof xn>"u"?!0:(typeof zt=="function"?zt=new zt("unhandledrejection",{cancelable:!0}):typeof sn=="function"?zt=new sn("unhandledrejection",{cancelable:!0}):(zt=y.document.createEvent("CustomEvent"),zt.initCustomEvent("unhandledrejection",!1,!0,zt)),zt.promise=this,zt.reason=this.i,xn(zt))},Fe.prototype.A=function(){if(this.g!=null){for(var zt=0;zt<this.g.length;++zt)an.h(this.g[zt]);this.g=null}};var an=new Ve;return Fe.prototype.F=function(zt){var sn=this.j();zt.J(sn.resolve,sn.reject)},Fe.prototype.G=function(zt,sn){var xn=this.j();try{zt.call(sn,xn.resolve,xn.reject)}catch(Un){xn.reject(Un)}},Fe.prototype.then=function(zt,sn){function xn(lr,Xn){return typeof lr=="function"?function(Fn){try{Un(lr(Fn))}catch(Hn){tr(Hn)}}:Xn}var Un,tr,Tr=new Fe(function(lr,Xn){Un=lr,tr=Xn});return this.J(xn(zt,Un),xn(sn,tr)),Tr},Fe.prototype.catch=function(zt){return this.then(void 0,zt)},Fe.prototype.J=function(zt,sn){function xn(){switch(Un.h){case 1:zt(Un.i);break;case 2:sn(Un.i);break;default:throw Error("Unexpected state: "+Un.h)}}var Un=this;this.g==null?an.h(xn):this.g.push(xn),this.o=!0},Fe.resolve=mt,Fe.reject=function(zt){return new Fe(function(sn,xn){xn(zt)})},Fe.race=function(zt){return new Fe(function(sn,xn){for(var Un=w(zt),tr=Un.next();!tr.done;tr=Un.next())mt(tr.value).J(sn,xn)})},Fe.all=function(zt){var sn=w(zt),xn=sn.next();return xn.done?mt([]):new Fe(function(Un,tr){function Tr(Fn){return function(Hn){lr[Fn]=Hn,Xn--,Xn==0&&Un(lr)}}var lr=[],Xn=0;do lr.push(void 0),Xn++,mt(xn.value).J(Tr(lr.length-1),tr),xn=sn.next();while(!xn.done)})},Fe}),S("Object.is",function(Ce){return Ce||function(Fe,Ve){return Fe===Ve?Fe!==0||1/Fe===1/Ve:Fe!==Fe&&Ve!==Ve}}),S("Array.prototype.includes",function(Ce){return Ce||function(Fe,Ve){var mt=this;mt instanceof String&&(mt=String(mt));var Pt=mt.length;for(Ve=Ve||0,0>Ve&&(Ve=Math.max(Ve+Pt,0));Ve<Pt;Ve++){var an=mt[Ve];if(an===Fe||Object.is(an,Fe))return!0}return!1}}),S("String.prototype.includes",function(Ce){return Ce||function(Fe,Ve){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(Fe instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(Fe,Ve||0)!==-1}}),S("Array.prototype.keys",function(Ce){return Ce||function(){return ne(this,function(Fe){return Fe})}});var Ee=this||self;function we(Ce,Fe){Ce=Ce.split(".");var Ve=Ee;Ce[0]in Ve||typeof Ve.execScript>"u"||Ve.execScript("var "+Ce[0]);for(var mt;Ce.length&&(mt=Ce.shift());)Ce.length||Fe===void 0?Ve[mt]&&Ve[mt]!==Object.prototype[mt]?Ve=Ve[mt]:Ve=Ve[mt]={}:Ve[mt]=Fe}function Ie(Ce,Fe){return Fe=String.fromCharCode.apply(null,Fe),Ce==null?Fe:Ce+Fe}var Be,Me=typeof TextDecoder<"u",Re,Te=typeof TextEncoder<"u";function Se(Ce){if(Te)Ce=(Re||(Re=new TextEncoder)).encode(Ce);else{var Fe=void 0;Fe=Fe===void 0?!1:Fe;for(var Ve=0,mt=new Uint8Array(3*Ce.length),Pt=0;Pt<Ce.length;Pt++){var an=Ce.charCodeAt(Pt);if(128>an)mt[Ve++]=an;else{if(2048>an)mt[Ve++]=an>>6|192;else{if(55296<=an&&57343>=an){if(56319>=an&&Pt<Ce.length){var zt=Ce.charCodeAt(++Pt);if(56320<=zt&&57343>=zt){an=1024*(an-55296)+zt-56320+65536,mt[Ve++]=an>>18|240,mt[Ve++]=an>>12&63|128,mt[Ve++]=an>>6&63|128,mt[Ve++]=an&63|128;continue}else Pt--}if(Fe)throw Error("Found an unpaired surrogate");an=65533}mt[Ve++]=an>>12|224,mt[Ve++]=an>>6&63|128}mt[Ve++]=an&63|128}}Ce=mt.subarray(0,Ve)}return Ce}var oe={},ae=null;function be(Ce,Fe){Fe===void 0&&(Fe=0),ye(),Fe=oe[Fe];for(var Ve=Array(Math.floor(Ce.length/3)),mt=Fe[64]||"",Pt=0,an=0;Pt<Ce.length-2;Pt+=3){var zt=Ce[Pt],sn=Ce[Pt+1],xn=Ce[Pt+2],Un=Fe[zt>>2];zt=Fe[(zt&3)<<4|sn>>4],sn=Fe[(sn&15)<<2|xn>>6],xn=Fe[xn&63],Ve[an++]=Un+zt+sn+xn}switch(Un=0,xn=mt,Ce.length-Pt){case 2:Un=Ce[Pt+1],xn=Fe[(Un&15)<<2]||mt;case 1:Ce=Ce[Pt],Ve[an]=Fe[Ce>>2]+Fe[(Ce&3)<<4|Un>>4]+xn+mt}return Ve.join("")}function he(Ce){var Fe=Ce.length,Ve=3*Fe/4;Ve%3?Ve=Math.floor(Ve):"=.".indexOf(Ce[Fe-1])!=-1&&(Ve="=.".indexOf(Ce[Fe-2])!=-1?Ve-2:Ve-1);var mt=new Uint8Array(Ve),Pt=0;return ue(Ce,function(an){mt[Pt++]=an}),mt.subarray(0,Pt)}function ue(Ce,Fe){function Ve(xn){for(;mt<Ce.length;){var Un=Ce.charAt(mt++),tr=ae[Un];if(tr!=null)return tr;if(!/^[\s\xa0]*$/.test(Un))throw Error("Unknown base64 encoding at char: "+Un)}return xn}ye();for(var mt=0;;){var Pt=Ve(-1),an=Ve(0),zt=Ve(64),sn=Ve(64);if(sn===64&&Pt===-1)break;Fe(Pt<<2|an>>4),zt!=64&&(Fe(an<<4&240|zt>>2),sn!=64&&Fe(zt<<6&192|sn))}}function ye(){if(!ae){ae={};for(var Ce="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),Fe=["+/=","+/","-_=","-_.","-_"],Ve=0;5>Ve;Ve++){var mt=Ce.concat(Fe[Ve].split(""));oe[Ve]=mt;for(var Pt=0;Pt<mt.length;Pt++){var an=mt[Pt];ae[an]===void 0&&(ae[an]=Pt)}}}}var ce=typeof Uint8Array.prototype.slice=="function",_e;function ke(Ce,Fe,Ve){return Fe===Ve?_e||(_e=new Uint8Array(0)):ce?Ce.slice(Fe,Ve):new Uint8Array(Ce.subarray(Fe,Ve))}var Pe=0,$e=0;function xe(Ce,Fe){Fe=Fe===void 0?{}:Fe,Fe=Fe.v===void 0?!1:Fe.v,this.h=null,this.g=this.j=this.l=0,this.m=!1,this.v=Fe,Ce&&Ne(this,Ce)}function Ne(Ce,Fe){Fe=Fe.constructor===Uint8Array?Fe:Fe.constructor===ArrayBuffer?new Uint8Array(Fe):Fe.constructor===Array?new Uint8Array(Fe):Fe.constructor===String?he(Fe):Fe instanceof Uint8Array?new Uint8Array(Fe.buffer,Fe.byteOffset,Fe.byteLength):new Uint8Array(0),Ce.h=Fe,Ce.l=0,Ce.j=Ce.h.length,Ce.g=Ce.l}xe.prototype.reset=function(){this.g=this.l};function je(Ce){for(var Fe=128,Ve=0,mt=0,Pt=0;4>Pt&&128<=Fe;Pt++)Fe=Ce.h[Ce.g++],Ve|=(Fe&127)<<7*Pt;if(128<=Fe&&(Fe=Ce.h[Ce.g++],Ve|=(Fe&127)<<28,mt|=(Fe&127)>>4),128<=Fe)for(Pt=0;5>Pt&&128<=Fe;Pt++)Fe=Ce.h[Ce.g++],mt|=(Fe&127)<<7*Pt+3;if(128>Fe)return Ce=Ve>>>0,Fe=mt>>>0,(mt=Fe&2147483648)&&(Ce=~Ce+1>>>0,Fe=~Fe>>>0,Ce==0&&(Fe=Fe+1>>>0)),Ce=4294967296*Fe+(Ce>>>0),mt?-Ce:Ce;Ce.m=!0}xe.prototype.i=function(){var Ce=this.h,Fe=Ce[this.g],Ve=Fe&127;return 128>Fe?(this.g+=1,Ve):(Fe=Ce[this.g+1],Ve|=(Fe&127)<<7,128>Fe?(this.g+=2,Ve):(Fe=Ce[this.g+2],Ve|=(Fe&127)<<14,128>Fe?(this.g+=3,Ve):(Fe=Ce[this.g+3],Ve|=(Fe&127)<<21,128>Fe?(this.g+=4,Ve):(Fe=Ce[this.g+4],Ve|=(Fe&15)<<28,128>Fe?(this.g+=5,Ve>>>0):(this.g+=5,128<=Ce[this.g++]&&128<=Ce[this.g++]&&128<=Ce[this.g++]&&128<=Ce[this.g++]&&this.g++,Ve)))))},xe.prototype.o=function(){var Ce=this.h[this.g],Fe=this.h[this.g+1],Ve=this.h[this.g+2],mt=this.h[this.g+3];return this.g+=4,Ve=(Ce<<0|Fe<<8|Ve<<16|mt<<24)>>>0,Ce=2*(Ve>>31)+1,Fe=Ve>>>23&255,Ve&=8388607,Fe==255?Ve?NaN:1/0*Ce:Fe==0?Ce*Math.pow(2,-149)*Ve:Ce*Math.pow(2,Fe-150)*(Ve+Math.pow(2,23))};var He=[];function Ye(){this.g=new Uint8Array(64),this.h=0}Ye.prototype.push=function(Ce){if(!(this.h+1<this.g.length)){var Fe=this.g;this.g=new Uint8Array(Math.ceil(1+2*this.g.length)),this.g.set(Fe)}this.g[this.h++]=Ce},Ye.prototype.length=function(){return this.h},Ye.prototype.end=function(){var Ce=this.g,Fe=this.h;return this.h=0,ke(Ce,0,Fe)};function Je(Ce,Fe){for(;127<Fe;)Ce.push(Fe&127|128),Fe>>>=7;Ce.push(Fe)}function ot(Ce){var Fe={},Ve=Fe.N===void 0?!1:Fe.N;this.o={v:Fe.v===void 0?!1:Fe.v},this.N=Ve,Fe=this.o,He.length?(Ve=He.pop(),Fe&&(Ve.v=Fe.v),Ce&&Ne(Ve,Ce),Ce=Ve):Ce=new xe(Ce,Fe),this.g=Ce,this.m=this.g.g,this.h=this.i=this.l=-1,this.j=!1}ot.prototype.reset=function(){this.g.reset(),this.h=this.l=-1};function ze(Ce){var Fe=Ce.g;if((Fe=Fe.g==Fe.j)||(Fe=Ce.j)||(Fe=Ce.g,Fe=Fe.m||0>Fe.g||Fe.g>Fe.j),Fe)return!1;Ce.m=Ce.g.g,Fe=Ce.g.i();var Ve=Fe&7;return Ve!=0&&Ve!=5&&Ve!=1&&Ve!=2&&Ve!=3&&Ve!=4?(Ce.j=!0,!1):(Ce.i=Fe,Ce.l=Fe>>>3,Ce.h=Ve,!0)}function pt(Ce){switch(Ce.h){case 0:if(Ce.h!=0)pt(Ce);else{for(Ce=Ce.g;Ce.h[Ce.g]&128;)Ce.g++;Ce.g++}break;case 1:Ce.h!=1?pt(Ce):(Ce=Ce.g,Ce.g+=8);break;case 2:if(Ce.h!=2)pt(Ce);else{var Fe=Ce.g.i();Ce=Ce.g,Ce.g+=Fe}break;case 5:Ce.h!=5?pt(Ce):(Ce=Ce.g,Ce.g+=4);break;case 3:Fe=Ce.l;do{if(!ze(Ce)){Ce.j=!0;break}if(Ce.h==4){Ce.l!=Fe&&(Ce.j=!0);break}pt(Ce)}while(!0);break;default:Ce.j=!0}}function yt(Ce,Fe,Ve){var mt=Ce.g.j,Pt=Ce.g.i(),an=Ce.g.g+Pt;if(Ce.g.j=an,Ve(Fe,Ce),Ve=an-Ce.g.g,Ve!==0)throw Error("Message parsing ended unexpectedly. Expected to read "+Pt+" bytes, instead read "+(Pt-Ve)+" bytes, either the data ended unexpectedly or the message misreported its own length");return Ce.g.g=an,Ce.g.j=mt,Fe}function ut(Ce){return Ce.g.o()}function Et(Ce){var Fe=Ce.g.i();Ce=Ce.g;var Ve=Ce.g;Ce.g+=Fe,Ce=Ce.h;var mt;if(Me)(mt=Be)||(mt=Be=new TextDecoder("utf-8",{fatal:!1})),mt=mt.decode(Ce.subarray(Ve,Ve+Fe));else{Fe=Ve+Fe;for(var Pt=[],an=null,zt,sn,xn;Ve<Fe;)zt=Ce[Ve++],128>zt?Pt.push(zt):224>zt?Ve>=Fe?Pt.push(65533):(sn=Ce[Ve++],194>zt||(sn&192)!==128?(Ve--,Pt.push(65533)):Pt.push((zt&31)<<6|sn&63)):240>zt?Ve>=Fe-1?Pt.push(65533):(sn=Ce[Ve++],(sn&192)!==128||zt===224&&160>sn||zt===237&&160<=sn||((mt=Ce[Ve++])&192)!==128?(Ve--,Pt.push(65533)):Pt.push((zt&15)<<12|(sn&63)<<6|mt&63)):244>=zt?Ve>=Fe-2?Pt.push(65533):(sn=Ce[Ve++],(sn&192)!==128||(zt<<28)+(sn-144)>>30!==0||((mt=Ce[Ve++])&192)!==128||((xn=Ce[Ve++])&192)!==128?(Ve--,Pt.push(65533)):(zt=(zt&7)<<18|(sn&63)<<12|(mt&63)<<6|xn&63,zt-=65536,Pt.push((zt>>10&1023)+55296,(zt&1023)+56320))):Pt.push(65533),8192<=Pt.length&&(an=Ie(an,Pt),Pt.length=0);mt=Ie(an,Pt)}return mt}function qe(Ce,Fe,Ve){var mt=Ce.g.i();for(mt=Ce.g.g+mt;Ce.g.g<mt;)Ve.push(Fe.call(Ce.g))}function Le(Ce,Fe){Ce.h==2?qe(Ce,xe.prototype.o,Fe):Fe.push(ut(Ce))}function lt(){this.h=[],this.i=0,this.g=new Ye}function We(Ce,Fe){Fe.length!==0&&(Ce.h.push(Fe),Ce.i+=Fe.length)}function Qe(Ce){var Fe=Ce.i+Ce.g.length();if(Fe===0)return new Uint8Array(0);Fe=new Uint8Array(Fe);for(var Ve=Ce.h,mt=Ve.length,Pt=0,an=0;an<mt;an++){var zt=Ve[an];zt.length!==0&&(Fe.set(zt,Pt),Pt+=zt.length)}return Ve=Ce.g,mt=Ve.h,mt!==0&&(Fe.set(Ve.g.subarray(0,mt),Pt),Ve.h=0),Ce.h=[Fe],Fe}function at(Ce,Fe,Ve){if(Ve!=null){Je(Ce.g,8*Fe+5),Ce=Ce.g;var mt=Ve;mt=(Ve=0>mt?1:0)?-mt:mt,mt===0?0<1/mt?Pe=$e=0:($e=0,Pe=2147483648):isNaN(mt)?($e=0,Pe=2147483647):34028234663852886e22<mt?($e=0,Pe=(Ve<<31|2139095040)>>>0):11754943508222875e-54>mt?(mt=Math.round(mt/Math.pow(2,-149)),$e=0,Pe=(Ve<<31|mt)>>>0):(Fe=Math.floor(Math.log(mt)/Math.LN2),mt*=Math.pow(2,-Fe),mt=Math.round(8388608*mt),16777216<=mt&&++Fe,$e=0,Pe=(Ve<<31|Fe+127<<23|mt&8388607)>>>0),Ve=Pe,Ce.push(Ve>>>0&255),Ce.push(Ve>>>8&255),Ce.push(Ve>>>16&255),Ce.push(Ve>>>24&255)}}var St=typeof Uint8Array=="function";function Ct(Ce,Fe,Ve){if(Ce!=null)return typeof Ce=="object"?St&&Ce instanceof Uint8Array?Ve(Ce):jt(Ce,Fe,Ve):Fe(Ce)}function jt(Ce,Fe,Ve){if(Array.isArray(Ce)){for(var mt=Array(Ce.length),Pt=0;Pt<Ce.length;Pt++)mt[Pt]=Ct(Ce[Pt],Fe,Ve);return Array.isArray(Ce)&&Ce.W&&ct(mt),mt}mt={};for(Pt in Ce)mt[Pt]=Ct(Ce[Pt],Fe,Ve);return mt}function Gt(Ce){return typeof Ce=="number"?isFinite(Ce)?Ce:String(Ce):Ce}var Ft={W:{value:!0,configurable:!0}};function ct(Ce){return Array.isArray(Ce)&&!Object.isFrozen(Ce)&&Object.defineProperties(Ce,Ft),Ce}var st;function nt(Ce,Fe,Ve){var mt=st;st=null,Ce||(Ce=mt),mt=this.constructor.ca,Ce||(Ce=mt?[mt]:[]),this.j=mt?0:-1,this.m=this.g=null,this.h=Ce;e:{if(mt=this.h.length,Ce=mt-1,mt&&(mt=this.h[Ce],!(mt===null||typeof mt!="object"||Array.isArray(mt)||St&&mt instanceof Uint8Array))){this.l=Ce-this.j,this.i=mt;break e}Fe!==void 0&&-1<Fe?(this.l=Math.max(Fe,Ce+1-this.j),this.i=null):this.l=Number.MAX_VALUE}if(Ve)for(Fe=0;Fe<Ve.length;Fe++)Ce=Ve[Fe],Ce<this.l?(Ce+=this.j,(mt=this.h[Ce])?ct(mt):this.h[Ce]=At):(Yt(this),(mt=this.i[Ce])?ct(mt):this.i[Ce]=At)}var At=Object.freeze(ct([]));function Yt(Ce){var Fe=Ce.l+Ce.j;Ce.h[Fe]||(Ce.i=Ce.h[Fe]={})}function ht(Ce,Fe,Ve){return Fe===-1?null:Ve!==void 0&&Ve||Fe>=Ce.l?Ce.i?Ce.i[Fe]:void 0:Ce.h[Fe+Ce.j]}function Tt(Ce,Fe){var Ve=Ve===void 0?!1:Ve,mt=ht(Ce,Fe,Ve);return mt==null&&(mt=At),mt===At&&(mt=ct([]),Ot(Ce,Fe,mt,Ve)),mt}function Kt(Ce){var Fe=Tt(Ce,3);if(Ce.m||(Ce.m={}),!Ce.m[3]){for(var Ve=0;Ve<Fe.length;Ve++)Fe[Ve]=+Fe[Ve];Ce.m[3]=!0}return Fe}function _n(Ce,Fe,Ve){return Ce=ht(Ce,Fe),Ce??Ve}function Ht(Ce,Fe,Ve){return Ce=ht(Ce,Fe),Ce=Ce==null?Ce:+Ce,Ce??(Ve===void 0?0:Ve)}function Ot(Ce,Fe,Ve,mt){mt!==void 0&&mt||Fe>=Ce.l?(Yt(Ce),Ce.i[Fe]=Ve):Ce.h[Fe+Ce.j]=Ve}function cn(Ce,Fe,Ve){if(Ve===-1)return null;if(Ce.g||(Ce.g={}),!Ce.g[Ve]){var mt=ht(Ce,Ve,!1);mt&&(Ce.g[Ve]=new Fe(mt))}return Ce.g[Ve]}function Mn(Ce,Fe){Ce.g||(Ce.g={});var Ve=Ce.g[1];if(!Ve){var mt=Tt(Ce,1);Ve=[];for(var Pt=0;Pt<mt.length;Pt++)Ve[Pt]=new Fe(mt[Pt]);Ce.g[1]=Ve}return Ve}function In(Ce,Fe,Ve){var mt=mt===void 0?!1:mt;Ce.g||(Ce.g={});var Pt=Ve&&rr(Ve);Ce.g[Fe]=Ve,Ot(Ce,Fe,Pt,mt)}function On(Ce,Fe,Ve,mt){var Pt=Mn(Ce,Ve);Fe=Fe||new Ve,Ce=Tt(Ce,1),mt!=null?(Pt.splice(mt,0,Fe),Ce.splice(mt,0,rr(Fe))):(Pt.push(Fe),Ce.push(rr(Fe)))}nt.prototype.toJSON=function(){var Ce=rr(this);return jt(Ce,Gt,be)};function rr(Ce,Fe){if(Ce.g)for(var Ve in Ce.g){var mt=Ce.g[Ve];if(Array.isArray(mt))for(var Pt=0;Pt<mt.length;Pt++)mt[Pt]&&rr(mt[Pt]);else mt&&rr(mt)}return Ce.h}nt.prototype.toString=function(){return rr(this).toString()};function Ar(Ce,Fe){if(Ce=Ce.o){We(Fe,Fe.g.end());for(var Ve=0;Ve<Ce.length;Ve++)We(Fe,Ce[Ve])}}function hr(Ce,Fe){if(Fe.h==4)return!1;var Ve=Fe.m;return pt(Fe),Fe.N||(Fe=ke(Fe.g.h,Ve,Fe.g.g),(Ve=Ce.o)?Ve.push(Fe):Ce.o=[Fe]),!0}function Yr(Ce){nt.call(this,Ce,-1,wr)}H(Yr,nt),Yr.prototype.getRows=function(){return ht(this,1)},Yr.prototype.getCols=function(){return ht(this,2)},Yr.prototype.getPackedDataList=function(){return Kt(this)},Yr.prototype.getLayout=function(){return _n(this,4,0)};function $r(Ce,Fe){for(;ze(Fe);)switch(Fe.i){case 8:var Ve=Fe.g.i();Ot(Ce,1,Ve);break;case 16:Ve=Fe.g.i(),Ot(Ce,2,Ve);break;case 29:case 26:Le(Fe,Ce.getPackedDataList());break;case 32:Ve=je(Fe.g),Ot(Ce,4,Ve);break;default:if(!hr(Ce,Fe))return Ce}return Ce}var wr=[3];function mr(Ce,Fe){var Ve=void 0;return new(Ve||(Ve=Promise))(function(mt,Pt){function an(xn){try{sn(Fe.next(xn))}catch(Un){Pt(Un)}}function zt(xn){try{sn(Fe.throw(xn))}catch(Un){Pt(Un)}}function sn(xn){xn.done?mt(xn.value):new Ve(function(Un){Un(xn.value)}).then(an,zt)}sn((Fe=Fe.apply(Ce,void 0)).next())})}function ir(Ce){nt.call(this,Ce)}H(ir,nt);function zn(Ce,Fe){for(;ze(Fe);)switch(Fe.i){case 8:var Ve=Fe.g.i();Ot(Ce,1,Ve);break;case 21:Ve=ut(Fe),Ot(Ce,2,Ve);break;case 26:Ve=Et(Fe),Ot(Ce,3,Ve);break;case 34:Ve=Et(Fe),Ot(Ce,4,Ve);break;default:if(!hr(Ce,Fe))return Ce}return Ce}function Lr(Ce){nt.call(this,Ce,-1,Hr)}H(Lr,nt),Lr.prototype.addClassification=function(Ce,Fe){return On(this,Ce,ir,Fe),this};var Hr=[1];function Xe(Ce){nt.call(this,Ce)}H(Xe,nt);function it(Ce,Fe){for(;ze(Fe);)switch(Fe.i){case 13:var Ve=ut(Fe);Ot(Ce,1,Ve);break;case 21:Ve=ut(Fe),Ot(Ce,2,Ve);break;case 29:Ve=ut(Fe),Ot(Ce,3,Ve);break;case 37:Ve=ut(Fe),Ot(Ce,4,Ve);break;case 45:Ve=ut(Fe),Ot(Ce,5,Ve);break;default:if(!hr(Ce,Fe))return Ce}return Ce}function xt(Ce){nt.call(this,Ce,-1,en)}H(xt,nt);function $t(Ce){e:{var Fe=new xt;for(Ce=new ot(Ce);ze(Ce);)switch(Ce.i){case 10:var Ve=yt(Ce,new Xe,it);On(Fe,Ve,Xe,void 0);break;default:if(!hr(Fe,Ce))break e}}return Fe}var en=[1];function Qt(Ce){nt.call(this,Ce)}H(Qt,nt);function pn(Ce){nt.call(this,Ce,-1,bn)}H(pn,nt),pn.prototype.getVertexType=function(){return _n(this,1,0)},pn.prototype.getPrimitiveType=function(){return _n(this,2,0)},pn.prototype.getVertexBufferList=function(){return Kt(this)},pn.prototype.getIndexBufferList=function(){return Tt(this,4)};function mn(Ce,Fe){for(;ze(Fe);)switch(Fe.i){case 8:var Ve=je(Fe.g);Ot(Ce,1,Ve);break;case 16:Ve=je(Fe.g),Ot(Ce,2,Ve);break;case 29:case 26:Le(Fe,Ce.getVertexBufferList());break;case 32:case 34:Ve=Fe;var mt=Ce.getIndexBufferList();Ve.h==2?qe(Ve,xe.prototype.i,mt):mt.push(Ve.g.i());break;default:if(!hr(Ce,Fe))return Ce}return Ce}var bn=[3,4];function vn(Ce){nt.call(this,Ce)}H(vn,nt),vn.prototype.getMesh=function(){return cn(this,pn,1)},vn.prototype.getPoseTransformMatrix=function(){return cn(this,Yr,2)};function wn(Ce){e:{var Fe=new vn;for(Ce=new ot(Ce);ze(Ce);)switch(Ce.i){case 10:var Ve=yt(Ce,new pn,mn);In(Fe,1,Ve);break;case 18:Ve=yt(Ce,new Yr,$r),In(Fe,2,Ve);break;default:if(!hr(Fe,Ce))break e}}return Fe}function qt(Ce,Fe,Ve){if(Ve=Ce.createShader(Ve===0?Ce.VERTEX_SHADER:Ce.FRAGMENT_SHADER),Ce.shaderSource(Ve,Fe),Ce.compileShader(Ve),!Ce.getShaderParameter(Ve,Ce.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+Ce.getShaderInfoLog(Ve));return Ve}function Ke(Ce){return Mn(Ce,ir).map(function(Fe){return{index:_n(Fe,1,0),Y:Ht(Fe,2),label:ht(Fe,3)!=null?_n(Fe,3,""):void 0,displayName:ht(Fe,4)!=null?_n(Fe,4,""):void 0}})}function _t(Ce){return{x:Ht(Ce,1),y:Ht(Ce,2),z:Ht(Ce,3),visibility:ht(Ce,4)!=null?Ht(Ce,4):void 0}}function It(Ce,Fe){this.h=Ce,this.g=Fe,this.l=0}function Nt(Ce,Fe,Ve){return Mt(Ce,Fe),typeof Ce.g.canvas.transferToImageBitmap=="function"?Promise.resolve(Ce.g.canvas.transferToImageBitmap()):Ve?Promise.resolve(Ce.g.canvas):typeof createImageBitmap=="function"?createImageBitmap(Ce.g.canvas):(Ce.i===void 0&&(Ce.i=document.createElement("canvas")),new Promise(function(mt){Ce.i.height=Ce.g.canvas.height,Ce.i.width=Ce.g.canvas.width,Ce.i.getContext("2d",{}).drawImage(Ce.g.canvas,0,0,Ce.g.canvas.width,Ce.g.canvas.height),mt(Ce.i)}))}function Mt(Ce,Fe){var Ve=Ce.g;if(Ce.m===void 0){var mt=qt(Ve,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),Pt=qt(Ve,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),an=Ve.createProgram();if(Ve.attachShader(an,mt),Ve.attachShader(an,Pt),Ve.linkProgram(an),!Ve.getProgramParameter(an,Ve.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+Ve.getProgramInfoLog(an));mt=Ce.m=an,Ve.useProgram(mt),Pt=Ve.getUniformLocation(mt,"sampler0"),Ce.j={I:Ve.getAttribLocation(mt,"aVertex"),H:Ve.getAttribLocation(mt,"aTex"),da:Pt},Ce.s=Ve.createBuffer(),Ve.bindBuffer(Ve.ARRAY_BUFFER,Ce.s),Ve.enableVertexAttribArray(Ce.j.I),Ve.vertexAttribPointer(Ce.j.I,2,Ve.FLOAT,!1,0,0),Ve.bufferData(Ve.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),Ve.STATIC_DRAW),Ve.bindBuffer(Ve.ARRAY_BUFFER,null),Ce.o=Ve.createBuffer(),Ve.bindBuffer(Ve.ARRAY_BUFFER,Ce.o),Ve.enableVertexAttribArray(Ce.j.H),Ve.vertexAttribPointer(Ce.j.H,2,Ve.FLOAT,!1,0,0),Ve.bufferData(Ve.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),Ve.STATIC_DRAW),Ve.bindBuffer(Ve.ARRAY_BUFFER,null),Ve.uniform1i(Pt,0)}mt=Ce.j,Ve.useProgram(Ce.m),Ve.canvas.width=Fe.width,Ve.canvas.height=Fe.height,Ve.viewport(0,0,Fe.width,Fe.height),Ve.activeTexture(Ve.TEXTURE0),Ce.h.bindTexture2d(Fe.glName),Ve.enableVertexAttribArray(mt.I),Ve.bindBuffer(Ve.ARRAY_BUFFER,Ce.s),Ve.vertexAttribPointer(mt.I,2,Ve.FLOAT,!1,0,0),Ve.enableVertexAttribArray(mt.H),Ve.bindBuffer(Ve.ARRAY_BUFFER,Ce.o),Ve.vertexAttribPointer(mt.H,2,Ve.FLOAT,!1,0,0),Ve.bindFramebuffer(Ve.DRAW_FRAMEBUFFER?Ve.DRAW_FRAMEBUFFER:Ve.FRAMEBUFFER,null),Ve.clearColor(0,0,0,0),Ve.clear(Ve.COLOR_BUFFER_BIT),Ve.colorMask(!0,!0,!0,!0),Ve.drawArrays(Ve.TRIANGLE_FAN,0,4),Ve.disableVertexAttribArray(mt.I),Ve.disableVertexAttribArray(mt.H),Ve.bindBuffer(Ve.ARRAY_BUFFER,null),Ce.h.bindTexture2d(0)}function on(Ce){this.g=Ce}var dn=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function ln(Ce,Fe){return Fe+Ce}function kn(Ce,Fe){window[Ce]=Fe}function An(Ce){var Fe=document.createElement("script");return Fe.setAttribute("src",Ce),Fe.setAttribute("crossorigin","anonymous"),new Promise(function(Ve){Fe.addEventListener("load",function(){Ve()},!1),Fe.addEventListener("error",function(){Ve()},!1),document.body.appendChild(Fe)})}function Gn(){return mr(this,function Ce(){return se(Ce,function(Fe){switch(Fe.g){case 1:return Fe.m=2,Y(Fe,WebAssembly.instantiate(dn),4);case 4:Fe.g=3,Fe.m=0;break;case 2:return Fe.m=0,Fe.j=null,Fe.return(!1);case 3:return Fe.return(!0)}})})}function Tn(Ce){if(this.g=Ce,this.listeners={},this.j={},this.F={},this.m={},this.s={},this.G=this.o=this.R=!0,this.C=Promise.resolve(),this.P="",this.B={},this.locateFile=Ce&&Ce.locateFile||ln,typeof window=="object")var Fe=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location<"u")Fe=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.S=Fe,Ce.options){Fe=w(Object.keys(Ce.options));for(var Ve=Fe.next();!Ve.done;Ve=Fe.next()){Ve=Ve.value;var mt=Ce.options[Ve].default;mt!==void 0&&(this.j[Ve]=typeof mt=="function"?mt():mt)}}}s=Tn.prototype,s.close=function(){return this.i&&this.i.delete(),Promise.resolve()};function Bn(Ce,Fe){return Ce.g.files===void 0?[]:typeof Ce.g.files=="function"?Ce.g.files(Fe):Ce.g.files}function nr(Ce){return mr(Ce,function Fe(){var Ve=this,mt,Pt,an,zt,sn,xn,Un,tr,Tr,lr,Xn;return se(Fe,function(Fn){switch(Fn.g){case 1:return mt=Ve,Ve.R?(Pt=Bn(Ve,Ve.j),Y(Fn,Gn(),2)):Fn.return();case 2:if(an=Fn.h,typeof window=="object")return kn("createMediapipeSolutionsWasm",{locateFile:Ve.locateFile}),kn("createMediapipeSolutionsPackedAssets",{locateFile:Ve.locateFile}),xn=Pt.filter(function(Hn){return Hn.data!==void 0}),Un=Pt.filter(function(Hn){return Hn.data===void 0}),tr=Promise.all(xn.map(function(Hn){var Kn=Pn(mt,Hn.url);if(Hn.path!==void 0){var Er=Hn.path;Kn=Kn.then(function(ii){return mt.overrideFile(Er,ii),Promise.resolve(ii)})}return Kn})),Tr=Promise.all(Un.map(function(Hn){return Hn.simd===void 0||Hn.simd&&an||!Hn.simd&&!an?An(mt.locateFile(Hn.url,mt.S)):Promise.resolve()})).then(function(){return mr(mt,function Hn(){var Kn,Er,ii=this;return se(Hn,function(Pr){if(Pr.g==1)return Kn=window.createMediapipeSolutionsWasm,Er=window.createMediapipeSolutionsPackedAssets,Y(Pr,Kn(Er),2);ii.h=Pr.h,Pr.g=0})})}),lr=(function(){return mr(mt,function Hn(){var Kn=this;return se(Hn,function(Er){return Kn.g.graph&&Kn.g.graph.url?Er=Y(Er,Pn(Kn,Kn.g.graph.url),0):(Er.g=0,Er=void 0),Er})})})(),Y(Fn,Promise.all([Tr,tr,lr]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return zt=Pt.filter(function(Hn){return Hn.simd===void 0||Hn.simd&&an||!Hn.simd&&!an}).map(function(Hn){return mt.locateFile(Hn.url,mt.S)}),importScripts.apply(null,C(zt)),Y(Fn,createMediapipeSolutionsWasm(Module),6);case 6:Ve.h=Fn.h,Ve.l=new OffscreenCanvas(1,1),Ve.h.canvas=Ve.l,sn=Ve.h.GL.createContext(Ve.l,{antialias:!1,alpha:!1,ba:typeof WebGL2RenderingContext<"u"?2:1}),Ve.h.GL.makeContextCurrent(sn),Fn.g=4;break;case 7:if(Ve.l=document.createElement("canvas"),Xn=Ve.l.getContext("webgl2",{}),!Xn&&(Xn=Ve.l.getContext("webgl",{}),!Xn))return alert("Failed to create WebGL canvas context when passing video frame."),Fn.return();Ve.D=Xn,Ve.h.canvas=Ve.l,Ve.h.createContext(Ve.l,!0,!0,{});case 4:Ve.i=new Ve.h.SolutionWasm,Ve.R=!1,Fn.g=0}})})}function Nr(Ce){return mr(Ce,function Fe(){var Ve=this,mt,Pt,an,zt,sn,xn,Un,tr;return se(Fe,function(Tr){if(Tr.g==1){if(Ve.g.graph&&Ve.g.graph.url&&Ve.P===Ve.g.graph.url)return Tr.return();if(Ve.o=!0,!Ve.g.graph||!Ve.g.graph.url){Tr.g=2;return}return Ve.P=Ve.g.graph.url,Y(Tr,Pn(Ve,Ve.g.graph.url),3)}for(Tr.g!=2&&(mt=Tr.h,Ve.i.loadGraph(mt)),Pt=w(Object.keys(Ve.B)),an=Pt.next();!an.done;an=Pt.next())zt=an.value,Ve.i.overrideFile(zt,Ve.B[zt]);if(Ve.B={},Ve.g.listeners)for(sn=w(Ve.g.listeners),xn=sn.next();!xn.done;xn=sn.next())Un=xn.value,Rn(Ve,Un);tr=Ve.j,Ve.j={},Ve.setOptions(tr),Tr.g=0})})}s.reset=function(){return mr(this,function Ce(){var Fe=this;return se(Ce,function(Ve){Fe.i&&(Fe.i.reset(),Fe.m={},Fe.s={}),Ve.g=0})})},s.setOptions=function(Ce,Fe){var Ve=this;if(Fe=Fe||this.g.options){for(var mt=[],Pt=[],an={},zt=w(Object.keys(Ce)),sn=zt.next();!sn.done;an={K:an.K,L:an.L},sn=zt.next()){var xn=sn.value;xn in this.j&&this.j[xn]===Ce[xn]||(this.j[xn]=Ce[xn],sn=Fe[xn],sn!==void 0&&(sn.onChange&&(an.K=sn.onChange,an.L=Ce[xn],mt.push((function(Un){return function(){return mr(Ve,function tr(){var Tr,lr=this;return se(tr,function(Xn){if(Xn.g==1)return Y(Xn,Un.K(Un.L),2);Tr=Xn.h,Tr===!0&&(lr.o=!0),Xn.g=0})})}})(an))),sn.graphOptionXref&&(xn={valueNumber:sn.type===1?Ce[xn]:0,valueBoolean:sn.type===0?Ce[xn]:!1,valueString:sn.type===2?Ce[xn]:""},sn=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),sn.graphOptionXref),xn),Pt.push(sn))))}(mt.length!==0||Pt.length!==0)&&(this.o=!0,this.A=(this.A===void 0?[]:this.A).concat(Pt),this.u=(this.u===void 0?[]:this.u).concat(mt))}};function ar(Ce){return mr(Ce,function Fe(){var Ve=this,mt,Pt,an,zt,sn,xn,Un;return se(Fe,function(tr){switch(tr.g){case 1:if(!Ve.o)return tr.return();if(!Ve.u){tr.g=2;break}mt=w(Ve.u),Pt=mt.next();case 3:if(Pt.done){tr.g=5;break}return an=Pt.value,Y(tr,an(),4);case 4:Pt=mt.next(),tr.g=3;break;case 5:Ve.u=void 0;case 2:if(Ve.A){for(zt=new Ve.h.GraphOptionChangeRequestList,sn=w(Ve.A),xn=sn.next();!xn.done;xn=sn.next())Un=xn.value,zt.push_back(Un);Ve.i.changeOptions(zt),zt.delete(),Ve.A=void 0}Ve.o=!1,tr.g=0}})})}s.initialize=function(){return mr(this,function Ce(){var Fe=this;return se(Ce,function(Ve){return Ve.g==1?Y(Ve,nr(Fe),2):Ve.g!=3?Y(Ve,Nr(Fe),3):Y(Ve,ar(Fe),0)})})};function Pn(Ce,Fe){return mr(Ce,function Ve(){var mt=this,Pt,an;return se(Ve,function(zt){return Fe in mt.F?zt.return(mt.F[Fe]):(Pt=mt.locateFile(Fe,""),an=fetch(Pt).then(function(sn){return sn.arrayBuffer()}),mt.F[Fe]=an,zt.return(an))})})}s.overrideFile=function(Ce,Fe){this.i?this.i.overrideFile(Ce,Fe):this.B[Ce]=Fe},s.clearOverriddenFiles=function(){this.B={},this.i&&this.i.clearOverriddenFiles()},s.send=function(Ce,Fe){return mr(this,function Ve(){var mt=this,Pt,an,zt,sn,xn,Un,tr,Tr,lr;return se(Ve,function(Xn){switch(Xn.g){case 1:return mt.g.inputs?(Pt=1e3*(Fe??performance.now()),Y(Xn,mt.C,2)):Xn.return();case 2:return Y(Xn,mt.initialize(),3);case 3:for(an=new mt.h.PacketDataList,zt=w(Object.keys(Ce)),sn=zt.next();!sn.done;sn=zt.next())if(xn=sn.value,Un=mt.g.inputs[xn]){e:{var Fn=mt,Hn=Ce[xn];switch(Un.type){case"video":var Kn=Fn.m[Un.stream];if(Kn||(Kn=new It(Fn.h,Fn.D),Fn.m[Un.stream]=Kn),Fn=Kn,Fn.l===0&&(Fn.l=Fn.h.createTexture()),typeof HTMLVideoElement<"u"&&Hn instanceof HTMLVideoElement){var Er=Hn.videoWidth;Kn=Hn.videoHeight}else typeof HTMLImageElement<"u"&&Hn instanceof HTMLImageElement?(Er=Hn.naturalWidth,Kn=Hn.naturalHeight):(Er=Hn.width,Kn=Hn.height);Kn={glName:Fn.l,width:Er,height:Kn},Er=Fn.g,Er.canvas.width=Kn.width,Er.canvas.height=Kn.height,Er.activeTexture(Er.TEXTURE0),Fn.h.bindTexture2d(Fn.l),Er.texImage2D(Er.TEXTURE_2D,0,Er.RGBA,Er.RGBA,Er.UNSIGNED_BYTE,Hn),Fn.h.bindTexture2d(0),Fn=Kn;break e;case"detections":for(Kn=Fn.m[Un.stream],Kn||(Kn=new on(Fn.h),Fn.m[Un.stream]=Kn),Fn=Kn,Fn.data||(Fn.data=new Fn.g.DetectionListData),Fn.data.reset(Hn.length),Kn=0;Kn<Hn.length;++Kn){Er=Hn[Kn];var ii=Fn.data,Pr=ii.setBoundingBox,vi=Kn,Gr=Er.T,Qn=new Qt;Ot(Qn,1,Gr.Z),Ot(Qn,2,Gr.$),Ot(Qn,3,Gr.height),Ot(Qn,4,Gr.width),Ot(Qn,5,Gr.rotation),Ot(Qn,6,Gr.X);var Wn=Gr=new lt;at(Wn,1,ht(Qn,1)),at(Wn,2,ht(Qn,2)),at(Wn,3,ht(Qn,3)),at(Wn,4,ht(Qn,4)),at(Wn,5,ht(Qn,5));var gr=ht(Qn,6);if(gr!=null&&gr!=null){Je(Wn.g,48);var fr=Wn.g,br=gr;gr=0>br,br=Math.abs(br);var yr=br>>>0;for(br=Math.floor((br-yr)/4294967296),br>>>=0,gr&&(br=~br>>>0,yr=(~yr>>>0)+1,4294967295<yr&&(yr=0,br++,4294967295<br&&(br=0))),Pe=yr,$e=br,gr=Pe,yr=$e;0<yr||127<gr;)fr.push(gr&127|128),gr=(gr>>>7|yr<<25)>>>0,yr>>>=7;fr.push(gr)}if(Ar(Qn,Wn),Gr=Qe(Gr),Pr.call(ii,vi,Gr),Er.O)for(ii=0;ii<Er.O.length;++ii)Qn=Er.O[ii],Wn=!!Qn.visibility,Pr=Fn.data,vi=Pr.addNormalizedLandmark,Gr=Kn,Qn=Object.assign(Object.assign({},Qn),{visibility:Wn?Qn.visibility:0}),Wn=new Xe,Ot(Wn,1,Qn.x),Ot(Wn,2,Qn.y),Ot(Wn,3,Qn.z),Qn.visibility&&Ot(Wn,4,Qn.visibility),fr=Qn=new lt,at(fr,1,ht(Wn,1)),at(fr,2,ht(Wn,2)),at(fr,3,ht(Wn,3)),at(fr,4,ht(Wn,4)),at(fr,5,ht(Wn,5)),Ar(Wn,fr),Qn=Qe(Qn),vi.call(Pr,Gr,Qn);if(Er.M)for(ii=0;ii<Er.M.length;++ii){if(Pr=Fn.data,vi=Pr.addClassification,Gr=Kn,Qn=Er.M[ii],Wn=new ir,Ot(Wn,2,Qn.Y),Qn.index&&Ot(Wn,1,Qn.index),Qn.label&&Ot(Wn,3,Qn.label),Qn.displayName&&Ot(Wn,4,Qn.displayName),fr=Qn=new lt,yr=ht(Wn,1),yr!=null&&yr!=null)if(Je(fr.g,8),gr=fr.g,0<=yr)Je(gr,yr);else{for(br=0;9>br;br++)gr.push(yr&127|128),yr>>=7;gr.push(1)}at(fr,2,ht(Wn,2)),gr=ht(Wn,3),gr!=null&&(gr=Se(gr),Je(fr.g,26),Je(fr.g,gr.length),We(fr,fr.g.end()),We(fr,gr)),gr=ht(Wn,4),gr!=null&&(gr=Se(gr),Je(fr.g,34),Je(fr.g,gr.length),We(fr,fr.g.end()),We(fr,gr)),Ar(Wn,fr),Qn=Qe(Qn),vi.call(Pr,Gr,Qn)}}Fn=Fn.data;break e;default:Fn={}}}switch(tr=Fn,Tr=Un.stream,Un.type){case"video":an.pushTexture2d(Object.assign(Object.assign({},tr),{stream:Tr,timestamp:Pt}));break;case"detections":lr=tr,lr.stream=Tr,lr.timestamp=Pt,an.pushDetectionList(lr);break;default:throw Error("Unknown input config type: '"+Un.type+"'")}}return mt.i.send(an),Y(Xn,mt.C,4);case 4:an.delete(),Xn.g=0}})})};function fn(Ce,Fe,Ve){return mr(Ce,function mt(){var Pt,an,zt,sn,xn,Un,tr=this,Tr,lr,Xn,Fn,Hn,Kn,Er,ii;return se(mt,function(Pr){switch(Pr.g){case 1:if(!Ve)return Pr.return(Fe);for(Pt={},an=0,zt=w(Object.keys(Ve)),sn=zt.next();!sn.done;sn=zt.next())xn=sn.value,Un=Ve[xn],typeof Un!="string"&&Un.type==="texture"&&Fe[Un.stream]!==void 0&&++an;1<an&&(tr.G=!1),Tr=w(Object.keys(Ve)),sn=Tr.next();case 2:if(sn.done){Pr.g=4;break}if(lr=sn.value,Xn=Ve[lr],typeof Xn=="string")return Er=Pt,ii=lr,Y(Pr,Vn(tr,lr,Fe[Xn]),14);if(Fn=Fe[Xn.stream],Xn.type==="detection_list"){if(Fn){for(var vi=Fn.getRectList(),Gr=Fn.getLandmarksList(),Qn=Fn.getClassificationsList(),Wn=[],gr=0;gr<vi.size();++gr){var fr=vi.get(gr);e:{var br=new Qt;for(fr=new ot(fr);ze(fr);)switch(fr.i){case 13:var yr=ut(fr);Ot(br,1,yr);break;case 21:yr=ut(fr),Ot(br,2,yr);break;case 29:yr=ut(fr),Ot(br,3,yr);break;case 37:yr=ut(fr),Ot(br,4,yr);break;case 45:yr=ut(fr),Ot(br,5,yr);break;case 48:yr=je(fr.g),Ot(br,6,yr);break;default:if(!hr(br,fr))break e}}br={Z:Ht(br,1),$:Ht(br,2),height:Ht(br,3),width:Ht(br,4),rotation:Ht(br,5,0),X:_n(br,6,0)},fr=Mn($t(Gr.get(gr)),Xe).map(_t);var da=Qn.get(gr);e:for(yr=new Lr,da=new ot(da);ze(da);)switch(da.i){case 10:yr.addClassification(yt(da,new ir,zn));break;default:if(!hr(yr,da))break e}br={T:br,O:fr,M:Ke(yr)},Wn.push(br)}vi=Wn}else vi=[];Pt[lr]=vi,Pr.g=7;break}if(Xn.type==="proto_list"){if(Fn){for(vi=Array(Fn.size()),Gr=0;Gr<Fn.size();Gr++)vi[Gr]=Fn.get(Gr);Fn.delete()}else vi=[];Pt[lr]=vi,Pr.g=7;break}if(Fn===void 0){Pr.g=3;break}if(Xn.type==="float_list"){Pt[lr]=Fn,Pr.g=7;break}if(Xn.type==="proto"){Pt[lr]=Fn,Pr.g=7;break}if(Xn.type!=="texture")throw Error("Unknown output config type: '"+Xn.type+"'");return Hn=tr.s[lr],Hn||(Hn=new It(tr.h,tr.D),tr.s[lr]=Hn),Y(Pr,Nt(Hn,Fn,tr.G),13);case 13:Kn=Pr.h,Pt[lr]=Kn;case 7:Xn.transform&&Pt[lr]&&(Pt[lr]=Xn.transform(Pt[lr])),Pr.g=3;break;case 14:Er[ii]=Pr.h;case 3:sn=Tr.next(),Pr.g=2;break;case 4:return Pr.return(Pt)}})})}function Vn(Ce,Fe,Ve){return mr(Ce,function mt(){var Pt=this,an;return se(mt,function(zt){return typeof Ve=="number"||Ve instanceof Uint8Array||Ve instanceof Pt.h.Uint8BlobList?zt.return(Ve):Ve instanceof Pt.h.Texture2dDataOut?(an=Pt.s[Fe],an||(an=new It(Pt.h,Pt.D),Pt.s[Fe]=an),zt.return(Nt(an,Ve,Pt.G))):zt.return(void 0)})})}function Rn(Ce,Fe){for(var Ve=Fe.name||"$",mt=[].concat(C(Fe.wants)),Pt=new Ce.h.StringList,an=w(Fe.wants),zt=an.next();!zt.done;zt=an.next())Pt.push_back(zt.value);an=Ce.h.PacketListener.implement({onResults:function(sn){for(var xn={},Un=0;Un<Fe.wants.length;++Un)xn[mt[Un]]=sn.get(Un);var tr=Ce.listeners[Ve];tr&&(Ce.C=fn(Ce,xn,Fe.outs).then(function(Tr){Tr=tr(Tr);for(var lr=0;lr<Fe.wants.length;++lr){var Xn=xn[mt[lr]];typeof Xn=="object"&&Xn.hasOwnProperty&&Xn.hasOwnProperty("delete")&&Xn.delete()}Tr&&(Ce.C=Tr)}))}}),Ce.i.attachMultiListener(Pt,an),Pt.delete()}s.onResults=function(Ce,Fe){this.listeners[Fe||"$"]=Ce},we("Solution",Tn),we("OptionType",{BOOL:0,NUMBER:1,aa:2,0:"BOOL",1:"NUMBER",2:"STRING"});function Mr(Ce){Ce=wn(Ce);var Fe=Ce.getMesh();if(!Fe)return Ce;var Ve=new Float32Array(Fe.getVertexBufferList());Fe.getVertexBufferList=function(){return Ve};var mt=new Uint32Array(Fe.getIndexBufferList());return Fe.getIndexBufferList=function(){return mt},Ce}var fi={files:[{url:"face_mesh_solution_packed_assets_loader.js"},{simd:!0,url:"face_mesh_solution_simd_wasm_bin.js"},{simd:!1,url:"face_mesh_solution_wasm_bin.js"}],graph:{url:"face_mesh.binarypb"},listeners:[{wants:["multi_face_geometry","image_transformed","multi_face_landmarks"],outs:{image:"image_transformed",multiFaceGeometry:{type:"proto_list",stream:"multi_face_geometry",transform:function(Ce){return Ce.map(Mr)}},multiFaceLandmarks:{type:"proto_list",stream:"multi_face_landmarks",transform:function(Ce){return Ce.map(function(Fe){return Mn($t(Fe),Xe).map(_t)})}}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},enableFaceGeometry:{type:0,graphOptionXref:{calculatorName:"EnableFaceGeometryConstant",calculatorType:"ConstantSidePacketCalculator",fieldName:"bool_value"}},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},maxNumFaces:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorNumFaces",fieldName:"int_value"}},refineLandmarks:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorRefineLandmarks",fieldName:"bool_value"}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"facelandmarkfrontgpu__facedetectionshortrangegpu__facedetectionshortrangecommon__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"facelandmarkfrontgpu__facelandmarkgpu__ThresholdingCalculator",fieldName:"threshold"}},cameraNear:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"near"}},cameraFar:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"far"}},cameraVerticalFovDegrees:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"vertical_fov_degrees"}}}},dr=[[61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]],si=[[263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]],Or=[[276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]],li=[[33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]],ci=[[46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]],pi=[[10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]],xi=[].concat(C(dr),C(si),C(Or),C(li),C(ci),C(pi));function va(Ce){Ce=Ce||{},Ce=Object.assign(Object.assign({},fi),Ce),this.g=new Tn(Ce)}s=va.prototype,s.close=function(){return this.g.close(),Promise.resolve()},s.onResults=function(Ce){this.g.onResults(Ce)},s.initialize=function(){return mr(this,function Ce(){var Fe=this;return se(Ce,function(Ve){return Y(Ve,Fe.g.initialize(),0)})})},s.reset=function(){this.g.reset()},s.send=function(Ce){return mr(this,function Fe(){var Ve=this;return se(Fe,function(mt){return Y(mt,Ve.g.send(Ce),0)})})},s.setOptions=function(Ce){this.g.setOptions(Ce)},we("FACE_GEOMETRY",{Layout:{COLUMN_MAJOR:0,ROW_MAJOR:1,0:"COLUMN_MAJOR",1:"ROW_MAJOR"},PrimitiveType:{TRIANGLE:0,0:"TRIANGLE"},VertexType:{VERTEX_PT:0,0:"VERTEX_PT"},DEFAULT_CAMERA_PARAMS:{verticalFovDegrees:63,near:1,far:1e4}}),we("FaceMesh",va),we("FACEMESH_LIPS",dr),we("FACEMESH_LEFT_EYE",si),we("FACEMESH_LEFT_EYEBROW",Or),we("FACEMESH_LEFT_IRIS",[[474,475],[475,476],[476,477],[477,474]]),we("FACEMESH_RIGHT_EYE",li),we("FACEMESH_RIGHT_EYEBROW",ci),we("FACEMESH_RIGHT_IRIS",[[469,470],[470,471],[471,472],[472,469]]),we("FACEMESH_FACE_OVAL",pi),we("FACEMESH_CONTOURS",xi),we("FACEMESH_TESSELATION",[[127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]]),we("matrixDataToMatrix",function(Ce){for(var Fe=Ce.getCols(),Ve=Ce.getRows(),mt=Ce.getPackedDataList(),Pt=[],an=0;an<Ve;an++)Pt.push(Array(Fe));for(an=0;an<Ve;an++)for(var zt=0;zt<Fe;zt++){var sn=Ce.getLayout()===1?an*Fe+zt:zt*Ve+an;Pt[an][zt]=mt[sn]}return Pt}),we("VERSION","0.4.1633559619")}).call(face_mesh)),face_mesh}var face_meshExports=requireFace_mesh();const useFaceTracking=s=>{const n=useStore$1(S=>S.setFace),u=useStore$1(S=>S.trackingMode),[f,y]=reactExports.useState(!1);return reactExports.useEffect(()=>{if(!s||u!=="EYE"){y(!1);return}const S=new face_meshExports.FaceMesh({locateFile:w=>`https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/${w}`});S.setOptions({maxNumFaces:1,refineLandmarks:!0,minDetectionConfidence:.5,minTrackingConfidence:.5}),S.onResults(w=>{if(w.multiFaceLandmarks&&w.multiFaceLandmarks.length>0){const C=w.multiFaceLandmarks[0],T=C[1],R=C[33],I=C[263],N=(R.x+I.x)/2,L=(T.x-N)*5,F=(R.y+I.y)/2,H=(T.y-F)*5;n({present:!0,x:T.x,y:T.y,z:T.z,rotationY:L,rotationX:H})}else n({present:!1})});const A=new camera_utilsExports.Camera(s,{onFrame:async()=>{useStore$1.getState().trackingMode==="EYE"&&await S.send({image:s})},width:1280,height:720});return A.start().then(()=>{y(!0)}),()=>{A.stop(),S.close(),y(!1)}},[s,n,u]),{isReady:f}},HandVisualizer=()=>{const s=useStore$1(f=>f.hands.left),n=useStore$1(f=>f.hands.right),u=(f,y)=>!f.present||!f.landmarks.length?null:jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:f.landmarks.map((S,A)=>jsxRuntimeExports.jsx("div",{className:"absolute rounded-full pointer-events-none",style:{left:`${(1-S.x)*100}%`,top:`${S.y*100}%`,width:A===4||A===8?"8px":"4px",height:A===4||A===8?"8px":"4px",backgroundColor:f.gesture==="PINCH"?"#ffff00":y,transform:"translate(-50%, -50%)",zIndex:50}},A))});return jsxRuntimeExports.jsxs("div",{className:"fixed inset-0 w-full h-full pointer-events-none z-50",children:[u(s,"#00f0ff"),u(n,"#ff0055"),jsxRuntimeExports.jsxs("div",{className:"fixed bg-black/50 text-white p-4 font-mono text-xs rounded-br-lg",style:{top:"1rem",left:"1rem"},children:[jsxRuntimeExports.jsxs("div",{children:["Left: ",s.present?s.gesture:"LOST"]}),jsxRuntimeExports.jsxs("div",{children:["Right: ",n.present?n.gesture:"LOST"]}),jsxRuntimeExports.jsxs("div",{className:"mt-1 pt-1 border-t border-white/20 text-jarvis-cyan",children:["Device: ",isTVBrowser()?"Smart TV":"Web Browser"]}),jsxRuntimeExports.jsx("div",{className:"text-white/50",children:"Build: v3.11.2"})]})]})};var lib={},Joystick={},shape_enum={},hasRequiredShape_enum;function requireShape_enum(){return hasRequiredShape_enum||(hasRequiredShape_enum=1,(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.JoystickShape=void 0,(function(n){n.Circle="circle",n.Square="square",n.AxisY="axisY",n.AxisX="axisX"})(s.JoystickShape||(s.JoystickShape={}))})(shape_enum)),shape_enum}var shape_factory={},hasRequiredShape_factory;function requireShape_factory(){if(hasRequiredShape_factory)return shape_factory;hasRequiredShape_factory=1,Object.defineProperty(shape_factory,"__esModule",{value:!0}),shape_factory.shapeFactory=void 0;var s=requireShape_enum(),n=function(u,f){switch(u){case s.JoystickShape.Square:return{borderRadius:Math.sqrt(f)};case s.JoystickShape.Circle:default:return{borderRadius:f}}};return shape_factory.shapeFactory=n,shape_factory}var shape_bounds_factory={},hasRequiredShape_bounds_factory;function requireShape_bounds_factory(){if(hasRequiredShape_bounds_factory)return shape_bounds_factory;hasRequiredShape_bounds_factory=1,Object.defineProperty(shape_bounds_factory,"__esModule",{value:!0}),shape_bounds_factory.shapeBoundsFactory=void 0;var s=requireShape_enum(),n=function(f,y,S,A,w,C,T,R,I){switch(f){case s.JoystickShape.Square:return A=u(y-I.left-R/2,R),w=u(S-I.top-R/2,R),{relativeX:A,relativeY:w};case s.JoystickShape.AxisX:return A=u(y-I.left-R/2,R),w=0,{relativeX:A,relativeY:w};case s.JoystickShape.AxisY:return A=0,w=u(S-I.top-R/2,R),{relativeX:A,relativeY:w};default:return C>T&&(A*=T/C,w*=T/C),{relativeX:A,relativeY:w}}};shape_bounds_factory.shapeBoundsFactory=n;var u=function(f,y){var S=y/2;return f>S?S:f<-S?S*-1:f};return shape_bounds_factory}var hasRequiredJoystick;function requireJoystick(){if(hasRequiredJoystick)return Joystick;hasRequiredJoystick=1;var s=Joystick&&Joystick.__extends||(function(){var T=function(R,I){return T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,L){N.__proto__=L}||function(N,L){for(var F in L)Object.prototype.hasOwnProperty.call(L,F)&&(N[F]=L[F])},T(R,I)};return function(R,I){if(typeof I!="function"&&I!==null)throw new TypeError("Class extends value "+String(I)+" is not a constructor or null");T(R,I);function N(){this.constructor=R}R.prototype=I===null?Object.create(I):(N.prototype=I.prototype,new N)}})(),n=Joystick&&Joystick.__assign||function(){return n=Object.assign||function(T){for(var R,I=1,N=arguments.length;I<N;I++){R=arguments[I];for(var L in R)Object.prototype.hasOwnProperty.call(R,L)&&(T[L]=R[L])}return T},n.apply(this,arguments)};Object.defineProperty(Joystick,"__esModule",{value:!0}),Joystick.Joystick=void 0;var u=requireReact(),f=requireShape_enum(),y=requireShape_factory(),S=requireShape_bounds_factory(),A;(function(T){T.PointerDown="pointerdown",T.PointerMove="pointermove",T.PointerUp="pointerup"})(A||(A={}));var w;(function(T){T[T.TopRight=2.35619449]="TopRight",T[T.TopLeft=-2.35619449]="TopLeft",T[T.BottomRight=.785398163]="BottomRight",T[T.BottomLeft=-.785398163]="BottomLeft"})(w||(w={}));var C=(function(T){s(R,T);function R(I){var N=T.call(this,I)||this;return N._stickRef=u.createRef(),N._baseRef=u.createRef(),N.frameId=null,N._pointerId=null,N._mounted=!1,N._pointerMove=function(L){if(L.preventDefault(),N.state.dragging){if(!N.props.followCursor&&L.pointerId!==N._pointerId)return;var F=L.clientX,H=L.clientY,z=F-N._parentRect.left-N._radius,U=H-N._parentRect.top-N._radius,G=N._distance(z,U),Y=(0,S.shapeBoundsFactory)(N.props.controlPlaneShape||N.props.baseShape,F,H,z,U,G,N._radius,N._baseSize,N._parentRect);z=Y.relativeX,U=Y.relativeY;var K=Math.atan2(z,U);N._updatePos({relativeX:z,relativeY:U,distance:N._distanceToPercentile(G),direction:N._getDirection(K),axisX:F-N._parentRect.left,axisY:H-N._parentRect.top})}},N._pointerUp=function(L){if(L.pointerId===N._pointerId){var F={dragging:!1};N.props.sticky||(F.coordinates=void 0),N.frameId=window.requestAnimationFrame(function(){N._mounted&&N.setState(F)}),window.removeEventListener(A.PointerUp,N._pointerUp),window.removeEventListener(A.PointerMove,N._pointerMove),N._pointerId=null,N.props.stop&&N.props.stop({type:"stop",x:N.props.sticky?N.state.coordinates.relativeX*2/N._baseSize:null,y:N.props.sticky?N.state.coordinates.relativeY*2/N._baseSize:null,direction:N.props.sticky?N.state.coordinates.direction:null,distance:N.props.sticky?N.state.coordinates.distance:null})}},N.state={dragging:!1},N._throttleMoveCallback=(function(){var L=0;return function(F){var H=new Date().getTime(),z=N.props.throttle||0;if(!(H-L<z)&&(L=H,N.props.move))return N.props.move(F)}})(),N}return R.prototype.componentWillUnmount=function(){var I=this;this._mounted=!1,this.props.followCursor&&window.removeEventListener(A.PointerMove,function(N){return I._pointerMove(N)}),this.frameId!==null&&window.cancelAnimationFrame(this.frameId)},R.prototype.componentDidMount=function(){var I=this;this._mounted=!0,this.props.followCursor&&(this._parentRect=this._baseRef.current.getBoundingClientRect(),this.setState({dragging:!0}),window.addEventListener(A.PointerMove,function(N){return I._pointerMove(N)}),this.props.start&&this.props.start({type:"start",x:null,y:null,distance:null,direction:null}))},R.prototype._updatePos=function(I){var N=this;this.frameId=window.requestAnimationFrame(function(){N._mounted&&N.setState({coordinates:I})}),!(typeof this.props.minDistance=="number"&&I.distance<this.props.minDistance)&&this._throttleMoveCallback({type:"move",x:I.relativeX*2/this._baseSize,y:-(I.relativeY*2/this._baseSize),direction:I.direction,distance:I.distance})},R.prototype._pointerDown=function(I){this.props.disabled||this.props.followCursor||(this._parentRect=this._baseRef.current.getBoundingClientRect(),this.setState({dragging:!0}),window.addEventListener(A.PointerUp,this._pointerUp),window.addEventListener(A.PointerMove,this._pointerMove),this._pointerId=I.pointerId,this._stickRef.current.setPointerCapture(I.pointerId),this.props.start&&this.props.start({type:"start",x:null,y:null,distance:null,direction:null}))},R.prototype._getDirection=function(I){return I>w.TopRight||I<w.TopLeft?"FORWARD":I<w.TopRight&&I>w.BottomRight?"RIGHT":I<w.BottomLeft?"LEFT":"BACKWARD"},R.prototype._distance=function(I,N){return Math.hypot(I,N)},R.prototype._distanceToPercentile=function(I){var N=I/(this._baseSize/2)*100;return N>100?100:N},R.prototype.getBaseShapeStyle=function(){var I=this.props.baseShape||f.JoystickShape.Circle;return(0,y.shapeFactory)(I,this._baseSize)},R.prototype.getStickShapeStyle=function(){var I=this.props.stickShape||f.JoystickShape.Circle;return(0,y.shapeFactory)(I,this._baseSize)},R.prototype._getBaseStyle=function(){var I=this.props.baseColor!==void 0?this.props.baseColor:"#000033",N="".concat(this._baseSize,"px"),L=n(n({},this.getBaseShapeStyle()),{height:N,width:N,background:I,display:"flex",justifyContent:"center",alignItems:"center"});return this.props.baseImage&&(L.background="url(".concat(this.props.baseImage,")"),L.backgroundSize="100%"),L},R.prototype._getStickStyle=function(){var I=this.props.stickColor!==void 0?this.props.stickColor:"#3D59AB",N=this._stickSize?"".concat(this._stickSize,"px"):"".concat(this._baseSize/1.5,"px"),L=n(n({},this.getStickShapeStyle()),{background:I,cursor:"move",height:N,width:N,border:"none",flexShrink:0,touchAction:"none"});return this.props.stickImage&&(L.background="url(".concat(this.props.stickImage,")"),L.backgroundSize="100%"),this.props.pos&&(L=Object.assign({},L,{position:"absolute",transform:"translate3d(".concat(this.props.pos.x*this._baseSize/2,"px, ").concat(-(this.props.pos.y*this._baseSize)/2,"px, 0)")})),this.state.coordinates!==void 0&&(L=Object.assign({},L,{position:"absolute",transform:"translate3d(".concat(this.state.coordinates.relativeX,"px, ").concat(this.state.coordinates.relativeY,"px, 0)")})),L},R.prototype.render=function(){var I=this;this._baseSize=this.props.size||100,this._stickSize=this.props.stickSize,this._radius=this._baseSize/2;var N=this._getBaseStyle(),L=this._getStickStyle();return u.createElement("div",{"data-testid":"joystick-base",className:this.props.disabled?"joystick-base-disabled":"",ref:this._baseRef,style:N},u.createElement("button",{ref:this._stickRef,disabled:this.props.disabled,onPointerDown:function(F){return I._pointerDown(F)},className:this.props.disabled?"joystick-disabled":"",style:L}))},R})(u.Component);return Joystick.Joystick=C,Joystick}var hasRequiredLib;function requireLib(){return hasRequiredLib||(hasRequiredLib=1,(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.JoystickShape=s.Joystick=void 0;var n=requireJoystick();Object.defineProperty(s,"Joystick",{enumerable:!0,get:function(){return n.Joystick}});var u=requireShape_enum();Object.defineProperty(s,"JoystickShape",{enumerable:!0,get:function(){return u.JoystickShape}})})(lib)),lib}var libExports=requireLib();const JoystickControl=()=>{const s=useStore$1(f=>f.setJoystickInput),n=f=>{f&&s({x:f.x||0,y:f.y||0})},u=()=>{s({x:0,y:0})};return jsxRuntimeExports.jsx("div",{className:"fixed z-50 pointer-events-auto opacity-50 hover:opacity-100 transition-opacity",style:{left:"2rem",bottom:"2rem"},children:jsxRuntimeExports.jsx(libExports.Joystick,{size:100,sticky:!1,baseColor:"rgba(0, 0, 0, 0.5)",stickColor:"rgba(0, 240, 255, 0.8)",move:n,stop:u})})},FullScreenToggle=()=>{const[s,n]=reactExports.useState(!1);reactExports.useEffect(()=>{const f=()=>{n(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",f),()=>document.removeEventListener("fullscreenchange",f)},[]);const u=()=>{document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen().catch(f=>{console.error("Failed to enter fullscreen:",f)})};return jsxRuntimeExports.jsx("button",{onClick:u,style:{right:"2rem",top:"2rem"},className:"fixed z-[100] w-12 h-12 aspect-square p-0 flex items-center justify-center bg-[#141414]/70 backdrop-blur-md border border-transparent rounded-2xl text-white transition-all duration-200 hover:bg-[#282828]/80 hover:border-white/20 hover:-translate-y-0.5 pointer-events-auto shadow-lg","aria-label":"Toggle Fullscreen",children:s?jsxRuntimeExports.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:jsxRuntimeExports.jsx("path",{d:"M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"})}):jsxRuntimeExports.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:jsxRuntimeExports.jsx("path",{d:"M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"})})})};const mergeClasses$1=(...s)=>s.filter((n,u,f)=>!!n&&n.trim()!==""&&f.indexOf(n)===u).join(" ").trim();const toKebabCase$1=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const toCamelCase$1=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,u,f)=>f?f.toUpperCase():u.toLowerCase());const toPascalCase$2=s=>{const n=toCamelCase$1(s);return n.charAt(0).toUpperCase()+n.slice(1)};var defaultAttributes$1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const hasA11yProp$1=s=>{for(const n in s)if(n.startsWith("aria-")||n==="role"||n==="title")return!0;return!1};const Icon$1=reactExports.forwardRef(({color:s="currentColor",size:n=24,strokeWidth:u=2,absoluteStrokeWidth:f,className:y="",children:S,iconNode:A,...w},C)=>reactExports.createElement("svg",{ref:C,...defaultAttributes$1,width:n,height:n,stroke:s,strokeWidth:f?Number(u)*24/Number(n):u,className:mergeClasses$1("lucide",y),...!S&&!hasA11yProp$1(w)&&{"aria-hidden":"true"},...w},[...A.map(([T,R])=>reactExports.createElement(T,R)),...Array.isArray(S)?S:[S]]));const createLucideIcon$1=(s,n)=>{const u=reactExports.forwardRef(({className:f,...y},S)=>reactExports.createElement(Icon$1,{ref:S,iconNode:n,className:mergeClasses$1(`lucide-${toKebabCase$1(toPascalCase$2(s))}`,`lucide-${s}`,f),...y}));return u.displayName=toPascalCase$2(s),u};const __iconNode$a=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Settings=createLucideIcon$1("settings",__iconNode$a);const __iconNode$9=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],X$2=createLucideIcon$1("x",__iconNode$9),SettingsButton=()=>{const{setSettingsOverlayOpen:s}=useStore$1();return jsxRuntimeExports.jsx("button",{onClick:()=>s(!0),style:{right:"2rem",top:"6rem"},className:"fixed z-[100] w-12 h-12 aspect-square p-0 flex items-center justify-center bg-[#141414]/70 backdrop-blur-md border border-transparent rounded-2xl text-white transition-all duration-200 hover:bg-[#282828]/80 hover:border-white/20 hover:-translate-y-0.5 pointer-events-auto shadow-lg","aria-label":"Open Settings",children:jsxRuntimeExports.jsx(Settings,{size:24})})},TVDPad=()=>{const{trackingMode:s,setTrackingMode:n,tvCursor:u,setTvCursor:f,tvControlMode:y,setTvControlMode:S,setJoystickInput:A,setTvOrbitInput:w}=useStore$1(),C=(L,F)=>{if(s!=="TV"&&n("TV"),y==="CURSOR"){let z=Math.max(0,Math.min(1,u.x+L*.05)),U=Math.max(0,Math.min(1,u.y+F*.05));f({x:z,y:U})}else y==="CAMERA"?(A({x:L*.5,y:-F*.5}),setTimeout(()=>A({x:0,y:0}),100)):y==="ROTATE"&&(w({dx:L*.5,dy:F*.5}),setTimeout(()=>w({dx:0,dy:0}),100))},T=()=>{s!=="TV"&&n("TV"),window.dispatchEvent(new CustomEvent("tv-enter-press"))},R=()=>{S(y==="CURSOR"?"CAMERA":y==="CAMERA"?"ROTATE":"CURSOR")},I="w-12 h-12 flex items-center justify-center bg-[rgba(0,0,0,0.5)] backdrop-blur-md border border-transparent rounded-xl text-[rgba(0,240,255,0.8)] transition-all duration-200 hover:bg-[#282828]/80 hover:border-white/20 hover:-translate-y-0.5 pointer-events-auto shadow-lg focus:outline-none";return jsxRuntimeExports.jsxs("div",{className:"fixed z-[100] flex flex-col items-center gap-2 pointer-events-none opacity-50 hover:opacity-100 transition-opacity",style:{right:"2rem",bottom:"2rem"},children:[jsxRuntimeExports.jsxs("button",{className:"mb-2 px-4 py-2 flex items-center justify-center bg-[rgba(0,240,255,0.2)] backdrop-blur-md border border-[rgba(0,240,255,0.8)] rounded-full text-[rgba(0,240,255,1)] font-mono text-sm font-bold tracking-widest transition-all duration-200 hover:bg-[rgba(0,240,255,0.4)] pointer-events-auto shadow-lg focus:outline-none",onClick:R,children:["MODE: ",y]}),jsxRuntimeExports.jsx("button",{className:I,onClick:()=>C(0,-1),children:jsxRuntimeExports.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:jsxRuntimeExports.jsx("path",{d:"m18 15-6-6-6 6"})})}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("button",{className:I,onClick:()=>C(-1,0),children:jsxRuntimeExports.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:jsxRuntimeExports.jsx("path",{d:"m15 18-6-6 6-6"})})}),jsxRuntimeExports.jsx("button",{className:"w-12 h-12 flex items-center justify-center bg-[rgba(0,0,0,0.5)] backdrop-blur-md border border-transparent rounded-xl text-white font-bold text-xs transition-all duration-200 hover:bg-[#282828]/80 hover:border-white/20 hover:-translate-y-0.5 pointer-events-auto shadow-lg focus:outline-none",onClick:T,children:"OK"}),jsxRuntimeExports.jsx("button",{className:I,onClick:()=>C(1,0),children:jsxRuntimeExports.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:jsxRuntimeExports.jsx("path",{d:"m9 18 6-6-6-6"})})})]}),jsxRuntimeExports.jsx("button",{className:I,onClick:()=>C(0,1),children:jsxRuntimeExports.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:jsxRuntimeExports.jsx("path",{d:"m6 9 6 6 6-6"})})})]})},HudOverlay=()=>{const{hands:s}=useStore$1(),n=s.left.present?s.left:s.right;return jsxRuntimeExports.jsxs("div",{className:"absolute top-0 left-0 w-full h-full pointer-events-none p-8 flex flex-col justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h1",{className:"text-4xl font-bold text-jarvis-cyan tracking-widest drop-shadow-[0_0_10px_rgba(0,240,255,0.8)]",children:["JARVIS ",jsxRuntimeExports.jsx("span",{className:"text-white text-sm align-top opacity-70",children:"V7.0"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 mt-2",children:[jsxRuntimeExports.jsx("div",{className:"h-1 w-12 bg-jarvis-cyan animate-pulse"}),jsxRuntimeExports.jsx("div",{className:"h-1 w-4 bg-jarvis-blue"})]})]}),jsxRuntimeExports.jsxs("div",{className:"text-right font-mono text-xs text-jarvis-blue",children:[jsxRuntimeExports.jsxs("p",{children:["SYS.STATUS: ",jsxRuntimeExports.jsx("span",{className:"text-green-400",children:"ONLINE"})]}),jsxRuntimeExports.jsxs("p",{children:["CPU: ",jsxRuntimeExports.jsx("span",{className:"animate-pulse",children:"ACTIVE"})]}),jsxRuntimeExports.jsx("p",{children:"NET: SECURE"})]})]}),!n.present&&jsxRuntimeExports.jsxs("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-center",children:[jsxRuntimeExports.jsx("div",{className:"w-64 h-64 border border-jarvis-cyan/30 rounded-full flex items-center justify-center animate-spin-slow",children:jsxRuntimeExports.jsx("div",{className:"w-56 h-56 border border-jarvis-blue/20 rounded-full border-t-transparent border-l-transparent"})}),jsxRuntimeExports.jsx("p",{className:"mt-4 text-jarvis-cyan/50 text-sm tracking-[0.5em] animate-pulse",children:"SEARCHING USER"})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-end font-mono text-xs text-xs text-white/50",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"block text-jarvis-cyan",children:"L-HAND"}),s.left.present?jsxRuntimeExports.jsx("span",{className:"text-white",children:"TRACKED"}):jsxRuntimeExports.jsx("span",{className:"text-red-500",children:"OFFLINE"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"block text-jarvis-cyan",children:"R-HAND"}),s.right.present?jsxRuntimeExports.jsx("span",{className:"text-white",children:"TRACKED"}):jsxRuntimeExports.jsx("span",{className:"text-red-500",children:"OFFLINE"})]})]}),jsxRuntimeExports.jsx("div",{children:n.present&&jsxRuntimeExports.jsxs("p",{className:"text-jarvis-cyan animate-pulse",children:["GESTURE: ",n.gesture]})})]}),jsxRuntimeExports.jsx(JoystickControl,{}),jsxRuntimeExports.jsx(FullScreenToggle,{}),jsxRuntimeExports.jsx(SettingsButton,{}),jsxRuntimeExports.jsx(TVDPad,{})]})},ToggleSwitch=({label:s,active:n,onClick:u})=>jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-[rgba(0,240,255,0.1)] last:border-0",children:[jsxRuntimeExports.jsx("span",{className:"text-[rgba(0,240,255,0.8)] font-mono text-sm",children:s}),jsxRuntimeExports.jsx("button",{onClick:u,className:`
                    w-12 h-6 rounded-full transition-colors duration-200 ease-in-out relative
                    ${n?"bg-[rgba(0,240,255,0.4)] border border-[rgba(0,240,255,0.8)]":"bg-black/50 border border-white/20"}
                `,children:jsxRuntimeExports.jsx("div",{className:`
                        absolute top-1 left-1 w-4 h-4 rounded-full transition-transform duration-200 ease-in-out
                        ${n?"transform translate-x-6 bg-[rgba(0,240,255,1)] shadow-[0_0_8px_rgba(0,240,255,0.8)]":"bg-white/50"}
                    `})})]}),SliderControl=({label:s,value:n,min:u,max:f,step:y,onChange:S,formatValue:A})=>jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-[rgba(0,240,255,0.1)] last:border-0 gap-4",children:[jsxRuntimeExports.jsx("span",{className:"text-[rgba(0,240,255,0.8)] font-mono text-sm w-1/3",children:s}),jsxRuntimeExports.jsxs("div",{className:"flex-1 flex items-center gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:()=>S(Math.max(u,Number((n-y).toFixed(1)))),className:"w-7 h-7 flex items-center justify-center rounded-full bg-black/50 border border-white/20 text-[rgba(0,240,255,0.8)] hover:bg-[rgba(0,240,255,0.2)] hover:border-[rgba(0,240,255,0.6)] hover:text-[rgba(0,240,255,1)] transition-all font-mono font-bold",children:"-"}),jsxRuntimeExports.jsx("input",{type:"range",min:u,max:f,step:y,value:n,onChange:w=>S(parseFloat(w.target.value)),className:`flex-1 h-1.5 bg-black/50 rounded-lg appearance-none cursor-pointer outline-none border border-white/20
                               [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:h-4 
                               [&::-webkit-slider-thumb]:bg-[rgba(0,240,255,1)] [&::-webkit-slider-thumb]:rounded-full 
                               [&::-webkit-slider-thumb]:shadow-[0_0_8px_rgba(0,240,255,0.8)]`}),jsxRuntimeExports.jsx("button",{onClick:()=>S(Math.min(f,Number((n+y).toFixed(1)))),className:"w-7 h-7 flex items-center justify-center rounded-full bg-black/50 border border-white/20 text-[rgba(0,240,255,0.8)] hover:bg-[rgba(0,240,255,0.2)] hover:border-[rgba(0,240,255,0.6)] hover:text-[rgba(0,240,255,1)] transition-all font-mono font-bold",children:"+"}),jsxRuntimeExports.jsx("span",{className:"text-[rgba(0,240,255,1)] font-mono text-xs w-12 text-right",children:A?A(n):n})]})]}),SceneCard=({label:s,active:n,onClick:u})=>jsxRuntimeExports.jsx("button",{onClick:u,className:`
                flex-1 py-3 px-2 rounded-xl flex flex-col items-center justify-center gap-1 transition-all duration-200 border
                ${n?"bg-[rgba(0,240,255,0.15)] border-[rgba(0,240,255,0.8)] shadow-[0_0_15px_rgba(0,240,255,0.3)]":"bg-black/30 border-white/10 hover:bg-white/5 hover:border-white/30"}
            `,children:jsxRuntimeExports.jsx("span",{className:`font-mono text-xs tracking-widest ${n?"text-[rgba(0,240,255,1)] font-bold":"text-white/60"}`,children:s})}),SettingsOverlay=()=>{const{isSettingsOverlayOpen:s,setSettingsOverlayOpen:n,showWebPanel:u,setShowWebPanel:f,showVideoPanel:y,setShowVideoPanel:S,showChessAssistant:A,setShowChessAssistant:w,showAnimeAssistant:C,setShowAnimeAssistant:T,showRealisticAssistant:R,setShowRealisticAssistant:I,hdMode:N,setHdMode:L,scene:F,setScene:H,gravity:z,setGravity:U,minHeight:G,setMinHeight:Y}=useStore$1();return s?jsxRuntimeExports.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center w-screen h-screen pointer-events-auto",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>n(!1)}),jsxRuntimeExports.jsxs("div",{className:"relative w-[90vw] max-w-lg bg-[rgba(0,0,0,0.75)] backdrop-blur-xl border border-[rgba(0,240,255,0.4)] rounded-[24px] shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-[rgba(0,240,255,0.2)] bg-gradient-to-r from-[rgba(0,240,255,0.1)] to-transparent",children:[jsxRuntimeExports.jsx("h2",{className:"text-[rgba(0,240,255,1)] font-mono text-xl font-bold tracking-widest",children:"SYSTEM PREFERENCES"}),jsxRuntimeExports.jsx("button",{onClick:()=>n(!1),className:"p-2 rounded-full text-[rgba(0,240,255,0.6)] hover:bg-[rgba(0,240,255,0.2)] hover:text-[rgba(0,240,255,1)] transition-colors",children:jsxRuntimeExports.jsx(X$2,{size:24})})]}),jsxRuntimeExports.jsxs("div",{className:"p-6 overflow-y-auto flex flex-col gap-8",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-white/80 font-mono text-sm tracking-wider uppercase border-b border-white/10 pb-2",children:"Environment Overlay"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4",children:[jsxRuntimeExports.jsx(SceneCard,{label:"DASHBOARD",active:F==="dashboard",onClick:()=>H("dashboard")}),jsxRuntimeExports.jsx(SceneCard,{label:"CITY SCENE",active:F==="city",onClick:()=>H("city")}),jsxRuntimeExports.jsx(SceneCard,{label:"FOREST",active:F==="forest",onClick:()=>H("forest")})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-white/80 font-mono text-sm tracking-wider uppercase border-b border-white/10 pb-2",children:"Physics & Movement"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 bg-black/30 rounded-xl p-4 border border-[rgba(0,240,255,0.1)]",children:[jsxRuntimeExports.jsx(SliderControl,{label:"Gravity Scale",value:z,min:0,max:1,step:.1,onChange:U,formatValue:K=>`${(K*100).toFixed(0)}%`}),jsxRuntimeExports.jsx(SliderControl,{label:"Floor Limit (m)",value:G,min:0,max:5,step:.1,onChange:Y,formatValue:K=>`${K.toFixed(1)}m`})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-white/80 font-mono text-sm tracking-wider uppercase border-b border-white/10 pb-2",children:"Render Optimization"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 bg-black/30 rounded-xl p-4 border border-[rgba(0,240,255,0.1)]",children:[jsxRuntimeExports.jsx(ToggleSwitch,{label:"Web Panel (Strategy iframe)",active:u,onClick:()=>f(!u)}),jsxRuntimeExports.jsx(ToggleSwitch,{label:"Music Video Player",active:y,onClick:()=>S(!y)}),jsxRuntimeExports.jsx(ToggleSwitch,{label:"Chess AI Widget",active:A,onClick:()=>w(!A)}),jsxRuntimeExports.jsx(ToggleSwitch,{label:"Anime Guide Avatar",active:C,onClick:()=>T(!C)}),jsxRuntimeExports.jsx(ToggleSwitch,{label:"Realistic Guide Avatar (Heavy)",active:R,onClick:()=>I(!R)}),jsxRuntimeExports.jsx("div",{className:"my-4 border-t border-white/10"}),jsxRuntimeExports.jsx(ToggleSwitch,{label:"HD Mode (Bloom & Res)",active:N,onClick:()=>L(!N)})]})]})]}),jsxRuntimeExports.jsx("div",{className:"p-4 border-t border-[rgba(0,240,255,0.2)] bg-black/40 flex justify-end",children:jsxRuntimeExports.jsx("button",{className:"px-6 py-2 bg-[rgba(0,240,255,0.2)] border border-[rgba(0,240,255,0.8)] rounded-full text-[rgba(0,240,255,1)] font-mono text-sm font-bold tracking-widest hover:bg-[rgba(0,240,255,0.4)] shadow-[0_0_10px_rgba(0,240,255,0.2)] transition-all",onClick:()=>n(!1),children:"APPLY & CLOSE"})})]})]}):null};function ok$2(){}function unreachable(){}function parse$3(s){const n=[],u=String(s||"");let f=u.indexOf(","),y=0,S=!1;for(;!S;){f===-1&&(f=u.length,S=!0);const A=u.slice(y,f).trim();(A||!S)&&n.push(A),y=f+1,f=u.indexOf(",",y)}return n}function stringify$2(s,n){const u={};return(s[s.length-1]===""?[...s,""]:s).join((u.padRight?" ":"")+","+(u.padLeft===!1?"":" ")).trim()}const nameRe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,nameReJsx=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,emptyOptions$4={};function name(s,n){return(emptyOptions$4.jsx?nameReJsx:nameRe).test(s)}const re=/[ \t\n\f\r]/g;function whitespace(s){return typeof s=="object"?s.type==="text"?empty$2(s.value):!1:empty$2(s)}function empty$2(s){return s.replace(re,"")===""}class Schema{constructor(n,u,f){this.normal=u,this.property=n,f&&(this.space=f)}}Schema.prototype.normal={};Schema.prototype.property={};Schema.prototype.space=void 0;function merge$1(s,n){const u={},f={};for(const y of s)Object.assign(u,y.property),Object.assign(f,y.normal);return new Schema(u,f,n)}function normalize$2(s){return s.toLowerCase()}class Info{constructor(n,u){this.attribute=u,this.property=n}}Info.prototype.attribute="";Info.prototype.booleanish=!1;Info.prototype.boolean=!1;Info.prototype.commaOrSpaceSeparated=!1;Info.prototype.commaSeparated=!1;Info.prototype.defined=!1;Info.prototype.mustUseProperty=!1;Info.prototype.number=!1;Info.prototype.overloadedBoolean=!1;Info.prototype.property="";Info.prototype.spaceSeparated=!1;Info.prototype.space=void 0;let powers=0;const boolean$2=increment(),booleanish=increment(),overloadedBoolean=increment(),number$4=increment(),spaceSeparated=increment(),commaSeparated=increment(),commaOrSpaceSeparated=increment();function increment(){return 2**++powers}const types$2=Object.freeze(Object.defineProperty({__proto__:null,boolean:boolean$2,booleanish,commaOrSpaceSeparated,commaSeparated,number:number$4,overloadedBoolean,spaceSeparated},Symbol.toStringTag,{value:"Module"})),checks=Object.keys(types$2);class DefinedInfo extends Info{constructor(n,u,f,y){let S=-1;if(super(n,u),mark(this,"space",y),typeof f=="number")for(;++S<checks.length;){const A=checks[S];mark(this,checks[S],(f&types$2[A])===types$2[A])}}}DefinedInfo.prototype.defined=!0;function mark(s,n,u){u&&(s[n]=u)}function create$1(s){const n={},u={};for(const[f,y]of Object.entries(s.properties)){const S=new DefinedInfo(f,s.transform(s.attributes||{},f),y,s.space);s.mustUseProperty&&s.mustUseProperty.includes(f)&&(S.mustUseProperty=!0),n[f]=S,u[normalize$2(f)]=f,u[normalize$2(S.attribute)]=f}return new Schema(n,u,s.space)}const aria=create$1({properties:{ariaActiveDescendant:null,ariaAtomic:booleanish,ariaAutoComplete:null,ariaBusy:booleanish,ariaChecked:booleanish,ariaColCount:number$4,ariaColIndex:number$4,ariaColSpan:number$4,ariaControls:spaceSeparated,ariaCurrent:null,ariaDescribedBy:spaceSeparated,ariaDetails:null,ariaDisabled:booleanish,ariaDropEffect:spaceSeparated,ariaErrorMessage:null,ariaExpanded:booleanish,ariaFlowTo:spaceSeparated,ariaGrabbed:booleanish,ariaHasPopup:null,ariaHidden:booleanish,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:spaceSeparated,ariaLevel:number$4,ariaLive:null,ariaModal:booleanish,ariaMultiLine:booleanish,ariaMultiSelectable:booleanish,ariaOrientation:null,ariaOwns:spaceSeparated,ariaPlaceholder:null,ariaPosInSet:number$4,ariaPressed:booleanish,ariaReadOnly:booleanish,ariaRelevant:null,ariaRequired:booleanish,ariaRoleDescription:spaceSeparated,ariaRowCount:number$4,ariaRowIndex:number$4,ariaRowSpan:number$4,ariaSelected:booleanish,ariaSetSize:number$4,ariaSort:null,ariaValueMax:number$4,ariaValueMin:number$4,ariaValueNow:number$4,ariaValueText:null,role:null},transform(s,n){return n==="role"?n:"aria-"+n.slice(4).toLowerCase()}});function caseSensitiveTransform(s,n){return n in s?s[n]:n}function caseInsensitiveTransform(s,n){return caseSensitiveTransform(s,n.toLowerCase())}const html$3=create$1({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:commaSeparated,acceptCharset:spaceSeparated,accessKey:spaceSeparated,action:null,allow:null,allowFullScreen:boolean$2,allowPaymentRequest:boolean$2,allowUserMedia:boolean$2,alt:null,as:null,async:boolean$2,autoCapitalize:null,autoComplete:spaceSeparated,autoFocus:boolean$2,autoPlay:boolean$2,blocking:spaceSeparated,capture:null,charSet:null,checked:boolean$2,cite:null,className:spaceSeparated,cols:number$4,colSpan:null,content:null,contentEditable:booleanish,controls:boolean$2,controlsList:spaceSeparated,coords:number$4|commaSeparated,crossOrigin:null,data:null,dateTime:null,decoding:null,default:boolean$2,defer:boolean$2,dir:null,dirName:null,disabled:boolean$2,download:overloadedBoolean,draggable:booleanish,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:boolean$2,formTarget:null,headers:spaceSeparated,height:number$4,hidden:overloadedBoolean,high:number$4,href:null,hrefLang:null,htmlFor:spaceSeparated,httpEquiv:spaceSeparated,id:null,imageSizes:null,imageSrcSet:null,inert:boolean$2,inputMode:null,integrity:null,is:null,isMap:boolean$2,itemId:null,itemProp:spaceSeparated,itemRef:spaceSeparated,itemScope:boolean$2,itemType:spaceSeparated,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:boolean$2,low:number$4,manifest:null,max:null,maxLength:number$4,media:null,method:null,min:null,minLength:number$4,multiple:boolean$2,muted:boolean$2,name:null,nonce:null,noModule:boolean$2,noValidate:boolean$2,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:boolean$2,optimum:number$4,pattern:null,ping:spaceSeparated,placeholder:null,playsInline:boolean$2,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:boolean$2,referrerPolicy:null,rel:spaceSeparated,required:boolean$2,reversed:boolean$2,rows:number$4,rowSpan:number$4,sandbox:spaceSeparated,scope:null,scoped:boolean$2,seamless:boolean$2,selected:boolean$2,shadowRootClonable:boolean$2,shadowRootDelegatesFocus:boolean$2,shadowRootMode:null,shape:null,size:number$4,sizes:null,slot:null,span:number$4,spellCheck:booleanish,src:null,srcDoc:null,srcLang:null,srcSet:null,start:number$4,step:null,style:null,tabIndex:number$4,target:null,title:null,translate:null,type:null,typeMustMatch:boolean$2,useMap:null,value:booleanish,width:number$4,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:spaceSeparated,axis:null,background:null,bgColor:null,border:number$4,borderColor:null,bottomMargin:number$4,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:boolean$2,declare:boolean$2,event:null,face:null,frame:null,frameBorder:null,hSpace:number$4,leftMargin:number$4,link:null,longDesc:null,lowSrc:null,marginHeight:number$4,marginWidth:number$4,noResize:boolean$2,noHref:boolean$2,noShade:boolean$2,noWrap:boolean$2,object:null,profile:null,prompt:null,rev:null,rightMargin:number$4,rules:null,scheme:null,scrolling:booleanish,standby:null,summary:null,text:null,topMargin:number$4,valueType:null,version:null,vAlign:null,vLink:null,vSpace:number$4,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:boolean$2,disableRemotePlayback:boolean$2,prefix:null,property:null,results:number$4,security:null,unselectable:null},space:"html",transform:caseInsensitiveTransform}),svg$1=create$1({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:commaOrSpaceSeparated,accentHeight:number$4,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:number$4,amplitude:number$4,arabicForm:null,ascent:number$4,attributeName:null,attributeType:null,azimuth:number$4,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:number$4,by:null,calcMode:null,capHeight:number$4,className:spaceSeparated,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:number$4,diffuseConstant:number$4,direction:null,display:null,dur:null,divisor:number$4,dominantBaseline:null,download:boolean$2,dx:null,dy:null,edgeMode:null,editable:null,elevation:number$4,enableBackground:null,end:null,event:null,exponent:number$4,externalResourcesRequired:null,fill:null,fillOpacity:number$4,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:commaSeparated,g2:commaSeparated,glyphName:commaSeparated,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:number$4,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:number$4,horizOriginX:number$4,horizOriginY:number$4,id:null,ideographic:number$4,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:number$4,k:number$4,k1:number$4,k2:number$4,k3:number$4,k4:number$4,kernelMatrix:commaOrSpaceSeparated,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:number$4,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:number$4,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:number$4,overlineThickness:number$4,paintOrder:null,panose1:null,path:null,pathLength:number$4,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:spaceSeparated,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:number$4,pointsAtY:number$4,pointsAtZ:number$4,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:commaOrSpaceSeparated,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:commaOrSpaceSeparated,rev:commaOrSpaceSeparated,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:commaOrSpaceSeparated,requiredFeatures:commaOrSpaceSeparated,requiredFonts:commaOrSpaceSeparated,requiredFormats:commaOrSpaceSeparated,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:number$4,specularExponent:number$4,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:number$4,strikethroughThickness:number$4,string:null,stroke:null,strokeDashArray:commaOrSpaceSeparated,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:number$4,strokeOpacity:number$4,strokeWidth:null,style:null,surfaceScale:number$4,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:commaOrSpaceSeparated,tabIndex:number$4,tableValues:null,target:null,targetX:number$4,targetY:number$4,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:commaOrSpaceSeparated,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:number$4,underlineThickness:number$4,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:number$4,values:null,vAlphabetic:number$4,vMathematical:number$4,vectorEffect:null,vHanging:number$4,vIdeographic:number$4,version:null,vertAdvY:number$4,vertOriginX:number$4,vertOriginY:number$4,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:number$4,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:caseSensitiveTransform}),xlink=create$1({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(s,n){return"xlink:"+n.slice(5).toLowerCase()}}),xmlns=create$1({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:caseInsensitiveTransform}),xml=create$1({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(s,n){return"xml:"+n.slice(3).toLowerCase()}}),hastToReact={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},cap$1=/[A-Z]/g,dash=/-[a-z]/g,valid=/^data[-\w.:]+$/i;function find(s,n){const u=normalize$2(n);let f=n,y=Info;if(u in s.normal)return s.property[s.normal[u]];if(u.length>4&&u.slice(0,4)==="data"&&valid.test(n)){if(n.charAt(4)==="-"){const S=n.slice(5).replace(dash,camelcase);f="data"+S.charAt(0).toUpperCase()+S.slice(1)}else{const S=n.slice(4);if(!dash.test(S)){let A=S.replace(cap$1,kebab);A.charAt(0)!=="-"&&(A="-"+A),n="data"+A}}y=DefinedInfo}return new y(f,n)}function kebab(s){return"-"+s.toLowerCase()}function camelcase(s){return s.charAt(1).toUpperCase()}const html$2=merge$1([aria,html$3,xlink,xmlns,xml],"html"),svg=merge$1([aria,svg$1,xlink,xmlns,xml],"svg");function parse$2(s){const n=String(s||"").trim();return n?n.split(/[ \t\n\r\f]+/g):[]}function stringify$1(s){return s.join(" ").trim()}var cjs$2={},cjs$1,hasRequiredCjs$2;function requireCjs$2(){if(hasRequiredCjs$2)return cjs$1;hasRequiredCjs$2=1;var s=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,n=/\n/g,u=/^\s*/,f=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,y=/^:\s*/,S=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,A=/^[;\s]*/,w=/^\s+|\s+$/g,C=`
`,T="/",R="*",I="",N="comment",L="declaration";function F(z,U){if(typeof z!="string")throw new TypeError("First argument must be a string");if(!z)return[];U=U||{};var G=1,Y=1;function K(Ie){var Be=Ie.match(n);Be&&(G+=Be.length);var Me=Ie.lastIndexOf(C);Y=~Me?Ie.length-Me:Y+Ie.length}function Z(){var Ie={line:G,column:Y};return function(Be){return Be.position=new J(Ie),se(),Be}}function J(Ie){this.start=Ie,this.end={line:G,column:Y},this.source=U.source}J.prototype.content=z;function te(Ie){var Be=new Error(U.source+":"+G+":"+Y+": "+Ie);if(Be.reason=Ie,Be.filename=U.source,Be.line=G,Be.column=Y,Be.source=z,!U.silent)throw Be}function de(Ie){var Be=Ie.exec(z);if(Be){var Me=Be[0];return K(Me),z=z.slice(Me.length),Be}}function se(){de(u)}function ne(Ie){var Be;for(Ie=Ie||[];Be=ge();)Be!==!1&&Ie.push(Be);return Ie}function ge(){var Ie=Z();if(!(T!=z.charAt(0)||R!=z.charAt(1))){for(var Be=2;I!=z.charAt(Be)&&(R!=z.charAt(Be)||T!=z.charAt(Be+1));)++Be;if(Be+=2,I===z.charAt(Be-1))return te("End of comment missing");var Me=z.slice(2,Be-2);return Y+=2,K(Me),z=z.slice(Be),Y+=2,Ie({type:N,comment:Me})}}function Ee(){var Ie=Z(),Be=de(f);if(Be){if(ge(),!de(y))return te("property missing ':'");var Me=de(S),Re=Ie({type:L,property:H(Be[0].replace(s,I)),value:Me?H(Me[0].replace(s,I)):I});return de(A),Re}}function we(){var Ie=[];ne(Ie);for(var Be;Be=Ee();)Be!==!1&&(Ie.push(Be),ne(Ie));return Ie}return se(),we()}function H(z){return z?z.replace(w,I):I}return cjs$1=F,cjs$1}var hasRequiredCjs$1;function requireCjs$1(){if(hasRequiredCjs$1)return cjs$2;hasRequiredCjs$1=1;var s=cjs$2&&cjs$2.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(cjs$2,"__esModule",{value:!0}),cjs$2.default=u;const n=s(requireCjs$2());function u(f,y){let S=null;if(!f||typeof f!="string")return S;const A=(0,n.default)(f),w=typeof y=="function";return A.forEach(C=>{if(C.type!=="declaration")return;const{property:T,value:R}=C;w?y(T,R,C):R&&(S=S||{},S[T]=R)}),S}return cjs$2}var utilities={},hasRequiredUtilities;function requireUtilities(){if(hasRequiredUtilities)return utilities;hasRequiredUtilities=1,Object.defineProperty(utilities,"__esModule",{value:!0}),utilities.camelCase=void 0;var s=/^--[a-zA-Z0-9_-]+$/,n=/-([a-z])/g,u=/^[^-]+$/,f=/^-(webkit|moz|ms|o|khtml)-/,y=/^-(ms)-/,S=function(T){return!T||u.test(T)||s.test(T)},A=function(T,R){return R.toUpperCase()},w=function(T,R){return"".concat(R,"-")},C=function(T,R){return R===void 0&&(R={}),S(T)?T:(T=T.toLowerCase(),R.reactCompat?T=T.replace(y,w):T=T.replace(f,w),T.replace(n,A))};return utilities.camelCase=C,utilities}var cjs,hasRequiredCjs;function requireCjs(){if(hasRequiredCjs)return cjs;hasRequiredCjs=1;var s=cjs&&cjs.__importDefault||function(y){return y&&y.__esModule?y:{default:y}},n=s(requireCjs$1()),u=requireUtilities();function f(y,S){var A={};return!y||typeof y!="string"||(0,n.default)(y,function(w,C){w&&C&&(A[(0,u.camelCase)(w,S)]=C)}),A}return f.default=f,cjs=f,cjs}var cjsExports=requireCjs();const styleToJs=getDefaultExportFromCjs$1(cjsExports),pointEnd=point$2("end"),pointStart=point$2("start");function point$2(s){return n;function n(u){const f=u&&u.position&&u.position[s]||{};if(typeof f.line=="number"&&f.line>0&&typeof f.column=="number"&&f.column>0)return{line:f.line,column:f.column,offset:typeof f.offset=="number"&&f.offset>-1?f.offset:void 0}}}function position$1(s){const n=pointStart(s),u=pointEnd(s);if(n&&u)return{start:n,end:u}}function stringifyPosition(s){return!s||typeof s!="object"?"":"position"in s||"type"in s?position(s.position):"start"in s||"end"in s?position(s):"line"in s||"column"in s?point$1(s):""}function point$1(s){return index(s&&s.line)+":"+index(s&&s.column)}function position(s){return point$1(s&&s.start)+"-"+point$1(s&&s.end)}function index(s){return s&&typeof s=="number"?s:1}class VFileMessage extends Error{constructor(n,u,f){super(),typeof u=="string"&&(f=u,u=void 0);let y="",S={},A=!1;if(u&&("line"in u&&"column"in u?S={place:u}:"start"in u&&"end"in u?S={place:u}:"type"in u?S={ancestors:[u],place:u.position}:S={...u}),typeof n=="string"?y=n:!S.cause&&n&&(A=!0,y=n.message,S.cause=n),!S.ruleId&&!S.source&&typeof f=="string"){const C=f.indexOf(":");C===-1?S.ruleId=f:(S.source=f.slice(0,C),S.ruleId=f.slice(C+1))}if(!S.place&&S.ancestors&&S.ancestors){const C=S.ancestors[S.ancestors.length-1];C&&(S.place=C.position)}const w=S.place&&"start"in S.place?S.place.start:S.place;this.ancestors=S.ancestors||void 0,this.cause=S.cause||void 0,this.column=w?w.column:void 0,this.fatal=void 0,this.file="",this.message=y,this.line=w?w.line:void 0,this.name=stringifyPosition(S.place)||"1:1",this.place=S.place||void 0,this.reason=this.message,this.ruleId=S.ruleId||void 0,this.source=S.source||void 0,this.stack=A&&S.cause&&typeof S.cause.stack=="string"?S.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}VFileMessage.prototype.file="";VFileMessage.prototype.name="";VFileMessage.prototype.reason="";VFileMessage.prototype.message="";VFileMessage.prototype.stack="";VFileMessage.prototype.column=void 0;VFileMessage.prototype.line=void 0;VFileMessage.prototype.ancestors=void 0;VFileMessage.prototype.cause=void 0;VFileMessage.prototype.fatal=void 0;VFileMessage.prototype.place=void 0;VFileMessage.prototype.ruleId=void 0;VFileMessage.prototype.source=void 0;const own$3={}.hasOwnProperty,emptyMap=new Map,cap=/[A-Z]/g,tableElements=new Set(["table","tbody","thead","tfoot","tr"]),tableCellElement=new Set(["td","th"]),docs="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function toJsxRuntime(s,n){if(!n||n.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const u=n.filePath||void 0;let f;if(n.development){if(typeof n.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");f=developmentCreate(u,n.jsxDEV)}else{if(typeof n.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof n.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");f=productionCreate(u,n.jsx,n.jsxs)}const y={Fragment:n.Fragment,ancestors:[],components:n.components||{},create:f,elementAttributeNameCase:n.elementAttributeNameCase||"react",evaluater:n.createEvaluater?n.createEvaluater():void 0,filePath:u,ignoreInvalidStyle:n.ignoreInvalidStyle||!1,passKeys:n.passKeys!==!1,passNode:n.passNode||!1,schema:n.space==="svg"?svg:html$2,stylePropertyNameCase:n.stylePropertyNameCase||"dom",tableCellAlignToStyle:n.tableCellAlignToStyle!==!1},S=one$2(y,s,void 0);return S&&typeof S!="string"?S:y.create(s,y.Fragment,{children:S||void 0},void 0)}function one$2(s,n,u){if(n.type==="element")return element$1(s,n,u);if(n.type==="mdxFlowExpression"||n.type==="mdxTextExpression")return mdxExpression(s,n);if(n.type==="mdxJsxFlowElement"||n.type==="mdxJsxTextElement")return mdxJsxElement(s,n,u);if(n.type==="mdxjsEsm")return mdxEsm(s,n);if(n.type==="root")return root$2(s,n,u);if(n.type==="text")return text$5(s,n)}function element$1(s,n,u){const f=s.schema;let y=f;n.tagName.toLowerCase()==="svg"&&f.space==="html"&&(y=svg,s.schema=y),s.ancestors.push(n);const S=findComponentFromName(s,n.tagName,!1),A=createElementProps(s,n);let w=createChildren$1(s,n);return tableElements.has(n.tagName)&&(w=w.filter(function(C){return typeof C=="string"?!whitespace(C):!0})),addNode(s,A,S,n),addChildren(A,w),s.ancestors.pop(),s.schema=f,s.create(n,S,A,u)}function mdxExpression(s,n){if(n.data&&n.data.estree&&s.evaluater){const f=n.data.estree.body[0];return f.type,s.evaluater.evaluateExpression(f.expression)}crashEstree(s,n.position)}function mdxEsm(s,n){if(n.data&&n.data.estree&&s.evaluater)return s.evaluater.evaluateProgram(n.data.estree);crashEstree(s,n.position)}function mdxJsxElement(s,n,u){const f=s.schema;let y=f;n.name==="svg"&&f.space==="html"&&(y=svg,s.schema=y),s.ancestors.push(n);const S=n.name===null?s.Fragment:findComponentFromName(s,n.name,!0),A=createJsxElementProps(s,n),w=createChildren$1(s,n);return addNode(s,A,S,n),addChildren(A,w),s.ancestors.pop(),s.schema=f,s.create(n,S,A,u)}function root$2(s,n,u){const f={};return addChildren(f,createChildren$1(s,n)),s.create(n,s.Fragment,f,u)}function text$5(s,n){return n.value}function addNode(s,n,u,f){typeof u!="string"&&u!==s.Fragment&&s.passNode&&(n.node=f)}function addChildren(s,n){if(n.length>0){const u=n.length>1?n:n[0];u&&(s.children=u)}}function productionCreate(s,n,u){return f;function f(y,S,A,w){const T=Array.isArray(A.children)?u:n;return w?T(S,A,w):T(S,A)}}function developmentCreate(s,n){return u;function u(f,y,S,A){const w=Array.isArray(S.children),C=pointStart(f);return n(y,S,A,w,{columnNumber:C?C.column-1:void 0,fileName:s,lineNumber:C?C.line:void 0},void 0)}}function createElementProps(s,n){const u={};let f,y;for(y in n.properties)if(y!=="children"&&own$3.call(n.properties,y)){const S=createProperty(s,y,n.properties[y]);if(S){const[A,w]=S;s.tableCellAlignToStyle&&A==="align"&&typeof w=="string"&&tableCellElement.has(n.tagName)?f=w:u[A]=w}}if(f){const S=u.style||(u.style={});S[s.stylePropertyNameCase==="css"?"text-align":"textAlign"]=f}return u}function createJsxElementProps(s,n){const u={};for(const f of n.attributes)if(f.type==="mdxJsxExpressionAttribute")if(f.data&&f.data.estree&&s.evaluater){const S=f.data.estree.body[0];S.type;const A=S.expression;A.type;const w=A.properties[0];w.type,Object.assign(u,s.evaluater.evaluateExpression(w.argument))}else crashEstree(s,n.position);else{const y=f.name;let S;if(f.value&&typeof f.value=="object")if(f.value.data&&f.value.data.estree&&s.evaluater){const w=f.value.data.estree.body[0];w.type,S=s.evaluater.evaluateExpression(w.expression)}else crashEstree(s,n.position);else S=f.value===null?!0:f.value;u[y]=S}return u}function createChildren$1(s,n){const u=[];let f=-1;const y=s.passKeys?new Map:emptyMap;for(;++f<n.children.length;){const S=n.children[f];let A;if(s.passKeys){const C=S.type==="element"?S.tagName:S.type==="mdxJsxFlowElement"||S.type==="mdxJsxTextElement"?S.name:void 0;if(C){const T=y.get(C)||0;A=C+"-"+T,y.set(C,T+1)}}const w=one$2(s,S,A);w!==void 0&&u.push(w)}return u}function createProperty(s,n,u){const f=find(s.schema,n);if(!(u==null||typeof u=="number"&&Number.isNaN(u))){if(Array.isArray(u)&&(u=f.commaSeparated?stringify$2(u):stringify$1(u)),f.property==="style"){let y=typeof u=="object"?u:parseStyle(s,String(u));return s.stylePropertyNameCase==="css"&&(y=transformStylesToCssCasing(y)),["style",y]}return[s.elementAttributeNameCase==="react"&&f.space?hastToReact[f.property]||f.property:f.attribute,u]}}function parseStyle(s,n){try{return styleToJs(n,{reactCompat:!0})}catch(u){if(s.ignoreInvalidStyle)return{};const f=u,y=new VFileMessage("Cannot parse `style` attribute",{ancestors:s.ancestors,cause:f,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw y.file=s.filePath||void 0,y.url=docs+"#cannot-parse-style-attribute",y}}function findComponentFromName(s,n,u){let f;if(!u)f={type:"Literal",value:n};else if(n.includes(".")){const y=n.split(".");let S=-1,A;for(;++S<y.length;){const w=name(y[S])?{type:"Identifier",name:y[S]}:{type:"Literal",value:y[S]};A=A?{type:"MemberExpression",object:A,property:w,computed:!!(S&&w.type==="Literal"),optional:!1}:w}f=A}else f=name(n)&&!/^[a-z]/.test(n)?{type:"Identifier",name:n}:{type:"Literal",value:n};if(f.type==="Literal"){const y=f.value;return own$3.call(s.components,y)?s.components[y]:y}if(s.evaluater)return s.evaluater.evaluateExpression(f);crashEstree(s)}function crashEstree(s,n){const u=new VFileMessage("Cannot handle MDX estrees without `createEvaluater`",{ancestors:s.ancestors,place:n,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw u.file=s.filePath||void 0,u.url=docs+"#cannot-handle-mdx-estrees-without-createevaluater",u}function transformStylesToCssCasing(s){const n={};let u;for(u in s)own$3.call(s,u)&&(n[transformStyleToCssCasing(u)]=s[u]);return n}function transformStyleToCssCasing(s){let n=s.replace(cap,toDash);return n.slice(0,3)==="ms-"&&(n="-"+n),n}function toDash(s){return"-"+s.toLowerCase()}const urlAttributes={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},emptyOptions$3={};function toString$2(s,n){const u=emptyOptions$3,f=typeof u.includeImageAlt=="boolean"?u.includeImageAlt:!0,y=typeof u.includeHtml=="boolean"?u.includeHtml:!0;return one$1(s,f,y)}function one$1(s,n,u){if(node$1(s)){if("value"in s)return s.type==="html"&&!u?"":s.value;if(n&&"alt"in s&&s.alt)return s.alt;if("children"in s)return all$1(s.children,n,u)}return Array.isArray(s)?all$1(s,n,u):""}function all$1(s,n,u){const f=[];let y=-1;for(;++y<s.length;)f[y]=one$1(s[y],n,u);return f.join("")}function node$1(s){return!!(s&&typeof s=="object")}const element=document.createElement("i");function decodeNamedCharacterReference(s){const n="&"+s+";";element.innerHTML=n;const u=element.textContent;return u.charCodeAt(u.length-1)===59&&s!=="semi"||u===n?!1:u}function splice$1(s,n,u,f){const y=s.length;let S=0,A;if(n<0?n=-n>y?0:y+n:n=n>y?y:n,u=u>0?u:0,f.length<1e4)A=Array.from(f),A.unshift(n,u),s.splice(...A);else for(u&&s.splice(n,u);S<f.length;)A=f.slice(S,S+1e4),A.unshift(n,0),s.splice(...A),S+=1e4,n+=1e4}function push(s,n){return s.length>0?(splice$1(s,s.length,0,n),s):n}const hasOwnProperty$1={}.hasOwnProperty;function combineExtensions$1(s){const n={};let u=-1;for(;++u<s.length;)syntaxExtension$1(n,s[u]);return n}function syntaxExtension$1(s,n){let u;for(u in n){const y=(hasOwnProperty$1.call(s,u)?s[u]:void 0)||(s[u]={}),S=n[u];let A;if(S)for(A in S){hasOwnProperty$1.call(y,A)||(y[A]=[]);const w=S[A];constructs$1(y[A],Array.isArray(w)?w:w?[w]:[])}}}function constructs$1(s,n){let u=-1;const f=[];for(;++u<n.length;)(n[u].add==="after"?s:f).push(n[u]);splice$1(s,0,0,f)}function decodeNumericCharacterReference(s,n){const u=Number.parseInt(s,n);return u<9||u===11||u>13&&u<32||u>126&&u<160||u>55295&&u<57344||u>64975&&u<65008||(u&65535)===65535||(u&65535)===65534||u>1114111?"":String.fromCodePoint(u)}function normalizeIdentifier$1(s){return s.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const asciiAlpha$1=regexCheck$1(/[A-Za-z]/),asciiAlphanumeric$1=regexCheck$1(/[\dA-Za-z]/),asciiAtext=regexCheck$1(/[#-'*+\--9=?A-Z^-~]/);function asciiControl$1(s){return s!==null&&(s<32||s===127)}const asciiDigit=regexCheck$1(/\d/),asciiHexDigit=regexCheck$1(/[\dA-Fa-f]/),asciiPunctuation=regexCheck$1(/[!-/:-@[-`{-~]/);function markdownLineEnding$1(s){return s!==null&&s<-2}function markdownLineEndingOrSpace$1(s){return s!==null&&(s<0||s===32)}function markdownSpace$1(s){return s===-2||s===-1||s===32}const unicodePunctuation$1=regexCheck$1(new RegExp("\\p{P}|\\p{S}","u")),unicodeWhitespace$1=regexCheck$1(/\s/);function regexCheck$1(s){return n;function n(u){return u!==null&&u>-1&&s.test(String.fromCharCode(u))}}function normalizeUri(s){const n=[];let u=-1,f=0,y=0;for(;++u<s.length;){const S=s.charCodeAt(u);let A="";if(S===37&&asciiAlphanumeric$1(s.charCodeAt(u+1))&&asciiAlphanumeric$1(s.charCodeAt(u+2)))y=2;else if(S<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(S))||(A=String.fromCharCode(S));else if(S>55295&&S<57344){const w=s.charCodeAt(u+1);S<56320&&w>56319&&w<57344?(A=String.fromCharCode(S,w),y=1):A=""}else A=String.fromCharCode(S);A&&(n.push(s.slice(f,u),encodeURIComponent(A)),f=u+y+1,A=""),y&&(u+=y,y=0)}return n.join("")+s.slice(f)}function factorySpace$1(s,n,u,f){const y=f?f-1:Number.POSITIVE_INFINITY;let S=0;return A;function A(C){return markdownSpace$1(C)?(s.enter(u),w(C)):n(C)}function w(C){return markdownSpace$1(C)&&S++<y?(s.consume(C),w):(s.exit(u),n(C))}}const content$1={tokenize:initializeContent};function initializeContent(s){const n=s.attempt(this.parser.constructs.contentInitial,f,y);let u;return n;function f(w){if(w===null){s.consume(w);return}return s.enter("lineEnding"),s.consume(w),s.exit("lineEnding"),factorySpace$1(s,n,"linePrefix")}function y(w){return s.enter("paragraph"),S(w)}function S(w){const C=s.enter("chunkText",{contentType:"text",previous:u});return u&&(u.next=C),u=C,A(w)}function A(w){if(w===null){s.exit("chunkText"),s.exit("paragraph"),s.consume(w);return}return markdownLineEnding$1(w)?(s.consume(w),s.exit("chunkText"),S):(s.consume(w),A)}}const document$2={tokenize:initializeDocument},containerConstruct={tokenize:tokenizeContainer};function initializeDocument(s){const n=this,u=[];let f=0,y,S,A;return w;function w(Y){if(f<u.length){const K=u[f];return n.containerState=K[1],s.attempt(K[0].continuation,C,T)(Y)}return T(Y)}function C(Y){if(f++,n.containerState._closeFlow){n.containerState._closeFlow=void 0,y&&G();const K=n.events.length;let Z=K,J;for(;Z--;)if(n.events[Z][0]==="exit"&&n.events[Z][1].type==="chunkFlow"){J=n.events[Z][1].end;break}U(f);let te=K;for(;te<n.events.length;)n.events[te][1].end={...J},te++;return splice$1(n.events,Z+1,0,n.events.slice(K)),n.events.length=te,T(Y)}return w(Y)}function T(Y){if(f===u.length){if(!y)return N(Y);if(y.currentConstruct&&y.currentConstruct.concrete)return F(Y);n.interrupt=!!(y.currentConstruct&&!y._gfmTableDynamicInterruptHack)}return n.containerState={},s.check(containerConstruct,R,I)(Y)}function R(Y){return y&&G(),U(f),N(Y)}function I(Y){return n.parser.lazy[n.now().line]=f!==u.length,A=n.now().offset,F(Y)}function N(Y){return n.containerState={},s.attempt(containerConstruct,L,F)(Y)}function L(Y){return f++,u.push([n.currentConstruct,n.containerState]),N(Y)}function F(Y){if(Y===null){y&&G(),U(0),s.consume(Y);return}return y=y||n.parser.flow(n.now()),s.enter("chunkFlow",{_tokenizer:y,contentType:"flow",previous:S}),H(Y)}function H(Y){if(Y===null){z(s.exit("chunkFlow"),!0),U(0),s.consume(Y);return}return markdownLineEnding$1(Y)?(s.consume(Y),z(s.exit("chunkFlow")),f=0,n.interrupt=void 0,w):(s.consume(Y),H)}function z(Y,K){const Z=n.sliceStream(Y);if(K&&Z.push(null),Y.previous=S,S&&(S.next=Y),S=Y,y.defineSkip(Y.start),y.write(Z),n.parser.lazy[Y.start.line]){let J=y.events.length;for(;J--;)if(y.events[J][1].start.offset<A&&(!y.events[J][1].end||y.events[J][1].end.offset>A))return;const te=n.events.length;let de=te,se,ne;for(;de--;)if(n.events[de][0]==="exit"&&n.events[de][1].type==="chunkFlow"){if(se){ne=n.events[de][1].end;break}se=!0}for(U(f),J=te;J<n.events.length;)n.events[J][1].end={...ne},J++;splice$1(n.events,de+1,0,n.events.slice(te)),n.events.length=J}}function U(Y){let K=u.length;for(;K-- >Y;){const Z=u[K];n.containerState=Z[1],Z[0].exit.call(n,s)}u.length=Y}function G(){y.write([null]),S=void 0,y=void 0,n.containerState._closeFlow=void 0}}function tokenizeContainer(s,n,u){return factorySpace$1(s,s.attempt(this.parser.constructs.document,n,u),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function classifyCharacter$1(s){if(s===null||markdownLineEndingOrSpace$1(s)||unicodeWhitespace$1(s))return 1;if(unicodePunctuation$1(s))return 2}function resolveAll$1(s,n,u){const f=[];let y=-1;for(;++y<s.length;){const S=s[y].resolveAll;S&&!f.includes(S)&&(n=S(n,u),f.push(S))}return n}const attention={name:"attention",resolveAll:resolveAllAttention,tokenize:tokenizeAttention};function resolveAllAttention(s,n){let u=-1,f,y,S,A,w,C,T,R;for(;++u<s.length;)if(s[u][0]==="enter"&&s[u][1].type==="attentionSequence"&&s[u][1]._close){for(f=u;f--;)if(s[f][0]==="exit"&&s[f][1].type==="attentionSequence"&&s[f][1]._open&&n.sliceSerialize(s[f][1]).charCodeAt(0)===n.sliceSerialize(s[u][1]).charCodeAt(0)){if((s[f][1]._close||s[u][1]._open)&&(s[u][1].end.offset-s[u][1].start.offset)%3&&!((s[f][1].end.offset-s[f][1].start.offset+s[u][1].end.offset-s[u][1].start.offset)%3))continue;C=s[f][1].end.offset-s[f][1].start.offset>1&&s[u][1].end.offset-s[u][1].start.offset>1?2:1;const I={...s[f][1].end},N={...s[u][1].start};movePoint(I,-C),movePoint(N,C),A={type:C>1?"strongSequence":"emphasisSequence",start:I,end:{...s[f][1].end}},w={type:C>1?"strongSequence":"emphasisSequence",start:{...s[u][1].start},end:N},S={type:C>1?"strongText":"emphasisText",start:{...s[f][1].end},end:{...s[u][1].start}},y={type:C>1?"strong":"emphasis",start:{...A.start},end:{...w.end}},s[f][1].end={...A.start},s[u][1].start={...w.end},T=[],s[f][1].end.offset-s[f][1].start.offset&&(T=push(T,[["enter",s[f][1],n],["exit",s[f][1],n]])),T=push(T,[["enter",y,n],["enter",A,n],["exit",A,n],["enter",S,n]]),T=push(T,resolveAll$1(n.parser.constructs.insideSpan.null,s.slice(f+1,u),n)),T=push(T,[["exit",S,n],["enter",w,n],["exit",w,n],["exit",y,n]]),s[u][1].end.offset-s[u][1].start.offset?(R=2,T=push(T,[["enter",s[u][1],n],["exit",s[u][1],n]])):R=0,splice$1(s,f-1,u-f+3,T),u=f+T.length-R-2;break}}for(u=-1;++u<s.length;)s[u][1].type==="attentionSequence"&&(s[u][1].type="data");return s}function tokenizeAttention(s,n){const u=this.parser.constructs.attentionMarkers.null,f=this.previous,y=classifyCharacter$1(f);let S;return A;function A(C){return S=C,s.enter("attentionSequence"),w(C)}function w(C){if(C===S)return s.consume(C),w;const T=s.exit("attentionSequence"),R=classifyCharacter$1(C),I=!R||R===2&&y||u.includes(C),N=!y||y===2&&R||u.includes(f);return T._open=!!(S===42?I:I&&(y||!N)),T._close=!!(S===42?N:N&&(R||!I)),n(C)}}function movePoint(s,n){s.column+=n,s.offset+=n,s._bufferIndex+=n}const autolink={name:"autolink",tokenize:tokenizeAutolink};function tokenizeAutolink(s,n,u){let f=0;return y;function y(L){return s.enter("autolink"),s.enter("autolinkMarker"),s.consume(L),s.exit("autolinkMarker"),s.enter("autolinkProtocol"),S}function S(L){return asciiAlpha$1(L)?(s.consume(L),A):L===64?u(L):T(L)}function A(L){return L===43||L===45||L===46||asciiAlphanumeric$1(L)?(f=1,w(L)):T(L)}function w(L){return L===58?(s.consume(L),f=0,C):(L===43||L===45||L===46||asciiAlphanumeric$1(L))&&f++<32?(s.consume(L),w):(f=0,T(L))}function C(L){return L===62?(s.exit("autolinkProtocol"),s.enter("autolinkMarker"),s.consume(L),s.exit("autolinkMarker"),s.exit("autolink"),n):L===null||L===32||L===60||asciiControl$1(L)?u(L):(s.consume(L),C)}function T(L){return L===64?(s.consume(L),R):asciiAtext(L)?(s.consume(L),T):u(L)}function R(L){return asciiAlphanumeric$1(L)?I(L):u(L)}function I(L){return L===46?(s.consume(L),f=0,R):L===62?(s.exit("autolinkProtocol").type="autolinkEmail",s.enter("autolinkMarker"),s.consume(L),s.exit("autolinkMarker"),s.exit("autolink"),n):N(L)}function N(L){if((L===45||asciiAlphanumeric$1(L))&&f++<63){const F=L===45?N:I;return s.consume(L),F}return u(L)}}const blankLine$1={partial:!0,tokenize:tokenizeBlankLine$1};function tokenizeBlankLine$1(s,n,u){return f;function f(S){return markdownSpace$1(S)?factorySpace$1(s,y,"linePrefix")(S):y(S)}function y(S){return S===null||markdownLineEnding$1(S)?n(S):u(S)}}const blockQuote={continuation:{tokenize:tokenizeBlockQuoteContinuation},exit:exit$1,name:"blockQuote",tokenize:tokenizeBlockQuoteStart};function tokenizeBlockQuoteStart(s,n,u){const f=this;return y;function y(A){if(A===62){const w=f.containerState;return w.open||(s.enter("blockQuote",{_container:!0}),w.open=!0),s.enter("blockQuotePrefix"),s.enter("blockQuoteMarker"),s.consume(A),s.exit("blockQuoteMarker"),S}return u(A)}function S(A){return markdownSpace$1(A)?(s.enter("blockQuotePrefixWhitespace"),s.consume(A),s.exit("blockQuotePrefixWhitespace"),s.exit("blockQuotePrefix"),n):(s.exit("blockQuotePrefix"),n(A))}}function tokenizeBlockQuoteContinuation(s,n,u){const f=this;return y;function y(A){return markdownSpace$1(A)?factorySpace$1(s,S,"linePrefix",f.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(A):S(A)}function S(A){return s.attempt(blockQuote,n,u)(A)}}function exit$1(s){s.exit("blockQuote")}const characterEscape={name:"characterEscape",tokenize:tokenizeCharacterEscape};function tokenizeCharacterEscape(s,n,u){return f;function f(S){return s.enter("characterEscape"),s.enter("escapeMarker"),s.consume(S),s.exit("escapeMarker"),y}function y(S){return asciiPunctuation(S)?(s.enter("characterEscapeValue"),s.consume(S),s.exit("characterEscapeValue"),s.exit("characterEscape"),n):u(S)}}const characterReference={name:"characterReference",tokenize:tokenizeCharacterReference};function tokenizeCharacterReference(s,n,u){const f=this;let y=0,S,A;return w;function w(I){return s.enter("characterReference"),s.enter("characterReferenceMarker"),s.consume(I),s.exit("characterReferenceMarker"),C}function C(I){return I===35?(s.enter("characterReferenceMarkerNumeric"),s.consume(I),s.exit("characterReferenceMarkerNumeric"),T):(s.enter("characterReferenceValue"),S=31,A=asciiAlphanumeric$1,R(I))}function T(I){return I===88||I===120?(s.enter("characterReferenceMarkerHexadecimal"),s.consume(I),s.exit("characterReferenceMarkerHexadecimal"),s.enter("characterReferenceValue"),S=6,A=asciiHexDigit,R):(s.enter("characterReferenceValue"),S=7,A=asciiDigit,R(I))}function R(I){if(I===59&&y){const N=s.exit("characterReferenceValue");return A===asciiAlphanumeric$1&&!decodeNamedCharacterReference(f.sliceSerialize(N))?u(I):(s.enter("characterReferenceMarker"),s.consume(I),s.exit("characterReferenceMarker"),s.exit("characterReference"),n)}return A(I)&&y++<S?(s.consume(I),R):u(I)}}const nonLazyContinuation={partial:!0,tokenize:tokenizeNonLazyContinuation},codeFenced={concrete:!0,name:"codeFenced",tokenize:tokenizeCodeFenced};function tokenizeCodeFenced(s,n,u){const f=this,y={partial:!0,tokenize:Z};let S=0,A=0,w;return C;function C(J){return T(J)}function T(J){const te=f.events[f.events.length-1];return S=te&&te[1].type==="linePrefix"?te[2].sliceSerialize(te[1],!0).length:0,w=J,s.enter("codeFenced"),s.enter("codeFencedFence"),s.enter("codeFencedFenceSequence"),R(J)}function R(J){return J===w?(A++,s.consume(J),R):A<3?u(J):(s.exit("codeFencedFenceSequence"),markdownSpace$1(J)?factorySpace$1(s,I,"whitespace")(J):I(J))}function I(J){return J===null||markdownLineEnding$1(J)?(s.exit("codeFencedFence"),f.interrupt?n(J):s.check(nonLazyContinuation,H,K)(J)):(s.enter("codeFencedFenceInfo"),s.enter("chunkString",{contentType:"string"}),N(J))}function N(J){return J===null||markdownLineEnding$1(J)?(s.exit("chunkString"),s.exit("codeFencedFenceInfo"),I(J)):markdownSpace$1(J)?(s.exit("chunkString"),s.exit("codeFencedFenceInfo"),factorySpace$1(s,L,"whitespace")(J)):J===96&&J===w?u(J):(s.consume(J),N)}function L(J){return J===null||markdownLineEnding$1(J)?I(J):(s.enter("codeFencedFenceMeta"),s.enter("chunkString",{contentType:"string"}),F(J))}function F(J){return J===null||markdownLineEnding$1(J)?(s.exit("chunkString"),s.exit("codeFencedFenceMeta"),I(J)):J===96&&J===w?u(J):(s.consume(J),F)}function H(J){return s.attempt(y,K,z)(J)}function z(J){return s.enter("lineEnding"),s.consume(J),s.exit("lineEnding"),U}function U(J){return S>0&&markdownSpace$1(J)?factorySpace$1(s,G,"linePrefix",S+1)(J):G(J)}function G(J){return J===null||markdownLineEnding$1(J)?s.check(nonLazyContinuation,H,K)(J):(s.enter("codeFlowValue"),Y(J))}function Y(J){return J===null||markdownLineEnding$1(J)?(s.exit("codeFlowValue"),G(J)):(s.consume(J),Y)}function K(J){return s.exit("codeFenced"),n(J)}function Z(J,te,de){let se=0;return ne;function ne(Be){return J.enter("lineEnding"),J.consume(Be),J.exit("lineEnding"),ge}function ge(Be){return J.enter("codeFencedFence"),markdownSpace$1(Be)?factorySpace$1(J,Ee,"linePrefix",f.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Be):Ee(Be)}function Ee(Be){return Be===w?(J.enter("codeFencedFenceSequence"),we(Be)):de(Be)}function we(Be){return Be===w?(se++,J.consume(Be),we):se>=A?(J.exit("codeFencedFenceSequence"),markdownSpace$1(Be)?factorySpace$1(J,Ie,"whitespace")(Be):Ie(Be)):de(Be)}function Ie(Be){return Be===null||markdownLineEnding$1(Be)?(J.exit("codeFencedFence"),te(Be)):de(Be)}}}function tokenizeNonLazyContinuation(s,n,u){const f=this;return y;function y(A){return A===null?u(A):(s.enter("lineEnding"),s.consume(A),s.exit("lineEnding"),S)}function S(A){return f.parser.lazy[f.now().line]?u(A):n(A)}}const codeIndented={name:"codeIndented",tokenize:tokenizeCodeIndented},furtherStart={partial:!0,tokenize:tokenizeFurtherStart};function tokenizeCodeIndented(s,n,u){const f=this;return y;function y(T){return s.enter("codeIndented"),factorySpace$1(s,S,"linePrefix",5)(T)}function S(T){const R=f.events[f.events.length-1];return R&&R[1].type==="linePrefix"&&R[2].sliceSerialize(R[1],!0).length>=4?A(T):u(T)}function A(T){return T===null?C(T):markdownLineEnding$1(T)?s.attempt(furtherStart,A,C)(T):(s.enter("codeFlowValue"),w(T))}function w(T){return T===null||markdownLineEnding$1(T)?(s.exit("codeFlowValue"),A(T)):(s.consume(T),w)}function C(T){return s.exit("codeIndented"),n(T)}}function tokenizeFurtherStart(s,n,u){const f=this;return y;function y(A){return f.parser.lazy[f.now().line]?u(A):markdownLineEnding$1(A)?(s.enter("lineEnding"),s.consume(A),s.exit("lineEnding"),y):factorySpace$1(s,S,"linePrefix",5)(A)}function S(A){const w=f.events[f.events.length-1];return w&&w[1].type==="linePrefix"&&w[2].sliceSerialize(w[1],!0).length>=4?n(A):markdownLineEnding$1(A)?y(A):u(A)}}const codeText={name:"codeText",previous:previous$1,resolve:resolveCodeText,tokenize:tokenizeCodeText};function resolveCodeText(s){let n=s.length-4,u=3,f,y;if((s[u][1].type==="lineEnding"||s[u][1].type==="space")&&(s[n][1].type==="lineEnding"||s[n][1].type==="space")){for(f=u;++f<n;)if(s[f][1].type==="codeTextData"){s[u][1].type="codeTextPadding",s[n][1].type="codeTextPadding",u+=2,n-=2;break}}for(f=u-1,n++;++f<=n;)y===void 0?f!==n&&s[f][1].type!=="lineEnding"&&(y=f):(f===n||s[f][1].type==="lineEnding")&&(s[y][1].type="codeTextData",f!==y+2&&(s[y][1].end=s[f-1][1].end,s.splice(y+2,f-y-2),n-=f-y-2,f=y+2),y=void 0);return s}function previous$1(s){return s!==96||this.events[this.events.length-1][1].type==="characterEscape"}function tokenizeCodeText(s,n,u){let f=0,y,S;return A;function A(I){return s.enter("codeText"),s.enter("codeTextSequence"),w(I)}function w(I){return I===96?(s.consume(I),f++,w):(s.exit("codeTextSequence"),C(I))}function C(I){return I===null?u(I):I===32?(s.enter("space"),s.consume(I),s.exit("space"),C):I===96?(S=s.enter("codeTextSequence"),y=0,R(I)):markdownLineEnding$1(I)?(s.enter("lineEnding"),s.consume(I),s.exit("lineEnding"),C):(s.enter("codeTextData"),T(I))}function T(I){return I===null||I===32||I===96||markdownLineEnding$1(I)?(s.exit("codeTextData"),C(I)):(s.consume(I),T)}function R(I){return I===96?(s.consume(I),y++,R):y===f?(s.exit("codeTextSequence"),s.exit("codeText"),n(I)):(S.type="codeTextData",T(I))}}class SpliceBuffer{constructor(n){this.left=n?[...n]:[],this.right=[]}get(n){if(n<0||n>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+n+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return n<this.left.length?this.left[n]:this.right[this.right.length-n+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(n,u){const f=u??Number.POSITIVE_INFINITY;return f<this.left.length?this.left.slice(n,f):n>this.left.length?this.right.slice(this.right.length-f+this.left.length,this.right.length-n+this.left.length).reverse():this.left.slice(n).concat(this.right.slice(this.right.length-f+this.left.length).reverse())}splice(n,u,f){const y=u||0;this.setCursor(Math.trunc(n));const S=this.right.splice(this.right.length-y,Number.POSITIVE_INFINITY);return f&&chunkedPush(this.left,f),S.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(n){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(n)}pushMany(n){this.setCursor(Number.POSITIVE_INFINITY),chunkedPush(this.left,n)}unshift(n){this.setCursor(0),this.right.push(n)}unshiftMany(n){this.setCursor(0),chunkedPush(this.right,n.reverse())}setCursor(n){if(!(n===this.left.length||n>this.left.length&&this.right.length===0||n<0&&this.left.length===0))if(n<this.left.length){const u=this.left.splice(n,Number.POSITIVE_INFINITY);chunkedPush(this.right,u.reverse())}else{const u=this.right.splice(this.left.length+this.right.length-n,Number.POSITIVE_INFINITY);chunkedPush(this.left,u.reverse())}}}function chunkedPush(s,n){let u=0;if(n.length<1e4)s.push(...n);else for(;u<n.length;)s.push(...n.slice(u,u+1e4)),u+=1e4}function subtokenize(s){const n={};let u=-1,f,y,S,A,w,C,T;const R=new SpliceBuffer(s);for(;++u<R.length;){for(;u in n;)u=n[u];if(f=R.get(u),u&&f[1].type==="chunkFlow"&&R.get(u-1)[1].type==="listItemPrefix"&&(C=f[1]._tokenizer.events,S=0,S<C.length&&C[S][1].type==="lineEndingBlank"&&(S+=2),S<C.length&&C[S][1].type==="content"))for(;++S<C.length&&C[S][1].type!=="content";)C[S][1].type==="chunkText"&&(C[S][1]._isInFirstContentOfListItem=!0,S++);if(f[0]==="enter")f[1].contentType&&(Object.assign(n,subcontent(R,u)),u=n[u],T=!0);else if(f[1]._container){for(S=u,y=void 0;S--;)if(A=R.get(S),A[1].type==="lineEnding"||A[1].type==="lineEndingBlank")A[0]==="enter"&&(y&&(R.get(y)[1].type="lineEndingBlank"),A[1].type="lineEnding",y=S);else if(!(A[1].type==="linePrefix"||A[1].type==="listItemIndent"))break;y&&(f[1].end={...R.get(y)[1].start},w=R.slice(y,u),w.unshift(f),R.splice(y,u-y+1,w))}}return splice$1(s,0,Number.POSITIVE_INFINITY,R.slice(0)),!T}function subcontent(s,n){const u=s.get(n)[1],f=s.get(n)[2];let y=n-1;const S=[];let A=u._tokenizer;A||(A=f.parser[u.contentType](u.start),u._contentTypeTextTrailing&&(A._contentTypeTextTrailing=!0));const w=A.events,C=[],T={};let R,I,N=-1,L=u,F=0,H=0;const z=[H];for(;L;){for(;s.get(++y)[1]!==L;);S.push(y),L._tokenizer||(R=f.sliceStream(L),L.next||R.push(null),I&&A.defineSkip(L.start),L._isInFirstContentOfListItem&&(A._gfmTasklistFirstContentOfListItem=!0),A.write(R),L._isInFirstContentOfListItem&&(A._gfmTasklistFirstContentOfListItem=void 0)),I=L,L=L.next}for(L=u;++N<w.length;)w[N][0]==="exit"&&w[N-1][0]==="enter"&&w[N][1].type===w[N-1][1].type&&w[N][1].start.line!==w[N][1].end.line&&(H=N+1,z.push(H),L._tokenizer=void 0,L.previous=void 0,L=L.next);for(A.events=[],L?(L._tokenizer=void 0,L.previous=void 0):z.pop(),N=z.length;N--;){const U=w.slice(z[N],z[N+1]),G=S.pop();C.push([G,G+U.length-1]),s.splice(G,2,U)}for(C.reverse(),N=-1;++N<C.length;)T[F+C[N][0]]=F+C[N][1],F+=C[N][1]-C[N][0]-1;return T}const content={resolve:resolveContent,tokenize:tokenizeContent},continuationConstruct={partial:!0,tokenize:tokenizeContinuation};function resolveContent(s){return subtokenize(s),s}function tokenizeContent(s,n){let u;return f;function f(w){return s.enter("content"),u=s.enter("chunkContent",{contentType:"content"}),y(w)}function y(w){return w===null?S(w):markdownLineEnding$1(w)?s.check(continuationConstruct,A,S)(w):(s.consume(w),y)}function S(w){return s.exit("chunkContent"),s.exit("content"),n(w)}function A(w){return s.consume(w),s.exit("chunkContent"),u.next=s.enter("chunkContent",{contentType:"content",previous:u}),u=u.next,y}}function tokenizeContinuation(s,n,u){const f=this;return y;function y(A){return s.exit("chunkContent"),s.enter("lineEnding"),s.consume(A),s.exit("lineEnding"),factorySpace$1(s,S,"linePrefix")}function S(A){if(A===null||markdownLineEnding$1(A))return u(A);const w=f.events[f.events.length-1];return!f.parser.constructs.disable.null.includes("codeIndented")&&w&&w[1].type==="linePrefix"&&w[2].sliceSerialize(w[1],!0).length>=4?n(A):s.interrupt(f.parser.constructs.flow,u,n)(A)}}function factoryDestination(s,n,u,f,y,S,A,w,C){const T=C||Number.POSITIVE_INFINITY;let R=0;return I;function I(U){return U===60?(s.enter(f),s.enter(y),s.enter(S),s.consume(U),s.exit(S),N):U===null||U===32||U===41||asciiControl$1(U)?u(U):(s.enter(f),s.enter(A),s.enter(w),s.enter("chunkString",{contentType:"string"}),H(U))}function N(U){return U===62?(s.enter(S),s.consume(U),s.exit(S),s.exit(y),s.exit(f),n):(s.enter(w),s.enter("chunkString",{contentType:"string"}),L(U))}function L(U){return U===62?(s.exit("chunkString"),s.exit(w),N(U)):U===null||U===60||markdownLineEnding$1(U)?u(U):(s.consume(U),U===92?F:L)}function F(U){return U===60||U===62||U===92?(s.consume(U),L):L(U)}function H(U){return!R&&(U===null||U===41||markdownLineEndingOrSpace$1(U))?(s.exit("chunkString"),s.exit(w),s.exit(A),s.exit(f),n(U)):R<T&&U===40?(s.consume(U),R++,H):U===41?(s.consume(U),R--,H):U===null||U===32||U===40||asciiControl$1(U)?u(U):(s.consume(U),U===92?z:H)}function z(U){return U===40||U===41||U===92?(s.consume(U),H):H(U)}}function factoryLabel(s,n,u,f,y,S){const A=this;let w=0,C;return T;function T(L){return s.enter(f),s.enter(y),s.consume(L),s.exit(y),s.enter(S),R}function R(L){return w>999||L===null||L===91||L===93&&!C||L===94&&!w&&"_hiddenFootnoteSupport"in A.parser.constructs?u(L):L===93?(s.exit(S),s.enter(y),s.consume(L),s.exit(y),s.exit(f),n):markdownLineEnding$1(L)?(s.enter("lineEnding"),s.consume(L),s.exit("lineEnding"),R):(s.enter("chunkString",{contentType:"string"}),I(L))}function I(L){return L===null||L===91||L===93||markdownLineEnding$1(L)||w++>999?(s.exit("chunkString"),R(L)):(s.consume(L),C||(C=!markdownSpace$1(L)),L===92?N:I)}function N(L){return L===91||L===92||L===93?(s.consume(L),w++,I):I(L)}}function factoryTitle(s,n,u,f,y,S){let A;return w;function w(N){return N===34||N===39||N===40?(s.enter(f),s.enter(y),s.consume(N),s.exit(y),A=N===40?41:N,C):u(N)}function C(N){return N===A?(s.enter(y),s.consume(N),s.exit(y),s.exit(f),n):(s.enter(S),T(N))}function T(N){return N===A?(s.exit(S),C(A)):N===null?u(N):markdownLineEnding$1(N)?(s.enter("lineEnding"),s.consume(N),s.exit("lineEnding"),factorySpace$1(s,T,"linePrefix")):(s.enter("chunkString",{contentType:"string"}),R(N))}function R(N){return N===A||N===null||markdownLineEnding$1(N)?(s.exit("chunkString"),T(N)):(s.consume(N),N===92?I:R)}function I(N){return N===A||N===92?(s.consume(N),R):R(N)}}function factoryWhitespace(s,n){let u;return f;function f(y){return markdownLineEnding$1(y)?(s.enter("lineEnding"),s.consume(y),s.exit("lineEnding"),u=!0,f):markdownSpace$1(y)?factorySpace$1(s,f,u?"linePrefix":"lineSuffix")(y):n(y)}}const definition$1={name:"definition",tokenize:tokenizeDefinition},titleBefore={partial:!0,tokenize:tokenizeTitleBefore};function tokenizeDefinition(s,n,u){const f=this;let y;return S;function S(L){return s.enter("definition"),A(L)}function A(L){return factoryLabel.call(f,s,w,u,"definitionLabel","definitionLabelMarker","definitionLabelString")(L)}function w(L){return y=normalizeIdentifier$1(f.sliceSerialize(f.events[f.events.length-1][1]).slice(1,-1)),L===58?(s.enter("definitionMarker"),s.consume(L),s.exit("definitionMarker"),C):u(L)}function C(L){return markdownLineEndingOrSpace$1(L)?factoryWhitespace(s,T)(L):T(L)}function T(L){return factoryDestination(s,R,u,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(L)}function R(L){return s.attempt(titleBefore,I,I)(L)}function I(L){return markdownSpace$1(L)?factorySpace$1(s,N,"whitespace")(L):N(L)}function N(L){return L===null||markdownLineEnding$1(L)?(s.exit("definition"),f.parser.defined.push(y),n(L)):u(L)}}function tokenizeTitleBefore(s,n,u){return f;function f(w){return markdownLineEndingOrSpace$1(w)?factoryWhitespace(s,y)(w):u(w)}function y(w){return factoryTitle(s,S,u,"definitionTitle","definitionTitleMarker","definitionTitleString")(w)}function S(w){return markdownSpace$1(w)?factorySpace$1(s,A,"whitespace")(w):A(w)}function A(w){return w===null||markdownLineEnding$1(w)?n(w):u(w)}}const hardBreakEscape={name:"hardBreakEscape",tokenize:tokenizeHardBreakEscape};function tokenizeHardBreakEscape(s,n,u){return f;function f(S){return s.enter("hardBreakEscape"),s.consume(S),y}function y(S){return markdownLineEnding$1(S)?(s.exit("hardBreakEscape"),n(S)):u(S)}}const headingAtx={name:"headingAtx",resolve:resolveHeadingAtx,tokenize:tokenizeHeadingAtx};function resolveHeadingAtx(s,n){let u=s.length-2,f=3,y,S;return s[f][1].type==="whitespace"&&(f+=2),u-2>f&&s[u][1].type==="whitespace"&&(u-=2),s[u][1].type==="atxHeadingSequence"&&(f===u-1||u-4>f&&s[u-2][1].type==="whitespace")&&(u-=f+1===u?2:4),u>f&&(y={type:"atxHeadingText",start:s[f][1].start,end:s[u][1].end},S={type:"chunkText",start:s[f][1].start,end:s[u][1].end,contentType:"text"},splice$1(s,f,u-f+1,[["enter",y,n],["enter",S,n],["exit",S,n],["exit",y,n]])),s}function tokenizeHeadingAtx(s,n,u){let f=0;return y;function y(R){return s.enter("atxHeading"),S(R)}function S(R){return s.enter("atxHeadingSequence"),A(R)}function A(R){return R===35&&f++<6?(s.consume(R),A):R===null||markdownLineEndingOrSpace$1(R)?(s.exit("atxHeadingSequence"),w(R)):u(R)}function w(R){return R===35?(s.enter("atxHeadingSequence"),C(R)):R===null||markdownLineEnding$1(R)?(s.exit("atxHeading"),n(R)):markdownSpace$1(R)?factorySpace$1(s,w,"whitespace")(R):(s.enter("atxHeadingText"),T(R))}function C(R){return R===35?(s.consume(R),C):(s.exit("atxHeadingSequence"),w(R))}function T(R){return R===null||R===35||markdownLineEndingOrSpace$1(R)?(s.exit("atxHeadingText"),w(R)):(s.consume(R),T)}}const htmlBlockNames=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],htmlRawNames=["pre","script","style","textarea"],htmlFlow={concrete:!0,name:"htmlFlow",resolveTo:resolveToHtmlFlow,tokenize:tokenizeHtmlFlow},blankLineBefore={partial:!0,tokenize:tokenizeBlankLineBefore},nonLazyContinuationStart={partial:!0,tokenize:tokenizeNonLazyContinuationStart};function resolveToHtmlFlow(s){let n=s.length;for(;n--&&!(s[n][0]==="enter"&&s[n][1].type==="htmlFlow"););return n>1&&s[n-2][1].type==="linePrefix"&&(s[n][1].start=s[n-2][1].start,s[n+1][1].start=s[n-2][1].start,s.splice(n-2,2)),s}function tokenizeHtmlFlow(s,n,u){const f=this;let y,S,A,w,C;return T;function T(he){return R(he)}function R(he){return s.enter("htmlFlow"),s.enter("htmlFlowData"),s.consume(he),I}function I(he){return he===33?(s.consume(he),N):he===47?(s.consume(he),S=!0,H):he===63?(s.consume(he),y=3,f.interrupt?n:oe):asciiAlpha$1(he)?(s.consume(he),A=String.fromCharCode(he),z):u(he)}function N(he){return he===45?(s.consume(he),y=2,L):he===91?(s.consume(he),y=5,w=0,F):asciiAlpha$1(he)?(s.consume(he),y=4,f.interrupt?n:oe):u(he)}function L(he){return he===45?(s.consume(he),f.interrupt?n:oe):u(he)}function F(he){const ue="CDATA[";return he===ue.charCodeAt(w++)?(s.consume(he),w===ue.length?f.interrupt?n:Ee:F):u(he)}function H(he){return asciiAlpha$1(he)?(s.consume(he),A=String.fromCharCode(he),z):u(he)}function z(he){if(he===null||he===47||he===62||markdownLineEndingOrSpace$1(he)){const ue=he===47,ye=A.toLowerCase();return!ue&&!S&&htmlRawNames.includes(ye)?(y=1,f.interrupt?n(he):Ee(he)):htmlBlockNames.includes(A.toLowerCase())?(y=6,ue?(s.consume(he),U):f.interrupt?n(he):Ee(he)):(y=7,f.interrupt&&!f.parser.lazy[f.now().line]?u(he):S?G(he):Y(he))}return he===45||asciiAlphanumeric$1(he)?(s.consume(he),A+=String.fromCharCode(he),z):u(he)}function U(he){return he===62?(s.consume(he),f.interrupt?n:Ee):u(he)}function G(he){return markdownSpace$1(he)?(s.consume(he),G):ne(he)}function Y(he){return he===47?(s.consume(he),ne):he===58||he===95||asciiAlpha$1(he)?(s.consume(he),K):markdownSpace$1(he)?(s.consume(he),Y):ne(he)}function K(he){return he===45||he===46||he===58||he===95||asciiAlphanumeric$1(he)?(s.consume(he),K):Z(he)}function Z(he){return he===61?(s.consume(he),J):markdownSpace$1(he)?(s.consume(he),Z):Y(he)}function J(he){return he===null||he===60||he===61||he===62||he===96?u(he):he===34||he===39?(s.consume(he),C=he,te):markdownSpace$1(he)?(s.consume(he),J):de(he)}function te(he){return he===C?(s.consume(he),C=null,se):he===null||markdownLineEnding$1(he)?u(he):(s.consume(he),te)}function de(he){return he===null||he===34||he===39||he===47||he===60||he===61||he===62||he===96||markdownLineEndingOrSpace$1(he)?Z(he):(s.consume(he),de)}function se(he){return he===47||he===62||markdownSpace$1(he)?Y(he):u(he)}function ne(he){return he===62?(s.consume(he),ge):u(he)}function ge(he){return he===null||markdownLineEnding$1(he)?Ee(he):markdownSpace$1(he)?(s.consume(he),ge):u(he)}function Ee(he){return he===45&&y===2?(s.consume(he),Me):he===60&&y===1?(s.consume(he),Re):he===62&&y===4?(s.consume(he),ae):he===63&&y===3?(s.consume(he),oe):he===93&&y===5?(s.consume(he),Se):markdownLineEnding$1(he)&&(y===6||y===7)?(s.exit("htmlFlowData"),s.check(blankLineBefore,be,we)(he)):he===null||markdownLineEnding$1(he)?(s.exit("htmlFlowData"),we(he)):(s.consume(he),Ee)}function we(he){return s.check(nonLazyContinuationStart,Ie,be)(he)}function Ie(he){return s.enter("lineEnding"),s.consume(he),s.exit("lineEnding"),Be}function Be(he){return he===null||markdownLineEnding$1(he)?we(he):(s.enter("htmlFlowData"),Ee(he))}function Me(he){return he===45?(s.consume(he),oe):Ee(he)}function Re(he){return he===47?(s.consume(he),A="",Te):Ee(he)}function Te(he){if(he===62){const ue=A.toLowerCase();return htmlRawNames.includes(ue)?(s.consume(he),ae):Ee(he)}return asciiAlpha$1(he)&&A.length<8?(s.consume(he),A+=String.fromCharCode(he),Te):Ee(he)}function Se(he){return he===93?(s.consume(he),oe):Ee(he)}function oe(he){return he===62?(s.consume(he),ae):he===45&&y===2?(s.consume(he),oe):Ee(he)}function ae(he){return he===null||markdownLineEnding$1(he)?(s.exit("htmlFlowData"),be(he)):(s.consume(he),ae)}function be(he){return s.exit("htmlFlow"),n(he)}}function tokenizeNonLazyContinuationStart(s,n,u){const f=this;return y;function y(A){return markdownLineEnding$1(A)?(s.enter("lineEnding"),s.consume(A),s.exit("lineEnding"),S):u(A)}function S(A){return f.parser.lazy[f.now().line]?u(A):n(A)}}function tokenizeBlankLineBefore(s,n,u){return f;function f(y){return s.enter("lineEnding"),s.consume(y),s.exit("lineEnding"),s.attempt(blankLine$1,n,u)}}const htmlText={name:"htmlText",tokenize:tokenizeHtmlText};function tokenizeHtmlText(s,n,u){const f=this;let y,S,A;return w;function w(oe){return s.enter("htmlText"),s.enter("htmlTextData"),s.consume(oe),C}function C(oe){return oe===33?(s.consume(oe),T):oe===47?(s.consume(oe),Z):oe===63?(s.consume(oe),Y):asciiAlpha$1(oe)?(s.consume(oe),de):u(oe)}function T(oe){return oe===45?(s.consume(oe),R):oe===91?(s.consume(oe),S=0,F):asciiAlpha$1(oe)?(s.consume(oe),G):u(oe)}function R(oe){return oe===45?(s.consume(oe),L):u(oe)}function I(oe){return oe===null?u(oe):oe===45?(s.consume(oe),N):markdownLineEnding$1(oe)?(A=I,Re(oe)):(s.consume(oe),I)}function N(oe){return oe===45?(s.consume(oe),L):I(oe)}function L(oe){return oe===62?Me(oe):oe===45?N(oe):I(oe)}function F(oe){const ae="CDATA[";return oe===ae.charCodeAt(S++)?(s.consume(oe),S===ae.length?H:F):u(oe)}function H(oe){return oe===null?u(oe):oe===93?(s.consume(oe),z):markdownLineEnding$1(oe)?(A=H,Re(oe)):(s.consume(oe),H)}function z(oe){return oe===93?(s.consume(oe),U):H(oe)}function U(oe){return oe===62?Me(oe):oe===93?(s.consume(oe),U):H(oe)}function G(oe){return oe===null||oe===62?Me(oe):markdownLineEnding$1(oe)?(A=G,Re(oe)):(s.consume(oe),G)}function Y(oe){return oe===null?u(oe):oe===63?(s.consume(oe),K):markdownLineEnding$1(oe)?(A=Y,Re(oe)):(s.consume(oe),Y)}function K(oe){return oe===62?Me(oe):Y(oe)}function Z(oe){return asciiAlpha$1(oe)?(s.consume(oe),J):u(oe)}function J(oe){return oe===45||asciiAlphanumeric$1(oe)?(s.consume(oe),J):te(oe)}function te(oe){return markdownLineEnding$1(oe)?(A=te,Re(oe)):markdownSpace$1(oe)?(s.consume(oe),te):Me(oe)}function de(oe){return oe===45||asciiAlphanumeric$1(oe)?(s.consume(oe),de):oe===47||oe===62||markdownLineEndingOrSpace$1(oe)?se(oe):u(oe)}function se(oe){return oe===47?(s.consume(oe),Me):oe===58||oe===95||asciiAlpha$1(oe)?(s.consume(oe),ne):markdownLineEnding$1(oe)?(A=se,Re(oe)):markdownSpace$1(oe)?(s.consume(oe),se):Me(oe)}function ne(oe){return oe===45||oe===46||oe===58||oe===95||asciiAlphanumeric$1(oe)?(s.consume(oe),ne):ge(oe)}function ge(oe){return oe===61?(s.consume(oe),Ee):markdownLineEnding$1(oe)?(A=ge,Re(oe)):markdownSpace$1(oe)?(s.consume(oe),ge):se(oe)}function Ee(oe){return oe===null||oe===60||oe===61||oe===62||oe===96?u(oe):oe===34||oe===39?(s.consume(oe),y=oe,we):markdownLineEnding$1(oe)?(A=Ee,Re(oe)):markdownSpace$1(oe)?(s.consume(oe),Ee):(s.consume(oe),Ie)}function we(oe){return oe===y?(s.consume(oe),y=void 0,Be):oe===null?u(oe):markdownLineEnding$1(oe)?(A=we,Re(oe)):(s.consume(oe),we)}function Ie(oe){return oe===null||oe===34||oe===39||oe===60||oe===61||oe===96?u(oe):oe===47||oe===62||markdownLineEndingOrSpace$1(oe)?se(oe):(s.consume(oe),Ie)}function Be(oe){return oe===47||oe===62||markdownLineEndingOrSpace$1(oe)?se(oe):u(oe)}function Me(oe){return oe===62?(s.consume(oe),s.exit("htmlTextData"),s.exit("htmlText"),n):u(oe)}function Re(oe){return s.exit("htmlTextData"),s.enter("lineEnding"),s.consume(oe),s.exit("lineEnding"),Te}function Te(oe){return markdownSpace$1(oe)?factorySpace$1(s,Se,"linePrefix",f.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(oe):Se(oe)}function Se(oe){return s.enter("htmlTextData"),A(oe)}}const labelEnd={name:"labelEnd",resolveAll:resolveAllLabelEnd,resolveTo:resolveToLabelEnd,tokenize:tokenizeLabelEnd},resourceConstruct={tokenize:tokenizeResource},referenceFullConstruct={tokenize:tokenizeReferenceFull},referenceCollapsedConstruct={tokenize:tokenizeReferenceCollapsed};function resolveAllLabelEnd(s){let n=-1;const u=[];for(;++n<s.length;){const f=s[n][1];if(u.push(s[n]),f.type==="labelImage"||f.type==="labelLink"||f.type==="labelEnd"){const y=f.type==="labelImage"?4:2;f.type="data",n+=y}}return s.length!==u.length&&splice$1(s,0,s.length,u),s}function resolveToLabelEnd(s,n){let u=s.length,f=0,y,S,A,w;for(;u--;)if(y=s[u][1],S){if(y.type==="link"||y.type==="labelLink"&&y._inactive)break;s[u][0]==="enter"&&y.type==="labelLink"&&(y._inactive=!0)}else if(A){if(s[u][0]==="enter"&&(y.type==="labelImage"||y.type==="labelLink")&&!y._balanced&&(S=u,y.type!=="labelLink")){f=2;break}}else y.type==="labelEnd"&&(A=u);const C={type:s[S][1].type==="labelLink"?"link":"image",start:{...s[S][1].start},end:{...s[s.length-1][1].end}},T={type:"label",start:{...s[S][1].start},end:{...s[A][1].end}},R={type:"labelText",start:{...s[S+f+2][1].end},end:{...s[A-2][1].start}};return w=[["enter",C,n],["enter",T,n]],w=push(w,s.slice(S+1,S+f+3)),w=push(w,[["enter",R,n]]),w=push(w,resolveAll$1(n.parser.constructs.insideSpan.null,s.slice(S+f+4,A-3),n)),w=push(w,[["exit",R,n],s[A-2],s[A-1],["exit",T,n]]),w=push(w,s.slice(A+1)),w=push(w,[["exit",C,n]]),splice$1(s,S,s.length,w),s}function tokenizeLabelEnd(s,n,u){const f=this;let y=f.events.length,S,A;for(;y--;)if((f.events[y][1].type==="labelImage"||f.events[y][1].type==="labelLink")&&!f.events[y][1]._balanced){S=f.events[y][1];break}return w;function w(N){return S?S._inactive?I(N):(A=f.parser.defined.includes(normalizeIdentifier$1(f.sliceSerialize({start:S.end,end:f.now()}))),s.enter("labelEnd"),s.enter("labelMarker"),s.consume(N),s.exit("labelMarker"),s.exit("labelEnd"),C):u(N)}function C(N){return N===40?s.attempt(resourceConstruct,R,A?R:I)(N):N===91?s.attempt(referenceFullConstruct,R,A?T:I)(N):A?R(N):I(N)}function T(N){return s.attempt(referenceCollapsedConstruct,R,I)(N)}function R(N){return n(N)}function I(N){return S._balanced=!0,u(N)}}function tokenizeResource(s,n,u){return f;function f(I){return s.enter("resource"),s.enter("resourceMarker"),s.consume(I),s.exit("resourceMarker"),y}function y(I){return markdownLineEndingOrSpace$1(I)?factoryWhitespace(s,S)(I):S(I)}function S(I){return I===41?R(I):factoryDestination(s,A,w,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(I)}function A(I){return markdownLineEndingOrSpace$1(I)?factoryWhitespace(s,C)(I):R(I)}function w(I){return u(I)}function C(I){return I===34||I===39||I===40?factoryTitle(s,T,u,"resourceTitle","resourceTitleMarker","resourceTitleString")(I):R(I)}function T(I){return markdownLineEndingOrSpace$1(I)?factoryWhitespace(s,R)(I):R(I)}function R(I){return I===41?(s.enter("resourceMarker"),s.consume(I),s.exit("resourceMarker"),s.exit("resource"),n):u(I)}}function tokenizeReferenceFull(s,n,u){const f=this;return y;function y(w){return factoryLabel.call(f,s,S,A,"reference","referenceMarker","referenceString")(w)}function S(w){return f.parser.defined.includes(normalizeIdentifier$1(f.sliceSerialize(f.events[f.events.length-1][1]).slice(1,-1)))?n(w):u(w)}function A(w){return u(w)}}function tokenizeReferenceCollapsed(s,n,u){return f;function f(S){return s.enter("reference"),s.enter("referenceMarker"),s.consume(S),s.exit("referenceMarker"),y}function y(S){return S===93?(s.enter("referenceMarker"),s.consume(S),s.exit("referenceMarker"),s.exit("reference"),n):u(S)}}const labelStartImage={name:"labelStartImage",resolveAll:labelEnd.resolveAll,tokenize:tokenizeLabelStartImage};function tokenizeLabelStartImage(s,n,u){const f=this;return y;function y(w){return s.enter("labelImage"),s.enter("labelImageMarker"),s.consume(w),s.exit("labelImageMarker"),S}function S(w){return w===91?(s.enter("labelMarker"),s.consume(w),s.exit("labelMarker"),s.exit("labelImage"),A):u(w)}function A(w){return w===94&&"_hiddenFootnoteSupport"in f.parser.constructs?u(w):n(w)}}const labelStartLink={name:"labelStartLink",resolveAll:labelEnd.resolveAll,tokenize:tokenizeLabelStartLink};function tokenizeLabelStartLink(s,n,u){const f=this;return y;function y(A){return s.enter("labelLink"),s.enter("labelMarker"),s.consume(A),s.exit("labelMarker"),s.exit("labelLink"),S}function S(A){return A===94&&"_hiddenFootnoteSupport"in f.parser.constructs?u(A):n(A)}}const lineEnding={name:"lineEnding",tokenize:tokenizeLineEnding};function tokenizeLineEnding(s,n){return u;function u(f){return s.enter("lineEnding"),s.consume(f),s.exit("lineEnding"),factorySpace$1(s,n,"linePrefix")}}const thematicBreak$2={name:"thematicBreak",tokenize:tokenizeThematicBreak};function tokenizeThematicBreak(s,n,u){let f=0,y;return S;function S(T){return s.enter("thematicBreak"),A(T)}function A(T){return y=T,w(T)}function w(T){return T===y?(s.enter("thematicBreakSequence"),C(T)):f>=3&&(T===null||markdownLineEnding$1(T))?(s.exit("thematicBreak"),n(T)):u(T)}function C(T){return T===y?(s.consume(T),f++,C):(s.exit("thematicBreakSequence"),markdownSpace$1(T)?factorySpace$1(s,w,"whitespace")(T):w(T))}}const list$2={continuation:{tokenize:tokenizeListContinuation},exit:tokenizeListEnd,name:"list",tokenize:tokenizeListStart},listItemPrefixWhitespaceConstruct={partial:!0,tokenize:tokenizeListItemPrefixWhitespace},indentConstruct={partial:!0,tokenize:tokenizeIndent$1};function tokenizeListStart(s,n,u){const f=this,y=f.events[f.events.length-1];let S=y&&y[1].type==="linePrefix"?y[2].sliceSerialize(y[1],!0).length:0,A=0;return w;function w(L){const F=f.containerState.type||(L===42||L===43||L===45?"listUnordered":"listOrdered");if(F==="listUnordered"?!f.containerState.marker||L===f.containerState.marker:asciiDigit(L)){if(f.containerState.type||(f.containerState.type=F,s.enter(F,{_container:!0})),F==="listUnordered")return s.enter("listItemPrefix"),L===42||L===45?s.check(thematicBreak$2,u,T)(L):T(L);if(!f.interrupt||L===49)return s.enter("listItemPrefix"),s.enter("listItemValue"),C(L)}return u(L)}function C(L){return asciiDigit(L)&&++A<10?(s.consume(L),C):(!f.interrupt||A<2)&&(f.containerState.marker?L===f.containerState.marker:L===41||L===46)?(s.exit("listItemValue"),T(L)):u(L)}function T(L){return s.enter("listItemMarker"),s.consume(L),s.exit("listItemMarker"),f.containerState.marker=f.containerState.marker||L,s.check(blankLine$1,f.interrupt?u:R,s.attempt(listItemPrefixWhitespaceConstruct,N,I))}function R(L){return f.containerState.initialBlankLine=!0,S++,N(L)}function I(L){return markdownSpace$1(L)?(s.enter("listItemPrefixWhitespace"),s.consume(L),s.exit("listItemPrefixWhitespace"),N):u(L)}function N(L){return f.containerState.size=S+f.sliceSerialize(s.exit("listItemPrefix"),!0).length,n(L)}}function tokenizeListContinuation(s,n,u){const f=this;return f.containerState._closeFlow=void 0,s.check(blankLine$1,y,S);function y(w){return f.containerState.furtherBlankLines=f.containerState.furtherBlankLines||f.containerState.initialBlankLine,factorySpace$1(s,n,"listItemIndent",f.containerState.size+1)(w)}function S(w){return f.containerState.furtherBlankLines||!markdownSpace$1(w)?(f.containerState.furtherBlankLines=void 0,f.containerState.initialBlankLine=void 0,A(w)):(f.containerState.furtherBlankLines=void 0,f.containerState.initialBlankLine=void 0,s.attempt(indentConstruct,n,A)(w))}function A(w){return f.containerState._closeFlow=!0,f.interrupt=void 0,factorySpace$1(s,s.attempt(list$2,n,u),"linePrefix",f.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(w)}}function tokenizeIndent$1(s,n,u){const f=this;return factorySpace$1(s,y,"listItemIndent",f.containerState.size+1);function y(S){const A=f.events[f.events.length-1];return A&&A[1].type==="listItemIndent"&&A[2].sliceSerialize(A[1],!0).length===f.containerState.size?n(S):u(S)}}function tokenizeListEnd(s){s.exit(this.containerState.type)}function tokenizeListItemPrefixWhitespace(s,n,u){const f=this;return factorySpace$1(s,y,"listItemPrefixWhitespace",f.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function y(S){const A=f.events[f.events.length-1];return!markdownSpace$1(S)&&A&&A[1].type==="listItemPrefixWhitespace"?n(S):u(S)}}const setextUnderline={name:"setextUnderline",resolveTo:resolveToSetextUnderline,tokenize:tokenizeSetextUnderline};function resolveToSetextUnderline(s,n){let u=s.length,f,y,S;for(;u--;)if(s[u][0]==="enter"){if(s[u][1].type==="content"){f=u;break}s[u][1].type==="paragraph"&&(y=u)}else s[u][1].type==="content"&&s.splice(u,1),!S&&s[u][1].type==="definition"&&(S=u);const A={type:"setextHeading",start:{...s[f][1].start},end:{...s[s.length-1][1].end}};return s[y][1].type="setextHeadingText",S?(s.splice(y,0,["enter",A,n]),s.splice(S+1,0,["exit",s[f][1],n]),s[f][1].end={...s[S][1].end}):s[f][1]=A,s.push(["exit",A,n]),s}function tokenizeSetextUnderline(s,n,u){const f=this;let y;return S;function S(T){let R=f.events.length,I;for(;R--;)if(f.events[R][1].type!=="lineEnding"&&f.events[R][1].type!=="linePrefix"&&f.events[R][1].type!=="content"){I=f.events[R][1].type==="paragraph";break}return!f.parser.lazy[f.now().line]&&(f.interrupt||I)?(s.enter("setextHeadingLine"),y=T,A(T)):u(T)}function A(T){return s.enter("setextHeadingLineSequence"),w(T)}function w(T){return T===y?(s.consume(T),w):(s.exit("setextHeadingLineSequence"),markdownSpace$1(T)?factorySpace$1(s,C,"lineSuffix")(T):C(T))}function C(T){return T===null||markdownLineEnding$1(T)?(s.exit("setextHeadingLine"),n(T)):u(T)}}const flow$2={tokenize:initializeFlow};function initializeFlow(s){const n=this,u=s.attempt(blankLine$1,f,s.attempt(this.parser.constructs.flowInitial,y,factorySpace$1(s,s.attempt(this.parser.constructs.flow,y,s.attempt(content,y)),"linePrefix")));return u;function f(S){if(S===null){s.consume(S);return}return s.enter("lineEndingBlank"),s.consume(S),s.exit("lineEndingBlank"),n.currentConstruct=void 0,u}function y(S){if(S===null){s.consume(S);return}return s.enter("lineEnding"),s.consume(S),s.exit("lineEnding"),n.currentConstruct=void 0,u}}const resolver={resolveAll:createResolver()},string$3=initializeFactory("string"),text$4=initializeFactory("text");function initializeFactory(s){return{resolveAll:createResolver(s==="text"?resolveAllLineSuffixes:void 0),tokenize:n};function n(u){const f=this,y=this.parser.constructs[s],S=u.attempt(y,A,w);return A;function A(R){return T(R)?S(R):w(R)}function w(R){if(R===null){u.consume(R);return}return u.enter("data"),u.consume(R),C}function C(R){return T(R)?(u.exit("data"),S(R)):(u.consume(R),C)}function T(R){if(R===null)return!0;const I=y[R];let N=-1;if(I)for(;++N<I.length;){const L=I[N];if(!L.previous||L.previous.call(f,f.previous))return!0}return!1}}}function createResolver(s){return n;function n(u,f){let y=-1,S;for(;++y<=u.length;)S===void 0?u[y]&&u[y][1].type==="data"&&(S=y,y++):(!u[y]||u[y][1].type!=="data")&&(y!==S+2&&(u[S][1].end=u[y-1][1].end,u.splice(S+2,y-S-2),y=S+2),S=void 0);return s?s(u,f):u}}function resolveAllLineSuffixes(s,n){let u=0;for(;++u<=s.length;)if((u===s.length||s[u][1].type==="lineEnding")&&s[u-1][1].type==="data"){const f=s[u-1][1],y=n.sliceStream(f);let S=y.length,A=-1,w=0,C;for(;S--;){const T=y[S];if(typeof T=="string"){for(A=T.length;T.charCodeAt(A-1)===32;)w++,A--;if(A)break;A=-1}else if(T===-2)C=!0,w++;else if(T!==-1){S++;break}}if(n._contentTypeTextTrailing&&u===s.length&&(w=0),w){const T={type:u===s.length||C||w<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:S?A:f.start._bufferIndex+A,_index:f.start._index+S,line:f.end.line,column:f.end.column-w,offset:f.end.offset-w},end:{...f.end}};f.end={...T.start},f.start.offset===f.end.offset?Object.assign(f,T):(s.splice(u,0,["enter",T,n],["exit",T,n]),u+=2)}u++}return s}const document$1={42:list$2,43:list$2,45:list$2,48:list$2,49:list$2,50:list$2,51:list$2,52:list$2,53:list$2,54:list$2,55:list$2,56:list$2,57:list$2,62:blockQuote},contentInitial={91:definition$1},flowInitial={[-2]:codeIndented,[-1]:codeIndented,32:codeIndented},flow$1={35:headingAtx,42:thematicBreak$2,45:[setextUnderline,thematicBreak$2],60:htmlFlow,61:setextUnderline,95:thematicBreak$2,96:codeFenced,126:codeFenced},string$2={38:characterReference,92:characterEscape},text$3={[-5]:lineEnding,[-4]:lineEnding,[-3]:lineEnding,33:labelStartImage,38:characterReference,42:attention,60:[autolink,htmlText],91:labelStartLink,92:[hardBreakEscape,characterEscape],93:labelEnd,95:attention,96:codeText},insideSpan={null:[attention,resolver]},attentionMarkers={null:[42,95]},disable={null:[]},defaultConstructs=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers,contentInitial,disable,document:document$1,flow:flow$1,flowInitial,insideSpan,string:string$2,text:text$3},Symbol.toStringTag,{value:"Module"}));function createTokenizer(s,n,u){let f={_bufferIndex:-1,_index:0,line:u&&u.line||1,column:u&&u.column||1,offset:u&&u.offset||0};const y={},S=[];let A=[],w=[];const C={attempt:te(Z),check:te(J),consume:G,enter:Y,exit:K,interrupt:te(J,{interrupt:!0})},T={code:null,containerState:{},defineSkip:H,events:[],now:F,parser:s,previous:null,sliceSerialize:N,sliceStream:L,write:I};let R=n.tokenize.call(T,C);return n.resolveAll&&S.push(n),T;function I(ge){return A=push(A,ge),z(),A[A.length-1]!==null?[]:(de(n,0),T.events=resolveAll$1(S,T.events,T),T.events)}function N(ge,Ee){return serializeChunks(L(ge),Ee)}function L(ge){return sliceChunks(A,ge)}function F(){const{_bufferIndex:ge,_index:Ee,line:we,column:Ie,offset:Be}=f;return{_bufferIndex:ge,_index:Ee,line:we,column:Ie,offset:Be}}function H(ge){y[ge.line]=ge.column,ne()}function z(){let ge;for(;f._index<A.length;){const Ee=A[f._index];if(typeof Ee=="string")for(ge=f._index,f._bufferIndex<0&&(f._bufferIndex=0);f._index===ge&&f._bufferIndex<Ee.length;)U(Ee.charCodeAt(f._bufferIndex));else U(Ee)}}function U(ge){R=R(ge)}function G(ge){markdownLineEnding$1(ge)?(f.line++,f.column=1,f.offset+=ge===-3?2:1,ne()):ge!==-1&&(f.column++,f.offset++),f._bufferIndex<0?f._index++:(f._bufferIndex++,f._bufferIndex===A[f._index].length&&(f._bufferIndex=-1,f._index++)),T.previous=ge}function Y(ge,Ee){const we=Ee||{};return we.type=ge,we.start=F(),T.events.push(["enter",we,T]),w.push(we),we}function K(ge){const Ee=w.pop();return Ee.end=F(),T.events.push(["exit",Ee,T]),Ee}function Z(ge,Ee){de(ge,Ee.from)}function J(ge,Ee){Ee.restore()}function te(ge,Ee){return we;function we(Ie,Be,Me){let Re,Te,Se,oe;return Array.isArray(Ie)?be(Ie):"tokenize"in Ie?be([Ie]):ae(Ie);function ae(ce){return _e;function _e(ke){const Pe=ke!==null&&ce[ke],$e=ke!==null&&ce.null,xe=[...Array.isArray(Pe)?Pe:Pe?[Pe]:[],...Array.isArray($e)?$e:$e?[$e]:[]];return be(xe)(ke)}}function be(ce){return Re=ce,Te=0,ce.length===0?Me:he(ce[Te])}function he(ce){return _e;function _e(ke){return oe=se(),Se=ce,ce.partial||(T.currentConstruct=ce),ce.name&&T.parser.constructs.disable.null.includes(ce.name)?ye():ce.tokenize.call(Ee?Object.assign(Object.create(T),Ee):T,C,ue,ye)(ke)}}function ue(ce){return ge(Se,oe),Be}function ye(ce){return oe.restore(),++Te<Re.length?he(Re[Te]):Me}}}function de(ge,Ee){ge.resolveAll&&!S.includes(ge)&&S.push(ge),ge.resolve&&splice$1(T.events,Ee,T.events.length-Ee,ge.resolve(T.events.slice(Ee),T)),ge.resolveTo&&(T.events=ge.resolveTo(T.events,T))}function se(){const ge=F(),Ee=T.previous,we=T.currentConstruct,Ie=T.events.length,Be=Array.from(w);return{from:Ie,restore:Me};function Me(){f=ge,T.previous=Ee,T.currentConstruct=we,T.events.length=Ie,w=Be,ne()}}function ne(){f.line in y&&f.column<2&&(f.column=y[f.line],f.offset+=y[f.line]-1)}}function sliceChunks(s,n){const u=n.start._index,f=n.start._bufferIndex,y=n.end._index,S=n.end._bufferIndex;let A;if(u===y)A=[s[u].slice(f,S)];else{if(A=s.slice(u,y),f>-1){const w=A[0];typeof w=="string"?A[0]=w.slice(f):A.shift()}S>0&&A.push(s[y].slice(0,S))}return A}function serializeChunks(s,n){let u=-1;const f=[];let y;for(;++u<s.length;){const S=s[u];let A;if(typeof S=="string")A=S;else switch(S){case-5:{A="\r";break}case-4:{A=`
`;break}case-3:{A=`\r
`;break}case-2:{A=n?" ":"	";break}case-1:{if(!n&&y)continue;A=" ";break}default:A=String.fromCharCode(S)}y=S===-2,f.push(A)}return f.join("")}function parse$1(s){const f={constructs:combineExtensions$1([defaultConstructs,...(s||{}).extensions||[]]),content:y(content$1),defined:[],document:y(document$2),flow:y(flow$2),lazy:{},string:y(string$3),text:y(text$4)};return f;function y(S){return A;function A(w){return createTokenizer(f,S,w)}}}function postprocess(s){for(;!subtokenize(s););return s}const search$1=/[\0\t\n\r]/g;function preprocess$1(){let s=1,n="",u=!0,f;return y;function y(S,A,w){const C=[];let T,R,I,N,L;for(S=n+(typeof S=="string"?S.toString():new TextDecoder(A||void 0).decode(S)),I=0,n="",u&&(S.charCodeAt(0)===65279&&I++,u=void 0);I<S.length;){if(search$1.lastIndex=I,T=search$1.exec(S),N=T&&T.index!==void 0?T.index:S.length,L=S.charCodeAt(N),!T){n=S.slice(I);break}if(L===10&&I===N&&f)C.push(-3),f=void 0;else switch(f&&(C.push(-5),f=void 0),I<N&&(C.push(S.slice(I,N)),s+=N-I),L){case 0:{C.push(65533),s++;break}case 9:{for(R=Math.ceil(s/4)*4,C.push(-2);s++<R;)C.push(-1);break}case 10:{C.push(-4),s=1;break}default:f=!0,s=1}I=N+1}return w&&(f&&C.push(-5),n&&C.push(n),C.push(null)),C}}const characterEscapeOrReference=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function decodeString(s){return s.replace(characterEscapeOrReference,decode$1)}function decode$1(s,n,u){if(n)return n;if(u.charCodeAt(0)===35){const y=u.charCodeAt(1),S=y===120||y===88;return decodeNumericCharacterReference(u.slice(S?2:1),S?16:10)}return decodeNamedCharacterReference(u)||s}const own$2={}.hasOwnProperty;function fromMarkdown(s,n,u){return n&&typeof n=="object"&&(u=n,n=void 0),compiler(u)(postprocess(parse$1(u).document().write(preprocess$1()(s,n,!0))))}function compiler(s){const n={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:S(pt),autolinkProtocol:se,autolinkEmail:se,atxHeading:S(Ye),blockQuote:S($e),characterEscape:se,characterReference:se,codeFenced:S(xe),codeFencedFenceInfo:A,codeFencedFenceMeta:A,codeIndented:S(xe,A),codeText:S(Ne,A),codeTextData:se,data:se,codeFlowValue:se,definition:S(je),definitionDestinationString:A,definitionLabelString:A,definitionTitleString:A,emphasis:S(He),hardBreakEscape:S(Je),hardBreakTrailing:S(Je),htmlFlow:S(ot,A),htmlFlowData:se,htmlText:S(ot,A),htmlTextData:se,image:S(ze),label:A,link:S(pt),listItem:S(ut),listItemValue:N,listOrdered:S(yt,I),listUnordered:S(yt),paragraph:S(Et),reference:he,referenceString:A,resourceDestinationString:A,resourceTitleString:A,setextHeading:S(Ye),strong:S(qe),thematicBreak:S(lt)},exit:{atxHeading:C(),atxHeadingSequence:Z,autolink:C(),autolinkEmail:Pe,autolinkProtocol:ke,blockQuote:C(),characterEscapeValue:ne,characterReferenceMarkerHexadecimal:ye,characterReferenceMarkerNumeric:ye,characterReferenceValue:ce,characterReference:_e,codeFenced:C(z),codeFencedFence:H,codeFencedFenceInfo:L,codeFencedFenceMeta:F,codeFlowValue:ne,codeIndented:C(U),codeText:C(Be),codeTextData:ne,data:ne,definition:C(),definitionDestinationString:K,definitionLabelString:G,definitionTitleString:Y,emphasis:C(),hardBreakEscape:C(Ee),hardBreakTrailing:C(Ee),htmlFlow:C(we),htmlFlowData:ne,htmlText:C(Ie),htmlTextData:ne,image:C(Re),label:Se,labelText:Te,lineEnding:ge,link:C(Me),listItem:C(),listOrdered:C(),listUnordered:C(),paragraph:C(),referenceString:ue,resourceDestinationString:oe,resourceTitleString:ae,resource:be,setextHeading:C(de),setextHeadingLineSequence:te,setextHeadingText:J,strong:C(),thematicBreak:C()}};configure(n,(s||{}).mdastExtensions||[]);const u={};return f;function f(We){let Qe={type:"root",children:[]};const at={stack:[Qe],tokenStack:[],config:n,enter:w,exit:T,buffer:A,resume:R,data:u},St=[];let Ct=-1;for(;++Ct<We.length;)if(We[Ct][1].type==="listOrdered"||We[Ct][1].type==="listUnordered")if(We[Ct][0]==="enter")St.push(Ct);else{const jt=St.pop();Ct=y(We,jt,Ct)}for(Ct=-1;++Ct<We.length;){const jt=n[We[Ct][0]];own$2.call(jt,We[Ct][1].type)&&jt[We[Ct][1].type].call(Object.assign({sliceSerialize:We[Ct][2].sliceSerialize},at),We[Ct][1])}if(at.tokenStack.length>0){const jt=at.tokenStack[at.tokenStack.length-1];(jt[1]||defaultOnError).call(at,void 0,jt[0])}for(Qe.position={start:point(We.length>0?We[0][1].start:{line:1,column:1,offset:0}),end:point(We.length>0?We[We.length-2][1].end:{line:1,column:1,offset:0})},Ct=-1;++Ct<n.transforms.length;)Qe=n.transforms[Ct](Qe)||Qe;return Qe}function y(We,Qe,at){let St=Qe-1,Ct=-1,jt=!1,Gt,Ft,ct,st;for(;++St<=at;){const nt=We[St];switch(nt[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{nt[0]==="enter"?Ct++:Ct--,st=void 0;break}case"lineEndingBlank":{nt[0]==="enter"&&(Gt&&!st&&!Ct&&!ct&&(ct=St),st=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:st=void 0}if(!Ct&&nt[0]==="enter"&&nt[1].type==="listItemPrefix"||Ct===-1&&nt[0]==="exit"&&(nt[1].type==="listUnordered"||nt[1].type==="listOrdered")){if(Gt){let At=St;for(Ft=void 0;At--;){const Yt=We[At];if(Yt[1].type==="lineEnding"||Yt[1].type==="lineEndingBlank"){if(Yt[0]==="exit")continue;Ft&&(We[Ft][1].type="lineEndingBlank",jt=!0),Yt[1].type="lineEnding",Ft=At}else if(!(Yt[1].type==="linePrefix"||Yt[1].type==="blockQuotePrefix"||Yt[1].type==="blockQuotePrefixWhitespace"||Yt[1].type==="blockQuoteMarker"||Yt[1].type==="listItemIndent"))break}ct&&(!Ft||ct<Ft)&&(Gt._spread=!0),Gt.end=Object.assign({},Ft?We[Ft][1].start:nt[1].end),We.splice(Ft||St,0,["exit",Gt,nt[2]]),St++,at++}if(nt[1].type==="listItemPrefix"){const At={type:"listItem",_spread:!1,start:Object.assign({},nt[1].start),end:void 0};Gt=At,We.splice(St,0,["enter",At,nt[2]]),St++,at++,ct=void 0,st=!0}}}return We[Qe][1]._spread=jt,at}function S(We,Qe){return at;function at(St){w.call(this,We(St),St),Qe&&Qe.call(this,St)}}function A(){this.stack.push({type:"fragment",children:[]})}function w(We,Qe,at){this.stack[this.stack.length-1].children.push(We),this.stack.push(We),this.tokenStack.push([Qe,at||void 0]),We.position={start:point(Qe.start),end:void 0}}function C(We){return Qe;function Qe(at){We&&We.call(this,at),T.call(this,at)}}function T(We,Qe){const at=this.stack.pop(),St=this.tokenStack.pop();if(St)St[0].type!==We.type&&(Qe?Qe.call(this,We,St[0]):(St[1]||defaultOnError).call(this,We,St[0]));else throw new Error("Cannot close `"+We.type+"` ("+stringifyPosition({start:We.start,end:We.end})+"): its not open");at.position.end=point(We.end)}function R(){return toString$2(this.stack.pop())}function I(){this.data.expectingFirstListItemValue=!0}function N(We){if(this.data.expectingFirstListItemValue){const Qe=this.stack[this.stack.length-2];Qe.start=Number.parseInt(this.sliceSerialize(We),10),this.data.expectingFirstListItemValue=void 0}}function L(){const We=this.resume(),Qe=this.stack[this.stack.length-1];Qe.lang=We}function F(){const We=this.resume(),Qe=this.stack[this.stack.length-1];Qe.meta=We}function H(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function z(){const We=this.resume(),Qe=this.stack[this.stack.length-1];Qe.value=We.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function U(){const We=this.resume(),Qe=this.stack[this.stack.length-1];Qe.value=We.replace(/(\r?\n|\r)$/g,"")}function G(We){const Qe=this.resume(),at=this.stack[this.stack.length-1];at.label=Qe,at.identifier=normalizeIdentifier$1(this.sliceSerialize(We)).toLowerCase()}function Y(){const We=this.resume(),Qe=this.stack[this.stack.length-1];Qe.title=We}function K(){const We=this.resume(),Qe=this.stack[this.stack.length-1];Qe.url=We}function Z(We){const Qe=this.stack[this.stack.length-1];if(!Qe.depth){const at=this.sliceSerialize(We).length;Qe.depth=at}}function J(){this.data.setextHeadingSlurpLineEnding=!0}function te(We){const Qe=this.stack[this.stack.length-1];Qe.depth=this.sliceSerialize(We).codePointAt(0)===61?1:2}function de(){this.data.setextHeadingSlurpLineEnding=void 0}function se(We){const at=this.stack[this.stack.length-1].children;let St=at[at.length-1];(!St||St.type!=="text")&&(St=Le(),St.position={start:point(We.start),end:void 0},at.push(St)),this.stack.push(St)}function ne(We){const Qe=this.stack.pop();Qe.value+=this.sliceSerialize(We),Qe.position.end=point(We.end)}function ge(We){const Qe=this.stack[this.stack.length-1];if(this.data.atHardBreak){const at=Qe.children[Qe.children.length-1];at.position.end=point(We.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&n.canContainEols.includes(Qe.type)&&(se.call(this,We),ne.call(this,We))}function Ee(){this.data.atHardBreak=!0}function we(){const We=this.resume(),Qe=this.stack[this.stack.length-1];Qe.value=We}function Ie(){const We=this.resume(),Qe=this.stack[this.stack.length-1];Qe.value=We}function Be(){const We=this.resume(),Qe=this.stack[this.stack.length-1];Qe.value=We}function Me(){const We=this.stack[this.stack.length-1];if(this.data.inReference){const Qe=this.data.referenceType||"shortcut";We.type+="Reference",We.referenceType=Qe,delete We.url,delete We.title}else delete We.identifier,delete We.label;this.data.referenceType=void 0}function Re(){const We=this.stack[this.stack.length-1];if(this.data.inReference){const Qe=this.data.referenceType||"shortcut";We.type+="Reference",We.referenceType=Qe,delete We.url,delete We.title}else delete We.identifier,delete We.label;this.data.referenceType=void 0}function Te(We){const Qe=this.sliceSerialize(We),at=this.stack[this.stack.length-2];at.label=decodeString(Qe),at.identifier=normalizeIdentifier$1(Qe).toLowerCase()}function Se(){const We=this.stack[this.stack.length-1],Qe=this.resume(),at=this.stack[this.stack.length-1];if(this.data.inReference=!0,at.type==="link"){const St=We.children;at.children=St}else at.alt=Qe}function oe(){const We=this.resume(),Qe=this.stack[this.stack.length-1];Qe.url=We}function ae(){const We=this.resume(),Qe=this.stack[this.stack.length-1];Qe.title=We}function be(){this.data.inReference=void 0}function he(){this.data.referenceType="collapsed"}function ue(We){const Qe=this.resume(),at=this.stack[this.stack.length-1];at.label=Qe,at.identifier=normalizeIdentifier$1(this.sliceSerialize(We)).toLowerCase(),this.data.referenceType="full"}function ye(We){this.data.characterReferenceType=We.type}function ce(We){const Qe=this.sliceSerialize(We),at=this.data.characterReferenceType;let St;at?(St=decodeNumericCharacterReference(Qe,at==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):St=decodeNamedCharacterReference(Qe);const Ct=this.stack[this.stack.length-1];Ct.value+=St}function _e(We){const Qe=this.stack.pop();Qe.position.end=point(We.end)}function ke(We){ne.call(this,We);const Qe=this.stack[this.stack.length-1];Qe.url=this.sliceSerialize(We)}function Pe(We){ne.call(this,We);const Qe=this.stack[this.stack.length-1];Qe.url="mailto:"+this.sliceSerialize(We)}function $e(){return{type:"blockquote",children:[]}}function xe(){return{type:"code",lang:null,meta:null,value:""}}function Ne(){return{type:"inlineCode",value:""}}function je(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function He(){return{type:"emphasis",children:[]}}function Ye(){return{type:"heading",depth:0,children:[]}}function Je(){return{type:"break"}}function ot(){return{type:"html",value:""}}function ze(){return{type:"image",title:null,url:"",alt:null}}function pt(){return{type:"link",title:null,url:"",children:[]}}function yt(We){return{type:"list",ordered:We.type==="listOrdered",start:null,spread:We._spread,children:[]}}function ut(We){return{type:"listItem",spread:We._spread,checked:null,children:[]}}function Et(){return{type:"paragraph",children:[]}}function qe(){return{type:"strong",children:[]}}function Le(){return{type:"text",value:""}}function lt(){return{type:"thematicBreak"}}}function point(s){return{line:s.line,column:s.column,offset:s.offset}}function configure(s,n){let u=-1;for(;++u<n.length;){const f=n[u];Array.isArray(f)?configure(s,f):extension(s,f)}}function extension(s,n){let u;for(u in n)if(own$2.call(n,u))switch(u){case"canContainEols":{const f=n[u];f&&s[u].push(...f);break}case"transforms":{const f=n[u];f&&s[u].push(...f);break}case"enter":case"exit":{const f=n[u];f&&Object.assign(s[u],f);break}}}function defaultOnError(s,n){throw s?new Error("Cannot close `"+s.type+"` ("+stringifyPosition({start:s.start,end:s.end})+"): a different token (`"+n.type+"`, "+stringifyPosition({start:n.start,end:n.end})+") is open"):new Error("Cannot close document, a token (`"+n.type+"`, "+stringifyPosition({start:n.start,end:n.end})+") is still open")}function remarkParse(s){const n=this;n.parser=u;function u(f){return fromMarkdown(f,{...n.data("settings"),...s,extensions:n.data("micromarkExtensions")||[],mdastExtensions:n.data("fromMarkdownExtensions")||[]})}}function blockquote$1(s,n){const u={type:"element",tagName:"blockquote",properties:{},children:s.wrap(s.all(n),!0)};return s.patch(n,u),s.applyData(n,u)}function hardBreak$1(s,n){const u={type:"element",tagName:"br",properties:{},children:[]};return s.patch(n,u),[s.applyData(n,u),{type:"text",value:`
`}]}function code$6(s,n){const u=n.value?n.value+`
`:"",f={},y=n.lang?n.lang.split(/\s+/):[];y.length>0&&(f.className=["language-"+y[0]]);let S={type:"element",tagName:"code",properties:f,children:[{type:"text",value:u}]};return n.meta&&(S.data={meta:n.meta}),s.patch(n,S),S=s.applyData(n,S),S={type:"element",tagName:"pre",properties:{},children:[S]},s.patch(n,S),S}function strikethrough(s,n){const u={type:"element",tagName:"del",properties:{},children:s.all(n)};return s.patch(n,u),s.applyData(n,u)}function emphasis$1(s,n){const u={type:"element",tagName:"em",properties:{},children:s.all(n)};return s.patch(n,u),s.applyData(n,u)}function footnoteReference$1(s,n){const u=typeof s.options.clobberPrefix=="string"?s.options.clobberPrefix:"user-content-",f=String(n.identifier).toUpperCase(),y=normalizeUri(f.toLowerCase()),S=s.footnoteOrder.indexOf(f);let A,w=s.footnoteCounts.get(f);w===void 0?(w=0,s.footnoteOrder.push(f),A=s.footnoteOrder.length):A=S+1,w+=1,s.footnoteCounts.set(f,w);const C={type:"element",tagName:"a",properties:{href:"#"+u+"fn-"+y,id:u+"fnref-"+y+(w>1?"-"+w:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(A)}]};s.patch(n,C);const T={type:"element",tagName:"sup",properties:{},children:[C]};return s.patch(n,T),s.applyData(n,T)}function heading$1(s,n){const u={type:"element",tagName:"h"+n.depth,properties:{},children:s.all(n)};return s.patch(n,u),s.applyData(n,u)}function html$1(s,n){if(s.options.allowDangerousHtml){const u={type:"raw",value:n.value};return s.patch(n,u),s.applyData(n,u)}}function revert(s,n){const u=n.referenceType;let f="]";if(u==="collapsed"?f+="[]":u==="full"&&(f+="["+(n.label||n.identifier)+"]"),n.type==="imageReference")return[{type:"text",value:"!["+n.alt+f}];const y=s.all(n),S=y[0];S&&S.type==="text"?S.value="["+S.value:y.unshift({type:"text",value:"["});const A=y[y.length-1];return A&&A.type==="text"?A.value+=f:y.push({type:"text",value:f}),y}function imageReference$1(s,n){const u=String(n.identifier).toUpperCase(),f=s.definitionById.get(u);if(!f)return revert(s,n);const y={src:normalizeUri(f.url||""),alt:n.alt};f.title!==null&&f.title!==void 0&&(y.title=f.title);const S={type:"element",tagName:"img",properties:y,children:[]};return s.patch(n,S),s.applyData(n,S)}function image$1(s,n){const u={src:normalizeUri(n.url)};n.alt!==null&&n.alt!==void 0&&(u.alt=n.alt),n.title!==null&&n.title!==void 0&&(u.title=n.title);const f={type:"element",tagName:"img",properties:u,children:[]};return s.patch(n,f),s.applyData(n,f)}function inlineCode$1(s,n){const u={type:"text",value:n.value.replace(/\r?\n|\r/g," ")};s.patch(n,u);const f={type:"element",tagName:"code",properties:{},children:[u]};return s.patch(n,f),s.applyData(n,f)}function linkReference$1(s,n){const u=String(n.identifier).toUpperCase(),f=s.definitionById.get(u);if(!f)return revert(s,n);const y={href:normalizeUri(f.url||"")};f.title!==null&&f.title!==void 0&&(y.title=f.title);const S={type:"element",tagName:"a",properties:y,children:s.all(n)};return s.patch(n,S),s.applyData(n,S)}function link$1(s,n){const u={href:normalizeUri(n.url)};n.title!==null&&n.title!==void 0&&(u.title=n.title);const f={type:"element",tagName:"a",properties:u,children:s.all(n)};return s.patch(n,f),s.applyData(n,f)}function listItem$1(s,n,u){const f=s.all(n),y=u?listLoose(u):listItemLoose(n),S={},A=[];if(typeof n.checked=="boolean"){const R=f[0];let I;R&&R.type==="element"&&R.tagName==="p"?I=R:(I={type:"element",tagName:"p",properties:{},children:[]},f.unshift(I)),I.children.length>0&&I.children.unshift({type:"text",value:" "}),I.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:n.checked,disabled:!0},children:[]}),S.className=["task-list-item"]}let w=-1;for(;++w<f.length;){const R=f[w];(y||w!==0||R.type!=="element"||R.tagName!=="p")&&A.push({type:"text",value:`
`}),R.type==="element"&&R.tagName==="p"&&!y?A.push(...R.children):A.push(R)}const C=f[f.length-1];C&&(y||C.type!=="element"||C.tagName!=="p")&&A.push({type:"text",value:`
`});const T={type:"element",tagName:"li",properties:S,children:A};return s.patch(n,T),s.applyData(n,T)}function listLoose(s){let n=!1;if(s.type==="list"){n=s.spread||!1;const u=s.children;let f=-1;for(;!n&&++f<u.length;)n=listItemLoose(u[f])}return n}function listItemLoose(s){const n=s.spread;return n??s.children.length>1}function list$1(s,n){const u={},f=s.all(n);let y=-1;for(typeof n.start=="number"&&n.start!==1&&(u.start=n.start);++y<f.length;){const A=f[y];if(A.type==="element"&&A.tagName==="li"&&A.properties&&Array.isArray(A.properties.className)&&A.properties.className.includes("task-list-item")){u.className=["contains-task-list"];break}}const S={type:"element",tagName:n.ordered?"ol":"ul",properties:u,children:s.wrap(f,!0)};return s.patch(n,S),s.applyData(n,S)}function paragraph$1(s,n){const u={type:"element",tagName:"p",properties:{},children:s.all(n)};return s.patch(n,u),s.applyData(n,u)}function root$1(s,n){const u={type:"root",children:s.wrap(s.all(n))};return s.patch(n,u),s.applyData(n,u)}function strong$1(s,n){const u={type:"element",tagName:"strong",properties:{},children:s.all(n)};return s.patch(n,u),s.applyData(n,u)}function table(s,n){const u=s.all(n),f=u.shift(),y=[];if(f){const A={type:"element",tagName:"thead",properties:{},children:s.wrap([f],!0)};s.patch(n.children[0],A),y.push(A)}if(u.length>0){const A={type:"element",tagName:"tbody",properties:{},children:s.wrap(u,!0)},w=pointStart(n.children[1]),C=pointEnd(n.children[n.children.length-1]);w&&C&&(A.position={start:w,end:C}),y.push(A)}const S={type:"element",tagName:"table",properties:{},children:s.wrap(y,!0)};return s.patch(n,S),s.applyData(n,S)}function tableRow(s,n,u){const f=u?u.children:void 0,S=(f?f.indexOf(n):1)===0?"th":"td",A=u&&u.type==="table"?u.align:void 0,w=A?A.length:n.children.length;let C=-1;const T=[];for(;++C<w;){const I=n.children[C],N={},L=A?A[C]:void 0;L&&(N.align=L);let F={type:"element",tagName:S,properties:N,children:[]};I&&(F.children=s.all(I),s.patch(I,F),F=s.applyData(I,F)),T.push(F)}const R={type:"element",tagName:"tr",properties:{},children:s.wrap(T,!0)};return s.patch(n,R),s.applyData(n,R)}function tableCell(s,n){const u={type:"element",tagName:"td",properties:{},children:s.all(n)};return s.patch(n,u),s.applyData(n,u)}const tab=9,space=32;function trimLines(s){const n=String(s),u=/\r?\n|\r/g;let f=u.exec(n),y=0;const S=[];for(;f;)S.push(trimLine(n.slice(y,f.index),y>0,!0),f[0]),y=f.index+f[0].length,f=u.exec(n);return S.push(trimLine(n.slice(y),y>0,!1)),S.join("")}function trimLine(s,n,u){let f=0,y=s.length;if(n){let S=s.codePointAt(f);for(;S===tab||S===space;)f++,S=s.codePointAt(f)}if(u){let S=s.codePointAt(y-1);for(;S===tab||S===space;)y--,S=s.codePointAt(y-1)}return y>f?s.slice(f,y):""}function text$2(s,n){const u={type:"text",value:trimLines(String(n.value))};return s.patch(n,u),s.applyData(n,u)}function thematicBreak$1(s,n){const u={type:"element",tagName:"hr",properties:{},children:[]};return s.patch(n,u),s.applyData(n,u)}const handlers={blockquote:blockquote$1,break:hardBreak$1,code:code$6,delete:strikethrough,emphasis:emphasis$1,footnoteReference:footnoteReference$1,heading:heading$1,html:html$1,imageReference:imageReference$1,image:image$1,inlineCode:inlineCode$1,linkReference:linkReference$1,link:link$1,listItem:listItem$1,list:list$1,paragraph:paragraph$1,root:root$1,strong:strong$1,table,tableCell,tableRow,text:text$2,thematicBreak:thematicBreak$1,toml:ignore$1,yaml:ignore$1,definition:ignore$1,footnoteDefinition:ignore$1};function ignore$1(){}const VOID=-1,PRIMITIVE=0,ARRAY=1,OBJECT=2,DATE=3,REGEXP=4,MAP=5,SET=6,ERROR=7,BIGINT=8,env=typeof self=="object"?self:globalThis,deserializer=(s,n)=>{const u=(y,S)=>(s.set(S,y),y),f=y=>{if(s.has(y))return s.get(y);const[S,A]=n[y];switch(S){case PRIMITIVE:case VOID:return u(A,y);case ARRAY:{const w=u([],y);for(const C of A)w.push(f(C));return w}case OBJECT:{const w=u({},y);for(const[C,T]of A)w[f(C)]=f(T);return w}case DATE:return u(new Date(A),y);case REGEXP:{const{source:w,flags:C}=A;return u(new RegExp(w,C),y)}case MAP:{const w=u(new Map,y);for(const[C,T]of A)w.set(f(C),f(T));return w}case SET:{const w=u(new Set,y);for(const C of A)w.add(f(C));return w}case ERROR:{const{name:w,message:C}=A;return u(new env[w](C),y)}case BIGINT:return u(BigInt(A),y);case"BigInt":return u(Object(BigInt(A)),y);case"ArrayBuffer":return u(new Uint8Array(A).buffer,A);case"DataView":{const{buffer:w}=new Uint8Array(A);return u(new DataView(w),A)}}return u(new env[S](A),y)};return f},deserialize=s=>deserializer(new Map,s)(0),EMPTY="",{toString:toString$1}={},{keys}=Object,typeOf=s=>{const n=typeof s;if(n!=="object"||!s)return[PRIMITIVE,n];const u=toString$1.call(s).slice(8,-1);switch(u){case"Array":return[ARRAY,EMPTY];case"Object":return[OBJECT,EMPTY];case"Date":return[DATE,EMPTY];case"RegExp":return[REGEXP,EMPTY];case"Map":return[MAP,EMPTY];case"Set":return[SET,EMPTY];case"DataView":return[ARRAY,u]}return u.includes("Array")?[ARRAY,u]:u.includes("Error")?[ERROR,u]:[OBJECT,u]},shouldSkip=([s,n])=>s===PRIMITIVE&&(n==="function"||n==="symbol"),serializer=(s,n,u,f)=>{const y=(A,w)=>{const C=f.push(A)-1;return u.set(w,C),C},S=A=>{if(u.has(A))return u.get(A);let[w,C]=typeOf(A);switch(w){case PRIMITIVE:{let R=A;switch(C){case"bigint":w=BIGINT,R=A.toString();break;case"function":case"symbol":if(s)throw new TypeError("unable to serialize "+C);R=null;break;case"undefined":return y([VOID],A)}return y([w,R],A)}case ARRAY:{if(C){let N=A;return C==="DataView"?N=new Uint8Array(A.buffer):C==="ArrayBuffer"&&(N=new Uint8Array(A)),y([C,[...N]],A)}const R=[],I=y([w,R],A);for(const N of A)R.push(S(N));return I}case OBJECT:{if(C)switch(C){case"BigInt":return y([C,A.toString()],A);case"Boolean":case"Number":case"String":return y([C,A.valueOf()],A)}if(n&&"toJSON"in A)return S(A.toJSON());const R=[],I=y([w,R],A);for(const N of keys(A))(s||!shouldSkip(typeOf(A[N])))&&R.push([S(N),S(A[N])]);return I}case DATE:return y([w,A.toISOString()],A);case REGEXP:{const{source:R,flags:I}=A;return y([w,{source:R,flags:I}],A)}case MAP:{const R=[],I=y([w,R],A);for(const[N,L]of A)(s||!(shouldSkip(typeOf(N))||shouldSkip(typeOf(L))))&&R.push([S(N),S(L)]);return I}case SET:{const R=[],I=y([w,R],A);for(const N of A)(s||!shouldSkip(typeOf(N)))&&R.push(S(N));return I}}const{message:T}=A;return y([w,{name:C,message:T}],A)};return S},serialize$1=(s,{json:n,lossy:u}={})=>{const f=[];return serializer(!(n||u),!!n,new Map,f)(s),f},structuredClone$1=typeof structuredClone=="function"?(s,n)=>n&&("json"in n||"lossy"in n)?deserialize(serialize$1(s,n)):structuredClone(s):(s,n)=>deserialize(serialize$1(s,n));function defaultFootnoteBackContent(s,n){const u=[{type:"text",value:""}];return n>1&&u.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(n)}]}),u}function defaultFootnoteBackLabel(s,n){return"Back to reference "+(s+1)+(n>1?"-"+n:"")}function footer(s){const n=typeof s.options.clobberPrefix=="string"?s.options.clobberPrefix:"user-content-",u=s.options.footnoteBackContent||defaultFootnoteBackContent,f=s.options.footnoteBackLabel||defaultFootnoteBackLabel,y=s.options.footnoteLabel||"Footnotes",S=s.options.footnoteLabelTagName||"h2",A=s.options.footnoteLabelProperties||{className:["sr-only"]},w=[];let C=-1;for(;++C<s.footnoteOrder.length;){const T=s.footnoteById.get(s.footnoteOrder[C]);if(!T)continue;const R=s.all(T),I=String(T.identifier).toUpperCase(),N=normalizeUri(I.toLowerCase());let L=0;const F=[],H=s.footnoteCounts.get(I);for(;H!==void 0&&++L<=H;){F.length>0&&F.push({type:"text",value:" "});let G=typeof u=="string"?u:u(C,L);typeof G=="string"&&(G={type:"text",value:G}),F.push({type:"element",tagName:"a",properties:{href:"#"+n+"fnref-"+N+(L>1?"-"+L:""),dataFootnoteBackref:"",ariaLabel:typeof f=="string"?f:f(C,L),className:["data-footnote-backref"]},children:Array.isArray(G)?G:[G]})}const z=R[R.length-1];if(z&&z.type==="element"&&z.tagName==="p"){const G=z.children[z.children.length-1];G&&G.type==="text"?G.value+=" ":z.children.push({type:"text",value:" "}),z.children.push(...F)}else R.push(...F);const U={type:"element",tagName:"li",properties:{id:n+"fn-"+N},children:s.wrap(R,!0)};s.patch(T,U),w.push(U)}if(w.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:S,properties:{...structuredClone$1(A),id:"footnote-label"},children:[{type:"text",value:y}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:s.wrap(w,!0)},{type:"text",value:`
`}]}}const convert$1=(function(s){if(s==null)return ok$1;if(typeof s=="function")return castFactory$1(s);if(typeof s=="object")return Array.isArray(s)?anyFactory$1(s):propertiesFactory$1(s);if(typeof s=="string")return typeFactory$1(s);throw new Error("Expected function, string, or object as test")});function anyFactory$1(s){const n=[];let u=-1;for(;++u<s.length;)n[u]=convert$1(s[u]);return castFactory$1(f);function f(...y){let S=-1;for(;++S<n.length;)if(n[S].apply(this,y))return!0;return!1}}function propertiesFactory$1(s){const n=s;return castFactory$1(u);function u(f){const y=f;let S;for(S in s)if(y[S]!==n[S])return!1;return!0}}function typeFactory$1(s){return castFactory$1(n);function n(u){return u&&u.type===s}}function castFactory$1(s){return n;function n(u,f,y){return!!(looksLikeANode$1(u)&&s.call(this,u,typeof f=="number"?f:void 0,y||void 0))}}function ok$1(){return!0}function looksLikeANode$1(s){return s!==null&&typeof s=="object"&&"type"in s}function color$2(s){return s}const empty$1=[],CONTINUE$1=!0,EXIT$1=!1,SKIP$1="skip";function visitParents$1(s,n,u,f){let y;typeof n=="function"&&typeof u!="function"?(f=u,u=n):y=n;const S=convert$1(y),A=f?-1:1;w(s,void 0,[])();function w(C,T,R){const I=C&&typeof C=="object"?C:{};if(typeof I.type=="string"){const L=typeof I.tagName=="string"?I.tagName:typeof I.name=="string"?I.name:void 0;Object.defineProperty(N,"name",{value:"node ("+(C.type+(L?"<"+L+">":""))+")"})}return N;function N(){let L=empty$1,F,H,z;if((!n||S(C,T,R[R.length-1]||void 0))&&(L=toResult$1(u(C,R)),L[0]===EXIT$1))return L;if("children"in C&&C.children){const U=C;if(U.children&&L[0]!==SKIP$1)for(H=(f?U.children.length:-1)+A,z=R.concat(U);H>-1&&H<U.children.length;){const G=U.children[H];if(F=w(G,H,z)(),F[0]===EXIT$1)return F;H=typeof F[1]=="number"?F[1]:H+A}}return L}}}function toResult$1(s){return Array.isArray(s)?s:typeof s=="number"?[CONTINUE$1,s]:s==null?empty$1:[s]}function visit$1(s,n,u,f){let y,S,A;typeof n=="function"&&typeof u!="function"?(S=void 0,A=n,y=u):(S=n,A=u,y=f),visitParents$1(s,S,w,y);function w(C,T){const R=T[T.length-1],I=R?R.children.indexOf(C):void 0;return A(C,I,R)}}const own$1={}.hasOwnProperty,emptyOptions$2={};function createState$1(s,n){const u=n||emptyOptions$2,f=new Map,y=new Map,S=new Map,A={...handlers,...u.handlers},w={all:T,applyData,definitionById:f,footnoteById:y,footnoteCounts:S,footnoteOrder:[],handlers:A,one:C,options:u,patch,wrap:wrap$1};return visit$1(s,function(R){if(R.type==="definition"||R.type==="footnoteDefinition"){const I=R.type==="definition"?f:y,N=String(R.identifier).toUpperCase();I.has(N)||I.set(N,R)}}),w;function C(R,I){const N=R.type,L=w.handlers[N];if(own$1.call(w.handlers,N)&&L)return L(w,R,I);if(w.options.passThrough&&w.options.passThrough.includes(N)){if("children"in R){const{children:H,...z}=R,U=structuredClone$1(z);return U.children=w.all(R),U}return structuredClone$1(R)}return(w.options.unknownHandler||defaultUnknownHandler)(w,R,I)}function T(R){const I=[];if("children"in R){const N=R.children;let L=-1;for(;++L<N.length;){const F=w.one(N[L],R);if(F){if(L&&N[L-1].type==="break"&&(!Array.isArray(F)&&F.type==="text"&&(F.value=trimMarkdownSpaceStart(F.value)),!Array.isArray(F)&&F.type==="element")){const H=F.children[0];H&&H.type==="text"&&(H.value=trimMarkdownSpaceStart(H.value))}Array.isArray(F)?I.push(...F):I.push(F)}}}return I}}function patch(s,n){s.position&&(n.position=position$1(s))}function applyData(s,n){let u=n;if(s&&s.data){const f=s.data.hName,y=s.data.hChildren,S=s.data.hProperties;if(typeof f=="string")if(u.type==="element")u.tagName=f;else{const A="children"in u?u.children:[u];u={type:"element",tagName:f,properties:{},children:A}}u.type==="element"&&S&&Object.assign(u.properties,structuredClone$1(S)),"children"in u&&u.children&&y!==null&&y!==void 0&&(u.children=y)}return u}function defaultUnknownHandler(s,n){const u=n.data||{},f="value"in n&&!(own$1.call(u,"hProperties")||own$1.call(u,"hChildren"))?{type:"text",value:n.value}:{type:"element",tagName:"div",properties:{},children:s.all(n)};return s.patch(n,f),s.applyData(n,f)}function wrap$1(s,n){const u=[];let f=-1;for(n&&u.push({type:"text",value:`
`});++f<s.length;)f&&u.push({type:"text",value:`
`}),u.push(s[f]);return n&&s.length>0&&u.push({type:"text",value:`
`}),u}function trimMarkdownSpaceStart(s){let n=0,u=s.charCodeAt(n);for(;u===9||u===32;)n++,u=s.charCodeAt(n);return s.slice(n)}function toHast(s,n){const u=createState$1(s,n),f=u.one(s,void 0),y=footer(u),S=Array.isArray(f)?{type:"root",children:f}:f||{type:"root",children:[]};return y&&S.children.push({type:"text",value:`
`},y),S}function remarkRehype(s,n){return s&&"run"in s?async function(u,f){const y=toHast(u,{file:f,...n});await s.run(y,f)}:function(u,f){return toHast(u,{file:f,...s||n})}}function bail(s){if(s)throw s}var extend$3,hasRequiredExtend;function requireExtend(){if(hasRequiredExtend)return extend$3;hasRequiredExtend=1;var s=Object.prototype.hasOwnProperty,n=Object.prototype.toString,u=Object.defineProperty,f=Object.getOwnPropertyDescriptor,y=function(T){return typeof Array.isArray=="function"?Array.isArray(T):n.call(T)==="[object Array]"},S=function(T){if(!T||n.call(T)!=="[object Object]")return!1;var R=s.call(T,"constructor"),I=T.constructor&&T.constructor.prototype&&s.call(T.constructor.prototype,"isPrototypeOf");if(T.constructor&&!R&&!I)return!1;var N;for(N in T);return typeof N>"u"||s.call(T,N)},A=function(T,R){u&&R.name==="__proto__"?u(T,R.name,{enumerable:!0,configurable:!0,value:R.newValue,writable:!0}):T[R.name]=R.newValue},w=function(T,R){if(R==="__proto__")if(s.call(T,R)){if(f)return f(T,R).value}else return;return T[R]};return extend$3=function C(){var T,R,I,N,L,F,H=arguments[0],z=1,U=arguments.length,G=!1;for(typeof H=="boolean"&&(G=H,H=arguments[1]||{},z=2),(H==null||typeof H!="object"&&typeof H!="function")&&(H={});z<U;++z)if(T=arguments[z],T!=null)for(R in T)I=w(H,R),N=w(T,R),H!==N&&(G&&N&&(S(N)||(L=y(N)))?(L?(L=!1,F=I&&y(I)?I:[]):F=I&&S(I)?I:{},A(H,{name:R,newValue:C(G,F,N)})):typeof N<"u"&&A(H,{name:R,newValue:N}));return H},extend$3}var extendExports=requireExtend();const extend$2=getDefaultExportFromCjs$1(extendExports);function isPlainObject$2(s){if(typeof s!="object"||s===null)return!1;const n=Object.getPrototypeOf(s);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)}function trough(){const s=[],n={run:u,use:f};return n;function u(...y){let S=-1;const A=y.pop();if(typeof A!="function")throw new TypeError("Expected function as last argument, not "+A);w(null,...y);function w(C,...T){const R=s[++S];let I=-1;if(C){A(C);return}for(;++I<y.length;)(T[I]===null||T[I]===void 0)&&(T[I]=y[I]);y=T,R?wrap(R,w)(...T):A(null,...T)}}function f(y){if(typeof y!="function")throw new TypeError("Expected `middelware` to be a function, not "+y);return s.push(y),n}}function wrap(s,n){let u;return f;function f(...A){const w=s.length>A.length;let C;w&&A.push(y);try{C=s.apply(this,A)}catch(T){const R=T;if(w&&u)throw R;return y(R)}w||(C&&C.then&&typeof C.then=="function"?C.then(S,y):C instanceof Error?y(C):S(C))}function y(A,...w){u||(u=!0,n(A,...w))}function S(A){y(null,A)}}const minpath={basename,dirname,extname,join,sep:"/"};function basename(s,n){if(n!==void 0&&typeof n!="string")throw new TypeError('"ext" argument must be a string');assertPath$1(s);let u=0,f=-1,y=s.length,S;if(n===void 0||n.length===0||n.length>s.length){for(;y--;)if(s.codePointAt(y)===47){if(S){u=y+1;break}}else f<0&&(S=!0,f=y+1);return f<0?"":s.slice(u,f)}if(n===s)return"";let A=-1,w=n.length-1;for(;y--;)if(s.codePointAt(y)===47){if(S){u=y+1;break}}else A<0&&(S=!0,A=y+1),w>-1&&(s.codePointAt(y)===n.codePointAt(w--)?w<0&&(f=y):(w=-1,f=A));return u===f?f=A:f<0&&(f=s.length),s.slice(u,f)}function dirname(s){if(assertPath$1(s),s.length===0)return".";let n=-1,u=s.length,f;for(;--u;)if(s.codePointAt(u)===47){if(f){n=u;break}}else f||(f=!0);return n<0?s.codePointAt(0)===47?"/":".":n===1&&s.codePointAt(0)===47?"//":s.slice(0,n)}function extname(s){assertPath$1(s);let n=s.length,u=-1,f=0,y=-1,S=0,A;for(;n--;){const w=s.codePointAt(n);if(w===47){if(A){f=n+1;break}continue}u<0&&(A=!0,u=n+1),w===46?y<0?y=n:S!==1&&(S=1):y>-1&&(S=-1)}return y<0||u<0||S===0||S===1&&y===u-1&&y===f+1?"":s.slice(y,u)}function join(...s){let n=-1,u;for(;++n<s.length;)assertPath$1(s[n]),s[n]&&(u=u===void 0?s[n]:u+"/"+s[n]);return u===void 0?".":normalize$1(u)}function normalize$1(s){assertPath$1(s);const n=s.codePointAt(0)===47;let u=normalizeString(s,!n);return u.length===0&&!n&&(u="."),u.length>0&&s.codePointAt(s.length-1)===47&&(u+="/"),n?"/"+u:u}function normalizeString(s,n){let u="",f=0,y=-1,S=0,A=-1,w,C;for(;++A<=s.length;){if(A<s.length)w=s.codePointAt(A);else{if(w===47)break;w=47}if(w===47){if(!(y===A-1||S===1))if(y!==A-1&&S===2){if(u.length<2||f!==2||u.codePointAt(u.length-1)!==46||u.codePointAt(u.length-2)!==46){if(u.length>2){if(C=u.lastIndexOf("/"),C!==u.length-1){C<0?(u="",f=0):(u=u.slice(0,C),f=u.length-1-u.lastIndexOf("/")),y=A,S=0;continue}}else if(u.length>0){u="",f=0,y=A,S=0;continue}}n&&(u=u.length>0?u+"/..":"..",f=2)}else u.length>0?u+="/"+s.slice(y+1,A):u=s.slice(y+1,A),f=A-y-1;y=A,S=0}else w===46&&S>-1?S++:S=-1}return u}function assertPath$1(s){if(typeof s!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(s))}const minproc={cwd};function cwd(){return"/"}function isUrl(s){return!!(s!==null&&typeof s=="object"&&"href"in s&&s.href&&"protocol"in s&&s.protocol&&s.auth===void 0)}function urlToPath(s){if(typeof s=="string")s=new URL(s);else if(!isUrl(s)){const n=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+s+"`");throw n.code="ERR_INVALID_ARG_TYPE",n}if(s.protocol!=="file:"){const n=new TypeError("The URL must be of scheme file");throw n.code="ERR_INVALID_URL_SCHEME",n}return getPathFromURLPosix(s)}function getPathFromURLPosix(s){if(s.hostname!==""){const f=new TypeError('File URL host must be "localhost" or empty on darwin');throw f.code="ERR_INVALID_FILE_URL_HOST",f}const n=s.pathname;let u=-1;for(;++u<n.length;)if(n.codePointAt(u)===37&&n.codePointAt(u+1)===50){const f=n.codePointAt(u+2);if(f===70||f===102){const y=new TypeError("File URL path must not include encoded / characters");throw y.code="ERR_INVALID_FILE_URL_PATH",y}}return decodeURIComponent(n)}const order=["history","path","basename","stem","extname","dirname"];class VFile{constructor(n){let u;n?isUrl(n)?u={path:n}:typeof n=="string"||isUint8Array$1(n)?u={value:n}:u=n:u={},this.cwd="cwd"in u?"":minproc.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let f=-1;for(;++f<order.length;){const S=order[f];S in u&&u[S]!==void 0&&u[S]!==null&&(this[S]=S==="history"?[...u[S]]:u[S])}let y;for(y in u)order.includes(y)||(this[y]=u[y])}get basename(){return typeof this.path=="string"?minpath.basename(this.path):void 0}set basename(n){assertNonEmpty(n,"basename"),assertPart(n,"basename"),this.path=minpath.join(this.dirname||"",n)}get dirname(){return typeof this.path=="string"?minpath.dirname(this.path):void 0}set dirname(n){assertPath(this.basename,"dirname"),this.path=minpath.join(n||"",this.basename)}get extname(){return typeof this.path=="string"?minpath.extname(this.path):void 0}set extname(n){if(assertPart(n,"extname"),assertPath(this.dirname,"extname"),n){if(n.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(n.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=minpath.join(this.dirname,this.stem+(n||""))}get path(){return this.history[this.history.length-1]}set path(n){isUrl(n)&&(n=urlToPath(n)),assertNonEmpty(n,"path"),this.path!==n&&this.history.push(n)}get stem(){return typeof this.path=="string"?minpath.basename(this.path,this.extname):void 0}set stem(n){assertNonEmpty(n,"stem"),assertPart(n,"stem"),this.path=minpath.join(this.dirname||"",n+(this.extname||""))}fail(n,u,f){const y=this.message(n,u,f);throw y.fatal=!0,y}info(n,u,f){const y=this.message(n,u,f);return y.fatal=void 0,y}message(n,u,f){const y=new VFileMessage(n,u,f);return this.path&&(y.name=this.path+":"+y.name,y.file=this.path),y.fatal=!1,this.messages.push(y),y}toString(n){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(n||void 0).decode(this.value)}}function assertPart(s,n){if(s&&s.includes(minpath.sep))throw new Error("`"+n+"` cannot be a path: did not expect `"+minpath.sep+"`")}function assertNonEmpty(s,n){if(!s)throw new Error("`"+n+"` cannot be empty")}function assertPath(s,n){if(!s)throw new Error("Setting `"+n+"` requires `path` to be set too")}function isUint8Array$1(s){return!!(s&&typeof s=="object"&&"byteLength"in s&&"byteOffset"in s)}const CallableInstance=(function(s){const f=this.constructor.prototype,y=f[s],S=function(){return y.apply(S,arguments)};return Object.setPrototypeOf(S,f),S}),own={}.hasOwnProperty;class Processor extends CallableInstance{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=trough()}copy(){const n=new Processor;let u=-1;for(;++u<this.attachers.length;){const f=this.attachers[u];n.use(...f)}return n.data(extend$2(!0,{},this.namespace)),n}data(n,u){return typeof n=="string"?arguments.length===2?(assertUnfrozen("data",this.frozen),this.namespace[n]=u,this):own.call(this.namespace,n)&&this.namespace[n]||void 0:n?(assertUnfrozen("data",this.frozen),this.namespace=n,this):this.namespace}freeze(){if(this.frozen)return this;const n=this;for(;++this.freezeIndex<this.attachers.length;){const[u,...f]=this.attachers[this.freezeIndex];if(f[0]===!1)continue;f[0]===!0&&(f[0]=void 0);const y=u.call(n,...f);typeof y=="function"&&this.transformers.use(y)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(n){this.freeze();const u=vfile(n),f=this.parser||this.Parser;return assertParser("parse",f),f(String(u),u)}process(n,u){const f=this;return this.freeze(),assertParser("process",this.parser||this.Parser),assertCompiler("process",this.compiler||this.Compiler),u?y(void 0,u):new Promise(y);function y(S,A){const w=vfile(n),C=f.parse(w);f.run(C,w,function(R,I,N){if(R||!I||!N)return T(R);const L=I,F=f.stringify(L,N);looksLikeAValue(F)?N.value=F:N.result=F,T(R,N)});function T(R,I){R||!I?A(R):S?S(I):u(void 0,I)}}}processSync(n){let u=!1,f;return this.freeze(),assertParser("processSync",this.parser||this.Parser),assertCompiler("processSync",this.compiler||this.Compiler),this.process(n,y),assertDone("processSync","process",u),f;function y(S,A){u=!0,bail(S),f=A}}run(n,u,f){assertNode(n),this.freeze();const y=this.transformers;return!f&&typeof u=="function"&&(f=u,u=void 0),f?S(void 0,f):new Promise(S);function S(A,w){const C=vfile(u);y.run(n,C,T);function T(R,I,N){const L=I||n;R?w(R):A?A(L):f(void 0,L,N)}}}runSync(n,u){let f=!1,y;return this.run(n,u,S),assertDone("runSync","run",f),y;function S(A,w){bail(A),y=w,f=!0}}stringify(n,u){this.freeze();const f=vfile(u),y=this.compiler||this.Compiler;return assertCompiler("stringify",y),assertNode(n),y(n,f)}use(n,...u){const f=this.attachers,y=this.namespace;if(assertUnfrozen("use",this.frozen),n!=null)if(typeof n=="function")C(n,u);else if(typeof n=="object")Array.isArray(n)?w(n):A(n);else throw new TypeError("Expected usable value, not `"+n+"`");return this;function S(T){if(typeof T=="function")C(T,[]);else if(typeof T=="object")if(Array.isArray(T)){const[R,...I]=T;C(R,I)}else A(T);else throw new TypeError("Expected usable value, not `"+T+"`")}function A(T){if(!("plugins"in T)&&!("settings"in T))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");w(T.plugins),T.settings&&(y.settings=extend$2(!0,y.settings,T.settings))}function w(T){let R=-1;if(T!=null)if(Array.isArray(T))for(;++R<T.length;){const I=T[R];S(I)}else throw new TypeError("Expected a list of plugins, not `"+T+"`")}function C(T,R){let I=-1,N=-1;for(;++I<f.length;)if(f[I][0]===T){N=I;break}if(N===-1)f.push([T,...R]);else if(R.length>0){let[L,...F]=R;const H=f[N][1];isPlainObject$2(H)&&isPlainObject$2(L)&&(L=extend$2(!0,H,L)),f[N]=[T,L,...F]}}}}const unified=new Processor().freeze();function assertParser(s,n){if(typeof n!="function")throw new TypeError("Cannot `"+s+"` without `parser`")}function assertCompiler(s,n){if(typeof n!="function")throw new TypeError("Cannot `"+s+"` without `compiler`")}function assertUnfrozen(s,n){if(n)throw new Error("Cannot call `"+s+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function assertNode(s){if(!isPlainObject$2(s)||typeof s.type!="string")throw new TypeError("Expected node, got `"+s+"`")}function assertDone(s,n,u){if(!u)throw new Error("`"+s+"` finished async. Use `"+n+"` instead")}function vfile(s){return looksLikeAVFile(s)?s:new VFile(s)}function looksLikeAVFile(s){return!!(s&&typeof s=="object"&&"message"in s&&"messages"in s)}function looksLikeAValue(s){return typeof s=="string"||isUint8Array(s)}function isUint8Array(s){return!!(s&&typeof s=="object"&&"byteLength"in s&&"byteOffset"in s)}const changelog="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",emptyPlugins=[],emptyRemarkRehypeOptions={allowDangerousHtml:!0},safeProtocol=/^(https?|ircs?|mailto|xmpp)$/i,deprecations=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Markdown(s){const n=createProcessor(s),u=createFile(s);return post(n.runSync(n.parse(u),u),s)}function createProcessor(s){const n=s.rehypePlugins||emptyPlugins,u=s.remarkPlugins||emptyPlugins,f=s.remarkRehypeOptions?{...s.remarkRehypeOptions,...emptyRemarkRehypeOptions}:emptyRemarkRehypeOptions;return unified().use(remarkParse).use(u).use(remarkRehype,f).use(n)}function createFile(s){const n=s.children||"",u=new VFile;return typeof n=="string"&&(u.value=n),u}function post(s,n){const u=n.allowedElements,f=n.allowElement,y=n.components,S=n.disallowedElements,A=n.skipHtml,w=n.unwrapDisallowed,C=n.urlTransform||defaultUrlTransform;for(const R of deprecations)Object.hasOwn(n,R.from)&&(""+R.from+(R.to?"use `"+R.to+"` instead":"remove it")+changelog+R.id,void 0);return visit$1(s,T),toJsxRuntime(s,{Fragment:jsxRuntimeExports.Fragment,components:y,ignoreInvalidStyle:!0,jsx:jsxRuntimeExports.jsx,jsxs:jsxRuntimeExports.jsxs,passKeys:!0,passNode:!0});function T(R,I,N){if(R.type==="raw"&&N&&typeof I=="number")return A?N.children.splice(I,1):N.children[I]={type:"text",value:R.value},I;if(R.type==="element"){let L;for(L in urlAttributes)if(Object.hasOwn(urlAttributes,L)&&Object.hasOwn(R.properties,L)){const F=R.properties[L],H=urlAttributes[L];(H===null||H.includes(R.tagName))&&(R.properties[L]=C(String(F||""),L,R))}}if(R.type==="element"){let L=u?!u.includes(R.tagName):S?S.includes(R.tagName):!1;if(!L&&f&&typeof I=="number"&&(L=!f(R,I,N)),L&&N&&typeof I=="number")return w&&R.children?N.children.splice(I,1,...R.children):N.children.splice(I,1),I}}}function defaultUrlTransform(s){const n=s.indexOf(":"),u=s.indexOf("?"),f=s.indexOf("#"),y=s.indexOf("/");return n===-1||y!==-1&&n>y||u!==-1&&n>u||f!==-1&&n>f||safeProtocol.test(s.slice(0,n))?s:""}function _objectWithoutPropertiesLoose(s,n){if(s==null)return{};var u={};for(var f in s)if({}.hasOwnProperty.call(s,f)){if(n.indexOf(f)!==-1)continue;u[f]=s[f]}return u}function _objectWithoutProperties(s,n){if(s==null)return{};var u,f,y=_objectWithoutPropertiesLoose(s,n);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(s);for(f=0;f<S.length;f++)u=S[f],n.indexOf(u)===-1&&{}.propertyIsEnumerable.call(s,u)&&(y[u]=s[u])}return y}function _arrayLikeToArray(s,n){(n==null||n>s.length)&&(n=s.length);for(var u=0,f=Array(n);u<n;u++)f[u]=s[u];return f}function _arrayWithoutHoles(s){if(Array.isArray(s))return _arrayLikeToArray(s)}function _iterableToArray(s){if(typeof Symbol<"u"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}function _unsupportedIterableToArray(s,n){if(s){if(typeof s=="string")return _arrayLikeToArray(s,n);var u={}.toString.call(s).slice(8,-1);return u==="Object"&&s.constructor&&(u=s.constructor.name),u==="Map"||u==="Set"?Array.from(s):u==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u)?_arrayLikeToArray(s,n):void 0}}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _toConsumableArray(s){return _arrayWithoutHoles(s)||_iterableToArray(s)||_unsupportedIterableToArray(s)||_nonIterableSpread()}function _typeof(s){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_typeof(s)}function toPrimitive(s,n){if(_typeof(s)!="object"||!s)return s;var u=s[Symbol.toPrimitive];if(u!==void 0){var f=u.call(s,n);if(_typeof(f)!="object")return f;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(s)}function toPropertyKey(s){var n=toPrimitive(s,"string");return _typeof(n)=="symbol"?n:n+""}function _defineProperty$1(s,n,u){return(n=toPropertyKey(n))in s?Object.defineProperty(s,n,{value:u,enumerable:!0,configurable:!0,writable:!0}):s[n]=u,s}function _extends(){return _extends=Object.assign?Object.assign.bind():function(s){for(var n=1;n<arguments.length;n++){var u=arguments[n];for(var f in u)({}).hasOwnProperty.call(u,f)&&(s[f]=u[f])}return s},_extends.apply(null,arguments)}function ownKeys$1(s,n){var u=Object.keys(s);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(s);n&&(f=f.filter(function(y){return Object.getOwnPropertyDescriptor(s,y).enumerable})),u.push.apply(u,f)}return u}function _objectSpread$1(s){for(var n=1;n<arguments.length;n++){var u=arguments[n]!=null?arguments[n]:{};n%2?ownKeys$1(Object(u),!0).forEach(function(f){_defineProperty$1(s,f,u[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(u)):ownKeys$1(Object(u)).forEach(function(f){Object.defineProperty(s,f,Object.getOwnPropertyDescriptor(u,f))})}return s}function powerSetPermutations(s){var n=s.length;if(n===0||n===1)return s;if(n===2)return[s[0],s[1],"".concat(s[0],".").concat(s[1]),"".concat(s[1],".").concat(s[0])];if(n===3)return[s[0],s[1],s[2],"".concat(s[0],".").concat(s[1]),"".concat(s[0],".").concat(s[2]),"".concat(s[1],".").concat(s[0]),"".concat(s[1],".").concat(s[2]),"".concat(s[2],".").concat(s[0]),"".concat(s[2],".").concat(s[1]),"".concat(s[0],".").concat(s[1],".").concat(s[2]),"".concat(s[0],".").concat(s[2],".").concat(s[1]),"".concat(s[1],".").concat(s[0],".").concat(s[2]),"".concat(s[1],".").concat(s[2],".").concat(s[0]),"".concat(s[2],".").concat(s[0],".").concat(s[1]),"".concat(s[2],".").concat(s[1],".").concat(s[0])];if(n>=4)return[s[0],s[1],s[2],s[3],"".concat(s[0],".").concat(s[1]),"".concat(s[0],".").concat(s[2]),"".concat(s[0],".").concat(s[3]),"".concat(s[1],".").concat(s[0]),"".concat(s[1],".").concat(s[2]),"".concat(s[1],".").concat(s[3]),"".concat(s[2],".").concat(s[0]),"".concat(s[2],".").concat(s[1]),"".concat(s[2],".").concat(s[3]),"".concat(s[3],".").concat(s[0]),"".concat(s[3],".").concat(s[1]),"".concat(s[3],".").concat(s[2]),"".concat(s[0],".").concat(s[1],".").concat(s[2]),"".concat(s[0],".").concat(s[1],".").concat(s[3]),"".concat(s[0],".").concat(s[2],".").concat(s[1]),"".concat(s[0],".").concat(s[2],".").concat(s[3]),"".concat(s[0],".").concat(s[3],".").concat(s[1]),"".concat(s[0],".").concat(s[3],".").concat(s[2]),"".concat(s[1],".").concat(s[0],".").concat(s[2]),"".concat(s[1],".").concat(s[0],".").concat(s[3]),"".concat(s[1],".").concat(s[2],".").concat(s[0]),"".concat(s[1],".").concat(s[2],".").concat(s[3]),"".concat(s[1],".").concat(s[3],".").concat(s[0]),"".concat(s[1],".").concat(s[3],".").concat(s[2]),"".concat(s[2],".").concat(s[0],".").concat(s[1]),"".concat(s[2],".").concat(s[0],".").concat(s[3]),"".concat(s[2],".").concat(s[1],".").concat(s[0]),"".concat(s[2],".").concat(s[1],".").concat(s[3]),"".concat(s[2],".").concat(s[3],".").concat(s[0]),"".concat(s[2],".").concat(s[3],".").concat(s[1]),"".concat(s[3],".").concat(s[0],".").concat(s[1]),"".concat(s[3],".").concat(s[0],".").concat(s[2]),"".concat(s[3],".").concat(s[1],".").concat(s[0]),"".concat(s[3],".").concat(s[1],".").concat(s[2]),"".concat(s[3],".").concat(s[2],".").concat(s[0]),"".concat(s[3],".").concat(s[2],".").concat(s[1]),"".concat(s[0],".").concat(s[1],".").concat(s[2],".").concat(s[3]),"".concat(s[0],".").concat(s[1],".").concat(s[3],".").concat(s[2]),"".concat(s[0],".").concat(s[2],".").concat(s[1],".").concat(s[3]),"".concat(s[0],".").concat(s[2],".").concat(s[3],".").concat(s[1]),"".concat(s[0],".").concat(s[3],".").concat(s[1],".").concat(s[2]),"".concat(s[0],".").concat(s[3],".").concat(s[2],".").concat(s[1]),"".concat(s[1],".").concat(s[0],".").concat(s[2],".").concat(s[3]),"".concat(s[1],".").concat(s[0],".").concat(s[3],".").concat(s[2]),"".concat(s[1],".").concat(s[2],".").concat(s[0],".").concat(s[3]),"".concat(s[1],".").concat(s[2],".").concat(s[3],".").concat(s[0]),"".concat(s[1],".").concat(s[3],".").concat(s[0],".").concat(s[2]),"".concat(s[1],".").concat(s[3],".").concat(s[2],".").concat(s[0]),"".concat(s[2],".").concat(s[0],".").concat(s[1],".").concat(s[3]),"".concat(s[2],".").concat(s[0],".").concat(s[3],".").concat(s[1]),"".concat(s[2],".").concat(s[1],".").concat(s[0],".").concat(s[3]),"".concat(s[2],".").concat(s[1],".").concat(s[3],".").concat(s[0]),"".concat(s[2],".").concat(s[3],".").concat(s[0],".").concat(s[1]),"".concat(s[2],".").concat(s[3],".").concat(s[1],".").concat(s[0]),"".concat(s[3],".").concat(s[0],".").concat(s[1],".").concat(s[2]),"".concat(s[3],".").concat(s[0],".").concat(s[2],".").concat(s[1]),"".concat(s[3],".").concat(s[1],".").concat(s[0],".").concat(s[2]),"".concat(s[3],".").concat(s[1],".").concat(s[2],".").concat(s[0]),"".concat(s[3],".").concat(s[2],".").concat(s[0],".").concat(s[1]),"".concat(s[3],".").concat(s[2],".").concat(s[1],".").concat(s[0])]}var classNameCombinations={};function getClassNameCombinations(s){if(s.length===0||s.length===1)return s;var n=s.join(".");return classNameCombinations[n]||(classNameCombinations[n]=powerSetPermutations(s)),classNameCombinations[n]}function createStyleObject(s){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=arguments.length>2?arguments[2]:void 0,f=s.filter(function(S){return S!=="token"}),y=getClassNameCombinations(f);return y.reduce(function(S,A){return _objectSpread$1(_objectSpread$1({},S),u[A])},n)}function createClassNameString(s){return s.join(" ")}function createChildren(s,n){var u=0;return function(f){return u+=1,f.map(function(y,S){return createElement({node:y,stylesheet:s,useInlineStyles:n,key:"code-segment-".concat(u,"-").concat(S)})})}}function createElement(s){var n=s.node,u=s.stylesheet,f=s.style,y=f===void 0?{}:f,S=s.useInlineStyles,A=s.key,w=n.properties,C=n.type,T=n.tagName,R=n.value;if(C==="text")return R;if(T){var I=createChildren(u,S),N;if(!S)N=_objectSpread$1(_objectSpread$1({},w),{},{className:createClassNameString(w.className)});else{var L=Object.keys(u).reduce(function(U,G){return G.split(".").forEach(function(Y){U.includes(Y)||U.push(Y)}),U},[]),F=w.className&&w.className.includes("token")?["token"]:[],H=w.className&&F.concat(w.className.filter(function(U){return!L.includes(U)}));N=_objectSpread$1(_objectSpread$1({},w),{},{className:createClassNameString(H)||void 0,style:createStyleObject(w.className,Object.assign({},w.style,y),u)})}var z=I(n.children);return React.createElement(T,_extends({key:A},N),z)}}const checkForListedLanguage=(function(s,n){var u=s.listLanguages();return u.indexOf(n)!==-1});var _excluded=["language","children","style","customStyle","codeTagProps","useInlineStyles","showLineNumbers","showInlineLineNumbers","startingLineNumber","lineNumberContainerStyle","lineNumberStyle","wrapLines","wrapLongLines","lineProps","renderer","PreTag","CodeTag","code","astGenerator"];function ownKeys(s,n){var u=Object.keys(s);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(s);n&&(f=f.filter(function(y){return Object.getOwnPropertyDescriptor(s,y).enumerable})),u.push.apply(u,f)}return u}function _objectSpread(s){for(var n=1;n<arguments.length;n++){var u=arguments[n]!=null?arguments[n]:{};n%2?ownKeys(Object(u),!0).forEach(function(f){_defineProperty$1(s,f,u[f])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(u)):ownKeys(Object(u)).forEach(function(f){Object.defineProperty(s,f,Object.getOwnPropertyDescriptor(u,f))})}return s}var newLineRegex=/\n/g;function getNewLines(s){return s.match(newLineRegex)}function getAllLineNumbers(s){var n=s.lines,u=s.startingLineNumber,f=s.style;return n.map(function(y,S){var A=S+u;return React.createElement("span",{key:"line-".concat(S),className:"react-syntax-highlighter-line-number",style:typeof f=="function"?f(A):f},"".concat(A,`
`))})}function AllLineNumbers(s){var n=s.codeString,u=s.codeStyle,f=s.containerStyle,y=f===void 0?{float:"left",paddingRight:"10px"}:f,S=s.numberStyle,A=S===void 0?{}:S,w=s.startingLineNumber;return React.createElement("code",{style:Object.assign({},u,y)},getAllLineNumbers({lines:n.replace(/\n$/,"").split(`
`),style:A,startingLineNumber:w}))}function getEmWidthOfNumber(s){return"".concat(s.toString().length,".25em")}function getInlineLineNumber(s,n){return{type:"element",tagName:"span",properties:{key:"line-number--".concat(s),className:["comment","linenumber","react-syntax-highlighter-line-number"],style:n},children:[{type:"text",value:s}]}}function assembleLineNumberStyles(s,n,u){var f={display:"inline-block",minWidth:getEmWidthOfNumber(u),paddingRight:"1em",textAlign:"right",userSelect:"none"},y=typeof s=="function"?s(n):s,S=_objectSpread(_objectSpread({},f),y);return S}function createLineElement(s){var n=s.children,u=s.lineNumber,f=s.lineNumberStyle,y=s.largestLineNumber,S=s.showInlineLineNumbers,A=s.lineProps,w=A===void 0?{}:A,C=s.className,T=C===void 0?[]:C,R=s.showLineNumbers,I=s.wrapLongLines,N=s.wrapLines,L=N===void 0?!1:N,F=L?_objectSpread({},typeof w=="function"?w(u):w):{};if(F.className=F.className?[].concat(_toConsumableArray(F.className.trim().split(/\s+/)),_toConsumableArray(T)):T,u&&S){var H=assembleLineNumberStyles(f,u,y);n.unshift(getInlineLineNumber(u,H))}return I&R&&(F.style=_objectSpread({display:"flex"},F.style)),{type:"element",tagName:"span",properties:F,children:n}}function flattenCodeTree(s){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];s.length===void 0&&(s=[s]);for(var f=0;f<s.length;f++){var y=s[f];if(y.type==="text")u.push(createLineElement({children:[y],className:_toConsumableArray(new Set(n))}));else if(y.children){var S,A=n.concat(((S=y.properties)===null||S===void 0?void 0:S.className)||[]);flattenCodeTree(y.children,A).forEach(function(w){return u.push(w)})}}return u}function processLines(s,n,u,f,y,S,A,w,C){var T,R=flattenCodeTree(s.value),I=[],N=-1,L=0;function F(Z,J){var te=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return createLineElement({children:Z,lineNumber:J,lineNumberStyle:w,largestLineNumber:A,showInlineLineNumbers:y,lineProps:u,className:te,showLineNumbers:f,wrapLongLines:C,wrapLines:n})}function H(Z,J){if(f&&J&&y){var te=assembleLineNumberStyles(w,J,A);Z.unshift(getInlineLineNumber(J,te))}return Z}function z(Z,J){var te=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return n||te.length>0?F(Z,J,te):H(Z,J)}for(var U=function(){var J=R[L],te=J.children[0].value,de=getNewLines(te);if(de){var se=te.split(`
`);se.forEach(function(ne,ge){var Ee=f&&I.length+S,we={type:"text",value:"".concat(ne,`
`)};if(ge===0){var Ie=R.slice(N+1,L).concat(createLineElement({children:[we],className:J.properties.className})),Be=z(Ie,Ee);I.push(Be)}else if(ge===se.length-1){var Me=R[L+1]&&R[L+1].children&&R[L+1].children[0],Re={type:"text",value:"".concat(ne)};if(Me){var Te=createLineElement({children:[Re],className:J.properties.className});R.splice(L+1,0,Te)}else{var Se=[Re],oe=z(Se,Ee,J.properties.className);I.push(oe)}}else{var ae=[we],be=z(ae,Ee,J.properties.className);I.push(be)}}),N=L}L++};L<R.length;)U();if(N!==R.length-1){var G=R.slice(N+1,R.length);if(G&&G.length){var Y=f&&I.length+S,K=z(G,Y);I.push(K)}}return n?I:(T=[]).concat.apply(T,I)}function defaultRenderer(s){var n=s.rows,u=s.stylesheet,f=s.useInlineStyles;return n.map(function(y,S){return createElement({node:y,stylesheet:u,useInlineStyles:f,key:"code-segment-".concat(S)})})}function isHighlightJs(s){return s&&typeof s.highlightAuto<"u"}function getCodeTree(s){var n=s.astGenerator,u=s.language,f=s.code,y=s.defaultCodeValue;if(isHighlightJs(n)){var S=checkForListedLanguage(n,u);return u==="text"?{value:y,language:"text"}:S?n.highlight(u,f):n.highlightAuto(f)}try{return u&&u!=="text"?{value:n.highlight(f,u)}:{value:y}}catch{return{value:y}}}function highlight$1(s,n){return function(f){var y,S,A=f.language,w=f.children,C=f.style,T=C===void 0?n:C,R=f.customStyle,I=R===void 0?{}:R,N=f.codeTagProps,L=N===void 0?{className:A?"language-".concat(A):void 0,style:_objectSpread(_objectSpread({},T['code[class*="language-"]']),T['code[class*="language-'.concat(A,'"]')])}:N,F=f.useInlineStyles,H=F===void 0?!0:F,z=f.showLineNumbers,U=z===void 0?!1:z,G=f.showInlineLineNumbers,Y=G===void 0?!0:G,K=f.startingLineNumber,Z=K===void 0?1:K,J=f.lineNumberContainerStyle,te=f.lineNumberStyle,de=te===void 0?{}:te,se=f.wrapLines,ne=f.wrapLongLines,ge=ne===void 0?!1:ne,Ee=f.lineProps,we=Ee===void 0?{}:Ee,Ie=f.renderer,Be=f.PreTag,Me=Be===void 0?"pre":Be,Re=f.CodeTag,Te=Re===void 0?"code":Re,Se=f.code,oe=Se===void 0?(Array.isArray(w)?w[0]:w)||"":Se,ae=f.astGenerator,be=_objectWithoutProperties(f,_excluded);ae=ae||s;var he=U?React.createElement(AllLineNumbers,{containerStyle:J,codeStyle:L.style||{},numberStyle:de,startingLineNumber:Z,codeString:oe}):null,ue=T.hljs||T['pre[class*="language-"]']||{backgroundColor:"#fff"},ye=isHighlightJs(ae)?"hljs":"prismjs",ce=H?Object.assign({},be,{style:Object.assign({},ue,I)}):Object.assign({},be,{className:be.className?"".concat(ye," ").concat(be.className):ye,style:Object.assign({},I)});if(ge?L.style=_objectSpread({whiteSpace:"pre-wrap"},L.style):L.style=_objectSpread({whiteSpace:"pre"},L.style),!ae)return React.createElement(Me,ce,he,React.createElement(Te,L,oe));(se===void 0&&Ie||ge)&&(se=!0),Ie=Ie||defaultRenderer;var _e=[{type:"text",value:oe}],ke=getCodeTree({astGenerator:ae,language:A,code:oe,defaultCodeValue:_e});ke.language===null&&(ke.value=_e);var Pe=(y=(S=oe.match(/\n/g))===null||S===void 0?void 0:S.length)!==null&&y!==void 0?y:0,$e=Z+Pe,xe=processLines(ke,se,we,U,Y,Z,$e,de,ge);return React.createElement(Me,ce,React.createElement(Te,L,!Y&&he,Ie({rows:xe,stylesheet:T,useInlineStyles:H})))}}const scriptRel="modulepreload",assetsURL=function(s){return"/agent/"+s},seen={},__vitePreload=function(n,u,f){let y=Promise.resolve();if(u&&u.length>0){let T=function(R){return Promise.all(R.map(I=>Promise.resolve(I).then(N=>({status:"fulfilled",value:N}),N=>({status:"rejected",reason:N}))))};var A=T;document.getElementsByTagName("link");const w=document.querySelector("meta[property=csp-nonce]"),C=w?.nonce||w?.getAttribute("nonce");y=T(u.map(R=>{if(R=assetsURL(R),R in seen)return;seen[R]=!0;const I=R.endsWith(".css"),N=I?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${R}"]${N}`))return;const L=document.createElement("link");if(L.rel=I?"stylesheet":scriptRel,I||(L.as="script"),L.crossOrigin="",L.href=R,C&&L.setAttribute("nonce",C),document.head.appendChild(L),I)return new Promise((F,H)=>{L.addEventListener("load",F),L.addEventListener("error",()=>H(new Error(`Unable to preload CSS for ${R}`)))})}))}function S(w){const C=new Event("vite:preloadError",{cancelable:!0});if(C.payload=w,window.dispatchEvent(C),!C.defaultPrevented)throw w}return y.then(w=>{for(const C of w||[])C.status==="rejected"&&S(C.reason);return n().catch(S)})},supportedLanguages=["abap","abnf","actionscript","ada","agda","al","antlr4","apacheconf","apex","apl","applescript","aql","arduino","arff","armasm","arturo","asciidoc","asm6502","asmatmel","aspnet","autohotkey","autoit","avisynth","avro-idl","awk","bash","basic","batch","bbcode","bbj","bicep","birb","bison","bnf","bqn","brainfuck","brightscript","bro","bsl","c","cfscript","chaiscript","cil","cilkc","cilkcpp","clike","clojure","cmake","cobol","coffeescript","concurnas","cooklang","coq","cpp","crystal","csharp","cshtml","csp","css-extras","css","csv","cue","cypher","d","dart","dataweave","dax","dhall","diff","django","dns-zone-file","docker","dot","ebnf","editorconfig","eiffel","ejs","elixir","elm","erb","erlang","etlua","excel-formula","factor","false","firestore-security-rules","flow","fortran","fsharp","ftl","gap","gcode","gdscript","gedcom","gettext","gherkin","git","glsl","gml","gn","go-module","go","gradle","graphql","groovy","haml","handlebars","haskell","haxe","hcl","hlsl","hoon","hpkp","hsts","http","ichigojam","icon","icu-message-format","idris","iecst","ignore","inform7","ini","io","j","java","javadoc","javadoclike","javascript","javastacktrace","jexl","jolie","jq","js-extras","js-templates","jsdoc","json","json5","jsonp","jsstacktrace","jsx","julia","keepalived","keyman","kotlin","kumir","kusto","latex","latte","less","lilypond","linker-script","liquid","lisp","livescript","llvm","log","lolcode","lua","magma","makefile","markdown","markup-templating","markup","mata","matlab","maxscript","mel","mermaid","metafont","mizar","mongodb","monkey","moonscript","n1ql","n4js","nand2tetris-hdl","naniscript","nasm","neon","nevod","nginx","nim","nix","nsis","objectivec","ocaml","odin","opencl","openqasm","oz","parigp","parser","pascal","pascaligo","pcaxis","peoplecode","perl","php-extras","php","phpdoc","plant-uml","plsql","powerquery","powershell","processing","prolog","promql","properties","protobuf","psl","pug","puppet","pure","purebasic","purescript","python","q","qml","qore","qsharp","r","racket","reason","regex","rego","renpy","rescript","rest","rip","roboconf","robotframework","ruby","rust","sas","sass","scala","scheme","scss","shell-session","smali","smalltalk","smarty","sml","solidity","solution-file","soy","sparql","splunk-spl","sqf","sql","squirrel","stan","stata","stylus","supercollider","swift","systemd","t4-cs","t4-templating","t4-vb","tap","tcl","textile","toml","tremor","tsx","tt2","turtle","twig","typescript","typoscript","unrealscript","uorazor","uri","v","vala","vbnet","velocity","verilog","vhdl","vim","visual-basic","warpscript","wasm","web-idl","wgsl","wiki","wolfram","wren","xeora","xml-doc","xojo","xquery","yaml","yang","zig"],search=/[#.]/g;function parseSelector(s,n){const u=s||"",f={};let y=0,S,A;for(;y<u.length;){search.lastIndex=y;const w=search.exec(u),C=u.slice(y,w?w.index:u.length);C&&(S?S==="#"?f.id=C:Array.isArray(f.className)?f.className.push(C):f.className=[C]:A=C,y+=C.length),w&&(S=w[0],y++)}return{type:"element",tagName:A||n||"div",properties:f,children:[]}}function createH(s,n,u){const f=u?createAdjustMap(u):void 0;function y(S,A,...w){let C;if(S==null){C={type:"root",children:[]};const T=A;w.unshift(T)}else{C=parseSelector(S,n);const T=C.tagName.toLowerCase(),R=f?f.get(T):void 0;if(C.tagName=R||T,isChild(A))w.unshift(A);else for(const[I,N]of Object.entries(A))addProperty(s,C.properties,I,N)}for(const T of w)addChild(C.children,T);return C.type==="element"&&C.tagName==="template"&&(C.content={type:"root",children:C.children},C.children=[]),C}return y}function isChild(s){if(s===null||typeof s!="object"||Array.isArray(s))return!0;if(typeof s.type!="string")return!1;const n=s,u=Object.keys(s);for(const f of u){const y=n[f];if(y&&typeof y=="object"){if(!Array.isArray(y))return!0;const S=y;for(const A of S)if(typeof A!="number"&&typeof A!="string")return!0}}return!!("children"in s&&Array.isArray(s.children))}function addProperty(s,n,u,f){const y=find(s,u);let S;if(f!=null){if(typeof f=="number"){if(Number.isNaN(f))return;S=f}else typeof f=="boolean"?S=f:typeof f=="string"?y.spaceSeparated?S=parse$2(f):y.commaSeparated?S=parse$3(f):y.commaOrSpaceSeparated?S=parse$2(parse$3(f).join(" ")):S=parsePrimitive(y,y.property,f):Array.isArray(f)?S=[...f]:S=y.property==="style"?style(f):String(f);if(Array.isArray(S)){const A=[];for(const w of S)A.push(parsePrimitive(y,y.property,w));S=A}y.property==="className"&&Array.isArray(n.className)&&(S=n.className.concat(S)),n[y.property]=S}}function addChild(s,n){if(n!=null)if(typeof n=="number"||typeof n=="string")s.push({type:"text",value:String(n)});else if(Array.isArray(n))for(const u of n)addChild(s,u);else if(typeof n=="object"&&"type"in n)n.type==="root"?addChild(s,n.children):s.push(n);else throw new Error("Expected node, nodes, or string, got `"+n+"`")}function parsePrimitive(s,n,u){if(typeof u=="string"){if(s.number&&u&&!Number.isNaN(Number(u)))return Number(u);if((s.boolean||s.overloadedBoolean)&&(u===""||normalize$2(u)===normalize$2(n)))return!0}return u}function style(s){const n=[];for(const[u,f]of Object.entries(s))n.push([u,f].join(": "));return n.join("; ")}function createAdjustMap(s){const n=new Map;for(const u of s)n.set(u.toLowerCase(),u);return n}const svgCaseSensitiveTagNames=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],h$1=createH(html$2,"div");createH(svg,"g",svgCaseSensitiveTagNames);const characterEntitiesLegacy=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],characterReferenceInvalid={0:"",128:"",130:"",131:"",132:"",133:"",134:"",135:"",136:"",137:"",138:"",139:"",140:"",142:"",145:"",146:"",147:"",148:"",149:"",150:"",151:"",152:"",153:"",154:"",155:"",156:"",158:"",159:""};function isDecimal(s){const n=typeof s=="string"?s.charCodeAt(0):s;return n>=48&&n<=57}function isHexadecimal(s){const n=typeof s=="string"?s.charCodeAt(0):s;return n>=97&&n<=102||n>=65&&n<=70||n>=48&&n<=57}function isAlphabetical(s){const n=typeof s=="string"?s.charCodeAt(0):s;return n>=97&&n<=122||n>=65&&n<=90}function isAlphanumerical(s){return isAlphabetical(s)||isDecimal(s)}const messages=["","Named character references must be terminated by a semicolon","Numeric character references must be terminated by a semicolon","Named character references cannot be empty","Numeric character references cannot be empty","Named character references must be known","Numeric character references cannot be disallowed","Numeric character references cannot be outside the permissible Unicode range"];function parseEntities(s,n){const u={},f=typeof u.additional=="string"?u.additional.charCodeAt(0):u.additional,y=[];let S=0,A=-1,w="",C,T;u.position&&("start"in u.position||"indent"in u.position?(T=u.position.indent,C=u.position.start):C=u.position);let R=(C?C.line:0)||1,I=(C?C.column:0)||1,N=F(),L;for(S--;++S<=s.length;)if(L===10&&(I=(T?T[A]:0)||1),L=s.charCodeAt(S),L===38){const U=s.charCodeAt(S+1);if(U===9||U===10||U===12||U===32||U===38||U===60||Number.isNaN(U)||f&&U===f){w+=String.fromCharCode(L),I++;continue}const G=S+1;let Y=G,K=G,Z;if(U===35){K=++Y;const we=s.charCodeAt(K);we===88||we===120?(Z="hexadecimal",K=++Y):Z="decimal"}else Z="named";let J="",te="",de="";const se=Z==="named"?isAlphanumerical:Z==="decimal"?isDecimal:isHexadecimal;for(K--;++K<=s.length;){const we=s.charCodeAt(K);if(!se(we))break;de+=String.fromCharCode(we),Z==="named"&&characterEntitiesLegacy.includes(de)&&(J=de,te=decodeNamedCharacterReference(de))}let ne=s.charCodeAt(K)===59;if(ne){K++;const we=Z==="named"?decodeNamedCharacterReference(de):!1;we&&(J=de,te=we)}let ge=1+K-G,Ee="";if(!(!ne&&u.nonTerminated===!1))if(!de)Z!=="named"&&H(4,ge);else if(Z==="named"){if(ne&&!te)H(5,1);else if(J!==de&&(K=Y+J.length,ge=1+K-Y,ne=!1),!ne){const we=J?1:3;if(u.attribute){const Ie=s.charCodeAt(K);Ie===61?(H(we,ge),te=""):isAlphanumerical(Ie)?te="":H(we,ge)}else H(we,ge)}Ee=te}else{ne||H(2,ge);let we=Number.parseInt(de,Z==="hexadecimal"?16:10);if(prohibited(we))H(7,ge),Ee="";else if(we in characterReferenceInvalid)H(6,ge),Ee=characterReferenceInvalid[we];else{let Ie="";disallowed(we)&&H(6,ge),we>65535&&(we-=65536,Ie+=String.fromCharCode(we>>>10|55296),we=56320|we&1023),Ee=Ie+String.fromCharCode(we)}}if(Ee){z(),N=F(),S=K-1,I+=K-G+1,y.push(Ee);const we=F();we.offset++,u.reference&&u.reference.call(u.referenceContext||void 0,Ee,{start:N,end:we},s.slice(G-1,K)),N=we}else de=s.slice(G-1,K),w+=de,I+=de.length,S=K-1}else L===10&&(R++,A++,I=0),Number.isNaN(L)?z():(w+=String.fromCharCode(L),I++);return y.join("");function F(){return{line:R,column:I,offset:S+((C?C.offset:0)||0)}}function H(U,G){let Y;u.warning&&(Y=F(),Y.column+=G,Y.offset+=G,u.warning.call(u.warningContext||void 0,messages[U],Y,U))}function z(){w&&(y.push(w),u.text&&u.text.call(u.textContext||void 0,w,{start:N,end:F()}),w="")}}function prohibited(s){return s>=55296&&s<=57343||s>1114111}function disallowed(s){return s>=1&&s<=8||s===11||s>=13&&s<=31||s>=127&&s<=159||s>=64976&&s<=65007||(s&65535)===65535||(s&65535)===65534}var uniqueId=0,plainTextGrammar={},_={util:{type:function(s){return Object.prototype.toString.call(s).slice(8,-1)},objId:function(s){return s.__id||Object.defineProperty(s,"__id",{value:++uniqueId}),s.__id},clone:function s(n,u){u=u||{};var f,y;switch(_.util.type(n)){case"Object":if(y=_.util.objId(n),u[y])return u[y];f={},u[y]=f;for(var S in n)n.hasOwnProperty(S)&&(f[S]=s(n[S],u));return f;case"Array":return y=_.util.objId(n),u[y]?u[y]:(f=[],u[y]=f,n.forEach(function(A,w){f[w]=s(A,u)}),f);default:return n}}},languages:{plain:plainTextGrammar,plaintext:plainTextGrammar,text:plainTextGrammar,txt:plainTextGrammar,extend:function(s,n){var u=_.util.clone(_.languages[s]);for(var f in n)u[f]=n[f];return u},insertBefore:function(s,n,u,f){f=f||_.languages;var y=f[s],S={};for(var A in y)if(y.hasOwnProperty(A)){if(A==n)for(var w in u)u.hasOwnProperty(w)&&(S[w]=u[w]);u.hasOwnProperty(A)||(S[A]=y[A])}var C=f[s];return f[s]=S,_.languages.DFS(_.languages,function(T,R){R===C&&T!=s&&(this[T]=S)}),S},DFS:function s(n,u,f,y){y=y||{};var S=_.util.objId;for(var A in n)if(n.hasOwnProperty(A)){u.call(n,A,n[A],f||A);var w=n[A],C=_.util.type(w);C==="Object"&&!y[S(w)]?(y[S(w)]=!0,s(w,u,null,y)):C==="Array"&&!y[S(w)]&&(y[S(w)]=!0,s(w,u,A,y))}}},plugins:{},highlight:function(s,n,u){var f={code:s,grammar:n,language:u};if(_.hooks.run("before-tokenize",f),!f.grammar)throw new Error('The language "'+f.language+'" has no grammar.');return f.tokens=_.tokenize(f.code,f.grammar),_.hooks.run("after-tokenize",f),Token.stringify(_.util.encode(f.tokens),f.language)},tokenize:function(s,n){var u=n.rest;if(u){for(var f in u)n[f]=u[f];delete n.rest}var y=new LinkedList;return addAfter(y,y.head,s),matchGrammar(s,y,n,y.head,0),toArray(y)},hooks:{all:{},add:function(s,n){var u=_.hooks.all;u[s]=u[s]||[],u[s].push(n)},run:function(s,n){var u=_.hooks.all[s];if(!(!u||!u.length))for(var f=0,y;y=u[f++];)y(n)}},Token};function Token(s,n,u,f){this.type=s,this.content=n,this.alias=u,this.length=(f||"").length|0}function matchPattern(s,n,u,f){s.lastIndex=n;var y=s.exec(u);if(y&&f&&y[1]){var S=y[1].length;y.index+=S,y[0]=y[0].slice(S)}return y}function matchGrammar(s,n,u,f,y,S){for(var A in u)if(!(!u.hasOwnProperty(A)||!u[A])){var w=u[A];w=Array.isArray(w)?w:[w];for(var C=0;C<w.length;++C){if(S&&S.cause==A+","+C)return;var T=w[C],R=T.inside,I=!!T.lookbehind,N=!!T.greedy,L=T.alias;if(N&&!T.pattern.global){var F=T.pattern.toString().match(/[imsuy]*$/)[0];T.pattern=RegExp(T.pattern.source,F+"g")}for(var H=T.pattern||T,z=f.next,U=y;z!==n.tail&&!(S&&U>=S.reach);U+=z.value.length,z=z.next){var G=z.value;if(n.length>s.length)return;if(!(G instanceof Token)){var Y=1,K;if(N){if(K=matchPattern(H,U,s,I),!K||K.index>=s.length)break;var de=K.index,Z=K.index+K[0].length,J=U;for(J+=z.value.length;de>=J;)z=z.next,J+=z.value.length;if(J-=z.value.length,U=J,z.value instanceof Token)continue;for(var te=z;te!==n.tail&&(J<Z||typeof te.value=="string");te=te.next)Y++,J+=te.value.length;Y--,G=s.slice(U,J),K.index-=U}else if(K=matchPattern(H,0,G,I),!K)continue;var de=K.index,se=K[0],ne=G.slice(0,de),ge=G.slice(de+se.length),Ee=U+G.length;S&&Ee>S.reach&&(S.reach=Ee);var we=z.prev;ne&&(we=addAfter(n,we,ne),U+=ne.length),removeRange(n,we,Y);var Ie=new Token(A,R?_.tokenize(se,R):se,L,se);if(z=addAfter(n,we,Ie),ge&&addAfter(n,z,ge),Y>1){var Be={cause:A+","+C,reach:Ee};matchGrammar(s,n,u,z.prev,U,Be),S&&Be.reach>S.reach&&(S.reach=Be.reach)}}}}}}function LinkedList(){var s={value:null,prev:null,next:null},n={value:null,prev:s,next:null};s.next=n,this.head=s,this.tail=n,this.length=0}function addAfter(s,n,u){var f=n.next,y={value:u,prev:n,next:f};return n.next=y,f.prev=y,s.length++,y}function removeRange(s,n,u){for(var f=n.next,y=0;y<u&&f!==s.tail;y++)f=f.next;n.next=f,f.prev=n,s.length-=y}function toArray(s){for(var n=[],u=s.head.next;u!==s.tail;)n.push(u.value),u=u.next;return n}const Prism=_;function Refractor(){}Refractor.prototype=Prism;const refractor=new Refractor;refractor.highlight=highlight;refractor.register=register;refractor.alias=alias;refractor.registered=registered;refractor.listLanguages=listLanguages;refractor.util.encode=encode$1;refractor.Token.stringify=stringify;function highlight(s,n){if(typeof s!="string")throw new TypeError("Expected `string` for `value`, got `"+s+"`");let u,f;if(n&&typeof n=="object")u=n;else{if(f=n,typeof f!="string")throw new TypeError("Expected `string` for `name`, got `"+f+"`");if(Object.hasOwn(refractor.languages,f))u=refractor.languages[f];else throw new Error("Unknown language: `"+f+"` is not registered")}return{type:"root",children:Prism.highlight.call(refractor,s,u,f)}}function register(s){if(typeof s!="function"||!s.displayName)throw new Error("Expected `function` for `syntax`, got `"+s+"`");Object.hasOwn(refractor.languages,s.displayName)||s(refractor)}function alias(s,n){const u=refractor.languages;let f={};typeof s=="string"?n&&(f[s]=n):f=s;let y;for(y in f)if(Object.hasOwn(f,y)){const S=f[y],A=typeof S=="string"?[S]:S;let w=-1;for(;++w<A.length;)u[A[w]]=u[y]}}function registered(s){if(typeof s!="string")throw new TypeError("Expected `string` for `aliasOrLanguage`, got `"+s+"`");return Object.hasOwn(refractor.languages,s)}function listLanguages(){const s=refractor.languages,n=[];let u;for(u in s)Object.hasOwn(s,u)&&typeof s[u]=="object"&&n.push(u);return n}function stringify(s,n){if(typeof s=="string")return{type:"text",value:s};if(Array.isArray(s)){const f=[];let y=-1;for(;++y<s.length;)s[y]!==null&&s[y]!==void 0&&s[y]!==""&&f.push(stringify(s[y],n));return f}const u={attributes:{},classes:["token",s.type],content:stringify(s.content,n),language:n,tag:"span",type:s.type};return s.alias&&u.classes.push(...typeof s.alias=="string"?[s.alias]:s.alias),refractor.hooks.run("wrap",u),h$1(u.tag+"."+u.classes.join("."),attributes(u.attributes),u.content)}function encode$1(s){return s}function attributes(s){let n;for(n in s)Object.hasOwn(s,n)&&(s[n]=parseEntities(s[n]));return s}const defaultStyle={'code[class*="language-"]':{color:"black",background:"none",textShadow:"0 1px white",fontFamily:"Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace",fontSize:"1em",textAlign:"left",whiteSpace:"pre",wordSpacing:"normal",wordBreak:"normal",wordWrap:"normal",lineHeight:"1.5",MozTabSize:"4",OTabSize:"4",tabSize:"4",WebkitHyphens:"none",MozHyphens:"none",msHyphens:"none",hyphens:"none"},'pre[class*="language-"]':{color:"black",background:"#f5f2f0",textShadow:"0 1px white",fontFamily:"Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace",fontSize:"1em",textAlign:"left",whiteSpace:"pre",wordSpacing:"normal",wordBreak:"normal",wordWrap:"normal",lineHeight:"1.5",MozTabSize:"4",OTabSize:"4",tabSize:"4",WebkitHyphens:"none",MozHyphens:"none",msHyphens:"none",hyphens:"none",padding:"1em",margin:".5em 0",overflow:"auto"},'pre[class*="language-"]::-moz-selection':{textShadow:"none",background:"#b3d4fc"},'pre[class*="language-"] ::-moz-selection':{textShadow:"none",background:"#b3d4fc"},'code[class*="language-"]::-moz-selection':{textShadow:"none",background:"#b3d4fc"},'code[class*="language-"] ::-moz-selection':{textShadow:"none",background:"#b3d4fc"},'pre[class*="language-"]::selection':{textShadow:"none",background:"#b3d4fc"},'pre[class*="language-"] ::selection':{textShadow:"none",background:"#b3d4fc"},'code[class*="language-"]::selection':{textShadow:"none",background:"#b3d4fc"},'code[class*="language-"] ::selection':{textShadow:"none",background:"#b3d4fc"},':not(pre) > code[class*="language-"]':{background:"#f5f2f0",padding:".1em",borderRadius:".3em",whiteSpace:"normal"},comment:{color:"slategray"},prolog:{color:"slategray"},doctype:{color:"slategray"},cdata:{color:"slategray"},punctuation:{color:"#999"},namespace:{Opacity:".7"},property:{color:"#905"},tag:{color:"#905"},boolean:{color:"#905"},number:{color:"#905"},constant:{color:"#905"},symbol:{color:"#905"},deleted:{color:"#905"},selector:{color:"#690"},"attr-name":{color:"#690"},string:{color:"#690"},char:{color:"#690"},builtin:{color:"#690"},inserted:{color:"#690"},operator:{color:"#9a6e3a",background:"hsla(0, 0%, 100%, .5)"},entity:{color:"#9a6e3a",background:"hsla(0, 0%, 100%, .5)",cursor:"help"},url:{color:"#9a6e3a",background:"hsla(0, 0%, 100%, .5)"},".language-css .token.string":{color:"#9a6e3a",background:"hsla(0, 0%, 100%, .5)"},".style .token.string":{color:"#9a6e3a",background:"hsla(0, 0%, 100%, .5)"},atrule:{color:"#07a"},"attr-value":{color:"#07a"},keyword:{color:"#07a"},function:{color:"#DD4A68"},"class-name":{color:"#DD4A68"},regex:{color:"#e90"},important:{color:"#e90",fontWeight:"bold"},variable:{color:"#e90"},bold:{fontWeight:"bold"},italic:{fontStyle:"italic"}};markup.displayName="markup";markup.aliases=["atom","html","mathml","rss","ssml","svg","xml"];function markup(s){s.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},s.languages.markup.tag.inside["attr-value"].inside.entity=s.languages.markup.entity,s.languages.markup.doctype.inside["internal-subset"].inside=s.languages.markup,s.hooks.add("wrap",function(n){n.type==="entity"&&(n.attributes.title=n.content.value.replace(/&amp;/,"&"))}),Object.defineProperty(s.languages.markup.tag,"addInlined",{value:function(u,f){var y={};y["language-"+f]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:s.languages[f]},y.cdata=/^<!\[CDATA\[|\]\]>$/i;var S={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:y}};S["language-"+f]={pattern:/[\s\S]+/,inside:s.languages[f]};var A={};A[u]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return u}),"i"),lookbehind:!0,greedy:!0,inside:S},s.languages.insertBefore("markup","cdata",A)}}),Object.defineProperty(s.languages.markup.tag,"addAttribute",{value:function(n,u){s.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+n+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[u,"language-"+u],inside:s.languages[u]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),s.languages.html=s.languages.markup,s.languages.mathml=s.languages.markup,s.languages.svg=s.languages.markup,s.languages.xml=s.languages.extend("markup",{}),s.languages.ssml=s.languages.xml,s.languages.atom=s.languages.xml,s.languages.rss=s.languages.xml}css.displayName="css";css.aliases=[];function css(s){(function(n){var u=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;n.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+u.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+u.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+u.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+u.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:u,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},n.languages.css.atrule.inside.rest=n.languages.css;var f=n.languages.markup;f&&(f.tag.addInlined("style","css"),f.tag.addAttribute("style","css"))})(s)}clike.displayName="clike";clike.aliases=[];function clike(s){s.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/}}regex.displayName="regex";regex.aliases=[];function regex(s){(function(n){var u={pattern:/\\[\\(){}[\]^$+*?|.]/,alias:"escape"},f=/\\(?:x[\da-fA-F]{2}|u[\da-fA-F]{4}|u\{[\da-fA-F]+\}|0[0-7]{0,2}|[123][0-7]{2}|c[a-zA-Z]|.)/,y={pattern:/\.|\\[wsd]|\\p\{[^{}]+\}/i,alias:"class-name"},S={pattern:/\\[wsd]|\\p\{[^{}]+\}/i,alias:"class-name"},A="(?:[^\\\\-]|"+f.source+")",w=RegExp(A+"-"+A),C={pattern:/(<|')[^<>']+(?=[>']$)/,lookbehind:!0,alias:"variable"};n.languages.regex={"char-class":{pattern:/((?:^|[^\\])(?:\\\\)*)\[(?:[^\\\]]|\\[\s\S])*\]/,lookbehind:!0,inside:{"char-class-negation":{pattern:/(^\[)\^/,lookbehind:!0,alias:"operator"},"char-class-punctuation":{pattern:/^\[|\]$/,alias:"punctuation"},range:{pattern:w,inside:{escape:f,"range-punctuation":{pattern:/-/,alias:"operator"}}},"special-escape":u,"char-set":S,escape:f}},"special-escape":u,"char-set":y,backreference:[{pattern:/\\(?![123][0-7]{2})[1-9]/,alias:"keyword"},{pattern:/\\k<[^<>']+>/,alias:"keyword",inside:{"group-name":C}}],anchor:{pattern:/[$^]|\\[ABbGZz]/,alias:"function"},escape:f,group:[{pattern:/\((?:\?(?:<[^<>']+>|'[^<>']+'|[>:]|<?[=!]|[idmnsuxU]+(?:-[idmnsuxU]+)?:?))?/,alias:"punctuation",inside:{"group-name":C}},{pattern:/\)/,alias:"punctuation"}],quantifier:{pattern:/(?:[+*?]|\{\d+(?:,\d*)?\})[?+]?/,alias:"number"},alternation:{pattern:/\|/,alias:"keyword"}}})(s)}javascript.displayName="javascript";javascript.aliases=["js"];function javascript(s){s.register(clike),s.languages.javascript=s.languages.extend("clike",{"class-name":[s.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),s.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,s.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:s.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:s.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:s.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:s.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:s.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),s.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:s.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),s.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),s.languages.markup&&(s.languages.markup.tag.addInlined("script","javascript"),s.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),s.languages.js=s.languages.javascript}abap.displayName="abap";abap.aliases=[];function abap(s){s.languages.abap={comment:/^\*.*/m,string:/(`|')(?:\\.|(?!\1)[^\\\r\n])*\1/,"string-template":{pattern:/([|}])(?:\\.|[^\\|{\r\n])*(?=[|{])/,lookbehind:!0,alias:"string"},"eol-comment":{pattern:/(^|\s)".*/m,lookbehind:!0,alias:"comment"},keyword:{pattern:/(\s|\.|^)(?:\*-INPUT|\?TO|ABAP-SOURCE|ABBREVIATED|ABS|ABSTRACT|ACCEPT|ACCEPTING|ACCESSPOLICY|ACCORDING|ACOS|ACTIVATION|ACTUAL|ADD|ADD-CORRESPONDING|ADJACENT|AFTER|ALIAS|ALIASES|ALIGN|ALL|ALLOCATE|ALPHA|ANALYSIS|ANALYZER|AND|ANY|APPEND|APPENDAGE|APPENDING|APPLICATION|ARCHIVE|AREA|ARITHMETIC|AS|ASCENDING|ASIN|ASPECT|ASSERT|ASSIGN|ASSIGNED|ASSIGNING|ASSOCIATION|ASYNCHRONOUS|AT|ATAN|ATTRIBUTES|AUTHORITY|AUTHORITY-CHECK|AVG|BACK|BACKGROUND|BACKUP|BACKWARD|BADI|BASE|BEFORE|BEGIN|BETWEEN|BIG|BINARY|BINDING|BIT|BIT-AND|BIT-NOT|BIT-OR|BIT-XOR|BLACK|BLANK|BLANKS|BLOB|BLOCK|BLOCKS|BLUE|BOUND|BOUNDARIES|BOUNDS|BOXED|BREAK-POINT|BT|BUFFER|BY|BYPASSING|BYTE|BYTE-CA|BYTE-CN|BYTE-CO|BYTE-CS|BYTE-NA|BYTE-NS|BYTE-ORDER|C|CA|CALL|CALLING|CASE|CAST|CASTING|CATCH|CEIL|CENTER|CENTERED|CHAIN|CHAIN-INPUT|CHAIN-REQUEST|CHANGE|CHANGING|CHANNELS|CHAR-TO-HEX|CHARACTER|CHARLEN|CHECK|CHECKBOX|CIRCULAR|CI_|CLASS|CLASS-CODING|CLASS-DATA|CLASS-EVENTS|CLASS-METHODS|CLASS-POOL|CLEANUP|CLEAR|CLIENT|CLOB|CLOCK|CLOSE|CN|CNT|CO|COALESCE|CODE|CODING|COLLECT|COLOR|COLUMN|COLUMNS|COL_BACKGROUND|COL_GROUP|COL_HEADING|COL_KEY|COL_NEGATIVE|COL_NORMAL|COL_POSITIVE|COL_TOTAL|COMMENT|COMMENTS|COMMIT|COMMON|COMMUNICATION|COMPARING|COMPONENT|COMPONENTS|COMPRESSION|COMPUTE|CONCAT|CONCATENATE|COND|CONDENSE|CONDITION|CONNECT|CONNECTION|CONSTANTS|CONTEXT|CONTEXTS|CONTINUE|CONTROL|CONTROLS|CONV|CONVERSION|CONVERT|COPIES|COPY|CORRESPONDING|COS|COSH|COUNT|COUNTRY|COVER|CP|CPI|CREATE|CREATING|CRITICAL|CS|CURRENCY|CURRENCY_CONVERSION|CURRENT|CURSOR|CURSOR-SELECTION|CUSTOMER|CUSTOMER-FUNCTION|DANGEROUS|DATA|DATABASE|DATAINFO|DATASET|DATE|DAYLIGHT|DBMAXLEN|DD\/MM\/YY|DD\/MM\/YYYY|DDMMYY|DEALLOCATE|DECIMALS|DECIMAL_SHIFT|DECLARATIONS|DEEP|DEFAULT|DEFERRED|DEFINE|DEFINING|DEFINITION|DELETE|DELETING|DEMAND|DEPARTMENT|DESCENDING|DESCRIBE|DESTINATION|DETAIL|DIALOG|DIRECTORY|DISCONNECT|DISPLAY|DISPLAY-MODE|DISTANCE|DISTINCT|DIV|DIVIDE|DIVIDE-CORRESPONDING|DIVISION|DO|DUMMY|DUPLICATE|DUPLICATES|DURATION|DURING|DYNAMIC|DYNPRO|E|EACH|EDIT|EDITOR-CALL|ELSE|ELSEIF|EMPTY|ENABLED|ENABLING|ENCODING|END|END-ENHANCEMENT-SECTION|END-LINES|END-OF-DEFINITION|END-OF-FILE|END-OF-PAGE|END-OF-SELECTION|ENDAT|ENDCASE|ENDCATCH|ENDCHAIN|ENDCLASS|ENDDO|ENDENHANCEMENT|ENDEXEC|ENDFOR|ENDFORM|ENDFUNCTION|ENDIAN|ENDIF|ENDING|ENDINTERFACE|ENDLOOP|ENDMETHOD|ENDMODULE|ENDON|ENDPROVIDE|ENDSELECT|ENDTRY|ENDWHILE|ENGINEERING|ENHANCEMENT|ENHANCEMENT-POINT|ENHANCEMENT-SECTION|ENHANCEMENTS|ENTRIES|ENTRY|ENVIRONMENT|EQ|EQUAL|EQUIV|ERRORMESSAGE|ERRORS|ESCAPE|ESCAPING|EVENT|EVENTS|EXACT|EXCEPT|EXCEPTION|EXCEPTION-TABLE|EXCEPTIONS|EXCLUDE|EXCLUDING|EXEC|EXECUTE|EXISTS|EXIT|EXIT-COMMAND|EXP|EXPAND|EXPANDING|EXPIRATION|EXPLICIT|EXPONENT|EXPORT|EXPORTING|EXTEND|EXTENDED|EXTENSION|EXTRACT|FAIL|FETCH|FIELD|FIELD-GROUPS|FIELD-SYMBOL|FIELD-SYMBOLS|FIELDS|FILE|FILTER|FILTER-TABLE|FILTERS|FINAL|FIND|FIRST|FIRST-LINE|FIXED-POINT|FKEQ|FKGE|FLOOR|FLUSH|FONT|FOR|FORM|FORMAT|FORWARD|FOUND|FRAC|FRAME|FRAMES|FREE|FRIENDS|FROM|FUNCTION|FUNCTION-POOL|FUNCTIONALITY|FURTHER|GAPS|GE|GENERATE|GET|GIVING|GKEQ|GKGE|GLOBAL|GRANT|GREATER|GREEN|GROUP|GROUPS|GT|HANDLE|HANDLER|HARMLESS|HASHED|HAVING|HDB|HEAD-LINES|HEADER|HEADERS|HEADING|HELP-ID|HELP-REQUEST|HIDE|HIGH|HINT|HOLD|HOTSPOT|I|ICON|ID|IDENTIFICATION|IDENTIFIER|IDS|IF|IGNORE|IGNORING|IMMEDIATELY|IMPLEMENTATION|IMPLEMENTATIONS|IMPLEMENTED|IMPLICIT|IMPORT|IMPORTING|IN|INACTIVE|INCL|INCLUDE|INCLUDES|INCLUDING|INCREMENT|INDEX|INDEX-LINE|INFOTYPES|INHERITING|INIT|INITIAL|INITIALIZATION|INNER|INOUT|INPUT|INSERT|INSTANCES|INTENSIFIED|INTERFACE|INTERFACE-POOL|INTERFACES|INTERNAL|INTERVALS|INTO|INVERSE|INVERTED-DATE|IS|ISO|ITERATOR|ITNO|JOB|JOIN|KEEP|KEEPING|KERNEL|KEY|KEYS|KEYWORDS|KIND|LANGUAGE|LAST|LATE|LAYOUT|LE|LEADING|LEAVE|LEFT|LEFT-JUSTIFIED|LEFTPLUS|LEFTSPACE|LEGACY|LENGTH|LESS|LET|LEVEL|LEVELS|LIKE|LINE|LINE-COUNT|LINE-SELECTION|LINE-SIZE|LINEFEED|LINES|LIST|LIST-PROCESSING|LISTBOX|LITTLE|LLANG|LOAD|LOAD-OF-PROGRAM|LOB|LOCAL|LOCALE|LOCATOR|LOG|LOG-POINT|LOG10|LOGFILE|LOGICAL|LONG|LOOP|LOW|LOWER|LPAD|LPI|LT|M|MAIL|MAIN|MAJOR-ID|MAPPING|MARGIN|MARK|MASK|MATCH|MATCHCODE|MAX|MAXIMUM|MEDIUM|MEMBERS|MEMORY|MESH|MESSAGE|MESSAGE-ID|MESSAGES|MESSAGING|METHOD|METHODS|MIN|MINIMUM|MINOR-ID|MM\/DD\/YY|MM\/DD\/YYYY|MMDDYY|MOD|MODE|MODIF|MODIFIER|MODIFY|MODULE|MOVE|MOVE-CORRESPONDING|MULTIPLY|MULTIPLY-CORRESPONDING|NA|NAME|NAMETAB|NATIVE|NB|NE|NESTED|NESTING|NEW|NEW-LINE|NEW-PAGE|NEW-SECTION|NEXT|NO|NO-DISPLAY|NO-EXTENSION|NO-GAP|NO-GAPS|NO-GROUPING|NO-HEADING|NO-SCROLLING|NO-SIGN|NO-TITLE|NO-TOPOFPAGE|NO-ZERO|NODE|NODES|NON-UNICODE|NON-UNIQUE|NOT|NP|NS|NULL|NUMBER|NUMOFCHAR|O|OBJECT|OBJECTS|OBLIGATORY|OCCURRENCE|OCCURRENCES|OCCURS|OF|OFF|OFFSET|OLE|ON|ONLY|OPEN|OPTION|OPTIONAL|OPTIONS|OR|ORDER|OTHER|OTHERS|OUT|OUTER|OUTPUT|OUTPUT-LENGTH|OVERFLOW|OVERLAY|PACK|PACKAGE|PAD|PADDING|PAGE|PAGES|PARAMETER|PARAMETER-TABLE|PARAMETERS|PART|PARTIALLY|PATTERN|PERCENTAGE|PERFORM|PERFORMING|PERSON|PF|PF-STATUS|PINK|PLACES|POOL|POSITION|POS_HIGH|POS_LOW|PRAGMAS|PRECOMPILED|PREFERRED|PRESERVING|PRIMARY|PRINT|PRINT-CONTROL|PRIORITY|PRIVATE|PROCEDURE|PROCESS|PROGRAM|PROPERTY|PROTECTED|PROVIDE|PUBLIC|PUSHBUTTON|PUT|QUEUE-ONLY|QUICKINFO|RADIOBUTTON|RAISE|RAISING|RANGE|RANGES|RAW|READ|READ-ONLY|READER|RECEIVE|RECEIVED|RECEIVER|RECEIVING|RED|REDEFINITION|REDUCE|REDUCED|REF|REFERENCE|REFRESH|REGEX|REJECT|REMOTE|RENAMING|REPLACE|REPLACEMENT|REPLACING|REPORT|REQUEST|REQUESTED|RESERVE|RESET|RESOLUTION|RESPECTING|RESPONSIBLE|RESULT|RESULTS|RESUMABLE|RESUME|RETRY|RETURN|RETURNCODE|RETURNING|RIGHT|RIGHT-JUSTIFIED|RIGHTPLUS|RIGHTSPACE|RISK|RMC_COMMUNICATION_FAILURE|RMC_INVALID_STATUS|RMC_SYSTEM_FAILURE|ROLE|ROLLBACK|ROUND|ROWS|RTTI|RUN|SAP|SAP-SPOOL|SAVING|SCALE_PRESERVING|SCALE_PRESERVING_SCIENTIFIC|SCAN|SCIENTIFIC|SCIENTIFIC_WITH_LEADING_ZERO|SCREEN|SCROLL|SCROLL-BOUNDARY|SCROLLING|SEARCH|SECONDARY|SECONDS|SECTION|SELECT|SELECT-OPTIONS|SELECTION|SELECTION-SCREEN|SELECTION-SET|SELECTION-SETS|SELECTION-TABLE|SELECTIONS|SELECTOR|SEND|SEPARATE|SEPARATED|SET|SHARED|SHIFT|SHORT|SHORTDUMP-ID|SIGN|SIGN_AS_POSTFIX|SIMPLE|SIN|SINGLE|SINH|SIZE|SKIP|SKIPPING|SMART|SOME|SORT|SORTABLE|SORTED|SOURCE|SPACE|SPECIFIED|SPLIT|SPOOL|SPOTS|SQL|SQLSCRIPT|SQRT|STABLE|STAMP|STANDARD|START-OF-SELECTION|STARTING|STATE|STATEMENT|STATEMENTS|STATIC|STATICS|STATUSINFO|STEP-LOOP|STOP|STRLEN|STRUCTURE|STRUCTURES|STYLE|SUBKEY|SUBMATCHES|SUBMIT|SUBROUTINE|SUBSCREEN|SUBSTRING|SUBTRACT|SUBTRACT-CORRESPONDING|SUFFIX|SUM|SUMMARY|SUMMING|SUPPLIED|SUPPLY|SUPPRESS|SWITCH|SWITCHSTATES|SYMBOL|SYNCPOINTS|SYNTAX|SYNTAX-CHECK|SYNTAX-TRACE|SYSTEM-CALL|SYSTEM-EXCEPTIONS|SYSTEM-EXIT|TAB|TABBED|TABLE|TABLES|TABLEVIEW|TABSTRIP|TAN|TANH|TARGET|TASK|TASKS|TEST|TESTING|TEXT|TEXTPOOL|THEN|THROW|TIME|TIMES|TIMESTAMP|TIMEZONE|TITLE|TITLE-LINES|TITLEBAR|TO|TOKENIZATION|TOKENS|TOP-LINES|TOP-OF-PAGE|TRACE-FILE|TRACE-TABLE|TRAILING|TRANSACTION|TRANSFER|TRANSFORMATION|TRANSLATE|TRANSPORTING|TRMAC|TRUNC|TRUNCATE|TRUNCATION|TRY|TYPE|TYPE-POOL|TYPE-POOLS|TYPES|ULINE|UNASSIGN|UNDER|UNICODE|UNION|UNIQUE|UNIT|UNIT_CONVERSION|UNIX|UNPACK|UNTIL|UNWIND|UP|UPDATE|UPPER|USER|USER-COMMAND|USING|UTF-8|VALID|VALUE|VALUE-REQUEST|VALUES|VARY|VARYING|VERIFICATION-MESSAGE|VERSION|VIA|VIEW|VISIBLE|WAIT|WARNING|WHEN|WHENEVER|WHERE|WHILE|WIDTH|WINDOW|WINDOWS|WITH|WITH-HEADING|WITH-TITLE|WITHOUT|WORD|WORK|WRITE|WRITER|X|XML|XOR|XSD|XSTRLEN|YELLOW|YES|YYMMDD|Z|ZERO|ZONE)(?![\w-])/i,lookbehind:!0},number:/\b\d+\b/,operator:{pattern:/(\s)(?:\*\*?|<[=>]?|>=?|\?=|[-+\/=])(?=\s)/,lookbehind:!0},"string-operator":{pattern:/(\s)&&?(?=\s)/,lookbehind:!0,alias:"keyword"},"token-operator":[{pattern:/(\w)(?:->?|=>|[~|{}])(?=\w)/,lookbehind:!0,alias:"punctuation"},{pattern:/[|{}]/,alias:"punctuation"}],punctuation:/[,.:()]/}}abnf.displayName="abnf";abnf.aliases=[];function abnf(s){(function(n){var u="(?:ALPHA|BIT|CHAR|CR|CRLF|CTL|DIGIT|DQUOTE|HEXDIG|HTAB|LF|LWSP|OCTET|SP|VCHAR|WSP)";n.languages.abnf={comment:/;.*/,string:{pattern:/(?:%[is])?"[^"\n\r]*"/,greedy:!0,inside:{punctuation:/^%[is]/}},range:{pattern:/%(?:b[01]+-[01]+|d\d+-\d+|x[A-F\d]+-[A-F\d]+)/i,alias:"number"},terminal:{pattern:/%(?:b[01]+(?:\.[01]+)*|d\d+(?:\.\d+)*|x[A-F\d]+(?:\.[A-F\d]+)*)/i,alias:"number"},repetition:{pattern:/(^|[^\w-])(?:\d*\*\d*|\d+)/,lookbehind:!0,alias:"operator"},definition:{pattern:/(^[ \t]*)(?:[a-z][\w-]*|<[^<>\r\n]*>)(?=\s*=)/m,lookbehind:!0,alias:"keyword",inside:{punctuation:/<|>/}},"core-rule":{pattern:RegExp("(?:(^|[^<\\w-])"+u+"|<"+u+">)(?![\\w-])","i"),lookbehind:!0,alias:["rule","constant"],inside:{punctuation:/<|>/}},rule:{pattern:/(^|[^<\w-])[a-z][\w-]*|<[^<>\r\n]*>/i,lookbehind:!0,inside:{punctuation:/<|>/}},operator:/=\/?|\//,punctuation:/[()\[\]]/}})(s)}actionscript.displayName="actionscript";actionscript.aliases=[];function actionscript(s){s.register(javascript),s.languages.actionscript=s.languages.extend("javascript",{keyword:/\b(?:as|break|case|catch|class|const|default|delete|do|dynamic|each|else|extends|final|finally|for|function|get|if|implements|import|in|include|instanceof|interface|internal|is|namespace|native|new|null|override|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|use|var|void|while|with)\b/,operator:/\+\+|--|(?:[+\-*\/%^]|&&?|\|\|?|<<?|>>?>?|[!=]=?)=?|[~?@]/}),s.languages.actionscript["class-name"].alias="function",delete s.languages.actionscript.parameter,delete s.languages.actionscript["literal-property"],s.languages.markup&&s.languages.insertBefore("actionscript","string",{xml:{pattern:/(^|[^.])<\/?\w+(?:\s+[^\s>\/=]+=("|')(?:\\[\s\S]|(?!\2)[^\\])*\2)*\s*\/?>/,lookbehind:!0,inside:s.languages.markup}})}ada.displayName="ada";ada.aliases=[];function ada(s){s.languages.ada={comment:/--.*/,string:/"(?:""|[^"\r\f\n])*"/,number:[{pattern:/\b\d(?:_?\d)*#[\dA-F](?:_?[\dA-F])*(?:\.[\dA-F](?:_?[\dA-F])*)?#(?:E[+-]?\d(?:_?\d)*)?/i},{pattern:/\b\d(?:_?\d)*(?:\.\d(?:_?\d)*)?(?:E[+-]?\d(?:_?\d)*)?\b/i}],attribute:{pattern:/\b'\w+/,alias:"attr-name"},keyword:/\b(?:abort|abs|abstract|accept|access|aliased|all|and|array|at|begin|body|case|constant|declare|delay|delta|digits|do|else|elsif|end|entry|exception|exit|for|function|generic|goto|if|in|interface|is|limited|loop|mod|new|not|null|of|or|others|out|overriding|package|pragma|private|procedure|protected|raise|range|record|rem|renames|requeue|return|reverse|select|separate|some|subtype|synchronized|tagged|task|terminate|then|type|until|use|when|while|with|xor)\b/i,boolean:/\b(?:false|true)\b/i,operator:/<[=>]?|>=?|=>?|:=|\/=?|\*\*?|[&+-]/,punctuation:/\.\.?|[,;():]/,char:/'.'/,variable:/\b[a-z](?:\w)*\b/i}}agda.displayName="agda";agda.aliases=[];function agda(s){(function(n){n.languages.agda={comment:/\{-[\s\S]*?(?:-\}|$)|--.*/,string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^\\\r\n"])*"/,greedy:!0},punctuation:/[(){}.;@]/,"class-name":{pattern:/((?:data|record) +)\S+/,lookbehind:!0},function:{pattern:/(^[ \t]*)(?!\s)[^:\r\n]+(?=:)/m,lookbehind:!0},operator:{pattern:/(^\s*|\s)(?:[=|:\\?_]|->)(?=\s)/,lookbehind:!0},keyword:/\b(?:Set|abstract|constructor|data|eta-equality|field|forall|hiding|import|in|inductive|infix|infixl|infixr|instance|let|macro|module|mutual|no-eta-equality|open|overlap|pattern|postulate|primitive|private|public|quote|quoteContext|quoteGoal|quoteTerm|record|renaming|rewrite|syntax|tactic|unquote|unquoteDecl|unquoteDef|using|variable|where|with)\b/}})(s)}al.displayName="al";al.aliases=[];function al(s){s.languages.al={comment:/\/\/.*|\/\*[\s\S]*?\*\//,string:{pattern:/'(?:''|[^'\r\n])*'(?!')|"(?:""|[^"\r\n])*"(?!")/,greedy:!0},function:{pattern:/(\b(?:event|procedure|trigger)\s+|(?:^|[^.])\.\s*)[a-z_]\w*(?=\s*\()/i,lookbehind:!0},keyword:[/\b(?:array|asserterror|begin|break|case|do|downto|else|end|event|exit|for|foreach|function|if|implements|in|indataset|interface|internal|local|of|procedure|program|protected|repeat|runonclient|securityfiltering|suppressdispose|temporary|then|to|trigger|until|var|while|with|withevents)\b/i,/\b(?:action|actions|addafter|addbefore|addfirst|addlast|area|assembly|chartpart|codeunit|column|controladdin|cuegroup|customizes|dataitem|dataset|dotnet|elements|enum|enumextension|extends|field|fieldattribute|fieldelement|fieldgroup|fieldgroups|fields|filter|fixed|grid|group|key|keys|label|labels|layout|modify|moveafter|movebefore|movefirst|movelast|page|pagecustomization|pageextension|part|profile|query|repeater|report|requestpage|schema|separator|systempart|table|tableelement|tableextension|textattribute|textelement|type|usercontrol|value|xmlport)\b/i],number:/\b(?:0x[\da-f]+|(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?)(?:F|LL?|U(?:LL?)?)?\b/i,boolean:/\b(?:false|true)\b/i,variable:/\b(?:Curr(?:FieldNo|Page|Report)|x?Rec|RequestOptionsPage)\b/,"class-name":/\b(?:automation|biginteger|bigtext|blob|boolean|byte|char|clienttype|code|completiontriggererrorlevel|connectiontype|database|dataclassification|datascope|date|dateformula|datetime|decimal|defaultlayout|dialog|dictionary|dotnetassembly|dotnettypedeclaration|duration|errorinfo|errortype|executioncontext|executionmode|fieldclass|fieldref|fieldtype|file|filterpagebuilder|guid|httpclient|httpcontent|httpheaders|httprequestmessage|httpresponsemessage|instream|integer|joker|jsonarray|jsonobject|jsontoken|jsonvalue|keyref|list|moduledependencyinfo|moduleinfo|none|notification|notificationscope|objecttype|option|outstream|pageresult|record|recordid|recordref|reportformat|securityfilter|sessionsettings|tableconnectiontype|tablefilter|testaction|testfield|testfilterfield|testpage|testpermissions|testrequestpage|text|textbuilder|textconst|textencoding|time|transactionmodel|transactiontype|variant|verbosity|version|view|views|webserviceactioncontext|webserviceactionresultcode|xmlattribute|xmlattributecollection|xmlcdata|xmlcomment|xmldeclaration|xmldocument|xmldocumenttype|xmlelement|xmlnamespacemanager|xmlnametable|xmlnode|xmlnodelist|xmlprocessinginstruction|xmlreadoptions|xmltext|xmlwriteoptions)\b/i,operator:/\.\.|:[=:]|[-+*/]=?|<>|[<>]=?|=|\b(?:and|div|mod|not|or|xor)\b/i,punctuation:/[()\[\]{}:.;,]/}}antlr4.displayName="antlr4";antlr4.aliases=["g4"];function antlr4(s){s.languages.antlr4={comment:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,string:{pattern:/'(?:\\.|[^\\'\r\n])*'/,greedy:!0},"character-class":{pattern:/\[(?:\\.|[^\\\]\r\n])*\]/,greedy:!0,alias:"regex",inside:{range:{pattern:/([^[]|(?:^|[^\\])(?:\\\\)*\\\[)-(?!\])/,lookbehind:!0,alias:"punctuation"},escape:/\\(?:u(?:[a-fA-F\d]{4}|\{[a-fA-F\d]+\})|[pP]\{[=\w-]+\}|[^\r\nupP])/,punctuation:/[\[\]]/}},action:{pattern:/\{(?:[^{}]|\{(?:[^{}]|\{(?:[^{}]|\{[^{}]*\})*\})*\})*\}/,greedy:!0,inside:{content:{pattern:/(\{)[\s\S]+(?=\})/,lookbehind:!0},punctuation:/[{}]/}},command:{pattern:/(->\s*(?!\s))(?:\s*(?:,\s*)?\b[a-z]\w*(?:\s*\([^()\r\n]*\))?)+(?=\s*;)/i,lookbehind:!0,inside:{function:/\b\w+(?=\s*(?:[,(]|$))/,punctuation:/[,()]/}},annotation:{pattern:/@\w+(?:::\w+)*/,alias:"keyword"},label:{pattern:/#[ \t]*\w+/,alias:"punctuation"},keyword:/\b(?:catch|channels|finally|fragment|grammar|import|lexer|locals|mode|options|parser|returns|throws|tokens)\b/,definition:[{pattern:/\b[a-z]\w*(?=\s*:)/,alias:["rule","class-name"]},{pattern:/\b[A-Z]\w*(?=\s*:)/,alias:["token","constant"]}],constant:/\b[A-Z][A-Z_]*\b/,operator:/\.\.|->|[|~]|[*+?]\??/,punctuation:/[;:()=]/},s.languages.g4=s.languages.antlr4}apacheconf.displayName="apacheconf";apacheconf.aliases=[];function apacheconf(s){s.languages.apacheconf={comment:/#.*/,"directive-inline":{pattern:/(^[\t ]*)\b(?:AcceptFilter|AcceptPathInfo|AccessFileName|Action|Add(?:Alt|AltByEncoding|AltByType|Charset|DefaultCharset|Description|Encoding|Handler|Icon|IconByEncoding|IconByType|InputFilter|Language|ModuleInfo|OutputFilter|OutputFilterByType|Type)|Alias|AliasMatch|Allow(?:CONNECT|EncodedSlashes|Methods|Override|OverrideList)?|Anonymous(?:_LogEmail|_MustGiveEmail|_NoUserID|_VerifyEmail)?|AsyncRequestWorkerFactor|Auth(?:BasicAuthoritative|BasicFake|BasicProvider|BasicUseDigestAlgorithm|DBDUserPWQuery|DBDUserRealmQuery|DBMGroupFile|DBMType|DBMUserFile|Digest(?:Algorithm|Domain|NonceLifetime|Provider|Qop|ShmemSize)|Form(?:Authoritative|Body|DisableNoStore|FakeBasicAuth|Location|LoginRequiredLocation|LoginSuccessLocation|LogoutLocation|Method|Mimetype|Password|Provider|SitePassphrase|Size|Username)|GroupFile|LDAP(?:AuthorizePrefix|BindAuthoritative|BindDN|BindPassword|CharsetConfig|CompareAsUser|CompareDNOnServer|DereferenceAliases|GroupAttribute|GroupAttributeIsDN|InitialBindAsUser|InitialBindPattern|MaxSubGroupDepth|RemoteUserAttribute|RemoteUserIsDN|SearchAsUser|SubGroupAttribute|SubGroupClass|Url)|Merging|Name|nCache(?:Context|Enable|ProvideFor|SOCache|Timeout)|nzFcgiCheckAuthnProvider|nzFcgiDefineProvider|Type|UserFile|zDBDLoginToReferer|zDBDQuery|zDBDRedirectQuery|zDBMType|zSendForbiddenOnFailure)|BalancerGrowth|BalancerInherit|BalancerMember|BalancerPersist|BrowserMatch|BrowserMatchNoCase|BufferedLogs|BufferSize|Cache(?:DefaultExpire|DetailHeader|DirLength|DirLevels|Disable|Enable|File|Header|IgnoreCacheControl|IgnoreHeaders|IgnoreNoLastMod|IgnoreQueryString|IgnoreURLSessionIdentifiers|KeyBaseURL|LastModifiedFactor|Lock|LockMaxAge|LockPath|MaxExpire|MaxFileSize|MinExpire|MinFileSize|NegotiatedDocs|QuickHandler|ReadSize|ReadTime|Root|Socache(?:MaxSize|MaxTime|MinTime|ReadSize|ReadTime)?|StaleOnError|StoreExpired|StoreNoStore|StorePrivate)|CGIDScriptTimeout|CGIMapExtension|CharsetDefault|CharsetOptions|CharsetSourceEnc|CheckCaseOnly|CheckSpelling|ChrootDir|ContentDigest|CookieDomain|CookieExpires|CookieName|CookieStyle|CookieTracking|CoreDumpDirectory|CustomLog|Dav|DavDepthInfinity|DavGenericLockDB|DavLockDB|DavMinTimeout|DBDExptime|DBDInitSQL|DBDKeep|DBDMax|DBDMin|DBDParams|DBDPersist|DBDPrepareSQL|DBDriver|DefaultIcon|DefaultLanguage|DefaultRuntimeDir|DefaultType|Define|Deflate(?:BufferSize|CompressionLevel|FilterNote|InflateLimitRequestBody|InflateRatio(?:Burst|Limit)|MemLevel|WindowSize)|Deny|DirectoryCheckHandler|DirectoryIndex|DirectoryIndexRedirect|DirectorySlash|DocumentRoot|DTracePrivileges|DumpIOInput|DumpIOOutput|EnableExceptionHook|EnableMMAP|EnableSendfile|Error|ErrorDocument|ErrorLog|ErrorLogFormat|Example|ExpiresActive|ExpiresByType|ExpiresDefault|ExtendedStatus|ExtFilterDefine|ExtFilterOptions|FallbackResource|FileETag|FilterChain|FilterDeclare|FilterProtocol|FilterProvider|FilterTrace|ForceLanguagePriority|ForceType|ForensicLog|GprofDir|GracefulShutdownTimeout|Group|Header|HeaderName|Heartbeat(?:Address|Listen|MaxServers|Storage)|HostnameLookups|IdentityCheck|IdentityCheckTimeout|ImapBase|ImapDefault|ImapMenu|Include|IncludeOptional|Index(?:HeadInsert|Ignore|IgnoreReset|Options|OrderDefault|StyleSheet)|InputSed|ISAPI(?:AppendLogToErrors|AppendLogToQuery|CacheFile|FakeAsync|LogNotSupported|ReadAheadBuffer)|KeepAlive|KeepAliveTimeout|KeptBodySize|LanguagePriority|LDAP(?:CacheEntries|CacheTTL|ConnectionPoolTTL|ConnectionTimeout|LibraryDebug|OpCacheEntries|OpCacheTTL|ReferralHopLimit|Referrals|Retries|RetryDelay|SharedCacheFile|SharedCacheSize|Timeout|TrustedClientCert|TrustedGlobalCert|TrustedMode|VerifyServerCert)|Limit(?:InternalRecursion|Request(?:Body|Fields|FieldSize|Line)|XMLRequestBody)|Listen|ListenBackLog|LoadFile|LoadModule|LogFormat|LogLevel|LogMessage|LuaAuthzProvider|LuaCodeCache|Lua(?:Hook(?:AccessChecker|AuthChecker|CheckUserID|Fixups|InsertFilter|Log|MapToStorage|TranslateName|TypeChecker)|Inherit|InputFilter|MapHandler|OutputFilter|PackageCPath|PackagePath|QuickHandler|Root|Scope)|Max(?:ConnectionsPerChild|KeepAliveRequests|MemFree|RangeOverlaps|RangeReversals|Ranges|RequestWorkers|SpareServers|SpareThreads|Threads)|MergeTrailers|MetaDir|MetaFiles|MetaSuffix|MimeMagicFile|MinSpareServers|MinSpareThreads|MMapFile|ModemStandard|ModMimeUsePathInfo|MultiviewsMatch|Mutex|NameVirtualHost|NoProxy|NWSSLTrustedCerts|NWSSLUpgradeable|Options|Order|OutputSed|PassEnv|PidFile|PrivilegesMode|Protocol|ProtocolEcho|Proxy(?:AddHeaders|BadHeader|Block|Domain|ErrorOverride|ExpressDBMFile|ExpressDBMType|ExpressEnable|FtpDirCharset|FtpEscapeWildcards|FtpListOnWildcard|HTML(?:BufSize|CharsetOut|DocType|Enable|Events|Extended|Fixups|Interp|Links|Meta|StripComments|URLMap)|IOBufferSize|MaxForwards|Pass(?:Inherit|InterpolateEnv|Match|Reverse|ReverseCookieDomain|ReverseCookiePath)?|PreserveHost|ReceiveBufferSize|Remote|RemoteMatch|Requests|SCGIInternalRedirect|SCGISendfile|Set|SourceAddress|Status|Timeout|Via)|ReadmeName|ReceiveBufferSize|Redirect|RedirectMatch|RedirectPermanent|RedirectTemp|ReflectorHeader|RemoteIP(?:Header|InternalProxy|InternalProxyList|ProxiesHeader|TrustedProxy|TrustedProxyList)|RemoveCharset|RemoveEncoding|RemoveHandler|RemoveInputFilter|RemoveLanguage|RemoveOutputFilter|RemoveType|RequestHeader|RequestReadTimeout|Require|Rewrite(?:Base|Cond|Engine|Map|Options|Rule)|RLimitCPU|RLimitMEM|RLimitNPROC|Satisfy|ScoreBoardFile|Script(?:Alias|AliasMatch|InterpreterSource|Log|LogBuffer|LogLength|Sock)?|SecureListen|SeeRequestTail|SendBufferSize|Server(?:Admin|Alias|Limit|Name|Path|Root|Signature|Tokens)|Session(?:Cookie(?:Name|Name2|Remove)|Crypto(?:Cipher|Driver|Passphrase|PassphraseFile)|DBD(?:CookieName|CookieName2|CookieRemove|DeleteLabel|InsertLabel|PerUser|SelectLabel|UpdateLabel)|Env|Exclude|Header|Include|MaxAge)?|SetEnv|SetEnvIf|SetEnvIfExpr|SetEnvIfNoCase|SetHandler|SetInputFilter|SetOutputFilter|SSIEndTag|SSIErrorMsg|SSIETag|SSILastModified|SSILegacyExprParser|SSIStartTag|SSITimeFormat|SSIUndefinedEcho|SSL(?:CACertificateFile|CACertificatePath|CADNRequestFile|CADNRequestPath|CARevocationCheck|CARevocationFile|CARevocationPath|CertificateChainFile|CertificateFile|CertificateKeyFile|CipherSuite|Compression|CryptoDevice|Engine|FIPS|HonorCipherOrder|InsecureRenegotiation|OCSP(?:DefaultResponder|Enable|OverrideResponder|ResponderTimeout|ResponseMaxAge|ResponseTimeSkew|UseRequestNonce)|OpenSSLConfCmd|Options|PassPhraseDialog|Protocol|Proxy(?:CACertificateFile|CACertificatePath|CARevocation(?:Check|File|Path)|CheckPeer(?:CN|Expire|Name)|CipherSuite|Engine|MachineCertificate(?:ChainFile|File|Path)|Protocol|Verify|VerifyDepth)|RandomSeed|RenegBufferSize|Require|RequireSSL|Session(?:Cache|CacheTimeout|TicketKeyFile|Tickets)|SRPUnknownUserSeed|SRPVerifierFile|Stapling(?:Cache|ErrorCacheTimeout|FakeTryLater|ForceURL|ResponderTimeout|ResponseMaxAge|ResponseTimeSkew|ReturnResponderErrors|StandardCacheTimeout)|StrictSNIVHostCheck|UserName|UseStapling|VerifyClient|VerifyDepth)|StartServers|StartThreads|Substitute|Suexec|SuexecUserGroup|ThreadLimit|ThreadsPerChild|ThreadStackSize|TimeOut|TraceEnable|TransferLog|TypesConfig|UnDefine|UndefMacro|UnsetEnv|Use|UseCanonicalName|UseCanonicalPhysicalPort|User|UserDir|VHostCGIMode|VHostCGIPrivs|VHostGroup|VHostPrivs|VHostSecure|VHostUser|Virtual(?:DocumentRoot|ScriptAlias)(?:IP)?|WatchdogInterval|XBitHack|xml2EncAlias|xml2EncDefault|xml2StartParse)\b/im,lookbehind:!0,alias:"property"},"directive-block":{pattern:/<\/?\b(?:Auth[nz]ProviderAlias|Directory|DirectoryMatch|Else|ElseIf|Files|FilesMatch|If|IfDefine|IfModule|IfVersion|Limit|LimitExcept|Location|LocationMatch|Macro|Proxy|Require(?:All|Any|None)|VirtualHost)\b.*>/i,inside:{"directive-block":{pattern:/^<\/?\w+/,inside:{punctuation:/^<\/?/},alias:"tag"},"directive-block-parameter":{pattern:/.*[^>]/,inside:{punctuation:/:/,string:{pattern:/("|').*\1/,inside:{variable:/[$%]\{?(?:\w\.?[-+:]?)+\}?/}}},alias:"attr-value"},punctuation:/>/},alias:"tag"},"directive-flags":{pattern:/\[(?:[\w=],?)+\]/,alias:"keyword"},string:{pattern:/("|').*\1/,inside:{variable:/[$%]\{?(?:\w\.?[-+:]?)+\}?/}},variable:/[$%]\{?(?:\w\.?[-+:]?)+\}?/,regex:/\^?.*\$|\^.*\$?/}}sql.displayName="sql";sql.aliases=[];function sql(s){s.languages.sql={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},variable:[{pattern:/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\]|\2\2)*\2/,greedy:!0,lookbehind:!0},identifier:{pattern:/(^|[^@\\])`(?:\\[\s\S]|[^`\\]|``)*`/,greedy:!0,lookbehind:!0,inside:{punctuation:/^`|`$/}},function:/\b(?:AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:COL|_INSERT)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURN(?:ING|S)?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR)\b/i,boolean:/\b(?:FALSE|NULL|TRUE)\b/i,number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[-+*\/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\b(?:AND|BETWEEN|DIV|ILIKE|IN|IS|LIKE|NOT|OR|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,punctuation:/[;[\]()`,.]/}}apex.displayName="apex";apex.aliases=[];function apex(s){s.register(clike),s.register(sql),(function(n){var u=/\b(?:(?:after|before)(?=\s+[a-z])|abstract|activate|and|any|array|as|asc|autonomous|begin|bigdecimal|blob|boolean|break|bulk|by|byte|case|cast|catch|char|class|collect|commit|const|continue|currency|date|datetime|decimal|default|delete|desc|do|double|else|end|enum|exception|exit|export|extends|final|finally|float|for|from|get(?=\s*[{};])|global|goto|group|having|hint|if|implements|import|in|inner|insert|instanceof|int|integer|interface|into|join|like|limit|list|long|loop|map|merge|new|not|null|nulls|number|object|of|on|or|outer|override|package|parallel|pragma|private|protected|public|retrieve|return|rollback|select|set|short|sObject|sort|static|string|super|switch|synchronized|system|testmethod|then|this|throw|time|transaction|transient|trigger|try|undelete|update|upsert|using|virtual|void|webservice|when|where|while|(?:inherited|with|without)\s+sharing)\b/i,f=/\b(?:(?=[a-z_]\w*\s*[<\[])|(?!<keyword>))[A-Z_]\w*(?:\s*\.\s*[A-Z_]\w*)*\b(?:\s*(?:\[\s*\]|<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>))*/.source.replace(/<keyword>/g,function(){return u.source});function y(A){return RegExp(A.replace(/<CLASS-NAME>/g,function(){return f}),"i")}var S={keyword:u,punctuation:/[()\[\]{};,:.<>]/};n.languages.apex={comment:n.languages.clike.comment,string:n.languages.clike.string,sql:{pattern:/((?:[=,({:]|\breturn)\s*)\[[^\[\]]*\]/i,lookbehind:!0,greedy:!0,alias:"language-sql",inside:n.languages.sql},annotation:{pattern:/@\w+\b/,alias:"punctuation"},"class-name":[{pattern:y(/(\b(?:class|enum|extends|implements|instanceof|interface|new|trigger\s+\w+\s+on)\s+)<CLASS-NAME>/.source),lookbehind:!0,inside:S},{pattern:y(/(\(\s*)<CLASS-NAME>(?=\s*\)\s*[\w(])/.source),lookbehind:!0,inside:S},{pattern:y(/<CLASS-NAME>(?=\s*\w+\s*[;=,(){:])/.source),inside:S}],trigger:{pattern:/(\btrigger\s+)\w+\b/i,lookbehind:!0,alias:"class-name"},keyword:u,function:/\b[a-z_]\w*(?=\s*\()/i,boolean:/\b(?:false|true)\b/i,number:/(?:\B\.\d+|\b\d+(?:\.\d+|L)?)\b/i,operator:/[!=](?:==?)?|\?\.?|&&|\|\||--|\+\+|[-+*/^&|]=?|:|<<?=?|>{1,3}=?/,punctuation:/[()\[\]{};,.]/}})(s)}apl.displayName="apl";apl.aliases=[];function apl(s){s.languages.apl={comment:/(?:|#[! ]).*$/m,string:{pattern:/'(?:[^'\r\n]|'')*'/,greedy:!0},number:/?(?:\d*\.?\b\d+(?:e[+]?\d+)?||)(?:j?(?:(?:\d+(?:\.\d+)?|\.\d+)(?:e[+]?\d+)?||))?/i,statement:/:[A-Z][a-z][A-Za-z]*\b/,"system-function":{pattern:/[A-Z]+/i,alias:"function"},constant:/[#]/,function:/[-+|?*!<=>~,]/,"monadic-operator":{pattern:/[\\\/&]/,alias:"operator"},"dyadic-operator":{pattern:/[.@]/,alias:"operator"},assignment:{pattern://,alias:"keyword"},punctuation:/[\[;\]()]/,dfn:{pattern:/[{}:]/,alias:"builtin"}}}applescript.displayName="applescript";applescript.aliases=[];function applescript(s){s.languages.applescript={comment:[/\(\*(?:\(\*(?:[^*]|\*(?!\)))*\*\)|(?!\(\*)[\s\S])*?\*\)/,/--.+/,/#.+/],string:/"(?:\\.|[^"\\\r\n])*"/,number:/(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e-?\d+)?\b/i,operator:[/[&=*+\-\/^]|[<>]=?/,/\b(?:(?:begin|end|start)s? with|(?:contains?|(?:does not|doesn't) contain)|(?:is|isn't|is not) (?:contained by|in)|(?:(?:is|isn't|is not) )?(?:greater|less) than(?: or equal)?(?: to)?|(?:comes|(?:does not|doesn't) come) (?:after|before)|(?:is|isn't|is not) equal(?: to)?|(?:(?:does not|doesn't) equal|equal to|equals|is not|isn't)|(?:a )?(?:ref(?: to)?|reference to)|(?:and|as|div|mod|not|or))\b/],keyword:/\b(?:about|above|after|against|apart from|around|aside from|at|back|before|beginning|behind|below|beneath|beside|between|but|by|considering|continue|copy|does|eighth|else|end|equal|error|every|exit|false|fifth|first|for|fourth|from|front|get|given|global|if|ignoring|in|instead of|into|is|it|its|last|local|me|middle|my|ninth|of|on|onto|out of|over|prop|property|put|repeat|return|returning|second|set|seventh|since|sixth|some|tell|tenth|that|the|then|third|through|thru|timeout|times|to|transaction|true|try|until|where|while|whose|with|without)\b/,"class-name":/\b(?:POSIX file|RGB color|alias|application|boolean|centimeters|centimetres|class|constant|cubic centimeters|cubic centimetres|cubic feet|cubic inches|cubic meters|cubic metres|cubic yards|date|degrees Celsius|degrees Fahrenheit|degrees Kelvin|feet|file|gallons|grams|inches|integer|kilograms|kilometers|kilometres|list|liters|litres|meters|metres|miles|number|ounces|pounds|quarts|real|record|reference|script|square feet|square kilometers|square kilometres|square meters|square metres|square miles|square yards|text|yards)\b/,punctuation:/[{}():,]/}}aql.displayName="aql";aql.aliases=[];function aql(s){s.languages.aql={comment:/\/\/.*|\/\*[\s\S]*?\*\//,property:{pattern:/([{,]\s*)(?:(?!\d)\w+|(["'`])(?:(?!\2)[^\\\r\n]|\\.)*\2)(?=\s*:)/,lookbehind:!0,greedy:!0},string:{pattern:/(["'])(?:(?!\1)[^\\\r\n]|\\.)*\1/,greedy:!0},identifier:{pattern:/([`])(?:(?!\1)[^\\\r\n]|\\.)*\1/,greedy:!0},variable:/@@?\w+/,keyword:[{pattern:/(\bWITH\s+)COUNT(?=\s+INTO\b)/i,lookbehind:!0},/\b(?:AGGREGATE|ALL|AND|ANY|ASC|COLLECT|DESC|DISTINCT|FILTER|FOR|GRAPH|IN|INBOUND|INSERT|INTO|K_PATHS|K_SHORTEST_PATHS|LET|LIKE|LIMIT|NONE|NOT|NULL|OR|OUTBOUND|REMOVE|REPLACE|RETURN|SHORTEST_PATH|SORT|UPDATE|UPSERT|WINDOW|WITH)\b/i,{pattern:/(^|[^\w.[])(?:KEEP|PRUNE|SEARCH|TO)\b/i,lookbehind:!0},{pattern:/(^|[^\w.[])(?:CURRENT|NEW|OLD)\b/,lookbehind:!0},{pattern:/\bOPTIONS(?=\s*\{)/i}],function:/\b(?!\d)\w+(?=\s*\()/,boolean:/\b(?:false|true)\b/i,range:{pattern:/\.\./,alias:"operator"},number:[/\b0b[01]+/i,/\b0x[0-9a-f]+/i,/(?:\B\.\d+|\b(?:0|[1-9]\d*)(?:\.\d+)?)(?:e[+-]?\d+)?/i],operator:/\*{2,}|[=!]~|[!=<>]=?|&&|\|\||[-+*/%]/,punctuation:/::|[?.:,;()[\]{}]/}}c$1.displayName="c";c$1.aliases=[];function c$1(s){s.register(clike),s.languages.c=s.languages.extend("clike",{comment:{pattern:/\/\/(?:[^\r\n\\]|\\(?:\r\n?|\n|(?![\r\n])))*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},"class-name":{pattern:/(\b(?:enum|struct)\s+(?:__attribute__\s*\(\([\s\S]*?\)\)\s*)?)\w+|\b[a-z]\w*_t\b/,lookbehind:!0},keyword:/\b(?:_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|__attribute__|asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|inline|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|typeof|union|unsigned|void|volatile|while)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*/%&|^!=<>]=?/}),s.languages.insertBefore("c","string",{char:{pattern:/'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n]){0,32}'/,greedy:!0}}),s.languages.insertBefore("c","string",{macro:{pattern:/(^[\t ]*)#\s*[a-z](?:[^\r\n\\/]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,greedy:!0,alias:"property",inside:{string:[{pattern:/^(#\s*include\s*)<[^>]+>/,lookbehind:!0},s.languages.c.string],char:s.languages.c.char,comment:s.languages.c.comment,"macro-name":[{pattern:/(^#\s*define\s+)\w+\b(?!\()/i,lookbehind:!0},{pattern:/(^#\s*define\s+)\w+\b(?=\()/i,lookbehind:!0,alias:"function"}],directive:{pattern:/^(#\s*)[a-z]+/,lookbehind:!0,alias:"keyword"},"directive-hash":/^#/,punctuation:/##|\\(?=[\r\n])/,expression:{pattern:/\S[\s\S]*/,inside:s.languages.c}}}}),s.languages.insertBefore("c","function",{constant:/\b(?:EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|__DATE__|__FILE__|__LINE__|__TIMESTAMP__|__TIME__|__func__|stderr|stdin|stdout)\b/}),delete s.languages.c.boolean}cpp.displayName="cpp";cpp.aliases=[];function cpp(s){s.register(c$1),(function(n){var u=/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|char8_t|class|co_await|co_return|co_yield|compl|concept|const|const_cast|consteval|constexpr|constinit|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|final|float|for|friend|goto|if|import|inline|int|int16_t|int32_t|int64_t|int8_t|long|module|mutable|namespace|new|noexcept|nullptr|operator|override|private|protected|public|register|reinterpret_cast|requires|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|uint16_t|uint32_t|uint64_t|uint8_t|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,f=/\b(?!<keyword>)\w+(?:\s*\.\s*\w+)*\b/.source.replace(/<keyword>/g,function(){return u.source});n.languages.cpp=n.languages.extend("c",{"class-name":[{pattern:RegExp(/(\b(?:class|concept|enum|struct|typename)\s+)(?!<keyword>)\w+/.source.replace(/<keyword>/g,function(){return u.source})),lookbehind:!0},/\b[A-Z]\w*(?=\s*::\s*\w+\s*\()/,/\b[A-Z_]\w*(?=\s*::\s*~\w+\s*\()/i,/\b\w+(?=\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>\s*::\s*\w+\s*\()/],keyword:u,number:{pattern:/(?:\b0b[01']+|\b0x(?:[\da-f']+(?:\.[\da-f']*)?|\.[\da-f']+)(?:p[+-]?[\d']+)?|(?:\b[\d']+(?:\.[\d']*)?|\B\.[\d']+)(?:e[+-]?[\d']+)?)[ful]{0,4}/i,greedy:!0},operator:/>>=?|<<=?|->|--|\+\+|&&|\|\||[?:~]|<=>|[-+*/%&|^!=<>]=?|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/,boolean:/\b(?:false|true)\b/}),n.languages.insertBefore("cpp","string",{module:{pattern:RegExp(/(\b(?:import|module)\s+)/.source+"(?:"+/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|<[^<>\r\n]*>/.source+"|"+/<mod-name>(?:\s*:\s*<mod-name>)?|:\s*<mod-name>/.source.replace(/<mod-name>/g,function(){return f})+")"),lookbehind:!0,greedy:!0,inside:{string:/^[<"][\s\S]+/,operator:/:/,punctuation:/\./}},"raw-string":{pattern:/R"([^()\\ ]{0,16})\([\s\S]*?\)\1"/,alias:"string",greedy:!0}}),n.languages.insertBefore("cpp","keyword",{"generic-function":{pattern:/\b(?!operator\b)[a-z_]\w*\s*<(?:[^<>]|<[^<>]*>)*>(?=\s*\()/i,inside:{function:/^\w+/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:n.languages.cpp}}}}),n.languages.insertBefore("cpp","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}}),n.languages.insertBefore("cpp","class-name",{"base-clause":{pattern:/(\b(?:class|struct)\s+\w+\s*:\s*)[^;{}"'\s]+(?:\s+[^;{}"'\s]+)*(?=\s*[;{])/,lookbehind:!0,greedy:!0,inside:n.languages.extend("cpp",{})}}),n.languages.insertBefore("inside","double-colon",{"class-name":/\b[a-z_]\w*\b(?!\s*::)/i},n.languages.cpp["base-clause"])})(s)}arduino.displayName="arduino";arduino.aliases=["ino"];function arduino(s){s.register(cpp),s.languages.arduino=s.languages.extend("cpp",{keyword:/\b(?:String|array|bool|boolean|break|byte|case|catch|continue|default|do|double|else|finally|for|function|goto|if|in|instanceof|int|integer|long|loop|new|null|return|setup|string|switch|throw|try|void|while|word)\b/,constant:/\b(?:ANALOG_MESSAGE|DEFAULT|DIGITAL_MESSAGE|EXTERNAL|FIRMATA_STRING|HIGH|INPUT|INPUT_PULLUP|INTERNAL|INTERNAL1V1|INTERNAL2V56|LED_BUILTIN|LOW|OUTPUT|REPORT_ANALOG|REPORT_DIGITAL|SET_PIN_MODE|SYSEX_START|SYSTEM_RESET)\b/,builtin:/\b(?:Audio|BSSID|Bridge|Client|Console|EEPROM|Esplora|EsploraTFT|Ethernet|EthernetClient|EthernetServer|EthernetUDP|File|FileIO|FileSystem|Firmata|GPRS|GSM|GSMBand|GSMClient|GSMModem|GSMPIN|GSMScanner|GSMServer|GSMVoiceCall|GSM_SMS|HttpClient|IPAddress|IRread|Keyboard|KeyboardController|LiquidCrystal|LiquidCrystal_I2C|Mailbox|Mouse|MouseController|PImage|Process|RSSI|RobotControl|RobotMotor|SD|SPI|SSID|Scheduler|Serial|Server|Servo|SoftwareSerial|Stepper|Stream|TFT|Task|USBHost|WiFi|WiFiClient|WiFiServer|WiFiUDP|Wire|YunClient|YunServer|abs|addParameter|analogRead|analogReadResolution|analogReference|analogWrite|analogWriteResolution|answerCall|attach|attachGPRS|attachInterrupt|attached|autoscroll|available|background|beep|begin|beginPacket|beginSD|beginSMS|beginSpeaker|beginTFT|beginTransmission|beginWrite|bit|bitClear|bitRead|bitSet|bitWrite|blink|blinkVersion|buffer|changePIN|checkPIN|checkPUK|checkReg|circle|cityNameRead|cityNameWrite|clear|clearScreen|click|close|compassRead|config|connect|connected|constrain|cos|countryNameRead|countryNameWrite|createChar|cursor|debugPrint|delay|delayMicroseconds|detach|detachInterrupt|digitalRead|digitalWrite|disconnect|display|displayLogos|drawBMP|drawCompass|encryptionType|end|endPacket|endSMS|endTransmission|endWrite|exists|exitValue|fill|find|findUntil|flush|gatewayIP|get|getAsynchronously|getBand|getButton|getCurrentCarrier|getIMEI|getKey|getModifiers|getOemKey|getPINUsed|getResult|getSignalStrength|getSocket|getVoiceCallStatus|getXChange|getYChange|hangCall|height|highByte|home|image|interrupts|isActionDone|isDirectory|isListening|isPIN|isPressed|isValid|keyPressed|keyReleased|keyboardRead|knobRead|leftToRight|line|lineFollowConfig|listen|listenOnLocalhost|loadImage|localIP|lowByte|macAddress|maintain|map|max|messageAvailable|micros|millis|min|mkdir|motorsStop|motorsWrite|mouseDragged|mouseMoved|mousePressed|mouseReleased|move|noAutoscroll|noBlink|noBuffer|noCursor|noDisplay|noFill|noInterrupts|noListenOnLocalhost|noStroke|noTone|onReceive|onRequest|open|openNextFile|overflow|parseCommand|parseFloat|parseInt|parsePacket|pauseMode|peek|pinMode|playFile|playMelody|point|pointTo|position|pow|prepare|press|print|printFirmwareVersion|printVersion|println|process|processInput|pulseIn|put|random|randomSeed|read|readAccelerometer|readBlue|readButton|readBytes|readBytesUntil|readGreen|readJoystickButton|readJoystickSwitch|readJoystickX|readJoystickY|readLightSensor|readMessage|readMicrophone|readNetworks|readRed|readSlider|readString|readStringUntil|readTemperature|ready|rect|release|releaseAll|remoteIP|remoteNumber|remotePort|remove|requestFrom|retrieveCallingNumber|rewindDirectory|rightToLeft|rmdir|robotNameRead|robotNameWrite|run|runAsynchronously|runShellCommand|runShellCommandAsynchronously|running|scanNetworks|scrollDisplayLeft|scrollDisplayRight|seek|sendAnalog|sendDigitalPortPair|sendDigitalPorts|sendString|sendSysex|serialEvent|setBand|setBitOrder|setClockDivider|setCursor|setDNS|setDataMode|setFirmwareVersion|setMode|setPINUsed|setSpeed|setTextSize|setTimeout|shiftIn|shiftOut|shutdown|sin|size|sqrt|startLoop|step|stop|stroke|subnetMask|switchPIN|tan|tempoWrite|text|tone|transfer|tuneWrite|turn|updateIR|userNameRead|userNameWrite|voiceCall|waitContinue|width|write|writeBlue|writeGreen|writeJSON|writeMessage|writeMicroseconds|writeRGB|writeRed|yield)\b/}),s.languages.ino=s.languages.arduino}arff.displayName="arff";arff.aliases=[];function arff(s){s.languages.arff={comment:/%.*/,string:{pattern:/(["'])(?:\\.|(?!\1)[^\\\r\n])*\1/,greedy:!0},keyword:/@(?:attribute|data|end|relation)\b/i,number:/\b\d+(?:\.\d+)?\b/,punctuation:/[{},]/}}armasm.displayName="armasm";armasm.aliases=["arm-asm"];function armasm(s){s.languages.armasm={comment:{pattern:/;.*/,greedy:!0},string:{pattern:/"(?:[^"\r\n]|"")*"/,greedy:!0,inside:{variable:{pattern:/((?:^|[^$])(?:\${2})*)\$\w+/,lookbehind:!0}}},char:{pattern:/'(?:[^'\r\n]{0,4}|'')'/,greedy:!0},"version-symbol":{pattern:/\|[\w@]+\|/,greedy:!0,alias:"property"},boolean:/\b(?:FALSE|TRUE)\b/,directive:{pattern:/\b(?:ALIAS|ALIGN|AREA|ARM|ASSERT|ATTR|CN|CODE|CODE16|CODE32|COMMON|CP|DATA|DCB|DCD|DCDO|DCDU|DCFD|DCFDU|DCI|DCQ|DCQU|DCW|DCWU|DN|ELIF|ELSE|END|ENDFUNC|ENDIF|ENDP|ENTRY|EQU|EXPORT|EXPORTAS|EXTERN|FIELD|FILL|FN|FUNCTION|GBLA|GBLL|GBLS|GET|GLOBAL|IF|IMPORT|INCBIN|INCLUDE|INFO|KEEP|LCLA|LCLL|LCLS|LTORG|MACRO|MAP|MEND|MEXIT|NOFP|OPT|PRESERVE8|PROC|QN|READONLY|RELOC|REQUIRE|REQUIRE8|RLIST|ROUT|SETA|SETL|SETS|SN|SPACE|SUBT|THUMB|THUMBX|TTL|WEND|WHILE)\b/,alias:"property"},instruction:{pattern:/((?:^|(?:^|[^\\])(?:\r\n?|\n))[ \t]*(?:(?:[A-Z][A-Z0-9_]*[a-z]\w*|[a-z]\w*|\d+)[ \t]+)?)\b[A-Z.]+\b/,lookbehind:!0,alias:"keyword"},variable:/\$\w+/,number:/(?:\b[2-9]_\d+|(?:\b\d+(?:\.\d+)?|\B\.\d+)(?:e-?\d+)?|\b0(?:[fd]_|x)[0-9a-f]+|&[0-9a-f]+)\b/i,register:{pattern:/\b(?:r\d|lr)\b/,alias:"symbol"},operator:/<>|<<|>>|&&|\|\||[=!<>/]=?|[+\-*%#?&|^]|:[A-Z]+:/,punctuation:/[()[\],]/},s.languages["arm-asm"]=s.languages.armasm}bash.displayName="bash";bash.aliases=["sh","shell"];function bash(s){(function(n){var u="\\b(?:BASH|BASHOPTS|BASH_ALIASES|BASH_ARGC|BASH_ARGV|BASH_CMDS|BASH_COMPLETION_COMPAT_DIR|BASH_LINENO|BASH_REMATCH|BASH_SOURCE|BASH_VERSINFO|BASH_VERSION|COLORTERM|COLUMNS|COMP_WORDBREAKS|DBUS_SESSION_BUS_ADDRESS|DEFAULTS_PATH|DESKTOP_SESSION|DIRSTACK|DISPLAY|EUID|GDMSESSION|GDM_LANG|GNOME_KEYRING_CONTROL|GNOME_KEYRING_PID|GPG_AGENT_INFO|GROUPS|HISTCONTROL|HISTFILE|HISTFILESIZE|HISTSIZE|HOME|HOSTNAME|HOSTTYPE|IFS|INSTANCE|JOB|LANG|LANGUAGE|LC_ADDRESS|LC_ALL|LC_IDENTIFICATION|LC_MEASUREMENT|LC_MONETARY|LC_NAME|LC_NUMERIC|LC_PAPER|LC_TELEPHONE|LC_TIME|LESSCLOSE|LESSOPEN|LINES|LOGNAME|LS_COLORS|MACHTYPE|MAILCHECK|MANDATORY_PATH|NO_AT_BRIDGE|OLDPWD|OPTERR|OPTIND|ORBIT_SOCKETDIR|OSTYPE|PAPERSIZE|PATH|PIPESTATUS|PPID|PS1|PS2|PS3|PS4|PWD|RANDOM|REPLY|SECONDS|SELINUX_INIT|SESSION|SESSIONTYPE|SESSION_MANAGER|SHELL|SHELLOPTS|SHLVL|SSH_AUTH_SOCK|TERM|UID|UPSTART_EVENTS|UPSTART_INSTANCE|UPSTART_JOB|UPSTART_SESSION|USER|WINDOWID|XAUTHORITY|XDG_CONFIG_DIRS|XDG_CURRENT_DESKTOP|XDG_DATA_DIRS|XDG_GREETER_DATA_DIR|XDG_MENU_PREFIX|XDG_RUNTIME_DIR|XDG_SEAT|XDG_SEAT_PATH|XDG_SESSION_DESKTOP|XDG_SESSION_ID|XDG_SESSION_PATH|XDG_SESSION_TYPE|XDG_VTNR|XMODIFIERS)\\b",f={pattern:/(^(["']?)\w+\2)[ \t]+\S.*/,lookbehind:!0,alias:"punctuation",inside:null},y={bash:f,environment:{pattern:RegExp("\\$"+u),alias:"constant"},variable:[{pattern:/\$?\(\([\s\S]+?\)\)/,greedy:!0,inside:{variable:[{pattern:/(^\$\(\([\s\S]+)\)\)/,lookbehind:!0},/^\$\(\(/],number:/\b0x[\dA-Fa-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee]-?\d+)?/,operator:/--|\+\+|\*\*=?|<<=?|>>=?|&&|\|\||[=!+\-*/%<>^&|]=?|[?~:]/,punctuation:/\(\(?|\)\)?|,|;/}},{pattern:/\$\((?:\([^)]+\)|[^()])+\)|`[^`]+`/,greedy:!0,inside:{variable:/^\$\(|^`|\)$|`$/}},{pattern:/\$\{[^}]+\}/,greedy:!0,inside:{operator:/:[-=?+]?|[!\/]|##?|%%?|\^\^?|,,?/,punctuation:/[\[\]]/,environment:{pattern:RegExp("(\\{)"+u),lookbehind:!0,alias:"constant"}}},/\$(?:\w+|[#?*!@$])/],entity:/\\(?:[abceEfnrtv\\"]|O?[0-7]{1,3}|U[0-9a-fA-F]{8}|u[0-9a-fA-F]{4}|x[0-9a-fA-F]{1,2})/};n.languages.bash={shebang:{pattern:/^#!\s*\/.*/,alias:"important"},comment:{pattern:/(^|[^"{\\$])#.*/,lookbehind:!0},"function-name":[{pattern:/(\bfunction\s+)[\w-]+(?=(?:\s*\(?:\s*\))?\s*\{)/,lookbehind:!0,alias:"function"},{pattern:/\b[\w-]+(?=\s*\(\s*\)\s*\{)/,alias:"function"}],"for-or-select":{pattern:/(\b(?:for|select)\s+)\w+(?=\s+in\s)/,alias:"variable",lookbehind:!0},"assign-left":{pattern:/(^|[\s;|&]|[<>]\()\w+(?:\.\w+)*(?=\+?=)/,inside:{environment:{pattern:RegExp("(^|[\\s;|&]|[<>]\\()"+u),lookbehind:!0,alias:"constant"}},alias:"variable",lookbehind:!0},parameter:{pattern:/(^|\s)-{1,2}(?:\w+:[+-]?)?\w+(?:\.\w+)*(?=[=\s]|$)/,alias:"variable",lookbehind:!0},string:[{pattern:/((?:^|[^<])<<-?\s*)(\w+)\s[\s\S]*?(?:\r?\n|\r)\2/,lookbehind:!0,greedy:!0,inside:y},{pattern:/((?:^|[^<])<<-?\s*)(["'])(\w+)\2\s[\s\S]*?(?:\r?\n|\r)\3/,lookbehind:!0,greedy:!0,inside:{bash:f}},{pattern:/(^|[^\\](?:\\\\)*)"(?:\\[\s\S]|\$\([^)]+\)|\$(?!\()|`[^`]+`|[^"\\`$])*"/,lookbehind:!0,greedy:!0,inside:y},{pattern:/(^|[^$\\])'[^']*'/,lookbehind:!0,greedy:!0},{pattern:/\$'(?:[^'\\]|\\[\s\S])*'/,greedy:!0,inside:{entity:y.entity}}],environment:{pattern:RegExp("\\$?"+u),alias:"constant"},variable:y.variable,function:{pattern:/(^|[\s;|&]|[<>]\()(?:add|apropos|apt|apt-cache|apt-get|aptitude|aspell|automysqlbackup|awk|basename|bash|bc|bconsole|bg|bzip2|cal|cargo|cat|cfdisk|chgrp|chkconfig|chmod|chown|chroot|cksum|clear|cmp|column|comm|composer|cp|cron|crontab|csplit|curl|cut|date|dc|dd|ddrescue|debootstrap|df|diff|diff3|dig|dir|dircolors|dirname|dirs|dmesg|docker|docker-compose|du|egrep|eject|env|ethtool|expand|expect|expr|fdformat|fdisk|fg|fgrep|file|find|fmt|fold|format|free|fsck|ftp|fuser|gawk|git|gparted|grep|groupadd|groupdel|groupmod|groups|grub-mkconfig|gzip|halt|head|hg|history|host|hostname|htop|iconv|id|ifconfig|ifdown|ifup|import|install|ip|java|jobs|join|kill|killall|less|link|ln|locate|logname|logrotate|look|lpc|lpr|lprint|lprintd|lprintq|lprm|ls|lsof|lynx|make|man|mc|mdadm|mkconfig|mkdir|mke2fs|mkfifo|mkfs|mkisofs|mknod|mkswap|mmv|more|most|mount|mtools|mtr|mutt|mv|nano|nc|netstat|nice|nl|node|nohup|notify-send|npm|nslookup|op|open|parted|passwd|paste|pathchk|ping|pkill|pnpm|podman|podman-compose|popd|pr|printcap|printenv|ps|pushd|pv|quota|quotacheck|quotactl|ram|rar|rcp|reboot|remsync|rename|renice|rev|rm|rmdir|rpm|rsync|scp|screen|sdiff|sed|sendmail|seq|service|sftp|sh|shellcheck|shuf|shutdown|sleep|slocate|sort|split|ssh|stat|strace|su|sudo|sum|suspend|swapon|sync|sysctl|tac|tail|tar|tee|time|timeout|top|touch|tr|traceroute|tsort|tty|umount|uname|unexpand|uniq|units|unrar|unshar|unzip|update-grub|uptime|useradd|userdel|usermod|users|uudecode|uuencode|v|vcpkg|vdir|vi|vim|virsh|vmstat|wait|watch|wc|wget|whereis|which|who|whoami|write|xargs|xdg-open|yarn|yes|zenity|zip|zsh|zypper)(?=$|[)\s;|&])/,lookbehind:!0},keyword:{pattern:/(^|[\s;|&]|[<>]\()(?:case|do|done|elif|else|esac|fi|for|function|if|in|select|then|until|while)(?=$|[)\s;|&])/,lookbehind:!0},builtin:{pattern:/(^|[\s;|&]|[<>]\()(?:\.|:|alias|bind|break|builtin|caller|cd|command|continue|declare|echo|enable|eval|exec|exit|export|getopts|hash|help|let|local|logout|mapfile|printf|pwd|read|readarray|readonly|return|set|shift|shopt|source|test|times|trap|type|typeset|ulimit|umask|unalias|unset)(?=$|[)\s;|&])/,lookbehind:!0,alias:"class-name"},boolean:{pattern:/(^|[\s;|&]|[<>]\()(?:false|true)(?=$|[)\s;|&])/,lookbehind:!0},"file-descriptor":{pattern:/\B&\d\b/,alias:"important"},operator:{pattern:/\d?<>|>\||\+=|=[=~]?|!=?|<<[<-]?|[&\d]?>>|\d[<>]&?|[<>][&=]?|&[>&]?|\|[&|]?/,inside:{"file-descriptor":{pattern:/^\d/,alias:"important"}}},punctuation:/\$?\(\(?|\)\)?|\.\.|[{}[\];\\]/,number:{pattern:/(^|\s)(?:[1-9]\d*|0)(?:[.,]\d+)?\b/,lookbehind:!0}},f.inside=n.languages.bash;for(var S=["comment","function-name","for-or-select","assign-left","parameter","string","environment","function","keyword","builtin","boolean","file-descriptor","operator","punctuation","number"],A=y.variable[1].inside,w=0;w<S.length;w++)A[S[w]]=n.languages.bash[S[w]];n.languages.sh=n.languages.bash,n.languages.shell=n.languages.bash})(s)}yaml.displayName="yaml";yaml.aliases=["yml"];function yaml(s){(function(n){var u=/[*&][^\s[\]{},]+/,f=/!(?:<[\w\-%#;/?:@&=+$,.!~*'()[\]]+>|(?:[a-zA-Z\d-]*!)?[\w\-%#;/?:@&=+$.~*'()]+)?/,y="(?:"+f.source+"(?:[ 	]+"+u.source+")?|"+u.source+"(?:[ 	]+"+f.source+")?)",S=/(?:[^\s\x00-\x08\x0e-\x1f!"#%&'*,\-:>?@[\]`{|}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]|[?:-]<PLAIN>)(?:[ \t]*(?:(?![#:])<PLAIN>|:<PLAIN>))*/.source.replace(/<PLAIN>/g,function(){return/[^\s\x00-\x08\x0e-\x1f,[\]{}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]/.source}),A=/"(?:[^"\\\r\n]|\\.)*"|'(?:[^'\\\r\n]|\\.)*'/.source;function w(C,T){T=(T||"").replace(/m/g,"")+"m";var R=/([:\-,[{]\s*(?:\s<<prop>>[ \t]+)?)(?:<<value>>)(?=[ \t]*(?:$|,|\]|\}|(?:[\r\n]\s*)?#))/.source.replace(/<<prop>>/g,function(){return y}).replace(/<<value>>/g,function(){return C});return RegExp(R,T)}n.languages.yaml={scalar:{pattern:RegExp(/([\-:]\s*(?:\s<<prop>>[ \t]+)?[|>])[ \t]*(?:((?:\r?\n|\r)[ \t]+)\S[^\r\n]*(?:\2[^\r\n]+)*)/.source.replace(/<<prop>>/g,function(){return y})),lookbehind:!0,alias:"string"},comment:/#.*/,key:{pattern:RegExp(/((?:^|[:\-,[{\r\n?])[ \t]*(?:<<prop>>[ \t]+)?)<<key>>(?=\s*:\s)/.source.replace(/<<prop>>/g,function(){return y}).replace(/<<key>>/g,function(){return"(?:"+S+"|"+A+")"})),lookbehind:!0,greedy:!0,alias:"atrule"},directive:{pattern:/(^[ \t]*)%.+/m,lookbehind:!0,alias:"important"},datetime:{pattern:w(/\d{4}-\d\d?-\d\d?(?:[tT]|[ \t]+)\d\d?:\d{2}:\d{2}(?:\.\d*)?(?:[ \t]*(?:Z|[-+]\d\d?(?::\d{2})?))?|\d{4}-\d{2}-\d{2}|\d\d?:\d{2}(?::\d{2}(?:\.\d*)?)?/.source),lookbehind:!0,alias:"number"},boolean:{pattern:w(/false|true/.source,"i"),lookbehind:!0,alias:"important"},null:{pattern:w(/null|~/.source,"i"),lookbehind:!0,alias:"important"},string:{pattern:w(A),lookbehind:!0,greedy:!0},number:{pattern:w(/[+-]?(?:0x[\da-f]+|0o[0-7]+|(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?|\.inf|\.nan)/.source,"i"),lookbehind:!0},tag:f,important:u,punctuation:/---|[:[\]{}\-,|>?]|\.\.\./},n.languages.yml=n.languages.yaml})(s)}markdown.displayName="markdown";markdown.aliases=["md"];function markdown(s){s.register(markup),(function(n){var u=/(?:\\.|[^\\\n\r]|(?:\n|\r\n?)(?![\r\n]))/.source;function f(w){return w=w.replace(/<inner>/g,function(){return u}),RegExp(/((?:^|[^\\])(?:\\{2})*)/.source+"(?:"+w+")")}var y=/(?:\\.|``(?:[^`\r\n]|`(?!`))+``|`[^`\r\n]+`|[^\\|\r\n`])+/.source,S=/\|?__(?:\|__)+\|?(?:(?:\n|\r\n?)|(?![\s\S]))/.source.replace(/__/g,function(){return y}),A=/\|?[ \t]*:?-{3,}:?[ \t]*(?:\|[ \t]*:?-{3,}:?[ \t]*)+\|?(?:\n|\r\n?)/.source;n.languages.markdown=n.languages.extend("markup",{}),n.languages.insertBefore("markdown","prolog",{"front-matter-block":{pattern:/(^(?:\s*[\r\n])?)---(?!.)[\s\S]*?[\r\n]---(?!.)/,lookbehind:!0,greedy:!0,inside:{punctuation:/^---|---$/,"front-matter":{pattern:/\S+(?:\s+\S+)*/,alias:["yaml","language-yaml"],inside:n.languages.yaml}}},blockquote:{pattern:/^>(?:[\t ]*>)*/m,alias:"punctuation"},table:{pattern:RegExp("^"+S+A+"(?:"+S+")*","m"),inside:{"table-data-rows":{pattern:RegExp("^("+S+A+")(?:"+S+")*$"),lookbehind:!0,inside:{"table-data":{pattern:RegExp(y),inside:n.languages.markdown},punctuation:/\|/}},"table-line":{pattern:RegExp("^("+S+")"+A+"$"),lookbehind:!0,inside:{punctuation:/\||:?-{3,}:?/}},"table-header-row":{pattern:RegExp("^"+S+"$"),inside:{"table-header":{pattern:RegExp(y),alias:"important",inside:n.languages.markdown},punctuation:/\|/}}}},code:[{pattern:/((?:^|\n)[ \t]*\n|(?:^|\r\n?)[ \t]*\r\n?)(?: {4}|\t).+(?:(?:\n|\r\n?)(?: {4}|\t).+)*/,lookbehind:!0,alias:"keyword"},{pattern:/^```[\s\S]*?^```$/m,greedy:!0,inside:{"code-block":{pattern:/^(```.*(?:\n|\r\n?))[\s\S]+?(?=(?:\n|\r\n?)^```$)/m,lookbehind:!0},"code-language":{pattern:/^(```).+/,lookbehind:!0},punctuation:/```/}}],title:[{pattern:/\S.*(?:\n|\r\n?)(?:==+|--+)(?=[ \t]*$)/m,alias:"important",inside:{punctuation:/==+$|--+$/}},{pattern:/(^\s*)#.+/m,lookbehind:!0,alias:"important",inside:{punctuation:/^#+|#+$/}}],hr:{pattern:/(^\s*)([*-])(?:[\t ]*\2){2,}(?=\s*$)/m,lookbehind:!0,alias:"punctuation"},list:{pattern:/(^\s*)(?:[*+-]|\d+\.)(?=[\t ].)/m,lookbehind:!0,alias:"punctuation"},"url-reference":{pattern:/!?\[[^\]]+\]:[\t ]+(?:\S+|<(?:\\.|[^>\\])+>)(?:[\t ]+(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\)))?/,inside:{variable:{pattern:/^(!?\[)[^\]]+/,lookbehind:!0},string:/(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\))$/,punctuation:/^[\[\]!:]|[<>]/},alias:"url"},bold:{pattern:f(/\b__(?:(?!_)<inner>|_(?:(?!_)<inner>)+_)+__\b|\*\*(?:(?!\*)<inner>|\*(?:(?!\*)<inner>)+\*)+\*\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^..)[\s\S]+(?=..$)/,lookbehind:!0,inside:{}},punctuation:/\*\*|__/}},italic:{pattern:f(/\b_(?:(?!_)<inner>|__(?:(?!_)<inner>)+__)+_\b|\*(?:(?!\*)<inner>|\*\*(?:(?!\*)<inner>)+\*\*)+\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^.)[\s\S]+(?=.$)/,lookbehind:!0,inside:{}},punctuation:/[*_]/}},strike:{pattern:f(/(~~?)(?:(?!~)<inner>)+\2/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^~~?)[\s\S]+(?=\1$)/,lookbehind:!0,inside:{}},punctuation:/~~?/}},"code-snippet":{pattern:/(^|[^\\`])(?:``[^`\r\n]+(?:`[^`\r\n]+)*``(?!`)|`[^`\r\n]+`(?!`))/,lookbehind:!0,greedy:!0,alias:["code","keyword"]},url:{pattern:f(/!?\[(?:(?!\])<inner>)+\](?:\([^\s)]+(?:[\t ]+"(?:\\.|[^"\\])*")?\)|[ \t]?\[(?:(?!\])<inner>)+\])/.source),lookbehind:!0,greedy:!0,inside:{operator:/^!/,content:{pattern:/(^\[)[^\]]+(?=\])/,lookbehind:!0,inside:{}},variable:{pattern:/(^\][ \t]?\[)[^\]]+(?=\]$)/,lookbehind:!0},url:{pattern:/(^\]\()[^\s)]+/,lookbehind:!0},string:{pattern:/(^[ \t]+)"(?:\\.|[^"\\])*"(?=\)$)/,lookbehind:!0}}}}),["url","bold","italic","strike"].forEach(function(w){["url","bold","italic","strike","code-snippet"].forEach(function(C){w!==C&&(n.languages.markdown[w].inside.content.inside[C]=n.languages.markdown[C])})}),n.hooks.add("after-tokenize",function(w){if(w.language!=="markdown"&&w.language!=="md")return;function C(T){if(!(!T||typeof T=="string"))for(var R=0,I=T.length;R<I;R++){var N=T[R];if(N.type!=="code"){C(N.content);continue}var L=N.content[1],F=N.content[3];if(L&&F&&L.type==="code-language"&&F.type==="code-block"&&typeof L.content=="string"){var H=L.content.replace(/\b#/g,"sharp").replace(/\b\+\+/g,"pp");H=(/[a-z][\w-]*/i.exec(H)||[""])[0].toLowerCase();var z="language-"+H;F.alias?typeof F.alias=="string"?F.alias=[F.alias,z]:F.alias.push(z):F.alias=[z]}}}C(w.tokens)}),n.hooks.add("wrap",function(w){if(w.type==="code-block"){for(var C="",T=0,R=w.classes.length;T<R;T++){var I=w.classes[T],N=/language-(.+)/.exec(I);if(N){C=N[1];break}}var L=n.languages[C];if(L)w.content=n.highlight(w.content.value,L,C);else if(C&&C!=="none"&&n.plugins.autoloader){var F="md-"+new Date().valueOf()+"-"+Math.floor(Math.random()*1e16);w.attributes.id=F,n.plugins.autoloader.loadLanguages(C,function(){var H=document.getElementById(F);H&&(H.innerHTML=n.highlight(H.textContent,n.languages[C],C))})}}}),RegExp(n.languages.markup.tag.pattern.source,"gi"),n.languages.md=n.languages.markdown})(s)}arturo.displayName="arturo";arturo.aliases=["art"];function arturo(s){(function(n){var u=function(f,y){return{pattern:RegExp(/\{!/.source+"(?:"+(y||f)+")"+/$[\s\S]*\}/.source,"m"),greedy:!0,inside:{embedded:{pattern:/(^\{!\w+\b)[\s\S]+(?=\}$)/,lookbehind:!0,alias:"language-"+f,inside:n.languages[f]},string:/[\s\S]+/}}};n.languages.arturo={comment:{pattern:/;.*/,greedy:!0},character:{pattern:/`.`/,alias:"char",greedy:!0},number:{pattern:/\b\d+(?:\.\d+(?:\.\d+(?:-[\w+-]+)?)?)?\b/},string:{pattern:/"(?:[^"\\\r\n]|\\.)*"/,greedy:!0},regex:{pattern:/\{\/.*?\/\}/,greedy:!0},"html-string":u("html"),"css-string":u("css"),"js-string":u("js"),"md-string":u("md"),"sql-string":u("sql"),"sh-string":u("shell","sh"),multistring:{pattern:/.*|\{:[\s\S]*?:\}|\{[\s\S]*?\}|^-{6}$[\s\S]*/m,alias:"string",greedy:!0},label:{pattern:/\w+\b\??:/,alias:"property"},literal:{pattern:/'(?:\w+\b\??:?)/,alias:"constant"},type:{pattern:/:(?:\w+\b\??:?)/,alias:"class-name"},color:/#\w+/,predicate:{pattern:/\b(?:all|and|any|ascii|attr|attribute|attributeLabel|binary|block|char|contains|database|date|dictionary|empty|equal|even|every|exists|false|floating|function|greater|greaterOrEqual|if|in|inline|integer|is|key|label|leap|less|lessOrEqual|literal|logical|lower|nand|negative|nor|not|notEqual|null|numeric|odd|or|path|pathLabel|positive|prefix|prime|regex|same|set|some|sorted|standalone|string|subset|suffix|superset|symbol|symbolLiteral|true|try|type|unless|upper|when|whitespace|word|xnor|xor|zero)\?/,alias:"keyword"},"builtin-function":{pattern:/\b(?:abs|acos|acosh|acsec|acsech|actan|actanh|add|after|alert|alias|and|angle|append|arg|args|arity|array|as|asec|asech|asin|asinh|atan|atan2|atanh|attr|attrs|average|before|benchmark|blend|break|call|capitalize|case|ceil|chop|clear|clip|close|color|combine|conj|continue|copy|cos|cosh|crc|csec|csech|ctan|ctanh|cursor|darken|dec|decode|define|delete|desaturate|deviation|dialog|dictionary|difference|digest|digits|div|do|download|drop|dup|e|else|empty|encode|ensure|env|escape|execute|exit|exp|extend|extract|factors|fdiv|filter|first|flatten|floor|fold|from|function|gamma|gcd|get|goto|hash|hypot|if|inc|indent|index|infinity|info|input|insert|inspect|intersection|invert|jaro|join|keys|kurtosis|last|let|levenshtein|lighten|list|ln|log|loop|lower|mail|map|match|max|median|min|mod|module|mul|nand|neg|new|nor|normalize|not|now|null|open|or|outdent|pad|palette|panic|path|pause|permissions|permutate|pi|pop|popup|pow|powerset|powmod|prefix|print|prints|process|product|query|random|range|read|relative|remove|rename|render|repeat|replace|request|return|reverse|round|sample|saturate|script|sec|sech|select|serve|set|shl|shr|shuffle|sin|sinh|size|skewness|slice|sort|spin|split|sqrt|squeeze|stack|strip|sub|suffix|sum|switch|symbols|symlink|sys|take|tan|tanh|terminal|terminate|to|truncate|try|type|unclip|union|unique|unless|until|unzip|upper|values|var|variance|volume|webview|while|with|wordwrap|write|xnor|xor|zip)\b/,alias:"keyword"},sugar:{pattern:/->|=>|\||::/,alias:"operator"},punctuation:/[()[\],]/,symbol:{pattern:/<:|-:||@|#|\+|\||\*|\$|---|-|%|\/|\.\.|\^|~|=|<|>|\\/},boolean:{pattern:/\b(?:false|maybe|true)\b/}},n.languages.art=n.languages.arturo})(s)}asciidoc.displayName="asciidoc";asciidoc.aliases=["adoc"];function asciidoc(s){(function(n){var u={pattern:/(^[ \t]*)\[(?!\[)(?:(["'$`])(?:(?!\2)[^\\]|\\.)*\2|\[(?:[^\[\]\\]|\\.)*\]|[^\[\]\\"'$`]|\\.)*\]/m,lookbehind:!0,inside:{quoted:{pattern:/([$`])(?:(?!\1)[^\\]|\\.)*\1/,inside:{punctuation:/^[$`]|[$`]$/}},interpreted:{pattern:/'(?:[^'\\]|\\.)*'/,inside:{punctuation:/^'|'$/}},string:/"(?:[^"\\]|\\.)*"/,variable:/\w+(?==)/,punctuation:/^\[|\]$|,/,operator:/=/,"attr-value":/(?!^\s+$).+/}},f=n.languages.asciidoc={"comment-block":{pattern:/^(\/{4,})$[\s\S]*?^\1/m,alias:"comment"},table:{pattern:/^\|={3,}(?:(?:\r?\n|\r(?!\n)).*)*?(?:\r?\n|\r)\|={3,}$/m,inside:{specifiers:{pattern:/(?:(?:(?:\d+(?:\.\d+)?|\.\d+)[+*](?:[<^>](?:\.[<^>])?|\.[<^>])?|[<^>](?:\.[<^>])?|\.[<^>])[a-z]*|[a-z]+)(?=\|)/,alias:"attr-value"},punctuation:{pattern:/(^|[^\\])[|!]=*/,lookbehind:!0}}},"passthrough-block":{pattern:/^(\+{4,})$[\s\S]*?^\1$/m,inside:{punctuation:/^\++|\++$/}},"literal-block":{pattern:/^(-{4,}|\.{4,})$[\s\S]*?^\1$/m,inside:{punctuation:/^(?:-+|\.+)|(?:-+|\.+)$/}},"other-block":{pattern:/^(--|\*{4,}|_{4,}|={4,})$[\s\S]*?^\1$/m,inside:{punctuation:/^(?:-+|\*+|_+|=+)|(?:-+|\*+|_+|=+)$/}},"list-punctuation":{pattern:/(^[ \t]*)(?:-|\*{1,5}|\.{1,5}|(?:[a-z]|\d+)\.|[xvi]+\))(?= )/im,lookbehind:!0,alias:"punctuation"},"list-label":{pattern:/(^[ \t]*)[a-z\d].+(?::{2,4}|;;)(?=\s)/im,lookbehind:!0,alias:"symbol"},"indented-block":{pattern:/((\r?\n|\r)\2)([ \t]+)\S.*(?:(?:\r?\n|\r)\3.+)*(?=\2{2}|$)/,lookbehind:!0},comment:/^\/\/.*/m,title:{pattern:/^.+(?:\r?\n|\r)(?:={3,}|-{3,}|~{3,}|\^{3,}|\+{3,})$|^={1,5} .+|^\.(?![\s.]).*/m,alias:"important",inside:{punctuation:/^(?:\.|=+)|(?:=+|-+|~+|\^+|\++)$/}},"attribute-entry":{pattern:/^:[^:\r\n]+:(?: .*?(?: \+(?:\r?\n|\r).*?)*)?$/m,alias:"tag"},attributes:u,hr:{pattern:/^'{3,}$/m,alias:"punctuation"},"page-break":{pattern:/^<{3,}$/m,alias:"punctuation"},admonition:{pattern:/^(?:CAUTION|IMPORTANT|NOTE|TIP|WARNING):/m,alias:"keyword"},callout:[{pattern:/(^[ \t]*)<?\d*>/m,lookbehind:!0,alias:"symbol"},{pattern:/<\d+>/,alias:"symbol"}],macro:{pattern:/\b[a-z\d][a-z\d-]*::?(?:[^\s\[\]]*\[(?:[^\]\\"']|(["'])(?:(?!\1)[^\\]|\\.)*\1|\\.)*\])/,inside:{function:/^[a-z\d-]+(?=:)/,punctuation:/^::?/,attributes:{pattern:/(?:\[(?:[^\]\\"']|(["'])(?:(?!\1)[^\\]|\\.)*\1|\\.)*\])/,inside:u.inside}}},inline:{pattern:/(^|[^\\])(?:(?:\B\[(?:[^\]\\"']|(["'])(?:(?!\2)[^\\]|\\.)*\2|\\.)*\])?(?:\b_(?!\s)(?: _|[^_\\\r\n]|\\.)+(?:(?:\r?\n|\r)(?: _|[^_\\\r\n]|\\.)+)*_\b|\B``(?!\s).+?(?:(?:\r?\n|\r).+?)*''\B|\B`(?!\s)(?:[^`'\s]|\s+\S)+['`]\B|\B(['*+#])(?!\s)(?: \3|(?!\3)[^\\\r\n]|\\.)+(?:(?:\r?\n|\r)(?: \3|(?!\3)[^\\\r\n]|\\.)+)*\3\B)|(?:\[(?:[^\]\\"']|(["'])(?:(?!\4)[^\\]|\\.)*\4|\\.)*\])?(?:(__|\*\*|\+\+\+?|##|\$\$|[~^]).+?(?:(?:\r?\n|\r).+?)*\5|\{[^}\r\n]+\}|\[\[\[?.+?(?:(?:\r?\n|\r).+?)*\]?\]\]|<<.+?(?:(?:\r?\n|\r).+?)*>>|\(\(\(?.+?(?:(?:\r?\n|\r).+?)*\)?\)\)))/m,lookbehind:!0,inside:{attributes:u,url:{pattern:/^(?:\[\[\[?.+?\]?\]\]|<<.+?>>)$/,inside:{punctuation:/^(?:\[\[\[?|<<)|(?:\]\]\]?|>>)$/}},"attribute-ref":{pattern:/^\{.+\}$/,inside:{variable:{pattern:/(^\{)[a-z\d,+_-]+/,lookbehind:!0},operator:/^[=?!#%@$]|!(?=[:}])/,punctuation:/^\{|\}$|::?/}},italic:{pattern:/^(['_])[\s\S]+\1$/,inside:{punctuation:/^(?:''?|__?)|(?:''?|__?)$/}},bold:{pattern:/^\*[\s\S]+\*$/,inside:{punctuation:/^\*\*?|\*\*?$/}},punctuation:/^(?:``?|\+{1,3}|##?|\$\$|[~^]|\(\(\(?)|(?:''?|\+{1,3}|##?|\$\$|[~^`]|\)?\)\))$/}},replacement:{pattern:/\((?:C|R|TM)\)/,alias:"builtin"},entity:/&#?[\da-z]{1,8};/i,"line-continuation":{pattern:/(^| )\+$/m,lookbehind:!0,alias:"punctuation"}};function y(S){S=S.split(" ");for(var A={},w=0,C=S.length;w<C;w++)A[S[w]]=f[S[w]];return A}u.inside.interpreted.inside.rest=y("macro inline replacement entity"),f["passthrough-block"].inside.rest=y("macro"),f["literal-block"].inside.rest=y("callout"),f.table.inside.rest=y("comment-block passthrough-block literal-block other-block list-punctuation indented-block comment title attribute-entry attributes hr page-break admonition list-label callout macro inline replacement entity line-continuation"),f["other-block"].inside.rest=y("table list-punctuation indented-block comment attribute-entry attributes hr page-break admonition list-label macro inline replacement entity line-continuation"),f.title.inside.rest=y("macro inline replacement entity"),n.hooks.add("wrap",function(S){S.type==="entity"&&(S.attributes.title=S.content.value.replace(/&amp;/,"&"))}),n.languages.adoc=n.languages.asciidoc})(s)}csharp.displayName="csharp";csharp.aliases=["cs","dotnet"];function csharp(s){s.register(clike),(function(n){function u(oe,ae){return oe.replace(/<<(\d+)>>/g,function(be,he){return"(?:"+ae[+he]+")"})}function f(oe,ae,be){return RegExp(u(oe,ae),"")}function y(oe,ae){for(var be=0;be<ae;be++)oe=oe.replace(/<<self>>/g,function(){return"(?:"+oe+")"});return oe.replace(/<<self>>/g,"[^\\s\\S]")}var S={type:"bool byte char decimal double dynamic float int long object sbyte short string uint ulong ushort var void",typeDeclaration:"class enum interface record struct",contextual:"add alias and ascending async await by descending from(?=\\s*(?:\\w|$)) get global group into init(?=\\s*;) join let nameof not notnull on or orderby partial remove select set unmanaged value when where with(?=\\s*{)",other:"abstract as base break case catch checked const continue default delegate do else event explicit extern finally fixed for foreach goto if implicit in internal is lock namespace new null operator out override params private protected public readonly ref return sealed sizeof stackalloc static switch this throw try typeof unchecked unsafe using virtual volatile while yield"};function A(oe){return"\\b(?:"+oe.trim().replace(/ /g,"|")+")\\b"}var w=A(S.typeDeclaration),C=RegExp(A(S.type+" "+S.typeDeclaration+" "+S.contextual+" "+S.other)),T=A(S.typeDeclaration+" "+S.contextual+" "+S.other),R=A(S.type+" "+S.typeDeclaration+" "+S.other),I=y(/<(?:[^<>;=+\-*/%&|^]|<<self>>)*>/.source,2),N=y(/\((?:[^()]|<<self>>)*\)/.source,2),L=/@?\b[A-Za-z_]\w*\b/.source,F=u(/<<0>>(?:\s*<<1>>)?/.source,[L,I]),H=u(/(?!<<0>>)<<1>>(?:\s*\.\s*<<1>>)*/.source,[T,F]),z=/\[\s*(?:,\s*)*\]/.source,U=u(/<<0>>(?:\s*(?:\?\s*)?<<1>>)*(?:\s*\?)?/.source,[H,z]),G=u(/[^,()<>[\];=+\-*/%&|^]|<<0>>|<<1>>|<<2>>/.source,[I,N,z]),Y=u(/\(<<0>>+(?:,<<0>>+)+\)/.source,[G]),K=u(/(?:<<0>>|<<1>>)(?:\s*(?:\?\s*)?<<2>>)*(?:\s*\?)?/.source,[Y,H,z]),Z={keyword:C,punctuation:/[<>()?,.:[\]]/},J=/'(?:[^\r\n'\\]|\\.|\\[Uux][\da-fA-F]{1,8})'/.source,te=/"(?:\\.|[^\\"\r\n])*"/.source,de=/@"(?:""|\\[\s\S]|[^\\"])*"(?!")/.source;n.languages.csharp=n.languages.extend("clike",{string:[{pattern:f(/(^|[^$\\])<<0>>/.source,[de]),lookbehind:!0,greedy:!0},{pattern:f(/(^|[^@$\\])<<0>>/.source,[te]),lookbehind:!0,greedy:!0}],"class-name":[{pattern:f(/(\busing\s+static\s+)<<0>>(?=\s*;)/.source,[H]),lookbehind:!0,inside:Z},{pattern:f(/(\busing\s+<<0>>\s*=\s*)<<1>>(?=\s*;)/.source,[L,K]),lookbehind:!0,inside:Z},{pattern:f(/(\busing\s+)<<0>>(?=\s*=)/.source,[L]),lookbehind:!0},{pattern:f(/(\b<<0>>\s+)<<1>>/.source,[w,F]),lookbehind:!0,inside:Z},{pattern:f(/(\bcatch\s*\(\s*)<<0>>/.source,[H]),lookbehind:!0,inside:Z},{pattern:f(/(\bwhere\s+)<<0>>/.source,[L]),lookbehind:!0},{pattern:f(/(\b(?:is(?:\s+not)?|as)\s+)<<0>>/.source,[U]),lookbehind:!0,inside:Z},{pattern:f(/\b<<0>>(?=\s+(?!<<1>>|with\s*\{)<<2>>(?:\s*[=,;:{)\]]|\s+(?:in|when)\b))/.source,[K,R,L]),inside:Z}],keyword:C,number:/(?:\b0(?:x[\da-f_]*[\da-f]|b[01_]*[01])|(?:\B\.\d+(?:_+\d+)*|\b\d+(?:_+\d+)*(?:\.\d+(?:_+\d+)*)?)(?:e[-+]?\d+(?:_+\d+)*)?)(?:[dflmu]|lu|ul)?\b/i,operator:/>>=?|<<=?|[-=]>|([-+&|])\1|~|\?\?=?|[-+*/%&|^!=<>]=?/,punctuation:/\?\.?|::|[{}[\];(),.:]/}),n.languages.insertBefore("csharp","number",{range:{pattern:/\.\./,alias:"operator"}}),n.languages.insertBefore("csharp","punctuation",{"named-parameter":{pattern:f(/([(,]\s*)<<0>>(?=\s*:)/.source,[L]),lookbehind:!0,alias:"punctuation"}}),n.languages.insertBefore("csharp","class-name",{namespace:{pattern:f(/(\b(?:namespace|using)\s+)<<0>>(?:\s*\.\s*<<0>>)*(?=\s*[;{])/.source,[L]),lookbehind:!0,inside:{punctuation:/\./}},"type-expression":{pattern:f(/(\b(?:default|sizeof|typeof)\s*\(\s*(?!\s))(?:[^()\s]|\s(?!\s)|<<0>>)*(?=\s*\))/.source,[N]),lookbehind:!0,alias:"class-name",inside:Z},"return-type":{pattern:f(/<<0>>(?=\s+(?:<<1>>\s*(?:=>|[({]|\.\s*this\s*\[)|this\s*\[))/.source,[K,H]),inside:Z,alias:"class-name"},"constructor-invocation":{pattern:f(/(\bnew\s+)<<0>>(?=\s*[[({])/.source,[K]),lookbehind:!0,inside:Z,alias:"class-name"},"generic-method":{pattern:f(/<<0>>\s*<<1>>(?=\s*\()/.source,[L,I]),inside:{function:f(/^<<0>>/.source,[L]),generic:{pattern:RegExp(I),alias:"class-name",inside:Z}}},"type-list":{pattern:f(/\b((?:<<0>>\s+<<1>>|record\s+<<1>>\s*<<5>>|where\s+<<2>>)\s*:\s*)(?:<<3>>|<<4>>|<<1>>\s*<<5>>|<<6>>)(?:\s*,\s*(?:<<3>>|<<4>>|<<6>>))*(?=\s*(?:where|[{;]|=>|$))/.source,[w,F,L,K,C.source,N,/\bnew\s*\(\s*\)/.source]),lookbehind:!0,inside:{"record-arguments":{pattern:f(/(^(?!new\s*\()<<0>>\s*)<<1>>/.source,[F,N]),lookbehind:!0,greedy:!0,inside:n.languages.csharp},keyword:C,"class-name":{pattern:RegExp(K),greedy:!0,inside:Z},punctuation:/[,()]/}},preprocessor:{pattern:/(^[\t ]*)#.*/m,lookbehind:!0,alias:"property",inside:{directive:{pattern:/(#)\b(?:define|elif|else|endif|endregion|error|if|line|nullable|pragma|region|undef|warning)\b/,lookbehind:!0,alias:"keyword"}}}});var se=te+"|"+J,ne=u(/\/(?![*/])|\/\/[^\r\n]*[\r\n]|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>/.source,[se]),ge=y(u(/[^"'/()]|<<0>>|\(<<self>>*\)/.source,[ne]),2),Ee=/\b(?:assembly|event|field|method|module|param|property|return|type)\b/.source,we=u(/<<0>>(?:\s*\(<<1>>*\))?/.source,[H,ge]);n.languages.insertBefore("csharp","class-name",{attribute:{pattern:f(/((?:^|[^\s\w>)?])\s*\[\s*)(?:<<0>>\s*:\s*)?<<1>>(?:\s*,\s*<<1>>)*(?=\s*\])/.source,[Ee,we]),lookbehind:!0,greedy:!0,inside:{target:{pattern:f(/^<<0>>(?=\s*:)/.source,[Ee]),alias:"keyword"},"attribute-arguments":{pattern:f(/\(<<0>>*\)/.source,[ge]),inside:n.languages.csharp},"class-name":{pattern:RegExp(H),inside:{punctuation:/\./}},punctuation:/[:,]/}}});var Ie=/:[^}\r\n]+/.source,Be=y(u(/[^"'/()]|<<0>>|\(<<self>>*\)/.source,[ne]),2),Me=u(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source,[Be,Ie]),Re=y(u(/[^"'/()]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>|\(<<self>>*\)/.source,[se]),2),Te=u(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source,[Re,Ie]);function Se(oe,ae){return{interpolation:{pattern:f(/((?:^|[^{])(?:\{\{)*)<<0>>/.source,[oe]),lookbehind:!0,inside:{"format-string":{pattern:f(/(^\{(?:(?![}:])<<0>>)*)<<1>>(?=\}$)/.source,[ae,Ie]),lookbehind:!0,inside:{punctuation:/^:/}},punctuation:/^\{|\}$/,expression:{pattern:/[\s\S]+/,alias:"language-csharp",inside:n.languages.csharp}}},string:/[\s\S]+/}}n.languages.insertBefore("csharp","string",{"interpolation-string":[{pattern:f(/(^|[^\\])(?:\$@|@\$)"(?:""|\\[\s\S]|\{\{|<<0>>|[^\\{"])*"/.source,[Me]),lookbehind:!0,greedy:!0,inside:Se(Me,Be)},{pattern:f(/(^|[^@\\])\$"(?:\\.|\{\{|<<0>>|[^\\"{])*"/.source,[Te]),lookbehind:!0,greedy:!0,inside:Se(Te,Re)}],char:{pattern:RegExp(J),greedy:!0}}),n.languages.dotnet=n.languages.cs=n.languages.csharp})(s)}aspnet.displayName="aspnet";aspnet.aliases=[];function aspnet(s){s.register(csharp),s.register(markup),s.languages.aspnet=s.languages.extend("markup",{"page-directive":{pattern:/<%\s*@.*%>/,alias:"tag",inside:{"page-directive":{pattern:/<%\s*@\s*(?:Assembly|Control|Implements|Import|Master(?:Type)?|OutputCache|Page|PreviousPageType|Reference|Register)?|%>/i,alias:"tag"},rest:s.languages.markup.tag.inside}},directive:{pattern:/<%.*%>/,alias:"tag",inside:{directive:{pattern:/<%\s*?[$=%#:]{0,2}|%>/,alias:"tag"},rest:s.languages.csharp}}}),s.languages.aspnet.tag.pattern=/<(?!%)\/?[^\s>\/]+(?:\s+[^\s>\/=]+(?:=(?:("|')(?:\\[\s\S]|(?!\1)[^\\])*\1|[^\s'">=]+))?)*\s*\/?>/,s.languages.insertBefore("inside","punctuation",{directive:s.languages.aspnet.directive},s.languages.aspnet.tag.inside["attr-value"]),s.languages.insertBefore("aspnet","comment",{"asp-comment":{pattern:/<%--[\s\S]*?--%>/,alias:["asp","comment"]}}),s.languages.insertBefore("aspnet",s.languages.javascript?"script":"tag",{"asp-script":{pattern:/(<script(?=.*runat=['"]?server\b)[^>]*>)[\s\S]*?(?=<\/script>)/i,lookbehind:!0,alias:["asp","script"],inside:s.languages.csharp||{}}})}asm6502.displayName="asm6502";asm6502.aliases=[];function asm6502(s){s.languages.asm6502={comment:/;.*/,directive:{pattern:/\.\w+(?= )/,alias:"property"},string:/(["'`])(?:\\.|(?!\1)[^\\\r\n])*\1/,"op-code":{pattern:/\b(?:ADC|AND|ASL|BCC|BCS|BEQ|BIT|BMI|BNE|BPL|BRK|BVC|BVS|CLC|CLD|CLI|CLV|CMP|CPX|CPY|DEC|DEX|DEY|EOR|INC|INX|INY|JMP|JSR|LDA|LDX|LDY|LSR|NOP|ORA|PHA|PHP|PLA|PLP|ROL|ROR|RTI|RTS|SBC|SEC|SED|SEI|STA|STX|STY|TAX|TAY|TSX|TXA|TXS|TYA|adc|and|asl|bcc|bcs|beq|bit|bmi|bne|bpl|brk|bvc|bvs|clc|cld|cli|clv|cmp|cpx|cpy|dec|dex|dey|eor|inc|inx|iny|jmp|jsr|lda|ldx|ldy|lsr|nop|ora|pha|php|pla|plp|rol|ror|rti|rts|sbc|sec|sed|sei|sta|stx|sty|tax|tay|tsx|txa|txs|tya)\b/,alias:"keyword"},"hex-number":{pattern:/#?\$[\da-f]{1,4}\b/i,alias:"number"},"binary-number":{pattern:/#?%[01]+\b/,alias:"number"},"decimal-number":{pattern:/#?\b\d+\b/,alias:"number"},register:{pattern:/\b[xya]\b/i,alias:"variable"},punctuation:/[(),:]/}}asmatmel.displayName="asmatmel";asmatmel.aliases=[];function asmatmel(s){s.languages.asmatmel={comment:{pattern:/;.*/,greedy:!0},string:{pattern:/(["'`])(?:\\.|(?!\1)[^\\\r\n])*\1/,greedy:!0},constant:/\b(?:PORT[A-Z]|DDR[A-Z]|(?:DD|P)[A-Z](?:\d|[0-2]\d|3[01]))\b/,directive:{pattern:/\.\w+(?= )/,alias:"property"},"r-register":{pattern:/\br(?:\d|[12]\d|3[01])\b/,alias:"variable"},"op-code":{pattern:/\b(?:ADC|ADD|ADIW|AND|ANDI|ASR|BCLR|BLD|BRBC|BRBS|BRCC|BRCS|BREAK|BREQ|BRGE|BRHC|BRHS|BRID|BRIE|BRLO|BRLT|BRMI|BRNE|BRPL|BRSH|BRTC|BRTS|BRVC|BRVS|BSET|BST|CALL|CBI|CBR|CLC|CLH|CLI|CLN|CLR|CLS|CLT|CLV|CLZ|COM|CP|CPC|CPI|CPSE|DEC|DES|EICALL|EIJMP|ELPM|EOR|FMUL|FMULS|FMULSU|ICALL|IJMP|IN|INC|JMP|LAC|LAS|LAT|LD|LD[A-Za-z0-9]|LPM|LSL|LSR|MOV|MOVW|MUL|MULS|MULSU|NEG|NOP|OR|ORI|OUT|POP|PUSH|RCALL|RET|RETI|RJMP|ROL|ROR|SBC|SBCI|SBI|SBIC|SBIS|SBIW|SBR|SBRC|SBRS|SEC|SEH|SEI|SEN|SER|SES|SET|SEV|SEZ|SLEEP|SPM|ST|ST[A-Z0-9]|SUB|SUBI|SWAP|TST|WDR|XCH|adc|add|adiw|and|andi|asr|bclr|bld|brbc|brbs|brcc|brcs|break|breq|brge|brhc|brhs|brid|brie|brlo|brlt|brmi|brne|brpl|brsh|brtc|brts|brvc|brvs|bset|bst|call|cbi|cbr|clc|clh|cli|cln|clr|cls|clt|clv|clz|com|cp|cpc|cpi|cpse|dec|des|eicall|eijmp|elpm|eor|fmul|fmuls|fmulsu|icall|ijmp|in|inc|jmp|lac|las|lat|ld|ld[a-z0-9]|lpm|lsl|lsr|mov|movw|mul|muls|mulsu|neg|nop|or|ori|out|pop|push|rcall|ret|reti|rjmp|rol|ror|sbc|sbci|sbi|sbic|sbis|sbiw|sbr|sbrc|sbrs|sec|seh|sei|sen|ser|ses|set|sev|sez|sleep|spm|st|st[a-zA-Z0-9]|sub|subi|swap|tst|wdr|xch)\b/,alias:"keyword"},"hex-number":{pattern:/#?\$[\da-f]{2,4}\b/i,alias:"number"},"binary-number":{pattern:/#?%[01]+\b/,alias:"number"},"decimal-number":{pattern:/#?\b\d+\b/,alias:"number"},register:{pattern:/\b[acznvshtixy]\b/i,alias:"variable"},operator:/>>=?|<<=?|&[&=]?|\|[\|=]?|[-+*/%^!=<>?]=?/,punctuation:/[(),:]/}}autohotkey.displayName="autohotkey";autohotkey.aliases=[];function autohotkey(s){s.languages.autohotkey={comment:[{pattern:/(^|\s);.*/,lookbehind:!0},{pattern:/(^[\t ]*)\/\*(?:[\r\n](?![ \t]*\*\/)|[^\r\n])*(?:[\r\n][ \t]*\*\/)?/m,lookbehind:!0,greedy:!0}],tag:{pattern:/^([ \t]*)[^\s,`":]+(?=:[ \t]*$)/m,lookbehind:!0},string:/"(?:[^"\n\r]|"")*"/,variable:/%\w+%/,number:/\b0x[\dA-Fa-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee]-?\d+)?/,operator:/\?|\/\/?=?|:=|\|[=|]?|&[=&]?|\+[=+]?|-[=-]?|\*[=*]?|<(?:<=?|>|=)?|>>?=?|[.^!=~]=?|\b(?:AND|NOT|OR)\b/,boolean:/\b(?:false|true)\b/,command:{pattern:/\b(?:AutoTrim|BlockInput|Break|Click|ClipWait|Continue|Control|ControlClick|ControlFocus|ControlGet|ControlGetFocus|ControlGetPos|ControlGetText|ControlMove|ControlSend|ControlSendRaw|ControlSetText|CoordMode|Critical|DetectHiddenText|DetectHiddenWindows|Drive|DriveGet|DriveSpaceFree|EnvAdd|EnvDiv|EnvGet|EnvMult|EnvSet|EnvSub|EnvUpdate|Exit|ExitApp|FileAppend|FileCopy|FileCopyDir|FileCreateDir|FileCreateShortcut|FileDelete|FileEncoding|FileGetAttrib|FileGetShortcut|FileGetSize|FileGetTime|FileGetVersion|FileInstall|FileMove|FileMoveDir|FileRead|FileReadLine|FileRecycle|FileRecycleEmpty|FileRemoveDir|FileSelectFile|FileSelectFolder|FileSetAttrib|FileSetTime|FormatTime|GetKeyState|Gosub|Goto|GroupActivate|GroupAdd|GroupClose|GroupDeactivate|Gui|GuiControl|GuiControlGet|Hotkey|ImageSearch|IniDelete|IniRead|IniWrite|Input|InputBox|KeyWait|ListHotkeys|ListLines|ListVars|Loop|Menu|MouseClick|MouseClickDrag|MouseGetPos|MouseMove|MsgBox|OnExit|OutputDebug|Pause|PixelGetColor|PixelSearch|PostMessage|Process|Progress|Random|RegDelete|RegRead|RegWrite|Reload|Repeat|Return|Run|RunAs|RunWait|Send|SendEvent|SendInput|SendMessage|SendMode|SendPlay|SendRaw|SetBatchLines|SetCapslockState|SetControlDelay|SetDefaultMouseSpeed|SetEnv|SetFormat|SetKeyDelay|SetMouseDelay|SetNumlockState|SetRegView|SetScrollLockState|SetStoreCapslockMode|SetTimer|SetTitleMatchMode|SetWinDelay|SetWorkingDir|Shutdown|Sleep|Sort|SoundBeep|SoundGet|SoundGetWaveVolume|SoundPlay|SoundSet|SoundSetWaveVolume|SplashImage|SplashTextOff|SplashTextOn|SplitPath|StatusBarGetText|StatusBarWait|StringCaseSense|StringGetPos|StringLeft|StringLen|StringLower|StringMid|StringReplace|StringRight|StringSplit|StringTrimLeft|StringTrimRight|StringUpper|Suspend|SysGet|Thread|ToolTip|Transform|TrayTip|URLDownloadToFile|WinActivate|WinActivateBottom|WinClose|WinGet|WinGetActiveStats|WinGetActiveTitle|WinGetClass|WinGetPos|WinGetText|WinGetTitle|WinHide|WinKill|WinMaximize|WinMenuSelectItem|WinMinimize|WinMinimizeAll|WinMinimizeAllUndo|WinMove|WinRestore|WinSet|WinSetTitle|WinShow|WinWait|WinWaitActive|WinWaitClose|WinWaitNotActive)\b/i,alias:"selector"},constant:/\b(?:a_ahkpath|a_ahkversion|a_appdata|a_appdatacommon|a_autotrim|a_batchlines|a_caretx|a_carety|a_computername|a_controldelay|a_cursor|a_dd|a_ddd|a_dddd|a_defaultmousespeed|a_desktop|a_desktopcommon|a_detecthiddentext|a_detecthiddenwindows|a_endchar|a_eventinfo|a_exitreason|a_fileencoding|a_formatfloat|a_formatinteger|a_gui|a_guicontrol|a_guicontrolevent|a_guievent|a_guiheight|a_guiwidth|a_guix|a_guiy|a_hour|a_iconfile|a_iconhidden|a_iconnumber|a_icontip|a_index|a_ipaddress1|a_ipaddress2|a_ipaddress3|a_ipaddress4|a_is64bitos|a_isadmin|a_iscompiled|a_iscritical|a_ispaused|a_issuspended|a_isunicode|a_keydelay|a_language|a_lasterror|a_linefile|a_linenumber|a_loopfield|a_loopfileattrib|a_loopfiledir|a_loopfileext|a_loopfilefullpath|a_loopfilelongpath|a_loopfilename|a_loopfileshortname|a_loopfileshortpath|a_loopfilesize|a_loopfilesizekb|a_loopfilesizemb|a_loopfiletimeaccessed|a_loopfiletimecreated|a_loopfiletimemodified|a_loopreadline|a_loopregkey|a_loopregname|a_loopregsubkey|a_loopregtimemodified|a_loopregtype|a_mday|a_min|a_mm|a_mmm|a_mmmm|a_mon|a_mousedelay|a_msec|a_mydocuments|a_now|a_nowutc|a_numbatchlines|a_ostype|a_osversion|a_priorhotkey|a_priorkey|a_programfiles|a_programs|a_programscommon|a_ptrsize|a_regview|a_screendpi|a_screenheight|a_screenwidth|a_scriptdir|a_scriptfullpath|a_scripthwnd|a_scriptname|a_sec|a_space|a_startmenu|a_startmenucommon|a_startup|a_startupcommon|a_stringcasesense|a_tab|a_temp|a_thisfunc|a_thishotkey|a_thislabel|a_thismenu|a_thismenuitem|a_thismenuitempos|a_tickcount|a_timeidle|a_timeidlephysical|a_timesincepriorhotkey|a_timesincethishotkey|a_titlematchmode|a_titlematchmodespeed|a_username|a_wday|a_windelay|a_windir|a_workingdir|a_yday|a_year|a_yweek|a_yyyy|clipboard|clipboardall|comspec|errorlevel|programfiles)\b/i,builtin:/\b(?:abs|acos|asc|asin|atan|ceil|chr|class|comobjactive|comobjarray|comobjconnect|comobjcreate|comobjerror|comobjflags|comobjget|comobjquery|comobjtype|comobjvalue|cos|dllcall|exp|fileexist|Fileopen|floor|format|il_add|il_create|il_destroy|instr|isfunc|islabel|IsObject|ln|log|ltrim|lv_add|lv_delete|lv_deletecol|lv_getcount|lv_getnext|lv_gettext|lv_insert|lv_insertcol|lv_modify|lv_modifycol|lv_setimagelist|mod|numget|numput|onmessage|regexmatch|regexreplace|registercallback|round|rtrim|sb_seticon|sb_setparts|sb_settext|sin|sqrt|strlen|strreplace|strsplit|substr|tan|tv_add|tv_delete|tv_get|tv_getchild|tv_getcount|tv_getnext|tv_getparent|tv_getprev|tv_getselection|tv_gettext|tv_modify|varsetcapacity|winactive|winexist|__Call|__Get|__New|__Set)\b/i,symbol:/\b(?:alt|altdown|altup|appskey|backspace|browser_back|browser_favorites|browser_forward|browser_home|browser_refresh|browser_search|browser_stop|bs|capslock|ctrl|ctrlbreak|ctrldown|ctrlup|del|delete|down|end|enter|esc|escape|f1|f10|f11|f12|f13|f14|f15|f16|f17|f18|f19|f2|f20|f21|f22|f23|f24|f3|f4|f5|f6|f7|f8|f9|home|ins|insert|joy1|joy10|joy11|joy12|joy13|joy14|joy15|joy16|joy17|joy18|joy19|joy2|joy20|joy21|joy22|joy23|joy24|joy25|joy26|joy27|joy28|joy29|joy3|joy30|joy31|joy32|joy4|joy5|joy6|joy7|joy8|joy9|joyaxes|joybuttons|joyinfo|joyname|joypov|joyr|joyu|joyv|joyx|joyy|joyz|lalt|launch_app1|launch_app2|launch_mail|launch_media|lbutton|lcontrol|lctrl|left|lshift|lwin|lwindown|lwinup|mbutton|media_next|media_play_pause|media_prev|media_stop|numlock|numpad0|numpad1|numpad2|numpad3|numpad4|numpad5|numpad6|numpad7|numpad8|numpad9|numpadadd|numpadclear|numpaddel|numpaddiv|numpaddot|numpaddown|numpadend|numpadenter|numpadhome|numpadins|numpadleft|numpadmult|numpadpgdn|numpadpgup|numpadright|numpadsub|numpadup|pgdn|pgup|printscreen|ralt|rbutton|rcontrol|rctrl|right|rshift|rwin|rwindown|rwinup|scrolllock|shift|shiftdown|shiftup|space|tab|up|volume_down|volume_mute|volume_up|wheeldown|wheelleft|wheelright|wheelup|xbutton1|xbutton2)\b/i,directive:{pattern:/#[a-z]+\b/i,alias:"important"},keyword:/\b(?:Abort|AboveNormal|Add|ahk_class|ahk_exe|ahk_group|ahk_id|ahk_pid|All|Alnum|Alpha|AltSubmit|AltTab|AltTabAndMenu|AltTabMenu|AltTabMenuDismiss|AlwaysOnTop|AutoSize|Background|BackgroundTrans|BelowNormal|between|BitAnd|BitNot|BitOr|BitShiftLeft|BitShiftRight|BitXOr|Bold|Border|Button|ByRef|Catch|Checkbox|Checked|CheckedGray|Choose|ChooseString|Close|Color|ComboBox|Contains|ControlList|Count|Date|DateTime|Days|DDL|Default|DeleteAll|Delimiter|Deref|Destroy|Digit|Disable|Disabled|DropDownList|Edit|Eject|Else|Enable|Enabled|Error|Exist|Expand|ExStyle|FileSystem|Finally|First|Flash|Float|FloatFast|Focus|Font|for|global|Grid|Group|GroupBox|GuiClose|GuiContextMenu|GuiDropFiles|GuiEscape|GuiSize|Hdr|Hidden|Hide|High|HKCC|HKCR|HKCU|HKEY_CLASSES_ROOT|HKEY_CURRENT_CONFIG|HKEY_CURRENT_USER|HKEY_LOCAL_MACHINE|HKEY_USERS|HKLM|HKU|Hours|HScroll|Icon|IconSmall|ID|IDLast|If|IfEqual|IfExist|IfGreater|IfGreaterOrEqual|IfInString|IfLess|IfLessOrEqual|IfMsgBox|IfNotEqual|IfNotExist|IfNotInString|IfWinActive|IfWinExist|IfWinNotActive|IfWinNotExist|Ignore|ImageList|in|Integer|IntegerFast|Interrupt|is|italic|Join|Label|LastFound|LastFoundExist|Limit|Lines|List|ListBox|ListView|local|Lock|Logoff|Low|Lower|Lowercase|MainWindow|Margin|Maximize|MaximizeBox|MaxSize|Minimize|MinimizeBox|MinMax|MinSize|Minutes|MonthCal|Mouse|Move|Multi|NA|No|NoActivate|NoDefault|NoHide|NoIcon|NoMainWindow|norm|Normal|NoSort|NoSortHdr|NoStandard|Not|NoTab|NoTimers|Number|Off|Ok|On|OwnDialogs|Owner|Parse|Password|Picture|Pixel|Pos|Pow|Priority|ProcessName|Radio|Range|Read|ReadOnly|Realtime|Redraw|Region|REG_BINARY|REG_DWORD|REG_EXPAND_SZ|REG_MULTI_SZ|REG_SZ|Relative|Rename|Report|Resize|Restore|Retry|RGB|Screen|Seconds|Section|Serial|SetLabel|ShiftAltTab|Show|Single|Slider|SortDesc|Standard|static|Status|StatusBar|StatusCD|strike|Style|Submit|SysMenu|Tab2|TabStop|Text|Theme|Throw|Tile|ToggleCheck|ToggleEnable|ToolWindow|Top|Topmost|TransColor|Transparent|Tray|TreeView|Try|TryAgain|Type|UnCheck|underline|Unicode|Unlock|Until|UpDown|Upper|Uppercase|UseErrorLevel|Vis|VisFirst|Visible|VScroll|Wait|WaitClose|WantCtrlA|WantF2|WantReturn|While|Wrap|Xdigit|xm|xp|xs|Yes|ym|yp|ys)\b/i,function:/[^(); \t,\n+*\-=?>:\\\/<&%\[\]]+(?=\()/,punctuation:/[{}[\]():,]/}}autoit.displayName="autoit";autoit.aliases=[];function autoit(s){s.languages.autoit={comment:[/;.*/,{pattern:/(^[\t ]*)#(?:comments-start|cs)[\s\S]*?^[ \t]*#(?:ce|comments-end)/m,lookbehind:!0}],url:{pattern:/(^[\t ]*#include\s+)(?:<[^\r\n>]+>|"[^\r\n"]+")/m,lookbehind:!0},string:{pattern:/(["'])(?:\1\1|(?!\1)[^\r\n])*\1/,greedy:!0,inside:{variable:/([%$@])\w+\1/}},directive:{pattern:/(^[\t ]*)#[\w-]+/m,lookbehind:!0,alias:"keyword"},function:/\b\w+(?=\()/,variable:/[$@]\w+/,keyword:/\b(?:Case|Const|Continue(?:Case|Loop)|Default|Dim|Do|Else(?:If)?|End(?:Func|If|Select|Switch|With)|Enum|Exit(?:Loop)?|For|Func|Global|If|In|Local|Next|Null|ReDim|Select|Static|Step|Switch|Then|To|Until|Volatile|WEnd|While|With)\b/i,number:/\b(?:0x[\da-f]+|\d+(?:\.\d+)?(?:e[+-]?\d+)?)\b/i,boolean:/\b(?:False|True)\b/i,operator:/<[=>]?|[-+*\/=&>]=?|[?^]|\b(?:And|Not|Or)\b/i,punctuation:/[\[\]().,:]/}}avisynth.displayName="avisynth";avisynth.aliases=["avs"];function avisynth(s){(function(n){function u(T,R){return T.replace(/<<(\d+)>>/g,function(I,N){return R[+N]})}function f(T,R,I){return RegExp(u(T,R),I)}var y=/bool|clip|float|int|string|val/.source,S=[/is(?:bool|clip|float|int|string)|defined|(?:(?:internal)?function|var)?exists?/.source,/apply|assert|default|eval|import|nop|select|undefined/.source,/opt_(?:allowfloataudio|avipadscanlines|dwchannelmask|enable_(?:b64a|planartopackedrgb|v210|y3_10_10|y3_10_16)|usewaveextensible|vdubplanarhack)|set(?:cachemode|maxcpu|memorymax|planarlegacyalignment|workingdir)/.source,/hex(?:value)?|value/.source,/abs|ceil|continued(?:denominator|numerator)?|exp|floor|fmod|frac|log(?:10)?|max|min|muldiv|pi|pow|rand|round|sign|spline|sqrt/.source,/a?sinh?|a?cosh?|a?tan[2h]?/.source,/(?:bit(?:and|not|x?or|[lr]?shift[aslu]?|sh[lr]|sa[lr]|[lr]rotatel?|ro[rl]|te?st|set(?:count)?|cl(?:ea)?r|ch(?:an)?ge?))/.source,/average(?:[bgr]|chroma[uv]|luma)|(?:[rgb]|chroma[uv]|luma|rgb|[yuv](?=difference(?:fromprevious|tonext)))difference(?:fromprevious|tonext)?|[yuvrgb]plane(?:median|min|max|minmaxdifference)/.source,/getprocessinfo|logmsg|script(?:dir(?:utf8)?|file(?:utf8)?|name(?:utf8)?)|setlogparams/.source,/chr|(?:fill|find|left|mid|replace|rev|right)str|format|[lu]case|ord|str(?:cmpi?|fromutf8|len|toutf8)|time|trim(?:all|left|right)/.source,/isversionorgreater|version(?:number|string)/.source,/buildpixeltype|colorspacenametopixeltype/.source,/addautoloaddir|on(?:cpu|cuda)|prefetch|setfiltermtmode/.source].join("|"),A=[/has(?:audio|video)/.source,/height|width/.source,/frame(?:count|rate)|framerate(?:denominator|numerator)/.source,/getparity|is(?:field|frame)based/.source,/bitspercomponent|componentsize|hasalpha|is(?:planar(?:rgba?)?|interleaved|rgb(?:24|32|48|64)?|y(?:8|u(?:va?|y2))?|yv(?:12|16|24|411)|420|422|444|packedrgb)|numcomponents|pixeltype/.source,/audio(?:bits|channels|duration|length(?:[fs]|hi|lo)?|rate)|isaudio(?:float|int)/.source].join("|"),w=[/avi(?:file)?source|directshowsource|image(?:reader|source|sourceanim)|opendmlsource|segmented(?:avisource|directshowsource)|wavsource/.source,/coloryuv|convertbacktoyuy2|convertto(?:RGB(?:24|32|48|64)|(?:planar)?RGBA?|Y8?|YV(?:12|16|24|411)|YUVA?(?:411|420|422|444)|YUY2)|fixluminance|gr[ae]yscale|invert|levels|limiter|mergea?rgb|merge(?:chroma|luma)|rgbadjust|show(?:alpha|blue|green|red)|swapuv|tweak|[uv]toy8?|ytouv/.source,/(?:colorkey|reset)mask|layer|mask(?:hs)?|merge|overlay|subtract/.source,/addborders|(?:bicubic|bilinear|blackman|gauss|lanczos4|lanczos|point|sinc|spline(?:16|36|64))resize|crop(?:bottom)?|flip(?:horizontal|vertical)|(?:horizontal|vertical)?reduceby2|letterbox|skewrows|turn(?:180|left|right)/.source,/blur|fixbrokenchromaupsampling|generalconvolution|(?:spatial|temporal)soften|sharpen/.source,/trim|(?:un)?alignedsplice|(?:assume|assumescaled|change|convert)FPS|(?:delete|duplicate)frame|dissolve|fade(?:in|io|out)[02]?|freezeframe|interleave|loop|reverse|select(?:even|odd|(?:range)?every)/.source,/assume[bt]ff|assume(?:field|frame)based|bob|complementparity|doubleweave|peculiarblend|pulldown|separate(?:columns|fields|rows)|swapfields|weave(?:columns|rows)?/.source,/amplify(?:db)?|assumesamplerate|audiodub(?:ex)?|audiotrim|convertaudioto(?:(?:8|16|24|32)bit|float)|converttomono|delayaudio|ensurevbrmp3sync|get(?:left|right)?channel|kill(?:audio|video)|mergechannels|mixaudio|monotostereo|normalize|resampleaudio|ssrc|supereq|timestretch/.source,/animate|applyrange|conditional(?:filter|reader|select)|frameevaluate|scriptclip|tcp(?:server|source)|writefile(?:end|if|start)?/.source,/imagewriter/.source,/blackness|blankclip|colorbars(?:hd)?|compare|dumpfiltergraph|echo|histogram|info|messageclip|preroll|setgraphanalysis|show(?:framenumber|smpte|time)|showfiveversions|stack(?:horizontal|vertical)|subtitle|tone|version/.source].join("|"),C=[S,A,w].join("|");n.languages.avisynth={comment:[{pattern:/(^|[^\\])\[\*(?:[^\[*]|\[(?!\*)|\*(?!\])|\[\*(?:[^\[*]|\[(?!\*)|\*(?!\]))*\*\])*\*\]/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\$])#.*/,lookbehind:!0,greedy:!0}],argument:{pattern:f(/\b(?:<<0>>)\s+("?)\w+\1/.source,[y],"i"),inside:{keyword:/^\w+/}},"argument-label":{pattern:/([,(][\s\\]*)\w+\s*=(?!=)/,lookbehind:!0,inside:{"argument-name":{pattern:/^\w+/,alias:"punctuation"},punctuation:/=$/}},string:[{pattern:/"""[\s\S]*?"""/,greedy:!0},{pattern:/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0,inside:{constant:{pattern:/\b(?:DEFAULT_MT_MODE|(?:MAINSCRIPT|PROGRAM|SCRIPT)DIR|(?:MACHINE|USER)_(?:CLASSIC|PLUS)_PLUGINS)\b/}}}],variable:/\b(?:last)\b/i,boolean:/\b(?:false|no|true|yes)\b/i,keyword:/\b(?:catch|else|for|function|global|if|return|try|while|__END__)\b/i,constant:/\bMT_(?:MULTI_INSTANCE|NICE_FILTER|SERIALIZED|SPECIAL_MT)\b/,"builtin-function":{pattern:f(/\b(?:<<0>>)\b/.source,[C],"i"),alias:"function"},"type-cast":{pattern:f(/\b(?:<<0>>)(?=\s*\()/.source,[y],"i"),alias:"keyword"},function:{pattern:/\b[a-z_]\w*(?=\s*\()|(\.)[a-z_]\w*\b/i,lookbehind:!0},"line-continuation":{pattern:/(^[ \t]*)\\|\\(?=[ \t]*$)/m,lookbehind:!0,alias:"punctuation"},number:/\B\$(?:[\da-f]{6}|[\da-f]{8})\b|(?:(?:\b|\B-)\d+(?:\.\d*)?\b|\B\.\d+\b)/i,operator:/\+\+?|[!=<>]=?|&&|\|\||[?:*/%-]/,punctuation:/[{}\[\]();,.]/},n.languages.avs=n.languages.avisynth})(s)}avroIdl.displayName="avro-idl";avroIdl.aliases=["avdl"];function avroIdl(s){s.languages["avro-idl"]={comment:{pattern:/\/\/.*|\/\*[\s\S]*?\*\//,greedy:!0},string:{pattern:/(^|[^\\])"(?:[^\r\n"\\]|\\.)*"/,lookbehind:!0,greedy:!0},annotation:{pattern:/@(?:[$\w.-]|`[^\r\n`]+`)+/,greedy:!0,alias:"function"},"function-identifier":{pattern:/`[^\r\n`]+`(?=\s*\()/,greedy:!0,alias:"function"},identifier:{pattern:/`[^\r\n`]+`/,greedy:!0},"class-name":{pattern:/(\b(?:enum|error|protocol|record|throws)\b\s+)[$\w]+/,lookbehind:!0,greedy:!0},keyword:/\b(?:array|boolean|bytes|date|decimal|double|enum|error|false|fixed|float|idl|import|int|local_timestamp_ms|long|map|null|oneway|protocol|record|schema|string|throws|time_ms|timestamp_ms|true|union|uuid|void)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,number:[{pattern:/(^|[^\w.])-?(?:(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?|0x(?:[a-f0-9]+(?:\.[a-f0-9]*)?|\.[a-f0-9]+)(?:p[+-]?\d+)?)[dfl]?(?![\w.])/i,lookbehind:!0},/-?\b(?:Infinity|NaN)\b/],operator:/=/,punctuation:/[()\[\]{}<>.:,;-]/},s.languages.avdl=s.languages["avro-idl"]}awk.displayName="awk";awk.aliases=["gawk"];function awk(s){s.languages.awk={hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},comment:{pattern:/#.*/,greedy:!0},string:{pattern:/(^|[^\\])"(?:[^\\"\r\n]|\\.)*"/,lookbehind:!0,greedy:!0},regex:{pattern:/((?:^|[^\w\s)])\s*)\/(?:[^\/\\\r\n]|\\.)*\//,lookbehind:!0,greedy:!0},variable:/\$\w+/,keyword:/\b(?:BEGIN|BEGINFILE|END|ENDFILE|break|case|continue|default|delete|do|else|exit|for|function|getline|if|in|next|nextfile|printf?|return|switch|while)\b|@(?:include|load)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,number:/\b(?:\d+(?:\.\d+)?(?:e[+-]?\d+)?|0x[a-fA-F0-9]+)\b/,operator:/--|\+\+|!?~|>&|>>|<<|(?:\*\*|[<>!=+\-*/%^])=?|&&|\|[|&]|[?:]/,punctuation:/[()[\]{},;]/},s.languages.gawk=s.languages.awk}basic.displayName="basic";basic.aliases=[];function basic(s){s.languages.basic={comment:{pattern:/(?:!|REM\b).+/i,inside:{keyword:/^REM/i}},string:{pattern:/"(?:""|[!#$%&'()*,\/:;<=>?^\w +\-.])*"/,greedy:!0},number:/(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:E[+-]?\d+)?/i,keyword:/\b(?:AS|BEEP|BLOAD|BSAVE|CALL(?: ABSOLUTE)?|CASE|CHAIN|CHDIR|CLEAR|CLOSE|CLS|COM|COMMON|CONST|DATA|DECLARE|DEF(?: FN| SEG|DBL|INT|LNG|SNG|STR)|DIM|DO|DOUBLE|ELSE|ELSEIF|END|ENVIRON|ERASE|ERROR|EXIT|FIELD|FILES|FOR|FUNCTION|GET|GOSUB|GOTO|IF|INPUT|INTEGER|IOCTL|KEY|KILL|LINE INPUT|LOCATE|LOCK|LONG|LOOP|LSET|MKDIR|NAME|NEXT|OFF|ON(?: COM| ERROR| KEY| TIMER)?|OPEN|OPTION BASE|OUT|POKE|PUT|READ|REDIM|REM|RESTORE|RESUME|RETURN|RMDIR|RSET|RUN|SELECT CASE|SHARED|SHELL|SINGLE|SLEEP|STATIC|STEP|STOP|STRING|SUB|SWAP|SYSTEM|THEN|TIMER|TO|TROFF|TRON|TYPE|UNLOCK|UNTIL|USING|VIEW PRINT|WAIT|WEND|WHILE|WRITE)(?:\$|\b)/i,function:/\b(?:ABS|ACCESS|ACOS|ANGLE|AREA|ARITHMETIC|ARRAY|ASIN|ASK|AT|ATN|BASE|BEGIN|BREAK|CAUSE|CEIL|CHR|CLIP|COLLATE|COLOR|CON|COS|COSH|COT|CSC|DATE|DATUM|DEBUG|DECIMAL|DEF|DEG|DEGREES|DELETE|DET|DEVICE|DISPLAY|DOT|ELAPSED|EPS|ERASABLE|EXLINE|EXP|EXTERNAL|EXTYPE|FILETYPE|FIXED|FP|GO|GRAPH|HANDLER|IDN|IMAGE|IN|INT|INTERNAL|IP|IS|KEYED|LBOUND|LCASE|LEFT|LEN|LENGTH|LET|LINE|LINES|LOG|LOG10|LOG2|LTRIM|MARGIN|MAT|MAX|MAXNUM|MID|MIN|MISSING|MOD|NATIVE|NUL|NUMERIC|OF|OPTION|ORD|ORGANIZATION|OUTIN|OUTPUT|PI|POINT|POINTER|POINTS|POS|PRINT|PROGRAM|PROMPT|RAD|RADIANS|RANDOMIZE|RECORD|RECSIZE|RECTYPE|RELATIVE|REMAINDER|REPEAT|REST|RETRY|REWRITE|RIGHT|RND|ROUND|RTRIM|SAME|SEC|SELECT|SEQUENTIAL|SET|SETTER|SGN|SIN|SINH|SIZE|SKIP|SQR|STANDARD|STATUS|STR|STREAM|STYLE|TAB|TAN|TANH|TEMPLATE|TEXT|THERE|TIME|TIMEOUT|TRACE|TRANSFORM|TRUNCATE|UBOUND|UCASE|USE|VAL|VARIABLE|VIEWPORT|WHEN|WINDOW|WITH|ZER|ZONEWIDTH)(?:\$|\b)/i,operator:/<[=>]?|>=?|[+\-*\/^=&]|\b(?:AND|EQV|IMP|NOT|OR|XOR)\b/i,punctuation:/[,;:()]/}}batch.displayName="batch";batch.aliases=[];function batch(s){(function(n){var u=/%%?[~:\w]+%?|!\S+!/,f={pattern:/\/[a-z?]+(?=[ :]|$):?|-[a-z]\b|--[a-z-]+\b/im,alias:"attr-name",inside:{punctuation:/:/}},y=/"(?:[\\"]"|[^"])*"(?!")/,S=/(?:\b|-)\d+\b/;n.languages.batch={comment:[/^::.*/m,{pattern:/((?:^|[&(])[ \t]*)rem\b(?:[^^&)\r\n]|\^(?:\r\n|[\s\S]))*/im,lookbehind:!0}],label:{pattern:/^:.*/m,alias:"property"},command:[{pattern:/((?:^|[&(])[ \t]*)for(?: \/[a-z?](?:[ :](?:"[^"]*"|[^\s"/]\S*))?)* \S+ in \([^)]+\) do/im,lookbehind:!0,inside:{keyword:/\b(?:do|in)\b|^for\b/i,string:y,parameter:f,variable:u,number:S,punctuation:/[()',]/}},{pattern:/((?:^|[&(])[ \t]*)if(?: \/[a-z?](?:[ :](?:"[^"]*"|[^\s"/]\S*))?)* (?:not )?(?:cmdextversion \d+|defined \w+|errorlevel \d+|exist \S+|(?:"[^"]*"|(?!")(?:(?!==)\S)+)?(?:==| (?:equ|geq|gtr|leq|lss|neq) )(?:"[^"]*"|[^\s"]\S*))/im,lookbehind:!0,inside:{keyword:/\b(?:cmdextversion|defined|errorlevel|exist|not)\b|^if\b/i,string:y,parameter:f,variable:u,number:S,operator:/\^|==|\b(?:equ|geq|gtr|leq|lss|neq)\b/i}},{pattern:/((?:^|[&()])[ \t]*)else\b/im,lookbehind:!0,inside:{keyword:/^else\b/i}},{pattern:/((?:^|[&(])[ \t]*)set(?: \/[a-z](?:[ :](?:"[^"]*"|[^\s"/]\S*))?)* (?:[^^&)\r\n]|\^(?:\r\n|[\s\S]))*/im,lookbehind:!0,inside:{keyword:/^set\b/i,string:y,parameter:f,variable:[u,/\w+(?=(?:[*\/%+\-&^|]|<<|>>)?=)/],number:S,operator:/[*\/%+\-&^|]=?|<<=?|>>=?|[!~_=]/,punctuation:/[()',]/}},{pattern:/((?:^|[&(])[ \t]*@?)\w+\b(?:"(?:[\\"]"|[^"])*"(?!")|[^"^&)\r\n]|\^(?:\r\n|[\s\S]))*/m,lookbehind:!0,inside:{keyword:/^\w+\b/,string:y,parameter:f,label:{pattern:/(^\s*):\S+/m,lookbehind:!0,alias:"property"},variable:u,number:S,operator:/\^/}}],operator:/[&@]/,punctuation:/[()']/}})(s)}bbcode.displayName="bbcode";bbcode.aliases=["shortcode"];function bbcode(s){s.languages.bbcode={tag:{pattern:/\[\/?[^\s=\]]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'"\]=]+))?(?:\s+[^\s=\]]+\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'"\]=]+))*\s*\]/,inside:{tag:{pattern:/^\[\/?[^\s=\]]+/,inside:{punctuation:/^\[\/?/}},"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'"\]=]+)/,inside:{punctuation:[/^=/,{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\]/,"attr-name":/[^\s=\]]+/}}},s.languages.shortcode=s.languages.bbcode}bbj.displayName="bbj";bbj.aliases=[];function bbj(s){(function(n){n.languages.bbj={comment:{pattern:/(^|[^\\:])rem\s+.*/i,lookbehind:!0,greedy:!0},string:{pattern:/(['"])(?:(?!\1|\\).|\\.)*\1/,greedy:!0},number:/(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:E[+-]?\d+)?/i,keyword:/\b(?:abstract|all|argc|begin|bye|callback|case|chn|class|classend|ctl|day|declare|delete|dim|dom|dread|dsz|else|end|endif|err|exitto|extends|fi|field|for|from|gosub|goto|if|implements|interface|interfaceend|iol|iolist|let|list|load|method|methodend|methodret|on|opts|pfx|print|private|process_events|protected|psz|public|read|read_resource|release|remove_callback|repeat|restore|return|rev|seterr|setesc|sqlchn|sqlunt|ssn|start|static|swend|switch|sys|then|tim|unt|until|use|void|wend|where|while)\b/i,function:/\b\w+(?=\()/,boolean:/\b(?:BBjAPI\.TRUE|BBjAPI\.FALSE)\b/i,operator:/<[=>]?|>=?|[+\-*\/^=&]|\b(?:and|not|or|xor)\b/i,punctuation:/[.,;:()]/}})(s)}bicep.displayName="bicep";bicep.aliases=[];function bicep(s){s.languages.bicep={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],property:[{pattern:/([\r\n][ \t]*)[a-z_]\w*(?=[ \t]*:)/i,lookbehind:!0},{pattern:/([\r\n][ \t]*)'(?:\\.|\$(?!\{)|[^'\\\r\n$])*'(?=[ \t]*:)/,lookbehind:!0,greedy:!0}],string:[{pattern:/'''[^'][\s\S]*?'''/,greedy:!0},{pattern:/(^|[^\\'])'(?:\\.|\$(?!\{)|[^'\\\r\n$])*'/,lookbehind:!0,greedy:!0}],"interpolated-string":{pattern:/(^|[^\\'])'(?:\\.|\$(?:(?!\{)|\{[^{}\r\n]*\})|[^'\\\r\n$])*'/,lookbehind:!0,greedy:!0,inside:{interpolation:{pattern:/\$\{[^{}\r\n]*\}/,inside:{expression:{pattern:/(^\$\{)[\s\S]+(?=\}$)/,lookbehind:!0},punctuation:/^\$\{|\}$/}},string:/[\s\S]+/}},datatype:{pattern:/(\b(?:output|param)\b[ \t]+\w+[ \t]+)\w+\b/,lookbehind:!0,alias:"class-name"},boolean:/\b(?:false|true)\b/,keyword:/\b(?:existing|for|if|in|module|null|output|param|resource|targetScope|var)\b/,decorator:/@\w+\b/,function:/\b[a-z_]\w*(?=[ \t]*\()/i,number:/(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:E[+-]?\d+)?/i,operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/,punctuation:/[{}[\];(),.:]/},s.languages.bicep["interpolated-string"].inside.interpolation.inside.expression.inside=s.languages.bicep}birb.displayName="birb";birb.aliases=[];function birb(s){s.register(clike),s.languages.birb=s.languages.extend("clike",{string:{pattern:/r?("|')(?:\\.|(?!\1)[^\\])*\1/,greedy:!0},"class-name":[/\b[A-Z](?:[\d_]*[a-zA-Z]\w*)?\b/,/\b(?:[A-Z]\w*|(?!(?:var|void)\b)[a-z]\w*)(?=\s+\w+\s*[;,=()])/],keyword:/\b(?:assert|break|case|class|const|default|else|enum|final|follows|for|grab|if|nest|new|next|noSeeb|return|static|switch|throw|var|void|while)\b/,operator:/\+\+|--|&&|\|\||<<=?|>>=?|~(?:\/=?)?|[+\-*\/%&^|=!<>]=?|\?|:/,variable:/\b[a-z_]\w*\b/}),s.languages.insertBefore("birb","function",{metadata:{pattern:/<\w+>/,greedy:!0,alias:"symbol"}})}bison.displayName="bison";bison.aliases=[];function bison(s){s.register(c$1),s.languages.bison=s.languages.extend("c",{}),s.languages.insertBefore("bison","comment",{bison:{pattern:/^(?:[^%]|%(?!%))*%%[\s\S]*?%%/,inside:{c:{pattern:/%\{[\s\S]*?%\}|\{(?:\{[^}]*\}|[^{}])*\}/,inside:{delimiter:{pattern:/^%?\{|%?\}$/,alias:"punctuation"},"bison-variable":{pattern:/[$@](?:<[^\s>]+>)?[\w$]+/,alias:"variable",inside:{punctuation:/<|>/}},rest:s.languages.c}},comment:s.languages.c.comment,string:s.languages.c.string,property:/\S+(?=:)/,keyword:/%\w+/,number:{pattern:/(^|[^@])\b(?:0x[\da-f]+|\d+)/i,lookbehind:!0},punctuation:/%[%?]|[|:;\[\]<>]/}}})}bnf.displayName="bnf";bnf.aliases=["rbnf"];function bnf(s){s.languages.bnf={string:{pattern:/"[^\r\n"]*"|'[^\r\n']*'/},definition:{pattern:/<[^<>\r\n\t]+>(?=\s*::=)/,alias:["rule","keyword"],inside:{punctuation:/^<|>$/}},rule:{pattern:/<[^<>\r\n\t]+>/,inside:{punctuation:/^<|>$/}},operator:/::=|[|()[\]{}*+?]|\.{3}/},s.languages.rbnf=s.languages.bnf}bqn.displayName="bqn";bqn.aliases=[];function bqn(s){s.languages.bqn={shebang:{pattern:/^#![ \t]*\/.*/,alias:"important",greedy:!0},comment:{pattern:/#.*/,greedy:!0},"string-literal":{pattern:/"(?:[^"]|"")*"/,greedy:!0,alias:"string"},"character-literal":{pattern:/'(?:[\s\S]|[\uD800-\uDBFF][\uDC00-\uDFFF])'/,greedy:!0,alias:"char"},function:/[\w.]+[\w.]*/,"dot-notation-on-brackets":{pattern:/\{(?=.*\}\.)|\}\./,alias:"namespace"},"special-name":{pattern:/(?:|||||||||||__|_)/,alias:"keyword"},"dot-notation-on-name":{pattern:/[A-Za-z_][\w]*\./,alias:"namespace"},"word-number-scientific":{pattern:/\d+(?:\.\d+)?[eE]?\d+/,alias:"number"},"word-name":{pattern:/[A-Za-z_][\w]*/,alias:"symbol"},"word-number":{pattern:/[]?(?:\d*\.?\b\d+(?:e[+]?\d+|E[+]?\d+)?|||)(?:j?(?:(?:\d+(?:\.\d+)?|\.\d+)(?:e[+]?\d+|E[+]?\d+)?|||))?/,alias:"number"},"null-literal":{pattern:/@/,alias:"char"},"primitive-functions":{pattern:/[-+|<>=/!]/,alias:"operator"},"primitive-1-operators":{pattern:/[`]/,alias:"operator"},"primitive-2-operators":{pattern:/[]/,alias:"operator"},punctuation:/[(){}[\],.;:?]/}}brainfuck.displayName="brainfuck";brainfuck.aliases=[];function brainfuck(s){s.languages.brainfuck={pointer:{pattern:/<|>/,alias:"keyword"},increment:{pattern:/\+/,alias:"inserted"},decrement:{pattern:/-/,alias:"deleted"},branching:{pattern:/\[|\]/,alias:"important"},operator:/[.,]/,comment:/\S+/}}brightscript.displayName="brightscript";brightscript.aliases=[];function brightscript(s){s.languages.brightscript={comment:/(?:\brem|').*/i,"directive-statement":{pattern:/(^[\t ]*)#(?:const|else(?:[\t ]+if)?|end[\t ]+if|error|if).*/im,lookbehind:!0,alias:"property",inside:{"error-message":{pattern:/(^#error).+/,lookbehind:!0},directive:{pattern:/^#(?:const|else(?:[\t ]+if)?|end[\t ]+if|error|if)/,alias:"keyword"},expression:{pattern:/[\s\S]+/,inside:null}}},property:{pattern:/([\r\n{,][\t ]*)(?:(?!\d)\w+|"(?:[^"\r\n]|"")*"(?!"))(?=[ \t]*:)/,lookbehind:!0,greedy:!0},string:{pattern:/"(?:[^"\r\n]|"")*"(?!")/,greedy:!0},"class-name":{pattern:/(\bAs[\t ]+)\w+/i,lookbehind:!0},keyword:/\b(?:As|Dim|Each|Else|Elseif|End|Exit|For|Function|Goto|If|In|Print|Return|Step|Stop|Sub|Then|To|While)\b/i,boolean:/\b(?:false|true)\b/i,function:/\b(?!\d)\w+(?=[\t ]*\()/,number:/(?:\b\d+(?:\.\d+)?(?:[ed][+-]\d+)?|&h[a-f\d]+)\b[%&!#]?/i,operator:/--|\+\+|>>=?|<<=?|<>|[-+*/\\<>]=?|[:^=?]|\b(?:and|mod|not|or)\b/i,punctuation:/[.,;()[\]{}]/,constant:/\b(?:LINE_NUM)\b/i},s.languages.brightscript["directive-statement"].inside.expression.inside=s.languages.brightscript}bro.displayName="bro";bro.aliases=[];function bro(s){s.languages.bro={comment:{pattern:/(^|[^\\$])#.*/,lookbehind:!0,inside:{italic:/\b(?:FIXME|TODO|XXX)\b/}},string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},boolean:/\b[TF]\b/,function:{pattern:/(\b(?:event|function|hook)[ \t]+)\w+(?:::\w+)?/,lookbehind:!0},builtin:/(?:@(?:load(?:-(?:plugin|sigs))?|unload|prefixes|ifn?def|else|(?:end)?if|DIR|FILENAME))|(?:&?(?:add_func|create_expire|default|delete_func|encrypt|error_handler|expire_func|group|log|mergeable|optional|persistent|priority|raw_output|read_expire|redef|rotate_interval|rotate_size|synchronized|type_column|write_expire))/,constant:{pattern:/(\bconst[ \t]+)\w+/i,lookbehind:!0},keyword:/\b(?:add|addr|alarm|any|bool|break|const|continue|count|delete|double|else|enum|event|export|file|for|function|global|hook|if|in|int|interval|local|module|next|of|opaque|pattern|port|print|record|return|schedule|set|string|subnet|table|time|timeout|using|vector|when)\b/,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&|\|\|?|\?|\*|\/|~|\^|%/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,punctuation:/[{}[\];(),.:]/}}bsl.displayName="bsl";bsl.aliases=["oscript"];function bsl(s){s.languages.bsl={comment:/\/\/.*/,string:[{pattern:/"(?:[^"]|"")*"(?!")/,greedy:!0},{pattern:/'(?:[^'\r\n\\]|\\.)*'/}],keyword:[{pattern:/(^|[^\w\u0400-\u0484\u0487-\u052f\u1d2b\u1d78\u2de0-\u2dff\ua640-\ua69f\ufe2e\ufe2f])(?:|||||||||||||||||||||||||||||)(?![\w\u0400-\u0484\u0487-\u052f\u1d2b\u1d78\u2de0-\u2dff\ua640-\ua69f\ufe2e\ufe2f])/i,lookbehind:!0},{pattern:/\b(?:break|do|each|else|elseif|enddo|endfunction|endif|endprocedure|endtry|except|execute|export|false|for|function|if|in|new|null|procedure|raise|return|then|to|true|try|undefined|val|var|while)\b/i}],number:{pattern:/(^(?=\d)|[^\w\u0400-\u0484\u0487-\u052f\u1d2b\u1d78\u2de0-\u2dff\ua640-\ua69f\ufe2e\ufe2f])(?:\d+(?:\.\d*)?|\.\d+)(?:E[+-]?\d+)?/i,lookbehind:!0},operator:[/[<>+\-*/]=?|[%=]/,{pattern:/(^|[^\w\u0400-\u0484\u0487-\u052f\u1d2b\u1d78\u2de0-\u2dff\ua640-\ua69f\ufe2e\ufe2f])(?:||)(?![\w\u0400-\u0484\u0487-\u052f\u1d2b\u1d78\u2de0-\u2dff\ua640-\ua69f\ufe2e\ufe2f])/i,lookbehind:!0},{pattern:/\b(?:and|not|or)\b/i}],punctuation:/\(\.|\.\)|[()\[\]:;,.]/,directive:[{pattern:/^([ \t]*)&.*/m,lookbehind:!0,greedy:!0,alias:"important"},{pattern:/^([ \t]*)#.*/gm,lookbehind:!0,greedy:!0,alias:"important"}]},s.languages.oscript=s.languages.bsl}cfscript.displayName="cfscript";cfscript.aliases=["cfc"];function cfscript(s){s.register(clike),s.languages.cfscript=s.languages.extend("clike",{comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,inside:{annotation:{pattern:/(?:^|[^.])@[\w\.]+/,alias:"punctuation"}}},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],keyword:/\b(?:abstract|break|catch|component|continue|default|do|else|extends|final|finally|for|function|if|in|include|package|private|property|public|remote|required|rethrow|return|static|switch|throw|try|var|while|xml)\b(?!\s*=)/,operator:[/\+\+|--|&&|\|\||::|=>|[!=]==|[-+*/%&|^!=<>]=?|\?(?:\.|:)?|:/,/\b(?:and|contains|eq|equal|eqv|gt|gte|imp|is|lt|lte|mod|not|or|xor)\b/],scope:{pattern:/\b(?:application|arguments|cgi|client|cookie|local|session|super|this|variables)\b/,alias:"global"},type:{pattern:/\b(?:any|array|binary|boolean|date|guid|numeric|query|string|struct|uuid|void|xml)\b/,alias:"builtin"}}),s.languages.insertBefore("cfscript","keyword",{"function-variable":{pattern:/[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"}}),delete s.languages.cfscript["class-name"],s.languages.cfc=s.languages.cfscript}chaiscript.displayName="chaiscript";chaiscript.aliases=[];function chaiscript(s){s.register(clike),s.register(cpp),s.languages.chaiscript=s.languages.extend("clike",{string:{pattern:/(^|[^\\])'(?:[^'\\]|\\[\s\S])*'/,lookbehind:!0,greedy:!0},"class-name":[{pattern:/(\bclass\s+)\w+/,lookbehind:!0},{pattern:/(\b(?:attr|def)\s+)\w+(?=\s*::)/,lookbehind:!0}],keyword:/\b(?:attr|auto|break|case|catch|class|continue|def|default|else|finally|for|fun|global|if|return|switch|this|try|var|while)\b/,number:[s.languages.cpp.number,/\b(?:Infinity|NaN)\b/],operator:/>>=?|<<=?|\|\||&&|:[:=]?|--|\+\+|[=!<>+\-*/%|&^]=?|[?~]|`[^`\r\n]{1,4}`/}),s.languages.insertBefore("chaiscript","operator",{"parameter-type":{pattern:/([,(]\s*)\w+(?=\s+\w)/,lookbehind:!0,alias:"class-name"}}),s.languages.insertBefore("chaiscript","string",{"string-interpolation":{pattern:/(^|[^\\])"(?:[^"$\\]|\\[\s\S]|\$(?!\{)|\$\{(?:[^{}]|\{(?:[^{}]|\{[^{}]*\})*\})*\})*"/,lookbehind:!0,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^{}]*\})*\})*\}/,lookbehind:!0,inside:{"interpolation-expression":{pattern:/(^\$\{)[\s\S]+(?=\}$)/,lookbehind:!0,inside:s.languages.chaiscript},"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"}}},string:/[\s\S]+/}}})}cil.displayName="cil";cil.aliases=[];function cil(s){s.languages.cil={comment:/\/\/.*/,string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},directive:{pattern:/(^|\W)\.[a-z]+(?=\s)/,lookbehind:!0,alias:"class-name"},variable:/\[[\w\.]+\]/,keyword:/\b(?:abstract|ansi|assembly|auto|autochar|beforefieldinit|bool|bstr|byvalstr|catch|char|cil|class|currency|date|decimal|default|enum|error|explicit|extends|extern|famandassem|family|famorassem|final(?:ly)?|float32|float64|hidebysig|u?int(?:8|16|32|64)?|iant|idispatch|implements|import|initonly|instance|interface|iunknown|literal|lpstr|lpstruct|lptstr|lpwstr|managed|method|native(?:Type)?|nested|newslot|object(?:ref)?|pinvokeimpl|private|privatescope|public|reqsecobj|rtspecialname|runtime|sealed|sequential|serializable|specialname|static|string|struct|syschar|tbstr|unicode|unmanagedexp|unsigned|value(?:type)?|variant|virtual|void)\b/,function:/\b(?:(?:constrained|no|readonly|tail|unaligned|volatile)\.)?(?:conv\.(?:[iu][1248]?|ovf\.[iu][1248]?(?:\.un)?|r\.un|r4|r8)|ldc\.(?:i4(?:\.\d+|\.[mM]1|\.s)?|i8|r4|r8)|ldelem(?:\.[iu][1248]?|\.r[48]|\.ref|a)?|ldind\.(?:[iu][1248]?|r[48]|ref)|stelem\.?(?:i[1248]?|r[48]|ref)?|stind\.(?:i[1248]?|r[48]|ref)?|end(?:fault|filter|finally)|ldarg(?:\.[0-3s]|a(?:\.s)?)?|ldloc(?:\.\d+|\.s)?|sub(?:\.ovf(?:\.un)?)?|mul(?:\.ovf(?:\.un)?)?|add(?:\.ovf(?:\.un)?)?|stloc(?:\.[0-3s])?|refany(?:type|val)|blt(?:\.un)?(?:\.s)?|ble(?:\.un)?(?:\.s)?|bgt(?:\.un)?(?:\.s)?|bge(?:\.un)?(?:\.s)?|unbox(?:\.any)?|init(?:blk|obj)|call(?:i|virt)?|brfalse(?:\.s)?|bne\.un(?:\.s)?|ldloca(?:\.s)?|brzero(?:\.s)?|brtrue(?:\.s)?|brnull(?:\.s)?|brinst(?:\.s)?|starg(?:\.s)?|leave(?:\.s)?|shr(?:\.un)?|rem(?:\.un)?|div(?:\.un)?|clt(?:\.un)?|alignment|castclass|ldvirtftn|beq(?:\.s)?|ckfinite|ldsflda|ldtoken|localloc|mkrefany|rethrow|cgt\.un|arglist|switch|stsfld|sizeof|newobj|newarr|ldsfld|ldnull|ldflda|isinst|throw|stobj|stfld|ldstr|ldobj|ldlen|ldftn|ldfld|cpobj|cpblk|break|br\.s|xor|shl|ret|pop|not|nop|neg|jmp|dup|cgt|ceq|box|and|or|br)\b/,boolean:/\b(?:false|true)\b/,number:/\b-?(?:0x[0-9a-f]+|\d+)(?:\.[0-9a-f]+)?\b/i,punctuation:/[{}[\];(),:=]|IL_[0-9A-Za-z]+/}}cilkc.displayName="cilkc";cilkc.aliases=["cilk-c"];function cilkc(s){s.register(c$1),s.languages.cilkc=s.languages.insertBefore("c","function",{"parallel-keyword":{pattern:/\bcilk_(?:for|reducer|s(?:cope|pawn|ync))\b/,alias:"keyword"}}),s.languages["cilk-c"]=s.languages.cilkc}cilkcpp.displayName="cilkcpp";cilkcpp.aliases=["cilk","cilk-cpp"];function cilkcpp(s){s.register(cpp),s.languages.cilkcpp=s.languages.insertBefore("cpp","function",{"parallel-keyword":{pattern:/\bcilk_(?:for|reducer|s(?:cope|pawn|ync))\b/,alias:"keyword"}}),s.languages["cilk-cpp"]=s.languages.cilkcpp,s.languages.cilk=s.languages.cilkcpp}clojure.displayName="clojure";clojure.aliases=[];function clojure(s){s.languages.clojure={comment:{pattern:/;.*/,greedy:!0},string:{pattern:/"(?:[^"\\]|\\.)*"/,greedy:!0},char:/\\\w+/,symbol:{pattern:/(^|[\s()\[\]{},])::?[\w*+!?'<>=/.-]+/,lookbehind:!0},keyword:{pattern:/(\()(?:-|->|->>|\.|\.\.|\*|\/|\+|<|<=|=|==|>|>=|accessor|agent|agent-errors|aget|alength|all-ns|alter|and|append-child|apply|array-map|aset|aset-boolean|aset-byte|aset-char|aset-double|aset-float|aset-int|aset-long|aset-short|assert|assoc|await|await-for|bean|binding|bit-and|bit-not|bit-or|bit-shift-left|bit-shift-right|bit-xor|boolean|branch\?|butlast|byte|cast|char|children|class|clear-agent-errors|comment|commute|comp|comparator|complement|concat|cond|conj|cons|constantly|construct-proxy|contains\?|count|create-ns|create-struct|cycle|dec|declare|def|def-|definline|definterface|defmacro|defmethod|defmulti|defn|defn-|defonce|defproject|defprotocol|defrecord|defstruct|deftype|deref|difference|disj|dissoc|distinct|do|doall|doc|dorun|doseq|dosync|dotimes|doto|double|down|drop|drop-while|edit|end\?|ensure|eval|every\?|false\?|ffirst|file-seq|filter|find|find-doc|find-ns|find-var|first|float|flush|fn|fnseq|for|frest|gensym|get|get-proxy-class|hash-map|hash-set|identical\?|identity|if|if-let|if-not|import|in-ns|inc|index|insert-child|insert-left|insert-right|inspect-table|inspect-tree|instance\?|int|interleave|intersection|into|into-array|iterate|join|key|keys|keyword|keyword\?|last|lazy-cat|lazy-cons|left|lefts|let|line-seq|list|list\*|load|load-file|locking|long|loop|macroexpand|macroexpand-1|make-array|make-node|map|map-invert|map\?|mapcat|max|max-key|memfn|merge|merge-with|meta|min|min-key|monitor-enter|name|namespace|neg\?|new|newline|next|nil\?|node|not|not-any\?|not-every\?|not=|ns|ns-imports|ns-interns|ns-map|ns-name|ns-publics|ns-refers|ns-resolve|ns-unmap|nth|nthrest|or|parse|partial|path|peek|pop|pos\?|pr|pr-str|print|print-str|println|println-str|prn|prn-str|project|proxy|proxy-mappings|quot|quote|rand|rand-int|range|re-find|re-groups|re-matcher|re-matches|re-pattern|re-seq|read|read-line|recur|reduce|ref|ref-set|refer|rem|remove|remove-method|remove-ns|rename|rename-keys|repeat|replace|replicate|resolve|rest|resultset-seq|reverse|rfirst|right|rights|root|rrest|rseq|second|select|select-keys|send|send-off|seq|seq-zip|seq\?|set|set!|short|slurp|some|sort|sort-by|sorted-map|sorted-map-by|sorted-set|special-symbol\?|split-at|split-with|str|string\?|struct|struct-map|subs|subvec|symbol|symbol\?|sync|take|take-nth|take-while|test|throw|time|to-array|to-array-2d|tree-seq|true\?|try|union|up|update-proxy|val|vals|var|var-get|var-set|var\?|vector|vector-zip|vector\?|when|when-first|when-let|when-not|with-local-vars|with-meta|with-open|with-out-str|xml-seq|xml-zip|zero\?|zipmap|zipper)(?=[\s)]|$)/,lookbehind:!0},boolean:/\b(?:false|nil|true)\b/,number:{pattern:/(^|[^\w$@])(?:\d+(?:[/.]\d+)?(?:e[+-]?\d+)?|0x[a-f0-9]+|[1-9]\d?r[a-z0-9]+)[lmn]?(?![\w$@])/i,lookbehind:!0},function:{pattern:/((?:^|[^'])\()[\w*+!?'<>=/.-]+(?=[\s)]|$)/,lookbehind:!0},operator:/[#@^`~]/,punctuation:/[{}\[\](),]/}}cmake.displayName="cmake";cmake.aliases=[];function cmake(s){s.languages.cmake={comment:/#.*/,string:{pattern:/"(?:[^\\"]|\\.)*"/,greedy:!0,inside:{interpolation:{pattern:/\$\{(?:[^{}$]|\$\{[^{}$]*\})*\}/,inside:{punctuation:/\$\{|\}/,variable:/\w+/}}}},variable:/\b(?:CMAKE_\w+|\w+_(?:(?:BINARY|SOURCE)_DIR|DESCRIPTION|HOMEPAGE_URL|ROOT|VERSION(?:_MAJOR|_MINOR|_PATCH|_TWEAK)?)|(?:ANDROID|APPLE|BORLAND|BUILD_SHARED_LIBS|CACHE|CPACK_(?:ABSOLUTE_DESTINATION_FILES|COMPONENT_INCLUDE_TOPLEVEL_DIRECTORY|ERROR_ON_ABSOLUTE_INSTALL_DESTINATION|INCLUDE_TOPLEVEL_DIRECTORY|INSTALL_DEFAULT_DIRECTORY_PERMISSIONS|INSTALL_SCRIPT|PACKAGING_INSTALL_PREFIX|SET_DESTDIR|WARN_ON_ABSOLUTE_INSTALL_DESTINATION)|CTEST_(?:BINARY_DIRECTORY|BUILD_COMMAND|BUILD_NAME|BZR_COMMAND|BZR_UPDATE_OPTIONS|CHANGE_ID|CHECKOUT_COMMAND|CONFIGURATION_TYPE|CONFIGURE_COMMAND|COVERAGE_COMMAND|COVERAGE_EXTRA_FLAGS|CURL_OPTIONS|CUSTOM_(?:COVERAGE_EXCLUDE|ERROR_EXCEPTION|ERROR_MATCH|ERROR_POST_CONTEXT|ERROR_PRE_CONTEXT|MAXIMUM_FAILED_TEST_OUTPUT_SIZE|MAXIMUM_NUMBER_OF_(?:ERRORS|WARNINGS)|MAXIMUM_PASSED_TEST_OUTPUT_SIZE|MEMCHECK_IGNORE|POST_MEMCHECK|POST_TEST|PRE_MEMCHECK|PRE_TEST|TESTS_IGNORE|WARNING_EXCEPTION|WARNING_MATCH)|CVS_CHECKOUT|CVS_COMMAND|CVS_UPDATE_OPTIONS|DROP_LOCATION|DROP_METHOD|DROP_SITE|DROP_SITE_CDASH|DROP_SITE_PASSWORD|DROP_SITE_USER|EXTRA_COVERAGE_GLOB|GIT_COMMAND|GIT_INIT_SUBMODULES|GIT_UPDATE_CUSTOM|GIT_UPDATE_OPTIONS|HG_COMMAND|HG_UPDATE_OPTIONS|LABELS_FOR_SUBPROJECTS|MEMORYCHECK_(?:COMMAND|COMMAND_OPTIONS|SANITIZER_OPTIONS|SUPPRESSIONS_FILE|TYPE)|NIGHTLY_START_TIME|P4_CLIENT|P4_COMMAND|P4_OPTIONS|P4_UPDATE_OPTIONS|RUN_CURRENT_SCRIPT|SCP_COMMAND|SITE|SOURCE_DIRECTORY|SUBMIT_URL|SVN_COMMAND|SVN_OPTIONS|SVN_UPDATE_OPTIONS|TEST_LOAD|TEST_TIMEOUT|TRIGGER_SITE|UPDATE_COMMAND|UPDATE_OPTIONS|UPDATE_VERSION_ONLY|USE_LAUNCHERS)|CYGWIN|ENV|EXECUTABLE_OUTPUT_PATH|GHS-MULTI|IOS|LIBRARY_OUTPUT_PATH|MINGW|MSVC(?:10|11|12|14|60|70|71|80|90|_IDE|_TOOLSET_VERSION|_VERSION)?|MSYS|PROJECT_NAME|UNIX|WIN32|WINCE|WINDOWS_PHONE|WINDOWS_STORE|XCODE))\b/,property:/\b(?:cxx_\w+|(?:ARCHIVE_OUTPUT_(?:DIRECTORY|NAME)|COMPILE_DEFINITIONS|COMPILE_PDB_NAME|COMPILE_PDB_OUTPUT_DIRECTORY|EXCLUDE_FROM_DEFAULT_BUILD|IMPORTED_(?:IMPLIB|LIBNAME|LINK_DEPENDENT_LIBRARIES|LINK_INTERFACE_LANGUAGES|LINK_INTERFACE_LIBRARIES|LINK_INTERFACE_MULTIPLICITY|LOCATION|NO_SONAME|OBJECTS|SONAME)|INTERPROCEDURAL_OPTIMIZATION|LIBRARY_OUTPUT_DIRECTORY|LIBRARY_OUTPUT_NAME|LINK_FLAGS|LINK_INTERFACE_LIBRARIES|LINK_INTERFACE_MULTIPLICITY|LOCATION|MAP_IMPORTED_CONFIG|OSX_ARCHITECTURES|OUTPUT_NAME|PDB_NAME|PDB_OUTPUT_DIRECTORY|RUNTIME_OUTPUT_DIRECTORY|RUNTIME_OUTPUT_NAME|STATIC_LIBRARY_FLAGS|VS_CSHARP|VS_DOTNET_REFERENCEPROP|VS_DOTNET_REFERENCE|VS_GLOBAL_SECTION_POST|VS_GLOBAL_SECTION_PRE|VS_GLOBAL|XCODE_ATTRIBUTE)_\w+|\w+_(?:CLANG_TIDY|COMPILER_LAUNCHER|CPPCHECK|CPPLINT|INCLUDE_WHAT_YOU_USE|OUTPUT_NAME|POSTFIX|VISIBILITY_PRESET)|ABSTRACT|ADDITIONAL_MAKE_CLEAN_FILES|ADVANCED|ALIASED_TARGET|ALLOW_DUPLICATE_CUSTOM_TARGETS|ANDROID_(?:ANT_ADDITIONAL_OPTIONS|API|API_MIN|ARCH|ASSETS_DIRECTORIES|GUI|JAR_DEPENDENCIES|NATIVE_LIB_DEPENDENCIES|NATIVE_LIB_DIRECTORIES|PROCESS_MAX|PROGUARD|PROGUARD_CONFIG_PATH|SECURE_PROPS_PATH|SKIP_ANT_STEP|STL_TYPE)|ARCHIVE_OUTPUT_DIRECTORY|ATTACHED_FILES|ATTACHED_FILES_ON_FAIL|AUTOGEN_(?:BUILD_DIR|ORIGIN_DEPENDS|PARALLEL|SOURCE_GROUP|TARGETS_FOLDER|TARGET_DEPENDS)|AUTOMOC|AUTOMOC_(?:COMPILER_PREDEFINES|DEPEND_FILTERS|EXECUTABLE|MACRO_NAMES|MOC_OPTIONS|SOURCE_GROUP|TARGETS_FOLDER)|AUTORCC|AUTORCC_EXECUTABLE|AUTORCC_OPTIONS|AUTORCC_SOURCE_GROUP|AUTOUIC|AUTOUIC_EXECUTABLE|AUTOUIC_OPTIONS|AUTOUIC_SEARCH_PATHS|BINARY_DIR|BUILDSYSTEM_TARGETS|BUILD_RPATH|BUILD_RPATH_USE_ORIGIN|BUILD_WITH_INSTALL_NAME_DIR|BUILD_WITH_INSTALL_RPATH|BUNDLE|BUNDLE_EXTENSION|CACHE_VARIABLES|CLEAN_NO_CUSTOM|COMMON_LANGUAGE_RUNTIME|COMPATIBLE_INTERFACE_(?:BOOL|NUMBER_MAX|NUMBER_MIN|STRING)|COMPILE_(?:DEFINITIONS|FEATURES|FLAGS|OPTIONS|PDB_NAME|PDB_OUTPUT_DIRECTORY)|COST|CPACK_DESKTOP_SHORTCUTS|CPACK_NEVER_OVERWRITE|CPACK_PERMANENT|CPACK_STARTUP_SHORTCUTS|CPACK_START_MENU_SHORTCUTS|CPACK_WIX_ACL|CROSSCOMPILING_EMULATOR|CUDA_EXTENSIONS|CUDA_PTX_COMPILATION|CUDA_RESOLVE_DEVICE_SYMBOLS|CUDA_SEPARABLE_COMPILATION|CUDA_STANDARD|CUDA_STANDARD_REQUIRED|CXX_EXTENSIONS|CXX_STANDARD|CXX_STANDARD_REQUIRED|C_EXTENSIONS|C_STANDARD|C_STANDARD_REQUIRED|DEBUG_CONFIGURATIONS|DEFINE_SYMBOL|DEFINITIONS|DEPENDS|DEPLOYMENT_ADDITIONAL_FILES|DEPLOYMENT_REMOTE_DIRECTORY|DISABLED|DISABLED_FEATURES|ECLIPSE_EXTRA_CPROJECT_CONTENTS|ECLIPSE_EXTRA_NATURES|ENABLED_FEATURES|ENABLED_LANGUAGES|ENABLE_EXPORTS|ENVIRONMENT|EXCLUDE_FROM_ALL|EXCLUDE_FROM_DEFAULT_BUILD|EXPORT_NAME|EXPORT_PROPERTIES|EXTERNAL_OBJECT|EchoString|FAIL_REGULAR_EXPRESSION|FIND_LIBRARY_USE_LIB32_PATHS|FIND_LIBRARY_USE_LIB64_PATHS|FIND_LIBRARY_USE_LIBX32_PATHS|FIND_LIBRARY_USE_OPENBSD_VERSIONING|FIXTURES_CLEANUP|FIXTURES_REQUIRED|FIXTURES_SETUP|FOLDER|FRAMEWORK|Fortran_FORMAT|Fortran_MODULE_DIRECTORY|GENERATED|GENERATOR_FILE_NAME|GENERATOR_IS_MULTI_CONFIG|GHS_INTEGRITY_APP|GHS_NO_SOURCE_GROUP_FILE|GLOBAL_DEPENDS_DEBUG_MODE|GLOBAL_DEPENDS_NO_CYCLES|GNUtoMS|HAS_CXX|HEADER_FILE_ONLY|HELPSTRING|IMPLICIT_DEPENDS_INCLUDE_TRANSFORM|IMPORTED|IMPORTED_(?:COMMON_LANGUAGE_RUNTIME|CONFIGURATIONS|GLOBAL|IMPLIB|LIBNAME|LINK_DEPENDENT_LIBRARIES|LINK_INTERFACE_(?:LANGUAGES|LIBRARIES|MULTIPLICITY)|LOCATION|NO_SONAME|OBJECTS|SONAME)|IMPORT_PREFIX|IMPORT_SUFFIX|INCLUDE_DIRECTORIES|INCLUDE_REGULAR_EXPRESSION|INSTALL_NAME_DIR|INSTALL_RPATH|INSTALL_RPATH_USE_LINK_PATH|INTERFACE_(?:AUTOUIC_OPTIONS|COMPILE_DEFINITIONS|COMPILE_FEATURES|COMPILE_OPTIONS|INCLUDE_DIRECTORIES|LINK_DEPENDS|LINK_DIRECTORIES|LINK_LIBRARIES|LINK_OPTIONS|POSITION_INDEPENDENT_CODE|SOURCES|SYSTEM_INCLUDE_DIRECTORIES)|INTERPROCEDURAL_OPTIMIZATION|IN_TRY_COMPILE|IOS_INSTALL_COMBINED|JOB_POOLS|JOB_POOL_COMPILE|JOB_POOL_LINK|KEEP_EXTENSION|LABELS|LANGUAGE|LIBRARY_OUTPUT_DIRECTORY|LINKER_LANGUAGE|LINK_(?:DEPENDS|DEPENDS_NO_SHARED|DIRECTORIES|FLAGS|INTERFACE_LIBRARIES|INTERFACE_MULTIPLICITY|LIBRARIES|OPTIONS|SEARCH_END_STATIC|SEARCH_START_STATIC|WHAT_YOU_USE)|LISTFILE_STACK|LOCATION|MACOSX_BUNDLE|MACOSX_BUNDLE_INFO_PLIST|MACOSX_FRAMEWORK_INFO_PLIST|MACOSX_PACKAGE_LOCATION|MACOSX_RPATH|MACROS|MANUALLY_ADDED_DEPENDENCIES|MEASUREMENT|MODIFIED|NAME|NO_SONAME|NO_SYSTEM_FROM_IMPORTED|OBJECT_DEPENDS|OBJECT_OUTPUTS|OSX_ARCHITECTURES|OUTPUT_NAME|PACKAGES_FOUND|PACKAGES_NOT_FOUND|PARENT_DIRECTORY|PASS_REGULAR_EXPRESSION|PDB_NAME|PDB_OUTPUT_DIRECTORY|POSITION_INDEPENDENT_CODE|POST_INSTALL_SCRIPT|PREDEFINED_TARGETS_FOLDER|PREFIX|PRE_INSTALL_SCRIPT|PRIVATE_HEADER|PROCESSORS|PROCESSOR_AFFINITY|PROJECT_LABEL|PUBLIC_HEADER|REPORT_UNDEFINED_PROPERTIES|REQUIRED_FILES|RESOURCE|RESOURCE_LOCK|RULE_LAUNCH_COMPILE|RULE_LAUNCH_CUSTOM|RULE_LAUNCH_LINK|RULE_MESSAGES|RUNTIME_OUTPUT_DIRECTORY|RUN_SERIAL|SKIP_AUTOGEN|SKIP_AUTOMOC|SKIP_AUTORCC|SKIP_AUTOUIC|SKIP_BUILD_RPATH|SKIP_RETURN_CODE|SOURCES|SOURCE_DIR|SOVERSION|STATIC_LIBRARY_FLAGS|STATIC_LIBRARY_OPTIONS|STRINGS|SUBDIRECTORIES|SUFFIX|SYMBOLIC|TARGET_ARCHIVES_MAY_BE_SHARED_LIBS|TARGET_MESSAGES|TARGET_SUPPORTS_SHARED_LIBS|TESTS|TEST_INCLUDE_FILE|TEST_INCLUDE_FILES|TIMEOUT|TIMEOUT_AFTER_MATCH|TYPE|USE_FOLDERS|VALUE|VARIABLES|VERSION|VISIBILITY_INLINES_HIDDEN|VS_(?:CONFIGURATION_TYPE|COPY_TO_OUT_DIR|DEBUGGER_(?:COMMAND|COMMAND_ARGUMENTS|ENVIRONMENT|WORKING_DIRECTORY)|DEPLOYMENT_CONTENT|DEPLOYMENT_LOCATION|DOTNET_REFERENCES|DOTNET_REFERENCES_COPY_LOCAL|INCLUDE_IN_VSIX|IOT_STARTUP_TASK|KEYWORD|RESOURCE_GENERATOR|SCC_AUXPATH|SCC_LOCALPATH|SCC_PROJECTNAME|SCC_PROVIDER|SDK_REFERENCES|SHADER_(?:DISABLE_OPTIMIZATIONS|ENABLE_DEBUG|ENTRYPOINT|FLAGS|MODEL|OBJECT_FILE_NAME|OUTPUT_HEADER_FILE|TYPE|VARIABLE_NAME)|STARTUP_PROJECT|TOOL_OVERRIDE|USER_PROPS|WINRT_COMPONENT|WINRT_EXTENSIONS|WINRT_REFERENCES|XAML_TYPE)|WILL_FAIL|WIN32_EXECUTABLE|WINDOWS_EXPORT_ALL_SYMBOLS|WORKING_DIRECTORY|WRAP_EXCLUDE|XCODE_(?:EMIT_EFFECTIVE_PLATFORM_NAME|EXPLICIT_FILE_TYPE|FILE_ATTRIBUTES|LAST_KNOWN_FILE_TYPE|PRODUCT_TYPE|SCHEME_(?:ADDRESS_SANITIZER|ADDRESS_SANITIZER_USE_AFTER_RETURN|ARGUMENTS|DISABLE_MAIN_THREAD_CHECKER|DYNAMIC_LIBRARY_LOADS|DYNAMIC_LINKER_API_USAGE|ENVIRONMENT|EXECUTABLE|GUARD_MALLOC|MAIN_THREAD_CHECKER_STOP|MALLOC_GUARD_EDGES|MALLOC_SCRIBBLE|MALLOC_STACK|THREAD_SANITIZER(?:_STOP)?|UNDEFINED_BEHAVIOUR_SANITIZER(?:_STOP)?|ZOMBIE_OBJECTS))|XCTEST)\b/,keyword:/\b(?:add_compile_definitions|add_compile_options|add_custom_command|add_custom_target|add_definitions|add_dependencies|add_executable|add_library|add_link_options|add_subdirectory|add_test|aux_source_directory|break|build_command|build_name|cmake_host_system_information|cmake_minimum_required|cmake_parse_arguments|cmake_policy|configure_file|continue|create_test_sourcelist|ctest_build|ctest_configure|ctest_coverage|ctest_empty_binary_directory|ctest_memcheck|ctest_read_custom_files|ctest_run_script|ctest_sleep|ctest_start|ctest_submit|ctest_test|ctest_update|ctest_upload|define_property|else|elseif|enable_language|enable_testing|endforeach|endfunction|endif|endmacro|endwhile|exec_program|execute_process|export|export_library_dependencies|file|find_file|find_library|find_package|find_path|find_program|fltk_wrap_ui|foreach|function|get_cmake_property|get_directory_property|get_filename_component|get_property|get_source_file_property|get_target_property|get_test_property|if|include|include_directories|include_external_msproject|include_guard|include_regular_expression|install|install_files|install_programs|install_targets|link_directories|link_libraries|list|load_cache|load_command|macro|make_directory|mark_as_advanced|math|message|option|output_required_files|project|qt_wrap_cpp|qt_wrap_ui|remove|remove_definitions|return|separate_arguments|set|set_directory_properties|set_property|set_source_files_properties|set_target_properties|set_tests_properties|site_name|source_group|string|subdir_depends|subdirs|target_compile_definitions|target_compile_features|target_compile_options|target_include_directories|target_link_directories|target_link_libraries|target_link_options|target_sources|try_compile|try_run|unset|use_mangled_mesa|utility_source|variable_requires|variable_watch|while|write_file)(?=\s*\()\b/,boolean:/\b(?:FALSE|OFF|ON|TRUE)\b/,namespace:/\b(?:INTERFACE|PRIVATE|PROPERTIES|PUBLIC|SHARED|STATIC|TARGET_OBJECTS)\b/,operator:/\b(?:AND|DEFINED|EQUAL|GREATER|LESS|MATCHES|NOT|OR|STREQUAL|STRGREATER|STRLESS|VERSION_EQUAL|VERSION_GREATER|VERSION_LESS)\b/,inserted:{pattern:/\b\w+::\w+\b/,alias:"class-name"},number:/\b\d+(?:\.\d+)*\b/,function:/\b[a-z_]\w*(?=\s*\()\b/i,punctuation:/[()>}]|\$[<{]/}}cobol.displayName="cobol";cobol.aliases=[];function cobol(s){s.languages.cobol={comment:{pattern:/\*>.*|(^[ \t]*)\*.*/m,lookbehind:!0,greedy:!0},string:{pattern:/[xzgn]?(?:"(?:[^\r\n"]|"")*"(?!")|'(?:[^\r\n']|'')*'(?!'))/i,greedy:!0},level:{pattern:/(^[ \t]*)\d+\b/m,lookbehind:!0,greedy:!0,alias:"number"},"class-name":{pattern:/(\bpic(?:ture)?\s+)(?:(?:[-\w$/,:*+<>]|\.(?!\s|$))(?:\(\d+\))?)+/i,lookbehind:!0,inside:{number:{pattern:/(\()\d+/,lookbehind:!0},punctuation:/[()]/}},keyword:{pattern:/(^|[^\w-])(?:ABORT|ACCEPT|ACCESS|ADD|ADDRESS|ADVANCING|AFTER|ALIGNED|ALL|ALPHABET|ALPHABETIC|ALPHABETIC-LOWER|ALPHABETIC-UPPER|ALPHANUMERIC|ALPHANUMERIC-EDITED|ALSO|ALTER|ALTERNATE|ANY|ARE|AREA|AREAS|AS|ASCENDING|ASCII|ASSIGN|ASSOCIATED-DATA|ASSOCIATED-DATA-LENGTH|AT|ATTRIBUTE|AUTHOR|AUTO|AUTO-SKIP|BACKGROUND-COLOR|BACKGROUND-COLOUR|BASIS|BEEP|BEFORE|BEGINNING|BELL|BINARY|BIT|BLANK|BLINK|BLOCK|BOTTOM|BOUNDS|BY|BYFUNCTION|BYTITLE|CALL|CANCEL|CAPABLE|CCSVERSION|CD|CF|CH|CHAINING|CHANGED|CHANNEL|CHARACTER|CHARACTERS|CLASS|CLASS-ID|CLOCK-UNITS|CLOSE|CLOSE-DISPOSITION|COBOL|CODE|CODE-SET|COL|COLLATING|COLUMN|COM-REG|COMMA|COMMITMENT|COMMON|COMMUNICATION|COMP|COMP-1|COMP-2|COMP-3|COMP-4|COMP-5|COMPUTATIONAL|COMPUTATIONAL-1|COMPUTATIONAL-2|COMPUTATIONAL-3|COMPUTATIONAL-4|COMPUTATIONAL-5|COMPUTE|CONFIGURATION|CONTAINS|CONTENT|CONTINUE|CONTROL|CONTROL-POINT|CONTROLS|CONVENTION|CONVERTING|COPY|CORR|CORRESPONDING|COUNT|CRUNCH|CURRENCY|CURSOR|DATA|DATA-BASE|DATE|DATE-COMPILED|DATE-WRITTEN|DAY|DAY-OF-WEEK|DBCS|DE|DEBUG-CONTENTS|DEBUG-ITEM|DEBUG-LINE|DEBUG-NAME|DEBUG-SUB-1|DEBUG-SUB-2|DEBUG-SUB-3|DEBUGGING|DECIMAL-POINT|DECLARATIVES|DEFAULT|DEFAULT-DISPLAY|DEFINITION|DELETE|DELIMITED|DELIMITER|DEPENDING|DESCENDING|DESTINATION|DETAIL|DFHRESP|DFHVALUE|DISABLE|DISK|DISPLAY|DISPLAY-1|DIVIDE|DIVISION|DONTCARE|DOUBLE|DOWN|DUPLICATES|DYNAMIC|EBCDIC|EGCS|EGI|ELSE|EMI|EMPTY-CHECK|ENABLE|END|END-ACCEPT|END-ADD|END-CALL|END-COMPUTE|END-DELETE|END-DIVIDE|END-EVALUATE|END-IF|END-MULTIPLY|END-OF-PAGE|END-PERFORM|END-READ|END-RECEIVE|END-RETURN|END-REWRITE|END-SEARCH|END-START|END-STRING|END-SUBTRACT|END-UNSTRING|END-WRITE|ENDING|ENTER|ENTRY|ENTRY-PROCEDURE|ENVIRONMENT|EOL|EOP|EOS|ERASE|ERROR|ESCAPE|ESI|EVALUATE|EVENT|EVERY|EXCEPTION|EXCLUSIVE|EXHIBIT|EXIT|EXPORT|EXTEND|EXTENDED|EXTERNAL|FD|FILE|FILE-CONTROL|FILLER|FINAL|FIRST|FOOTING|FOR|FOREGROUND-COLOR|FOREGROUND-COLOUR|FROM|FULL|FUNCTION|FUNCTION-POINTER|FUNCTIONNAME|GENERATE|GIVING|GLOBAL|GO|GOBACK|GRID|GROUP|HEADING|HIGH-VALUE|HIGH-VALUES|HIGHLIGHT|I-O|I-O-CONTROL|ID|IDENTIFICATION|IF|IMPLICIT|IMPORT|IN|INDEX|INDEXED|INDICATE|INITIAL|INITIALIZE|INITIATE|INPUT|INPUT-OUTPUT|INSPECT|INSTALLATION|INTEGER|INTO|INVALID|INVOKE|IS|JUST|JUSTIFIED|KANJI|KEPT|KEY|KEYBOARD|LABEL|LANGUAGE|LAST|LB|LD|LEADING|LEFT|LEFTLINE|LENGTH|LENGTH-CHECK|LIBACCESS|LIBPARAMETER|LIBRARY|LIMIT|LIMITS|LINAGE|LINAGE-COUNTER|LINE|LINE-COUNTER|LINES|LINKAGE|LIST|LOCAL|LOCAL-STORAGE|LOCK|LONG-DATE|LONG-TIME|LOW-VALUE|LOW-VALUES|LOWER|LOWLIGHT|MEMORY|MERGE|MESSAGE|MMDDYYYY|MODE|MODULES|MORE-LABELS|MOVE|MULTIPLE|MULTIPLY|NAMED|NATIONAL|NATIONAL-EDITED|NATIVE|NEGATIVE|NETWORK|NEXT|NO|NO-ECHO|NULL|NULLS|NUMBER|NUMERIC|NUMERIC-DATE|NUMERIC-EDITED|NUMERIC-TIME|OBJECT-COMPUTER|OCCURS|ODT|OF|OFF|OMITTED|ON|OPEN|OPTIONAL|ORDER|ORDERLY|ORGANIZATION|OTHER|OUTPUT|OVERFLOW|OVERLINE|OWN|PACKED-DECIMAL|PADDING|PAGE|PAGE-COUNTER|PASSWORD|PERFORM|PF|PH|PIC|PICTURE|PLUS|POINTER|PORT|POSITION|POSITIVE|PRINTER|PRINTING|PRIVATE|PROCEDURE|PROCEDURE-POINTER|PROCEDURES|PROCEED|PROCESS|PROGRAM|PROGRAM-ID|PROGRAM-LIBRARY|PROMPT|PURGE|QUEUE|QUOTE|QUOTES|RANDOM|RD|READ|READER|REAL|RECEIVE|RECEIVED|RECORD|RECORDING|RECORDS|RECURSIVE|REDEFINES|REEL|REF|REFERENCE|REFERENCES|RELATIVE|RELEASE|REMAINDER|REMARKS|REMOTE|REMOVAL|REMOVE|RENAMES|REPLACE|REPLACING|REPORT|REPORTING|REPORTS|REQUIRED|RERUN|RESERVE|RESET|RETURN|RETURN-CODE|RETURNING|REVERSE-VIDEO|REVERSED|REWIND|REWRITE|RF|RH|RIGHT|ROUNDED|RUN|SAME|SAVE|SCREEN|SD|SEARCH|SECTION|SECURE|SECURITY|SEGMENT|SEGMENT-LIMIT|SELECT|SEND|SENTENCE|SEPARATE|SEQUENCE|SEQUENTIAL|SET|SHARED|SHAREDBYALL|SHAREDBYRUNUNIT|SHARING|SHIFT-IN|SHIFT-OUT|SHORT-DATE|SIGN|SIZE|SORT|SORT-CONTROL|SORT-CORE-SIZE|SORT-FILE-SIZE|SORT-MERGE|SORT-MESSAGE|SORT-MODE-SIZE|SORT-RETURN|SOURCE|SOURCE-COMPUTER|SPACE|SPACES|SPECIAL-NAMES|STANDARD|STANDARD-1|STANDARD-2|START|STATUS|STOP|STRING|SUB-QUEUE-1|SUB-QUEUE-2|SUB-QUEUE-3|SUBTRACT|SUM|SUPPRESS|SYMBOL|SYMBOLIC|SYNC|SYNCHRONIZED|TABLE|TALLY|TALLYING|TAPE|TASK|TERMINAL|TERMINATE|TEST|TEXT|THEN|THREAD|THREAD-LOCAL|THROUGH|THRU|TIME|TIMER|TIMES|TITLE|TO|TODAYS-DATE|TODAYS-NAME|TOP|TRAILING|TRUNCATED|TYPE|TYPEDEF|UNDERLINE|UNIT|UNSTRING|UNTIL|UP|UPON|USAGE|USE|USING|VALUE|VALUES|VARYING|VIRTUAL|WAIT|WHEN|WHEN-COMPILED|WITH|WORDS|WORKING-STORAGE|WRITE|YEAR|YYYYDDD|YYYYMMDD|ZERO-FILL|ZEROES|ZEROS)(?![\w-])/i,lookbehind:!0},boolean:{pattern:/(^|[^\w-])(?:false|true)(?![\w-])/i,lookbehind:!0},number:{pattern:/(^|[^\w-])(?:[+-]?(?:(?:\d+(?:[.,]\d+)?|[.,]\d+)(?:e[+-]?\d+)?|zero))(?![\w-])/i,lookbehind:!0},operator:[/<>|[<>]=?|[=+*/&]/,{pattern:/(^|[^\w-])(?:-|and|equal|greater|less|not|or|than)(?![\w-])/i,lookbehind:!0}],punctuation:/[.:,()]/}}coffeescript.displayName="coffeescript";coffeescript.aliases=["coffee"];function coffeescript(s){s.register(javascript),(function(n){var u=/#(?!\{).+/,f={pattern:/#\{[^}]+\}/,alias:"variable"};n.languages.coffeescript=n.languages.extend("javascript",{comment:u,string:[{pattern:/'(?:\\[\s\S]|[^\\'])*'/,greedy:!0},{pattern:/"(?:\\[\s\S]|[^\\"])*"/,greedy:!0,inside:{interpolation:f}}],keyword:/\b(?:and|break|by|catch|class|continue|debugger|delete|do|each|else|extend|extends|false|finally|for|if|in|instanceof|is|isnt|let|loop|namespace|new|no|not|null|of|off|on|or|own|return|super|switch|then|this|throw|true|try|typeof|undefined|unless|until|when|while|window|with|yes|yield)\b/,"class-member":{pattern:/@(?!\d)\w+/,alias:"variable"}}),n.languages.insertBefore("coffeescript","comment",{"multiline-comment":{pattern:/###[\s\S]+?###/,alias:"comment"},"block-regex":{pattern:/\/{3}[\s\S]*?\/{3}/,alias:"regex",inside:{comment:u,interpolation:f}}}),n.languages.insertBefore("coffeescript","string",{"inline-javascript":{pattern:/`(?:\\[\s\S]|[^\\`])*`/,inside:{delimiter:{pattern:/^`|`$/,alias:"punctuation"},script:{pattern:/[\s\S]+/,alias:"language-javascript",inside:n.languages.javascript}}},"multiline-string":[{pattern:/'''[\s\S]*?'''/,greedy:!0,alias:"string"},{pattern:/"""[\s\S]*?"""/,greedy:!0,alias:"string",inside:{interpolation:f}}]}),n.languages.insertBefore("coffeescript","keyword",{property:/(?!\d)\w+(?=\s*:(?!:))/}),delete n.languages.coffeescript["template-string"],n.languages.coffee=n.languages.coffeescript})(s)}concurnas.displayName="concurnas";concurnas.aliases=["conc"];function concurnas(s){s.languages.concurnas={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?(?:\*\/|$)|\/\/.*)/,lookbehind:!0,greedy:!0},langext:{pattern:/\b\w+\s*\|\|[\s\S]+?\|\|/,greedy:!0,inside:{"class-name":/^\w+/,string:{pattern:/(^\s*\|\|)[\s\S]+(?=\|\|$)/,lookbehind:!0},punctuation:/\|\|/}},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/,lookbehind:!0},keyword:/\b(?:abstract|actor|also|annotation|assert|async|await|bool|boolean|break|byte|case|catch|changed|char|class|closed|constant|continue|def|default|del|double|elif|else|enum|every|extends|false|finally|float|for|from|global|gpudef|gpukernel|if|import|in|init|inject|int|lambda|local|long|loop|match|new|nodefault|null|of|onchange|open|out|override|package|parfor|parforsync|post|pre|private|protected|provide|provider|public|return|shared|short|single|size_t|sizeof|super|sync|this|throw|trait|trans|transient|true|try|typedef|unchecked|using|val|var|void|while|with)\b/,boolean:/\b(?:false|true)\b/,number:/\b0b[01][01_]*L?\b|\b0x(?:[\da-f_]*\.)?[\da-f_p+-]+\b|(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?\d[\d_]*)?[dfls]?/i,punctuation:/[{}[\];(),.:]/,operator:/<==|>==|=>|->|<-|<>|&==|&<>|\?:?|\.\?|\+\+|--|[-+*/=<>]=?|[!^~]|\b(?:and|as|band|bor|bxor|comp|is|isnot|mod|or)\b=?/,annotation:{pattern:/@(?:\w+:)?(?:\w+|\[[^\]]+\])?/,alias:"builtin"}},s.languages.insertBefore("concurnas","langext",{"regex-literal":{pattern:/\br("|')(?:\\.|(?!\1)[^\\\r\n])*\1/,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:s.languages.concurnas},regex:/[\s\S]+/}},"string-literal":{pattern:/(?:\B|\bs)("|')(?:\\.|(?!\1)[^\\\r\n])*\1/,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:s.languages.concurnas},string:/[\s\S]+/}}}),s.languages.conc=s.languages.concurnas}csp.displayName="csp";csp.aliases=[];function csp(s){(function(n){function u(f){return RegExp(/([ \t])/.source+"(?:"+f+")"+/(?=[\s;]|$)/.source,"i")}n.languages.csp={directive:{pattern:/(^|[\s;])(?:base-uri|block-all-mixed-content|(?:child|connect|default|font|frame|img|manifest|media|object|prefetch|script|style|worker)-src|disown-opener|form-action|frame-(?:ancestors|options)|input-protection(?:-(?:clip|selectors))?|navigate-to|plugin-types|policy-uri|referrer|reflected-xss|report-(?:to|uri)|require-sri-for|sandbox|(?:script|style)-src-(?:attr|elem)|upgrade-insecure-requests)(?=[\s;]|$)/i,lookbehind:!0,alias:"property"},scheme:{pattern:u(/[a-z][a-z0-9.+-]*:/.source),lookbehind:!0},none:{pattern:u(/'none'/.source),lookbehind:!0,alias:"keyword"},nonce:{pattern:u(/'nonce-[-+/\w=]+'/.source),lookbehind:!0,alias:"number"},hash:{pattern:u(/'sha(?:256|384|512)-[-+/\w=]+'/.source),lookbehind:!0,alias:"number"},host:{pattern:u(/[a-z][a-z0-9.+-]*:\/\/[^\s;,']*/.source+"|"+/\*[^\s;,']*/.source+"|"+/[a-z0-9-]+(?:\.[a-z0-9-]+)+(?::[\d*]+)?(?:\/[^\s;,']*)?/.source),lookbehind:!0,alias:"url",inside:{important:/\*/}},keyword:[{pattern:u(/'unsafe-[a-z-]+'/.source),lookbehind:!0,alias:"unsafe"},{pattern:u(/'[a-z-]+'/.source),lookbehind:!0,alias:"safe"}],punctuation:/;/}})(s)}cooklang.displayName="cooklang";cooklang.aliases=[];function cooklang(s){(function(n){var u=/(?:(?!\s)[\d$+<=a-zA-Z\x80-\uFFFF])+/.source,f=/[^{}@#]+/.source,y=/\{[^}#@]*\}/.source,S=f+y,A=/(?:h|hours|hrs|m|min|minutes)/.source,w={pattern:/\{[^{}]*\}/,inside:{amount:{pattern:/([\{|])[^{}|*%]+/,lookbehind:!0,alias:"number"},unit:{pattern:/(%)[^}]+/,lookbehind:!0,alias:"symbol"},"servings-scaler":{pattern:/\*/,alias:"operator"},"servings-alternative-separator":{pattern:/\|/,alias:"operator"},"unit-separator":{pattern:/(?:%|(\*)%)/,lookbehind:!0,alias:"operator"},punctuation:/[{}]/}};n.languages.cooklang={comment:{pattern:/\[-[\s\S]*?-\]|--.*/,greedy:!0},meta:{pattern:/>>.*:.*/,inside:{property:{pattern:/(>>\s*)[^\s:](?:[^:]*[^\s:])?/,lookbehind:!0}}},"cookware-group":{pattern:new RegExp("#(?:"+S+"|"+u+")"),inside:{cookware:{pattern:new RegExp("(^#)(?:"+f+")"),lookbehind:!0,alias:"variable"},"cookware-keyword":{pattern:/^#/,alias:"keyword"},"quantity-group":{pattern:new RegExp(/\{[^{}@#]*\}/),inside:{quantity:{pattern:new RegExp(/(^\{)/.source+f),lookbehind:!0,alias:"number"},punctuation:/[{}]/}}}},"ingredient-group":{pattern:new RegExp("@(?:"+S+"|"+u+")"),inside:{ingredient:{pattern:new RegExp("(^@)(?:"+f+")"),lookbehind:!0,alias:"variable"},"ingredient-keyword":{pattern:/^@/,alias:"keyword"},"amount-group":w}},"timer-group":{pattern:/~(?!\s)[^@#~{}]*\{[^{}]*\}/,inside:{timer:{pattern:/(^~)[^{]+/,lookbehind:!0,alias:"variable"},"duration-group":{pattern:/\{[^{}]*\}/,inside:{punctuation:/[{}]/,unit:{pattern:new RegExp(/(%\s*)/.source+A+/\b/.source),lookbehind:!0,alias:"symbol"},operator:/%/,duration:{pattern:/\d+/,alias:"number"}}},"timer-keyword":{pattern:/^~/,alias:"keyword"}}}}})(s)}coq.displayName="coq";coq.aliases=[];function coq(s){(function(n){for(var u=/\(\*(?:[^(*]|\((?!\*)|\*(?!\))|<self>)*\*\)/.source,f=0;f<2;f++)u=u.replace(/<self>/g,function(){return u});u=u.replace(/<self>/g,"[]"),n.languages.coq={comment:RegExp(u),string:{pattern:/"(?:[^"]|"")*"(?!")/,greedy:!0},attribute:[{pattern:RegExp(/#\[(?:[^\[\]("]|"(?:[^"]|"")*"(?!")|\((?!\*)|<comment>)*\]/.source.replace(/<comment>/g,function(){return u})),greedy:!0,alias:"attr-name",inside:{comment:RegExp(u),string:{pattern:/"(?:[^"]|"")*"(?!")/,greedy:!0},operator:/=/,punctuation:/^#\[|\]$|[,()]/}},{pattern:/\b(?:Cumulative|Global|Local|Monomorphic|NonCumulative|Polymorphic|Private|Program)\b/,alias:"attr-name"}],keyword:/\b(?:Abort|About|Add|Admit|Admitted|All|Arguments|As|Assumptions|Axiom|Axioms|Back|BackTo|Backtrace|BinOp|BinOpSpec|BinRel|Bind|Blacklist|Canonical|Case|Cd|Check|Class|Classes|Close|CoFixpoint|CoInductive|Coercion|Coercions|Collection|Combined|Compute|Conjecture|Conjectures|Constant|Constants|Constraint|Constructors|Context|Corollary|Create|CstOp|Custom|Cut|Debug|Declare|Defined|Definition|Delimit|Dependencies|Dependent|Derive|Diffs|Drop|Elimination|End|Entry|Equality|Eval|Example|Existential|Existentials|Existing|Export|Extern|Extraction|Fact|Fail|Field|File|Firstorder|Fixpoint|Flags|Focus|From|Funclass|Function|Functional|GC|Generalizable|Goal|Grab|Grammar|Graph|Guarded|Haskell|Heap|Hide|Hint|HintDb|Hints|Hypotheses|Hypothesis|IF|Identity|Immediate|Implicit|Implicits|Import|Include|Induction|Inductive|Infix|Info|Initial|InjTyp|Inline|Inspect|Instance|Instances|Intro|Intros|Inversion|Inversion_clear|JSON|Language|Left|Lemma|Let|Lia|Libraries|Library|Load|LoadPath|Locate|Ltac|Ltac2|ML|Match|Method|Minimality|Module|Modules|Morphism|Next|NoInline|Notation|Number|OCaml|Obligation|Obligations|Opaque|Open|Optimize|Parameter|Parameters|Parametric|Path|Paths|Prenex|Preterm|Primitive|Print|Profile|Projections|Proof|Prop|PropBinOp|PropOp|PropUOp|Property|Proposition|Pwd|Qed|Quit|Rec|Record|Recursive|Redirect|Reduction|Register|Relation|Remark|Remove|Require|Reserved|Reset|Resolve|Restart|Rewrite|Right|Ring|Rings|SProp|Saturate|Save|Scheme|Scope|Scopes|Search|SearchHead|SearchPattern|SearchRewrite|Section|Separate|Set|Setoid|Show|Signatures|Solve|Solver|Sort|Sortclass|Sorted|Spec|Step|Strategies|Strategy|String|Structure|SubClass|Subgraph|SuchThat|Tactic|Term|TestCompile|Theorem|Time|Timeout|To|Transparent|Type|Typeclasses|Types|Typing|UnOp|UnOpSpec|Undelimit|Undo|Unfocus|Unfocused|Unfold|Universe|Universes|Unshelve|Variable|Variables|Variant|Verbose|View|Visibility|Zify|_|apply|as|at|by|cofix|else|end|exists|exists2|fix|for|forall|fun|if|in|let|match|measure|move|removed|return|struct|then|using|wf|where|with)\b/,number:/\b(?:0x[a-f0-9][a-f0-9_]*(?:\.[a-f0-9_]+)?(?:p[+-]?\d[\d_]*)?|\d[\d_]*(?:\.[\d_]+)?(?:e[+-]?\d[\d_]*)?)\b/i,punct:{pattern:/@\{|\{\||\[=|:>/,alias:"punctuation"},operator:/\/\\|\\\/|\.{2,3}|:{1,2}=|\*\*|[-=]>|<(?:->?|[+:=>]|<:)|>(?:=|->)|\|[-|]?|[-!%&*+/<=>?@^~']/,punctuation:/\.\(|`\(|@\{|`\{|\{\||\[=|:>|[:.,;(){}\[\]]/}})(s)}ruby.displayName="ruby";ruby.aliases=["rb"];function ruby(s){s.register(clike),(function(n){n.languages.ruby=n.languages.extend("clike",{comment:{pattern:/#.*|^=begin\s[\s\S]*?^=end/m,greedy:!0},"class-name":{pattern:/(\b(?:class|module)\s+|\bcatch\s+\()[\w.\\]+|\b[A-Z_]\w*(?=\s*\.\s*new\b)/,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:BEGIN|END|alias|and|begin|break|case|class|def|define_method|defined|do|each|else|elsif|end|ensure|extend|for|if|in|include|module|new|next|nil|not|or|prepend|private|protected|public|raise|redo|require|rescue|retry|return|self|super|then|throw|undef|unless|until|when|while|yield)\b/,operator:/\.{2,3}|&\.|===|<?=>|[!=]?~|(?:&&|\|\||<<|>>|\*\*|[+\-*/%<>!^&|=])=?|[?:]/,punctuation:/[(){}[\].,;]/}),n.languages.insertBefore("ruby","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}});var u={pattern:/((?:^|[^\\])(?:\\{2})*)#\{(?:[^{}]|\{[^{}]*\})*\}/,lookbehind:!0,inside:{content:{pattern:/^(#\{)[\s\S]+(?=\}$)/,lookbehind:!0,inside:n.languages.ruby},delimiter:{pattern:/^#\{|\}$/,alias:"punctuation"}}};delete n.languages.ruby.function;var f="(?:"+[/([^a-zA-Z0-9\s{(\[<=])(?:(?!\1)[^\\]|\\[\s\S])*\1/.source,/\((?:[^()\\]|\\[\s\S]|\((?:[^()\\]|\\[\s\S])*\))*\)/.source,/\{(?:[^{}\\]|\\[\s\S]|\{(?:[^{}\\]|\\[\s\S])*\})*\}/.source,/\[(?:[^\[\]\\]|\\[\s\S]|\[(?:[^\[\]\\]|\\[\s\S])*\])*\]/.source,/<(?:[^<>\\]|\\[\s\S]|<(?:[^<>\\]|\\[\s\S])*>)*>/.source].join("|")+")",y=/(?:"(?:\\.|[^"\\\r\n])*"|(?:\b[a-zA-Z_]\w*|[^\s\0-\x7F]+)[?!]?|\$.)/.source;n.languages.insertBefore("ruby","keyword",{"regex-literal":[{pattern:RegExp(/%r/.source+f+/[egimnosux]{0,6}/.source),greedy:!0,inside:{interpolation:u,regex:/[\s\S]+/}},{pattern:/(^|[^/])\/(?!\/)(?:\[[^\r\n\]]+\]|\\.|[^[/\\\r\n])+\/[egimnosux]{0,6}(?=\s*(?:$|[\r\n,.;})#]))/,lookbehind:!0,greedy:!0,inside:{interpolation:u,regex:/[\s\S]+/}}],variable:/[@$]+[a-zA-Z_]\w*(?:[?!]|\b)/,symbol:[{pattern:RegExp(/(^|[^:]):/.source+y),lookbehind:!0,greedy:!0},{pattern:RegExp(/([\r\n{(,][ \t]*)/.source+y+/(?=:(?!:))/.source),lookbehind:!0,greedy:!0}],"method-definition":{pattern:/(\bdef\s+)\w+(?:\s*\.\s*\w+)?/,lookbehind:!0,inside:{function:/\b\w+$/,keyword:/^self\b/,"class-name":/^\w+/,punctuation:/\./}}}),n.languages.insertBefore("ruby","string",{"string-literal":[{pattern:RegExp(/%[qQiIwWs]?/.source+f),greedy:!0,inside:{interpolation:u,string:/[\s\S]+/}},{pattern:/("|')(?:#\{[^}]+\}|#(?!\{)|\\(?:\r\n|[\s\S])|(?!\1)[^\\#\r\n])*\1/,greedy:!0,inside:{interpolation:u,string:/[\s\S]+/}},{pattern:/<<[-~]?([a-z_]\w*)[\r\n](?:.*[\r\n])*?[\t ]*\1/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<[-~]?[a-z_]\w*|\b[a-z_]\w*$/i,inside:{symbol:/\b\w+/,punctuation:/^<<[-~]?/}},interpolation:u,string:/[\s\S]+/}},{pattern:/<<[-~]?'([a-z_]\w*)'[\r\n](?:.*[\r\n])*?[\t ]*\1/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<[-~]?'[a-z_]\w*'|\b[a-z_]\w*$/i,inside:{symbol:/\b\w+/,punctuation:/^<<[-~]?'|'$/}},string:/[\s\S]+/}}],"command-literal":[{pattern:RegExp(/%x/.source+f),greedy:!0,inside:{interpolation:u,command:{pattern:/[\s\S]+/,alias:"string"}}},{pattern:/`(?:#\{[^}]+\}|#(?!\{)|\\(?:\r\n|[\s\S])|[^\\`#\r\n])*`/,greedy:!0,inside:{interpolation:u,command:{pattern:/[\s\S]+/,alias:"string"}}}]}),delete n.languages.ruby.string,n.languages.insertBefore("ruby","number",{builtin:/\b(?:Array|Bignum|Binding|Class|Continuation|Dir|Exception|FalseClass|File|Fixnum|Float|Hash|IO|Integer|MatchData|Method|Module|NilClass|Numeric|Object|Proc|Range|Regexp|Stat|String|Struct|Symbol|TMS|Thread|ThreadGroup|Time|TrueClass)\b/,constant:/\b[A-Z][A-Z0-9_]*(?:[?!]|\b)/}),n.languages.rb=n.languages.ruby})(s)}crystal.displayName="crystal";crystal.aliases=[];function crystal(s){s.register(ruby),(function(n){n.languages.crystal=n.languages.extend("ruby",{keyword:[/\b(?:__DIR__|__END_LINE__|__FILE__|__LINE__|abstract|alias|annotation|as|asm|begin|break|case|class|def|do|else|elsif|end|ensure|enum|extend|for|fun|if|ifdef|include|instance_sizeof|lib|macro|module|next|of|out|pointerof|private|protected|ptr|require|rescue|return|select|self|sizeof|struct|super|then|type|typeof|undef|uninitialized|union|unless|until|when|while|with|yield)\b/,{pattern:/(\.\s*)(?:is_a|responds_to)\?/,lookbehind:!0}],number:/\b(?:0b[01_]*[01]|0o[0-7_]*[0-7]|0x[\da-fA-F_]*[\da-fA-F]|(?:\d(?:[\d_]*\d)?)(?:\.[\d_]*\d)?(?:[eE][+-]?[\d_]*\d)?)(?:_(?:[uif](?:8|16|32|64))?)?\b/,operator:[/->/,n.languages.ruby.operator],punctuation:/[(){}[\].,;\\]/}),n.languages.insertBefore("crystal","string-literal",{attribute:{pattern:/@\[.*?\]/,inside:{delimiter:{pattern:/^@\[|\]$/,alias:"punctuation"},attribute:{pattern:/^(\s*)\w+/,lookbehind:!0,alias:"class-name"},args:{pattern:/\S(?:[\s\S]*\S)?/,inside:n.languages.crystal}}},expansion:{pattern:/\{(?:\{.*?\}|%.*?%)\}/,inside:{content:{pattern:/^(\{.)[\s\S]+(?=.\}$)/,lookbehind:!0,inside:n.languages.crystal},delimiter:{pattern:/^\{[\{%]|[\}%]\}$/,alias:"operator"}}},char:{pattern:/'(?:[^\\\r\n]{1,2}|\\(?:.|u(?:[A-Fa-f0-9]{1,4}|\{[A-Fa-f0-9]{1,6}\})))'/,greedy:!0}})})(s)}cssExtras.displayName="css-extras";cssExtras.aliases=[];function cssExtras(s){s.register(css),(function(n){var u=/("|')(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,f;n.languages.css.selector={pattern:n.languages.css.selector.pattern,lookbehind:!0,inside:f={"pseudo-element":/:(?:after|before|first-letter|first-line|selection)|::[-\w]+/,"pseudo-class":/:[-\w]+/,class:/\.[-\w]+/,id:/#[-\w]+/,attribute:{pattern:RegExp(`\\[(?:[^[\\]"']|`+u.source+")*\\]"),greedy:!0,inside:{punctuation:/^\[|\]$/,"case-sensitivity":{pattern:/(\s)[si]$/i,lookbehind:!0,alias:"keyword"},namespace:{pattern:/^(\s*)(?:(?!\s)[-*\w\xA0-\uFFFF])*\|(?!=)/,lookbehind:!0,inside:{punctuation:/\|$/}},"attr-name":{pattern:/^(\s*)(?:(?!\s)[-\w\xA0-\uFFFF])+/,lookbehind:!0},"attr-value":[u,{pattern:/(=\s*)(?:(?!\s)[-\w\xA0-\uFFFF])+(?=\s*$)/,lookbehind:!0}],operator:/[|~*^$]?=/}},"n-th":[{pattern:/(\(\s*)[+-]?\d*[\dn](?:\s*[+-]\s*\d+)?(?=\s*\))/,lookbehind:!0,inside:{number:/[\dn]+/,operator:/[+-]/}},{pattern:/(\(\s*)(?:even|odd)(?=\s*\))/i,lookbehind:!0}],combinator:/>|\+|~|\|\|/,punctuation:/[(),]/}},n.languages.css.atrule.inside["selector-function-argument"].inside=f,n.languages.insertBefore("css","property",{variable:{pattern:/(^|[^-\w\xA0-\uFFFF])--(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*/i,lookbehind:!0}});var y={pattern:/(\b\d+)(?:%|[a-z]+(?![\w-]))/,lookbehind:!0},S={pattern:/(^|[^\w.-])-?(?:\d+(?:\.\d+)?|\.\d+)/,lookbehind:!0};n.languages.insertBefore("css","function",{operator:{pattern:/(\s)[+\-*\/](?=\s)/,lookbehind:!0},hexcode:{pattern:/\B#[\da-f]{3,8}\b/i,alias:"color"},color:[{pattern:/(^|[^\w-])(?:AliceBlue|AntiqueWhite|Aqua|Aquamarine|Azure|Beige|Bisque|Black|BlanchedAlmond|Blue|BlueViolet|Brown|BurlyWood|CadetBlue|Chartreuse|Chocolate|Coral|CornflowerBlue|Cornsilk|Crimson|Cyan|DarkBlue|DarkCyan|DarkGoldenRod|DarkGr[ae]y|DarkGreen|DarkKhaki|DarkMagenta|DarkOliveGreen|DarkOrange|DarkOrchid|DarkRed|DarkSalmon|DarkSeaGreen|DarkSlateBlue|DarkSlateGr[ae]y|DarkTurquoise|DarkViolet|DeepPink|DeepSkyBlue|DimGr[ae]y|DodgerBlue|FireBrick|FloralWhite|ForestGreen|Fuchsia|Gainsboro|GhostWhite|Gold|GoldenRod|Gr[ae]y|Green|GreenYellow|HoneyDew|HotPink|IndianRed|Indigo|Ivory|Khaki|Lavender|LavenderBlush|LawnGreen|LemonChiffon|LightBlue|LightCoral|LightCyan|LightGoldenRodYellow|LightGr[ae]y|LightGreen|LightPink|LightSalmon|LightSeaGreen|LightSkyBlue|LightSlateGr[ae]y|LightSteelBlue|LightYellow|Lime|LimeGreen|Linen|Magenta|Maroon|MediumAquaMarine|MediumBlue|MediumOrchid|MediumPurple|MediumSeaGreen|MediumSlateBlue|MediumSpringGreen|MediumTurquoise|MediumVioletRed|MidnightBlue|MintCream|MistyRose|Moccasin|NavajoWhite|Navy|OldLace|Olive|OliveDrab|Orange|OrangeRed|Orchid|PaleGoldenRod|PaleGreen|PaleTurquoise|PaleVioletRed|PapayaWhip|PeachPuff|Peru|Pink|Plum|PowderBlue|Purple|RebeccaPurple|Red|RosyBrown|RoyalBlue|SaddleBrown|Salmon|SandyBrown|SeaGreen|SeaShell|Sienna|Silver|SkyBlue|SlateBlue|SlateGr[ae]y|Snow|SpringGreen|SteelBlue|Tan|Teal|Thistle|Tomato|Transparent|Turquoise|Violet|Wheat|White|WhiteSmoke|Yellow|YellowGreen)(?![\w-])/i,lookbehind:!0},{pattern:/\b(?:hsl|rgb)\(\s*\d{1,3}\s*,\s*\d{1,3}%?\s*,\s*\d{1,3}%?\s*\)\B|\b(?:hsl|rgb)a\(\s*\d{1,3}\s*,\s*\d{1,3}%?\s*,\s*\d{1,3}%?\s*,\s*(?:0|0?\.\d+|1)\s*\)\B/i,inside:{unit:y,number:S,function:/[\w-]+(?=\()/,punctuation:/[(),]/}}],entity:/\\[\da-f]{1,8}/i,unit:y,number:S})})(s)}csv.displayName="csv";csv.aliases=[];function csv(s){s.languages.csv={value:/[^\r\n,"]+|"(?:[^"]|"")*"(?!")/,punctuation:/,/}}cue.displayName="cue";cue.aliases=[];function cue(s){(function(n){var u=/\\(?:(?!\2)|\2(?:[^()\r\n]|\([^()]*\)))/.source,f=/"""(?:[^\\"]|"(?!""\2)|<esc>)*"""/.source+"|"+/'''(?:[^\\']|'(?!''\2)|<esc>)*'''/.source+"|"+/"(?:[^\\\r\n"]|"(?!\2)|<esc>)*"/.source+"|"+/'(?:[^\\\r\n']|'(?!\2)|<esc>)*'/.source,y="(?:"+f.replace(/<esc>/g,u)+")";n.languages.cue={comment:{pattern:/\/\/.*/,greedy:!0},"string-literal":{pattern:RegExp(/(^|[^#"'\\])(#*)/.source+y+/(?!["'])\2/.source),lookbehind:!0,greedy:!0,inside:{escape:{pattern:/(?=[\s\S]*["'](#*)$)\\\1(?:U[a-fA-F0-9]{1,8}|u[a-fA-F0-9]{1,4}|x[a-fA-F0-9]{1,2}|\d{2,3}|[^(])/,greedy:!0,alias:"string"},interpolation:{pattern:/(?=[\s\S]*["'](#*)$)\\\1\([^()]*\)/,greedy:!0,inside:{punctuation:/^\\#*\(|\)$/,expression:{pattern:/[\s\S]+/,inside:null}}},string:/[\s\S]+/}},keyword:{pattern:/(^|[^\w$])(?:for|if|import|in|let|null|package)(?![\w$])/,lookbehind:!0},boolean:{pattern:/(^|[^\w$])(?:false|true)(?![\w$])/,lookbehind:!0},builtin:{pattern:/(^|[^\w$])(?:bool|bytes|float|float(?:32|64)|u?int(?:8|16|32|64|128)?|number|rune|string)(?![\w$])/,lookbehind:!0},attribute:{pattern:/@[\w$]+(?=\s*\()/,alias:"function"},function:{pattern:/(^|[^\w$])[a-z_$][\w$]*(?=\s*\()/i,lookbehind:!0},number:{pattern:/(^|[^\w$.])(?:0b[01]+(?:_[01]+)*|0o[0-7]+(?:_[0-7]+)*|0[xX][0-9A-Fa-f]+(?:_[0-9A-Fa-f]+)*|(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[eE][+-]?\d+(?:_\d+)*)?(?:[KMGTP]i?)?)(?![\w$])/,lookbehind:!0},operator:/\.{3}|_\|_|&&?|\|\|?|[=!]~|[<>=!]=?|[+\-*/?]/,punctuation:/[()[\]{},.:]/},n.languages.cue["string-literal"].inside.interpolation.inside.expression.inside=n.languages.cue})(s)}cypher.displayName="cypher";cypher.aliases=[];function cypher(s){s.languages.cypher={comment:/\/\/.*/,string:{pattern:/"(?:[^"\\\r\n]|\\.)*"|'(?:[^'\\\r\n]|\\.)*'/,greedy:!0},"class-name":{pattern:/(:\s*)(?:\w+|`(?:[^`\\\r\n])*`)(?=\s*[{):])/,lookbehind:!0,greedy:!0},relationship:{pattern:/(-\[\s*(?:\w+\s*|`(?:[^`\\\r\n])*`\s*)?:\s*|\|\s*:\s*)(?:\w+|`(?:[^`\\\r\n])*`)/,lookbehind:!0,greedy:!0,alias:"property"},identifier:{pattern:/`(?:[^`\\\r\n])*`/,greedy:!0},variable:/\$\w+/,keyword:/\b(?:ADD|ALL|AND|AS|ASC|ASCENDING|ASSERT|BY|CALL|CASE|COMMIT|CONSTRAINT|CONTAINS|CREATE|CSV|DELETE|DESC|DESCENDING|DETACH|DISTINCT|DO|DROP|ELSE|END|ENDS|EXISTS|FOR|FOREACH|IN|INDEX|IS|JOIN|KEY|LIMIT|LOAD|MANDATORY|MATCH|MERGE|NODE|NOT|OF|ON|OPTIONAL|OR|ORDER(?=\s+BY)|PERIODIC|REMOVE|REQUIRE|RETURN|SCALAR|SCAN|SET|SKIP|START|STARTS|THEN|UNION|UNIQUE|UNWIND|USING|WHEN|WHERE|WITH|XOR|YIELD)\b/i,function:/\b\w+\b(?=\s*\()/,boolean:/\b(?:false|null|true)\b/i,number:/\b(?:0x[\da-fA-F]+|\d+(?:\.\d+)?(?:[eE][+-]?\d+)?)\b/,operator:/:|<--?|--?>?|<>|=~?|[<>]=?|[+*/%^|]|\.\.\.?/,punctuation:/[()[\]{},;.]/}}d.displayName="d";d.aliases=[];function d(s){s.register(clike),s.languages.d=s.languages.extend("clike",{comment:[{pattern:/^\s*#!.+/,greedy:!0},{pattern:RegExp(/(^|[^\\])/.source+"(?:"+[/\/\+(?:\/\+(?:[^+]|\+(?!\/))*\+\/|(?!\/\+)[\s\S])*?\+\//.source,/\/\/.*/.source,/\/\*[\s\S]*?\*\//.source].join("|")+")"),lookbehind:!0,greedy:!0}],string:[{pattern:RegExp([/\b[rx]"(?:\\[\s\S]|[^\\"])*"[cwd]?/.source,/\bq"(?:\[[\s\S]*?\]|\([\s\S]*?\)|<[\s\S]*?>|\{[\s\S]*?\})"/.source,/\bq"((?!\d)\w+)$[\s\S]*?^\1"/.source,/\bq"(.)[\s\S]*?\2"/.source,/(["`])(?:\\[\s\S]|(?!\3)[^\\])*\3[cwd]?/.source].join("|"),"m"),greedy:!0},{pattern:/\bq\{(?:\{[^{}]*\}|[^{}])*\}/,greedy:!0,alias:"token-string"}],keyword:/\$|\b(?:__(?:(?:DATE|EOF|FILE|FUNCTION|LINE|MODULE|PRETTY_FUNCTION|TIMESTAMP|TIME|VENDOR|VERSION)__|gshared|parameters|traits|vector)|abstract|alias|align|asm|assert|auto|body|bool|break|byte|case|cast|catch|cdouble|cent|cfloat|char|class|const|continue|creal|dchar|debug|default|delegate|delete|deprecated|do|double|dstring|else|enum|export|extern|false|final|finally|float|for|foreach|foreach_reverse|function|goto|idouble|if|ifloat|immutable|import|inout|int|interface|invariant|ireal|lazy|long|macro|mixin|module|new|nothrow|null|out|override|package|pragma|private|protected|ptrdiff_t|public|pure|real|ref|return|scope|shared|short|size_t|static|string|struct|super|switch|synchronized|template|this|throw|true|try|typedef|typeid|typeof|ubyte|ucent|uint|ulong|union|unittest|ushort|version|void|volatile|wchar|while|with|wstring)\b/,number:[/\b0x\.?[a-f\d_]+(?:(?!\.\.)\.[a-f\d_]*)?(?:p[+-]?[a-f\d_]+)?[ulfi]{0,4}/i,{pattern:/((?:\.\.)?)(?:\b0b\.?|\b|\.)\d[\d_]*(?:(?!\.\.)\.[\d_]*)?(?:e[+-]?\d[\d_]*)?[ulfi]{0,4}/i,lookbehind:!0}],operator:/\|[|=]?|&[&=]?|\+[+=]?|-[-=]?|\.?\.\.|=[>=]?|!(?:i[ns]\b|<>?=?|>=?|=)?|\bi[ns]\b|(?:<[<>]?|>>?>?|\^\^|[*\/%^~])=?/}),s.languages.insertBefore("d","string",{char:/'(?:\\(?:\W|\w+)|[^\\])'/}),s.languages.insertBefore("d","keyword",{property:/\B@\w*/}),s.languages.insertBefore("d","function",{register:{pattern:/\b(?:[ABCD][LHX]|E?(?:BP|DI|SI|SP)|[BS]PL|[ECSDGF]S|CR[0234]|[DS]IL|DR[012367]|E[ABCD]X|X?MM[0-7]|R(?:1[0-5]|[89])[BWD]?|R[ABCD]X|R[BS]P|R[DS]I|TR[3-7]|XMM(?:1[0-5]|[89])|YMM(?:1[0-5]|\d))\b|\bST(?:\([0-7]\)|\b)/,alias:"variable"}})}dart.displayName="dart";dart.aliases=[];function dart(s){s.register(clike),(function(n){var u=[/\b(?:async|sync|yield)\*/,/\b(?:abstract|assert|async|await|break|case|catch|class|const|continue|covariant|default|deferred|do|dynamic|else|enum|export|extends|extension|external|factory|final|finally|for|get|hide|if|implements|import|in|interface|library|mixin|new|null|on|operator|part|rethrow|return|set|show|static|super|switch|sync|this|throw|try|typedef|var|void|while|with|yield)\b/],f=/(^|[^\w.])(?:[a-z]\w*\s*\.\s*)*(?:[A-Z]\w*\s*\.\s*)*/.source,y={pattern:RegExp(f+/[A-Z](?:[\d_A-Z]*[a-z]\w*)?\b/.source),lookbehind:!0,inside:{namespace:{pattern:/^[a-z]\w*(?:\s*\.\s*[a-z]\w*)*(?:\s*\.)?/,inside:{punctuation:/\./}}}};n.languages.dart=n.languages.extend("clike",{"class-name":[y,{pattern:RegExp(f+/[A-Z]\w*(?=\s+\w+\s*[;,=()])/.source),lookbehind:!0,inside:y.inside}],keyword:u,operator:/\bis!|\b(?:as|is)\b|\+\+|--|&&|\|\||<<=?|>>=?|~(?:\/=?)?|[+\-*\/%&^|=!<>]=?|\?/}),n.languages.insertBefore("dart","string",{"string-literal":{pattern:/r?(?:("""|''')[\s\S]*?\1|(["'])(?:\\.|(?!\2)[^\\\r\n])*\2(?!\2))/,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$(?:\w+|\{(?:[^{}]|\{[^{}]*\})*\})/,lookbehind:!0,inside:{punctuation:/^\$\{?|\}$/,expression:{pattern:/[\s\S]+/,inside:n.languages.dart}}},string:/[\s\S]+/}},string:void 0}),n.languages.insertBefore("dart","class-name",{metadata:{pattern:/@\w+/,alias:"function"}}),n.languages.insertBefore("dart","class-name",{generics:{pattern:/<(?:[\w\s,.&?]|<(?:[\w\s,.&?]|<(?:[\w\s,.&?]|<[\w\s,.&?]*>)*>)*>)*>/,inside:{"class-name":y,keyword:u,punctuation:/[<>(),.:]/,operator:/[?&|]/}}})})(s)}dataweave.displayName="dataweave";dataweave.aliases=[];function dataweave(s){(function(n){n.languages.dataweave={url:/\b[A-Za-z]+:\/\/[\w/:.?=&-]+|\burn:[\w:.?=&-]+/,property:{pattern:/(?:\b\w+#)?(?:"(?:\\.|[^\\"\r\n])*"|\b\w+)(?=\s*[:@])/,greedy:!0},string:{pattern:/(["'`])(?:\\[\s\S]|(?!\1)[^\\])*\1/,greedy:!0},"mime-type":/\b(?:application|audio|image|multipart|text|video)\/[\w+-]+/,date:{pattern:/\|[\w:+-]+\|/,greedy:!0},comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],regex:{pattern:/\/(?:[^\\\/\r\n]|\\[^\r\n])+\//,greedy:!0},keyword:/\b(?:and|as|at|case|do|else|fun|if|input|is|match|not|ns|null|or|output|type|unless|update|using|var)\b/,function:/\b[A-Z_]\w*(?=\s*\()/i,number:/-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,punctuation:/[{}[\];(),.:@]/,operator:/<<|>>|->|[<>~=]=?|!=|--?-?|\+\+?|!|\?/,boolean:/\b(?:false|true)\b/}})(s)}dax.displayName="dax";dax.aliases=[];function dax(s){s.languages.dax={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/).*)/,lookbehind:!0},"data-field":{pattern:/'(?:[^']|'')*'(?!')(?:\[[ \w\xA0-\uFFFF]+\])?|\w+\[[ \w\xA0-\uFFFF]+\]/,alias:"symbol"},measure:{pattern:/\[[ \w\xA0-\uFFFF]+\]/,alias:"constant"},string:{pattern:/"(?:[^"]|"")*"(?!")/,greedy:!0},function:/\b(?:ABS|ACOS|ACOSH|ACOT|ACOTH|ADDCOLUMNS|ADDMISSINGITEMS|ALL|ALLCROSSFILTERED|ALLEXCEPT|ALLNOBLANKROW|ALLSELECTED|AND|APPROXIMATEDISTINCTCOUNT|ASIN|ASINH|ATAN|ATANH|AVERAGE|AVERAGEA|AVERAGEX|BETA\.DIST|BETA\.INV|BLANK|CALCULATE|CALCULATETABLE|CALENDAR|CALENDARAUTO|CEILING|CHISQ\.DIST|CHISQ\.DIST\.RT|CHISQ\.INV|CHISQ\.INV\.RT|CLOSINGBALANCEMONTH|CLOSINGBALANCEQUARTER|CLOSINGBALANCEYEAR|COALESCE|COMBIN|COMBINA|COMBINEVALUES|CONCATENATE|CONCATENATEX|CONFIDENCE\.NORM|CONFIDENCE\.T|CONTAINS|CONTAINSROW|CONTAINSSTRING|CONTAINSSTRINGEXACT|CONVERT|COS|COSH|COT|COTH|COUNT|COUNTA|COUNTAX|COUNTBLANK|COUNTROWS|COUNTX|CROSSFILTER|CROSSJOIN|CURRENCY|CURRENTGROUP|CUSTOMDATA|DATATABLE|DATE|DATEADD|DATEDIFF|DATESBETWEEN|DATESINPERIOD|DATESMTD|DATESQTD|DATESYTD|DATEVALUE|DAY|DEGREES|DETAILROWS|DISTINCT|DISTINCTCOUNT|DISTINCTCOUNTNOBLANK|DIVIDE|EARLIER|EARLIEST|EDATE|ENDOFMONTH|ENDOFQUARTER|ENDOFYEAR|EOMONTH|ERROR|EVEN|EXACT|EXCEPT|EXP|EXPON\.DIST|FACT|FALSE|FILTER|FILTERS|FIND|FIRSTDATE|FIRSTNONBLANK|FIRSTNONBLANKVALUE|FIXED|FLOOR|FORMAT|GCD|GENERATE|GENERATEALL|GENERATESERIES|GEOMEAN|GEOMEANX|GROUPBY|HASONEFILTER|HASONEVALUE|HOUR|IF|IF\.EAGER|IFERROR|IGNORE|INT|INTERSECT|ISBLANK|ISCROSSFILTERED|ISEMPTY|ISERROR|ISEVEN|ISFILTERED|ISINSCOPE|ISLOGICAL|ISNONTEXT|ISNUMBER|ISO\.CEILING|ISODD|ISONORAFTER|ISSELECTEDMEASURE|ISSUBTOTAL|ISTEXT|KEEPFILTERS|KEYWORDMATCH|LASTDATE|LASTNONBLANK|LASTNONBLANKVALUE|LCM|LEFT|LEN|LN|LOG|LOG10|LOOKUPVALUE|LOWER|MAX|MAXA|MAXX|MEDIAN|MEDIANX|MID|MIN|MINA|MINUTE|MINX|MOD|MONTH|MROUND|NATURALINNERJOIN|NATURALLEFTOUTERJOIN|NEXTDAY|NEXTMONTH|NEXTQUARTER|NEXTYEAR|NONVISUAL|NORM\.DIST|NORM\.INV|NORM\.S\.DIST|NORM\.S\.INV|NOT|NOW|ODD|OPENINGBALANCEMONTH|OPENINGBALANCEQUARTER|OPENINGBALANCEYEAR|OR|PARALLELPERIOD|PATH|PATHCONTAINS|PATHITEM|PATHITEMREVERSE|PATHLENGTH|PERCENTILE\.EXC|PERCENTILE\.INC|PERCENTILEX\.EXC|PERCENTILEX\.INC|PERMUT|PI|POISSON\.DIST|POWER|PREVIOUSDAY|PREVIOUSMONTH|PREVIOUSQUARTER|PREVIOUSYEAR|PRODUCT|PRODUCTX|QUARTER|QUOTIENT|RADIANS|RAND|RANDBETWEEN|RANK\.EQ|RANKX|RELATED|RELATEDTABLE|REMOVEFILTERS|REPLACE|REPT|RIGHT|ROLLUP|ROLLUPADDISSUBTOTAL|ROLLUPGROUP|ROLLUPISSUBTOTAL|ROUND|ROUNDDOWN|ROUNDUP|ROW|SAMEPERIODLASTYEAR|SAMPLE|SEARCH|SECOND|SELECTCOLUMNS|SELECTEDMEASURE|SELECTEDMEASUREFORMATSTRING|SELECTEDMEASURENAME|SELECTEDVALUE|SIGN|SIN|SINH|SQRT|SQRTPI|STARTOFMONTH|STARTOFQUARTER|STARTOFYEAR|STDEV\.P|STDEV\.S|STDEVX\.P|STDEVX\.S|SUBSTITUTE|SUBSTITUTEWITHINDEX|SUM|SUMMARIZE|SUMMARIZECOLUMNS|SUMX|SWITCH|T\.DIST|T\.DIST\.2T|T\.DIST\.RT|T\.INV|T\.INV\.2T|TAN|TANH|TIME|TIMEVALUE|TODAY|TOPN|TOPNPERLEVEL|TOPNSKIP|TOTALMTD|TOTALQTD|TOTALYTD|TREATAS|TRIM|TRUE|TRUNC|UNICHAR|UNICODE|UNION|UPPER|USERELATIONSHIP|USERNAME|USEROBJECTID|USERPRINCIPALNAME|UTCNOW|UTCTODAY|VALUE|VALUES|VAR\.P|VAR\.S|VARX\.P|VARX\.S|WEEKDAY|WEEKNUM|XIRR|XNPV|YEAR|YEARFRAC)(?=\s*\()/i,keyword:/\b(?:DEFINE|EVALUATE|MEASURE|ORDER\s+BY|RETURN|VAR|START\s+AT|ASC|DESC)\b/i,boolean:{pattern:/\b(?:FALSE|NULL|TRUE)\b/i,alias:"constant"},number:/\b\d+(?:\.\d*)?|\B\.\d+\b/,operator:/:=|[-+*\/=^]|&&?|\|\||<(?:=>?|<|>)?|>[>=]?|\b(?:IN|NOT)\b/i,punctuation:/[;\[\](){}`,.]/}}dhall.displayName="dhall";dhall.aliases=[];function dhall(s){s.languages.dhall={comment:/--.*|\{-(?:[^-{]|-(?!\})|\{(?!-)|\{-(?:[^-{]|-(?!\})|\{(?!-))*-\})*-\}/,string:{pattern:/"(?:[^"\\]|\\.)*"|''(?:[^']|'(?!')|'''|''\$\{)*''(?!'|\$)/,greedy:!0,inside:{interpolation:{pattern:/\$\{[^{}]*\}/,inside:{expression:{pattern:/(^\$\{)[\s\S]+(?=\}$)/,lookbehind:!0,alias:"language-dhall",inside:null},punctuation:/\$\{|\}/}}}},label:{pattern:/`[^`]*`/,greedy:!0},url:{pattern:/\bhttps?:\/\/[\w.:%!$&'*+;=@~-]+(?:\/[\w.:%!$&'*+;=@~-]*)*(?:\?[/?\w.:%!$&'*+;=@~-]*)?/,greedy:!0},env:{pattern:/\benv:(?:(?!\d)\w+|"(?:[^"\\=]|\\.)*")/,greedy:!0,inside:{function:/^env/,operator:/^:/,variable:/[\s\S]+/}},hash:{pattern:/\bsha256:[\da-fA-F]{64}\b/,inside:{function:/sha256/,operator:/:/,number:/[\da-fA-F]{64}/}},keyword:/\b(?:as|assert|else|forall|if|in|let|merge|missing|then|toMap|using|with)\b|\u2200/,builtin:/\b(?:None|Some)\b/,boolean:/\b(?:False|True)\b/,number:/\bNaN\b|-?\bInfinity\b|[+-]?\b(?:0x[\da-fA-F]+|\d+(?:\.\d+)?(?:e[+-]?\d+)?)\b/,operator:/\/\\|\/\/\\\\|&&|\|\||===|[!=]=|\/\/|->|\+\+|::|[+*#@=:?<>|\\\u2227\u2a53\u2261\u2afd\u03bb\u2192]/,punctuation:/\.\.|[{}\[\](),./]/,"class-name":/\b[A-Z]\w*\b/},s.languages.dhall.string.inside.interpolation.inside.expression.inside=s.languages.dhall}diff.displayName="diff";diff.aliases=[];function diff(s){(function(n){n.languages.diff={coord:[/^(?:\*{3}|-{3}|\+{3}).*$/m,/^@@.*@@$/m,/^\d.*$/m]};var u={"deleted-sign":"-","deleted-arrow":"<","inserted-sign":"+","inserted-arrow":">",unchanged:" ",diff:"!"};Object.keys(u).forEach(function(f){var y=u[f],S=[];/^\w+$/.test(f)||S.push(/\w+/.exec(f)[0]),f==="diff"&&S.push("bold"),n.languages.diff[f]={pattern:RegExp("^(?:["+y+`].*(?:\r
?|
|(?![\\s\\S])))+`,"m"),alias:S,inside:{line:{pattern:/(.)(?=[\s\S]).*(?:\r\n?|\n)?/,lookbehind:!0},prefix:{pattern:/[\s\S]/,alias:/\w+/.exec(f)[0]}}}}),Object.defineProperty(n.languages.diff,"PREFIXES",{value:u})})(s)}markupTemplating.displayName="markup-templating";markupTemplating.aliases=[];function markupTemplating(s){s.register(markup),(function(n){function u(f,y){return"___"+f.toUpperCase()+y+"___"}Object.defineProperties(n.languages["markup-templating"]={},{buildPlaceholders:{value:function(f,y,S,A){if(f.language===y){var w=f.tokenStack=[];f.code=f.code.replace(S,function(C){if(typeof A=="function"&&!A(C))return C;for(var T=w.length,R;f.code.indexOf(R=u(y,T))!==-1;)++T;return w[T]=C,R}),f.grammar=n.languages.markup}}},tokenizePlaceholders:{value:function(f,y){if(f.language!==y||!f.tokenStack)return;f.grammar=n.languages[y];var S=0,A=Object.keys(f.tokenStack);function w(C){for(var T=0;T<C.length&&!(S>=A.length);T++){var R=C[T];if(typeof R=="string"||R.content&&typeof R.content=="string"){var I=A[S],N=f.tokenStack[I],L=typeof R=="string"?R:R.content,F=u(y,I),H=L.indexOf(F);if(H>-1){++S;var z=L.substring(0,H),U=new n.Token(y,n.tokenize(N,f.grammar),"language-"+y,N),G=L.substring(H+F.length),Y=[];z&&Y.push.apply(Y,w([z])),Y.push(U),G&&Y.push.apply(Y,w([G])),typeof R=="string"?C.splice.apply(C,[T,1].concat(Y)):R.content=Y}}else R.content&&w(R.content)}return C}w(f.tokens)}}})})(s)}django.displayName="django";django.aliases=["jinja2"];function django(s){s.register(markupTemplating),(function(n){n.languages.django={comment:/^\{#[\s\S]*?#\}$/,tag:{pattern:/(^\{%[+-]?\s*)\w+/,lookbehind:!0,alias:"keyword"},delimiter:{pattern:/^\{[{%][+-]?|[+-]?[}%]\}$/,alias:"punctuation"},string:{pattern:/("|')(?:\\.|(?!\1)[^\\\r\n])*\1/,greedy:!0},filter:{pattern:/(\|)\w+/,lookbehind:!0,alias:"function"},test:{pattern:/(\bis\s+(?:not\s+)?)(?!not\b)\w+/,lookbehind:!0,alias:"function"},function:/\b[a-z_]\w+(?=\s*\()/i,keyword:/\b(?:and|as|by|else|for|if|import|in|is|loop|not|or|recursive|with|without)\b/,operator:/[-+%=]=?|!=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,number:/\b\d+(?:\.\d+)?\b/,boolean:/[Ff]alse|[Nn]one|[Tt]rue/,variable:/\b\w+\b/,punctuation:/[{}[\](),.:;]/};var u=/\{\{[\s\S]*?\}\}|\{%[\s\S]*?%\}|\{#[\s\S]*?#\}/g,f=n.languages["markup-templating"];n.hooks.add("before-tokenize",function(y){f.buildPlaceholders(y,"django",u)}),n.hooks.add("after-tokenize",function(y){f.tokenizePlaceholders(y,"django")}),n.languages.jinja2=n.languages.django,n.hooks.add("before-tokenize",function(y){f.buildPlaceholders(y,"jinja2",u)}),n.hooks.add("after-tokenize",function(y){f.tokenizePlaceholders(y,"jinja2")})})(s)}dnsZoneFile.displayName="dns-zone-file";dnsZoneFile.aliases=["dns-zone"];function dnsZoneFile(s){s.languages["dns-zone-file"]={comment:/;.*/,string:{pattern:/"(?:\\.|[^"\\\r\n])*"/,greedy:!0},variable:[{pattern:/(^\$ORIGIN[ \t]+)\S+/m,lookbehind:!0},{pattern:/(^|\s)@(?=\s|$)/,lookbehind:!0}],keyword:/^\$(?:INCLUDE|ORIGIN|TTL)(?=\s|$)/m,class:{pattern:/(^|\s)(?:CH|CS|HS|IN)(?=\s|$)/,lookbehind:!0,alias:"keyword"},type:{pattern:/(^|\s)(?:A|A6|AAAA|AFSDB|APL|ATMA|CAA|CDNSKEY|CDS|CERT|CNAME|DHCID|DLV|DNAME|DNSKEY|DS|EID|GID|GPOS|HINFO|HIP|IPSECKEY|ISDN|KEY|KX|LOC|MAILA|MAILB|MB|MD|MF|MG|MINFO|MR|MX|NAPTR|NB|NBSTAT|NIMLOC|NINFO|NS|NSAP|NSAP-PTR|NSEC|NSEC3|NSEC3PARAM|NULL|NXT|OPENPGPKEY|PTR|PX|RKEY|RP|RRSIG|RT|SIG|SINK|SMIMEA|SOA|SPF|SRV|SSHFP|TA|TKEY|TLSA|TSIG|TXT|UID|UINFO|UNSPEC|URI|WKS|X25)(?=\s|$)/,lookbehind:!0,alias:"keyword"},punctuation:/[()]/},s.languages["dns-zone"]=s.languages["dns-zone-file"]}docker.displayName="docker";docker.aliases=["dockerfile"];function docker(s){(function(n){var u=/\\[\r\n](?:\s|\\[\r\n]|#.*(?!.))*(?![\s#]|\\[\r\n])/.source,f=/(?:[ \t]+(?![ \t])(?:<SP_BS>)?|<SP_BS>)/.source.replace(/<SP_BS>/g,function(){return u}),y=/"(?:[^"\\\r\n]|\\(?:\r\n|[\s\S]))*"|'(?:[^'\\\r\n]|\\(?:\r\n|[\s\S]))*'/.source,S=/--[\w-]+=(?:<STR>|(?!["'])(?:[^\s\\]|\\.)+)/.source.replace(/<STR>/g,function(){return y}),A={pattern:RegExp(y),greedy:!0},w={pattern:/(^[ \t]*)#.*/m,lookbehind:!0,greedy:!0};function C(T,R){return T=T.replace(/<OPT>/g,function(){return S}).replace(/<SP>/g,function(){return f}),RegExp(T,R)}n.languages.docker={instruction:{pattern:/(^[ \t]*)(?:ADD|ARG|CMD|COPY|ENTRYPOINT|ENV|EXPOSE|FROM|HEALTHCHECK|LABEL|MAINTAINER|ONBUILD|RUN|SHELL|STOPSIGNAL|USER|VOLUME|WORKDIR)(?=\s)(?:\\.|[^\r\n\\])*(?:\\$(?:\s|#.*$)*(?![\s#])(?:\\.|[^\r\n\\])*)*/im,lookbehind:!0,greedy:!0,inside:{options:{pattern:C(/(^(?:ONBUILD<SP>)?\w+<SP>)<OPT>(?:<SP><OPT>)*/.source,"i"),lookbehind:!0,greedy:!0,inside:{property:{pattern:/(^|\s)--[\w-]+/,lookbehind:!0},string:[A,{pattern:/(=)(?!["'])(?:[^\s\\]|\\.)+/,lookbehind:!0}],operator:/\\$/m,punctuation:/=/}},keyword:[{pattern:C(/(^(?:ONBUILD<SP>)?HEALTHCHECK<SP>(?:<OPT><SP>)*)(?:CMD|NONE)\b/.source,"i"),lookbehind:!0,greedy:!0},{pattern:C(/(^(?:ONBUILD<SP>)?FROM<SP>(?:<OPT><SP>)*(?!--)[^ \t\\]+<SP>)AS/.source,"i"),lookbehind:!0,greedy:!0},{pattern:C(/(^ONBUILD<SP>)\w+/.source,"i"),lookbehind:!0,greedy:!0},{pattern:/^\w+/,greedy:!0}],comment:w,string:A,variable:/\$(?:\w+|\{[^{}"'\\]*\})/,operator:/\\$/m}},comment:w},n.languages.dockerfile=n.languages.docker})(s)}dot.displayName="dot";dot.aliases=["gv"];function dot(s){(function(n){var u="(?:"+[/[a-zA-Z_\x80-\uFFFF][\w\x80-\uFFFF]*/.source,/-?(?:\.\d+|\d+(?:\.\d*)?)/.source,/"[^"\\]*(?:\\[\s\S][^"\\]*)*"/.source,/<(?:[^<>]|(?!<!--)<(?:[^<>"']|"[^"]*"|'[^']*')+>|<!--(?:[^-]|-(?!->))*-->)*>/.source].join("|")+")",f={markup:{pattern:/(^<)[\s\S]+(?=>$)/,lookbehind:!0,alias:["language-markup","language-html","language-xml"],inside:n.languages.markup}};function y(S,A){return RegExp(S.replace(/<ID>/g,function(){return u}),A)}n.languages.dot={comment:{pattern:/\/\/.*|\/\*[\s\S]*?\*\/|^#.*/m,greedy:!0},"graph-name":{pattern:y(/(\b(?:digraph|graph|subgraph)[ \t\r\n]+)<ID>/.source,"i"),lookbehind:!0,greedy:!0,alias:"class-name",inside:f},"attr-value":{pattern:y(/(=[ \t\r\n]*)<ID>/.source),lookbehind:!0,greedy:!0,inside:f},"attr-name":{pattern:y(/([\[;, \t\r\n])<ID>(?=[ \t\r\n]*=)/.source),lookbehind:!0,greedy:!0,inside:f},keyword:/\b(?:digraph|edge|graph|node|strict|subgraph)\b/i,"compass-point":{pattern:/(:[ \t\r\n]*)(?:[ewc_]|[ns][ew]?)(?![\w\x80-\uFFFF])/,lookbehind:!0,alias:"builtin"},node:{pattern:y(/(^|[^-.\w\x80-\uFFFF\\])<ID>/.source),lookbehind:!0,greedy:!0,inside:f},operator:/[=:]|-[->]/,punctuation:/[\[\]{};,]/},n.languages.gv=n.languages.dot})(s)}ebnf.displayName="ebnf";ebnf.aliases=[];function ebnf(s){s.languages.ebnf={comment:/\(\*[\s\S]*?\*\)/,string:{pattern:/"[^"\r\n]*"|'[^'\r\n]*'/,greedy:!0},special:{pattern:/\?[^?\r\n]*\?/,greedy:!0,alias:"class-name"},definition:{pattern:/^([\t ]*)[a-z]\w*(?:[ \t]+[a-z]\w*)*(?=\s*=)/im,lookbehind:!0,alias:["rule","keyword"]},rule:/\b[a-z]\w*(?:[ \t]+[a-z]\w*)*\b/i,punctuation:/\([:/]|[:/]\)|[.,;()[\]{}]/,operator:/[-=|*/!]/}}editorconfig.displayName="editorconfig";editorconfig.aliases=[];function editorconfig(s){s.languages.editorconfig={comment:/[;#].*/,section:{pattern:/(^[ \t]*)\[.+\]/m,lookbehind:!0,alias:"selector",inside:{regex:/\\\\[\[\]{},!?.*]/,operator:/[!?]|\.\.|\*{1,2}/,punctuation:/[\[\]{},]/}},key:{pattern:/(^[ \t]*)[^\s=]+(?=[ \t]*=)/m,lookbehind:!0,alias:"attr-name"},value:{pattern:/=.*/,alias:"attr-value",inside:{punctuation:/^=/}}}}eiffel.displayName="eiffel";eiffel.aliases=[];function eiffel(s){s.languages.eiffel={comment:/--.*/,string:[{pattern:/"([^[]*)\[[\s\S]*?\]\1"/,greedy:!0},{pattern:/"([^{]*)\{[\s\S]*?\}\1"/,greedy:!0},{pattern:/"(?:%(?:(?!\n)\s)*\n\s*%|%\S|[^%"\r\n])*"/,greedy:!0}],char:/'(?:%.|[^%'\r\n])+'/,keyword:/\b(?:across|agent|alias|all|and|as|assign|attached|attribute|check|class|convert|create|Current|debug|deferred|detachable|do|else|elseif|end|ensure|expanded|export|external|feature|from|frozen|if|implies|inherit|inspect|invariant|like|local|loop|not|note|obsolete|old|once|or|Precursor|redefine|rename|require|rescue|Result|retry|select|separate|some|then|undefine|until|variant|Void|when|xor)\b/i,boolean:/\b(?:False|True)\b/i,"class-name":/\b[A-Z][\dA-Z_]*\b/,number:[/\b0[xcb][\da-f](?:_*[\da-f])*\b/i,/(?:\b\d(?:_*\d)*)?\.(?:(?:\d(?:_*\d)*)?e[+-]?)?\d(?:_*\d)*\b|\b\d(?:_*\d)*\b\.?/i],punctuation:/:=|<<|>>|\(\||\|\)|->|\.(?=\w)|[{}[\];(),:?]/,operator:/\\\\|\|\.\.\||\.\.|\/[~\/=]?|[><]=?|[-+*^=~]/}}ejs.displayName="ejs";ejs.aliases=["eta"];function ejs(s){s.register(javascript),s.register(markupTemplating),(function(n){n.languages.ejs={delimiter:{pattern:/^<%[-_=]?|[-_]?%>$/,alias:"punctuation"},comment:/^#[\s\S]*/,"language-javascript":{pattern:/[\s\S]+/,inside:n.languages.javascript}},n.hooks.add("before-tokenize",function(u){var f=/<%(?!%)[\s\S]+?%>/g;n.languages["markup-templating"].buildPlaceholders(u,"ejs",f)}),n.hooks.add("after-tokenize",function(u){n.languages["markup-templating"].tokenizePlaceholders(u,"ejs")}),n.languages.eta=n.languages.ejs})(s)}elixir.displayName="elixir";elixir.aliases=[];function elixir(s){s.languages.elixir={doc:{pattern:/@(?:doc|moduledoc)\s+(?:("""|''')[\s\S]*?\1|("|')(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2)/,inside:{attribute:/^@\w+/,string:/['"][\s\S]+/}},comment:{pattern:/#.*/,greedy:!0},regex:{pattern:/~[rR](?:("""|''')(?:\\[\s\S]|(?!\1)[^\\])+\1|([\/|"'])(?:\\.|(?!\2)[^\\\r\n])+\2|\((?:\\.|[^\\)\r\n])+\)|\[(?:\\.|[^\\\]\r\n])+\]|\{(?:\\.|[^\\}\r\n])+\}|<(?:\\.|[^\\>\r\n])+>)[uismxfr]*/,greedy:!0},string:[{pattern:/~[cCsSwW](?:("""|''')(?:\\[\s\S]|(?!\1)[^\\])+\1|([\/|"'])(?:\\.|(?!\2)[^\\\r\n])+\2|\((?:\\.|[^\\)\r\n])+\)|\[(?:\\.|[^\\\]\r\n])+\]|\{(?:\\.|#\{[^}]+\}|#(?!\{)|[^#\\}\r\n])+\}|<(?:\\.|[^\\>\r\n])+>)[csa]?/,greedy:!0,inside:{}},{pattern:/("""|''')[\s\S]*?\1/,greedy:!0,inside:{}},{pattern:/("|')(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0,inside:{}}],atom:{pattern:/(^|[^:]):\w+/,lookbehind:!0,alias:"symbol"},module:{pattern:/\b[A-Z]\w*\b/,alias:"class-name"},"attr-name":/\b\w+\??:(?!:)/,argument:{pattern:/(^|[^&])&\d+/,lookbehind:!0,alias:"variable"},attribute:{pattern:/@\w+/,alias:"variable"},function:/\b[_a-zA-Z]\w*[?!]?(?:(?=\s*(?:\.\s*)?\()|(?=\/\d))/,number:/\b(?:0[box][a-f\d_]+|\d[\d_]*)(?:\.[\d_]+)?(?:e[+-]?[\d_]+)?\b/i,keyword:/\b(?:after|alias|and|case|catch|cond|def(?:callback|delegate|exception|impl|macro|module|n|np|p|protocol|struct)?|do|else|end|fn|for|if|import|not|or|quote|raise|require|rescue|try|unless|unquote|use|when)\b/,boolean:/\b(?:false|nil|true)\b/,operator:[/\bin\b|&&?|\|[|>]?|\\\\|::|\.\.\.?|\+\+?|-[->]?|<[-=>]|>=|!==?|\B!|=(?:==?|[>~])?|[*\/^]/,{pattern:/([^<])<(?!<)/,lookbehind:!0},{pattern:/([^>])>(?!>)/,lookbehind:!0}],punctuation:/<<|>>|[.,%\[\]{}()]/},s.languages.elixir.string.forEach(function(n){n.inside={interpolation:{pattern:/#\{[^}]+\}/,inside:{delimiter:{pattern:/^#\{|\}$/,alias:"punctuation"},rest:s.languages.elixir}}}})}elm.displayName="elm";elm.aliases=[];function elm(s){s.languages.elm={comment:/--.*|\{-[\s\S]*?-\}/,char:{pattern:/'(?:[^\\'\r\n]|\\(?:[abfnrtv\\']|\d+|x[0-9a-fA-F]+|u\{[0-9a-fA-F]+\}))'/,greedy:!0},string:[{pattern:/"""[\s\S]*?"""/,greedy:!0},{pattern:/"(?:[^\\"\r\n]|\\.)*"/,greedy:!0}],"import-statement":{pattern:/(^[\t ]*)import\s+[A-Z]\w*(?:\.[A-Z]\w*)*(?:\s+as\s+(?:[A-Z]\w*)(?:\.[A-Z]\w*)*)?(?:\s+exposing\s+)?/m,lookbehind:!0,inside:{keyword:/\b(?:as|exposing|import)\b/}},keyword:/\b(?:alias|as|case|else|exposing|if|in|infixl|infixr|let|module|of|then|type)\b/,builtin:/\b(?:abs|acos|always|asin|atan|atan2|ceiling|clamp|compare|cos|curry|degrees|e|flip|floor|fromPolar|identity|isInfinite|isNaN|logBase|max|min|negate|never|not|pi|radians|rem|round|sin|sqrt|tan|toFloat|toPolar|toString|truncate|turns|uncurry|xor)\b/,number:/\b(?:\d+(?:\.\d+)?(?:e[+-]?\d+)?|0x[0-9a-f]+)\b/i,operator:/\s\.\s|[+\-/*=.$<>:&|^?%#@~!]{2,}|[+\-/*=$<>:&|^?%#@~!]/,hvariable:/\b(?:[A-Z]\w*\.)*[a-z]\w*\b/,constant:/\b(?:[A-Z]\w*\.)*[A-Z]\w*\b/,punctuation:/[{}[\]|(),.:]/}}lua.displayName="lua";lua.aliases=[];function lua(s){s.languages.lua={comment:/^#!.+|--(?:\[(=*)\[[\s\S]*?\]\1\]|.*)/m,string:{pattern:/(["'])(?:(?!\1)[^\\\r\n]|\\z(?:\r\n|\s)|\\(?:\r\n|[^z]))*\1|\[(=*)\[[\s\S]*?\]\2\]/,greedy:!0},number:/\b0x[a-f\d]+(?:\.[a-f\d]*)?(?:p[+-]?\d+)?\b|\b\d+(?:\.\B|(?:\.\d*)?(?:e[+-]?\d+)?\b)|\B\.\d+(?:e[+-]?\d+)?\b/i,keyword:/\b(?:and|break|do|else|elseif|end|false|for|function|goto|if|in|local|nil|not|or|repeat|return|then|true|until|while)\b/,function:/(?!\d)\w+(?=\s*(?:[({]))/,operator:[/[-+*%^&|#]|\/\/?|<[<=]?|>[>=]?|[=~]=?/,{pattern:/(^|[^.])\.\.(?!\.)/,lookbehind:!0}],punctuation:/[\[\](){},;]|\.+|:+/}}etlua.displayName="etlua";etlua.aliases=[];function etlua(s){s.register(lua),s.register(markupTemplating),(function(n){n.languages.etlua={delimiter:{pattern:/^<%[-=]?|-?%>$/,alias:"punctuation"},"language-lua":{pattern:/[\s\S]+/,inside:n.languages.lua}},n.hooks.add("before-tokenize",function(u){var f=/<%[\s\S]+?%>/g;n.languages["markup-templating"].buildPlaceholders(u,"etlua",f)}),n.hooks.add("after-tokenize",function(u){n.languages["markup-templating"].tokenizePlaceholders(u,"etlua")})})(s)}erb.displayName="erb";erb.aliases=[];function erb(s){s.register(markupTemplating),s.register(ruby),(function(n){n.languages.erb={delimiter:{pattern:/^(\s*)<%=?|%>(?=\s*$)/,lookbehind:!0,alias:"punctuation"},ruby:{pattern:/\s*\S[\s\S]*/,alias:"language-ruby",inside:n.languages.ruby}},n.hooks.add("before-tokenize",function(u){var f=/<%=?(?:[^\r\n]|[\r\n](?!=begin)|[\r\n]=begin\s(?:[^\r\n]|[\r\n](?!=end))*[\r\n]=end)+?%>/g;n.languages["markup-templating"].buildPlaceholders(u,"erb",f)}),n.hooks.add("after-tokenize",function(u){n.languages["markup-templating"].tokenizePlaceholders(u,"erb")})})(s)}erlang.displayName="erlang";erlang.aliases=[];function erlang(s){s.languages.erlang={comment:/%.+/,string:{pattern:/"(?:\\.|[^\\"\r\n])*"/,greedy:!0},"quoted-function":{pattern:/'(?:\\.|[^\\'\r\n])+'(?=\()/,alias:"function"},"quoted-atom":{pattern:/'(?:\\.|[^\\'\r\n])+'/,alias:"atom"},boolean:/\b(?:false|true)\b/,keyword:/\b(?:after|begin|case|catch|end|fun|if|of|receive|try|when)\b/,number:[/\$\\?./,/\b\d+#[a-z0-9]+/i,/(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i],function:/\b[a-z][\w@]*(?=\()/,variable:{pattern:/(^|[^@])(?:\b|\?)[A-Z_][\w@]*/,lookbehind:!0},operator:[/[=\/<>:]=|=[:\/]=|\+\+?|--?|[=*\/!]|\b(?:and|andalso|band|bnot|bor|bsl|bsr|bxor|div|not|or|orelse|rem|xor)\b/,{pattern:/(^|[^<])<(?!<)/,lookbehind:!0},{pattern:/(^|[^>])>(?!>)/,lookbehind:!0}],atom:/\b[a-z][\w@]*/,punctuation:/[()[\]{}:;,.#|]|<<|>>/}}excelFormula.displayName="excel-formula";excelFormula.aliases=["xls","xlsx"];function excelFormula(s){s.languages["excel-formula"]={comment:{pattern:/(\bN\(\s*)"(?:[^"]|"")*"(?=\s*\))/i,lookbehind:!0,greedy:!0},string:{pattern:/"(?:[^"]|"")*"(?!")/,greedy:!0},reference:{pattern:/(?:'[^']*'|(?:[^\s()[\]{}<>*?"';,$&]*\[[^^\s()[\]{}<>*?"']+\])?\w+)!/,greedy:!0,alias:"string",inside:{operator:/!$/,punctuation:/'/,sheet:{pattern:/[^[\]]+$/,alias:"function"},file:{pattern:/\[[^[\]]+\]$/,inside:{punctuation:/[[\]]/}},path:/[\s\S]+/}},"function-name":{pattern:/\b[A-Z]\w*(?=\()/i,alias:"builtin"},range:{pattern:/\$?\b(?:[A-Z]+\$?\d+:\$?[A-Z]+\$?\d+|[A-Z]+:\$?[A-Z]+|\d+:\$?\d+)\b/i,alias:"selector",inside:{operator:/:/,cell:/\$?[A-Z]+\$?\d+/i,column:/\$?[A-Z]+/i,row:/\$?\d+/}},cell:{pattern:/\b[A-Z]+\d+\b|\$[A-Za-z]+\$?\d+\b|\b[A-Za-z]+\$\d+\b/,alias:"selector"},number:/(?:\b\d+(?:\.\d+)?|\B\.\d+)(?:e[+-]?\d+)?\b/i,boolean:/\b(?:FALSE|TRUE)\b/i,operator:/[-+*/^%=&,]|<[=>]?|>=?/,punctuation:/[[\]();{}|]/},s.languages.xlsx=s.languages.xls=s.languages["excel-formula"]}fsharp.displayName="fsharp";fsharp.aliases=[];function fsharp(s){s.register(clike),s.languages.fsharp=s.languages.extend("clike",{comment:[{pattern:/(^|[^\\])\(\*(?!\))[\s\S]*?\*\)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(?:"""[\s\S]*?"""|@"(?:""|[^"])*"|"(?:\\[\s\S]|[^\\"])*")B?/,greedy:!0},"class-name":{pattern:/(\b(?:exception|inherit|interface|new|of|type)\s+|\w\s*:\s*|\s:\??>\s*)[.\w]+\b(?:\s*(?:->|\*)\s*[.\w]+\b)*(?!\s*[:.])/,lookbehind:!0,inside:{operator:/->|\*/,punctuation:/\./}},keyword:/\b(?:let|return|use|yield)(?:!\B|\b)|\b(?:abstract|and|as|asr|assert|atomic|base|begin|break|checked|class|component|const|constraint|constructor|continue|default|delegate|do|done|downcast|downto|eager|elif|else|end|event|exception|extern|external|false|finally|fixed|for|fun|function|functor|global|if|in|include|inherit|inline|interface|internal|land|lazy|lor|lsl|lsr|lxor|match|member|method|mixin|mod|module|mutable|namespace|new|not|null|object|of|open|or|override|parallel|private|process|protected|public|pure|rec|sealed|select|sig|static|struct|tailcall|then|to|trait|true|try|type|upcast|val|virtual|void|volatile|when|while|with)\b/,number:[/\b0x[\da-fA-F]+(?:LF|lf|un)?\b/,/\b0b[01]+(?:uy|y)?\b/,/(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[fm]|e[+-]?\d+)?\b/i,/\b\d+(?:[IlLsy]|UL|u[lsy]?)?\b/],operator:/([<>~&^])\1\1|([*.:<>&])\2|<-|->|[!=:]=|<?\|{1,3}>?|\??(?:<=|>=|<>|[-+*/%=<>])\??|[!?^&]|~[+~-]|:>|:\?>?/}),s.languages.insertBefore("fsharp","keyword",{preprocessor:{pattern:/(^[\t ]*)#.*/m,lookbehind:!0,alias:"property",inside:{directive:{pattern:/(^#)\b(?:else|endif|if|light|line|nowarn)\b/,lookbehind:!0,alias:"keyword"}}}}),s.languages.insertBefore("fsharp","punctuation",{"computation-expression":{pattern:/\b[_a-z]\w*(?=\s*\{)/i,alias:"keyword"}}),s.languages.insertBefore("fsharp","string",{annotation:{pattern:/\[<.+?>\]/,greedy:!0,inside:{punctuation:/^\[<|>\]$/,"class-name":{pattern:/^\w+$|(^|;\s*)[A-Z]\w*(?=\()/,lookbehind:!0},"annotation-content":{pattern:/[\s\S]+/,inside:s.languages.fsharp}}},char:{pattern:/'(?:[^\\']|\\(?:.|\d{3}|x[a-fA-F\d]{2}|u[a-fA-F\d]{4}|U[a-fA-F\d]{8}))'B?/,greedy:!0}})}factor.displayName="factor";factor.aliases=[];function factor(s){(function(n){var u={function:/\b(?:BUGS?|FIX(?:MES?)?|NOTES?|TODOS?|XX+|HACKS?|WARN(?:ING)?|\?{2,}|!{2,})\b/},f={number:/\\[^\s']|%\w/},y={comment:[{pattern:/(^|\s)(?:! .*|!$)/,lookbehind:!0,inside:u},{pattern:/(^|\s)\/\*\s[\s\S]*?\*\/(?=\s|$)/,lookbehind:!0,greedy:!0,inside:u},{pattern:/(^|\s)!\[(={0,6})\[\s[\s\S]*?\]\2\](?=\s|$)/,lookbehind:!0,greedy:!0,inside:u}],number:[{pattern:/(^|\s)[+-]?\d+(?=\s|$)/,lookbehind:!0},{pattern:/(^|\s)[+-]?0(?:b[01]+|o[0-7]+|d\d+|x[\dA-F]+)(?=\s|$)/i,lookbehind:!0},{pattern:/(^|\s)[+-]?\d+\/\d+\.?(?=\s|$)/,lookbehind:!0},{pattern:/(^|\s)\+?\d+\+\d+\/\d+(?=\s|$)/,lookbehind:!0},{pattern:/(^|\s)-\d+-\d+\/\d+(?=\s|$)/,lookbehind:!0},{pattern:/(^|\s)[+-]?(?:\d*\.\d+|\d+\.\d*|\d+)(?:e[+-]?\d+)?(?=\s|$)/i,lookbehind:!0},{pattern:/(^|\s)NAN:\s+[\da-fA-F]+(?=\s|$)/,lookbehind:!0},{pattern:/(^|\s)[+-]?0(?:b1\.[01]*|o1\.[0-7]*|d1\.\d*|x1\.[\dA-F]*)p\d+(?=\s|$)/i,lookbehind:!0}],regexp:{pattern:/(^|\s)R\/\s(?:\\\S|[^\\/])*\/(?:[idmsr]*|[idmsr]+-[idmsr]+)(?=\s|$)/,lookbehind:!0,alias:"number",inside:{variable:/\\\S/,keyword:/[+?*\[\]^$(){}.|]/,operator:{pattern:/(\/)[idmsr]+(?:-[idmsr]+)?/,lookbehind:!0}}},boolean:{pattern:/(^|\s)[tf](?=\s|$)/,lookbehind:!0},"custom-string":{pattern:/(^|\s)[A-Z0-9\-]+"\s(?:\\\S|[^"\\])*"/,lookbehind:!0,greedy:!0,alias:"string",inside:{number:/\\\S|%\w|\//}},"multiline-string":[{pattern:/(^|\s)STRING:\s+\S+(?:\n|\r\n).*(?:\n|\r\n)\s*;(?=\s|$)/,lookbehind:!0,greedy:!0,alias:"string",inside:{number:f.number,"semicolon-or-setlocal":{pattern:/([\r\n][ \t]*);(?=\s|$)/,lookbehind:!0,alias:"function"}}},{pattern:/(^|\s)HEREDOC:\s+\S+(?:\n|\r\n).*(?:\n|\r\n)\s*\S+(?=\s|$)/,lookbehind:!0,greedy:!0,alias:"string",inside:f},{pattern:/(^|\s)\[(={0,6})\[\s[\s\S]*?\]\2\](?=\s|$)/,lookbehind:!0,greedy:!0,alias:"string",inside:f}],"special-using":{pattern:/(^|\s)USING:(?:\s\S+)*(?=\s+;(?:\s|$))/,lookbehind:!0,alias:"function",inside:{string:{pattern:/(\s)[^:\s]+/,lookbehind:!0}}},"stack-effect-delimiter":[{pattern:/(^|\s)(?:call|eval|execute)?\((?=\s)/,lookbehind:!0,alias:"operator"},{pattern:/(\s)--(?=\s)/,lookbehind:!0,alias:"operator"},{pattern:/(\s)\)(?=\s|$)/,lookbehind:!0,alias:"operator"}],combinators:{pattern:null,lookbehind:!0,alias:"keyword"},"kernel-builtin":{pattern:null,lookbehind:!0,alias:"variable"},"sequences-builtin":{pattern:null,lookbehind:!0,alias:"variable"},"math-builtin":{pattern:null,lookbehind:!0,alias:"variable"},"constructor-word":{pattern:/(^|\s)<(?!=+>|-+>)\S+>(?=\s|$)/,lookbehind:!0,alias:"keyword"},"other-builtin-syntax":{pattern:null,lookbehind:!0,alias:"operator"},"conventionally-named-word":{pattern:/(^|\s)(?!")(?:(?:change|new|set|with)-\S+|\$\S+|>[^>\s]+|[^:>\s]+>|[^>\s]+>[^>\s]+|\+[^+\s]+\+|[^?\s]+\?|\?[^?\s]+|[^>\s]+>>|>>[^>\s]+|[^<\s]+<<|\([^()\s]+\)|[^!\s]+!|[^*\s]\S*\*|[^.\s]\S*\.)(?=\s|$)/,lookbehind:!0,alias:"keyword"},"colon-syntax":{pattern:/(^|\s)(?:[A-Z0-9\-]+#?)?:{1,2}\s+(?:;\S+|(?!;)\S+)(?=\s|$)/,lookbehind:!0,greedy:!0,alias:"function"},"semicolon-or-setlocal":{pattern:/(\s)(?:;|:>)(?=\s|$)/,lookbehind:!0,alias:"function"},"curly-brace-literal-delimiter":[{pattern:/(^|\s)[a-z]*\{(?=\s)/i,lookbehind:!0,alias:"operator"},{pattern:/(\s)\}(?=\s|$)/,lookbehind:!0,alias:"operator"}],"quotation-delimiter":[{pattern:/(^|\s)\[(?=\s)/,lookbehind:!0,alias:"operator"},{pattern:/(\s)\](?=\s|$)/,lookbehind:!0,alias:"operator"}],"normal-word":{pattern:/(^|\s)[^"\s]\S*(?=\s|$)/,lookbehind:!0},string:{pattern:/"(?:\\\S|[^"\\])*"/,greedy:!0,inside:f}},S=function(T){return(T+"").replace(/([.?*+\^$\[\]\\(){}|\-])/g,"\\$1")},A=function(T){return new RegExp("(^|\\s)(?:"+T.map(S).join("|")+")(?=\\s|$)")},w={"kernel-builtin":["or","2nipd","4drop","tuck","wrapper","nip","wrapper?","callstack>array","die","dupd","callstack","callstack?","3dup","hashcode","pick","4nip","build",">boolean","nipd","clone","5nip","eq?","?","=","swapd","2over","clear","2dup","get-retainstack","not","tuple?","dup","3nipd","call","-rotd","object","drop","assert=","assert?","-rot","execute","boa","get-callstack","curried?","3drop","pickd","overd","over","roll","3nip","swap","and","2nip","rotd","throw","(clone)","hashcode*","spin","reach","4dup","equal?","get-datastack","assert","2drop","<wrapper>","boolean?","identity-hashcode","identity-tuple?","null","composed?","new","5drop","rot","-roll","xor","identity-tuple","boolean"],"other-builtin-syntax":["=======","recursive","flushable",">>","<<<<<<","M\\","B","PRIVATE>","\\","======","final","inline","delimiter","deprecated","<PRIVATE",">>>>>>","<<<<<<<","parse-complex","malformed-complex","read-only",">>>>>>>","call-next-method","<<","foldable","$","$[","${"],"sequences-builtin":["member-eq?","mismatch","append","assert-sequence=","longer","repetition","clone-like","3sequence","assert-sequence?","last-index-from","reversed","index-from","cut*","pad-tail","join-as","remove-eq!","concat-as","but-last","snip","nths","nth","sequence","longest","slice?","<slice>","remove-nth","tail-slice","empty?","tail*","member?","virtual-sequence?","set-length","drop-prefix","iota","unclip","bounds-error?","unclip-last-slice","non-negative-integer-expected","non-negative-integer-expected?","midpoint@","longer?","?set-nth","?first","rest-slice","prepend-as","prepend","fourth","sift","subseq-start","new-sequence","?last","like","first4","1sequence","reverse","slice","virtual@","repetition?","set-last","index","4sequence","max-length","set-second","immutable-sequence","first2","first3","supremum","unclip-slice","suffix!","insert-nth","tail","3append","short","suffix","concat","flip","immutable?","reverse!","2sequence","sum","delete-all","indices","snip-slice","<iota>","check-slice","sequence?","head","append-as","halves","sequence=","collapse-slice","?second","slice-error?","product","bounds-check?","bounds-check","immutable","virtual-exemplar","harvest","remove","pad-head","last","set-fourth","cartesian-product","remove-eq","shorten","shorter","reversed?","shorter?","shortest","head-slice","pop*","tail-slice*","but-last-slice","iota?","append!","cut-slice","new-resizable","head-slice*","sequence-hashcode","pop","set-nth","?nth","second","join","immutable-sequence?","<reversed>","3append-as","virtual-sequence","subseq?","remove-nth!","length","last-index","lengthen","assert-sequence","copy","move","third","first","tail?","set-first","prefix","bounds-error","<repetition>","exchange","surround","cut","min-length","set-third","push-all","head?","subseq-start-from","delete-slice","rest","sum-lengths","head*","infimum","remove!","glue","slice-error","subseq","push","replace-slice","subseq-as","unclip-last"],"math-builtin":["number=","next-power-of-2","?1+","fp-special?","imaginary-part","float>bits","number?","fp-infinity?","bignum?","fp-snan?","denominator","gcd","*","+","fp-bitwise=","-","u>=","/",">=","bitand","power-of-2?","log2-expects-positive","neg?","<","log2",">","integer?","number","bits>double","2/","zero?","bits>float","float?","shift","ratio?","rect>","even?","ratio","fp-sign","bitnot",">fixnum","complex?","/i","integer>fixnum","/f","sgn",">bignum","next-float","u<","u>","mod","recip","rational",">float","2^","integer","fixnum?","neg","fixnum","sq","bignum",">rect","bit?","fp-qnan?","simple-gcd","complex","<fp-nan>","real",">fraction","double>bits","bitor","rem","fp-nan-payload","real-part","log2-expects-positive?","prev-float","align","unordered?","float","fp-nan?","abs","bitxor","integer>fixnum-strict","u<=","odd?","<=","/mod",">integer","real?","rational?","numerator"]};Object.keys(w).forEach(function(T){y[T].pattern=A(w[T])});var C=["2bi","while","2tri","bi*","4dip","both?","same?","tri@","curry","prepose","3bi","?if","tri*","2keep","3keep","curried","2keepd","when","2bi*","2tri*","4keep","bi@","keepdd","do","unless*","tri-curry","if*","loop","bi-curry*","when*","2bi@","2tri@","with","2with","either?","bi","until","3dip","3curry","tri-curry*","tri-curry@","bi-curry","keepd","compose","2dip","if","3tri","unless","tuple","keep","2curry","tri","most","while*","dip","composed","bi-curry@","find-last-from","trim-head-slice","map-as","each-from","none?","trim-tail","partition","if-empty","accumulate*","reject!","find-from","accumulate-as","collector-for-as","reject","map","map-sum","accumulate!","2each-from","follow","supremum-by","map!","unless-empty","collector","padding","reduce-index","replicate-as","infimum-by","trim-tail-slice","count","find-index","filter","accumulate*!","reject-as","map-integers","map-find","reduce","selector","interleave","2map","filter-as","binary-reduce","map-index-as","find","produce","filter!","replicate","cartesian-map","cartesian-each","find-index-from","map-find-last","3map-as","3map","find-last","selector-as","2map-as","2map-reduce","accumulate","each","each-index","accumulate*-as","when-empty","all?","collector-as","push-either","new-like","collector-for","2selector","push-if","2all?","map-reduce","3each","any?","trim-slice","2reduce","change-nth","produce-as","2each","trim","trim-head","cartesian-find","map-index","if-zero","each-integer","unless-zero","(find-integer)","when-zero","find-last-integer","(all-integers?)","times","(each-integer)","find-integer","all-integers?","unless-negative","if-positive","when-positive","when-negative","unless-positive","if-negative","case","2cleave","cond>quot","case>quot","3cleave","wrong-values","to-fixed-point","alist>quot","cond","cleave","call-effect","recursive-hashcode","spread","deep-spread>quot","2||","0||","n||","0&&","2&&","3||","1||","1&&","n&&","3&&","smart-unless*","keep-inputs","reduce-outputs","smart-when*","cleave>array","smart-with","smart-apply","smart-if","inputs/outputs","output>sequence-n","map-outputs","map-reduce-outputs","dropping","output>array","smart-map-reduce","smart-2map-reduce","output>array-n","nullary","input<sequence","append-outputs","drop-inputs","inputs","smart-2reduce","drop-outputs","smart-reduce","preserving","smart-when","outputs","append-outputs-as","smart-unless","smart-if*","sum-outputs","input<sequence-unsafe","output>sequence"];y.combinators.pattern=A(C),n.languages.factor=y})(s)}$false.displayName="false";$false.aliases=[];function $false(s){(function(n){n.languages.false={comment:{pattern:/\{[^}]*\}/},string:{pattern:/"[^"]*"/,greedy:!0},"character-code":{pattern:/'(?:[^\r]|\r\n?)/,alias:"number"},"assembler-code":{pattern:/\d+`/,alias:"important"},number:/\d+/,operator:/[-!#$%&'*+,./:;=>?@\\^_`|~]/,punctuation:/\[|\]/,variable:/[a-z]/,"non-standard":{pattern:/[()<BDO]/,alias:"bold"}}})(s)}firestoreSecurityRules.displayName="firestore-security-rules";firestoreSecurityRules.aliases=[];function firestoreSecurityRules(s){s.register(clike),s.languages["firestore-security-rules"]=s.languages.extend("clike",{comment:/\/\/.*/,keyword:/\b(?:allow|function|if|match|null|return|rules_version|service)\b/,operator:/&&|\|\||[<>!=]=?|[-+*/%]|\b(?:in|is)\b/}),delete s.languages["firestore-security-rules"]["class-name"],s.languages.insertBefore("firestore-security-rules","keyword",{path:{pattern:/(^|[\s(),])(?:\/(?:[\w\xA0-\uFFFF]+|\{[\w\xA0-\uFFFF]+(?:=\*\*)?\}|\$\([\w\xA0-\uFFFF.]+\)))+/,lookbehind:!0,greedy:!0,inside:{variable:{pattern:/\{[\w\xA0-\uFFFF]+(?:=\*\*)?\}|\$\([\w\xA0-\uFFFF.]+\)/,inside:{operator:/=/,keyword:/\*\*/,punctuation:/[.$(){}]/}},punctuation:/\//}},method:{pattern:/(\ballow\s+)[a-z]+(?:\s*,\s*[a-z]+)*(?=\s*[:;])/,lookbehind:!0,alias:"builtin",inside:{punctuation:/,/}}})}flow.displayName="flow";flow.aliases=[];function flow(s){s.register(javascript),(function(n){n.languages.flow=n.languages.extend("javascript",{}),n.languages.insertBefore("flow","keyword",{type:[{pattern:/\b(?:[Bb]oolean|Function|[Nn]umber|[Ss]tring|[Ss]ymbol|any|mixed|null|void)\b/,alias:"class-name"}]}),n.languages.flow["function-variable"].pattern=/(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=\s*(?:function\b|(?:\([^()]*\)(?:\s*:\s*\w+)?|(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/i,delete n.languages.flow.parameter,n.languages.insertBefore("flow","operator",{"flow-punctuation":{pattern:/\{\||\|\}/,alias:"punctuation"}}),Array.isArray(n.languages.flow.keyword)||(n.languages.flow.keyword=[n.languages.flow.keyword]),n.languages.flow.keyword.unshift({pattern:/(^|[^$]\b)(?:Class|declare|opaque|type)\b(?!\$)/,lookbehind:!0},{pattern:/(^|[^$]\B)\$(?:Diff|Enum|Exact|Keys|ObjMap|PropertyType|Record|Shape|Subtype|Supertype|await)\b(?!\$)/,lookbehind:!0})})(s)}fortran.displayName="fortran";fortran.aliases=[];function fortran(s){s.languages.fortran={"quoted-number":{pattern:/[BOZ](['"])[A-F0-9]+\1/i,alias:"number"},string:{pattern:/(?:\b\w+_)?(['"])(?:\1\1|&(?:\r\n?|\n)(?:[ \t]*!.*(?:\r\n?|\n)|(?![ \t]*!))|(?!\1).)*(?:\1|&)/,inside:{comment:{pattern:/(&(?:\r\n?|\n)\s*)!.*/,lookbehind:!0}}},comment:{pattern:/!.*/,greedy:!0},boolean:/\.(?:FALSE|TRUE)\.(?:_\w+)?/i,number:/(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[ED][+-]?\d+)?(?:_\w+)?/i,keyword:[/\b(?:CHARACTER|COMPLEX|DOUBLE ?PRECISION|INTEGER|LOGICAL|REAL)\b/i,/\b(?:END ?)?(?:BLOCK ?DATA|DO|FILE|FORALL|FUNCTION|IF|INTERFACE|MODULE(?! PROCEDURE)|PROGRAM|SELECT|SUBROUTINE|TYPE|WHERE)\b/i,/\b(?:ALLOCATABLE|ALLOCATE|BACKSPACE|CALL|CASE|CLOSE|COMMON|CONTAINS|CONTINUE|CYCLE|DATA|DEALLOCATE|DIMENSION|DO|END|EQUIVALENCE|EXIT|EXTERNAL|FORMAT|GO ?TO|IMPLICIT(?: NONE)?|INQUIRE|INTENT|INTRINSIC|MODULE PROCEDURE|NAMELIST|NULLIFY|OPEN|OPTIONAL|PARAMETER|POINTER|PRINT|PRIVATE|PUBLIC|READ|RETURN|REWIND|SAVE|SELECT|STOP|TARGET|WHILE|WRITE)\b/i,/\b(?:ASSIGNMENT|DEFAULT|ELEMENTAL|ELSE|ELSEIF|ELSEWHERE|ENTRY|IN|INCLUDE|INOUT|KIND|NULL|ONLY|OPERATOR|OUT|PURE|RECURSIVE|RESULT|SEQUENCE|STAT|THEN|USE)\b/i],operator:[/\*\*|\/\/|=>|[=\/]=|[<>]=?|::|[+\-*=%]|\.[A-Z]+\./i,{pattern:/(^|(?!\().)\/(?!\))/,lookbehind:!0}],punctuation:/\(\/|\/\)|[(),;:&]/}}ftl.displayName="ftl";ftl.aliases=[];function ftl(s){s.register(markupTemplating),(function(n){for(var u=/[^<()"']|\((?:<expr>)*\)|<(?!#--)|<#--(?:[^-]|-(?!->))*-->|"(?:[^\\"]|\\.)*"|'(?:[^\\']|\\.)*'/.source,f=0;f<2;f++)u=u.replace(/<expr>/g,function(){return u});u=u.replace(/<expr>/g,/[^\s\S]/.source);var y={comment:/<#--[\s\S]*?-->/,string:[{pattern:/\br("|')(?:(?!\1)[^\\]|\\.)*\1/,greedy:!0},{pattern:RegExp(/("|')(?:(?!\1|\$\{)[^\\]|\\.|\$\{(?:(?!\})(?:<expr>))*\})*\1/.source.replace(/<expr>/g,function(){return u})),greedy:!0,inside:{interpolation:{pattern:RegExp(/((?:^|[^\\])(?:\\\\)*)\$\{(?:(?!\})(?:<expr>))*\}/.source.replace(/<expr>/g,function(){return u})),lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:null}}}}],keyword:/\b(?:as)\b/,boolean:/\b(?:false|true)\b/,"builtin-function":{pattern:/((?:^|[^?])\?\s*)\w+/,lookbehind:!0,alias:"function"},function:/\b\w+(?=\s*\()/,number:/\b\d+(?:\.\d+)?\b/,operator:/\.\.[<*!]?|->|--|\+\+|&&|\|\||\?{1,2}|[-+*/%!=<>]=?|\b(?:gt|gte|lt|lte)\b/,punctuation:/[,;.:()[\]{}]/};y.string[1].inside.interpolation.inside.rest=y,n.languages.ftl={"ftl-comment":{pattern:/^<#--[\s\S]*/,alias:"comment"},"ftl-directive":{pattern:/^<[\s\S]+>$/,inside:{directive:{pattern:/(^<\/?)[#@][a-z]\w*/i,lookbehind:!0,alias:"keyword"},punctuation:/^<\/?|\/?>$/,content:{pattern:/\s*\S[\s\S]*/,alias:"ftl",inside:y}}},"ftl-interpolation":{pattern:/^\$\{[\s\S]*\}$/,inside:{punctuation:/^\$\{|\}$/,content:{pattern:/\s*\S[\s\S]*/,alias:"ftl",inside:y}}}},n.hooks.add("before-tokenize",function(S){var A=RegExp(/<#--[\s\S]*?-->|<\/?[#@][a-zA-Z](?:<expr>)*?>|\$\{(?:<expr>)*?\}/.source.replace(/<expr>/g,function(){return u}),"gi");n.languages["markup-templating"].buildPlaceholders(S,"ftl",A)}),n.hooks.add("after-tokenize",function(S){n.languages["markup-templating"].tokenizePlaceholders(S,"ftl")})})(s)}gml.displayName="gml";gml.aliases=["gamemakerlanguage"];function gml(s){s.register(clike),s.languages.gamemakerlanguage=s.languages.gml=s.languages.extend("clike",{keyword:/\b(?:break|case|continue|default|do|else|enum|exit|for|globalvar|if|repeat|return|switch|until|var|while)\b/,number:/(?:\b0x[\da-f]+|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ulf]{0,4}/i,operator:/--|\+\+|[-+%/=]=?|!=|\*\*?=?|<[<=>]?|>[=>]?|&&?|\^\^?|\|\|?|~|\b(?:and|at|not|or|with|xor)\b/,constant:/\b(?:GM_build_date|GM_version|action_(?:continue|restart|reverse|stop)|all|gamespeed_(?:fps|microseconds)|global|local|noone|other|pi|pointer_(?:invalid|null)|self|timezone_(?:local|utc)|undefined|ev_(?:create|destroy|step|alarm|keyboard|mouse|collision|other|draw|draw_(?:begin|end|post|pre)|keypress|keyrelease|trigger|(?:left|middle|no|right)_button|(?:left|middle|right)_press|(?:left|middle|right)_release|mouse_(?:enter|leave|wheel_down|wheel_up)|global_(?:left|middle|right)_button|global_(?:left|middle|right)_press|global_(?:left|middle|right)_release|joystick(?:1|2)_(?:button1|button2|button3|button4|button5|button6|button7|button8|down|left|right|up)|outside|boundary|game_start|game_end|room_start|room_end|no_more_lives|animation_end|end_of_path|no_more_health|user\d|gui|gui_begin|gui_end|step_(?:begin|end|normal))|vk_(?:alt|anykey|backspace|control|delete|down|end|enter|escape|home|insert|left|nokey|pagedown|pageup|pause|printscreen|return|right|shift|space|tab|up|f\d|numpad\d|add|decimal|divide|lalt|lcontrol|lshift|multiply|ralt|rcontrol|rshift|subtract)|achievement_(?:filter_(?:all_players|favorites_only|friends_only)|friends_info|info|leaderboard_info|our_info|pic_loaded|show_(?:achievement|bank|friend_picker|leaderboard|profile|purchase_prompt|ui)|type_challenge|type_score_challenge)|asset_(?:font|object|path|room|script|shader|sound|sprite|tiles|timeline|unknown)|audio_(?:3d|falloff_(?:exponent_distance|exponent_distance_clamped|inverse_distance|inverse_distance_clamped|linear_distance|linear_distance_clamped|none)|mono|new_system|old_system|stereo)|bm_(?:add|complex|dest_alpha|dest_color|dest_colour|inv_dest_alpha|inv_dest_color|inv_dest_colour|inv_src_alpha|inv_src_color|inv_src_colour|max|normal|one|src_alpha|src_alpha_sat|src_color|src_colour|subtract|zero)|browser_(?:chrome|firefox|ie|ie_mobile|not_a_browser|opera|safari|safari_mobile|tizen|unknown|windows_store)|buffer_(?:bool|f16|f32|f64|fast|fixed|generalerror|grow|invalidtype|network|outofbounds|outofspace|s16|s32|s8|seek_end|seek_relative|seek_start|string|text|u16|u32|u64|u8|vbuffer|wrap)|c_(?:aqua|black|blue|dkgray|fuchsia|gray|green|lime|ltgray|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow)|cmpfunc_(?:always|equal|greater|greaterequal|less|lessequal|never|notequal)|cr_(?:appstart|arrow|beam|cross|default|drag|handpoint|hourglass|none|size_all|size_nesw|size_ns|size_nwse|size_we|uparrow)|cull_(?:clockwise|counterclockwise|noculling)|device_(?:emulator|tablet)|device_ios_(?:ipad|ipad_retina|iphone|iphone5|iphone6|iphone6plus|iphone_retina|unknown)|display_(?:landscape|landscape_flipped|portrait|portrait_flipped)|dll_(?:cdecl|cdel|stdcall)|ds_type_(?:grid|list|map|priority|queue|stack)|ef_(?:cloud|ellipse|explosion|firework|flare|rain|ring|smoke|smokeup|snow|spark|star)|fa_(?:archive|bottom|center|directory|hidden|left|middle|readonly|right|sysfile|top|volumeid)|fb_login_(?:default|fallback_to_webview|forcing_safari|forcing_webview|no_fallback_to_webview|use_system_account)|iap_(?:available|canceled|ev_consume|ev_product|ev_purchase|ev_restore|ev_storeload|failed|purchased|refunded|status_available|status_loading|status_processing|status_restoring|status_unavailable|status_uninitialised|storeload_failed|storeload_ok|unavailable)|leaderboard_type_(?:number|time_mins_secs)|lighttype_(?:dir|point)|matrix_(?:projection|view|world)|mb_(?:any|left|middle|none|right)|network_(?:config_(?:connect_timeout|disable_reliable_udp|enable_reliable_udp|use_non_blocking_socket)|socket_(?:bluetooth|tcp|udp)|type_(?:connect|data|disconnect|non_blocking_connect))|of_challenge_(?:lose|tie|win)|os_(?:android|ios|linux|macosx|ps3|ps4|psvita|unknown|uwp|win32|win8native|windows|winphone|xboxone)|phy_debug_render_(?:aabb|collision_pairs|coms|core_shapes|joints|obb|shapes)|phy_joint_(?:anchor_1_x|anchor_1_y|anchor_2_x|anchor_2_y|angle|angle_limits|damping_ratio|frequency|length_1|length_2|lower_angle_limit|max_force|max_length|max_motor_force|max_motor_torque|max_torque|motor_force|motor_speed|motor_torque|reaction_force_x|reaction_force_y|reaction_torque|speed|translation|upper_angle_limit)|phy_particle_data_flag_(?:category|color|colour|position|typeflags|velocity)|phy_particle_flag_(?:colormixing|colourmixing|elastic|powder|spring|tensile|viscous|wall|water|zombie)|phy_particle_group_flag_(?:rigid|solid)|pr_(?:linelist|linestrip|pointlist|trianglefan|trianglelist|trianglestrip)|ps_(?:distr|shape)_(?:diamond|ellipse|gaussian|invgaussian|line|linear|rectangle)|pt_shape_(?:circle|cloud|disk|explosion|flare|line|pixel|ring|smoke|snow|spark|sphere|square|star)|ty_(?:real|string)|gp_(?:face\d|axislh|axislv|axisrh|axisrv|padd|padl|padr|padu|select|shoulderl|shoulderlb|shoulderr|shoulderrb|start|stickl|stickr)|lb_disp_(?:none|numeric|time_ms|time_sec)|lb_sort_(?:ascending|descending|none)|ov_(?:achievements|community|friends|gamegroup|players|settings)|ugc_(?:filetype_(?:community|microtrans)|list_(?:Favorited|Followed|Published|Subscribed|UsedOrPlayed|VotedDown|VotedOn|VotedUp|WillVoteLater)|match_(?:AllGuides|Artwork|Collections|ControllerBindings|IntegratedGuides|Items|Items_Mtx|Items_ReadyToUse|Screenshots|UsableInGame|Videos|WebGuides)|query_(?:AcceptedForGameRankedByAcceptanceDate|CreatedByFriendsRankedByPublicationDate|FavoritedByFriendsRankedByPublicationDate|NotYetRated)|query_RankedBy(?:NumTimesReported|PublicationDate|TextSearch|TotalVotesAsc|Trend|Vote|VotesUp)|result_success|sortorder_CreationOrder(?:Asc|Desc)|sortorder_(?:ForModeration|LastUpdatedDesc|SubscriptionDateDesc|TitleAsc|VoteScoreDesc)|visibility_(?:friends_only|private|public))|vertex_usage_(?:binormal|blendindices|blendweight|color|colour|depth|fog|normal|position|psize|sample|tangent|texcoord|textcoord)|vertex_type_(?:float\d|color|colour|ubyte4)|input_type|layerelementtype_(?:background|instance|oldtilemap|particlesystem|sprite|tile|tilemap|undefined)|se_(?:chorus|compressor|echo|equalizer|flanger|gargle|none|reverb)|text_type|tile_(?:flip|index_mask|mirror|rotate)|(?:obj|rm|scr|spr)\w+)\b/,variable:/\b(?:alarm|application_surface|async_load|background_(?:alpha|blend|color|colour|foreground|height|hspeed|htiled|index|showcolor|showcolour|visible|vspeed|vtiled|width|x|xscale|y|yscale)|bbox_(?:bottom|left|right|top)|browser_(?:height|width)|caption_(?:health|lives|score)|current_(?:day|hour|minute|month|second|time|weekday|year)|cursor_sprite|debug_mode|delta_time|direction|display_aa|error_(?:last|occurred)|event_(?:action|number|object|type)|fps|fps_real|friction|game_(?:display|project|save)_(?:id|name)|gamemaker_(?:pro|registered|version)|gravity|gravity_direction|(?:h|v)speed|health|iap_data|id|image_(?:alpha|angle|blend|depth|index|number|speed|xscale|yscale)|instance_(?:count|id)|keyboard_(?:key|lastchar|lastkey|string)|layer|lives|mask_index|mouse_(?:button|lastbutton|x|y)|object_index|os_(?:browser|device|type|version)|path_(?:endaction|index|orientation|position|positionprevious|scale|speed)|persistent|phy_(?:rotation|(?:col_normal|collision|com|linear_velocity|position|speed)_(?:x|y)|angular_(?:damping|velocity)|position_(?:x|y)previous|speed|linear_damping|bullet|fixed_rotation|active|mass|inertia|dynamic|kinematic|sleeping|collision_points)|pointer_(?:invalid|null)|room|room_(?:caption|first|height|last|persistent|speed|width)|score|secure_mode|show_(?:health|lives|score)|solid|speed|sprite_(?:height|index|width|xoffset|yoffset)|temp_directory|timeline_(?:index|loop|position|running|speed)|transition_(?:color|kind|steps)|undefined|view_(?:angle|current|enabled|(?:h|v)(?:border|speed)|(?:h|w|x|y)port|(?:h|w|x|y)view|object|surface_id|visible)|visible|webgl_enabled|working_directory|(?:x|y)(?:previous|start)|x|y|argument(?:_relitive|_count|\d)|argument|global|local|other|self)\b/})}gap.displayName="gap";gap.aliases=[];function gap(s){s.languages.gap={shell:{pattern:/^gap>[\s\S]*?(?=^gap>|$(?![\s\S]))/m,greedy:!0,inside:{gap:{pattern:/^(gap>).+(?:(?:\r(?:\n|(?!\n))|\n)>.*)*/,lookbehind:!0,inside:null},punctuation:/^gap>/}},comment:{pattern:/#.*/,greedy:!0},string:{pattern:/(^|[^\\'"])(?:'(?:[^\r\n\\']|\\.){1,10}'|"(?:[^\r\n\\"]|\\.)*"(?!")|"""[\s\S]*?""")/,lookbehind:!0,greedy:!0,inside:{continuation:{pattern:/([\r\n])>/,lookbehind:!0,alias:"punctuation"}}},keyword:/\b(?:Assert|Info|IsBound|QUIT|TryNextMethod|Unbind|and|atomic|break|continue|do|elif|else|end|fi|for|function|if|in|local|mod|not|od|or|quit|readonly|readwrite|rec|repeat|return|then|until|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,number:{pattern:/(^|[^\w.]|\.\.)(?:\d+(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+)?(?:_[a-z]?)?(?=$|[^\w.]|\.\.)/,lookbehind:!0},continuation:{pattern:/([\r\n])>/,lookbehind:!0,alias:"punctuation"},operator:/->|[-+*/^~=!]|<>|[<>]=?|:=|\.\./,punctuation:/[()[\]{},;.:]/},s.languages.gap.shell.inside.gap.inside=s.languages.gap}gcode.displayName="gcode";gcode.aliases=[];function gcode(s){s.languages.gcode={comment:/;.*|\B\(.*?\)\B/,string:{pattern:/"(?:""|[^"])*"/,greedy:!0},keyword:/\b[GM]\d+(?:\.\d+)?\b/,property:/\b[A-Z]/,checksum:{pattern:/(\*)\d+/,lookbehind:!0,alias:"number"},punctuation:/[:*]/}}gdscript.displayName="gdscript";gdscript.aliases=[];function gdscript(s){s.languages.gdscript={comment:/#.*/,string:{pattern:/@?(?:("|')(?:(?!\1)[^\n\\]|\\[\s\S])*\1(?!"|')|"""(?:[^\\]|\\[\s\S])*?""")/,greedy:!0},"class-name":{pattern:/(^(?:class|class_name|extends)[ \t]+|^export\([ \t]*|\bas[ \t]+|(?:\b(?:const|var)[ \t]|[,(])[ \t]*\w+[ \t]*:[ \t]*|->[ \t]*)[a-zA-Z_]\w*/m,lookbehind:!0},keyword:/\b(?:and|as|assert|break|breakpoint|class|class_name|const|continue|elif|else|enum|export|extends|for|func|if|in|is|master|mastersync|match|not|null|onready|or|pass|preload|puppet|puppetsync|remote|remotesync|return|self|setget|signal|static|tool|var|while|yield)\b/,function:/\b[a-z_]\w*(?=[ \t]*\()/i,variable:/\$\w+/,number:[/\b0b[01_]+\b|\b0x[\da-fA-F_]+\b|(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.[\d_]+)(?:e[+-]?[\d_]+)?\b/,/\b(?:INF|NAN|PI|TAU)\b/],constant:/\b[A-Z][A-Z_\d]*\b/,boolean:/\b(?:false|true)\b/,operator:/->|:=|&&|\|\||<<|>>|[-+*/%&|!<>=]=?|[~^]/,punctuation:/[.:,;()[\]{}]/}}gedcom.displayName="gedcom";gedcom.aliases=[];function gedcom(s){s.languages.gedcom={"line-value":{pattern:/(^[\t ]*\d+ +(?:@\w[\w!"$%&'()*+,\-./:;<=>?[\\\]^`{|}~\x80-\xfe #]*@ +)?\w+ ).+/m,lookbehind:!0,inside:{pointer:{pattern:/^@\w[\w!"$%&'()*+,\-./:;<=>?[\\\]^`{|}~\x80-\xfe #]*@$/,alias:"variable"}}},record:{pattern:/(^[\t ]*\d+ +(?:@\w[\w!"$%&'()*+,\-./:;<=>?[\\\]^`{|}~\x80-\xfe #]*@ +)?)\w+/m,lookbehind:!0,alias:"tag"},level:{pattern:/(^[\t ]*)\d+/m,lookbehind:!0,alias:"number"},pointer:{pattern:/@\w[\w!"$%&'()*+,\-./:;<=>?[\\\]^`{|}~\x80-\xfe #]*@/,alias:"variable"}}}gettext.displayName="gettext";gettext.aliases=["po"];function gettext(s){s.languages.gettext={comment:[{pattern:/# .*/,greedy:!0,alias:"translator-comment"},{pattern:/#\..*/,greedy:!0,alias:"extracted-comment"},{pattern:/#:.*/,greedy:!0,alias:"reference-comment"},{pattern:/#,.*/,greedy:!0,alias:"flag-comment"},{pattern:/#\|.*/,greedy:!0,alias:"previously-untranslated-comment"},{pattern:/#.*/,greedy:!0}],string:{pattern:/(^|[^\\])"(?:[^"\\]|\\.)*"/,lookbehind:!0,greedy:!0},keyword:/^msg(?:ctxt|id|id_plural|str)\b/m,number:/\b\d+\b/,punctuation:/[\[\]]/},s.languages.po=s.languages.gettext}gherkin.displayName="gherkin";gherkin.aliases=[];function gherkin(s){(function(n){var u=/(?:\r?\n|\r)[ \t]*\|.+\|(?:(?!\|).)*/.source;n.languages.gherkin={pystring:{pattern:/("""|''')[\s\S]+?\1/,alias:"string"},comment:{pattern:/(^[ \t]*)#.*/m,lookbehind:!0},tag:{pattern:/(^[ \t]*)@\S*/m,lookbehind:!0},feature:{pattern:/((?:^|\r?\n|\r)[ \t]*)(?:Ability|Ahoy matey!|Arwedd|Aspekt|Besigheid Behoefte|Business Need|Caracteristica|Caracterstica|Egenskab|Egenskap|Eiginleiki|Feature|Fa|Fitur|Fonctionnalit|Fonksyonalite|Funcionalidade|Funcionalitat|Functionalitate|Funcionalitate|Funcionalitate|Functionaliteit|Fungsi|Funkcia|Funkcija|Funkcionalitte|Funkcionalnost|Funkcja|Funksie|Funktionalitt|Funktionalitit|Funzionalit|Hwaet|Hwt|Jellemz|Karakteristik|Lastnost|Mak|Mogucnost|laH|Mogunost|Moznosti|Monosti|OH HAI|Omadus|Ominaisuus|Osobina|zellik|Potrzeba biznesowa|perbogh|poQbogh malja'|Poadavek|Poiadavka|Pretty much|Qap|Qu'meH 'ut|Savyb|Tnh nng|Trajto|Vermo|Vlastnos|Waciwo|Znailnost||||||||||||||||  || || ||||||||||):(?:[^:\r\n]+(?:\r?\n|\r|$))*/,lookbehind:!0,inside:{important:{pattern:/(:)[^\r\n]+/,lookbehind:!0},keyword:/[^:\r\n]+:/}},scenario:{pattern:/(^[ \t]*)(?:Abstract Scenario|Abstrakt Scenario|Achtergrond|Aer|r|Agtergrond|All y'all|Antecedentes|Antecedents|Atburars|Atburarsir|Awww, look mate|B4|Background|Baggrund|Bakgrund|Bakgrunn|Bakgrunnur|Beispiele|Beispiller|Bi cnh|Cefndir|Cenario|Cenrio|Cenario de Fundo|Cenrio de Fundo|Cenarios|Cenrios|Contesto|Context|Contexte|Contexto|Conto|Contoh|Contone|Dmi|Dasar|Dead men tell no tales|Delineacao do Cenario|Delineao do Cenrio|Dis is what went down|D liu|Dyagram Senaryo|Dyagram senaryo|Egzanp|Ejemplos|Eksempler|Ekzemploj|Enghreifftiau|Esbozo do escenario|Escenari|Escenario|Esempi|Esquema de l'escenari|Esquema del escenario|Esquema do Cenario|Esquema do Cenrio|EXAMPLZ|Examples|Exempel|Exemple|Exemples|Exemplos|First off|Fono|Forgatknyv|Forgatknyv vzlat|Fundo|Gemi|Grundlage|Hannergrond|ghantoH|Httr|Heave to|Istorik|Juhtumid|Keadaan|Khung kch bn|Khung tnh hung|Kch bn|Koncept|Konsep skenario|Kontks|Kontekst|Kontekstas|Konteksts|Kontext|Konturo de la scenaro|Latar Belakang|lut chovnatlh|lut|lutmey|Lsing Atburarsar|Lsing Dma|MISHUN SRSLY|MISHUN|Menggariskan Senario|mo'|Nrt Scenra|Nrt Scne|Nrt Scenru|Oris scenarija|rnekler|Osnova|Osnova Scenra|Osnova scne|Osnutek|Ozadje|Paraugs|Pavyzdiai|Pldk|Piemri|Plan du scnario|Plan du Scnario|Plan Senaryo|Plan senaryo|Plang vum Szenario|Pozad|Pozadie|Pozadina|Prklady|Pklady|Primer|Primeri|Primjeri|Przykady|Raamstsenaarium|Reckon it's like|Rerefons|Scenr|Scn|Scenarie|Scenarij|Scenarijai|Scenarijaus ablonas|Scenariji|Scenrijs|Scenrijs pc parauga|Scenarijus|Scenario|Scnario|Scenario Amlinellol|Scenario Outline|Scenario Template|Scenariomal|Scenariomall|Scenarios|Scenariu|Scenariusz|Scenaro|Schema dello scenario|Se e|Se the|Se e|Senario|Senaryo Deskripsyon|Senaryo deskripsyon|Senaryo|Senaryo tasla|Shiver me timbers|Situcija|Situai|Situasie Uiteensetting|Situasie|Skenario konsep|Skenario|Skica|Structura scenariu|Structur scenariu|Struktura scenarija|Stsenaarium|Swa hwaer swa|Swa|Swa hwr swa|Szablon scenariusza|Szenario|Szenariogrundriss|Tapaukset|Tapaus|Tapausaihio|Taust|Tausta|Template Keadaan|Template Senario|Template Situai|The thing of it is|Tnh hung|Variantai|Voorbeelde|Voorbeelden|Wharrimean is|Yo-ho-ho|You'll wanna|Zaoenia|| ||||||||||||||||||  || | | || | |||||||| ||| || |||| ||   || ||| |||| |  |||||||||||||||||| ||||||||||||||||||):[^:\r\n]*/m,lookbehind:!0,inside:{important:{pattern:/(:)[^\r\n]*/,lookbehind:!0},keyword:/[^:\r\n]+:/}},"table-body":{pattern:RegExp("("+u+")(?:"+u+")+"),lookbehind:!0,inside:{outline:{pattern:/<[^>]+>/,alias:"variable"},td:{pattern:/\s*[^\s|][^|]*/,alias:"string"},punctuation:/\|/}},"table-head":{pattern:RegExp(u),inside:{th:{pattern:/\s*[^\s|][^|]*/,alias:"variable"},punctuation:/\|/}},atrule:{pattern:/(^[ \t]+)(?:'a|'ach|'ej|7|a|A tak|A taktie|A tie|A zrove|Aber|Ac|Adott|Akkor|Ak|Aleshores|Ale|Ali|Allora|Alors|Als|Ama|Amennyiben|Amikor|Ampak|an|AN|Ananging|And y'all|And|Angenommen|Anrhegedig a|An|Apabila|Ats|Atesa|Atunci|Avast!|Aye|A|awer|Bagi|Banjur|Bet|Bit|Blimey!|Buh|But at the end of the day I reckon|But y'all|But|BUT|Cal|Cnd|Cand|Cando|Ce|Cuando|e|a e|a|Dadas|Dada|Dados|Dado|DaH ghu' bejlu'|dann|Dann|Dano|Dan|Dar|Dat fiind|Data|Date fiind|Date|Dati fiind|Dati|Dai fiind|Dai fiind|DEN|Dato|De|Den youse gotta|Dengan|Diberi|Diyelim ki|Donada|Donat|Donitao|Do|Dun|Duota|urh|Eeldades|Ef|Eer ki|Entao|Ento|Entn|E|En|Entonces|Epi|s|Etant donne|Etant donn|Et|tant donnes|tant donne|tant donn|Etant donnes|Etant donns|tant donns|Fakat|Gangway!|Gdy|Gegeben seien|Gegeben sei|Gegeven|Gegewe|ghu' noblu'|Gitt|Given y'all|Given|Givet|Givun|Ha|Cho|I CAN HAZ|In|Ir|It's just unbelievable|I|Ja|Jeli|Jeeli|Kad|Kada|Kadar|Kai|Kaj|Kdy|Ke|Kemudian|Ketika|Khi|Kiedy|Ko|Kuid|Kui|Kun|Lan|latlh|Le sa a|Let go and haul|Le|L sa a|L|Logo|Lorsqu'<|Lorsque|m|Maar|Mais|Majc|Ma|Majd|Maka|Manawa|Mas|Men|Menawa|Mutta|Nalika|Nalikaning|Nanging|Nr|Nr|Nato|Nhng|Niin|Njuk|O zaman|Och|Og|Oletetaan|Ond|Onda|Oraz|Pak|Pero|Per|Podano|Pokia|Pokud|Potem|Potom|Privzeto|Pryd|Quan|Quand|Quando|qaSDI'|S|Sed|Se|Siis|Sipoze ke|Sipoze Ke|Sipoze|Si|i|i|Soit|Stel|Tada|Tad|Takrat|Tak|Tapi|Ter|Tetapi|Tha the|Tha|Then y'all|Then|Th|Thurh|Toda|Too right|Un|Und|ugeholl|V|vaj|Vendar|Ve|wann|Wanneer|WEN|Wenn|When y'all|When|Wtedy|Wun|Y'know|Yeah nah|Yna|Youse know like when|Youse know when youse got|Y|Za predpokladu|Za pedpokladu|Zadan|Zadani|Zadano|Zadate|Zadato|Zakadajc|Zaradi|Zatati|a e|a||egar|urh|||||| |||||||||||||||||||||  ||||||||||||, |||||||||||||||||||||| |||||||| |||||||||||||||||||| ||||| ||||||||||||||<|<|<|<|<|<|<|<|<|<|<|<|<|<|<|<|<|<|<|<|<|<|<|<|<|<|<|<|<)(?=[ \t])/m,lookbehind:!0},string:{pattern:/"(?:\\.|[^"\\\r\n])*"|'(?:\\.|[^'\\\r\n])*'/,inside:{outline:{pattern:/<[^>]+>/,alias:"variable"}}},outline:{pattern:/<[^>]+>/,alias:"variable"}}})(s)}git.displayName="git";git.aliases=[];function git(s){s.languages.git={comment:/^#.*/m,deleted:/^[-].*/m,inserted:/^\+.*/m,string:/("|')(?:\\.|(?!\1)[^\\\r\n])*\1/,command:{pattern:/^.*\$ git .*$/m,inside:{parameter:/\s--?\w+/}},coord:/^@@.*@@$/m,"commit-sha1":/^commit \w{40}$/m}}glsl.displayName="glsl";glsl.aliases=[];function glsl(s){s.register(c$1),s.languages.glsl=s.languages.extend("c",{keyword:/\b(?:active|asm|atomic_uint|attribute|[ibdu]?vec[234]|bool|break|buffer|case|cast|centroid|class|coherent|common|const|continue|d?mat[234](?:x[234])?|default|discard|do|double|else|enum|extern|external|false|filter|fixed|flat|float|for|fvec[234]|goto|half|highp|hvec[234]|[iu]?sampler2DMS(?:Array)?|[iu]?sampler2DRect|[iu]?samplerBuffer|[iu]?samplerCube|[iu]?samplerCubeArray|[iu]?sampler[123]D|[iu]?sampler[12]DArray|[iu]?image2DMS(?:Array)?|[iu]?image2DRect|[iu]?imageBuffer|[iu]?imageCube|[iu]?imageCubeArray|[iu]?image[123]D|[iu]?image[12]DArray|if|in|inline|inout|input|int|interface|invariant|layout|long|lowp|mediump|namespace|noinline|noperspective|out|output|partition|patch|precise|precision|public|readonly|resource|restrict|return|sample|sampler[12]DArrayShadow|sampler[12]DShadow|sampler2DRectShadow|sampler3DRect|samplerCubeArrayShadow|samplerCubeShadow|shared|short|sizeof|smooth|static|struct|subroutine|superp|switch|template|this|true|typedef|uint|uniform|union|unsigned|using|varying|void|volatile|while|writeonly)\b/})}gn.displayName="gn";gn.aliases=["gni"];function gn(s){s.languages.gn={comment:{pattern:/#.*/,greedy:!0},"string-literal":{pattern:/(^|[^\\"])"(?:[^\r\n"\\]|\\.)*"/,lookbehind:!0,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$(?:\{[\s\S]*?\}|[a-zA-Z_]\w*|0x[a-fA-F0-9]{2})/,lookbehind:!0,inside:{number:/^\$0x[\s\S]{2}$/,variable:/^\$\w+$/,"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},expression:{pattern:/[\s\S]+/,inside:null}}},string:/[\s\S]+/}},keyword:/\b(?:else|if)\b/,boolean:/\b(?:false|true)\b/,"builtin-function":{pattern:/\b(?:assert|defined|foreach|import|pool|print|template|tool|toolchain)(?=\s*\()/i,alias:"keyword"},function:/\b[a-z_]\w*(?=\s*\()/i,constant:/\b(?:current_cpu|current_os|current_toolchain|default_toolchain|host_cpu|host_os|root_build_dir|root_gen_dir|root_out_dir|target_cpu|target_gen_dir|target_os|target_out_dir)\b/,number:/-?\b\d+\b/,operator:/[-+!=<>]=?|&&|\|\|/,punctuation:/[(){}[\],.]/},s.languages.gn["string-literal"].inside.interpolation.inside.expression.inside=s.languages.gn,s.languages.gni=s.languages.gn}linkerScript.displayName="linker-script";linkerScript.aliases=["ld"];function linkerScript(s){s.languages["linker-script"]={comment:{pattern:/(^|\s)\/\*[\s\S]*?(?:$|\*\/)/,lookbehind:!0,greedy:!0},identifier:{pattern:/"[^"\r\n]*"/,greedy:!0},"location-counter":{pattern:/\B\.\B/,alias:"important"},section:{pattern:/(^|[^\w*])\.\w+\b/,lookbehind:!0,alias:"keyword"},function:/\b[A-Z][A-Z_]*(?=\s*\()/,number:/\b(?:0[xX][a-fA-F0-9]+|\d+)[KM]?\b/,operator:/>>=?|<<=?|->|\+\+|--|&&|\|\||::|[?:~]|[-+*/%&|^!=<>]=?/,punctuation:/[(){},;]/},s.languages.ld=s.languages["linker-script"]}go.displayName="go";go.aliases=[];function go(s){s.register(clike),s.languages.go=s.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"|`[^`]*`/,lookbehind:!0,greedy:!0},keyword:/\b(?:break|case|chan|const|continue|default|defer|else|fallthrough|for|func|go(?:to)?|if|import|interface|map|package|range|return|select|struct|switch|type|var)\b/,boolean:/\b(?:_|false|iota|nil|true)\b/,number:[/\b0(?:b[01_]+|o[0-7_]+)i?\b/i,/\b0x(?:[a-f\d_]+(?:\.[a-f\d_]*)?|\.[a-f\d_]+)(?:p[+-]?\d+(?:_\d+)*)?i?(?!\w)/i,/(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?[\d_]+)?i?(?!\w)/i],operator:/[*\/%^!=]=?|\+[=+]?|-[=-]?|\|[=|]?|&(?:=|&|\^=?)?|>(?:>=?|=)?|<(?:<=?|=|-)?|:=|\.\.\./,builtin:/\b(?:append|bool|byte|cap|close|complex|complex(?:64|128)|copy|delete|error|float(?:32|64)|u?int(?:8|16|32|64)?|imag|len|make|new|panic|print(?:ln)?|real|recover|rune|string|uintptr)\b/}),s.languages.insertBefore("go","string",{char:{pattern:/'(?:\\.|[^'\\\r\n]){0,10}'/,greedy:!0}}),delete s.languages.go["class-name"]}goModule.displayName="go-module";goModule.aliases=["go-mod"];function goModule(s){s.languages["go-mod"]=s.languages["go-module"]={comment:{pattern:/\/\/.*/,greedy:!0},version:{pattern:/(^|[\s()[\],])v\d+\.\d+\.\d+(?:[+-][-+.\w]*)?(?![^\s()[\],])/,lookbehind:!0,alias:"number"},"go-version":{pattern:/((?:^|\s)go\s+)\d+(?:\.\d+){1,2}/,lookbehind:!0,alias:"number"},keyword:{pattern:/^([ \t]*)(?:exclude|go|module|replace|require|retract)\b/m,lookbehind:!0},operator:/=>/,punctuation:/[()[\],]/}}gradle.displayName="gradle";gradle.aliases=[];function gradle(s){s.register(clike),(function(n){var u={pattern:/((?:^|[^\\$])(?:\\{2})*)\$(?:\w+|\{[^{}]*\})/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{?|\}$/,alias:"punctuation"},expression:{pattern:/[\s\S]+/,inside:null}}};n.languages.gradle=n.languages.extend("clike",{string:{pattern:/'''(?:[^\\]|\\[\s\S])*?'''|'(?:\\.|[^\\'\r\n])*'/,greedy:!0},keyword:/\b(?:apply|def|dependencies|else|if|implementation|import|plugin|plugins|project|repositories|repository|sourceSets|tasks|val)\b/,number:/\b(?:0b[01_]+|0x[\da-f_]+(?:\.[\da-f_p\-]+)?|[\d_]+(?:\.[\d_]+)?(?:e[+-]?\d+)?)[glidf]?\b/i,operator:{pattern:/(^|[^.])(?:~|==?~?|\?[.:]?|\*(?:[.=]|\*=?)?|\.[@&]|\.\.<|\.\.(?!\.)|-[-=>]?|\+[+=]?|!=?|<(?:<=?|=>?)?|>(?:>>?=?|=)?|&[&=]?|\|[|=]?|\/=?|\^=?|%=?)/,lookbehind:!0},punctuation:/\.+|[{}[\];(),:$]/}),n.languages.insertBefore("gradle","string",{shebang:{pattern:/#!.+/,alias:"comment",greedy:!0},"interpolation-string":{pattern:/"""(?:[^\\]|\\[\s\S])*?"""|(["/])(?:\\.|(?!\1)[^\\\r\n])*\1|\$\/(?:[^/$]|\$(?:[/$]|(?![/$]))|\/(?!\$))*\/\$/,greedy:!0,inside:{interpolation:u,string:/[\s\S]+/}}}),n.languages.insertBefore("gradle","punctuation",{"spock-block":/\b(?:and|cleanup|expect|given|setup|then|when|where):/}),n.languages.insertBefore("gradle","function",{annotation:{pattern:/(^|[^.])@\w+/,lookbehind:!0,alias:"punctuation"}}),u.inside.expression.inside=n.languages.gradle})(s)}graphql.displayName="graphql";graphql.aliases=[];function graphql(s){s.languages.graphql={comment:/#.*/,description:{pattern:/(?:"""(?:[^"]|(?!""")")*"""|"(?:\\.|[^\\"\r\n])*")(?=\s*[a-z_])/i,greedy:!0,alias:"string",inside:{"language-markdown":{pattern:/(^"(?:"")?)(?!\1)[\s\S]+(?=\1$)/,lookbehind:!0,inside:s.languages.markdown}}},string:{pattern:/"""(?:[^"]|(?!""")")*"""|"(?:\\.|[^\\"\r\n])*"/,greedy:!0},number:/(?:\B-|\b)\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,boolean:/\b(?:false|true)\b/,variable:/\$[a-z_]\w*/i,directive:{pattern:/@[a-z_]\w*/i,alias:"function"},"attr-name":{pattern:/\b[a-z_]\w*(?=\s*(?:\((?:[^()"]|"(?:\\.|[^\\"\r\n])*")*\))?:)/i,greedy:!0},"atom-input":{pattern:/\b[A-Z]\w*Input\b/,alias:"class-name"},scalar:/\b(?:Boolean|Float|ID|Int|String)\b/,constant:/\b[A-Z][A-Z_\d]*\b/,"class-name":{pattern:/(\b(?:enum|implements|interface|on|scalar|type|union)\s+|&\s*|:\s*|\[)[A-Z_]\w*/,lookbehind:!0},fragment:{pattern:/(\bfragment\s+|\.{3}\s*(?!on\b))[a-zA-Z_]\w*/,lookbehind:!0,alias:"function"},"definition-mutation":{pattern:/(\bmutation\s+)[a-zA-Z_]\w*/,lookbehind:!0,alias:"function"},"definition-query":{pattern:/(\bquery\s+)[a-zA-Z_]\w*/,lookbehind:!0,alias:"function"},keyword:/\b(?:directive|enum|extend|fragment|implements|input|interface|mutation|on|query|repeatable|scalar|schema|subscription|type|union)\b/,operator:/[!=|&]|\.{3}/,"property-query":/\w+(?=\s*\()/,object:/\w+(?=\s*\{)/,punctuation:/[!(){}\[\]:=,]/,property:/\w+/},s.hooks.add("after-tokenize",function(u){if(u.language!=="graphql")return;var f=u.tokens.filter(function(z){return typeof z!="string"&&z.type!=="comment"&&z.type!=="scalar"}),y=0;function S(z){return f[y+z]}function A(z,U){U=U||0;for(var G=0;G<z.length;G++){var Y=S(G+U);if(!Y||Y.type!==z[G])return!1}return!0}function w(z,U){for(var G=1,Y=y;Y<f.length;Y++){var K=f[Y],Z=K.content;if(K.type==="punctuation"&&typeof Z=="string"){if(z.test(Z))G++;else if(U.test(Z)&&(G--,G===0))return Y}}return-1}function C(z,U){var G=z.alias;G?Array.isArray(G)||(z.alias=G=[G]):z.alias=G=[],G.push(U)}for(;y<f.length;){var T=f[y++];if(T.type==="keyword"&&T.content==="mutation"){var R=[];if(A(["definition-mutation","punctuation"])&&S(1).content==="("){y+=2;var I=w(/^\($/,/^\)$/);if(I===-1)continue;for(;y<I;y++){var N=S(0);N.type==="variable"&&(C(N,"variable-input"),R.push(N.content))}y=I+1}if(A(["punctuation","property-query"])&&S(0).content==="{"&&(y++,C(S(0),"property-mutation"),R.length>0)){var L=w(/^\{$/,/^\}$/);if(L===-1)continue;for(var F=y;F<L;F++){var H=f[F];H.type==="variable"&&R.indexOf(H.content)>=0&&C(H,"variable-input")}}}}})}groovy.displayName="groovy";groovy.aliases=[];function groovy(s){s.register(clike),(function(n){var u={pattern:/((?:^|[^\\$])(?:\\{2})*)\$(?:\w+|\{[^{}]*\})/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{?|\}$/,alias:"punctuation"},expression:{pattern:/[\s\S]+/,inside:null}}};n.languages.groovy=n.languages.extend("clike",{string:{pattern:/'''(?:[^\\]|\\[\s\S])*?'''|'(?:\\.|[^\\'\r\n])*'/,greedy:!0},keyword:/\b(?:abstract|as|assert|boolean|break|byte|case|catch|char|class|const|continue|def|default|do|double|else|enum|extends|final|finally|float|for|goto|if|implements|import|in|instanceof|int|interface|long|native|new|package|private|protected|public|return|short|static|strictfp|super|switch|synchronized|this|throw|throws|trait|transient|try|void|volatile|while)\b/,number:/\b(?:0b[01_]+|0x[\da-f_]+(?:\.[\da-f_p\-]+)?|[\d_]+(?:\.[\d_]+)?(?:e[+-]?\d+)?)[glidf]?\b/i,operator:{pattern:/(^|[^.])(?:~|==?~?|\?[.:]?|\*(?:[.=]|\*=?)?|\.[@&]|\.\.<|\.\.(?!\.)|-[-=>]?|\+[+=]?|!=?|<(?:<=?|=>?)?|>(?:>>?=?|=)?|&[&=]?|\|[|=]?|\/=?|\^=?|%=?)/,lookbehind:!0},punctuation:/\.+|[{}[\];(),:$]/}),n.languages.insertBefore("groovy","string",{shebang:{pattern:/#!.+/,alias:"comment",greedy:!0},"interpolation-string":{pattern:/"""(?:[^\\]|\\[\s\S])*?"""|(["/])(?:\\.|(?!\1)[^\\\r\n])*\1|\$\/(?:[^/$]|\$(?:[/$]|(?![/$]))|\/(?!\$))*\/\$/,greedy:!0,inside:{interpolation:u,string:/[\s\S]+/}}}),n.languages.insertBefore("groovy","punctuation",{"spock-block":/\b(?:and|cleanup|expect|given|setup|then|when|where):/}),n.languages.insertBefore("groovy","function",{annotation:{pattern:/(^|[^.])@\w+/,lookbehind:!0,alias:"punctuation"}}),u.inside.expression.inside=n.languages.groovy})(s)}less.displayName="less";less.aliases=[];function less(s){s.register(css),s.languages.less=s.languages.extend("css",{comment:[/\/\*[\s\S]*?\*\//,{pattern:/(^|[^\\])\/\/.*/,lookbehind:!0}],atrule:{pattern:/@[\w-](?:\((?:[^(){}]|\([^(){}]*\))*\)|[^(){};\s]|\s+(?!\s))*?(?=\s*\{)/,inside:{punctuation:/[:()]/}},selector:{pattern:/(?:@\{[\w-]+\}|[^{};\s@])(?:@\{[\w-]+\}|\((?:[^(){}]|\([^(){}]*\))*\)|[^(){};@\s]|\s+(?!\s))*?(?=\s*\{)/,inside:{variable:/@+[\w-]+/}},property:/(?:@\{[\w-]+\}|[\w-])+(?:\+_?)?(?=\s*:)/,operator:/[+\-*\/]/}),s.languages.insertBefore("less","property",{variable:[{pattern:/@[\w-]+\s*:/,inside:{punctuation:/:/}},/@@?[\w-]+/],"mixin-usage":{pattern:/([{;]\s*)[.#](?!\d)[\w-].*?(?=[(;])/,lookbehind:!0,alias:"function"}})}scss.displayName="scss";scss.aliases=[];function scss(s){s.register(css),s.languages.scss=s.languages.extend("css",{comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|\/\/.*)/,lookbehind:!0},atrule:{pattern:/@[\w-](?:\([^()]+\)|[^()\s]|\s+(?!\s))*?(?=\s+[{;])/,inside:{rule:/@[\w-]+/}},url:/(?:[-a-z]+-)?url(?=\()/i,selector:{pattern:/(?=\S)[^@;{}()]?(?:[^@;{}()\s]|\s+(?!\s)|#\{\$[-\w]+\})+(?=\s*\{(?:\}|\s|[^}][^:{}]*[:{][^}]))/,inside:{parent:{pattern:/&/,alias:"important"},placeholder:/%[-\w]+/,variable:/\$[-\w]+|#\{\$[-\w]+\}/}},property:{pattern:/(?:[-\w]|\$[-\w]|#\{\$[-\w]+\})+(?=\s*:)/,inside:{variable:/\$[-\w]+|#\{\$[-\w]+\}/}}}),s.languages.insertBefore("scss","atrule",{keyword:[/@(?:content|debug|each|else(?: if)?|extend|for|forward|function|if|import|include|mixin|return|use|warn|while)\b/i,{pattern:/( )(?:from|through)(?= )/,lookbehind:!0}]}),s.languages.insertBefore("scss","important",{variable:/\$[-\w]+|#\{\$[-\w]+\}/}),s.languages.insertBefore("scss","function",{"module-modifier":{pattern:/\b(?:as|hide|show|with)\b/i,alias:"keyword"},placeholder:{pattern:/%[-\w]+/,alias:"selector"},statement:{pattern:/\B!(?:default|optional)\b/i,alias:"keyword"},boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"},operator:{pattern:/(\s)(?:[-+*\/%]|[=!]=|<=?|>=?|and|not|or)(?=\s)/,lookbehind:!0}}),s.languages.scss.atrule.inside.rest=s.languages.scss}textile.displayName="textile";textile.aliases=[];function textile(s){s.register(markup),(function(n){var u=/\([^|()\n]+\)|\[[^\]\n]+\]|\{[^}\n]+\}/.source,f=/\)|\((?![^|()\n]+\))/.source;function y(I,N){return RegExp(I.replace(/<MOD>/g,function(){return"(?:"+u+")"}).replace(/<PAR>/g,function(){return"(?:"+f+")"}),N||"")}var S={css:{pattern:/\{[^{}]+\}/,inside:{rest:n.languages.css}},"class-id":{pattern:/(\()[^()]+(?=\))/,lookbehind:!0,alias:"attr-value"},lang:{pattern:/(\[)[^\[\]]+(?=\])/,lookbehind:!0,alias:"attr-value"},punctuation:/[\\\/]\d+|\S/},A=n.languages.textile=n.languages.extend("markup",{phrase:{pattern:/(^|\r|\n)\S[\s\S]*?(?=$|\r?\n\r?\n|\r\r)/,lookbehind:!0,inside:{"block-tag":{pattern:y(/^[a-z]\w*(?:<MOD>|<PAR>|[<>=])*\./.source),inside:{modifier:{pattern:y(/(^[a-z]\w*)(?:<MOD>|<PAR>|[<>=])+(?=\.)/.source),lookbehind:!0,inside:S},tag:/^[a-z]\w*/,punctuation:/\.$/}},list:{pattern:y(/^[*#]+<MOD>*\s+\S.*/.source,"m"),inside:{modifier:{pattern:y(/(^[*#]+)<MOD>+/.source),lookbehind:!0,inside:S},punctuation:/^[*#]+/}},table:{pattern:y(/^(?:(?:<MOD>|<PAR>|[<>=^~])+\.\s*)?(?:\|(?:(?:<MOD>|<PAR>|[<>=^~_]|[\\/]\d+)+\.|(?!(?:<MOD>|<PAR>|[<>=^~_]|[\\/]\d+)+\.))[^|]*)+\|/.source,"m"),inside:{modifier:{pattern:y(/(^|\|(?:\r?\n|\r)?)(?:<MOD>|<PAR>|[<>=^~_]|[\\/]\d+)+(?=\.)/.source),lookbehind:!0,inside:S},punctuation:/\||^\./}},inline:{pattern:y(/(^|[^a-zA-Z\d])(\*\*|__|\?\?|[*_%@+\-^~])<MOD>*.+?\2(?![a-zA-Z\d])/.source),lookbehind:!0,inside:{bold:{pattern:y(/(^(\*\*?)<MOD>*).+?(?=\2)/.source),lookbehind:!0},italic:{pattern:y(/(^(__?)<MOD>*).+?(?=\2)/.source),lookbehind:!0},cite:{pattern:y(/(^\?\?<MOD>*).+?(?=\?\?)/.source),lookbehind:!0,alias:"string"},code:{pattern:y(/(^@<MOD>*).+?(?=@)/.source),lookbehind:!0,alias:"keyword"},inserted:{pattern:y(/(^\+<MOD>*).+?(?=\+)/.source),lookbehind:!0},deleted:{pattern:y(/(^-<MOD>*).+?(?=-)/.source),lookbehind:!0},span:{pattern:y(/(^%<MOD>*).+?(?=%)/.source),lookbehind:!0},modifier:{pattern:y(/(^\*\*|__|\?\?|[*_%@+\-^~])<MOD>+/.source),lookbehind:!0,inside:S},punctuation:/[*_%?@+\-^~]+/}},"link-ref":{pattern:/^\[[^\]]+\]\S+$/m,inside:{string:{pattern:/(^\[)[^\]]+(?=\])/,lookbehind:!0},url:{pattern:/(^\])\S+$/,lookbehind:!0},punctuation:/[\[\]]/}},link:{pattern:y(/"<MOD>*[^"]+":.+?(?=[^\w/]?(?:\s|$))/.source),inside:{text:{pattern:y(/(^"<MOD>*)[^"]+(?=")/.source),lookbehind:!0},modifier:{pattern:y(/(^")<MOD>+/.source),lookbehind:!0,inside:S},url:{pattern:/(:).+/,lookbehind:!0},punctuation:/[":]/}},image:{pattern:y(/!(?:<MOD>|<PAR>|[<>=])*(?![<>=])[^!\s()]+(?:\([^)]+\))?!(?::.+?(?=[^\w/]?(?:\s|$)))?/.source),inside:{source:{pattern:y(/(^!(?:<MOD>|<PAR>|[<>=])*)(?![<>=])[^!\s()]+(?:\([^)]+\))?(?=!)/.source),lookbehind:!0,alias:"url"},modifier:{pattern:y(/(^!)(?:<MOD>|<PAR>|[<>=])+/.source),lookbehind:!0,inside:S},url:{pattern:/(:).+/,lookbehind:!0},punctuation:/[!:]/}},footnote:{pattern:/\b\[\d+\]/,alias:"comment",inside:{punctuation:/\[|\]/}},acronym:{pattern:/\b[A-Z\d]+\([^)]+\)/,inside:{comment:{pattern:/(\()[^()]+(?=\))/,lookbehind:!0},punctuation:/[()]/}},mark:{pattern:/\b\((?:C|R|TM)\)/,alias:"comment",inside:{punctuation:/[()]/}}}}}),w=A.phrase.inside,C={inline:w.inline,link:w.link,image:w.image,footnote:w.footnote,acronym:w.acronym,mark:w.mark};A.tag.pattern=/<\/?(?!\d)[a-z0-9]+(?:\s+[^\s>\/=]+(?:=(?:("|')(?:\\[\s\S]|(?!\1)[^\\])*\1|[^\s'">=]+))?)*\s*\/?>/i;var T=w.inline.inside;T.bold.inside=C,T.italic.inside=C,T.inserted.inside=C,T.deleted.inside=C,T.span.inside=C;var R=w.table.inside;R.inline=C.inline,R.link=C.link,R.image=C.image,R.footnote=C.footnote,R.acronym=C.acronym,R.mark=C.mark})(s)}haml.displayName="haml";haml.aliases=[];function haml(s){s.register(ruby),(function(n){n.languages.haml={"multiline-comment":{pattern:/((?:^|\r?\n|\r)([\t ]*))(?:\/|-#).*(?:(?:\r?\n|\r)\2[\t ].+)*/,lookbehind:!0,alias:"comment"},"multiline-code":[{pattern:/((?:^|\r?\n|\r)([\t ]*)(?:[~-]|[&!]?=)).*,[\t ]*(?:(?:\r?\n|\r)\2[\t ].*,[\t ]*)*(?:(?:\r?\n|\r)\2[\t ].+)/,lookbehind:!0,inside:n.languages.ruby},{pattern:/((?:^|\r?\n|\r)([\t ]*)(?:[~-]|[&!]?=)).*\|[\t ]*(?:(?:\r?\n|\r)\2[\t ].*\|[\t ]*)*/,lookbehind:!0,inside:n.languages.ruby}],filter:{pattern:/((?:^|\r?\n|\r)([\t ]*)):[\w-]+(?:(?:\r?\n|\r)(?:\2[\t ].+|\s*?(?=\r?\n|\r)))+/,lookbehind:!0,inside:{"filter-name":{pattern:/^:[\w-]+/,alias:"symbol"}}},markup:{pattern:/((?:^|\r?\n|\r)[\t ]*)<.+/,lookbehind:!0,inside:n.languages.markup},doctype:{pattern:/((?:^|\r?\n|\r)[\t ]*)!!!(?: .+)?/,lookbehind:!0},tag:{pattern:/((?:^|\r?\n|\r)[\t ]*)[%.#][\w\-#.]*[\w\-](?:\([^)]+\)|\{(?:\{[^}]+\}|[^{}])+\}|\[[^\]]+\])*[\/<>]*/,lookbehind:!0,inside:{attributes:[{pattern:/(^|[^#])\{(?:\{[^}]+\}|[^{}])+\}/,lookbehind:!0,inside:n.languages.ruby},{pattern:/\([^)]+\)/,inside:{"attr-value":{pattern:/(=\s*)(?:"(?:\\.|[^\\"\r\n])*"|[^)\s]+)/,lookbehind:!0},"attr-name":/[\w:-]+(?=\s*!?=|\s*[,)])/,punctuation:/[=(),]/}},{pattern:/\[[^\]]+\]/,inside:n.languages.ruby}],punctuation:/[<>]/}},code:{pattern:/((?:^|\r?\n|\r)[\t ]*(?:[~-]|[&!]?=)).+/,lookbehind:!0,inside:n.languages.ruby},interpolation:{pattern:/#\{[^}]+\}/,inside:{delimiter:{pattern:/^#\{|\}$/,alias:"punctuation"},ruby:{pattern:/[\s\S]+/,inside:n.languages.ruby}}},punctuation:{pattern:/((?:^|\r?\n|\r)[\t ]*)[~=\-&!]+/,lookbehind:!0}};for(var u="((?:^|\\r?\\n|\\r)([\\t ]*)):{{filter_name}}(?:(?:\\r?\\n|\\r)(?:\\2[\\t ].+|\\s*?(?=\\r?\\n|\\r)))+",f=["css",{filter:"coffee",language:"coffeescript"},"erb","javascript","less","markdown","ruby","scss","textile"],y={},S=0,A=f.length;S<A;S++){var w=f[S];w=typeof w=="string"?{filter:w,language:w}:w,n.languages[w.language]&&(y["filter-"+w.filter]={pattern:RegExp(u.replace("{{filter_name}}",function(){return w.filter})),lookbehind:!0,inside:{"filter-name":{pattern:/^:[\w-]+/,alias:"symbol"},text:{pattern:/[\s\S]+/,alias:[w.language,"language-"+w.language],inside:n.languages[w.language]}}})}n.languages.insertBefore("haml","filter",y)})(s)}handlebars.displayName="handlebars";handlebars.aliases=["hbs","mustache"];function handlebars(s){s.register(markupTemplating),(function(n){n.languages.handlebars={comment:/\{\{![\s\S]*?\}\}/,delimiter:{pattern:/^\{\{\{?|\}\}\}?$/,alias:"punctuation"},string:/(["'])(?:\\.|(?!\1)[^\\\r\n])*\1/,number:/\b0x[\dA-Fa-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee][+-]?\d+)?/,boolean:/\b(?:false|true)\b/,block:{pattern:/^(\s*(?:~\s*)?)[#\/]\S+?(?=\s*(?:~\s*)?$|\s)/,lookbehind:!0,alias:"keyword"},brackets:{pattern:/\[[^\]]+\]/,inside:{punctuation:/\[|\]/,variable:/[\s\S]+/}},punctuation:/[!"#%&':()*+,.\/;<=>@\[\\\]^`{|}~]/,variable:/[^!"#%&'()*+,\/;<=>@\[\\\]^`{|}~\s]+/},n.hooks.add("before-tokenize",function(u){var f=/\{\{\{[\s\S]+?\}\}\}|\{\{[\s\S]+?\}\}/g;n.languages["markup-templating"].buildPlaceholders(u,"handlebars",f)}),n.hooks.add("after-tokenize",function(u){n.languages["markup-templating"].tokenizePlaceholders(u,"handlebars")}),n.languages.hbs=n.languages.handlebars,n.languages.mustache=n.languages.handlebars})(s)}haskell.displayName="haskell";haskell.aliases=["hs"];function haskell(s){s.languages.haskell={comment:{pattern:/(^|[^-!#$%*+=?&@|~.:<>^\\\/])(?:--(?:(?=.)[^-!#$%*+=?&@|~.:<>^\\\/].*|$)|\{-[\s\S]*?-\})/m,lookbehind:!0},char:{pattern:/'(?:[^\\']|\\(?:[abfnrtv\\"'&]|\^[A-Z@[\]^_]|ACK|BEL|BS|CAN|CR|DC1|DC2|DC3|DC4|DEL|DLE|EM|ENQ|EOT|ESC|ETB|ETX|FF|FS|GS|HT|LF|NAK|NUL|RS|SI|SO|SOH|SP|STX|SUB|SYN|US|VT|\d+|o[0-7]+|x[0-9a-fA-F]+))'/,alias:"string"},string:{pattern:/"(?:[^\\"]|\\(?:\S|\s+\\))*"/,greedy:!0},keyword:/\b(?:case|class|data|deriving|do|else|if|in|infixl|infixr|instance|let|module|newtype|of|primitive|then|type|where)\b/,"import-statement":{pattern:/(^[\t ]*)import\s+(?:qualified\s+)?(?:[A-Z][\w']*)(?:\.[A-Z][\w']*)*(?:\s+as\s+(?:[A-Z][\w']*)(?:\.[A-Z][\w']*)*)?(?:\s+hiding\b)?/m,lookbehind:!0,inside:{keyword:/\b(?:as|hiding|import|qualified)\b/,punctuation:/\./}},builtin:/\b(?:abs|acos|acosh|all|and|any|appendFile|approxRational|asTypeOf|asin|asinh|atan|atan2|atanh|basicIORun|break|catch|ceiling|chr|compare|concat|concatMap|const|cos|cosh|curry|cycle|decodeFloat|denominator|digitToInt|div|divMod|drop|dropWhile|either|elem|encodeFloat|enumFrom|enumFromThen|enumFromThenTo|enumFromTo|error|even|exp|exponent|fail|filter|flip|floatDigits|floatRadix|floatRange|floor|fmap|foldl|foldl1|foldr|foldr1|fromDouble|fromEnum|fromInt|fromInteger|fromIntegral|fromRational|fst|gcd|getChar|getContents|getLine|group|head|id|inRange|index|init|intToDigit|interact|ioError|isAlpha|isAlphaNum|isAscii|isControl|isDenormalized|isDigit|isHexDigit|isIEEE|isInfinite|isLower|isNaN|isNegativeZero|isOctDigit|isPrint|isSpace|isUpper|iterate|last|lcm|length|lex|lexDigits|lexLitChar|lines|log|logBase|lookup|map|mapM|mapM_|max|maxBound|maximum|maybe|min|minBound|minimum|mod|negate|not|notElem|null|numerator|odd|or|ord|otherwise|pack|pi|pred|primExitWith|print|product|properFraction|putChar|putStr|putStrLn|quot|quotRem|range|rangeSize|read|readDec|readFile|readFloat|readHex|readIO|readInt|readList|readLitChar|readLn|readOct|readParen|readSigned|reads|readsPrec|realToFrac|recip|rem|repeat|replicate|return|reverse|round|scaleFloat|scanl|scanl1|scanr|scanr1|seq|sequence|sequence_|show|showChar|showInt|showList|showLitChar|showParen|showSigned|showString|shows|showsPrec|significand|signum|sin|sinh|snd|sort|span|splitAt|sqrt|subtract|succ|sum|tail|take|takeWhile|tan|tanh|threadToIOResult|toEnum|toInt|toInteger|toLower|toRational|toUpper|truncate|uncurry|undefined|unlines|until|unwords|unzip|unzip3|userError|words|writeFile|zip|zip3|zipWith|zipWith3)\b/,number:/\b(?:\d+(?:\.\d+)?(?:e[+-]?\d+)?|0o[0-7]+|0x[0-9a-f]+)\b/i,operator:[{pattern:/`(?:[A-Z][\w']*\.)*[_a-z][\w']*`/,greedy:!0},{pattern:/(\s)\.(?=\s)/,lookbehind:!0},/[-!#$%*+=?&@|~:<>^\\\/][-!#$%*+=?&@|~.:<>^\\\/]*|\.[-!#$%*+=?&@|~.:<>^\\\/]+/],hvariable:{pattern:/\b(?:[A-Z][\w']*\.)*[_a-z][\w']*/,inside:{punctuation:/\./}},constant:{pattern:/\b(?:[A-Z][\w']*\.)*[A-Z][\w']*/,inside:{punctuation:/\./}},punctuation:/[{}[\];(),.:]/},s.languages.hs=s.languages.haskell}haxe.displayName="haxe";haxe.aliases=[];function haxe(s){s.register(clike),s.languages.haxe=s.languages.extend("clike",{string:{pattern:/"(?:[^"\\]|\\[\s\S])*"/,greedy:!0},"class-name":[{pattern:/(\b(?:abstract|class|enum|extends|implements|interface|new|typedef)\s+)[A-Z_]\w*/,lookbehind:!0},/\b[A-Z]\w*/],keyword:/\bthis\b|\b(?:abstract|as|break|case|cast|catch|class|continue|default|do|dynamic|else|enum|extends|extern|final|for|from|function|if|implements|import|in|inline|interface|macro|new|null|operator|overload|override|package|private|public|return|static|super|switch|throw|to|try|typedef|untyped|using|var|while)(?!\.)\b/,function:{pattern:/\b[a-z_]\w*(?=\s*(?:<[^<>]*>\s*)?\()/i,greedy:!0},operator:/\.{3}|\+\+|--|&&|\|\||->|=>|(?:<<?|>{1,3}|[-+*/%!=&|^])=?|[?:~]/}),s.languages.insertBefore("haxe","string",{"string-interpolation":{pattern:/'(?:[^'\\]|\\[\s\S])*'/,greedy:!0,inside:{interpolation:{pattern:/(^|[^\\])\$(?:\w+|\{[^{}]+\})/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{?|\}$/,alias:"punctuation"},expression:{pattern:/[\s\S]+/,inside:s.languages.haxe}}},string:/[\s\S]+/}}}),s.languages.insertBefore("haxe","class-name",{regex:{pattern:/~\/(?:[^\/\\\r\n]|\\.)+\/[a-z]*/,greedy:!0,inside:{"regex-flags":/\b[a-z]+$/,"regex-source":{pattern:/^(~\/)[\s\S]+(?=\/$)/,lookbehind:!0,alias:"language-regex",inside:s.languages.regex},"regex-delimiter":/^~\/|\/$/}}}),s.languages.insertBefore("haxe","keyword",{preprocessor:{pattern:/#(?:else|elseif|end|if)\b.*/,alias:"property"},metadata:{pattern:/@:?[\w.]+/,alias:"symbol"},reification:{pattern:/\$(?:\w+|(?=\{))/,alias:"important"}})}hcl.displayName="hcl";hcl.aliases=[];function hcl(s){s.languages.hcl={comment:/(?:\/\/|#).*|\/\*[\s\S]*?(?:\*\/|$)/,heredoc:{pattern:/<<-?(\w+\b)[\s\S]*?^[ \t]*\1/m,greedy:!0,alias:"string"},keyword:[{pattern:/(?:data|resource)\s+(?:"(?:\\[\s\S]|[^\\"])*")(?=\s+"[\w-]+"\s+\{)/i,inside:{type:{pattern:/(resource|data|\s+)(?:"(?:\\[\s\S]|[^\\"])*")/i,lookbehind:!0,alias:"variable"}}},{pattern:/(?:backend|module|output|provider|provisioner|variable)\s+(?:[\w-]+|"(?:\\[\s\S]|[^\\"])*")\s+(?=\{)/i,inside:{type:{pattern:/(backend|module|output|provider|provisioner|variable)\s+(?:[\w-]+|"(?:\\[\s\S]|[^\\"])*")\s+/i,lookbehind:!0,alias:"variable"}}},/[\w-]+(?=\s+\{)/],property:[/[-\w\.]+(?=\s*=(?!=))/,/"(?:\\[\s\S]|[^\\"])+"(?=\s*[:=])/],string:{pattern:/"(?:[^\\$"]|\\[\s\S]|\$(?:(?=")|\$+(?!\$)|[^"${])|\$\{(?:[^{}"]|"(?:[^\\"]|\\[\s\S])*")*\})*"/,greedy:!0,inside:{interpolation:{pattern:/(^|[^$])\$\{(?:[^{}"]|"(?:[^\\"]|\\[\s\S])*")*\}/,lookbehind:!0,inside:{type:{pattern:/(\b(?:count|data|local|module|path|self|terraform|var)\b\.)[\w\*]+/i,lookbehind:!0,alias:"variable"},keyword:/\b(?:count|data|local|module|path|self|terraform|var)\b/i,function:/\w+(?=\()/,string:{pattern:/"(?:\\[\s\S]|[^\\"])*"/,greedy:!0},number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?(?:e[+-]?\d+)?/i,punctuation:/[!\$#%&'()*+,.\/;<=>@\[\\\]^`{|}~?:]/}}}},number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?(?:e[+-]?\d+)?/i,boolean:/\b(?:false|true)\b/i,punctuation:/[=\[\]{}]/}}hlsl.displayName="hlsl";hlsl.aliases=[];function hlsl(s){s.register(c$1),s.languages.hlsl=s.languages.extend("c",{"class-name":[s.languages.c["class-name"],/\b(?:AppendStructuredBuffer|BlendState|Buffer|ByteAddressBuffer|CompileShader|ComputeShader|ConsumeStructuredBuffer|DepthStencilState|DepthStencilView|DomainShader|GeometryShader|Hullshader|InputPatch|LineStream|OutputPatch|PixelShader|PointStream|RWBuffer|RWByteAddressBuffer|RWStructuredBuffer|RWTexture(?:1D|1DArray|2D|2DArray|3D)|RasterizerState|RenderTargetView|SamplerComparisonState|SamplerState|StructuredBuffer|Texture(?:1D|1DArray|2D|2DArray|2DMS|2DMSArray|3D|Cube|CubeArray)|TriangleStream|VertexShader)\b/],keyword:[/\b(?:asm|asm_fragment|auto|break|case|catch|cbuffer|centroid|char|class|column_major|compile|compile_fragment|const|const_cast|continue|default|delete|discard|do|dynamic_cast|else|enum|explicit|export|extern|for|friend|fxgroup|goto|groupshared|if|in|inline|inout|interface|line|lineadj|linear|long|matrix|mutable|namespace|new|nointerpolation|noperspective|operator|out|packoffset|pass|pixelfragment|point|precise|private|protected|public|register|reinterpret_cast|return|row_major|sample|sampler|shared|short|signed|sizeof|snorm|stateblock|stateblock_state|static|static_cast|string|struct|switch|tbuffer|technique|technique10|technique11|template|texture|this|throw|triangle|triangleadj|try|typedef|typename|uniform|union|unorm|unsigned|using|vector|vertexfragment|virtual|void|volatile|while)\b/,/\b(?:bool|double|dword|float|half|int|min(?:10float|12int|16(?:float|int|uint))|uint)(?:[1-4](?:x[1-4])?)?\b/],number:/(?:(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[eE][+-]?\d+)?|\b0x[\da-fA-F]+)[fFhHlLuU]?\b/,boolean:/\b(?:false|true)\b/})}hoon.displayName="hoon";hoon.aliases=[];function hoon(s){s.languages.hoon={comment:{pattern:/::.*/,greedy:!0},string:{pattern:/"(?:[^"\\]|\\.)*"|'(?:[^'\\]|\\.)*'/,greedy:!0},constant:/%(?:\.[ny]|[\w-]+)/,"class-name":/@(?:[a-z0-9-]*[a-z0-9])?|\*/i,function:/(?:\+[-+] {2})?(?:[a-z](?:[a-z0-9-]*[a-z0-9])?)/,keyword:/\.[\^\+\*=\?]|![><:\.=\?!]|=[>|:,\.\-\^<+;/~\*\?]|\?[>|:\.\-\^<\+&~=@!]|\|[\$_%:\.\-\^~\*=@\?]|\+[|\$\+\*]|:[_\-\^\+~\*]|%[_:\.\-\^\+~\*=]|\^[|:\.\-\+&~\*=\?]|\$[|_%:<>\-\^&~@=\?]|;[:<\+;\/~\*=]|~[>|\$_%<\+\/&=\?!]|--|==/}}hpkp.displayName="hpkp";hpkp.aliases=[];function hpkp(s){s.languages.hpkp={directive:{pattern:/\b(?:includeSubDomains|max-age|pin-sha256|preload|report-to|report-uri|strict)(?=[\s;=]|$)/i,alias:"property"},operator:/=/,punctuation:/;/}}hsts.displayName="hsts";hsts.aliases=[];function hsts(s){s.languages.hsts={directive:{pattern:/\b(?:includeSubDomains|max-age|preload)(?=[\s;=]|$)/i,alias:"property"},operator:/=/,punctuation:/;/}}json.displayName="json";json.aliases=["webmanifest"];function json(s){s.languages.json={property:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?=\s*:)/,lookbehind:!0,greedy:!0},string:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?!\s*:)/,lookbehind:!0,greedy:!0},comment:{pattern:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},number:/-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,punctuation:/[{}[\],]/,operator:/:/,boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"}},s.languages.webmanifest=s.languages.json}uri$2.displayName="uri";uri$2.aliases=["url"];function uri$2(s){s.languages.uri={scheme:{pattern:/^[a-z][a-z0-9+.-]*:/im,greedy:!0,inside:{"scheme-delimiter":/:$/}},fragment:{pattern:/#[\w\-.~!$&'()*+,;=%:@/?]*/,inside:{"fragment-delimiter":/^#/}},query:{pattern:/\?[\w\-.~!$&'()*+,;=%:@/?]*/,inside:{"query-delimiter":{pattern:/^\?/,greedy:!0},"pair-delimiter":/[&;]/,pair:{pattern:/^[^=][\s\S]*/,inside:{key:/^[^=]+/,value:{pattern:/(^=)[\s\S]+/,lookbehind:!0}}}}},authority:{pattern:RegExp(/^\/\//.source+/(?:[\w\-.~!$&'()*+,;=%:]*@)?/.source+("(?:"+/\[(?:[0-9a-fA-F:.]{2,48}|v[0-9a-fA-F]+\.[\w\-.~!$&'()*+,;=]+)\]/.source+"|"+/[\w\-.~!$&'()*+,;=%]*/.source+")")+/(?::\d*)?/.source,"m"),inside:{"authority-delimiter":/^\/\//,"user-info-segment":{pattern:/^[\w\-.~!$&'()*+,;=%:]*@/,inside:{"user-info-delimiter":/@$/,"user-info":/^[\w\-.~!$&'()*+,;=%:]+/}},"port-segment":{pattern:/:\d*$/,inside:{"port-delimiter":/^:/,port:/^\d+/}},host:{pattern:/[\s\S]+/,inside:{"ip-literal":{pattern:/^\[[\s\S]+\]$/,inside:{"ip-literal-delimiter":/^\[|\]$/,"ipv-future":/^v[\s\S]+/,"ipv6-address":/^[\s\S]+/}},"ipv4-address":/^(?:(?:[03-9]\d?|[12]\d{0,2})\.){3}(?:[03-9]\d?|[12]\d{0,2})$/}}}},path:{pattern:/^[\w\-.~!$&'()*+,;=%:@/]+/m,inside:{"path-separator":/\//}}},s.languages.url=s.languages.uri}http.displayName="http";http.aliases=[];function http(s){(function(n){function u(R){return RegExp("(^(?:"+R+"):[ 	]*(?![ 	]))[^]+","i")}n.languages.http={"request-line":{pattern:/^(?:CONNECT|DELETE|GET|HEAD|OPTIONS|PATCH|POST|PRI|PUT|SEARCH|TRACE)\s(?:https?:\/\/|\/)\S*\sHTTP\/[\d.]+/m,inside:{method:{pattern:/^[A-Z]+\b/,alias:"property"},"request-target":{pattern:/^(\s)(?:https?:\/\/|\/)\S*(?=\s)/,lookbehind:!0,alias:"url",inside:n.languages.uri},"http-version":{pattern:/^(\s)HTTP\/[\d.]+/,lookbehind:!0,alias:"property"}}},"response-status":{pattern:/^HTTP\/[\d.]+ \d+ .+/m,inside:{"http-version":{pattern:/^HTTP\/[\d.]+/,alias:"property"},"status-code":{pattern:/^(\s)\d+(?=\s)/,lookbehind:!0,alias:"number"},"reason-phrase":{pattern:/^(\s).+/,lookbehind:!0,alias:"string"}}},header:{pattern:/^[\w-]+:.+(?:(?:\r\n?|\n)[ \t].+)*/m,inside:{"header-value":[{pattern:u(/Content-Security-Policy/.source),lookbehind:!0,alias:["csp","languages-csp"],inside:n.languages.csp},{pattern:u(/Public-Key-Pins(?:-Report-Only)?/.source),lookbehind:!0,alias:["hpkp","languages-hpkp"],inside:n.languages.hpkp},{pattern:u(/Strict-Transport-Security/.source),lookbehind:!0,alias:["hsts","languages-hsts"],inside:n.languages.hsts},{pattern:u(/[^:]+/.source),lookbehind:!0}],"header-name":{pattern:/^[^:]+/,alias:"keyword"},punctuation:/^:/}}};var f=n.languages,y={"application/javascript":f.javascript,"application/json":f.json||f.javascript,"application/xml":f.xml,"text/xml":f.xml,"text/html":f.html,"text/css":f.css,"text/plain":f.plain},S={"application/json":!0,"application/xml":!0};function A(R){var I=R.replace(/^[a-z]+\//,""),N="\\w+/(?:[\\w.-]+\\+)+"+I+"(?![+\\w.-])";return"(?:"+R+"|"+N+")"}var w;for(var C in y)if(y[C]){w=w||{};var T=S[C]?A(C):C;w[C.replace(/\//g,"-")]={pattern:RegExp("("+/content-type:\s*/.source+T+/(?:(?:\r\n?|\n)[\w-].*)*(?:\r(?:\n|(?!\n))|\n)/.source+")"+/[^ \t\w-][\s\S]*/.source,"i"),lookbehind:!0,inside:y[C]}}w&&n.languages.insertBefore("http","header",w)})(s)}ichigojam.displayName="ichigojam";ichigojam.aliases=[];function ichigojam(s){s.languages.ichigojam={comment:/(?:\B'|REM)(?:[^\n\r]*)/i,string:{pattern:/"(?:""|[!#$%&'()*,\/:;<=>?^\w +\-.])*"/,greedy:!0},number:/\B#[0-9A-F]+|\B`[01]+|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:E[+-]?\d+)?/i,keyword:/\b(?:BEEP|BPS|CASE|CLEAR|CLK|CLO|CLP|CLS|CLT|CLV|CONT|COPY|ELSE|END|FILE|FILES|FOR|GOSUB|GOTO|GSB|IF|INPUT|KBD|LED|LET|LIST|LOAD|LOCATE|LRUN|NEW|NEXT|OUT|PLAY|POKE|PRINT|PWM|REM|RENUM|RESET|RETURN|RIGHT|RTN|RUN|SAVE|SCROLL|SLEEP|SRND|STEP|STOP|SUB|TEMPO|THEN|TO|UART|VIDEO|WAIT)(?:\$|\b)/i,function:/\b(?:ABS|ANA|ASC|BIN|BTN|DEC|END|FREE|HELP|HEX|I2CR|I2CW|IN|INKEY|LEN|LINE|PEEK|RND|SCR|SOUND|STR|TICK|USR|VER|VPEEK|ZER)(?:\$|\b)/i,label:/(?:\B@\S+)/,operator:/<[=>]?|>=?|\|\||&&|[+\-*\/=|&^~!]|\b(?:AND|NOT|OR)\b/i,punctuation:/[\[,;:()\]]/}}icon.displayName="icon";icon.aliases=[];function icon(s){s.languages.icon={comment:/#.*/,string:{pattern:/(["'])(?:(?!\1)[^\\\r\n_]|\\.|_(?!\1)(?:\r\n|[\s\S]))*\1/,greedy:!0},number:/\b(?:\d+r[a-z\d]+|\d+(?:\.\d+)?(?:e[+-]?\d+)?)\b|\.\d+\b/i,"builtin-keyword":{pattern:/&(?:allocated|ascii|clock|collections|cset|current|date|dateline|digits|dump|e|error(?:number|text|value)?|errout|fail|features|file|host|input|lcase|letters|level|line|main|null|output|phi|pi|pos|progname|random|regions|source|storage|subject|time|trace|ucase|version)\b/,alias:"variable"},directive:{pattern:/\$\w+/,alias:"builtin"},keyword:/\b(?:break|by|case|create|default|do|else|end|every|fail|global|if|initial|invocable|link|local|next|not|of|procedure|record|repeat|return|static|suspend|then|to|until|while)\b/,function:/\b(?!\d)\w+(?=\s*[({]|\s*!\s*\[)/,operator:/[+-]:(?!=)|(?:[\/?@^%&]|\+\+?|--?|==?=?|~==?=?|\*\*?|\|\|\|?|<(?:->?|<?=?)|>>?=?)(?::=)?|:(?:=:?)?|[!.\\|~]/,punctuation:/[\[\](){},;]/}}icuMessageFormat.displayName="icu-message-format";icuMessageFormat.aliases=[];function icuMessageFormat(s){(function(n){function u(C,T){return T<=0?/[]/.source:C.replace(/<SELF>/g,function(){return u(C,T-1)})}var f=/'[{}:=,](?:[^']|'')*'(?!')/,y={pattern:/''/,greedy:!0,alias:"operator"},S={pattern:f,greedy:!0,inside:{escape:y}},A=u(/\{(?:[^{}']|'(?![{},'])|''|<STR>|<SELF>)*\}/.source.replace(/<STR>/g,function(){return f.source}),8),w={pattern:RegExp(A),inside:{message:{pattern:/^(\{)[\s\S]+(?=\}$)/,lookbehind:!0,inside:null},"message-delimiter":{pattern:/./,alias:"punctuation"}}};n.languages["icu-message-format"]={argument:{pattern:RegExp(A),greedy:!0,inside:{content:{pattern:/^(\{)[\s\S]+(?=\}$)/,lookbehind:!0,inside:{"argument-name":{pattern:/^(\s*)[^{}:=,\s]+/,lookbehind:!0},"choice-style":{pattern:/^(\s*,\s*choice\s*,\s*)\S(?:[\s\S]*\S)?/,lookbehind:!0,inside:{punctuation:/\|/,range:{pattern:/^(\s*)[+-]?(?:\d+(?:\.\d*)?|\u221e)\s*[<#\u2264]/,lookbehind:!0,inside:{operator:/[<#\u2264]/,number:/\S+/}},rest:null}},"plural-style":{pattern:/^(\s*,\s*(?:plural|selectordinal)\s*,\s*)\S(?:[\s\S]*\S)?/,lookbehind:!0,inside:{offset:/^offset:\s*\d+/,"nested-message":w,selector:{pattern:/=\d+|[^{}:=,\s]+/,inside:{keyword:/^(?:few|many|one|other|two|zero)$/}}}},"select-style":{pattern:/^(\s*,\s*select\s*,\s*)\S(?:[\s\S]*\S)?/,lookbehind:!0,inside:{"nested-message":w,selector:{pattern:/[^{}:=,\s]+/,inside:{keyword:/^other$/}}}},keyword:/\b(?:choice|plural|select|selectordinal)\b/,"arg-type":{pattern:/\b(?:date|duration|number|ordinal|spellout|time)\b/,alias:"keyword"},"arg-skeleton":{pattern:/(,\s*)::[^{}:=,\s]+/,lookbehind:!0},"arg-style":{pattern:/(,\s*)(?:currency|full|integer|long|medium|percent|short)(?=\s*$)/,lookbehind:!0},"arg-style-text":{pattern:RegExp(/(^\s*,\s*(?=\S))/.source+u(/(?:[^{}']|'[^']*'|\{(?:<SELF>)?\})+/.source,8)+"$"),lookbehind:!0,alias:"string"},punctuation:/,/}},"argument-delimiter":{pattern:/./,alias:"operator"}}},escape:y,string:S},w.inside.message.inside=n.languages["icu-message-format"],n.languages["icu-message-format"].argument.inside.content.inside["choice-style"].inside.rest=n.languages["icu-message-format"]})(s)}idris.displayName="idris";idris.aliases=["idr"];function idris(s){s.register(haskell),s.languages.idris=s.languages.extend("haskell",{comment:{pattern:/(?:(?:--|\|\|\|).*$|\{-[\s\S]*?-\})/m},keyword:/\b(?:Type|case|class|codata|constructor|corecord|data|do|dsl|else|export|if|implementation|implicit|import|impossible|in|infix|infixl|infixr|instance|interface|let|module|mutual|namespace|of|parameters|partial|postulate|private|proof|public|quoteGoal|record|rewrite|syntax|then|total|using|where|with)\b/,builtin:void 0}),s.languages.insertBefore("idris","keyword",{"import-statement":{pattern:/(^\s*import\s+)(?:[A-Z][\w']*)(?:\.[A-Z][\w']*)*/m,lookbehind:!0,inside:{punctuation:/\./}}}),s.languages.idr=s.languages.idris}ignore.displayName="ignore";ignore.aliases=["gitignore","hgignore","npmignore"];function ignore(s){(function(n){n.languages.ignore={comment:/^#.*/m,entry:{pattern:/\S(?:.*(?:(?:\\ )|\S))?/,alias:"string",inside:{operator:/^!|\*\*?|\?/,regex:{pattern:/(^|[^\\])\[[^\[\]]*\]/,lookbehind:!0},punctuation:/\//}}},n.languages.gitignore=n.languages.ignore,n.languages.hgignore=n.languages.ignore,n.languages.npmignore=n.languages.ignore})(s)}inform7.displayName="inform7";inform7.aliases=[];function inform7(s){s.languages.inform7={string:{pattern:/"[^"]*"/,inside:{substitution:{pattern:/\[[^\[\]]+\]/,inside:{delimiter:{pattern:/\[|\]/,alias:"punctuation"}}}}},comment:{pattern:/\[[^\[\]]+\]/,greedy:!0},title:{pattern:/^[ \t]*(?:book|chapter|part(?! of)|section|table|volume)\b.+/im,alias:"important"},number:{pattern:/(^|[^-])(?:\b\d+(?:\.\d+)?(?:\^\d+)?(?:(?!\d)\w+)?|\b(?:eight|eleven|five|four|nine|one|seven|six|ten|three|twelve|two))\b(?!-)/i,lookbehind:!0},verb:{pattern:/(^|[^-])\b(?:answering|applying to|are|asking|attacking|be(?:ing)?|burning|buying|called|carries|carry(?! out)|carrying|climbing|closing|conceal(?:ing|s)?|consulting|contain(?:ing|s)?|cutting|drinking|dropping|eating|enclos(?:es?|ing)|entering|examining|exiting|getting|giving|going|ha(?:s|ve|ving)|hold(?:ing|s)?|impl(?:ies|y)|incorporat(?:es?|ing)|inserting|is|jumping|kissing|listening|locking|looking|mean(?:ing|s)?|opening|provid(?:es?|ing)|pulling|pushing|putting|relat(?:es?|ing)|removing|searching|see(?:ing|s)?|setting|showing|singing|sleeping|smelling|squeezing|support(?:ing|s)?|swearing|switching|taking|tasting|telling|thinking|throwing|touching|turning|tying|unlock(?:ing|s)?|var(?:ies|y|ying)|waiting|waking|waving|wear(?:ing|s)?)\b(?!-)/i,lookbehind:!0,alias:"operator"},keyword:{pattern:/(^|[^-])\b(?:after|before|carry out|check|continue the action|definition(?= *:)|do nothing|else|end (?:if|the story|unless)|every turn|if|include|instead(?: of)?|let|move|no|now|otherwise|repeat|report|resume the story|rule for|running through|say(?:ing)?|stop the action|test|try(?:ing)?|understand|unless|use|when|while|yes)\b(?!-)/i,lookbehind:!0},property:{pattern:/(^|[^-])\b(?:adjacent(?! to)|carried|closed|concealed|contained|dark|described|edible|empty|enclosed|enterable|even|female|fixed in place|full|handled|held|improper-named|incorporated|inedible|invisible|lighted|lit|lock(?:able|ed)|male|marked for listing|mentioned|negative|neuter|non-(?:empty|full|recurring)|odd|opaque|open(?:able)?|plural-named|portable|positive|privately-named|proper-named|provided|publically-named|pushable between rooms|recurring|related|rubbing|scenery|seen|singular-named|supported|swinging|switch(?:able|ed(?: off| on)?)|touch(?:able|ed)|transparent|unconcealed|undescribed|unlit|unlocked|unmarked for listing|unmentioned|unopenable|untouchable|unvisited|variable|visible|visited|wearable|worn)\b(?!-)/i,lookbehind:!0,alias:"symbol"},position:{pattern:/(^|[^-])\b(?:above|adjacent to|back side of|below|between|down|east|everywhere|front side|here|in|inside(?: from)?|north(?:east|west)?|nowhere|on(?: top of)?|other side|outside(?: from)?|parts? of|regionally in|south(?:east|west)?|through|up|west|within)\b(?!-)/i,lookbehind:!0,alias:"keyword"},type:{pattern:/(^|[^-])\b(?:actions?|activit(?:ies|y)|actors?|animals?|backdrops?|containers?|devices?|directions?|doors?|holders?|kinds?|lists?|m[ae]n|nobody|nothing|nouns?|numbers?|objects?|people|persons?|player(?:'s holdall)?|regions?|relations?|rooms?|rule(?:book)?s?|scenes?|someone|something|supporters?|tables?|texts?|things?|time|vehicles?|wom[ae]n)\b(?!-)/i,lookbehind:!0,alias:"variable"},punctuation:/[.,:;(){}]/},s.languages.inform7.string.inside.substitution.inside.rest=s.languages.inform7,s.languages.inform7.string.inside.substitution.inside.rest.text={pattern:/\S(?:\s*\S)*/,alias:"comment"}}ini.displayName="ini";ini.aliases=[];function ini(s){s.languages.ini={comment:{pattern:/(^[ \f\t\v]*)[#;][^\n\r]*/m,lookbehind:!0},section:{pattern:/(^[ \f\t\v]*)\[[^\n\r\]]*\]?/m,lookbehind:!0,inside:{"section-name":{pattern:/(^\[[ \f\t\v]*)[^ \f\t\v\]]+(?:[ \f\t\v]+[^ \f\t\v\]]+)*/,lookbehind:!0,alias:"selector"},punctuation:/\[|\]/}},key:{pattern:/(^[ \f\t\v]*)[^ \f\n\r\t\v=]+(?:[ \f\t\v]+[^ \f\n\r\t\v=]+)*(?=[ \f\t\v]*=)/m,lookbehind:!0,alias:"attr-name"},value:{pattern:/(=[ \f\t\v]*)[^ \f\n\r\t\v]+(?:[ \f\t\v]+[^ \f\n\r\t\v]+)*/,lookbehind:!0,alias:"attr-value",inside:{"inner-value":{pattern:/^("|').+(?=\1$)/,lookbehind:!0}}},punctuation:/=/}}io.displayName="io";io.aliases=[];function io(s){s.languages.io={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?(?:\*\/|$)|\/\/.*|#.*)/,lookbehind:!0,greedy:!0},"triple-quoted-string":{pattern:/"""(?:\\[\s\S]|(?!""")[^\\])*"""/,greedy:!0,alias:"string"},string:{pattern:/"(?:\\.|[^\\\r\n"])*"/,greedy:!0},keyword:/\b(?:activate|activeCoroCount|asString|block|break|call|catch|clone|collectGarbage|compileString|continue|do|doFile|doMessage|doString|else|elseif|exit|for|foreach|forward|getEnvironmentVariable|getSlot|hasSlot|if|ifFalse|ifNil|ifNilEval|ifTrue|isActive|isNil|isResumable|list|message|method|parent|pass|pause|perform|performWithArgList|print|println|proto|raise|raiseResumable|removeSlot|resend|resume|schedulerSleepSeconds|self|sender|setSchedulerSleepSeconds|setSlot|shallowCopy|slotNames|super|system|then|thisBlock|thisContext|try|type|uniqueId|updateSlot|wait|while|write|yield)\b/,builtin:/\b(?:Array|AudioDevice|AudioMixer|BigNum|Block|Box|Buffer|CFunction|CGI|Color|Curses|DBM|DNSResolver|DOConnection|DOProxy|DOServer|Date|Directory|Duration|DynLib|Error|Exception|FFT|File|Fnmatch|Font|Future|GL|GLE|GLScissor|GLU|GLUCylinder|GLUQuadric|GLUSphere|GLUT|Host|Image|Importer|LinkList|List|Lobby|Locals|MD5|MP3Decoder|MP3Encoder|Map|Message|Movie|Notification|Number|Object|OpenGL|Point|Protos|Random|Regex|SGML|SGMLElement|SGMLParser|SQLite|Sequence|Server|ShowMessage|SleepyCat|SleepyCatCursor|Socket|SocketManager|Sound|Soup|Store|String|Tree|UDPSender|UPDReceiver|URL|User|Warning|WeakLink)\b/,boolean:/\b(?:false|nil|true)\b/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e-?\d+)?/i,operator:/[=!*/%+\-^&|]=|>>?=?|<<?=?|:?:?=|\+\+?|--?|\*\*?|\/\/?|%|\|\|?|&&?|\b(?:and|not|or|return)\b|@@?|\?\??|\.\./,punctuation:/[{}[\];(),.:]/}}j$1.displayName="j";j$1.aliases=[];function j$1(s){s.languages.j={comment:{pattern:/\bNB\..*/,greedy:!0},string:{pattern:/'(?:''|[^'\r\n])*'/,greedy:!0},keyword:/\b(?:(?:CR|LF|adverb|conjunction|def|define|dyad|monad|noun|verb)\b|(?:assert|break|case|catch[dt]?|continue|do|else|elseif|end|fcase|for|for_\w+|goto_\w+|if|label_\w+|return|select|throw|try|while|whilst)\.)/,verb:{pattern:/(?!\^:|;\.|[=!][.:])(?:\{(?:\.|::?)?|p(?:\.\.?|:)|[=!\]]|[<>+*\-%$|,#][.:]?|[?^]\.?|[;\[]:?|[~}"i][.:]|[ACeEIjLor]\.|(?:[_\/\\qsux]|_?\d):)/,alias:"keyword"},number:/\b_?(?:(?!\d:)\d+(?:\.\d+)?(?:(?:ad|ar|[ejpx])_?\d+(?:\.\d+)?)*(?:b_?[\da-z]+(?:\.[\da-z]+)?)?|_\b(?!\.))/,adverb:{pattern:/[~}]|[\/\\]\.?|[bfM]\.|t[.:]/,alias:"builtin"},operator:/[=a][.:]|_\./,conjunction:{pattern:/&(?:\.:?|:)?|[.:@][.:]?|[!D][.:]|[;dHT]\.|`:?|[\^LS]:|"/,alias:"variable"},punctuation:/[()]/}}java.displayName="java";java.aliases=[];function java(s){s.register(clike),(function(n){var u=/\b(?:abstract|assert|boolean|break|byte|case|catch|char|class|const|continue|default|do|double|else|enum|exports|extends|final|finally|float|for|goto|if|implements|import|instanceof|int|interface|long|module|native|new|non-sealed|null|open|opens|package|permits|private|protected|provides|public|record(?!\s*[(){}[\]<>=%~.:,;?+\-*/&|^])|requires|return|sealed|short|static|strictfp|super|switch|synchronized|this|throw|throws|to|transient|transitive|try|uses|var|void|volatile|while|with|yield)\b/,f=/(?:[a-z]\w*\s*\.\s*)*(?:[A-Z]\w*\s*\.\s*)*/.source,y={pattern:RegExp(/(^|[^\w.])/.source+f+/[A-Z](?:[\d_A-Z]*[a-z]\w*)?\b/.source),lookbehind:!0,inside:{namespace:{pattern:/^[a-z]\w*(?:\s*\.\s*[a-z]\w*)*(?:\s*\.)?/,inside:{punctuation:/\./}},punctuation:/\./}};n.languages.java=n.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"/,lookbehind:!0,greedy:!0},"class-name":[y,{pattern:RegExp(/(^|[^\w.])/.source+f+/[A-Z]\w*(?=\s+\w+\s*[;,=()]|\s*(?:\[[\s,]*\]\s*)?::\s*new\b)/.source),lookbehind:!0,inside:y.inside},{pattern:RegExp(/(\b(?:class|enum|extends|implements|instanceof|interface|new|record|throws)\s+)/.source+f+/[A-Z]\w*\b/.source),lookbehind:!0,inside:y.inside}],keyword:u,function:[n.languages.clike.function,{pattern:/(::\s*)[a-z_]\w*/,lookbehind:!0}],number:/\b0b[01][01_]*L?\b|\b0x(?:\.[\da-f_p+-]+|[\da-f_]+(?:\.[\da-f_p+-]+)?)\b|(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?\d[\d_]*)?[dfl]?/i,operator:{pattern:/(^|[^.])(?:<<=?|>>>?=?|->|--|\+\+|&&|\|\||::|[?:~]|[-+*/%&|^!=<>]=?)/m,lookbehind:!0},constant:/\b[A-Z][A-Z_\d]+\b/}),n.languages.insertBefore("java","string",{"triple-quoted-string":{pattern:/"""[ \t]*[\r\n](?:(?:"|"")?(?:\\.|[^"\\]))*"""/,greedy:!0,alias:"string"},char:{pattern:/'(?:\\.|[^'\\\r\n]){1,6}'/,greedy:!0}}),n.languages.insertBefore("java","class-name",{annotation:{pattern:/(^|[^.])@\w+(?:\s*\.\s*\w+)*/,lookbehind:!0,alias:"punctuation"},generics:{pattern:/<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&))*>)*>)*>)*>/,inside:{"class-name":y,keyword:u,punctuation:/[<>(),.:]/,operator:/[?&|]/}},import:[{pattern:RegExp(/(\bimport\s+)/.source+f+/(?:[A-Z]\w*|\*)(?=\s*;)/.source),lookbehind:!0,inside:{namespace:y.inside.namespace,punctuation:/\./,operator:/\*/,"class-name":/\w+/}},{pattern:RegExp(/(\bimport\s+static\s+)/.source+f+/(?:\w+|\*)(?=\s*;)/.source),lookbehind:!0,alias:"static",inside:{namespace:y.inside.namespace,static:/\b\w+$/,punctuation:/\./,operator:/\*/,"class-name":/\w+/}}],namespace:{pattern:RegExp(/(\b(?:exports|import(?:\s+static)?|module|open|opens|package|provides|requires|to|transitive|uses|with)\s+)(?!<keyword>)[a-z]\w*(?:\.[a-z]\w*)*\.?/.source.replace(/<keyword>/g,function(){return u.source})),lookbehind:!0,inside:{punctuation:/\./}}})})(s)}php.displayName="php";php.aliases=[];function php(s){s.register(markupTemplating),(function(n){var u=/\/\*[\s\S]*?\*\/|\/\/.*|#(?!\[).*/,f=[{pattern:/\b(?:false|true)\b/i,alias:"boolean"},{pattern:/(::\s*)\b[a-z_]\w*\b(?!\s*\()/i,greedy:!0,lookbehind:!0},{pattern:/(\b(?:case|const)\s+)\b[a-z_]\w*(?=\s*[;=])/i,greedy:!0,lookbehind:!0},/\b(?:null)\b/i,/\b[A-Z_][A-Z0-9_]*\b(?!\s*\()/],y=/\b0b[01]+(?:_[01]+)*\b|\b0o[0-7]+(?:_[0-7]+)*\b|\b0x[\da-f]+(?:_[\da-f]+)*\b|(?:\b\d+(?:_\d+)*\.?(?:\d+(?:_\d+)*)?|\B\.\d+)(?:e[+-]?\d+)?/i,S=/<?=>|\?\?=?|\.{3}|\??->|[!=]=?=?|::|\*\*=?|--|\+\+|&&|\|\||<<|>>|[?~]|[/^|%*&<>.+-]=?/,A=/[{}\[\](),:;]/;n.languages.php={delimiter:{pattern:/\?>$|^<\?(?:php(?=\s)|=)?/i,alias:"important"},comment:u,variable:/\$+(?:\w+\b|(?=\{))/,package:{pattern:/(namespace\s+|use\s+(?:function\s+)?)(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,lookbehind:!0,inside:{punctuation:/\\/}},"class-name-definition":{pattern:/(\b(?:class|enum|interface|trait)\s+)\b[a-z_]\w*(?!\\)\b/i,lookbehind:!0,alias:"class-name"},"function-definition":{pattern:/(\bfunction\s+)[a-z_]\w*(?=\s*\()/i,lookbehind:!0,alias:"function"},keyword:[{pattern:/(\(\s*)\b(?:array|bool|boolean|float|int|integer|object|string)\b(?=\s*\))/i,alias:"type-casting",greedy:!0,lookbehind:!0},{pattern:/([(,?]\s*)\b(?:array(?!\s*\()|bool|callable|(?:false|null)(?=\s*\|)|float|int|iterable|mixed|object|self|static|string)\b(?=\s*\$)/i,alias:"type-hint",greedy:!0,lookbehind:!0},{pattern:/(\)\s*:\s*(?:\?\s*)?)\b(?:array(?!\s*\()|bool|callable|(?:false|null)(?=\s*\|)|float|int|iterable|mixed|never|object|self|static|string|void)\b/i,alias:"return-type",greedy:!0,lookbehind:!0},{pattern:/\b(?:array(?!\s*\()|bool|float|int|iterable|mixed|object|string|void)\b/i,alias:"type-declaration",greedy:!0},{pattern:/(\|\s*)(?:false|null)\b|\b(?:false|null)(?=\s*\|)/i,alias:"type-declaration",greedy:!0,lookbehind:!0},{pattern:/\b(?:parent|self|static)(?=\s*::)/i,alias:"static-context",greedy:!0},{pattern:/(\byield\s+)from\b/i,lookbehind:!0},/\bclass\b/i,{pattern:/((?:^|[^\s>:]|(?:^|[^-])>|(?:^|[^:]):)\s*)\b(?:abstract|and|array|as|break|callable|case|catch|clone|const|continue|declare|default|die|do|echo|else|elseif|empty|enddeclare|endfor|endforeach|endif|endswitch|endwhile|enum|eval|exit|extends|final|finally|fn|for|foreach|function|global|goto|if|implements|include|include_once|instanceof|insteadof|interface|isset|list|match|namespace|never|new|or|parent|print|private|protected|public|readonly|require|require_once|return|self|static|switch|throw|trait|try|unset|use|var|while|xor|yield|__halt_compiler)\b/i,lookbehind:!0}],"argument-name":{pattern:/([(,]\s*)\b[a-z_]\w*(?=\s*:(?!:))/i,lookbehind:!0},"class-name":[{pattern:/(\b(?:extends|implements|instanceof|new(?!\s+self|\s+static))\s+|\bcatch\s*\()\b[a-z_]\w*(?!\\)\b/i,greedy:!0,lookbehind:!0},{pattern:/(\|\s*)\b[a-z_]\w*(?!\\)\b/i,greedy:!0,lookbehind:!0},{pattern:/\b[a-z_]\w*(?!\\)\b(?=\s*\|)/i,greedy:!0},{pattern:/(\|\s*)(?:\\?\b[a-z_]\w*)+\b/i,alias:"class-name-fully-qualified",greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/(?:\\?\b[a-z_]\w*)+\b(?=\s*\|)/i,alias:"class-name-fully-qualified",greedy:!0,inside:{punctuation:/\\/}},{pattern:/(\b(?:extends|implements|instanceof|new(?!\s+self\b|\s+static\b))\s+|\bcatch\s*\()(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,alias:"class-name-fully-qualified",greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/\b[a-z_]\w*(?=\s*\$)/i,alias:"type-declaration",greedy:!0},{pattern:/(?:\\?\b[a-z_]\w*)+(?=\s*\$)/i,alias:["class-name-fully-qualified","type-declaration"],greedy:!0,inside:{punctuation:/\\/}},{pattern:/\b[a-z_]\w*(?=\s*::)/i,alias:"static-context",greedy:!0},{pattern:/(?:\\?\b[a-z_]\w*)+(?=\s*::)/i,alias:["class-name-fully-qualified","static-context"],greedy:!0,inside:{punctuation:/\\/}},{pattern:/([(,?]\s*)[a-z_]\w*(?=\s*\$)/i,alias:"type-hint",greedy:!0,lookbehind:!0},{pattern:/([(,?]\s*)(?:\\?\b[a-z_]\w*)+(?=\s*\$)/i,alias:["class-name-fully-qualified","type-hint"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/(\)\s*:\s*(?:\?\s*)?)\b[a-z_]\w*(?!\\)\b/i,alias:"return-type",greedy:!0,lookbehind:!0},{pattern:/(\)\s*:\s*(?:\?\s*)?)(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,alias:["class-name-fully-qualified","return-type"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}}],constant:f,function:{pattern:/(^|[^\\\w])\\?[a-z_](?:[\w\\]*\w)?(?=\s*\()/i,lookbehind:!0,inside:{punctuation:/\\/}},property:{pattern:/(->\s*)\w+/,lookbehind:!0},number:y,operator:S,punctuation:A};var w={pattern:/\{\$(?:\{(?:\{[^{}]+\}|[^{}]+)\}|[^{}])+\}|(^|[^\\{])\$+(?:\w+(?:\[[^\r\n\[\]]+\]|->\w+)?)/,lookbehind:!0,inside:n.languages.php},C=[{pattern:/<<<'([^']+)'[\r\n](?:.*[\r\n])*?\1;/,alias:"nowdoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<<'[^']+'|[a-z_]\w*;$/i,alias:"symbol",inside:{punctuation:/^<<<'?|[';]$/}}}},{pattern:/<<<(?:"([^"]+)"[\r\n](?:.*[\r\n])*?\1;|([a-z_]\w*)[\r\n](?:.*[\r\n])*?\2;)/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<<(?:"[^"]+"|[a-z_]\w*)|[a-z_]\w*;$/i,alias:"symbol",inside:{punctuation:/^<<<"?|[";]$/}},interpolation:w}},{pattern:/`(?:\\[\s\S]|[^\\`])*`/,alias:"backtick-quoted-string",greedy:!0},{pattern:/'(?:\\[\s\S]|[^\\'])*'/,alias:"single-quoted-string",greedy:!0},{pattern:/"(?:\\[\s\S]|[^\\"])*"/,alias:"double-quoted-string",greedy:!0,inside:{interpolation:w}}];n.languages.insertBefore("php","variable",{string:C,attribute:{pattern:/#\[(?:[^"'\/#]|\/(?![*/])|\/\/.*$|#(?!\[).*$|\/\*(?:[^*]|\*(?!\/))*\*\/|"(?:\\[\s\S]|[^\\"])*"|'(?:\\[\s\S]|[^\\'])*')+\](?=\s*[a-z$#])/im,greedy:!0,inside:{"attribute-content":{pattern:/^(#\[)[\s\S]+(?=\]$)/,lookbehind:!0,inside:{comment:u,string:C,"attribute-class-name":[{pattern:/([^:]|^)\b[a-z_]\w*(?!\\)\b/i,alias:"class-name",greedy:!0,lookbehind:!0},{pattern:/([^:]|^)(?:\\?\b[a-z_]\w*)+/i,alias:["class-name","class-name-fully-qualified"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}}],constant:f,number:y,operator:S,punctuation:A}},delimiter:{pattern:/^#\[|\]$/,alias:"punctuation"}}}}),n.hooks.add("before-tokenize",function(T){if(/<\?/.test(T.code)){var R=/<\?(?:[^"'/#]|\/(?![*/])|("|')(?:\\[\s\S]|(?!\1)[^\\])*\1|(?:\/\/|#(?!\[))(?:[^?\n\r]|\?(?!>))*(?=$|\?>|[\r\n])|#\[|\/\*(?:[^*]|\*(?!\/))*(?:\*\/|$))*?(?:\?>|$)/g;n.languages["markup-templating"].buildPlaceholders(T,"php",R)}}),n.hooks.add("after-tokenize",function(T){n.languages["markup-templating"].tokenizePlaceholders(T,"php")})})(s)}javadoclike.displayName="javadoclike";javadoclike.aliases=[];function javadoclike(s){(function(n){var u=n.languages.javadoclike={parameter:{pattern:/(^[\t ]*(?:\/{3}|\*|\/\*\*)\s*@(?:arg|arguments|param)\s+)\w+/m,lookbehind:!0},keyword:{pattern:/(^[\t ]*(?:\/{3}|\*|\/\*\*)\s*|\{)@[a-z][a-zA-Z-]+\b/m,lookbehind:!0},punctuation:/[{}]/};function f(S,A){var w="doc-comment",C=n.languages[S];if(C){var T=C[w];if(!T){var R={};R[w]={pattern:/(^|[^\\])\/\*\*[^/][\s\S]*?(?:\*\/|$)/,lookbehind:!0,alias:"comment"},C=n.languages.insertBefore(S,"comment",R),T=C[w]}if(T instanceof RegExp&&(T=C[w]={pattern:T}),Array.isArray(T))for(var I=0,N=T.length;I<N;I++)T[I]instanceof RegExp&&(T[I]={pattern:T[I]}),A(T[I]);else A(T)}}function y(S,A){typeof S=="string"&&(S=[S]),S.forEach(function(w){f(w,function(C){C.inside||(C.inside={}),C.inside.rest=A})})}Object.defineProperty(u,"addSupport",{value:y}),u.addSupport(["java","javascript","php"],u)})(s)}scala.displayName="scala";scala.aliases=[];function scala(s){s.register(java),s.languages.scala=s.languages.extend("java",{"triple-quoted-string":{pattern:/"""[\s\S]*?"""/,greedy:!0,alias:"string"},string:{pattern:/("|')(?:\\.|(?!\1)[^\\\r\n])*\1/,greedy:!0},keyword:/<-|=>|\b(?:abstract|case|catch|class|def|derives|do|else|enum|extends|extension|final|finally|for|forSome|given|if|implicit|import|infix|inline|lazy|match|new|null|object|opaque|open|override|package|private|protected|return|sealed|self|super|this|throw|trait|transparent|try|type|using|val|var|while|with|yield)\b/,number:/\b0x(?:[\da-f]*\.)?[\da-f]+|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e\d+)?[dfl]?/i,builtin:/\b(?:Any|AnyRef|AnyVal|Boolean|Byte|Char|Double|Float|Int|Long|Nothing|Short|String|Unit)\b/,symbol:/'[^\d\s\\]\w*/}),s.languages.insertBefore("scala","triple-quoted-string",{"string-interpolation":{pattern:/\b[a-z]\w*(?:"""(?:[^$]|\$(?:[^{]|\{(?:[^{}]|\{[^{}]*\})*\}))*?"""|"(?:[^$"\r\n]|\$(?:[^{]|\{(?:[^{}]|\{[^{}]*\})*\}))*")/i,greedy:!0,inside:{id:{pattern:/^\w+/,greedy:!0,alias:"function"},escape:{pattern:/\\\$"|\$[$"]/,greedy:!0,alias:"symbol"},interpolation:{pattern:/\$(?:\w+|\{(?:[^{}]|\{[^{}]*\})*\})/,greedy:!0,inside:{punctuation:/^\$\{?|\}$/,expression:{pattern:/[\s\S]+/,inside:s.languages.scala}}},string:/[\s\S]+/}}}),delete s.languages.scala["class-name"],delete s.languages.scala.function,delete s.languages.scala.constant}javadoc.displayName="javadoc";javadoc.aliases=[];function javadoc(s){s.register(java),s.register(javadoclike),s.register(markup),(function(n){var u=/(^(?:[\t ]*(?:\*\s*)*))[^*\s].*$/m,f=/#\s*\w+(?:\s*\([^()]*\))?/.source,y=/(?:\b[a-zA-Z]\w+\s*\.\s*)*\b[A-Z]\w*(?:\s*<mem>)?|<mem>/.source.replace(/<mem>/g,function(){return f});n.languages.javadoc=n.languages.extend("javadoclike",{}),n.languages.insertBefore("javadoc","keyword",{reference:{pattern:RegExp(/(@(?:exception|link|linkplain|see|throws|value)\s+(?:\*\s*)?)/.source+"(?:"+y+")"),lookbehind:!0,inside:{function:{pattern:/(#\s*)\w+(?=\s*\()/,lookbehind:!0},field:{pattern:/(#\s*)\w+/,lookbehind:!0},namespace:{pattern:/\b(?:[a-z]\w*\s*\.\s*)+/,inside:{punctuation:/\./}},"class-name":/\b[A-Z]\w*/,keyword:n.languages.java.keyword,punctuation:/[#()[\],.]/}},"class-name":{pattern:/(@param\s+)<[A-Z]\w*>/,lookbehind:!0,inside:{punctuation:/[.<>]/}},"code-section":[{pattern:/(\{@code\s+(?!\s))(?:[^\s{}]|\s+(?![\s}])|\{(?:[^{}]|\{(?:[^{}]|\{(?:[^{}]|\{[^{}]*\})*\})*\})*\})+(?=\s*\})/,lookbehind:!0,inside:{code:{pattern:u,lookbehind:!0,inside:n.languages.java,alias:"language-java"}}},{pattern:/(<(code|pre|tt)>(?!<code>)\s*)\S(?:\S|\s+\S)*?(?=\s*<\/\2>)/,lookbehind:!0,inside:{line:{pattern:u,lookbehind:!0,inside:{tag:n.languages.markup.tag,entity:n.languages.markup.entity,code:{pattern:/.+/,inside:n.languages.java,alias:"language-java"}}}}}],tag:n.languages.markup.tag,entity:n.languages.markup.entity}),n.languages.javadoclike.addSupport("java",n.languages.javadoc)})(s)}javastacktrace.displayName="javastacktrace";javastacktrace.aliases=[];function javastacktrace(s){s.languages.javastacktrace={summary:{pattern:/^([\t ]*)(?:(?:Caused by:|Suppressed:|Exception in thread "[^"]*")[\t ]+)?[\w$.]+(?::.*)?$/m,lookbehind:!0,inside:{keyword:{pattern:/^([\t ]*)(?:(?:Caused by|Suppressed)(?=:)|Exception in thread)/m,lookbehind:!0},string:{pattern:/^(\s*)"[^"]*"/,lookbehind:!0},exceptions:{pattern:/^(:?\s*)[\w$.]+(?=:|$)/,lookbehind:!0,inside:{"class-name":/[\w$]+$/,namespace:/\b[a-z]\w*\b/,punctuation:/\./}},message:{pattern:/(:\s*)\S.*/,lookbehind:!0,alias:"string"},punctuation:/:/}},"stack-frame":{pattern:/^([\t ]*)at (?:[\w$./]|@[\w$.+-]*\/)+(?:<init>)?\([^()]*\)/m,lookbehind:!0,inside:{keyword:{pattern:/^(\s*)at(?= )/,lookbehind:!0},source:[{pattern:/(\()\w+\.\w+:\d+(?=\))/,lookbehind:!0,inside:{file:/^\w+\.\w+/,punctuation:/:/,"line-number":{pattern:/\b\d+\b/,alias:"number"}}},{pattern:/(\()[^()]*(?=\))/,lookbehind:!0,inside:{keyword:/^(?:Native Method|Unknown Source)$/}}],"class-name":/[\w$]+(?=\.(?:<init>|[\w$]+)\()/,function:/(?:<init>|[\w$]+)(?=\()/,"class-loader":{pattern:/(\s)[a-z]\w*(?:\.[a-z]\w*)*(?=\/[\w@$.]*\/)/,lookbehind:!0,alias:"namespace",inside:{punctuation:/\./}},module:{pattern:/([\s/])[a-z]\w*(?:\.[a-z]\w*)*(?:@[\w$.+-]*)?(?=\/)/,lookbehind:!0,inside:{version:{pattern:/(@)[\s\S]+/,lookbehind:!0,alias:"number"},punctuation:/[@.]/}},namespace:{pattern:/(?:\b[a-z]\w*\.)+/,inside:{punctuation:/\./}},punctuation:/[()/.]/}},more:{pattern:/^([\t ]*)\.{3} \d+ [a-z]+(?: [a-z]+)*/m,lookbehind:!0,inside:{punctuation:/\.{3}/,number:/\d+/,keyword:/\b[a-z]+(?: [a-z]+)*\b/}}}}jexl.displayName="jexl";jexl.aliases=[];function jexl(s){s.languages.jexl={string:/(["'])(?:\\[\s\S]|(?!\1)[^\\])*\1/,transform:{pattern:/(\|\s*)[a-zA-Z--_\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF$][\w--\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF$]*/,alias:"function",lookbehind:!0},function:/[a-zA-Z--_\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF$][\w--\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF$]*\s*(?=\()/,number:/\b\d+(?:\.\d+)?\b|\B\.\d+\b/,operator:/[<>!]=?|-|\+|&&|==|\|\|?|\/\/?|[?:*^%]/,boolean:/\b(?:false|true)\b/,keyword:/\bin\b/,punctuation:/[{}[\](),.]/}}jolie.displayName="jolie";jolie.aliases=[];function jolie(s){s.register(clike),s.languages.jolie=s.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\[\s\S]|[^"\\])*"/,lookbehind:!0,greedy:!0},"class-name":{pattern:/((?:\b(?:as|courier|embed|in|inputPort|outputPort|service)\b|@)[ \t]*)\w+/,lookbehind:!0},keyword:/\b(?:as|cH|comp|concurrent|constants|courier|cset|csets|default|define|else|embed|embedded|execution|exit|extender|for|foreach|forward|from|global|if|import|in|include|init|inputPort|install|instanceof|interface|is_defined|linkIn|linkOut|main|new|nullProcess|outputPort|over|private|provide|public|scope|sequential|service|single|spawn|synchronized|this|throw|throws|type|undef|until|while|with)\b/,function:/\b[a-z_]\w*(?=[ \t]*[@(])/i,number:/(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?l?/i,operator:/-[-=>]?|\+[+=]?|<[<=]?|[>=*!]=?|&&|\|\||[?\/%^@|]/,punctuation:/[()[\]{},;.:]/,builtin:/\b(?:Byte|any|bool|char|double|enum|float|int|length|long|ranges|regex|string|undefined|void)\b/}),s.languages.insertBefore("jolie","keyword",{aggregates:{pattern:/(\bAggregates\s*:\s*)(?:\w+(?:\s+with\s+\w+)?\s*,\s*)*\w+(?:\s+with\s+\w+)?/,lookbehind:!0,inside:{keyword:/\bwith\b/,"class-name":/\w+/,punctuation:/,/}},redirects:{pattern:/(\bRedirects\s*:\s*)(?:\w+\s*=>\s*\w+\s*,\s*)*(?:\w+\s*=>\s*\w+)/,lookbehind:!0,inside:{punctuation:/,/,"class-name":/\w+/,operator:/=>/}},property:{pattern:/\b(?:Aggregates|[Ii]nterfaces|Java|Javascript|Jolie|[Ll]ocation|OneWay|[Pp]rotocol|Redirects|RequestResponse)\b(?=[ \t]*:)/}})}jq.displayName="jq";jq.aliases=[];function jq(s){(function(n){var u=/\\\((?:[^()]|\([^()]*\))*\)/.source,f=RegExp(/(^|[^\\])"(?:[^"\r\n\\]|\\[^\r\n(]|__)*"/.source.replace(/__/g,function(){return u})),y={interpolation:{pattern:RegExp(/((?:^|[^\\])(?:\\{2})*)/.source+u),lookbehind:!0,inside:{content:{pattern:/^(\\\()[\s\S]+(?=\)$)/,lookbehind:!0,inside:null},punctuation:/^\\\(|\)$/}}},S=n.languages.jq={comment:/#.*/,property:{pattern:RegExp(f.source+/(?=\s*:(?!:))/.source),lookbehind:!0,greedy:!0,inside:y},string:{pattern:f,lookbehind:!0,greedy:!0,inside:y},function:{pattern:/(\bdef\s+)[a-z_]\w+/i,lookbehind:!0},variable:/\B\$\w+/,"property-literal":{pattern:/\b[a-z_]\w*(?=\s*:(?!:))/i,alias:"property"},keyword:/\b(?:as|break|catch|def|elif|else|end|foreach|if|import|include|label|module|modulemeta|null|reduce|then|try|while)\b/,boolean:/\b(?:false|true)\b/,number:/(?:\b\d+\.|\B\.)?\b\d+(?:[eE][+-]?\d+)?\b/,operator:[{pattern:/\|=?/,alias:"pipe"},/\.\.|[!=<>]?=|\?\/\/|\/\/=?|[-+*/%]=?|[<>?]|\b(?:and|not|or)\b/],"c-style-function":{pattern:/\b[a-z_]\w*(?=\s*\()/i,alias:"function"},punctuation:/::|[()\[\]{},:;]|\.(?=\s*[\[\w$])/,dot:{pattern:/\./,alias:"important"}};y.interpolation.inside.content.inside=S})(s)}jsTemplates.displayName="js-templates";jsTemplates.aliases=[];function jsTemplates(s){s.register(javascript),(function(n){var u=n.languages.javascript["template-string"],f=u.pattern.source,y=u.inside.interpolation,S=y.inside["interpolation-punctuation"],A=y.pattern.source;function w(F,H){if(n.languages[F])return{pattern:RegExp("((?:"+H+")\\s*)"+f),lookbehind:!0,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},"embedded-code":{pattern:/[\s\S]+/,alias:F}}}}n.languages.javascript["template-string"]=[w("css",/\b(?:styled(?:\([^)]*\))?(?:\s*\.\s*\w+(?:\([^)]*\))*)*|css(?:\s*\.\s*(?:global|resolve))?|createGlobalStyle|keyframes)/.source),w("html",/\bhtml|\.\s*(?:inner|outer)HTML\s*\+?=/.source),w("svg",/\bsvg/.source),w("markdown",/\b(?:markdown|md)/.source),w("graphql",/\b(?:gql|graphql(?:\s*\.\s*experimental)?)/.source),w("sql",/\bsql/.source),u].filter(Boolean);function C(F,H){return"___"+H.toUpperCase()+"_"+F+"___"}function T(F,H,z){var U={code:F,grammar:H,language:z};return n.hooks.run("before-tokenize",U),U.tokens=n.tokenize(U.code,U.grammar),n.hooks.run("after-tokenize",U),U.tokens}function R(F){var H={};H["interpolation-punctuation"]=S;var z=n.tokenize(F,H);if(z.length===3){var U=[1,1];U.push.apply(U,T(z[1],n.languages.javascript,"javascript")),z.splice.apply(z,U)}return new n.Token("interpolation",z,y.alias,F)}function I(F,H,z){var U=n.tokenize(F,{interpolation:{pattern:RegExp(A),lookbehind:!0}}),G=0,Y={},K=U.map(function(de){if(typeof de=="string")return de;for(var se=de.content,ne;F.indexOf(ne=C(G++,z))!==-1;);return Y[ne]=se,ne}).join(""),Z=T(K,H,z),J=Object.keys(Y);G=0;function te(de){for(var se=0;se<de.length;se++){if(G>=J.length)return;var ne=de[se];if(typeof ne=="string"||typeof ne.content=="string"){var ge=J[G],Ee=typeof ne=="string"?ne:ne.content,we=Ee.indexOf(ge);if(we!==-1){++G;var Ie=Ee.substring(0,we),Be=R(Y[ge]),Me=Ee.substring(we+ge.length),Re=[];if(Ie&&Re.push(Ie),Re.push(Be),Me){var Te=[Me];te(Te),Re.push.apply(Re,Te)}typeof ne=="string"?(de.splice.apply(de,[se,1].concat(Re)),se+=Re.length-1):ne.content=Re}}else{var Se=ne.content;Array.isArray(Se)?te(Se):te([Se])}}}return te(Z),new n.Token(z,Z,"language-"+z,F)}var N={javascript:!0,js:!0,typescript:!0,ts:!0,jsx:!0,tsx:!0};n.hooks.add("after-tokenize",function(F){if(!(F.language in N))return;function H(z){for(var U=0,G=z.length;U<G;U++){var Y=z[U];if(typeof Y!="string"){var K=Y.content;if(!Array.isArray(K)){typeof K!="string"&&H([K]);continue}if(Y.type==="template-string"){var Z=K[1];if(K.length===3&&typeof Z!="string"&&Z.type==="embedded-code"){var J=L(Z),te=Z.alias,de=Array.isArray(te)?te[0]:te,se=n.languages[de];if(!se)continue;K[1]=I(J,se,de)}}else H(K)}}}H(F.tokens)});function L(F){return typeof F=="string"?F:Array.isArray(F)?F.map(L).join(""):L(F.content)}})(s)}typescript.displayName="typescript";typescript.aliases=["ts"];function typescript(s){s.register(javascript),(function(n){n.languages.typescript=n.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),n.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete n.languages.typescript.parameter,delete n.languages.typescript["literal-property"];var u=n.languages.extend("typescript",{});delete u["class-name"],n.languages.typescript["class-name"].inside=u,n.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:u}}}}),n.languages.ts=n.languages.typescript})(s)}jsdoc.displayName="jsdoc";jsdoc.aliases=[];function jsdoc(s){s.register(javadoclike),s.register(javascript),s.register(typescript),(function(n){var u=n.languages.javascript,f=/\{(?:[^{}]|\{(?:[^{}]|\{[^{}]*\})*\})+\}/.source,y="(@(?:arg|argument|param|property)\\s+(?:"+f+"\\s+)?)";n.languages.jsdoc=n.languages.extend("javadoclike",{parameter:{pattern:RegExp(y+/(?:(?!\s)[$\w\xA0-\uFFFF.])+(?=\s|$)/.source),lookbehind:!0,inside:{punctuation:/\./}}}),n.languages.insertBefore("jsdoc","keyword",{"optional-parameter":{pattern:RegExp(y+/\[(?:(?!\s)[$\w\xA0-\uFFFF.])+(?:=[^[\]]+)?\](?=\s|$)/.source),lookbehind:!0,inside:{parameter:{pattern:/(^\[)[$\w\xA0-\uFFFF\.]+/,lookbehind:!0,inside:{punctuation:/\./}},code:{pattern:/(=)[\s\S]*(?=\]$)/,lookbehind:!0,inside:u,alias:"language-javascript"},punctuation:/[=[\]]/}},"class-name":[{pattern:RegExp(/(@(?:augments|class|extends|interface|memberof!?|template|this|typedef)\s+(?:<TYPE>\s+)?)[A-Z]\w*(?:\.[A-Z]\w*)*/.source.replace(/<TYPE>/g,function(){return f})),lookbehind:!0,inside:{punctuation:/\./}},{pattern:RegExp("(@[a-z]+\\s+)"+f),lookbehind:!0,inside:{string:u.string,number:u.number,boolean:u.boolean,keyword:n.languages.typescript.keyword,operator:/=>|\.\.\.|[&|?:*]/,punctuation:/[.,;=<>{}()[\]]/}}],example:{pattern:/(@example\s+(?!\s))(?:[^@\s]|\s+(?!\s))+?(?=\s*(?:\*\s*)?(?:@\w|\*\/))/,lookbehind:!0,inside:{code:{pattern:/^([\t ]*(?:\*\s*)?)\S.*$/m,lookbehind:!0,inside:u,alias:"language-javascript"}}}}),n.languages.javadoclike.addSupport("javascript",n.languages.jsdoc)})(s)}n4js.displayName="n4js";n4js.aliases=["n4jsd"];function n4js(s){s.register(javascript),s.languages.n4js=s.languages.extend("javascript",{keyword:/\b(?:Array|any|boolean|break|case|catch|class|const|constructor|continue|debugger|declare|default|delete|do|else|enum|export|extends|false|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|module|new|null|number|package|private|protected|public|return|set|static|string|super|switch|this|throw|true|try|typeof|var|void|while|with|yield)\b/}),s.languages.insertBefore("n4js","constant",{annotation:{pattern:/@+\w+/,alias:"operator"}}),s.languages.n4jsd=s.languages.n4js}jsExtras.displayName="js-extras";jsExtras.aliases=[];function jsExtras(s){s.register(javascript),(function(n){n.languages.insertBefore("javascript","function-variable",{"method-variable":{pattern:RegExp("(\\.\\s*)"+n.languages.javascript["function-variable"].pattern.source),lookbehind:!0,alias:["function-variable","method","function","property-access"]}}),n.languages.insertBefore("javascript","function",{method:{pattern:RegExp("(\\.\\s*)"+n.languages.javascript.function.source),lookbehind:!0,alias:["function","property-access"]}}),n.languages.insertBefore("javascript","constant",{"known-class-name":[{pattern:/\b(?:(?:Float(?:32|64)|(?:Int|Uint)(?:8|16|32)|Uint8Clamped)?Array|ArrayBuffer|BigInt|Boolean|DataView|Date|Error|Function|Intl|JSON|(?:Weak)?(?:Map|Set)|Math|Number|Object|Promise|Proxy|Reflect|RegExp|String|Symbol|WebAssembly)\b/,alias:"class-name"},{pattern:/\b(?:[A-Z]\w*)Error\b/,alias:"class-name"}]});function u(C,T){return RegExp(C.replace(/<ID>/g,function(){return/(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/.source}),T)}n.languages.insertBefore("javascript","keyword",{imports:{pattern:u(/(\bimport\b\s*)(?:<ID>(?:\s*,\s*(?:\*\s*as\s+<ID>|\{[^{}]*\}))?|\*\s*as\s+<ID>|\{[^{}]*\})(?=\s*\bfrom\b)/.source),lookbehind:!0,inside:n.languages.javascript},exports:{pattern:u(/(\bexport\b\s*)(?:\*(?:\s*as\s+<ID>)?(?=\s*\bfrom\b)|\{[^{}]*\})/.source),lookbehind:!0,inside:n.languages.javascript}}),n.languages.javascript.keyword.unshift({pattern:/\b(?:as|default|export|from|import)\b/,alias:"module"},{pattern:/\b(?:await|break|catch|continue|do|else|finally|for|if|return|switch|throw|try|while|yield)\b/,alias:"control-flow"},{pattern:/\bnull\b/,alias:["null","nil"]},{pattern:/\bundefined\b/,alias:"nil"}),n.languages.insertBefore("javascript","operator",{spread:{pattern:/\.{3}/,alias:"operator"},arrow:{pattern:/=>/,alias:"operator"}}),n.languages.insertBefore("javascript","punctuation",{"property-access":{pattern:u(/(\.\s*)#?<ID>/.source),lookbehind:!0},"maybe-class-name":{pattern:/(^|[^$\w\xA0-\uFFFF])[A-Z][$\w\xA0-\uFFFF]+/,lookbehind:!0},dom:{pattern:/\b(?:document|(?:local|session)Storage|location|navigator|performance|window)\b/,alias:"variable"},console:{pattern:/\bconsole(?=\s*\.)/,alias:"class-name"}});for(var f=["function","function-variable","method","method-variable","property-access"],y=0;y<f.length;y++){var S=f[y],A=n.languages.javascript[S];n.util.type(A)==="RegExp"&&(A=n.languages.javascript[S]={pattern:A});var w=A.inside||{};A.inside=w,w["maybe-class-name"]=/^[A-Z][\s\S]*/}})(s)}json5.displayName="json5";json5.aliases=[];function json5(s){s.register(json),(function(n){var u=/("|')(?:\\(?:\r\n?|\n|.)|(?!\1)[^\\\r\n])*\1/;n.languages.json5=n.languages.extend("json",{property:[{pattern:RegExp(u.source+"(?=\\s*:)"),greedy:!0},{pattern:/(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/,alias:"unquoted"}],string:{pattern:u,greedy:!0},number:/[+-]?\b(?:NaN|Infinity|0x[a-fA-F\d]+)\b|[+-]?(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[eE][+-]?\d+\b)?/})})(s)}jsonp.displayName="jsonp";jsonp.aliases=[];function jsonp(s){s.register(json),s.languages.jsonp=s.languages.extend("json",{punctuation:/[{}[\]();,.]/}),s.languages.insertBefore("jsonp","punctuation",{function:/(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*\()/})}jsstacktrace.displayName="jsstacktrace";jsstacktrace.aliases=[];function jsstacktrace(s){s.languages.jsstacktrace={"error-message":{pattern:/^\S.*/m,alias:"string"},"stack-frame":{pattern:/(^[ \t]+)at[ \t].*/m,lookbehind:!0,inside:{"not-my-code":{pattern:/^at[ \t]+(?!\s)(?:node\.js|<unknown>|.*(?:node_modules|\(<anonymous>\)|\(<unknown>|<anonymous>$|\(internal\/|\(node\.js)).*/m,alias:"comment"},filename:{pattern:/(\bat\s+(?!\s)|\()(?:[a-zA-Z]:)?[^():]+(?=:)/,lookbehind:!0,alias:"url"},function:{pattern:/(\bat\s+(?:new\s+)?)(?!\s)[_$a-zA-Z\xA0-\uFFFF<][.$\w\xA0-\uFFFF<>]*/,lookbehind:!0,inside:{punctuation:/\./}},punctuation:/[()]/,keyword:/\b(?:at|new)\b/,alias:{pattern:/\[(?:as\s+)?(?!\s)[_$a-zA-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*\]/,alias:"variable"},"line-number":{pattern:/:\d+(?::\d+)?\b/,alias:"number",inside:{punctuation:/:/}}}}}}julia.displayName="julia";julia.aliases=[];function julia(s){s.languages.julia={comment:{pattern:/(^|[^\\])(?:#=(?:[^#=]|=(?!#)|#(?!=)|#=(?:[^#=]|=(?!#)|#(?!=))*=#)*=#|#.*)/,lookbehind:!0},regex:{pattern:/r"(?:\\.|[^"\\\r\n])*"[imsx]{0,4}/,greedy:!0},string:{pattern:/"""[\s\S]+?"""|(?:\b\w+)?"(?:\\.|[^"\\\r\n])*"|`(?:[^\\`\r\n]|\\.)*`/,greedy:!0},char:{pattern:/(^|[^\w'])'(?:\\[^\r\n][^'\r\n]*|[^\\\r\n])'/,lookbehind:!0,greedy:!0},keyword:/\b(?:abstract|baremodule|begin|bitstype|break|catch|ccall|const|continue|do|else|elseif|end|export|finally|for|function|global|if|immutable|import|importall|in|let|local|macro|module|print|println|quote|return|struct|try|type|typealias|using|while)\b/,boolean:/\b(?:false|true)\b/,number:/(?:\b(?=\d)|\B(?=\.))(?:0[box])?(?:[\da-f]+(?:_[\da-f]+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[efp][+-]?\d+(?:_\d+)*)?j?/i,operator:/&&|\|\||[-+*^%&$\\]=?|\/[\/=]?|!=?=?|\|[=>]?|<(?:<=?|[=:|])?|>(?:=|>>?=?)?|==?=?|[~']/,punctuation:/::?|[{}[\]();,.?]/,constant:/\b(?:(?:Inf|NaN)(?:16|32|64)?|im|pi)\b|[]/}}keepalived.displayName="keepalived";keepalived.aliases=[];function keepalived(s){s.languages.keepalived={comment:{pattern:/[#!].*/,greedy:!0},string:{pattern:/(^|[^\\])(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/,lookbehind:!0,greedy:!0},ip:{pattern:RegExp(/\b(?:(?:(?:[\da-f]{1,4}:){7}[\da-f]{1,4}|(?:[\da-f]{1,4}:){6}:[\da-f]{1,4}|(?:[\da-f]{1,4}:){5}:(?:[\da-f]{1,4}:)?[\da-f]{1,4}|(?:[\da-f]{1,4}:){4}:(?:[\da-f]{1,4}:){0,2}[\da-f]{1,4}|(?:[\da-f]{1,4}:){3}:(?:[\da-f]{1,4}:){0,3}[\da-f]{1,4}|(?:[\da-f]{1,4}:){2}:(?:[\da-f]{1,4}:){0,4}[\da-f]{1,4}|(?:[\da-f]{1,4}:){6}<ipv4>|(?:[\da-f]{1,4}:){0,5}:<ipv4>|::(?:[\da-f]{1,4}:){0,5}<ipv4>|[\da-f]{1,4}::(?:[\da-f]{1,4}:){0,5}[\da-f]{1,4}|::(?:[\da-f]{1,4}:){0,6}[\da-f]{1,4}|(?:[\da-f]{1,4}:){1,7}:)(?:\/\d{1,3})?|<ipv4>(?:\/\d{1,2})?)\b/.source.replace(/<ipv4>/g,function(){return/(?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]\d|\d))/.source}),"i"),alias:"number"},path:{pattern:/(\s)\/(?:[^\/\s]+\/)*[^\/\s]*|\b[a-zA-Z]:\\(?:[^\\\s]+\\)*[^\\\s]*/,lookbehind:!0,alias:"string"},variable:/\$\{?\w+\}?/,email:{pattern:/[\w-]+@[\w-]+(?:\.[\w-]{2,3}){1,2}/,alias:"string"},"conditional-configuration":{pattern:/@\^?[\w-]+/,alias:"variable"},operator:/=/,property:/\b(?:BFD_CHECK|DNS_CHECK|FILE_CHECK|HTTP_GET|MISC_CHECK|NAME|PING_CHECK|SCRIPTS|SMTP_CHECK|SSL|SSL_GET|TCP_CHECK|UDP_CHECK|accept|advert_int|alpha|auth_pass|auth_type|authentication|bfd_cpu_affinity|bfd_instance|bfd_no_swap|bfd_priority|bfd_process_name|bfd_rlimit_rttime|bfd_rt_priority|bind_if|bind_port|bindto|ca|certificate|check_unicast_src|checker|checker_cpu_affinity|checker_log_all_failures|checker_no_swap|checker_priority|checker_rlimit_rttime|checker_rt_priority|child_wait_time|connect_ip|connect_port|connect_timeout|dbus_service_name|debug|default_interface|delay|delay_before_retry|delay_loop|digest|dont_track_primary|dynamic|dynamic_interfaces|enable_(?:dbus|script_security|sni|snmp_checker|snmp_rfc|snmp_rfcv2|snmp_rfcv3|snmp_vrrp|traps)|end|fall|fast_recovery|file|flag-[123]|fork_delay|full_command|fwmark|garp_group|garp_interval|garp_lower_prio_delay|garp_lower_prio_repeat|garp_master_delay|garp_master_refresh|garp_master_refresh_repeat|garp_master_repeat|global_defs|global_tracking|gna_interval|group|ha_suspend|hashed|helo_name|higher_prio_send_advert|hoplimit|http_protocol|hysteresis|idle_tx|include|inhibit_on_failure|init_fail|init_file|instance|interface|interfaces|interval|ip_family|ipvs_process_name|keepalived.conf|kernel_rx_buf_size|key|linkbeat_interfaces|linkbeat_use_polling|log_all_failures|log_unknown_vrids|lower_prio_no_advert|lthreshold|lvs_flush|lvs_flush_onstop|lvs_method|lvs_netlink_cmd_rcv_bufs|lvs_netlink_cmd_rcv_bufs_force|lvs_netlink_monitor_rcv_bufs|lvs_netlink_monitor_rcv_bufs_force|lvs_notify_fifo|lvs_notify_fifo_script|lvs_sched|lvs_sync_daemon|max_auto_priority|max_hops|mcast_src_ip|mh-fallback|mh-port|min_auto_priority_delay|min_rx|min_tx|misc_dynamic|misc_path|misc_timeout|multiplier|name|namespace_with_ipsets|native_ipv6|neighbor_ip|net_namespace|net_namespace_ipvs|nftables|nftables_counters|nftables_ifindex|nftables_priority|no_accept|no_checker_emails|no_email_faults|nopreempt|notification_email|notification_email_from|notify|notify_backup|notify_deleted|notify_down|notify_fault|notify_fifo|notify_fifo_script|notify_master|notify_master_rx_lower_pri|notify_priority_changes|notify_stop|notify_up|old_unicast_checksum|omega|ops|param_match|passive|password|path|persistence_engine|persistence_granularity|persistence_timeout|preempt|preempt_delay|priority|process|process_monitor_rcv_bufs|process_monitor_rcv_bufs_force|process_name|process_names|promote_secondaries|protocol|proxy_arp|proxy_arp_pvlan|quorum|quorum_down|quorum_max|quorum_up|random_seed|real_server|regex|regex_max_offset|regex_min_offset|regex_no_match|regex_options|regex_stack|reload_repeat|reload_time_file|require_reply|retry|rise|router_id|rs_init_notifies|script|script_user|sh-fallback|sh-port|shutdown_script|shutdown_script_timeout|skip_check_adv_addr|smtp_alert|smtp_alert_checker|smtp_alert_vrrp|smtp_connect_timeout|smtp_helo_name|smtp_server|snmp_socket|sorry_server|sorry_server_inhibit|sorry_server_lvs_method|source_ip|start|startup_script|startup_script_timeout|state|static_ipaddress|static_routes|static_rules|status_code|step|strict_mode|sync_group_tracking_weight|terminate_delay|timeout|track_bfd|track_file|track_group|track_interface|track_process|track_script|track_src_ip|ttl|type|umask|unicast_peer|unicast_src_ip|unicast_ttl|url|use_ipvlan|use_pid_dir|use_vmac|user|uthreshold|val[123]|version|virtual_ipaddress|virtual_ipaddress_excluded|virtual_router_id|virtual_routes|virtual_rules|virtual_server|virtual_server_group|virtualhost|vmac_xmit_base|vrrp|vrrp_(?:check_unicast_src|cpu_affinity|garp_interval|garp_lower_prio_delay|garp_lower_prio_repeat|garp_master_delay|garp_master_refresh|garp_master_refresh_repeat|garp_master_repeat|gna_interval|higher_prio_send_advert|instance|ipsets|iptables|lower_prio_no_advert|mcast_group4|mcast_group6|min_garp|netlink_cmd_rcv_bufs|netlink_cmd_rcv_bufs_force|netlink_monitor_rcv_bufs|netlink_monitor_rcv_bufs_force|no_swap|notify_fifo|notify_fifo_script|notify_priority_changes|priority|process_name|rlimit_rttime|rt_priority|rx_bufs_multiplier|rx_bufs_policy|script|skip_check_adv_addr|startup_delay|strict|sync_group|track_process|version)|warmup|weight)\b/,constant:/\b(?:A|AAAA|AH|BACKUP|CNAME|DR|MASTER|MX|NAT|NS|PASS|SCTP|SOA|TCP|TUN|TXT|UDP|dh|fo|lblc|lblcr|lc|mh|nq|ovf|rr|sed|sh|wlc|wrr)\b/,number:{pattern:/(^|[^\w.-])-?\d+(?:\.\d+)?/,lookbehind:!0},boolean:/\b(?:false|no|off|on|true|yes)\b/,punctuation:/[\{\}]/}}keyman.displayName="keyman";keyman.aliases=[];function keyman(s){s.languages.keyman={comment:{pattern:/\bc .*/i,greedy:!0},string:{pattern:/"[^"\r\n]*"|'[^'\r\n]*'/,greedy:!0},"virtual-key":{pattern:/\[\s*(?:(?:ALT|CAPS|CTRL|LALT|LCTRL|NCAPS|RALT|RCTRL|SHIFT)\s+)*(?:[TKU]_[\w?]+|[A-E]\d\d?|"[^"\r\n]*"|'[^'\r\n]*')\s*\]/i,greedy:!0,alias:"function"},"header-keyword":{pattern:/&\w+/,alias:"bold"},"header-statement":{pattern:/\b(?:bitmap|bitmaps|caps always off|caps on only|copyright|hotkey|language|layout|message|name|shift frees caps|version)\b/i,alias:"bold"},"rule-keyword":{pattern:/\b(?:any|baselayout|beep|call|context|deadkey|dk|if|index|layer|notany|nul|outs|platform|reset|return|save|set|store|use)\b/i,alias:"keyword"},"structural-keyword":{pattern:/\b(?:ansi|begin|group|match|newcontext|nomatch|postkeystroke|readonly|unicode|using keys)\b/i,alias:"keyword"},"compile-target":{pattern:/\$(?:keyman|keymanonly|keymanweb|kmfl|weaver):/i,alias:"property"},number:/\b(?:U\+[\dA-F]+|d\d+|x[\da-f]+|\d+)\b/i,operator:/[+>\\$]|\.\./,punctuation:/[()=,]/}}kotlin.displayName="kotlin";kotlin.aliases=["kt","kts"];function kotlin(s){s.register(clike),(function(n){n.languages.kotlin=n.languages.extend("clike",{keyword:{pattern:/(^|[^.])\b(?:abstract|actual|annotation|as|break|by|catch|class|companion|const|constructor|continue|crossinline|data|do|dynamic|else|enum|expect|external|final|finally|for|fun|get|if|import|in|infix|init|inline|inner|interface|internal|is|lateinit|noinline|null|object|open|operator|out|override|package|private|protected|public|reified|return|sealed|set|super|suspend|tailrec|this|throw|to|try|typealias|val|var|vararg|when|where|while)\b/,lookbehind:!0},function:[{pattern:/(?:`[^\r\n`]+`|\b\w+)(?=\s*\()/,greedy:!0},{pattern:/(\.)(?:`[^\r\n`]+`|\w+)(?=\s*\{)/,lookbehind:!0,greedy:!0}],number:/\b(?:0[xX][\da-fA-F]+(?:_[\da-fA-F]+)*|0[bB][01]+(?:_[01]+)*|\d+(?:_\d+)*(?:\.\d+(?:_\d+)*)?(?:[eE][+-]?\d+(?:_\d+)*)?[fFL]?)\b/,operator:/\+[+=]?|-[-=>]?|==?=?|!(?:!|==?)?|[\/*%<>]=?|[?:]:?|\.\.|&&|\|\||\b(?:and|inv|or|shl|shr|ushr|xor)\b/}),delete n.languages.kotlin["class-name"];var u={"interpolation-punctuation":{pattern:/^\$\{?|\}$/,alias:"punctuation"},expression:{pattern:/[\s\S]+/,inside:n.languages.kotlin}};n.languages.insertBefore("kotlin","string",{"string-literal":[{pattern:/"""(?:[^$]|\$(?:(?!\{)|\{[^{}]*\}))*?"""/,alias:"multiline",inside:{interpolation:{pattern:/\$(?:[a-z_]\w*|\{[^{}]*\})/i,inside:u},string:/[\s\S]+/}},{pattern:/"(?:[^"\\\r\n$]|\\.|\$(?:(?!\{)|\{[^{}]*\}))*"/,alias:"singleline",inside:{interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$(?:[a-z_]\w*|\{[^{}]*\})/i,lookbehind:!0,inside:u},string:/[\s\S]+/}}],char:{pattern:/'(?:[^'\\\r\n]|\\(?:.|u[a-fA-F0-9]{0,4}))'/,greedy:!0}}),delete n.languages.kotlin.string,n.languages.insertBefore("kotlin","keyword",{annotation:{pattern:/\B@(?:\w+:)?(?:[A-Z]\w*|\[[^\]]+\])/,alias:"builtin"}}),n.languages.insertBefore("kotlin","function",{label:{pattern:/\b\w+@|@\w+\b/,alias:"symbol"}}),n.languages.kt=n.languages.kotlin,n.languages.kts=n.languages.kotlin})(s)}kumir.displayName="kumir";kumir.aliases=["kum"];function kumir(s){(function(n){var u=/\s\x00-\x1f\x22-\x2f\x3a-\x3f\x5b-\x5e\x60\x7b-\x7e/.source;function f(y,S){return RegExp(y.replace(/<nonId>/g,u),S)}n.languages.kumir={comment:{pattern:/\|.*/},prolog:{pattern:/#.*/,greedy:!0},string:{pattern:/"[^\n\r"]*"|'[^\n\r']*'/,greedy:!0},boolean:{pattern:f(/(^|[<nonId>])(?:|)(?=[<nonId>]|$)/.source),lookbehind:!0},"operator-word":{pattern:f(/(^|[<nonId>])(?:||)(?=[<nonId>]|$)/.source),lookbehind:!0,alias:"keyword"},"system-variable":{pattern:f(/(^|[<nonId>])(?=[<nonId>]|$)/.source),lookbehind:!0,alias:"keyword"},type:[{pattern:f(/(^|[<nonId>])(?:||||)(?:\x20*)?(?=[<nonId>]|$)/.source),lookbehind:!0,alias:"builtin"},{pattern:f(/(^|[<nonId>])(?:|||)(?=[<nonId>]|$)/.source),lookbehind:!0,alias:"important"}],keyword:{pattern:f(/(^|[<nonId>])(?:|(?:\x20*)?|||[]||||||||||||(?:(?:\x20+|_))?|(?:(?:\x20+|_))?|||||||||?||||||)(?=[<nonId>]|$)/.source),lookbehind:!0},name:{pattern:f(/(^|[<nonId>])[^\d<nonId>][^<nonId>]*(?:\x20+[^<nonId>]+)*(?=[<nonId>]|$)/.source),lookbehind:!0},number:{pattern:f(/(^|[<nonId>])(?:\B\$[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)(?=[<nonId>]|$)/.source,"i"),lookbehind:!0},punctuation:/:=|[(),:;\[\]]/,"operator-char":{pattern:/\*\*?|<[=>]?|>=?|[-+/=]/,alias:"operator"}},n.languages.kum=n.languages.kumir})(s)}kusto.displayName="kusto";kusto.aliases=[];function kusto(s){s.languages.kusto={comment:{pattern:/\/\/.*/,greedy:!0},string:{pattern:/```[\s\S]*?```|[hH]?(?:"(?:[^\r\n\\"]|\\.)*"|'(?:[^\r\n\\']|\\.)*'|@(?:"[^\r\n"]*"|'[^\r\n']*'))/,greedy:!0},verb:{pattern:/(\|\s*)[a-z][\w-]*/i,lookbehind:!0,alias:"keyword"},command:{pattern:/\.[a-z][a-z\d-]*\b/,alias:"keyword"},"class-name":/\b(?:bool|datetime|decimal|dynamic|guid|int|long|real|string|timespan)\b/,keyword:/\b(?:access|alias|and|anti|as|asc|auto|between|by|(?:contains|(?:ends|starts)with|has(?:perfix|suffix)?)(?:_cs)?|database|declare|desc|external|from|fullouter|has_all|in|ingestion|inline|inner|innerunique|into|(?:left|right)(?:anti(?:semi)?|inner|outer|semi)?|let|like|local|not|of|on|or|pattern|print|query_parameters|range|restrict|schema|set|step|table|tables|to|view|where|with|matches\s+regex|nulls\s+(?:first|last))(?![\w-])/,boolean:/\b(?:false|null|true)\b/,function:/\b[a-z_]\w*(?=\s*\()/,datetime:[{pattern:/\b(?:(?:Fri|Friday|Mon|Monday|Sat|Saturday|Sun|Sunday|Thu|Thursday|Tue|Tuesday|Wed|Wednesday)\s*,\s*)?\d{1,2}(?:\s+|-)(?:Apr|Aug|Dec|Feb|Jan|Jul|Jun|Mar|May|Nov|Oct|Sep)(?:\s+|-)\d{2}\s+\d{2}:\d{2}(?::\d{2})?(?:\s*(?:\b(?:[A-Z]|(?:[ECMT][DS]|GM|U)T)|[+-]\d{4}))?\b/,alias:"number"},{pattern:/[+-]?\b(?:\d{4}-\d{2}-\d{2}(?:[ T]\d{2}:\d{2}(?::\d{2}(?:\.\d+)?)?)?|\d{2}:\d{2}(?::\d{2}(?:\.\d+)?)?)Z?/,alias:"number"}],number:/\b(?:0x[0-9A-Fa-f]+|\d+(?:\.\d+)?(?:[Ee][+-]?\d+)?)(?:(?:min|sec|[mn]s|[dhms]|microsecond|tick)\b)?|[+-]?\binf\b/,operator:/=>|[!=]~|[!=<>]=?|[-+*/%|]|\.\./,punctuation:/[()\[\]{},;.:]/}}latex.displayName="latex";latex.aliases=["context","tex"];function latex(s){(function(n){var u=/\\(?:[^a-z()[\]]|[a-z*]+)/i,f={"equation-command":{pattern:u,alias:"regex"}};n.languages.latex={comment:/%.*/,cdata:{pattern:/(\\begin\{((?:lstlisting|verbatim)\*?)\})[\s\S]*?(?=\\end\{\2\})/,lookbehind:!0},equation:[{pattern:/\$\$(?:\\[\s\S]|[^\\$])+\$\$|\$(?:\\[\s\S]|[^\\$])+\$|\\\([\s\S]*?\\\)|\\\[[\s\S]*?\\\]/,inside:f,alias:"string"},{pattern:/(\\begin\{((?:align|eqnarray|equation|gather|math|multline)\*?)\})[\s\S]*?(?=\\end\{\2\})/,lookbehind:!0,inside:f,alias:"string"}],keyword:{pattern:/(\\(?:begin|cite|documentclass|end|label|ref|usepackage)(?:\[[^\]]+\])?\{)[^}]+(?=\})/,lookbehind:!0},url:{pattern:/(\\url\{)[^}]+(?=\})/,lookbehind:!0},headline:{pattern:/(\\(?:chapter|frametitle|paragraph|part|section|subparagraph|subsection|subsubparagraph|subsubsection|subsubsubparagraph)\*?(?:\[[^\]]+\])?\{)[^}]+(?=\})/,lookbehind:!0,alias:"class-name"},function:{pattern:u,alias:"selector"},punctuation:/[[\]{}&]/},n.languages.tex=n.languages.latex,n.languages.context=n.languages.latex})(s)}latte.displayName="latte";latte.aliases=[];function latte(s){s.register(clike),s.register(markupTemplating),s.register(php),(function(n){n.languages.latte={comment:/^\{\*[\s\S]*/,"latte-tag":{pattern:/(^\{(?:\/(?=[a-z]))?)(?:[=_]|[a-z]\w*\b(?!\())/i,lookbehind:!0,alias:"important"},delimiter:{pattern:/^\{\/?|\}$/,alias:"punctuation"},php:{pattern:/\S(?:[\s\S]*\S)?/,alias:"language-php",inside:n.languages.php}};var u=n.languages.extend("markup",{});n.languages.insertBefore("inside","attr-value",{"n-attr":{pattern:/n:[\w-]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+))?/,inside:{"attr-name":{pattern:/^[^\s=]+/,alias:"important"},"attr-value":{pattern:/=[\s\S]+/,inside:{punctuation:[/^=/,{pattern:/^(\s*)["']|["']$/,lookbehind:!0}],php:{pattern:/\S(?:[\s\S]*\S)?/,inside:n.languages.php}}}}}},u.tag),n.hooks.add("before-tokenize",function(f){if(f.language==="latte"){var y=/\{\*[\s\S]*?\*\}|\{[^'"\s{}*](?:[^"'/{}]|\/(?![*/])|("|')(?:\\[\s\S]|(?!\1)[^\\])*\1|\/\*(?:[^*]|\*(?!\/))*\*\/)*\}/g;n.languages["markup-templating"].buildPlaceholders(f,"latte",y),f.grammar=u}}),n.hooks.add("after-tokenize",function(f){n.languages["markup-templating"].tokenizePlaceholders(f,"latte")})})(s)}scheme.displayName="scheme";scheme.aliases=[];function scheme(s){(function(n){n.languages.scheme={comment:/;.*|#;\s*(?:\((?:[^()]|\([^()]*\))*\)|\[(?:[^\[\]]|\[[^\[\]]*\])*\])|#\|(?:[^#|]|#(?!\|)|\|(?!#)|#\|(?:[^#|]|#(?!\|)|\|(?!#))*\|#)*\|#/,string:{pattern:/"(?:[^"\\]|\\.)*"/,greedy:!0},symbol:{pattern:/'[^()\[\]#'\s]+/,greedy:!0},char:{pattern:/#\\(?:[ux][a-fA-F\d]+\b|[-a-zA-Z]+\b|[\uD800-\uDBFF][\uDC00-\uDFFF]|\S)/,greedy:!0},"lambda-parameter":[{pattern:/((?:^|[^'`#])[(\[]lambda\s+)(?:[^|()\[\]'\s]+|\|(?:[^\\|]|\\.)*\|)/,lookbehind:!0},{pattern:/((?:^|[^'`#])[(\[]lambda\s+[(\[])[^()\[\]']+/,lookbehind:!0}],keyword:{pattern:/((?:^|[^'`#])[(\[])(?:begin|case(?:-lambda)?|cond(?:-expand)?|define(?:-library|-macro|-record-type|-syntax|-values)?|defmacro|delay(?:-force)?|do|else|except|export|guard|if|import|include(?:-ci|-library-declarations)?|lambda|let(?:rec)?(?:-syntax|-values|\*)?|let\*-values|only|parameterize|prefix|(?:quasi-?)?quote|rename|set!|syntax-(?:case|rules)|unless|unquote(?:-splicing)?|when)(?=[()\[\]\s]|$)/,lookbehind:!0},builtin:{pattern:/((?:^|[^'`#])[(\[])(?:abs|and|append|apply|assoc|ass[qv]|binary-port\?|boolean=?\?|bytevector(?:-append|-copy|-copy!|-length|-u8-ref|-u8-set!|\?)?|caar|cadr|call-with-(?:current-continuation|port|values)|call\/cc|car|cdar|cddr|cdr|ceiling|char(?:->integer|-ready\?|\?|<\?|<=\?|=\?|>\?|>=\?)|close-(?:input-port|output-port|port)|complex\?|cons|current-(?:error|input|output)-port|denominator|dynamic-wind|eof-object\??|eq\?|equal\?|eqv\?|error|error-object(?:-irritants|-message|\?)|eval|even\?|exact(?:-integer-sqrt|-integer\?|\?)?|expt|features|file-error\?|floor(?:-quotient|-remainder|\/)?|flush-output-port|for-each|gcd|get-output-(?:bytevector|string)|inexact\??|input-port(?:-open\?|\?)|integer(?:->char|\?)|lcm|length|list(?:->string|->vector|-copy|-ref|-set!|-tail|\?)?|make-(?:bytevector|list|parameter|string|vector)|map|max|member|memq|memv|min|modulo|negative\?|newline|not|null\?|number(?:->string|\?)|numerator|odd\?|open-(?:input|output)-(?:bytevector|string)|or|output-port(?:-open\?|\?)|pair\?|peek-char|peek-u8|port\?|positive\?|procedure\?|quotient|raise|raise-continuable|rational\?|rationalize|read-(?:bytevector|bytevector!|char|error\?|line|string|u8)|real\?|remainder|reverse|round|set-c[ad]r!|square|string(?:->list|->number|->symbol|->utf8|->vector|-append|-copy|-copy!|-fill!|-for-each|-length|-map|-ref|-set!|\?|<\?|<=\?|=\?|>\?|>=\?)?|substring|symbol(?:->string|\?|=\?)|syntax-error|textual-port\?|truncate(?:-quotient|-remainder|\/)?|u8-ready\?|utf8->string|values|vector(?:->list|->string|-append|-copy|-copy!|-fill!|-for-each|-length|-map|-ref|-set!|\?)?|with-exception-handler|write-(?:bytevector|char|string|u8)|zero\?)(?=[()\[\]\s]|$)/,lookbehind:!0},operator:{pattern:/((?:^|[^'`#])[(\[])(?:[-+*%/]|[<>]=?|=>?)(?=[()\[\]\s]|$)/,lookbehind:!0},number:{pattern:RegExp(u({"<ureal dec>":/\d+(?:\/\d+)|(?:\d+(?:\.\d*)?|\.\d+)(?:[esfdl][+-]?\d+)?/.source,"<real dec>":/[+-]?<ureal dec>|[+-](?:inf|nan)\.0/.source,"<imaginary dec>":/[+-](?:<ureal dec>|(?:inf|nan)\.0)?i/.source,"<complex dec>":/<real dec>(?:@<real dec>|<imaginary dec>)?|<imaginary dec>/.source,"<num dec>":/(?:#d(?:#[ei])?|#[ei](?:#d)?)?<complex dec>/.source,"<ureal box>":/[0-9a-f]+(?:\/[0-9a-f]+)?/.source,"<real box>":/[+-]?<ureal box>|[+-](?:inf|nan)\.0/.source,"<imaginary box>":/[+-](?:<ureal box>|(?:inf|nan)\.0)?i/.source,"<complex box>":/<real box>(?:@<real box>|<imaginary box>)?|<imaginary box>/.source,"<num box>":/#[box](?:#[ei])?|(?:#[ei])?#[box]<complex box>/.source,"<number>":/(^|[()\[\]\s])(?:<num dec>|<num box>)(?=[()\[\]\s]|$)/.source}),"i"),lookbehind:!0},boolean:{pattern:/(^|[()\[\]\s])#(?:[ft]|false|true)(?=[()\[\]\s]|$)/,lookbehind:!0},function:{pattern:/((?:^|[^'`#])[(\[])(?:[^|()\[\]'\s]+|\|(?:[^\\|]|\\.)*\|)(?=[()\[\]\s]|$)/,lookbehind:!0},identifier:{pattern:/(^|[()\[\]\s])\|(?:[^\\|]|\\.)*\|(?=[()\[\]\s]|$)/,lookbehind:!0,greedy:!0},punctuation:/[()\[\]']/};function u(f){for(var y in f)f[y]=f[y].replace(/<[\w\s]+>/g,function(S){return"(?:"+f[S].trim()+")"});return f[y]}})(s)}lilypond.displayName="lilypond";lilypond.aliases=["ly"];function lilypond(s){s.register(scheme),(function(n){for(var u=/\((?:[^();"#\\]|\\[\s\S]|;.*(?!.)|"(?:[^"\\]|\\.)*"|#(?:\{(?:(?!#\})[\s\S])*#\}|[^{])|<expr>)*\)/.source,f=5,y=0;y<f;y++)u=u.replace(/<expr>/g,function(){return u});u=u.replace(/<expr>/g,/[^\s\S]/.source);var S=n.languages.lilypond={comment:/%(?:(?!\{).*|\{[\s\S]*?%\})/,"embedded-scheme":{pattern:RegExp(/(^|[=\s])#(?:"(?:[^"\\]|\\.)*"|[^\s()"]*(?:[^\s()]|<expr>))/.source.replace(/<expr>/g,function(){return u}),"m"),lookbehind:!0,greedy:!0,inside:{scheme:{pattern:/^(#)[\s\S]+$/,lookbehind:!0,alias:"language-scheme",inside:{"embedded-lilypond":{pattern:/#\{[\s\S]*?#\}/,greedy:!0,inside:{punctuation:/^#\{|#\}$/,lilypond:{pattern:/[\s\S]+/,alias:"language-lilypond",inside:null}}},rest:n.languages.scheme}},punctuation:/#/}},string:{pattern:/"(?:[^"\\]|\\.)*"/,greedy:!0},"class-name":{pattern:/(\\new\s+)[\w-]+/,lookbehind:!0},keyword:{pattern:/\\[a-z][-\w]*/i,inside:{punctuation:/^\\/}},operator:/[=|]|<<|>>/,punctuation:{pattern:/(^|[a-z\d])(?:'+|,+|[_^]?-[_^]?(?:[-+^!>._]|(?=\d))|[_^]\.?|[.!])|[{}()[\]<>^~]|\\[()[\]<>\\!]|--|__/,lookbehind:!0},number:/\b\d+(?:\/\d+)?\b/};S["embedded-scheme"].inside.scheme.inside["embedded-lilypond"].inside.lilypond.inside=S,n.languages.ly=S})(s)}liquid.displayName="liquid";liquid.aliases=[];function liquid(s){s.register(markupTemplating),s.languages.liquid={comment:{pattern:/(^\{%\s*comment\s*%\})[\s\S]+(?=\{%\s*endcomment\s*%\}$)/,lookbehind:!0},delimiter:{pattern:/^\{(?:\{\{|[%\{])-?|-?(?:\}\}|[%\}])\}$/,alias:"punctuation"},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},keyword:/\b(?:as|assign|break|(?:end)?(?:capture|case|comment|for|form|if|paginate|raw|style|tablerow|unless)|continue|cycle|decrement|echo|else|elsif|in|include|increment|limit|liquid|offset|range|render|reversed|section|when|with)\b/,object:/\b(?:address|all_country_option_tags|article|block|blog|cart|checkout|collection|color|country|country_option_tags|currency|current_page|current_tags|customer|customer_address|date|discount_allocation|discount_application|external_video|filter|filter_value|font|forloop|fulfillment|generic_file|gift_card|group|handle|image|line_item|link|linklist|localization|location|measurement|media|metafield|model|model_source|order|page|page_description|page_image|page_title|part|policy|product|product_option|recommendations|request|robots|routes|rule|script|search|selling_plan|selling_plan_allocation|selling_plan_group|shipping_method|shop|shop_locale|sitemap|store_availability|tax_line|template|theme|transaction|unit_price_measurement|user_agent|variant|video|video_source)\b/,function:[{pattern:/(\|\s*)\w+/,lookbehind:!0,alias:"filter"},{pattern:/(\.\s*)(?:first|last|size)/,lookbehind:!0}],boolean:/\b(?:false|nil|true)\b/,range:{pattern:/\.\./,alias:"operator"},number:/\b\d+(?:\.\d+)?\b/,operator:/[!=]=|<>|[<>]=?|[|?:=-]|\b(?:and|contains(?=\s)|or)\b/,punctuation:/[.,\[\]()]/,empty:{pattern:/\bempty\b/,alias:"keyword"}},s.hooks.add("before-tokenize",function(n){var u=/\{%\s*comment\s*%\}[\s\S]*?\{%\s*endcomment\s*%\}|\{(?:%[\s\S]*?%|\{\{[\s\S]*?\}\}|\{[\s\S]*?\})\}/g,f=!1;s.languages["markup-templating"].buildPlaceholders(n,"liquid",u,function(y){var S=/^\{%-?\s*(\w+)/.exec(y);if(S){var A=S[1];if(A==="raw"&&!f)return f=!0,!0;if(A==="endraw")return f=!1,!0}return!f})}),s.hooks.add("after-tokenize",function(n){s.languages["markup-templating"].tokenizePlaceholders(n,"liquid")})}lisp.displayName="lisp";lisp.aliases=["elisp","emacs","emacs-lisp"];function lisp(s){(function(n){function u(F){return RegExp(/(\()/.source+"(?:"+F+")"+/(?=[\s\)])/.source)}function f(F){return RegExp(/([\s([])/.source+"(?:"+F+")"+/(?=[\s)])/.source)}var y=/(?!\d)[-+*/~!@$%^=<>{}\w]+/.source,S="&"+y,A="(\\()",w="(?=\\))",C="(?=\\s)",T=/(?:[^()]|\((?:[^()]|\((?:[^()]|\((?:[^()]|\((?:[^()]|\([^()]*\))*\))*\))*\))*\))*/.source,R={heading:{pattern:/;;;.*/,alias:["comment","title"]},comment:/;.*/,string:{pattern:/"(?:[^"\\]|\\.)*"/,greedy:!0,inside:{argument:/[-A-Z]+(?=[.,\s])/,symbol:RegExp("`"+y+"'")}},"quoted-symbol":{pattern:RegExp("#?'"+y),alias:["variable","symbol"]},"lisp-property":{pattern:RegExp(":"+y),alias:"property"},splice:{pattern:RegExp(",@?"+y),alias:["symbol","variable"]},keyword:[{pattern:RegExp(A+"(?:and|(?:cl-)?letf|cl-loop|cond|cons|error|if|(?:lexical-)?let\\*?|message|not|null|or|provide|require|setq|unless|use-package|when|while)"+C),lookbehind:!0},{pattern:RegExp(A+"(?:append|by|collect|concat|do|finally|for|in|return)"+C),lookbehind:!0}],declare:{pattern:u(/declare/.source),lookbehind:!0,alias:"keyword"},interactive:{pattern:u(/interactive/.source),lookbehind:!0,alias:"keyword"},boolean:{pattern:f(/nil|t/.source),lookbehind:!0},number:{pattern:f(/[-+]?\d+(?:\.\d*)?/.source),lookbehind:!0},defvar:{pattern:RegExp(A+"def(?:const|custom|group|var)\\s+"+y),lookbehind:!0,inside:{keyword:/^def[a-z]+/,variable:RegExp(y)}},defun:{pattern:RegExp(A+/(?:cl-)?(?:defmacro|defun\*?)\s+/.source+y+/\s+\(/.source+T+/\)/.source),lookbehind:!0,greedy:!0,inside:{keyword:/^(?:cl-)?def\S+/,arguments:null,function:{pattern:RegExp("(^\\s)"+y),lookbehind:!0},punctuation:/[()]/}},lambda:{pattern:RegExp(A+"lambda\\s+\\(\\s*(?:&?"+y+"(?:\\s+&?"+y+")*\\s*)?\\)"),lookbehind:!0,greedy:!0,inside:{keyword:/^lambda/,arguments:null,punctuation:/[()]/}},car:{pattern:RegExp(A+y),lookbehind:!0},punctuation:[/(?:['`,]?\(|[)\[\]])/,{pattern:/(\s)\.(?=\s)/,lookbehind:!0}]},I={"lisp-marker":RegExp(S),varform:{pattern:RegExp(/\(/.source+y+/\s+(?=\S)/.source+T+/\)/.source),inside:R},argument:{pattern:RegExp(/(^|[\s(])/.source+y),lookbehind:!0,alias:"variable"},rest:R},N="\\S+(?:\\s+\\S+)*",L={pattern:RegExp(A+T+w),lookbehind:!0,inside:{"rest-vars":{pattern:RegExp("&(?:body|rest)\\s+"+N),inside:I},"other-marker-vars":{pattern:RegExp("&(?:aux|optional)\\s+"+N),inside:I},keys:{pattern:RegExp("&key\\s+"+N+"(?:\\s+&allow-other-keys)?"),inside:I},argument:{pattern:RegExp(y),alias:"variable"},punctuation:/[()]/}};R.lambda.inside.arguments=L,R.defun.inside.arguments=n.util.clone(L),R.defun.inside.arguments.inside.sublist=L,n.languages.lisp=R,n.languages.elisp=R,n.languages.emacs=R,n.languages["emacs-lisp"]=R})(s)}livescript.displayName="livescript";livescript.aliases=[];function livescript(s){s.languages.livescript={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?\*\//,lookbehind:!0},{pattern:/(^|[^\\])#.*/,lookbehind:!0}],"interpolated-string":{pattern:/(^|[^"])("""|")(?:\\[\s\S]|(?!\2)[^\\])*\2(?!")/,lookbehind:!0,greedy:!0,inside:{variable:{pattern:/(^|[^\\])#[a-z_](?:-?[a-z]|[\d_])*/m,lookbehind:!0},interpolation:{pattern:/(^|[^\\])#\{[^}]+\}/m,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^#\{|\}$/,alias:"variable"}}},string:/[\s\S]+/}},string:[{pattern:/('''|')(?:\\[\s\S]|(?!\1)[^\\])*\1/,greedy:!0},{pattern:/<\[[\s\S]*?\]>/,greedy:!0},/\\[^\s,;\])}]+/],regex:[{pattern:/\/\/(?:\[[^\r\n\]]*\]|\\.|(?!\/\/)[^\\\[])+\/\/[gimyu]{0,5}/,greedy:!0,inside:{comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0}}},{pattern:/\/(?:\[[^\r\n\]]*\]|\\.|[^/\\\r\n\[])+\/[gimyu]{0,5}/,greedy:!0}],keyword:{pattern:/(^|(?!-).)\b(?:break|case|catch|class|const|continue|default|do|else|extends|fallthrough|finally|for(?: ever)?|function|if|implements|it|let|loop|new|null|otherwise|own|return|super|switch|that|then|this|throw|try|unless|until|var|void|when|while|yield)(?!-)\b/m,lookbehind:!0},"keyword-operator":{pattern:/(^|[^-])\b(?:(?:delete|require|typeof)!|(?:and|by|delete|export|from|import(?: all)?|in|instanceof|is(?: not|nt)?|not|of|or|til|to|typeof|with|xor)(?!-)\b)/m,lookbehind:!0,alias:"operator"},boolean:{pattern:/(^|[^-])\b(?:false|no|off|on|true|yes)(?!-)\b/m,lookbehind:!0},argument:{pattern:/(^|(?!\.&\.)[^&])&(?!&)\d*/m,lookbehind:!0,alias:"variable"},number:/\b(?:\d+~[\da-z]+|\d[\d_]*(?:\.\d[\d_]*)?(?:[a-z]\w*)?)/i,identifier:/[a-z_](?:-?[a-z]|[\d_])*/i,operator:[{pattern:/( )\.(?= )/,lookbehind:!0},/\.(?:[=~]|\.\.?)|\.(?:[&|^]|<<|>>>?)\.|:(?:=|:=?)|&&|\|[|>]|<(?:<<?<?|--?!?|~~?!?|[|=?])?|>[>=?]?|-(?:->?|>)?|\+\+?|@@?|%%?|\*\*?|!(?:~?=|--?>|~?~>)?|~(?:~?>|=)?|==?|\^\^?|[\/?]/],punctuation:/[(){}\[\]|.,:;`]/},s.languages.livescript["interpolated-string"].inside.interpolation.inside.rest=s.languages.livescript}llvm.displayName="llvm";llvm.aliases=[];function llvm(s){(function(n){n.languages.llvm={comment:/;.*/,string:{pattern:/"[^"]*"/,greedy:!0},boolean:/\b(?:false|true)\b/,variable:/[%@!#](?:(?!\d)(?:[-$.\w]|\\[a-f\d]{2})+|\d+)/i,label:/(?!\d)(?:[-$.\w]|\\[a-f\d]{2})+:/i,type:{pattern:/\b(?:double|float|fp128|half|i[1-9]\d*|label|metadata|ppc_fp128|token|void|x86_fp80|x86_mmx)\b/,alias:"class-name"},keyword:/\b[a-z_][a-z_0-9]*\b/,number:/[+-]?\b\d+(?:\.\d+)?(?:[eE][+-]?\d+)?\b|\b0x[\dA-Fa-f]+\b|\b0xK[\dA-Fa-f]{20}\b|\b0x[ML][\dA-Fa-f]{32}\b|\b0xH[\dA-Fa-f]{4}\b/,punctuation:/[{}[\];(),.!*=<>]/}})(s)}log$1.displayName="log";log$1.aliases=[];function log$1(s){s.languages.log={string:{pattern:/"(?:[^"\\\r\n]|\\.)*"|'(?![st] | \w)(?:[^'\\\r\n]|\\.)*'/,greedy:!0},exception:{pattern:/(^|[^\w.])[a-z][\w.]*(?:Error|Exception):.*(?:(?:\r\n?|\n)[ \t]*(?:at[ \t].+|\.{3}.*|Caused by:.*))+(?:(?:\r\n?|\n)[ \t]*\.\.\. .*)?/,lookbehind:!0,greedy:!0,alias:["javastacktrace","language-javastacktrace"],inside:s.languages.javastacktrace||{keyword:/\bat\b/,function:/[a-z_][\w$]*(?=\()/,punctuation:/[.:()]/}},level:[{pattern:/\b(?:ALERT|CRIT|CRITICAL|EMERG|EMERGENCY|ERR|ERROR|FAILURE|FATAL|SEVERE)\b/,alias:["error","important"]},{pattern:/\b(?:WARN|WARNING|WRN)\b/,alias:["warning","important"]},{pattern:/\b(?:DISPLAY|INF|INFO|NOTICE|STATUS)\b/,alias:["info","keyword"]},{pattern:/\b(?:DBG|DEBUG|FINE)\b/,alias:["debug","keyword"]},{pattern:/\b(?:FINER|FINEST|TRACE|TRC|VERBOSE|VRB)\b/,alias:["trace","comment"]}],property:{pattern:/((?:^|[\]|])[ \t]*)[a-z_](?:[\w-]|\b\/\b)*(?:[. ]\(?\w(?:[\w-]|\b\/\b)*\)?)*:(?=\s)/im,lookbehind:!0},separator:{pattern:/(^|[^-+])-{3,}|={3,}|\*{3,}|- - /m,lookbehind:!0,alias:"comment"},url:/\b(?:file|ftp|https?):\/\/[^\s|,;'"]*[^\s|,;'">.]/,email:{pattern:/(^|\s)[-\w+.]+@[a-z][a-z0-9-]*(?:\.[a-z][a-z0-9-]*)+(?=\s)/,lookbehind:!0,alias:"url"},"ip-address":{pattern:/\b(?:\d{1,3}(?:\.\d{1,3}){3})\b/,alias:"constant"},"mac-address":{pattern:/\b[a-f0-9]{2}(?::[a-f0-9]{2}){5}\b/i,alias:"constant"},domain:{pattern:/(^|\s)[a-z][a-z0-9-]*(?:\.[a-z][a-z0-9-]*)*\.[a-z][a-z0-9-]+(?=\s)/,lookbehind:!0,alias:"constant"},uuid:{pattern:/\b[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}\b/i,alias:"constant"},hash:{pattern:/\b(?:[a-f0-9]{32}){1,2}\b/i,alias:"constant"},"file-path":{pattern:/\b[a-z]:[\\/][^\s|,;:(){}\[\]"']+|(^|[\s:\[\](>|])\.{0,2}\/\w[^\s|,;:(){}\[\]"']*/i,lookbehind:!0,greedy:!0,alias:"string"},date:{pattern:RegExp(/\b\d{4}[-/]\d{2}[-/]\d{2}(?:T(?=\d{1,2}:)|(?=\s\d{1,2}:))/.source+"|"+/\b\d{1,4}[-/ ](?:\d{1,2}|Apr|Aug|Dec|Feb|Jan|Jul|Jun|Mar|May|Nov|Oct|Sep)[-/ ]\d{2,4}T?\b/.source+"|"+/\b(?:(?:Fri|Mon|Sat|Sun|Thu|Tue|Wed)(?:\s{1,2}(?:Apr|Aug|Dec|Feb|Jan|Jul|Jun|Mar|May|Nov|Oct|Sep))?|Apr|Aug|Dec|Feb|Jan|Jul|Jun|Mar|May|Nov|Oct|Sep)\s{1,2}\d{1,2}\b/.source,"i"),alias:"number"},time:{pattern:/\b\d{1,2}:\d{1,2}:\d{1,2}(?:[.,:]\d+)?(?:\s?[+-]\d{2}:?\d{2}|Z)?\b/,alias:"number"},boolean:/\b(?:false|null|true)\b/i,number:{pattern:/(^|[^.\w])(?:0x[a-f0-9]+|0o[0-7]+|0b[01]+|v?\d[\da-f]*(?:\.\d+)*(?:e[+-]?\d+)?[a-z]{0,3}\b)\b(?!\.\w)/i,lookbehind:!0},operator:/[;:?<=>~/@!$%&+\-|^(){}*#]/,punctuation:/[\[\].,]/}}lolcode.displayName="lolcode";lolcode.aliases=[];function lolcode(s){s.languages.lolcode={comment:[/\bOBTW\s[\s\S]*?\sTLDR\b/,/\bBTW.+/],string:{pattern:/"(?::.|[^":])*"/,inside:{variable:/:\{[^}]+\}/,symbol:[/:\([a-f\d]+\)/i,/:\[[^\]]+\]/,/:[)>o":]/]},greedy:!0},number:/(?:\B-)?(?:\b\d+(?:\.\d*)?|\B\.\d+)/,symbol:{pattern:/(^|\s)(?:A )?(?:BUKKIT|NOOB|NUMBAR|NUMBR|TROOF|YARN)(?=\s|,|$)/,lookbehind:!0,inside:{keyword:/A(?=\s)/}},label:{pattern:/((?:^|\s)(?:IM IN YR|IM OUTTA YR) )[a-zA-Z]\w*/,lookbehind:!0,alias:"string"},function:{pattern:/((?:^|\s)(?:HOW IZ I|I IZ|IZ) )[a-zA-Z]\w*/,lookbehind:!0},keyword:[{pattern:/(^|\s)(?:AN|FOUND YR|GIMMEH|GTFO|HAI|HAS A|HOW IZ I|I HAS A|I IZ|IF U SAY SO|IM IN YR|IM OUTTA YR|IS NOW(?: A)?|ITZ(?: A)?|IZ|KTHX|KTHXBYE|LIEK(?: A)?|MAEK|MEBBE|MKAY|NERFIN|NO WAI|O HAI IM|O RLY\?|OIC|OMG|OMGWTF|R|SMOOSH|SRS|TIL|UPPIN|VISIBLE|WILE|WTF\?|YA RLY|YR)(?=\s|,|$)/,lookbehind:!0},/'Z(?=\s|,|$)/],boolean:{pattern:/(^|\s)(?:FAIL|WIN)(?=\s|,|$)/,lookbehind:!0},variable:{pattern:/(^|\s)IT(?=\s|,|$)/,lookbehind:!0},operator:{pattern:/(^|\s)(?:NOT|BOTH SAEM|DIFFRINT|(?:ALL|ANY|BIGGR|BOTH|DIFF|EITHER|MOD|PRODUKT|QUOSHUNT|SMALLR|SUM|WON) OF)(?=\s|,|$)/,lookbehind:!0},punctuation:/\.{3}||,|!/}}magma.displayName="magma";magma.aliases=[];function magma(s){s.languages.magma={output:{pattern:/^(>.*(?:\r(?:\n|(?!\n))|\n))(?!>)(?:.+|(?:\r(?:\n|(?!\n))|\n)(?!>).*)(?:(?:\r(?:\n|(?!\n))|\n)(?!>).*)*/m,lookbehind:!0,greedy:!0},comment:{pattern:/\/\/.*|\/\*[\s\S]*?\*\//,greedy:!0},string:{pattern:/(^|[^\\"])"(?:[^\r\n\\"]|\\.)*"/,lookbehind:!0,greedy:!0},keyword:/\b(?:_|adj|and|assert|assert2|assert3|assigned|break|by|case|cat|catch|clear|cmpeq|cmpne|continue|declare|default|delete|diff|div|do|elif|else|end|eq|error|eval|exists|exit|for|forall|forward|fprintf|freeze|function|ge|gt|if|iload|import|in|intrinsic|is|join|le|load|local|lt|meet|mod|ne|not|notadj|notin|notsubset|or|print|printf|procedure|quit|random|read|readi|repeat|require|requirege|requirerange|restore|return|save|sdiff|select|subset|then|time|to|try|until|vprint|vprintf|vtime|when|where|while|xor)\b/,boolean:/\b(?:false|true)\b/,generator:{pattern:/\b[a-z_]\w*(?=\s*<)/i,alias:"class-name"},function:/\b[a-z_]\w*(?=\s*\()/i,number:{pattern:/(^|[^\w.]|\.\.)(?:\d+(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+)?(?:_[a-z]?)?(?=$|[^\w.]|\.\.)/,lookbehind:!0},operator:/->|[-+*/^~!|#=]|:=|\.\./,punctuation:/[()[\]{}<>,;.:]/}}makefile.displayName="makefile";makefile.aliases=[];function makefile(s){s.languages.makefile={comment:{pattern:/(^|[^\\])#(?:\\(?:\r\n|[\s\S])|[^\\\r\n])*/,lookbehind:!0},string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"builtin-target":{pattern:/\.[A-Z][^:#=\s]+(?=\s*:(?!=))/,alias:"builtin"},target:{pattern:/^(?:[^:=\s]|[ \t]+(?![\s:]))+(?=\s*:(?!=))/m,alias:"symbol",inside:{variable:/\$+(?:(?!\$)[^(){}:#=\s]+|(?=[({]))/}},variable:/\$+(?:(?!\$)[^(){}:#=\s]+|\([@*%<^+?][DF]\)|(?=[({]))/,keyword:/-include\b|\b(?:define|else|endef|endif|export|ifn?def|ifn?eq|include|override|private|sinclude|undefine|unexport|vpath)\b/,function:{pattern:/(\()(?:abspath|addsuffix|and|basename|call|dir|error|eval|file|filter(?:-out)?|findstring|firstword|flavor|foreach|guile|if|info|join|lastword|load|notdir|or|origin|patsubst|realpath|shell|sort|strip|subst|suffix|value|warning|wildcard|word(?:list|s)?)(?=[ \t])/,lookbehind:!0},operator:/(?:::|[?:+!])?=|[|@]/,punctuation:/[:;(){}]/}}mata.displayName="mata";mata.aliases=[];function mata(s){(function(n){var u=/\b(?:(?:col|row)?vector|matrix|scalar)\b/.source,f=/\bvoid\b|<org>|\b(?:complex|numeric|pointer(?:\s*\([^()]*\))?|real|string|(?:class|struct)\s+\w+|transmorphic)(?:\s*<org>)?/.source.replace(/<org>/g,u);n.languages.mata={comment:{pattern:/\/\/.*|\/\*(?:[^*/]|\*(?!\/)|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/)*\*\//,greedy:!0},string:{pattern:/"[^"\r\n]*"|[`']".*?"[`']/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|struct)\s+)\w+(?=\s*(?:\{|\bextends\b))/,lookbehind:!0},type:{pattern:RegExp(f),alias:"class-name",inside:{punctuation:/[()]/,keyword:/\b(?:class|function|struct|void)\b/}},keyword:/\b(?:break|class|continue|do|else|end|extends|external|final|for|function|goto|if|pragma|private|protected|public|return|static|struct|unset|unused|version|virtual|while)\b/,constant:/\bNULL\b/,number:{pattern:/(^|[^\w.])(?:\d+(?:\.\d+)?(?:e[+-]?\d+)?|\d[a-f0-9]*(?:\.[a-f0-9]+)?x[+-]?\d+)i?(?![\w.])/i,lookbehind:!0},missing:{pattern:/(^|[^\w.])(?:\.[a-z]?)(?![\w.])/,lookbehind:!0,alias:"symbol"},function:/\b[a-z_]\w*(?=\s*\()/i,operator:/\.\.|\+\+|--|&&|\|\||:?(?:[!=<>]=|[+\-*/^<>&|:])|[!?=\\#`']/,punctuation:/[()[\]{},;.]/}})(s)}matlab.displayName="matlab";matlab.aliases=[];function matlab(s){s.languages.matlab={comment:[/%\{[\s\S]*?\}%/,/%.+/],string:{pattern:/\B'(?:''|[^'\r\n])*'/,greedy:!0},number:/(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[eE][+-]?\d+)?(?:[ij])?|\b[ij]\b/,keyword:/\b(?:NaN|break|case|catch|continue|else|elseif|end|for|function|if|inf|otherwise|parfor|pause|pi|return|switch|try|while)\b/,function:/\b(?!\d)\w+(?=\s*\()/,operator:/\.?[*^\/\\']|[+\-:@]|[<>=~]=?|&&?|\|\|?/,punctuation:/\.{3}|[.,;\[\](){}!]/}}maxscript.displayName="maxscript";maxscript.aliases=[];function maxscript(s){(function(n){var u=/\b(?:about|and|animate|as|at|attributes|by|case|catch|collect|continue|coordsys|do|else|exit|fn|for|from|function|global|if|in|local|macroscript|mapped|max|not|of|off|on|or|parameters|persistent|plugin|rcmenu|return|rollout|set|struct|then|throw|to|tool|try|undo|utility|when|where|while|with)\b/i;n.languages.maxscript={comment:{pattern:/\/\*[\s\S]*?(?:\*\/|$)|--.*/,greedy:!0},string:{pattern:/(^|[^"\\@])(?:"(?:[^"\\]|\\[\s\S])*"|@"[^"]*")/,lookbehind:!0,greedy:!0},path:{pattern:/\$(?:[\w/\\.*?]|'[^']*')*/,greedy:!0,alias:"string"},"function-call":{pattern:RegExp("((?:"+(/^/.source+"|"+/[;=<>+\-*/^({\[]/.source+"|"+/\b(?:and|by|case|catch|collect|do|else|if|in|not|or|return|then|to|try|where|while|with)\b/.source)+")[ 	]*)(?!"+u.source+")"+/[a-z_]\w*\b/.source+"(?=[ 	]*(?:"+("(?!"+u.source+")"+/[a-z_]/.source+"|"+/\d|-\.?\d/.source+"|"+/[({'"$@#?]/.source)+"))","im"),lookbehind:!0,greedy:!0,alias:"function"},"function-definition":{pattern:/(\b(?:fn|function)\s+)\w+\b/i,lookbehind:!0,alias:"function"},argument:{pattern:/\b[a-z_]\w*(?=:)/i,alias:"attr-name"},keyword:u,boolean:/\b(?:false|true)\b/,time:{pattern:/(^|[^\w.])(?:(?:(?:\d+(?:\.\d*)?|\.\d+)(?:[eEdD][+-]\d+|[LP])?[msft])+|\d+:\d+(?:\.\d*)?)(?![\w.:])/,lookbehind:!0,alias:"number"},number:[{pattern:/(^|[^\w.])(?:(?:\d+(?:\.\d*)?|\.\d+)(?:[eEdD][+-]\d+|[LP])?|0x[a-fA-F0-9]+)(?![\w.:])/,lookbehind:!0},/\b(?:e|pi)\b/],constant:/\b(?:dontcollect|ok|silentValue|undefined|unsupplied)\b/,color:{pattern:/\b(?:black|blue|brown|gray|green|orange|red|white|yellow)\b/i,alias:"constant"},operator:/[-+*/<>=!]=?|[&^?]|#(?!\()/,punctuation:/[()\[\]{}.:,;]|#(?=\()|\\$/m}})(s)}mel.displayName="mel";mel.aliases=[];function mel(s){s.languages.mel={comment:{pattern:/\/\/.*|\/\*[\s\S]*?\*\//,greedy:!0},code:{pattern:/`(?:\\.|[^\\`])*`/,greedy:!0,alias:"italic",inside:{delimiter:{pattern:/^`|`$/,alias:"punctuation"},statement:{pattern:/[\s\S]+/,inside:null}}},string:{pattern:/"(?:\\.|[^\\"\r\n])*"/,greedy:!0},variable:/\$\w+/,number:/\b0x[\da-fA-F]+\b|\b\d+(?:\.\d*)?|\B\.\d+/,flag:{pattern:/-[^\d\W]\w*/,alias:"operator"},keyword:/\b(?:break|case|continue|default|do|else|float|for|global|if|in|int|matrix|proc|return|string|switch|vector|while)\b/,function:{pattern:/((?:^|[{;])[ \t]*)[a-z_]\w*\b(?!\s*(?:\.(?!\.)|[[{=]))|\b[a-z_]\w*(?=[ \t]*\()/im,lookbehind:!0,greedy:!0},"tensor-punctuation":{pattern:/<<|>>/,alias:"punctuation"},operator:/\+[+=]?|-[-=]?|&&|\|\||[<>]=?|[*\/!=]=?|[%^]/,punctuation:/[.,:;?\[\](){}]/},s.languages.mel.code.inside.statement.inside=s.languages.mel}mermaid.displayName="mermaid";mermaid.aliases=[];function mermaid(s){s.languages.mermaid={comment:{pattern:/%%.*/,greedy:!0},style:{pattern:/^([ \t]*(?:classDef|linkStyle|style)[ \t]+[\w$-]+[ \t]+)\w.*[^\s;]/m,lookbehind:!0,inside:{property:/\b\w[\w-]*(?=[ \t]*:)/,operator:/:/,punctuation:/,/}},"inter-arrow-label":{pattern:/([^<>ox.=-])(?:-[-.]|==)(?![<>ox.=-])[ \t]*(?:"[^"\r\n]*"|[^\s".=-](?:[^\r\n.=-]*[^\s.=-])?)[ \t]*(?:\.+->?|--+[->]|==+[=>])(?![<>ox.=-])/,lookbehind:!0,greedy:!0,inside:{arrow:{pattern:/(?:\.+->?|--+[->]|==+[=>])$/,alias:"operator"},label:{pattern:/^([\s\S]{2}[ \t]*)\S(?:[\s\S]*\S)?/,lookbehind:!0,alias:"property"},"arrow-head":{pattern:/^\S+/,alias:["arrow","operator"]}}},arrow:[{pattern:/(^|[^{}|o.-])[|}][|o](?:--|\.\.)[|o][|{](?![{}|o.-])/,lookbehind:!0,alias:"operator"},{pattern:/(^|[^<>ox.=-])(?:[<ox](?:==+|--+|-\.*-)[>ox]?|(?:==+|--+|-\.*-)[>ox]|===+|---+|-\.+-)(?![<>ox.=-])/,lookbehind:!0,alias:"operator"},{pattern:/(^|[^<>()x-])(?:--?(?:>>|[x>)])(?![<>()x])|(?:<<|[x<(])--?(?!-))/,lookbehind:!0,alias:"operator"},{pattern:/(^|[^<>|*o.-])(?:[*o]--|--[*o]|<\|?(?:--|\.\.)|(?:--|\.\.)\|?>|--|\.\.)(?![<>|*o.-])/,lookbehind:!0,alias:"operator"}],label:{pattern:/(^|[^|<])\|(?:[^\r\n"|]|"[^"\r\n]*")+\|/,lookbehind:!0,greedy:!0,alias:"property"},text:{pattern:/(?:[(\[{]+|\b>)(?:[^\r\n"()\[\]{}]|"[^"\r\n]*")+(?:[)\]}]+|>)/,alias:"string"},string:{pattern:/"[^"\r\n]*"/,greedy:!0},annotation:{pattern:/<<(?:abstract|choice|enumeration|fork|interface|join|service)>>|\[\[(?:choice|fork|join)\]\]/i,alias:"important"},keyword:[{pattern:/(^[ \t]*)(?:action|callback|class|classDef|classDiagram|click|direction|erDiagram|flowchart|gantt|gitGraph|graph|journey|link|linkStyle|pie|requirementDiagram|sequenceDiagram|stateDiagram|stateDiagram-v2|style|subgraph)(?![\w$-])/m,lookbehind:!0,greedy:!0},{pattern:/(^[ \t]*)(?:activate|alt|and|as|autonumber|deactivate|else|end(?:[ \t]+note)?|loop|opt|par|participant|rect|state|note[ \t]+(?:over|(?:left|right)[ \t]+of))(?![\w$-])/im,lookbehind:!0,greedy:!0}],entity:/#[a-z0-9]+;/,operator:{pattern:/(\w[ \t]*)&(?=[ \t]*\w)|:::|:/,lookbehind:!0},punctuation:/[(){};]/}}metafont.displayName="metafont";metafont.aliases=[];function metafont(s){s.languages.metafont={comment:{pattern:/%.*/,greedy:!0},string:{pattern:/"[^\r\n"]*"/,greedy:!0},number:/\d*\.?\d+/,boolean:/\b(?:false|true)\b/,punctuation:[/[,;()]/,{pattern:/(^|[^{}])(?:\{|\})(?![{}])/,lookbehind:!0},{pattern:/(^|[^[])\[(?!\[)/,lookbehind:!0},{pattern:/(^|[^\]])\](?!\])/,lookbehind:!0}],constant:[{pattern:/(^|[^!?])\?\?\?(?![!?])/,lookbehind:!0},{pattern:/(^|[^/*\\])(?:\\|\\\\)(?![/*\\])/,lookbehind:!0},/\b(?:_|blankpicture|bp|cc|cm|dd|ditto|down|eps|epsilon|fullcircle|halfcircle|identity|in|infinity|left|mm|nullpen|nullpicture|origin|pc|penrazor|penspeck|pensquare|penstroke|proof|pt|quartercircle|relax|right|smoke|unitpixel|unitsquare|up)\b/],quantity:{pattern:/\b(?:autorounding|blacker|boundarychar|charcode|chardp|chardx|chardy|charext|charht|charic|charwd|currentwindow|day|designsize|displaying|fillin|fontmaking|granularity|hppp|join_radius|month|o_correction|pausing|pen_(?:bot|lft|rt|top)|pixels_per_inch|proofing|showstopping|smoothing|time|tolerance|tracingcapsules|tracingchoices|tracingcommands|tracingedges|tracingequations|tracingmacros|tracingonline|tracingoutput|tracingpens|tracingrestores|tracingspecs|tracingstats|tracingtitles|turningcheck|vppp|warningcheck|xoffset|year|yoffset)\b/,alias:"keyword"},command:{pattern:/\b(?:addto|batchmode|charlist|cull|display|errhelp|errmessage|errorstopmode|everyjob|extensible|fontdimen|headerbyte|inner|interim|let|ligtable|message|newinternal|nonstopmode|numspecial|openwindow|outer|randomseed|save|scrollmode|shipout|show|showdependencies|showstats|showtoken|showvariable|special)\b/,alias:"builtin"},operator:[{pattern:/(^|[^>=<:|])(?:<|<=|=|=:|\|=:|\|=:>|=:\|>|=:\||\|=:\||\|=:\|>|\|=:\|>>|>|>=|:|:=|<>|::|\|\|:)(?![>=<:|])/,lookbehind:!0},{pattern:/(^|[^+-])(?:\+|\+\+|-{1,3}|\+-\+)(?![+-])/,lookbehind:!0},{pattern:/(^|[^/*\\])(?:\*|\*\*|\/)(?![/*\\])/,lookbehind:!0},{pattern:/(^|[^.])(?:\.{2,3})(?!\.)/,lookbehind:!0},{pattern:/(^|[^@#&$])&(?![@#&$])/,lookbehind:!0},/\b(?:and|not|or)\b/],macro:{pattern:/\b(?:abs|beginchar|bot|byte|capsule_def|ceiling|change_width|clear_pen_memory|clearit|clearpen|clearxy|counterclockwise|cullit|cutdraw|cutoff|decr|define_blacker_pixels|define_corrected_pixels|define_good_x_pixels|define_good_y_pixels|define_horizontal_corrected_pixels|define_pixels|define_whole_blacker_pixels|define_whole_pixels|define_whole_vertical_blacker_pixels|define_whole_vertical_pixels|dir|direction|directionpoint|div|dotprod|downto|draw|drawdot|endchar|erase|fill|filldraw|fix_units|flex|font_coding_scheme|font_extra_space|font_identifier|font_normal_shrink|font_normal_space|font_normal_stretch|font_quad|font_size|font_slant|font_x_height|gfcorners|gobble|gobbled|good\.(?:bot|lft|rt|top|x|y)|grayfont|hide|hround|imagerules|incr|interact|interpath|intersectionpoint|inverse|italcorr|killtext|labelfont|labels|lft|loggingall|lowres_fix|makegrid|makelabel(?:\.(?:bot|lft|rt|top)(?:\.nodot)?)?|max|min|mod|mode_def|mode_setup|nodisplays|notransforms|numtok|openit|penlabels|penpos|pickup|proofoffset|proofrule|proofrulethickness|range|reflectedabout|rotatedabout|rotatedaround|round|rt|savepen|screenchars|screenrule|screenstrokes|shipit|showit|slantfont|softjoin|solve|stop|superellipse|tensepath|thru|titlefont|top|tracingall|tracingnone|undraw|undrawdot|unfill|unfilldraw|upto|vround)\b/,alias:"function"},builtin:/\b(?:ASCII|angle|char|cosd|decimal|directiontime|floor|hex|intersectiontimes|jobname|known|length|makepath|makepen|mexp|mlog|normaldeviate|oct|odd|pencircle|penoffset|point|postcontrol|precontrol|reverse|rotated|sind|sqrt|str|subpath|substring|totalweight|turningnumber|uniformdeviate|unknown|xpart|xxpart|xypart|ypart|yxpart|yypart)\b/,keyword:/\b(?:also|at|atleast|begingroup|charexists|contour|controls|curl|cycle|def|delimiters|doublepath|dropping|dump|else|elseif|end|enddef|endfor|endgroup|endinput|exitif|exitunless|expandafter|fi|for|forever|forsuffixes|from|if|input|inwindow|keeping|kern|of|primarydef|quote|readstring|scaled|scantokens|secondarydef|shifted|skipto|slanted|step|tension|tertiarydef|to|transformed|until|vardef|withpen|withweight|xscaled|yscaled|zscaled)\b/,type:{pattern:/\b(?:boolean|expr|numeric|pair|path|pen|picture|primary|secondary|string|suffix|tertiary|text|transform)\b/,alias:"property"},variable:{pattern:/(^|[^@#&$])(?:@#|#@|#|@)(?![@#&$])|\b(?:aspect_ratio|currentpen|currentpicture|currenttransform|d|extra_beginchar|extra_endchar|extra_setup|h|localfont|mag|mode|screen_cols|screen_rows|w|whatever|x|y|z)\b/,lookbehind:!0}}}mizar.displayName="mizar";mizar.aliases=[];function mizar(s){s.languages.mizar={comment:/::.+/,keyword:/@proof\b|\b(?:according|aggregate|all|and|antonym|are|as|associativity|assume|asymmetry|attr|be|begin|being|by|canceled|case|cases|clusters?|coherence|commutativity|compatibility|connectedness|consider|consistency|constructors|contradiction|correctness|def|deffunc|define|definitions?|defpred|do|does|end|environ|equals|ex|exactly|existence|for|from|func|given|hence|hereby|holds|idempotence|identity|iff?|implies|involutiveness|irreflexivity|is|it|let|means|mode|non|not|notations?|now|of|or|otherwise|over|per|pred|prefix|projectivity|proof|provided|qua|reconsider|redefine|reduce|reducibility|reflexivity|registrations?|requirements|reserve|sch|schemes?|section|selector|set|sethood|st|struct|such|suppose|symmetry|synonym|take|that|the|then|theorems?|thesis|thus|to|transitivity|uniqueness|vocabular(?:ies|y)|when|where|with|wrt)\b/,parameter:{pattern:/\$(?:10|\d)/,alias:"variable"},variable:/\b\w+(?=:)/,number:/(?:\b|-)\d+\b/,operator:/\.\.\.|->|&|\.?=/,punctuation:/\(#|#\)|[,:;\[\](){}]/}}mongodb.displayName="mongodb";mongodb.aliases=[];function mongodb(s){s.register(javascript),(function(n){var u=["$eq","$gt","$gte","$in","$lt","$lte","$ne","$nin","$and","$not","$nor","$or","$exists","$type","$expr","$jsonSchema","$mod","$regex","$text","$where","$geoIntersects","$geoWithin","$near","$nearSphere","$all","$elemMatch","$size","$bitsAllClear","$bitsAllSet","$bitsAnyClear","$bitsAnySet","$comment","$elemMatch","$meta","$slice","$currentDate","$inc","$min","$max","$mul","$rename","$set","$setOnInsert","$unset","$addToSet","$pop","$pull","$push","$pullAll","$each","$position","$slice","$sort","$bit","$addFields","$bucket","$bucketAuto","$collStats","$count","$currentOp","$facet","$geoNear","$graphLookup","$group","$indexStats","$limit","$listLocalSessions","$listSessions","$lookup","$match","$merge","$out","$planCacheStats","$project","$redact","$replaceRoot","$replaceWith","$sample","$set","$skip","$sort","$sortByCount","$unionWith","$unset","$unwind","$setWindowFields","$abs","$accumulator","$acos","$acosh","$add","$addToSet","$allElementsTrue","$and","$anyElementTrue","$arrayElemAt","$arrayToObject","$asin","$asinh","$atan","$atan2","$atanh","$avg","$binarySize","$bsonSize","$ceil","$cmp","$concat","$concatArrays","$cond","$convert","$cos","$dateFromParts","$dateToParts","$dateFromString","$dateToString","$dayOfMonth","$dayOfWeek","$dayOfYear","$degreesToRadians","$divide","$eq","$exp","$filter","$first","$floor","$function","$gt","$gte","$hour","$ifNull","$in","$indexOfArray","$indexOfBytes","$indexOfCP","$isArray","$isNumber","$isoDayOfWeek","$isoWeek","$isoWeekYear","$last","$last","$let","$literal","$ln","$log","$log10","$lt","$lte","$ltrim","$map","$max","$mergeObjects","$meta","$min","$millisecond","$minute","$mod","$month","$multiply","$ne","$not","$objectToArray","$or","$pow","$push","$radiansToDegrees","$range","$reduce","$regexFind","$regexFindAll","$regexMatch","$replaceOne","$replaceAll","$reverseArray","$round","$rtrim","$second","$setDifference","$setEquals","$setIntersection","$setIsSubset","$setUnion","$size","$sin","$slice","$split","$sqrt","$stdDevPop","$stdDevSamp","$strcasecmp","$strLenBytes","$strLenCP","$substr","$substrBytes","$substrCP","$subtract","$sum","$switch","$tan","$toBool","$toDate","$toDecimal","$toDouble","$toInt","$toLong","$toObjectId","$toString","$toLower","$toUpper","$trim","$trunc","$type","$week","$year","$zip","$count","$dateAdd","$dateDiff","$dateSubtract","$dateTrunc","$getField","$rand","$sampleRate","$setField","$unsetField","$comment","$explain","$hint","$max","$maxTimeMS","$min","$orderby","$query","$returnKey","$showDiskLoc","$natural"],f=["ObjectId","Code","BinData","DBRef","Timestamp","NumberLong","NumberDecimal","MaxKey","MinKey","RegExp","ISODate","UUID"];u=u.map(function(S){return S.replace("$","\\$")});var y="(?:"+u.join("|")+")\\b";n.languages.mongodb=n.languages.extend("javascript",{}),n.languages.insertBefore("mongodb","string",{property:{pattern:/(?:(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)(?=\s*:)/,greedy:!0,inside:{keyword:RegExp(`^(['"])?`+y+"(?:\\1)?$")}}}),n.languages.mongodb.string.inside={url:{pattern:/https?:\/\/[-\w@:%.+~#=]{1,256}\.[a-z0-9()]{1,6}\b[-\w()@:%+.~#?&/=]*/i,greedy:!0},entity:{pattern:/\b(?:(?:[01]?\d\d?|2[0-4]\d|25[0-5])\.){3}(?:[01]?\d\d?|2[0-4]\d|25[0-5])\b/,greedy:!0}},n.languages.insertBefore("mongodb","constant",{builtin:{pattern:RegExp("\\b(?:"+f.join("|")+")\\b"),alias:"keyword"}})})(s)}monkey.displayName="monkey";monkey.aliases=[];function monkey(s){s.languages.monkey={comment:{pattern:/^#Rem\s[\s\S]*?^#End|'.+/im,greedy:!0},string:{pattern:/"[^"\r\n]*"/,greedy:!0},preprocessor:{pattern:/(^[ \t]*)#.+/m,lookbehind:!0,greedy:!0,alias:"property"},function:/\b\w+(?=\()/,"type-char":{pattern:/\b[?%#$]/,alias:"class-name"},number:{pattern:/((?:\.\.)?)(?:(?:\b|\B-\.?|\B\.)\d+(?:(?!\.\.)\.\d*)?|\$[\da-f]+)/i,lookbehind:!0},keyword:/\b(?:Abstract|Array|Bool|Case|Catch|Class|Const|Continue|Default|Eachin|Else|ElseIf|End|EndIf|Exit|Extends|Extern|False|Field|Final|Float|For|Forever|Function|Global|If|Implements|Import|Inline|Int|Interface|Local|Method|Module|New|Next|Null|Object|Private|Property|Public|Repeat|Return|Select|Self|Step|Strict|String|Super|Then|Throw|To|True|Try|Until|Void|Wend|While)\b/i,operator:/\.\.|<[=>]?|>=?|:?=|(?:[+\-*\/&~|]|\b(?:Mod|Shl|Shr)\b)=?|\b(?:And|Not|Or)\b/i,punctuation:/[.,:;()\[\]]/}}moonscript.displayName="moonscript";moonscript.aliases=["moon"];function moonscript(s){s.languages.moonscript={comment:/--.*/,string:[{pattern:/'[^']*'|\[(=*)\[[\s\S]*?\]\1\]/,greedy:!0},{pattern:/"[^"]*"/,greedy:!0,inside:{interpolation:{pattern:/#\{[^{}]*\}/,inside:{moonscript:{pattern:/(^#\{)[\s\S]+(?=\})/,lookbehind:!0,inside:null},"interpolation-punctuation":{pattern:/#\{|\}/,alias:"punctuation"}}}}}],"class-name":[{pattern:/(\b(?:class|extends)[ \t]+)\w+/,lookbehind:!0},/\b[A-Z]\w*/],keyword:/\b(?:class|continue|do|else|elseif|export|extends|for|from|if|import|in|local|nil|return|self|super|switch|then|unless|using|when|while|with)\b/,variable:/@@?\w*/,property:{pattern:/\b(?!\d)\w+(?=:)|(:)(?!\d)\w+/,lookbehind:!0},function:{pattern:/\b(?:_G|_VERSION|assert|collectgarbage|coroutine\.(?:create|resume|running|status|wrap|yield)|debug\.(?:debug|getfenv|gethook|getinfo|getlocal|getmetatable|getregistry|getupvalue|setfenv|sethook|setlocal|setmetatable|setupvalue|traceback)|dofile|error|getfenv|getmetatable|io\.(?:close|flush|input|lines|open|output|popen|read|stderr|stdin|stdout|tmpfile|type|write)|ipairs|load|loadfile|loadstring|math\.(?:abs|acos|asin|atan|atan2|ceil|cos|cosh|deg|exp|floor|fmod|frexp|ldexp|log|log10|max|min|modf|pi|pow|rad|random|randomseed|sin|sinh|sqrt|tan|tanh)|module|next|os\.(?:clock|date|difftime|execute|exit|getenv|remove|rename|setlocale|time|tmpname)|package\.(?:cpath|loaded|loadlib|path|preload|seeall)|pairs|pcall|print|rawequal|rawget|rawset|require|select|setfenv|setmetatable|string\.(?:byte|char|dump|find|format|gmatch|gsub|len|lower|match|rep|reverse|sub|upper)|table\.(?:concat|insert|maxn|remove|sort)|tonumber|tostring|type|unpack|xpcall)\b/,inside:{punctuation:/\./}},boolean:/\b(?:false|true)\b/,number:/(?:\B\.\d+|\b\d+\.\d+|\b\d+(?=[eE]))(?:[eE][-+]?\d+)?\b|\b(?:0x[a-fA-F\d]+|\d+)(?:U?LL)?\b/,operator:/\.{3}|[-=]>|~=|(?:[-+*/%<>!=]|\.\.)=?|[:#^]|\b(?:and|or)\b=?|\b(?:not)\b/,punctuation:/[.,()[\]{}\\]/},s.languages.moonscript.string[1].inside.interpolation.inside.moonscript.inside=s.languages.moonscript,s.languages.moon=s.languages.moonscript}n1ql.displayName="n1ql";n1ql.aliases=[];function n1ql(s){s.languages.n1ql={comment:{pattern:/\/\*[\s\S]*?(?:$|\*\/)|--.*/,greedy:!0},string:{pattern:/(["'])(?:\\[\s\S]|(?!\1)[^\\]|\1\1)*\1/,greedy:!0},identifier:{pattern:/`(?:\\[\s\S]|[^\\`]|``)*`/,greedy:!0},parameter:/\$[\w.]+/,keyword:/\b(?:ADVISE|ALL|ALTER|ANALYZE|AS|ASC|AT|BEGIN|BINARY|BOOLEAN|BREAK|BUCKET|BUILD|BY|CALL|CAST|CLUSTER|COLLATE|COLLECTION|COMMIT|COMMITTED|CONNECT|CONTINUE|CORRELATE|CORRELATED|COVER|CREATE|CURRENT|DATABASE|DATASET|DATASTORE|DECLARE|DECREMENT|DELETE|DERIVED|DESC|DESCRIBE|DISTINCT|DO|DROP|EACH|ELEMENT|EXCEPT|EXCLUDE|EXECUTE|EXPLAIN|FETCH|FILTER|FLATTEN|FLUSH|FOLLOWING|FOR|FORCE|FROM|FTS|FUNCTION|GOLANG|GRANT|GROUP|GROUPS|GSI|HASH|HAVING|IF|IGNORE|ILIKE|INCLUDE|INCREMENT|INDEX|INFER|INLINE|INNER|INSERT|INTERSECT|INTO|IS|ISOLATION|JAVASCRIPT|JOIN|KEY|KEYS|KEYSPACE|KNOWN|LANGUAGE|LAST|LEFT|LET|LETTING|LEVEL|LIMIT|LSM|MAP|MAPPING|MATCHED|MATERIALIZED|MERGE|MINUS|MISSING|NAMESPACE|NEST|NL|NO|NTH_VALUE|NULL|NULLS|NUMBER|OBJECT|OFFSET|ON|OPTION|OPTIONS|ORDER|OTHERS|OUTER|OVER|PARSE|PARTITION|PASSWORD|PATH|POOL|PRECEDING|PREPARE|PRIMARY|PRIVATE|PRIVILEGE|PROBE|PROCEDURE|PUBLIC|RANGE|RAW|REALM|REDUCE|RENAME|RESPECT|RETURN|RETURNING|REVOKE|RIGHT|ROLE|ROLLBACK|ROW|ROWS|SATISFIES|SAVEPOINT|SCHEMA|SCOPE|SELECT|SELF|SEMI|SET|SHOW|SOME|START|STATISTICS|STRING|SYSTEM|TIES|TO|TRAN|TRANSACTION|TRIGGER|TRUNCATE|UNBOUNDED|UNDER|UNION|UNIQUE|UNKNOWN|UNNEST|UNSET|UPDATE|UPSERT|USE|USER|USING|VALIDATE|VALUE|VALUES|VIA|VIEW|WHERE|WHILE|WINDOW|WITH|WORK|XOR)\b/i,function:/\b[a-z_]\w*(?=\s*\()/i,boolean:/\b(?:FALSE|TRUE)\b/i,number:/(?:\b\d+\.|\B\.)\d+e[+\-]?\d+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[-+*\/%]|!=|==?|\|\||<[>=]?|>=?|\b(?:AND|ANY|ARRAY|BETWEEN|CASE|ELSE|END|EVERY|EXISTS|FIRST|IN|LIKE|NOT|OR|THEN|VALUED|WHEN|WITHIN)\b/i,punctuation:/[;[\](),.{}:]/}}nand2tetrisHdl.displayName="nand2tetris-hdl";nand2tetrisHdl.aliases=[];function nand2tetrisHdl(s){s.languages["nand2tetris-hdl"]={comment:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,keyword:/\b(?:BUILTIN|CHIP|CLOCKED|IN|OUT|PARTS)\b/,boolean:/\b(?:false|true)\b/,function:/\b[A-Za-z][A-Za-z0-9]*(?=\()/,number:/\b\d+\b/,operator:/=|\.\./,punctuation:/[{}[\];(),:]/}}naniscript.displayName="naniscript";naniscript.aliases=["nani"];function naniscript(s){(function(n){var u=/\{[^\r\n\[\]{}]*\}/,f={"quoted-string":{pattern:/"(?:[^"\\]|\\.)*"/,alias:"operator"},"command-param-id":{pattern:/(\s)\w+:/,lookbehind:!0,alias:"property"},"command-param-value":[{pattern:u,alias:"selector"},{pattern:/([\t ])\S+/,lookbehind:!0,greedy:!0,alias:"operator"},{pattern:/\S(?:.*\S)?/,alias:"operator"}]};n.languages.naniscript={comment:{pattern:/^([\t ]*);.*/m,lookbehind:!0},define:{pattern:/^>.+/m,alias:"tag",inside:{value:{pattern:/(^>\w+[\t ]+)(?!\s)[^{}\r\n]+/,lookbehind:!0,alias:"operator"},key:{pattern:/(^>)\w+/,lookbehind:!0}}},label:{pattern:/^([\t ]*)#[\t ]*\w+[\t ]*$/m,lookbehind:!0,alias:"regex"},command:{pattern:/^([\t ]*)@\w+(?=[\t ]|$).*/m,lookbehind:!0,alias:"function",inside:{"command-name":/^@\w+/,expression:{pattern:u,greedy:!0,alias:"selector"},"command-params":{pattern:/\s*\S[\s\S]*/,inside:f}}},"generic-text":{pattern:/(^[ \t]*)[^#@>;\s].*/m,lookbehind:!0,alias:"punctuation",inside:{"escaped-char":/\\[{}\[\]"]/,expression:{pattern:u,greedy:!0,alias:"selector"},"inline-command":{pattern:/\[[\t ]*\w[^\r\n\[\]]*\]/,greedy:!0,alias:"function",inside:{"command-params":{pattern:/(^\[[\t ]*\w+\b)[\s\S]+(?=\]$)/,lookbehind:!0,inside:f},"command-param-name":{pattern:/^(\[[\t ]*)\w+/,lookbehind:!0,alias:"name"},"start-stop-char":/[\[\]]/}}}}},n.languages.nani=n.languages.naniscript,n.hooks.add("after-tokenize",function(A){var w=A.tokens;w.forEach(function(C){if(typeof C!="string"&&C.type==="generic-text"){var T=S(C);y(T)||(C.type="bad-line",C.content=T)}})});function y(A){for(var w="[]{}",C=[],T=0;T<A.length;T++){var R=A[T],I=w.indexOf(R);if(I!==-1){if(I%2===0)C.push(I+1);else if(C.pop()!==I)return!1}}return C.length===0}function S(A){return typeof A=="string"?A:Array.isArray(A)?A.map(S).join(""):S(A.content)}})(s)}nasm.displayName="nasm";nasm.aliases=[];function nasm(s){s.languages.nasm={comment:/;.*$/m,string:/(["'`])(?:\\.|(?!\1)[^\\\r\n])*\1/,label:{pattern:/(^\s*)[A-Za-z._?$][\w.?$@~#]*:/m,lookbehind:!0,alias:"function"},keyword:[/\[?BITS (?:16|32|64)\]?/,{pattern:/(^\s*)section\s*[a-z.]+:?/im,lookbehind:!0},/(?:extern|global)[^;\r\n]*/i,/(?:CPU|DEFAULT|FLOAT).*$/m],register:{pattern:/\b(?:st\d|[xyz]mm\d\d?|[cdt]r\d|r\d\d?[bwd]?|[er]?[abcd]x|[abcd][hl]|[er]?(?:bp|di|si|sp)|[cdefgs]s)\b/i,alias:"variable"},number:/(?:\b|(?=\$))(?:0[hx](?:\.[\da-f]+|[\da-f]+(?:\.[\da-f]+)?)(?:p[+-]?\d+)?|\d[\da-f]+[hx]|\$\d[\da-f]*|0[oq][0-7]+|[0-7]+[oq]|0[by][01]+|[01]+[by]|0[dt]\d+|(?:\d+(?:\.\d+)?|\.\d+)(?:\.?e[+-]?\d+)?[dt]?)\b/i,operator:/[\[\]*+\-\/%<>=&|$!]/}}neon.displayName="neon";neon.aliases=[];function neon(s){s.languages.neon={comment:{pattern:/#.*/,greedy:!0},datetime:{pattern:/(^|[[{(=:,\s])\d\d\d\d-\d\d?-\d\d?(?:(?:[Tt]| +)\d\d?:\d\d:\d\d(?:\.\d*)? *(?:Z|[-+]\d\d?(?::?\d\d)?)?)?(?=$|[\]}),\s])/,lookbehind:!0,alias:"number"},key:{pattern:/(^|[[{(,\s])[^,:=[\]{}()'"\s]+(?=\s*:(?:$|[\]}),\s])|\s*=)/,lookbehind:!0,alias:"property"},number:{pattern:/(^|[[{(=:,\s])[+-]?(?:0x[\da-fA-F]+|0o[0-7]+|0b[01]+|(?:\d+(?:\.\d*)?|\.?\d+)(?:[eE][+-]?\d+)?)(?=$|[\]}),:=\s])/,lookbehind:!0},boolean:{pattern:/(^|[[{(=:,\s])(?:false|no|true|yes)(?=$|[\]}),:=\s])/i,lookbehind:!0},null:{pattern:/(^|[[{(=:,\s])(?:null)(?=$|[\]}),:=\s])/i,lookbehind:!0,alias:"keyword"},string:{pattern:/(^|[[{(=:,\s])(?:('''|""")\r?\n(?:(?:[^\r\n]|\r?\n(?![\t ]*\2))*\r?\n)?[\t ]*\2|'[^'\r\n]*'|"(?:\\.|[^\\"\r\n])*")/,lookbehind:!0,greedy:!0},literal:{pattern:/(^|[[{(=:,\s])(?:[^#"',:=[\]{}()\s`-]|[:-][^"',=[\]{}()\s])(?:[^,:=\]})(\s]|:(?![\s,\]})]|$)|[ \t]+[^#,:=\]})(\s])*/,lookbehind:!0,alias:"string"},punctuation:/[,:=[\]{}()-]/}}nevod.displayName="nevod";nevod.aliases=[];function nevod(s){s.languages.nevod={comment:/\/\/.*|(?:\/\*[\s\S]*?(?:\*\/|$))/,string:{pattern:/(?:"(?:""|[^"])*"(?!")|'(?:''|[^'])*'(?!'))!?\*?/,greedy:!0,inside:{"string-attrs":/!$|!\*$|\*$/}},namespace:{pattern:/(@namespace\s+)[a-zA-Z0-9\-.]+(?=\s*\{)/,lookbehind:!0},pattern:{pattern:/(@pattern\s+)?#?[a-zA-Z0-9\-.]+(?:\s*\(\s*(?:~\s*)?[a-zA-Z0-9\-.]+\s*(?:,\s*(?:~\s*)?[a-zA-Z0-9\-.]*)*\))?(?=\s*=)/,lookbehind:!0,inside:{"pattern-name":{pattern:/^#?[a-zA-Z0-9\-.]+/,alias:"class-name"},fields:{pattern:/\(.*\)/,inside:{"field-name":{pattern:/[a-zA-Z0-9\-.]+/,alias:"variable"},punctuation:/[,()]/,operator:{pattern:/~/,alias:"field-hidden-mark"}}}}},search:{pattern:/(@search\s+|#)[a-zA-Z0-9\-.]+(?:\.\*)?(?=\s*;)/,alias:"function",lookbehind:!0},keyword:/@(?:having|inside|namespace|outside|pattern|require|search|where)\b/,"standard-pattern":{pattern:/\b(?:Alpha|AlphaNum|Any|Blank|End|LineBreak|Num|NumAlpha|Punct|Space|Start|Symbol|Word|WordBreak)\b(?:\([a-zA-Z0-9\-.,\s+]*\))?/,inside:{"standard-pattern-name":{pattern:/^[a-zA-Z0-9\-.]+/,alias:"builtin"},quantifier:{pattern:/\b\d+(?:\s*\+|\s*-\s*\d+)?(?!\w)/,alias:"number"},"standard-pattern-attr":{pattern:/[a-zA-Z0-9\-.]+/,alias:"builtin"},punctuation:/[,()]/}},quantifier:{pattern:/\b\d+(?:\s*\+|\s*-\s*\d+)?(?!\w)/,alias:"number"},operator:[{pattern:/=/,alias:"pattern-def"},{pattern:/&/,alias:"conjunction"},{pattern:/~/,alias:"exception"},{pattern:/\?/,alias:"optionality"},{pattern:/[[\]]/,alias:"repetition"},{pattern:/[{}]/,alias:"variation"},{pattern:/[+_]/,alias:"sequence"},{pattern:/\.{2,3}/,alias:"span"}],"field-capture":[{pattern:/([a-zA-Z0-9\-.]+\s*\()\s*[a-zA-Z0-9\-.]+\s*:\s*[a-zA-Z0-9\-.]+(?:\s*,\s*[a-zA-Z0-9\-.]+\s*:\s*[a-zA-Z0-9\-.]+)*(?=\s*\))/,lookbehind:!0,inside:{"field-name":{pattern:/[a-zA-Z0-9\-.]+/,alias:"variable"},colon:/:/}},{pattern:/[a-zA-Z0-9\-.]+\s*:/,inside:{"field-name":{pattern:/[a-zA-Z0-9\-.]+/,alias:"variable"},colon:/:/}}],punctuation:/[:;,()]/,name:/[a-zA-Z0-9\-.]+/}}nginx.displayName="nginx";nginx.aliases=[];function nginx(s){(function(n){var u=/\$(?:\w[a-z\d]*(?:_[^\x00-\x1F\s"'\\()$]*)?|\{[^}\s"'\\]+\})/i;n.languages.nginx={comment:{pattern:/(^|[\s{};])#.*/,lookbehind:!0,greedy:!0},directive:{pattern:/(^|\s)\w(?:[^;{}"'\\\s]|\\.|"(?:[^"\\]|\\.)*"|'(?:[^'\\]|\\.)*'|\s+(?:#.*(?!.)|(?![#\s])))*?(?=\s*[;{])/,lookbehind:!0,greedy:!0,inside:{string:{pattern:/((?:^|[^\\])(?:\\\\)*)(?:"(?:[^"\\]|\\.)*"|'(?:[^'\\]|\\.)*')/,lookbehind:!0,greedy:!0,inside:{escape:{pattern:/\\["'\\nrt]/,alias:"entity"},variable:u}},comment:{pattern:/(\s)#.*/,lookbehind:!0,greedy:!0},keyword:{pattern:/^\S+/,greedy:!0},boolean:{pattern:/(\s)(?:off|on)(?!\S)/,lookbehind:!0},number:{pattern:/(\s)\d+[a-z]*(?!\S)/i,lookbehind:!0},variable:u}},punctuation:/[{};]/}})(s)}nim.displayName="nim";nim.aliases=[];function nim(s){s.languages.nim={comment:{pattern:/#.*/,greedy:!0},string:{pattern:/(?:\b(?!\d)(?:\w|\\x[89a-fA-F][0-9a-fA-F])+)?(?:"""[\s\S]*?"""(?!")|"(?:\\[\s\S]|""|[^"\\])*")/,greedy:!0},char:{pattern:/'(?:\\(?:\d+|x[\da-fA-F]{0,2}|.)|[^'])'/,greedy:!0},function:{pattern:/(?:(?!\d)(?:\w|\\x[89a-fA-F][0-9a-fA-F])+|`[^`\r\n]+`)\*?(?:\[[^\]]+\])?(?=\s*\()/,greedy:!0,inside:{operator:/\*$/}},identifier:{pattern:/`[^`\r\n]+`/,greedy:!0,inside:{punctuation:/`/}},number:/\b(?:0[xXoObB][\da-fA-F_]+|\d[\d_]*(?:(?!\.\.)\.[\d_]*)?(?:[eE][+-]?\d[\d_]*)?)(?:'?[iuf]\d*)?/,keyword:/\b(?:addr|as|asm|atomic|bind|block|break|case|cast|concept|const|continue|converter|defer|discard|distinct|do|elif|else|end|enum|except|export|finally|for|from|func|generic|if|import|include|interface|iterator|let|macro|method|mixin|nil|object|out|proc|ptr|raise|ref|return|static|template|try|tuple|type|using|var|when|while|with|without|yield)\b/,operator:{pattern:/(^|[({\[](?=\.\.)|(?![({\[]\.).)(?:(?:[=+\-*\/<>@$~&%|!?^:\\]|\.\.|\.(?![)}\]]))+|\b(?:and|div|in|is|isnot|mod|not|notin|of|or|shl|shr|xor)\b)/m,lookbehind:!0},punctuation:/[({\[]\.|\.[)}\]]|[`(){}\[\],:]/}}nix.displayName="nix";nix.aliases=[];function nix(s){s.languages.nix={comment:{pattern:/\/\*[\s\S]*?\*\/|#.*/,greedy:!0},string:{pattern:/"(?:[^"\\]|\\[\s\S])*"|''(?:(?!'')[\s\S]|''(?:'|\\|\$\{))*''/,greedy:!0,inside:{interpolation:{pattern:/(^|(?:^|(?!'').)[^\\])\$\{(?:[^{}]|\{[^}]*\})*\}/,lookbehind:!0,inside:null}}},url:[/\b(?:[a-z]{3,7}:\/\/)[\w\-+%~\/.:#=?&]+/,{pattern:/([^\/])(?:[\w\-+%~.:#=?&]*(?!\/\/)[\w\-+%~\/.:#=?&])?(?!\/\/)\/[\w\-+%~\/.:#=?&]*/,lookbehind:!0}],antiquotation:{pattern:/\$(?=\{)/,alias:"important"},number:/\b\d+\b/,keyword:/\b(?:assert|builtins|else|if|in|inherit|let|null|or|then|with)\b/,function:/\b(?:abort|add|all|any|attrNames|attrValues|baseNameOf|compareVersions|concatLists|currentSystem|deepSeq|derivation|dirOf|div|elem(?:At)?|fetch(?:Tarball|url)|filter(?:Source)?|fromJSON|genList|getAttr|getEnv|hasAttr|hashString|head|import|intersectAttrs|is(?:Attrs|Bool|Function|Int|List|Null|String)|length|lessThan|listToAttrs|map|mul|parseDrvName|pathExists|read(?:Dir|File)|removeAttrs|replaceStrings|seq|sort|stringLength|sub(?:string)?|tail|throw|to(?:File|JSON|Path|String|XML)|trace|typeOf)\b|\bfoldl'\B/,boolean:/\b(?:false|true)\b/,operator:/[=!<>]=?|\+\+?|\|\||&&|\/\/|->?|[?@]/,punctuation:/[{}()[\].,:;]/},s.languages.nix.string.inside.interpolation.inside=s.languages.nix}nsis.displayName="nsis";nsis.aliases=[];function nsis(s){s.languages.nsis={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|[#;].*)/,lookbehind:!0,greedy:!0},string:{pattern:/("|')(?:\\.|(?!\1)[^\\\r\n])*\1/,greedy:!0},keyword:{pattern:/(^[\t ]*)(?:Abort|Add(?:BrandingImage|Size)|AdvSplash|Allow(?:RootDirInstall|SkipFiles)|AutoCloseWindow|BG(?:Font|Gradient|Image)|Banner|BrandingText|BringToFront|CRCCheck|Call(?:InstDLL)?|Caption|ChangeUI|CheckBitmap|ClearErrors|CompletedText|ComponentText|CopyFiles|Create(?:Directory|Font|ShortCut)|Delete(?:INISec|INIStr|RegKey|RegValue)?|Detail(?:Print|sButtonText)|Dialer|Dir(?:Text|Var|Verify)|EnableWindow|Enum(?:RegKey|RegValue)|Exch|Exec(?:Shell(?:Wait)?|Wait)?|ExpandEnvStrings|File(?:BufSize|Close|ErrorText|Open|Read|ReadByte|ReadUTF16LE|ReadWord|Seek|Write|WriteByte|WriteUTF16LE|WriteWord)?|Find(?:Close|First|Next|Window)|FlushINI|Get(?:CurInstType|CurrentAddress|DLLVersion(?:Local)?|DlgItem|ErrorLevel|FileTime(?:Local)?|FullPathName|Function(?:Address|End)?|InstDirError|KnownFolderPath|LabelAddress|TempFileName|WinVer)|Goto|HideWindow|Icon|If(?:Abort|Errors|FileExists|RebootFlag|RtlLanguage|ShellVarContextAll|Silent)|InitPluginsDir|InstProgressFlags|Inst(?:Type(?:GetText|SetText)?)|Install(?:ButtonText|Colors|Dir(?:RegKey)?)|Int(?:64|Ptr)?CmpU?|Int(?:64)?Fmt|Int(?:Ptr)?Op|IsWindow|Lang(?:DLL|String)|License(?:BkColor|Data|ForceSelection|LangString|Text)|LoadLanguageFile|LockWindow|Log(?:Set|Text)|Manifest(?:DPIAware|SupportedOS)|Math|MessageBox|MiscButtonText|NSISdl|Name|Nop|OutFile|PE(?:DllCharacteristics|SubsysVer)|Page(?:Callbacks)?|Pop|Push|Quit|RMDir|Read(?:EnvStr|INIStr|RegDWORD|RegStr)|Reboot|RegDLL|Rename|RequestExecutionLevel|ReserveFile|Return|SearchPath|Section(?:End|GetFlags|GetInstTypes|GetSize|GetText|Group|In|SetFlags|SetInstTypes|SetSize|SetText)?|SendMessage|Set(?:AutoClose|BrandingImage|Compress|Compressor(?:DictSize)?|CtlColors|CurInstType|DatablockOptimize|DateSave|Details(?:Print|View)|ErrorLevel|Errors|FileAttributes|Font|OutPath|Overwrite|PluginUnload|RebootFlag|RegView|ShellVarContext|Silent)|Show(?:InstDetails|UninstDetails|Window)|Silent(?:Install|UnInstall)|Sleep|SpaceTexts|Splash|StartMenu|Str(?:CmpS?|Cpy|Len)|SubCaption|System|Target|UnRegDLL|Unicode|UninstPage|Uninstall(?:ButtonText|Caption|Icon|SubCaption|Text)|UserInfo|VI(?:AddVersionKey|FileVersion|ProductVersion)|VPatch|Var|WindowIcon|Write(?:INIStr|Reg(?:Bin|DWORD|ExpandStr|MultiStr|None|Str)|Uninstaller)|XPStyle|ns(?:Dialogs|Exec))\b/m,lookbehind:!0},property:/\b(?:ARCHIVE|FILE_(?:ATTRIBUTE_ARCHIVE|ATTRIBUTE_NORMAL|ATTRIBUTE_OFFLINE|ATTRIBUTE_READONLY|ATTRIBUTE_SYSTEM|ATTRIBUTE_TEMPORARY)|HK(?:(?:CR|CU|LM)(?:32|64)?|DD|PD|U)|HKEY_(?:CLASSES_ROOT|CURRENT_CONFIG|CURRENT_USER|DYN_DATA|LOCAL_MACHINE|PERFORMANCE_DATA|USERS)|ID(?:ABORT|CANCEL|IGNORE|NO|OK|RETRY|YES)|MB_(?:ABORTRETRYIGNORE|DEFBUTTON1|DEFBUTTON2|DEFBUTTON3|DEFBUTTON4|ICONEXCLAMATION|ICONINFORMATION|ICONQUESTION|ICONSTOP|OK|OKCANCEL|RETRYCANCEL|RIGHT|RTLREADING|SETFOREGROUND|TOPMOST|USERICON|YESNO)|NORMAL|OFFLINE|READONLY|SHCTX|SHELL_CONTEXT|SYSTEM|TEMPORARY|admin|all|auto|both|colored|false|force|hide|highest|lastused|leave|listonly|none|normal|notset|off|on|open|print|show|silent|silentlog|smooth|textonly|true|user)\b/,constant:/\$\{[!\w\.:\^-]+\}|\$\([!\w\.:\^-]+\)/,variable:/\$\w[\w\.]*/,number:/\b0x[\dA-Fa-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee]-?\d+)?/,operator:/--?|\+\+?|<=?|>=?|==?=?|&&?|\|\|?|[?*\/~^%]/,punctuation:/[{}[\];(),.:]/,important:{pattern:/(^[\t ]*)!(?:addincludedir|addplugindir|appendfile|cd|define|delfile|echo|else|endif|error|execute|finalize|getdllversion|gettlbversion|if|ifdef|ifmacrodef|ifmacrondef|ifndef|include|insertmacro|macro|macroend|makensis|packhdr|pragma|searchparse|searchreplace|system|tempfile|undef|verbose|warning)\b/im,lookbehind:!0}}}objectivec.displayName="objectivec";objectivec.aliases=["objc"];function objectivec(s){s.register(c$1),s.languages.objectivec=s.languages.extend("c",{string:{pattern:/@?"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},keyword:/\b(?:asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|in|inline|int|long|register|return|self|short|signed|sizeof|static|struct|super|switch|typedef|typeof|union|unsigned|void|volatile|while)\b|(?:@interface|@end|@implementation|@protocol|@class|@public|@protected|@private|@property|@try|@catch|@finally|@throw|@synthesize|@dynamic|@selector)\b/,operator:/-[->]?|\+\+?|!=?|<<?=?|>>?=?|==?|&&?|\|\|?|[~^%?*\/@]/}),delete s.languages.objectivec["class-name"],s.languages.objc=s.languages.objectivec}ocaml.displayName="ocaml";ocaml.aliases=[];function ocaml(s){s.languages.ocaml={comment:{pattern:/\(\*[\s\S]*?\*\)/,greedy:!0},char:{pattern:/'(?:[^\\\r\n']|\\(?:.|[ox]?[0-9a-f]{1,3}))'/i,greedy:!0},string:[{pattern:/"(?:\\(?:[\s\S]|\r\n)|[^\\\r\n"])*"/,greedy:!0},{pattern:/\{([a-z_]*)\|[\s\S]*?\|\1\}/,greedy:!0}],number:[/\b(?:0b[01][01_]*|0o[0-7][0-7_]*)\b/i,/\b0x[a-f0-9][a-f0-9_]*(?:\.[a-f0-9_]*)?(?:p[+-]?\d[\d_]*)?(?!\w)/i,/\b\d[\d_]*(?:\.[\d_]*)?(?:e[+-]?\d[\d_]*)?(?!\w)/i],directive:{pattern:/\B#\w+/,alias:"property"},label:{pattern:/\B~\w+/,alias:"property"},"type-variable":{pattern:/\B'\w+/,alias:"function"},variant:{pattern:/`\w+/,alias:"symbol"},keyword:/\b(?:as|assert|begin|class|constraint|do|done|downto|else|end|exception|external|for|fun|function|functor|if|in|include|inherit|initializer|lazy|let|match|method|module|mutable|new|nonrec|object|of|open|private|rec|sig|struct|then|to|try|type|val|value|virtual|when|where|while|with)\b/,boolean:/\b(?:false|true)\b/,"operator-like-punctuation":{pattern:/\[[<>|]|[>|]\]|\{<|>\}/,alias:"punctuation"},operator:/\.[.~]|:[=>]|[=<>@^|&+\-*\/$%!?~][!$%&*+\-.\/:<=>?@^|~]*|\b(?:and|asr|land|lor|lsl|lsr|lxor|mod|or)\b/,punctuation:/;;|::|[(){}\[\].,:;#]|\b_\b/}}odin.displayName="odin";odin.aliases=[];function odin(s){(function(n){var u=/\\(?:["'\\abefnrtv]|0[0-7]{2}|U[\dA-Fa-f]{6}|u[\dA-Fa-f]{4}|x[\dA-Fa-f]{2})/;n.languages.odin={comment:[{pattern:/\/\*(?:[^/*]|\/(?!\*)|\*(?!\/)|\/\*(?:\*(?!\/)|[^*])*(?:\*\/|$))*(?:\*\/|$)/,greedy:!0},{pattern:/#![^\n\r]*/,greedy:!0},{pattern:/\/\/[^\n\r]*/,greedy:!0}],char:{pattern:/'(?:\\(?:.|[0Uux][0-9A-Fa-f]{1,6})|[^\n\r'\\])'/,greedy:!0,inside:{symbol:u}},string:[{pattern:/`[^`]*`/,greedy:!0},{pattern:/"(?:\\.|[^\n\r"\\])*"/,greedy:!0,inside:{symbol:u}}],directive:{pattern:/#\w+/,alias:"property"},number:/\b0(?:b[01_]+|d[\d_]+|h_*(?:(?:(?:[\dA-Fa-f]_*){8}){1,2}|(?:[\dA-Fa-f]_*){4})|o[0-7_]+|x[\dA-F_a-f]+|z[\dAB_ab]+)\b|(?:\b\d+(?:\.(?!\.)\d*)?|\B\.\d+)(?:[Ee][+-]?\d*)?[ijk]?(?!\w)/,discard:{pattern:/\b_\b/,alias:"keyword"},"procedure-definition":{pattern:/\b\w+(?=[ \t]*(?::\s*){2}proc\b)/,alias:"function"},keyword:/\b(?:asm|auto_cast|bit_set|break|case|cast|context|continue|defer|distinct|do|dynamic|else|enum|fallthrough|for|foreign|if|import|in|map|matrix|not_in|or_else|or_return|package|proc|return|struct|switch|transmute|typeid|union|using|when|where)\b/,"procedure-name":{pattern:/\b\w+(?=[ \t]*\()/,alias:"function"},boolean:/\b(?:false|nil|true)\b/,"constant-parameter-sign":{pattern:/\$/,alias:"important"},undefined:{pattern:/---/,alias:"operator"},arrow:{pattern:/->/,alias:"punctuation"},operator:/\+\+|--|\.\.[<=]?|(?:&~|[-!*+/=~]|[%&<>|]{1,2})=?|[?^]/,punctuation:/[(),.:;@\[\]{}]/}})(s)}opencl.displayName="opencl";opencl.aliases=[];function opencl(s){s.register(c$1),(function(n){n.languages.opencl=n.languages.extend("c",{keyword:/\b(?:(?:__)?(?:constant|global|kernel|local|private|read_only|read_write|write_only)|__attribute__|auto|(?:bool|u?(?:char|int|long|short)|half|quad)(?:2|3|4|8|16)?|break|case|complex|const|continue|(?:double|float)(?:16(?:x(?:1|2|4|8|16))?|1x(?:1|2|4|8|16)|2(?:x(?:1|2|4|8|16))?|3|4(?:x(?:1|2|4|8|16))?|8(?:x(?:1|2|4|8|16))?)?|default|do|else|enum|extern|for|goto|if|imaginary|inline|packed|pipe|register|restrict|return|signed|sizeof|static|struct|switch|typedef|uniform|union|unsigned|void|volatile|while)\b/,number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[fuhl]{0,4}/i,boolean:/\b(?:false|true)\b/,"constant-opencl-kernel":{pattern:/\b(?:CHAR_(?:BIT|MAX|MIN)|CLK_(?:ADDRESS_(?:CLAMP(?:_TO_EDGE)?|NONE|REPEAT)|FILTER_(?:LINEAR|NEAREST)|(?:GLOBAL|LOCAL)_MEM_FENCE|NORMALIZED_COORDS_(?:FALSE|TRUE))|CL_(?:BGRA|(?:HALF_)?FLOAT|INTENSITY|LUMINANCE|A?R?G?B?[Ax]?|(?:(?:UN)?SIGNED|[US]NORM)_(?:INT(?:8|16|32))|UNORM_(?:INT_101010|SHORT_(?:555|565)))|(?:DBL|FLT|HALF)_(?:DIG|EPSILON|(?:MAX|MIN)(?:(?:_10)?_EXP)?|MANT_DIG)|FLT_RADIX|HUGE_VALF?|(?:INT|LONG|SCHAR|SHRT)_(?:MAX|MIN)|INFINITY|MAXFLOAT|M_(?:[12]_PI|2_SQRTPI|E|LN(?:2|10)|LOG(?:2|10)E?|PI(?:_[24])?|SQRT(?:1_2|2))(?:_F|_H)?|NAN|(?:UCHAR|UINT|ULONG|USHRT)_MAX)\b/,alias:"constant"}}),n.languages.insertBefore("opencl","class-name",{"builtin-type":{pattern:/\b(?:_cl_(?:command_queue|context|device_id|event|kernel|mem|platform_id|program|sampler)|cl_(?:image_format|mem_fence_flags)|clk_event_t|event_t|image(?:1d_(?:array_|buffer_)?t|2d_(?:array_(?:depth_|msaa_depth_|msaa_)?|depth_|msaa_depth_|msaa_)?t|3d_t)|intptr_t|ndrange_t|ptrdiff_t|queue_t|reserve_id_t|sampler_t|size_t|uintptr_t)\b/,alias:"keyword"}});var u={"type-opencl-host":{pattern:/\b(?:cl_(?:GLenum|GLint|GLuin|addressing_mode|bitfield|bool|buffer_create_type|build_status|channel_(?:order|type)|(?:u?(?:char|int|long|short)|double|float)(?:2|3|4|8|16)?|command_(?:queue(?:_info|_properties)?|type)|context(?:_info|_properties)?|device_(?:exec_capabilities|fp_config|id|info|local_mem_type|mem_cache_type|type)|(?:event|sampler)(?:_info)?|filter_mode|half|image_info|kernel(?:_info|_work_group_info)?|map_flags|mem(?:_flags|_info|_object_type)?|platform_(?:id|info)|profiling_info|program(?:_build_info|_info)?))\b/,alias:"keyword"},"boolean-opencl-host":{pattern:/\bCL_(?:FALSE|TRUE)\b/,alias:"boolean"},"constant-opencl-host":{pattern:/\bCL_(?:A|ABGR|ADDRESS_(?:CLAMP(?:_TO_EDGE)?|MIRRORED_REPEAT|NONE|REPEAT)|ARGB|BGRA|BLOCKING|BUFFER_CREATE_TYPE_REGION|BUILD_(?:ERROR|IN_PROGRESS|NONE|PROGRAM_FAILURE|SUCCESS)|COMMAND_(?:ACQUIRE_GL_OBJECTS|BARRIER|COPY_(?:BUFFER(?:_RECT|_TO_IMAGE)?|IMAGE(?:_TO_BUFFER)?)|FILL_(?:BUFFER|IMAGE)|MAP(?:_BUFFER|_IMAGE)|MARKER|MIGRATE(?:_SVM)?_MEM_OBJECTS|NATIVE_KERNEL|NDRANGE_KERNEL|READ_(?:BUFFER(?:_RECT)?|IMAGE)|RELEASE_GL_OBJECTS|SVM_(?:FREE|MAP|MEMCPY|MEMFILL|UNMAP)|TASK|UNMAP_MEM_OBJECT|USER|WRITE_(?:BUFFER(?:_RECT)?|IMAGE))|COMPILER_NOT_AVAILABLE|COMPILE_PROGRAM_FAILURE|COMPLETE|CONTEXT_(?:DEVICES|INTEROP_USER_SYNC|NUM_DEVICES|PLATFORM|PROPERTIES|REFERENCE_COUNT)|DEPTH(?:_STENCIL)?|DEVICE_(?:ADDRESS_BITS|AFFINITY_DOMAIN_(?:L[1-4]_CACHE|NEXT_PARTITIONABLE|NUMA)|AVAILABLE|BUILT_IN_KERNELS|COMPILER_AVAILABLE|DOUBLE_FP_CONFIG|ENDIAN_LITTLE|ERROR_CORRECTION_SUPPORT|EXECUTION_CAPABILITIES|EXTENSIONS|GLOBAL_(?:MEM_(?:CACHELINE_SIZE|CACHE_SIZE|CACHE_TYPE|SIZE)|VARIABLE_PREFERRED_TOTAL_SIZE)|HOST_UNIFIED_MEMORY|IL_VERSION|IMAGE(?:2D_MAX_(?:HEIGHT|WIDTH)|3D_MAX_(?:DEPTH|HEIGHT|WIDTH)|_BASE_ADDRESS_ALIGNMENT|_MAX_ARRAY_SIZE|_MAX_BUFFER_SIZE|_PITCH_ALIGNMENT|_SUPPORT)|LINKER_AVAILABLE|LOCAL_MEM_SIZE|LOCAL_MEM_TYPE|MAX_(?:CLOCK_FREQUENCY|COMPUTE_UNITS|CONSTANT_ARGS|CONSTANT_BUFFER_SIZE|GLOBAL_VARIABLE_SIZE|MEM_ALLOC_SIZE|NUM_SUB_GROUPS|ON_DEVICE_(?:EVENTS|QUEUES)|PARAMETER_SIZE|PIPE_ARGS|READ_IMAGE_ARGS|READ_WRITE_IMAGE_ARGS|SAMPLERS|WORK_GROUP_SIZE|WORK_ITEM_DIMENSIONS|WORK_ITEM_SIZES|WRITE_IMAGE_ARGS)|MEM_BASE_ADDR_ALIGN|MIN_DATA_TYPE_ALIGN_SIZE|NAME|NATIVE_VECTOR_WIDTH_(?:CHAR|DOUBLE|FLOAT|HALF|INT|LONG|SHORT)|NOT_(?:AVAILABLE|FOUND)|OPENCL_C_VERSION|PARENT_DEVICE|PARTITION_(?:AFFINITY_DOMAIN|BY_AFFINITY_DOMAIN|BY_COUNTS|BY_COUNTS_LIST_END|EQUALLY|FAILED|MAX_SUB_DEVICES|PROPERTIES|TYPE)|PIPE_MAX_(?:ACTIVE_RESERVATIONS|PACKET_SIZE)|PLATFORM|PREFERRED_(?:GLOBAL_ATOMIC_ALIGNMENT|INTEROP_USER_SYNC|LOCAL_ATOMIC_ALIGNMENT|PLATFORM_ATOMIC_ALIGNMENT|VECTOR_WIDTH_(?:CHAR|DOUBLE|FLOAT|HALF|INT|LONG|SHORT))|PRINTF_BUFFER_SIZE|PROFILE|PROFILING_TIMER_RESOLUTION|QUEUE_(?:ON_(?:DEVICE_(?:MAX_SIZE|PREFERRED_SIZE|PROPERTIES)|HOST_PROPERTIES)|PROPERTIES)|REFERENCE_COUNT|SINGLE_FP_CONFIG|SUB_GROUP_INDEPENDENT_FORWARD_PROGRESS|SVM_(?:ATOMICS|CAPABILITIES|COARSE_GRAIN_BUFFER|FINE_GRAIN_BUFFER|FINE_GRAIN_SYSTEM)|TYPE(?:_ACCELERATOR|_ALL|_CPU|_CUSTOM|_DEFAULT|_GPU)?|VENDOR(?:_ID)?|VERSION)|DRIVER_VERSION|EVENT_(?:COMMAND_(?:EXECUTION_STATUS|QUEUE|TYPE)|CONTEXT|REFERENCE_COUNT)|EXEC_(?:KERNEL|NATIVE_KERNEL|STATUS_ERROR_FOR_EVENTS_IN_WAIT_LIST)|FILTER_(?:LINEAR|NEAREST)|FLOAT|FP_(?:CORRECTLY_ROUNDED_DIVIDE_SQRT|DENORM|FMA|INF_NAN|ROUND_TO_INF|ROUND_TO_NEAREST|ROUND_TO_ZERO|SOFT_FLOAT)|GLOBAL|HALF_FLOAT|IMAGE_(?:ARRAY_SIZE|BUFFER|DEPTH|ELEMENT_SIZE|FORMAT|FORMAT_MISMATCH|FORMAT_NOT_SUPPORTED|HEIGHT|NUM_MIP_LEVELS|NUM_SAMPLES|ROW_PITCH|SLICE_PITCH|WIDTH)|INTENSITY|INVALID_(?:ARG_INDEX|ARG_SIZE|ARG_VALUE|BINARY|BUFFER_SIZE|BUILD_OPTIONS|COMMAND_QUEUE|COMPILER_OPTIONS|CONTEXT|DEVICE|DEVICE_PARTITION_COUNT|DEVICE_QUEUE|DEVICE_TYPE|EVENT|EVENT_WAIT_LIST|GLOBAL_OFFSET|GLOBAL_WORK_SIZE|GL_OBJECT|HOST_PTR|IMAGE_DESCRIPTOR|IMAGE_FORMAT_DESCRIPTOR|IMAGE_SIZE|KERNEL|KERNEL_ARGS|KERNEL_DEFINITION|KERNEL_NAME|LINKER_OPTIONS|MEM_OBJECT|MIP_LEVEL|OPERATION|PIPE_SIZE|PLATFORM|PROGRAM|PROGRAM_EXECUTABLE|PROPERTY|QUEUE_PROPERTIES|SAMPLER|VALUE|WORK_DIMENSION|WORK_GROUP_SIZE|WORK_ITEM_SIZE)|KERNEL_(?:ARG_(?:ACCESS_(?:NONE|QUALIFIER|READ_ONLY|READ_WRITE|WRITE_ONLY)|ADDRESS_(?:CONSTANT|GLOBAL|LOCAL|PRIVATE|QUALIFIER)|INFO_NOT_AVAILABLE|NAME|TYPE_(?:CONST|NAME|NONE|PIPE|QUALIFIER|RESTRICT|VOLATILE))|ATTRIBUTES|COMPILE_NUM_SUB_GROUPS|COMPILE_WORK_GROUP_SIZE|CONTEXT|EXEC_INFO_SVM_FINE_GRAIN_SYSTEM|EXEC_INFO_SVM_PTRS|FUNCTION_NAME|GLOBAL_WORK_SIZE|LOCAL_MEM_SIZE|LOCAL_SIZE_FOR_SUB_GROUP_COUNT|MAX_NUM_SUB_GROUPS|MAX_SUB_GROUP_SIZE_FOR_NDRANGE|NUM_ARGS|PREFERRED_WORK_GROUP_SIZE_MULTIPLE|PRIVATE_MEM_SIZE|PROGRAM|REFERENCE_COUNT|SUB_GROUP_COUNT_FOR_NDRANGE|WORK_GROUP_SIZE)|LINKER_NOT_AVAILABLE|LINK_PROGRAM_FAILURE|LOCAL|LUMINANCE|MAP_(?:FAILURE|READ|WRITE|WRITE_INVALIDATE_REGION)|MEM_(?:ALLOC_HOST_PTR|ASSOCIATED_MEMOBJECT|CONTEXT|COPY_HOST_PTR|COPY_OVERLAP|FLAGS|HOST_NO_ACCESS|HOST_PTR|HOST_READ_ONLY|HOST_WRITE_ONLY|KERNEL_READ_AND_WRITE|MAP_COUNT|OBJECT_(?:ALLOCATION_FAILURE|BUFFER|IMAGE1D|IMAGE1D_ARRAY|IMAGE1D_BUFFER|IMAGE2D|IMAGE2D_ARRAY|IMAGE3D|PIPE)|OFFSET|READ_ONLY|READ_WRITE|REFERENCE_COUNT|SIZE|SVM_ATOMICS|SVM_FINE_GRAIN_BUFFER|TYPE|USES_SVM_POINTER|USE_HOST_PTR|WRITE_ONLY)|MIGRATE_MEM_OBJECT_(?:CONTENT_UNDEFINED|HOST)|MISALIGNED_SUB_BUFFER_OFFSET|NONE|NON_BLOCKING|OUT_OF_(?:HOST_MEMORY|RESOURCES)|PIPE_(?:MAX_PACKETS|PACKET_SIZE)|PLATFORM_(?:EXTENSIONS|HOST_TIMER_RESOLUTION|NAME|PROFILE|VENDOR|VERSION)|PROFILING_(?:COMMAND_(?:COMPLETE|END|QUEUED|START|SUBMIT)|INFO_NOT_AVAILABLE)|PROGRAM_(?:BINARIES|BINARY_SIZES|BINARY_TYPE(?:_COMPILED_OBJECT|_EXECUTABLE|_LIBRARY|_NONE)?|BUILD_(?:GLOBAL_VARIABLE_TOTAL_SIZE|LOG|OPTIONS|STATUS)|CONTEXT|DEVICES|IL|KERNEL_NAMES|NUM_DEVICES|NUM_KERNELS|REFERENCE_COUNT|SOURCE)|QUEUED|QUEUE_(?:CONTEXT|DEVICE|DEVICE_DEFAULT|ON_DEVICE|ON_DEVICE_DEFAULT|OUT_OF_ORDER_EXEC_MODE_ENABLE|PROFILING_ENABLE|PROPERTIES|REFERENCE_COUNT|SIZE)|R|RA|READ_(?:ONLY|WRITE)_CACHE|RG|RGB|RGBA|RGBx|RGx|RUNNING|Rx|SAMPLER_(?:ADDRESSING_MODE|CONTEXT|FILTER_MODE|LOD_MAX|LOD_MIN|MIP_FILTER_MODE|NORMALIZED_COORDS|REFERENCE_COUNT)|(?:UN)?SIGNED_INT(?:8|16|32)|SNORM_INT(?:8|16)|SUBMITTED|SUCCESS|UNORM_INT(?:8|16|24|_101010|_101010_2)|UNORM_SHORT_(?:555|565)|VERSION_(?:1_0|1_1|1_2|2_0|2_1)|sBGRA|sRGB|sRGBA|sRGBx)\b/,alias:"constant"},"function-opencl-host":{pattern:/\bcl(?:BuildProgram|CloneKernel|CompileProgram|Create(?:Buffer|CommandQueue(?:WithProperties)?|Context|ContextFromType|Image|Image2D|Image3D|Kernel|KernelsInProgram|Pipe|ProgramWith(?:Binary|BuiltInKernels|IL|Source)|Sampler|SamplerWithProperties|SubBuffer|SubDevices|UserEvent)|Enqueue(?:(?:Barrier|Marker)(?:WithWaitList)?|Copy(?:Buffer(?:Rect|ToImage)?|Image(?:ToBuffer)?)|(?:Fill|Map)(?:Buffer|Image)|MigrateMemObjects|NDRangeKernel|NativeKernel|(?:Read|Write)(?:Buffer(?:Rect)?|Image)|SVM(?:Free|Map|MemFill|Memcpy|MigrateMem|Unmap)|Task|UnmapMemObject|WaitForEvents)|Finish|Flush|Get(?:CommandQueueInfo|ContextInfo|Device(?:AndHostTimer|IDs|Info)|Event(?:Profiling)?Info|ExtensionFunctionAddress(?:ForPlatform)?|HostTimer|ImageInfo|Kernel(?:ArgInfo|Info|SubGroupInfo|WorkGroupInfo)|MemObjectInfo|PipeInfo|Platform(?:IDs|Info)|Program(?:Build)?Info|SamplerInfo|SupportedImageFormats)|LinkProgram|(?:Release|Retain)(?:CommandQueue|Context|Device|Event|Kernel|MemObject|Program|Sampler)|SVM(?:Alloc|Free)|Set(?:CommandQueueProperty|DefaultDeviceCommandQueue|EventCallback|Kernel|Kernel(?:Arg(?:SVMPointer)?|ExecInfo)|MemObjectDestructorCallback|UserEventStatus)|Unload(?:Platform)?Compiler|WaitForEvents)\b/,alias:"function"}};n.languages.insertBefore("c","keyword",u),n.languages.cpp&&(u["type-opencl-host-cpp"]={pattern:/\b(?:Buffer|BufferGL|BufferRenderGL|CommandQueue|Context|Device|DeviceCommandQueue|EnqueueArgs|Event|Image|Image1D|Image1DArray|Image1DBuffer|Image2D|Image2DArray|Image2DGL|Image3D|Image3DGL|ImageFormat|ImageGL|Kernel|KernelFunctor|LocalSpaceArg|Memory|NDRange|Pipe|Platform|Program|SVMAllocator|SVMTraitAtomic|SVMTraitCoarse|SVMTraitFine|SVMTraitReadOnly|SVMTraitReadWrite|SVMTraitWriteOnly|Sampler|UserEvent)\b/,alias:"keyword"},n.languages.insertBefore("cpp","keyword",u))})(s)}openqasm.displayName="openqasm";openqasm.aliases=["qasm"];function openqasm(s){s.languages.openqasm={comment:/\/\*[\s\S]*?\*\/|\/\/.*/,string:{pattern:/"[^"\r\n\t]*"|'[^'\r\n\t]*'/,greedy:!0},keyword:/\b(?:CX|OPENQASM|U|barrier|boxas|boxto|break|const|continue|ctrl|def|defcal|defcalgrammar|delay|else|end|for|gate|gphase|if|in|include|inv|kernel|lengthof|let|measure|pow|reset|return|rotary|stretchinf|while)\b|#pragma\b/,"class-name":/\b(?:angle|bit|bool|creg|fixed|float|int|length|qreg|qubit|stretch|uint)\b/,function:/\b(?:cos|exp|ln|popcount|rotl|rotr|sin|sqrt|tan)\b(?=\s*\()/,constant:/\b(?:euler|pi|tau)\b|||/,number:{pattern:/(^|[^.\w$])(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?(?:dt|ns|us|s|ms|s)?/i,lookbehind:!0},operator:/->|>>=?|<<=?|&&|\|\||\+\+|--|[!=<>&|~^+\-*/%]=?|@/,punctuation:/[(){}\[\];,:.]/},s.languages.qasm=s.languages.openqasm}oz.displayName="oz";oz.aliases=[];function oz(s){s.languages.oz={comment:{pattern:/\/\*[\s\S]*?\*\/|%.*/,greedy:!0},string:{pattern:/"(?:[^"\\]|\\[\s\S])*"/,greedy:!0},atom:{pattern:/'(?:[^'\\]|\\[\s\S])*'/,greedy:!0,alias:"builtin"},keyword:/\$|\[\]|\b(?:_|at|attr|case|catch|choice|class|cond|declare|define|dis|else(?:case|if)?|end|export|fail|false|feat|finally|from|fun|functor|if|import|in|local|lock|meth|nil|not|of|or|prepare|proc|prop|raise|require|self|skip|then|thread|true|try|unit)\b/,function:[/\b[a-z][A-Za-z\d]*(?=\()/,{pattern:/(\{)[A-Z][A-Za-z\d]*\b/,lookbehind:!0}],number:/\b(?:0[bx][\da-f]+|\d+(?:\.\d*)?(?:e~?\d+)?)\b|&(?:[^\\]|\\(?:\d{3}|.))/i,variable:/`(?:[^`\\]|\\.)+`/,"attr-name":/\b\w+(?=[ \t]*:(?![:=]))/,operator:/:(?:=|::?)|<[-:=]?|=(?:=|<?:?)|>=?:?|\\=:?|!!?|[|#+\-*\/,~^@]|\b(?:andthen|div|mod|orelse)\b/,punctuation:/[\[\](){}.:;?]/}}parigp.displayName="parigp";parigp.aliases=[];function parigp(s){s.languages.parigp={comment:/\/\*[\s\S]*?\*\/|\\\\.*/,string:{pattern:/"(?:[^"\\\r\n]|\\.)*"/,greedy:!0},keyword:(function(){var n=["breakpoint","break","dbg_down","dbg_err","dbg_up","dbg_x","forcomposite","fordiv","forell","forpart","forprime","forstep","forsubgroup","forvec","for","iferr","if","local","my","next","return","until","while"];return n=n.map(function(u){return u.split("").join(" *")}).join("|"),RegExp("\\b(?:"+n+")\\b")})(),function:/\b\w(?:[\w ]*\w)?(?= *\()/,number:{pattern:/((?:\. *\. *)?)(?:\b\d(?: *\d)*(?: *(?!\. *\.)\.(?: *\d)*)?|\. *\d(?: *\d)*)(?: *e *(?:[+-] *)?\d(?: *\d)*)?/i,lookbehind:!0},operator:/\. *\.|[*\/!](?: *=)?|%(?: *=|(?: *#)?(?: *')*)?|\+(?: *[+=])?|-(?: *[-=>])?|<(?: *>|(?: *<)?(?: *=)?)?|>(?: *>)?(?: *=)?|=(?: *=){0,2}|\\(?: *\/)?(?: *=)?|&(?: *&)?|\| *\||['#~^]/,punctuation:/[\[\]{}().,:;|]/}}parser.displayName="parser";parser.aliases=[];function parser(s){s.register(markup),(function(n){var u=n.languages.parser=n.languages.extend("markup",{keyword:{pattern:/(^|[^^])(?:\^(?:case|eval|for|if|switch|throw)\b|@(?:BASE|CLASS|GET(?:_DEFAULT)?|OPTIONS|SET_DEFAULT|USE)\b)/,lookbehind:!0},variable:{pattern:/(^|[^^])\B\$(?:\w+|(?=[.{]))(?:(?:\.|::?)\w+)*(?:\.|::?)?/,lookbehind:!0,inside:{punctuation:/\.|:+/}},function:{pattern:/(^|[^^])\B[@^]\w+(?:(?:\.|::?)\w+)*(?:\.|::?)?/,lookbehind:!0,inside:{keyword:{pattern:/(^@)(?:GET_|SET_)/,lookbehind:!0},punctuation:/\.|:+/}},escape:{pattern:/\^(?:[$^;@()\[\]{}"':]|#[a-f\d]*)/i,alias:"builtin"},punctuation:/[\[\](){};]/});u=n.languages.insertBefore("parser","keyword",{"parser-comment":{pattern:/(\s)#.*/,lookbehind:!0,alias:"comment"},expression:{pattern:/(^|[^^])\((?:[^()]|\((?:[^()]|\((?:[^()])*\))*\))*\)/,greedy:!0,lookbehind:!0,inside:{string:{pattern:/(^|[^^])(["'])(?:(?!\2)[^^]|\^[\s\S])*\2/,lookbehind:!0},keyword:u.keyword,variable:u.variable,function:u.function,boolean:/\b(?:false|true)\b/,number:/\b(?:0x[a-f\d]+|\d+(?:\.\d*)?(?:e[+-]?\d+)?)\b/i,escape:u.escape,operator:/[~+*\/\\%]|!(?:\|\|?|=)?|&&?|\|\|?|==|<[<=]?|>[>=]?|-[fd]?|\b(?:def|eq|ge|gt|in|is|le|lt|ne)\b/,punctuation:u.punctuation}}}),n.languages.insertBefore("inside","punctuation",{expression:u.expression,keyword:u.keyword,variable:u.variable,function:u.function,escape:u.escape,"parser-punctuation":{pattern:u.punctuation,alias:"punctuation"}},u.tag.inside["attr-value"])})(s)}pascal.displayName="pascal";pascal.aliases=["objectpascal"];function pascal(s){s.languages.pascal={directive:{pattern:/\{\$[\s\S]*?\}/,greedy:!0,alias:["marco","property"]},comment:{pattern:/\(\*[\s\S]*?\*\)|\{[\s\S]*?\}|\/\/.*/,greedy:!0},string:{pattern:/(?:'(?:''|[^'\r\n])*'(?!')|#[&$%]?[a-f\d]+)+|\^[a-z]/i,greedy:!0},asm:{pattern:/(\basm\b)[\s\S]+?(?=\bend\s*[;[])/i,lookbehind:!0,greedy:!0,inside:null},keyword:[{pattern:/(^|[^&])\b(?:absolute|array|asm|begin|case|const|constructor|destructor|do|downto|else|end|file|for|function|goto|if|implementation|inherited|inline|interface|label|nil|object|of|operator|packed|procedure|program|record|reintroduce|repeat|self|set|string|then|to|type|unit|until|uses|var|while|with)\b/i,lookbehind:!0},{pattern:/(^|[^&])\b(?:dispose|exit|false|new|true)\b/i,lookbehind:!0},{pattern:/(^|[^&])\b(?:class|dispinterface|except|exports|finalization|finally|initialization|inline|library|on|out|packed|property|raise|resourcestring|threadvar|try)\b/i,lookbehind:!0},{pattern:/(^|[^&])\b(?:absolute|abstract|alias|assembler|bitpacked|break|cdecl|continue|cppdecl|cvar|default|deprecated|dynamic|enumerator|experimental|export|external|far|far16|forward|generic|helper|implements|index|interrupt|iochecks|local|message|name|near|nodefault|noreturn|nostackframe|oldfpccall|otherwise|overload|override|pascal|platform|private|protected|public|published|read|register|reintroduce|result|safecall|saveregisters|softfloat|specialize|static|stdcall|stored|strict|unaligned|unimplemented|varargs|virtual|write)\b/i,lookbehind:!0}],number:[/(?:[&%]\d+|\$[a-f\d]+)/i,/\b\d+(?:\.\d+)?(?:e[+-]?\d+)?/i],operator:[/\.\.|\*\*|:=|<[<=>]?|>[>=]?|[+\-*\/]=?|[@^=]/,{pattern:/(^|[^&])\b(?:and|as|div|exclude|in|include|is|mod|not|or|shl|shr|xor)\b/,lookbehind:!0}],punctuation:/\(\.|\.\)|[()\[\]:;,.]/},s.languages.pascal.asm.inside=s.languages.extend("pascal",{asm:void 0,keyword:void 0,operator:void 0}),s.languages.objectpascal=s.languages.pascal}pascaligo.displayName="pascaligo";pascaligo.aliases=[];function pascaligo(s){(function(n){var u=/\((?:[^()]|\((?:[^()]|\([^()]*\))*\))*\)/.source,f=/(?:\b\w+(?:<braces>)?|<braces>)/.source.replace(/<braces>/g,function(){return u}),y=n.languages.pascaligo={comment:/\(\*[\s\S]+?\*\)|\/\/.*/,string:{pattern:/(["'`])(?:\\[\s\S]|(?!\1)[^\\])*\1|\^[a-z]/i,greedy:!0},"class-name":[{pattern:RegExp(/(\btype\s+\w+\s+is\s+)<type>/.source.replace(/<type>/g,function(){return f}),"i"),lookbehind:!0,inside:null},{pattern:RegExp(/<type>(?=\s+is\b)/.source.replace(/<type>/g,function(){return f}),"i"),inside:null},{pattern:RegExp(/(:\s*)<type>/.source.replace(/<type>/g,function(){return f})),lookbehind:!0,inside:null}],keyword:{pattern:/(^|[^&])\b(?:begin|block|case|const|else|end|fail|for|from|function|if|is|nil|of|remove|return|skip|then|type|var|while|with)\b/i,lookbehind:!0},boolean:{pattern:/(^|[^&])\b(?:False|True)\b/i,lookbehind:!0},builtin:{pattern:/(^|[^&])\b(?:bool|int|list|map|nat|record|string|unit)\b/i,lookbehind:!0},function:/\b\w+(?=\s*\()/,number:[/%[01]+|&[0-7]+|\$[a-f\d]+/i,/\b\d+(?:\.\d+)?(?:e[+-]?\d+)?(?:mtz|n)?/i],operator:/->|=\/=|\.\.|\*\*|:=|<[<=>]?|>[>=]?|[+\-*\/]=?|[@^=|]|\b(?:and|mod|or)\b/,punctuation:/\(\.|\.\)|[()\[\]:;,.{}]/},S=["comment","keyword","builtin","operator","punctuation"].reduce(function(A,w){return A[w]=y[w],A},{});y["class-name"].forEach(function(A){A.inside=S})})(s)}psl.displayName="psl";psl.aliases=[];function psl(s){s.languages.psl={comment:{pattern:/#.*/,greedy:!0},string:{pattern:/"(?:\\.|[^\\"])*"/,greedy:!0,inside:{symbol:/\\[ntrbA-Z"\\]/}},"heredoc-string":{pattern:/<<<([a-zA-Z_]\w*)[\r\n](?:.*[\r\n])*?\1\b/,alias:"string",greedy:!0},keyword:/\b(?:__multi|__single|case|default|do|else|elsif|exit|export|for|foreach|function|if|last|line|local|next|requires|return|switch|until|while|word)\b/,constant:/\b(?:ALARM|CHART_ADD_GRAPH|CHART_DELETE_GRAPH|CHART_DESTROY|CHART_LOAD|CHART_PRINT|EOF|OFFLINE|OK|PSL_PROF_LOG|R_CHECK_HORIZ|R_CHECK_VERT|R_CLICKER|R_COLUMN|R_FRAME|R_ICON|R_LABEL|R_LABEL_CENTER|R_LIST_MULTIPLE|R_LIST_MULTIPLE_ND|R_LIST_SINGLE|R_LIST_SINGLE_ND|R_MENU|R_POPUP|R_POPUP_SCROLLED|R_RADIO_HORIZ|R_RADIO_VERT|R_ROW|R_SCALE_HORIZ|R_SCALE_VERT|R_SEP_HORIZ|R_SEP_VERT|R_SPINNER|R_TEXT_FIELD|R_TEXT_FIELD_LABEL|R_TOGGLE|TRIM_LEADING|TRIM_LEADING_AND_TRAILING|TRIM_REDUNDANT|TRIM_TRAILING|VOID|WARN)\b/,boolean:/\b(?:FALSE|False|NO|No|TRUE|True|YES|Yes|false|no|true|yes)\b/,variable:/\b(?:PslDebug|errno|exit_status)\b/,builtin:{pattern:/\b(?:PslExecute|PslFunctionCall|PslFunctionExists|PslSetOptions|_snmp_debug|acos|add_diary|annotate|annotate_get|ascii_to_ebcdic|asctime|asin|atan|atexit|batch_set|blackout|cat|ceil|chan_exists|change_state|close|code_cvt|cond_signal|cond_wait|console_type|convert_base|convert_date|convert_locale_date|cos|cosh|create|date|dcget_text|destroy|destroy_lock|dget_text|difference|dump_hist|ebcdic_to_ascii|encrypt|event_archive|event_catalog_get|event_check|event_query|event_range_manage|event_range_query|event_report|event_schedule|event_trigger|event_trigger2|execute|exists|exp|fabs|file|floor|fmod|fopen|fseek|ftell|full_discovery|get|get_chan_info|get_ranges|get_text|get_vars|getenv|gethostinfo|getpid|getpname|grep|history|history_get_retention|in_transition|index|int|internal|intersection|is_var|isnumber|join|kill|length|lines|lock|lock_info|log|log10|loge|matchline|msg_check|msg_get_format|msg_get_severity|msg_printf|msg_sprintf|ntharg|nthargf|nthline|nthlinef|num_bytes|num_consoles|pconfig|popen|poplines|pow|print|printf|proc_exists|process|random|read|readln|refresh_parameters|remote_check|remote_close|remote_event_query|remote_event_trigger|remote_file_send|remote_open|remove|replace|rindex|sec_check_priv|sec_store_get|sec_store_set|set|set_alarm_ranges|set_locale|share|sin|sinh|sleep|snmp_agent_config|snmp_agent_start|snmp_agent_stop|snmp_close|snmp_config|snmp_get|snmp_get_next|snmp_h_get|snmp_h_get_next|snmp_h_set|snmp_open|snmp_set|snmp_trap_ignore|snmp_trap_listen|snmp_trap_raise_std_trap|snmp_trap_receive|snmp_trap_register_im|snmp_trap_send|snmp_walk|sopen|sort|splitline|sprintf|sqrt|srandom|str_repeat|strcasecmp|subset|substr|system|tail|tan|tanh|text_domain|time|tmpnam|tolower|toupper|trace_psl_process|trim|union|unique|unlock|unset|va_arg|va_start|write)\b/,alias:"builtin-function"},"foreach-variable":{pattern:/(\bforeach\s+(?:(?:\w+\b|"(?:\\.|[^\\"])*")\s+){0,2})[_a-zA-Z]\w*(?=\s*\()/,lookbehind:!0,greedy:!0},function:/\b[_a-z]\w*\b(?=\s*\()/i,number:/\b(?:0x[0-9a-f]+|\d+(?:\.\d+)?)\b/i,operator:/--|\+\+|&&=?|\|\|=?|<<=?|>>=?|[=!]~|[-+*/%&|^!=<>]=?|\.|[:?]/,punctuation:/[(){}\[\];,]/}}pcaxis.displayName="pcaxis";pcaxis.aliases=["px"];function pcaxis(s){s.languages.pcaxis={string:/"[^"]*"/,keyword:{pattern:/((?:^|;)\s*)[-A-Z\d]+(?:\s*\[[-\w]+\])?(?:\s*\("[^"]*"(?:,\s*"[^"]*")*\))?(?=\s*=)/,lookbehind:!0,greedy:!0,inside:{keyword:/^[-A-Z\d]+/,language:{pattern:/^(\s*)\[[-\w]+\]/,lookbehind:!0,inside:{punctuation:/^\[|\]$/,property:/[-\w]+/}},"sub-key":{pattern:/^(\s*)\S[\s\S]*/,lookbehind:!0,inside:{parameter:{pattern:/"[^"]*"/,alias:"property"},punctuation:/^\(|\)$|,/}}}},operator:/=/,tlist:{pattern:/TLIST\s*\(\s*\w+(?:(?:\s*,\s*"[^"]*")+|\s*,\s*"[^"]*"-"[^"]*")?\s*\)/,greedy:!0,inside:{function:/^TLIST/,property:{pattern:/^(\s*\(\s*)\w+/,lookbehind:!0},string:/"[^"]*"/,punctuation:/[(),]/,operator:/-/}},punctuation:/[;,]/,number:{pattern:/(^|\s)\d+(?:\.\d+)?(?!\S)/,lookbehind:!0},boolean:/NO|YES/},s.languages.px=s.languages.pcaxis}peoplecode.displayName="peoplecode";peoplecode.aliases=["pcode"];function peoplecode(s){s.languages.peoplecode={comment:RegExp([/\/\*[\s\S]*?\*\//.source,/\bREM[^;]*;/.source,/<\*(?:[^<*]|\*(?!>)|<(?!\*)|<\*(?:(?!\*>)[\s\S])*\*>)*\*>/.source,/\/\+[\s\S]*?\+\//.source].join("|")),string:{pattern:/'(?:''|[^'\r\n])*'(?!')|"(?:""|[^"\r\n])*"(?!")/,greedy:!0},variable:/%\w+/,"function-definition":{pattern:/((?:^|[^\w-])(?:function|method)\s+)\w+/i,lookbehind:!0,alias:"function"},"class-name":{pattern:/((?:^|[^-\w])(?:as|catch|class|component|create|extends|global|implements|instance|local|of|property|returns)\s+)\w+(?::\w+)*/i,lookbehind:!0,inside:{punctuation:/:/}},keyword:/\b(?:abstract|alias|as|catch|class|component|constant|create|declare|else|end-(?:class|evaluate|for|function|get|if|method|set|try|while)|evaluate|extends|for|function|get|global|if|implements|import|instance|library|local|method|null|of|out|peopleCode|private|program|property|protected|readonly|ref|repeat|returns?|set|step|then|throw|to|try|until|value|when(?:-other)?|while)\b/i,"operator-keyword":{pattern:/\b(?:and|not|or)\b/i,alias:"operator"},function:/[_a-z]\w*(?=\s*\()/i,boolean:/\b(?:false|true)\b/i,number:/\b\d+(?:\.\d+)?\b/,operator:/<>|[<>]=?|!=|\*\*|[-+*/|=@]/,punctuation:/[:.;,()[\]]/},s.languages.pcode=s.languages.peoplecode}perl.displayName="perl";perl.aliases=[];function perl(s){(function(n){var u=/(?:\((?:[^()\\]|\\[\s\S])*\)|\{(?:[^{}\\]|\\[\s\S])*\}|\[(?:[^[\]\\]|\\[\s\S])*\]|<(?:[^<>\\]|\\[\s\S])*>)/.source;n.languages.perl={comment:[{pattern:/(^\s*)=\w[\s\S]*?=cut.*/m,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\$])#.*/,lookbehind:!0,greedy:!0}],string:[{pattern:RegExp(/\b(?:q|qq|qw|qx)(?![a-zA-Z0-9])\s*/.source+"(?:"+[/([^a-zA-Z0-9\s{(\[<])(?:(?!\1)[^\\]|\\[\s\S])*\1/.source,/([a-zA-Z0-9])(?:(?!\2)[^\\]|\\[\s\S])*\2/.source,u].join("|")+")"),greedy:!0},{pattern:/("|`)(?:(?!\1)[^\\]|\\[\s\S])*\1/,greedy:!0},{pattern:/'(?:[^'\\\r\n]|\\.)*'/,greedy:!0}],regex:[{pattern:RegExp(/\b(?:m|qr)(?![a-zA-Z0-9])\s*/.source+"(?:"+[/([^a-zA-Z0-9\s{(\[<])(?:(?!\1)[^\\]|\\[\s\S])*\1/.source,/([a-zA-Z0-9])(?:(?!\2)[^\\]|\\[\s\S])*\2/.source,u].join("|")+")"+/[msixpodualngc]*/.source),greedy:!0},{pattern:RegExp(/(^|[^-])\b(?:s|tr|y)(?![a-zA-Z0-9])\s*/.source+"(?:"+[/([^a-zA-Z0-9\s{(\[<])(?:(?!\2)[^\\]|\\[\s\S])*\2(?:(?!\2)[^\\]|\\[\s\S])*\2/.source,/([a-zA-Z0-9])(?:(?!\3)[^\\]|\\[\s\S])*\3(?:(?!\3)[^\\]|\\[\s\S])*\3/.source,u+/\s*/.source+u].join("|")+")"+/[msixpodualngcer]*/.source),lookbehind:!0,greedy:!0},{pattern:/\/(?:[^\/\\\r\n]|\\.)*\/[msixpodualngc]*(?=\s*(?:$|[\r\n,.;})&|\-+*~<>!?^]|(?:and|cmp|eq|ge|gt|le|lt|ne|not|or|x|xor)\b))/,greedy:!0}],variable:[/[&*$@%]\{\^[A-Z]+\}/,/[&*$@%]\^[A-Z_]/,/[&*$@%]#?(?=\{)/,/[&*$@%]#?(?:(?:::)*'?(?!\d)[\w$]+(?![\w$]))+(?:::)*/,/[&*$@%]\d+/,/(?!%=)[$@%][!"#$%&'()*+,\-.\/:;<=>?@[\\\]^_`{|}~]/],filehandle:{pattern:/<(?![<=])\S*?>|\b_\b/,alias:"symbol"},"v-string":{pattern:/v\d+(?:\.\d+)*|\d+(?:\.\d+){2,}/,alias:"string"},function:{pattern:/(\bsub[ \t]+)\w+/,lookbehind:!0},keyword:/\b(?:any|break|continue|default|delete|die|do|else|elsif|eval|for|foreach|given|goto|if|last|local|my|next|our|package|print|redo|require|return|say|state|sub|switch|undef|unless|until|use|when|while)\b/,number:/\b(?:0x[\dA-Fa-f](?:_?[\dA-Fa-f])*|0b[01](?:_?[01])*|(?:(?:\d(?:_?\d)*)?\.)?\d(?:_?\d)*(?:[Ee][+-]?\d+)?)\b/,operator:/-[rwxoRWXOezsfdlpSbctugkTBMAC]\b|\+[+=]?|-[-=>]?|\*\*?=?|\/\/?=?|=[=~>]?|~[~=]?|\|\|?=?|&&?=?|<(?:=>?|<=?)?|>>?=?|![~=]?|[%^]=?|\.(?:=|\.\.?)?|[\\?]|\bx(?:=|\b)|\b(?:and|cmp|eq|ge|gt|le|lt|ne|not|or|xor)\b/,punctuation:/[{}[\];(),:]/}})(s)}phpdoc.displayName="phpdoc";phpdoc.aliases=[];function phpdoc(s){s.register(javadoclike),s.register(php),(function(n){var u=/(?:\b[a-zA-Z]\w*|[|\\[\]])+/.source;n.languages.phpdoc=n.languages.extend("javadoclike",{parameter:{pattern:RegExp("(@(?:global|param|property(?:-read|-write)?|var)\\s+(?:"+u+"\\s+)?)\\$\\w+"),lookbehind:!0}}),n.languages.insertBefore("phpdoc","keyword",{"class-name":[{pattern:RegExp("(@(?:global|package|param|property(?:-read|-write)?|return|subpackage|throws|var)\\s+)"+u),lookbehind:!0,inside:{keyword:/\b(?:array|bool|boolean|callback|double|false|float|int|integer|mixed|null|object|resource|self|string|true|void)\b/,punctuation:/[|\\[\]()]/}}]}),n.languages.javadoclike.addSupport("php",n.languages.phpdoc)})(s)}phpExtras.displayName="php-extras";phpExtras.aliases=[];function phpExtras(s){s.register(php),s.languages.insertBefore("php","variable",{this:{pattern:/\$this\b/,alias:"keyword"},global:/\$(?:GLOBALS|HTTP_RAW_POST_DATA|_(?:COOKIE|ENV|FILES|GET|POST|REQUEST|SERVER|SESSION)|argc|argv|http_response_header|php_errormsg)\b/,scope:{pattern:/\b[\w\\]+::/,inside:{keyword:/\b(?:parent|self|static)\b/,punctuation:/::|\\/}}})}plantUml.displayName="plant-uml";plantUml.aliases=["plantuml"];function plantUml(s){(function(n){var u=/\$\w+|%[a-z]+%/,f=/\[[^[\]]*\]/.source,y=/(?:[drlu]|do|down|le|left|ri|right|up)/.source,S="(?:-+"+y+"-+|\\.+"+y+"\\.+|-+(?:"+f+"-*)?|"+f+"-+|\\.+(?:"+f+"\\.*)?|"+f+"\\.+)",A=/(?:<{1,2}|\/{1,2}|\\{1,2}|<\||[#*^+}xo])/.source,w=/(?:>{1,2}|\/{1,2}|\\{1,2}|\|>|[#*^+{xo])/.source,C=/[[?]?[ox]?/.source,T=/[ox]?[\]?]?/.source,R=C+"(?:"+S+w+"|"+A+S+"(?:"+w+")?)"+T;n.languages["plant-uml"]={comment:{pattern:/(^[ \t]*)(?:'.*|\/'[\s\S]*?'\/)/m,lookbehind:!0,greedy:!0},preprocessor:{pattern:/(^[ \t]*)!.*/m,lookbehind:!0,greedy:!0,alias:"property",inside:{variable:u}},delimiter:{pattern:/(^[ \t]*)@(?:end|start)uml\b/m,lookbehind:!0,greedy:!0,alias:"punctuation"},arrow:{pattern:RegExp(/(^|[^-.<>?|\\[\]ox])/.source+R+/(?![-.<>?|\\\]ox])/.source),lookbehind:!0,greedy:!0,alias:"operator",inside:{expression:{pattern:/(\[)[^[\]]+(?=\])/,lookbehind:!0,inside:null},punctuation:/\[(?=$|\])|^\]/}},string:{pattern:/"[^"]*"/,greedy:!0},text:{pattern:/(\[[ \t]*[\r\n]+(?![\r\n]))[^\]]*(?=\])/,lookbehind:!0,greedy:!0,alias:"string"},keyword:[{pattern:/^([ \t]*)(?:abstract\s+class|end\s+(?:box|fork|group|merge|note|ref|split|title)|(?:fork|split)(?:\s+again)?|activate|actor|agent|alt|annotation|artifact|autoactivate|autonumber|backward|binary|boundary|box|break|caption|card|case|circle|class|clock|cloud|collections|component|concise|control|create|critical|database|deactivate|destroy|detach|diamond|else|elseif|end|end[hr]note|endif|endswitch|endwhile|entity|enum|file|folder|footer|frame|group|[hr]?note|header|hexagon|hide|if|interface|label|legend|loop|map|namespace|network|newpage|node|nwdiag|object|opt|package|page|par|participant|person|queue|rectangle|ref|remove|repeat|restore|return|robust|scale|set|show|skinparam|stack|start|state|stop|storage|switch|title|together|usecase|usecase\/|while)(?=\s|$)/m,lookbehind:!0,greedy:!0},/\b(?:elseif|equals|not|while)(?=\s*\()/,/\b(?:as|is|then)\b/],divider:{pattern:/^==.+==$/m,greedy:!0,alias:"important"},time:{pattern:/@(?:\d+(?:[:/]\d+){2}|[+-]?\d+|:[a-z]\w*(?:[+-]\d+)?)\b/i,greedy:!0,alias:"number"},color:{pattern:/#(?:[a-z_]+|[a-fA-F0-9]+)\b/,alias:"symbol"},variable:u,punctuation:/[:,;()[\]{}]|\.{3}/},n.languages["plant-uml"].arrow.inside.expression.inside=n.languages["plant-uml"],n.languages.plantuml=n.languages["plant-uml"]})(s)}plsql.displayName="plsql";plsql.aliases=[];function plsql(s){s.register(sql),s.languages.plsql=s.languages.extend("sql",{comment:{pattern:/\/\*[\s\S]*?\*\/|--.*/,greedy:!0},keyword:/\b(?:A|ACCESSIBLE|ADD|AGENT|AGGREGATE|ALL|ALTER|AND|ANY|ARRAY|AS|ASC|AT|ATTRIBUTE|AUTHID|AVG|BEGIN|BETWEEN|BFILE_BASE|BINARY|BLOB_BASE|BLOCK|BODY|BOTH|BOUND|BULK|BY|BYTE|C|CALL|CALLING|CASCADE|CASE|CHAR|CHARACTER|CHARSET|CHARSETFORM|CHARSETID|CHAR_BASE|CHECK|CLOB_BASE|CLONE|CLOSE|CLUSTER|CLUSTERS|COLAUTH|COLLECT|COLUMNS|COMMENT|COMMIT|COMMITTED|COMPILED|COMPRESS|CONNECT|CONSTANT|CONSTRUCTOR|CONTEXT|CONTINUE|CONVERT|COUNT|CRASH|CREATE|CREDENTIAL|CURRENT|CURSOR|CUSTOMDATUM|DANGLING|DATA|DATE|DATE_BASE|DAY|DECLARE|DEFAULT|DEFINE|DELETE|DESC|DETERMINISTIC|DIRECTORY|DISTINCT|DOUBLE|DROP|DURATION|ELEMENT|ELSE|ELSIF|EMPTY|END|ESCAPE|EXCEPT|EXCEPTION|EXCEPTIONS|EXCLUSIVE|EXECUTE|EXISTS|EXIT|EXTERNAL|FETCH|FINAL|FIRST|FIXED|FLOAT|FOR|FORALL|FORCE|FROM|FUNCTION|GENERAL|GOTO|GRANT|GROUP|HASH|HAVING|HEAP|HIDDEN|HOUR|IDENTIFIED|IF|IMMEDIATE|IMMUTABLE|IN|INCLUDING|INDEX|INDEXES|INDICATOR|INDICES|INFINITE|INSERT|INSTANTIABLE|INT|INTERFACE|INTERSECT|INTERVAL|INTO|INVALIDATE|IS|ISOLATION|JAVA|LANGUAGE|LARGE|LEADING|LENGTH|LEVEL|LIBRARY|LIKE|LIKE2|LIKE4|LIKEC|LIMIT|LIMITED|LOCAL|LOCK|LONG|LOOP|MAP|MAX|MAXLEN|MEMBER|MERGE|MIN|MINUS|MINUTE|MOD|MODE|MODIFY|MONTH|MULTISET|MUTABLE|NAME|NAN|NATIONAL|NATIVE|NCHAR|NEW|NOCOMPRESS|NOCOPY|NOT|NOWAIT|NULL|NUMBER_BASE|OBJECT|OCICOLL|OCIDATE|OCIDATETIME|OCIDURATION|OCIINTERVAL|OCILOBLOCATOR|OCINUMBER|OCIRAW|OCIREF|OCIREFCURSOR|OCIROWID|OCISTRING|OCITYPE|OF|OLD|ON|ONLY|OPAQUE|OPEN|OPERATOR|OPTION|OR|ORACLE|ORADATA|ORDER|ORGANIZATION|ORLANY|ORLVARY|OTHERS|OUT|OVERLAPS|OVERRIDING|PACKAGE|PARALLEL_ENABLE|PARAMETER|PARAMETERS|PARENT|PARTITION|PASCAL|PERSISTABLE|PIPE|PIPELINED|PLUGGABLE|POLYMORPHIC|PRAGMA|PRECISION|PRIOR|PRIVATE|PROCEDURE|PUBLIC|RAISE|RANGE|RAW|READ|RECORD|REF|REFERENCE|RELIES_ON|REM|REMAINDER|RENAME|RESOURCE|RESULT|RESULT_CACHE|RETURN|RETURNING|REVERSE|REVOKE|ROLLBACK|ROW|SAMPLE|SAVE|SAVEPOINT|SB1|SB2|SB4|SECOND|SEGMENT|SELECT|SELF|SEPARATE|SEQUENCE|SERIALIZABLE|SET|SHARE|SHORT|SIZE|SIZE_T|SOME|SPARSE|SQL|SQLCODE|SQLDATA|SQLNAME|SQLSTATE|STANDARD|START|STATIC|STDDEV|STORED|STRING|STRUCT|STYLE|SUBMULTISET|SUBPARTITION|SUBSTITUTABLE|SUBTYPE|SUM|SYNONYM|TABAUTH|TABLE|TDO|THE|THEN|TIME|TIMESTAMP|TIMEZONE_ABBR|TIMEZONE_HOUR|TIMEZONE_MINUTE|TIMEZONE_REGION|TO|TRAILING|TRANSACTION|TRANSACTIONAL|TRUSTED|TYPE|UB1|UB2|UB4|UNDER|UNION|UNIQUE|UNPLUG|UNSIGNED|UNTRUSTED|UPDATE|USE|USING|VALIST|VALUE|VALUES|VARIABLE|VARIANCE|VARRAY|VARYING|VIEW|VIEWS|VOID|WHEN|WHERE|WHILE|WITH|WORK|WRAPPED|WRITE|YEAR|ZONE)\b/i,operator:/:=?|=>|[<>^~!]=|\.\.|\|\||\*\*|[-+*/%<>=@]/}),s.languages.insertBefore("plsql","operator",{label:{pattern:/<<\s*\w+\s*>>/,alias:"symbol"}})}powerquery.displayName="powerquery";powerquery.aliases=["mscript","pq"];function powerquery(s){s.languages.powerquery={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|\/\/.*)/,lookbehind:!0,greedy:!0},"quoted-identifier":{pattern:/#"(?:[^"\r\n]|"")*"(?!")/,greedy:!0},string:{pattern:/(?:#!)?"(?:[^"\r\n]|"")*"(?!")/,greedy:!0},constant:[/\bDay\.(?:Friday|Monday|Saturday|Sunday|Thursday|Tuesday|Wednesday)\b/,/\bTraceLevel\.(?:Critical|Error|Information|Verbose|Warning)\b/,/\bOccurrence\.(?:All|First|Last)\b/,/\bOrder\.(?:Ascending|Descending)\b/,/\bRoundingMode\.(?:AwayFromZero|Down|ToEven|TowardZero|Up)\b/,/\bMissingField\.(?:Error|Ignore|UseNull)\b/,/\bQuoteStyle\.(?:Csv|None)\b/,/\bJoinKind\.(?:FullOuter|Inner|LeftAnti|LeftOuter|RightAnti|RightOuter)\b/,/\bGroupKind\.(?:Global|Local)\b/,/\bExtraValues\.(?:Error|Ignore|List)\b/,/\bJoinAlgorithm\.(?:Dynamic|LeftHash|LeftIndex|PairwiseHash|RightHash|RightIndex|SortMerge)\b/,/\bJoinSide\.(?:Left|Right)\b/,/\bPrecision\.(?:Decimal|Double)\b/,/\bRelativePosition\.From(?:End|Start)\b/,/\bTextEncoding\.(?:Ascii|BigEndianUnicode|Unicode|Utf16|Utf8|Windows)\b/,/\b(?:Any|Binary|Date|DateTime|DateTimeZone|Duration|Function|Int16|Int32|Int64|Int8|List|Logical|None|Number|Record|Table|Text|Time)\.Type\b/,/\bnull\b/],boolean:/\b(?:false|true)\b/,keyword:/\b(?:and|as|each|else|error|if|in|is|let|meta|not|nullable|optional|or|otherwise|section|shared|then|try|type)\b|#(?:binary|date|datetime|datetimezone|duration|infinity|nan|sections|shared|table|time)\b/,function:{pattern:/(^|[^#\w.])[a-z_][\w.]*(?=\s*\()/i,lookbehind:!0},"data-type":{pattern:/\b(?:any|anynonnull|binary|date|datetime|datetimezone|duration|function|list|logical|none|number|record|table|text|time)\b/,alias:"class-name"},number:{pattern:/\b0x[\da-f]+\b|(?:[+-]?(?:\b\d+\.)?\b\d+|[+-]\.\d+|(^|[^.])\B\.\d+)(?:e[+-]?\d+)?\b/i,lookbehind:!0},operator:/[-+*\/&?@^]|<(?:=>?|>)?|>=?|=>?|\.\.\.?/,punctuation:/[,;\[\](){}]/},s.languages.pq=s.languages.powerquery,s.languages.mscript=s.languages.powerquery}powershell.displayName="powershell";powershell.aliases=[];function powershell(s){(function(n){var u=n.languages.powershell={comment:[{pattern:/(^|[^`])<#[\s\S]*?#>/,lookbehind:!0},{pattern:/(^|[^`])#.*/,lookbehind:!0}],string:[{pattern:/"(?:`[\s\S]|[^`"])*"/,greedy:!0,inside:null},{pattern:/'(?:[^']|'')*'/,greedy:!0}],namespace:/\[[a-z](?:\[(?:\[[^\]]*\]|[^\[\]])*\]|[^\[\]])*\]/i,boolean:/\$(?:false|true)\b/i,variable:/\$\w+\b/,function:[/\b(?:Add|Approve|Assert|Backup|Block|Checkpoint|Clear|Close|Compare|Complete|Compress|Confirm|Connect|Convert|ConvertFrom|ConvertTo|Copy|Debug|Deny|Disable|Disconnect|Dismount|Edit|Enable|Enter|Exit|Expand|Export|Find|ForEach|Format|Get|Grant|Group|Hide|Import|Initialize|Install|Invoke|Join|Limit|Lock|Measure|Merge|Move|New|Open|Optimize|Out|Ping|Pop|Protect|Publish|Push|Read|Receive|Redo|Register|Remove|Rename|Repair|Request|Reset|Resize|Resolve|Restart|Restore|Resume|Revoke|Save|Search|Select|Send|Set|Show|Skip|Sort|Split|Start|Step|Stop|Submit|Suspend|Switch|Sync|Tee|Test|Trace|Unblock|Undo|Uninstall|Unlock|Unprotect|Unpublish|Unregister|Update|Use|Wait|Watch|Where|Write)-[a-z]+\b/i,/\b(?:ac|cat|chdir|clc|cli|clp|clv|compare|copy|cp|cpi|cpp|cvpa|dbp|del|diff|dir|ebp|echo|epal|epcsv|epsn|erase|fc|fl|ft|fw|gal|gbp|gc|gci|gcs|gdr|gi|gl|gm|gp|gps|group|gsv|gu|gv|gwmi|iex|ii|ipal|ipcsv|ipsn|irm|iwmi|iwr|kill|lp|ls|measure|mi|mount|move|mp|mv|nal|ndr|ni|nv|ogv|popd|ps|pushd|pwd|rbp|rd|rdr|ren|ri|rm|rmdir|rni|rnp|rp|rv|rvpa|rwmi|sal|saps|sasv|sbp|sc|select|set|shcm|si|sl|sleep|sls|sort|sp|spps|spsv|start|sv|swmi|tee|trcm|type|write)\b/i],keyword:/\b(?:Begin|Break|Catch|Class|Continue|Data|Define|Do|DynamicParam|Else|ElseIf|End|Exit|Filter|Finally|For|ForEach|From|Function|If|InlineScript|Parallel|Param|Process|Return|Sequence|Switch|Throw|Trap|Try|Until|Using|Var|While|Workflow)\b/i,operator:{pattern:/(^|\W)(?:!|-(?:b?(?:and|x?or)|as|(?:Not)?(?:Contains|In|Like|Match)|eq|ge|gt|is(?:Not)?|Join|le|lt|ne|not|Replace|sh[lr])\b|-[-=]?|\+[+=]?|[*\/%]=?)/i,lookbehind:!0},punctuation:/[|{}[\];(),.]/};u.string[0].inside={function:{pattern:/(^|[^`])\$\((?:\$\([^\r\n()]*\)|(?!\$\()[^\r\n)])*\)/,lookbehind:!0,inside:u},boolean:u.boolean,variable:u.variable}})(s)}processing.displayName="processing";processing.aliases=[];function processing(s){s.register(clike),s.languages.processing=s.languages.extend("clike",{keyword:/\b(?:break|case|catch|class|continue|default|else|extends|final|for|if|implements|import|new|null|private|public|return|static|super|switch|this|try|void|while)\b/,function:/\b\w+(?=\s*\()/,operator:/<[<=]?|>[>=]?|&&?|\|\|?|[%?]|[!=+\-*\/]=?/}),s.languages.insertBefore("processing","number",{constant:/\b(?!XML\b)[A-Z][A-Z\d_]+\b/,type:{pattern:/\b(?:boolean|byte|char|color|double|float|int|[A-Z]\w*)\b/,alias:"class-name"}})}prolog.displayName="prolog";prolog.aliases=[];function prolog(s){s.languages.prolog={comment:{pattern:/\/\*[\s\S]*?\*\/|%.*/,greedy:!0},string:{pattern:/(["'])(?:\1\1|\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1(?!\1)/,greedy:!0},builtin:/\b(?:fx|fy|xf[xy]?|yfx?)\b/,function:/\b[a-z]\w*(?:(?=\()|\/\d+)/,number:/\b\d+(?:\.\d*)?/,operator:/[:\\=><\-?*@\/;+^|!$.]+|\b(?:is|mod|not|xor)\b/,punctuation:/[(){}\[\],]/}}promql.displayName="promql";promql.aliases=[];function promql(s){(function(n){var u=["sum","min","max","avg","group","stddev","stdvar","count","count_values","bottomk","topk","quantile"],f=["on","ignoring","group_right","group_left","by","without"],y=["offset"],S=u.concat(f,y);n.languages.promql={comment:{pattern:/(^[ \t]*)#.*/m,lookbehind:!0},"vector-match":{pattern:new RegExp("((?:"+f.join("|")+")\\s*)\\([^)]*\\)"),lookbehind:!0,inside:{"label-key":{pattern:/\b[^,]+\b/,alias:"attr-name"},punctuation:/[(),]/}},"context-labels":{pattern:/\{[^{}]*\}/,inside:{"label-key":{pattern:/\b[a-z_]\w*(?=\s*(?:=|![=~]))/,alias:"attr-name"},"label-value":{pattern:/(["'`])(?:\\[\s\S]|(?!\1)[^\\])*\1/,greedy:!0,alias:"attr-value"},punctuation:/\{|\}|=~?|![=~]|,/}},"context-range":[{pattern:/\[[\w\s:]+\]/,inside:{punctuation:/\[|\]|:/,"range-duration":{pattern:/\b(?:\d+(?:[smhdwy]|ms))+\b/i,alias:"number"}}},{pattern:/(\boffset\s+)\w+/,lookbehind:!0,inside:{"range-duration":{pattern:/\b(?:\d+(?:[smhdwy]|ms))+\b/i,alias:"number"}}}],keyword:new RegExp("\\b(?:"+S.join("|")+")\\b","i"),function:/\b[a-z_]\w*(?=\s*\()/i,number:/[-+]?(?:(?:\b\d+(?:\.\d+)?|\B\.\d+)(?:e[-+]?\d+)?\b|\b(?:0x[0-9a-f]+|nan|inf)\b)/i,operator:/[\^*/%+-]|==|!=|<=|<|>=|>|\b(?:and|or|unless)\b/i,punctuation:/[{};()`,.[\]]/}})(s)}properties$6.displayName="properties";properties$6.aliases=[];function properties$6(s){s.languages.properties={comment:/^[ \t]*[#!].*$/m,value:{pattern:/(^[ \t]*(?:\\(?:\r\n|[\s\S])|[^\\\s:=])+(?: *[=:] *(?! )| ))(?:\\(?:\r\n|[\s\S])|[^\\\r\n])+/m,lookbehind:!0,alias:"attr-value"},key:{pattern:/^[ \t]*(?:\\(?:\r\n|[\s\S])|[^\\\s:=])+(?= *[=:]| )/m,alias:"attr-name"},punctuation:/[=:]/}}protobuf.displayName="protobuf";protobuf.aliases=[];function protobuf(s){s.register(clike),(function(n){var u=/\b(?:bool|bytes|double|s?fixed(?:32|64)|float|[su]?int(?:32|64)|string)\b/;n.languages.protobuf=n.languages.extend("clike",{"class-name":[{pattern:/(\b(?:enum|extend|message|service)\s+)[A-Za-z_]\w*(?=\s*\{)/,lookbehind:!0},{pattern:/(\b(?:rpc\s+\w+|returns)\s*\(\s*(?:stream\s+)?)\.?[A-Za-z_]\w*(?:\.[A-Za-z_]\w*)*(?=\s*\))/,lookbehind:!0}],keyword:/\b(?:enum|extend|extensions|import|message|oneof|option|optional|package|public|repeated|required|reserved|returns|rpc(?=\s+\w)|service|stream|syntax|to)\b(?!\s*=\s*\d)/,function:/\b[a-z_]\w*(?=\s*\()/i}),n.languages.insertBefore("protobuf","operator",{map:{pattern:/\bmap<\s*[\w.]+\s*,\s*[\w.]+\s*>(?=\s+[a-z_]\w*\s*[=;])/i,alias:"class-name",inside:{punctuation:/[<>.,]/,builtin:u}},builtin:u,"positional-class-name":{pattern:/(?:\b|\B\.)[a-z_]\w*(?:\.[a-z_]\w*)*(?=\s+[a-z_]\w*\s*[=;])/i,alias:"class-name",inside:{punctuation:/\./}},annotation:{pattern:/(\[\s*)[a-z_]\w*(?=\s*=)/i,lookbehind:!0}})})(s)}stylus.displayName="stylus";stylus.aliases=[];function stylus(s){(function(n){var u={pattern:/(\b\d+)(?:%|[a-z]+)/,lookbehind:!0},f={pattern:/(^|[^\w.-])-?(?:\d+(?:\.\d+)?|\.\d+)/,lookbehind:!0},y={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|\/\/.*)/,lookbehind:!0},url:{pattern:/\burl\((["']?).*?\1\)/i,greedy:!0},string:{pattern:/("|')(?:(?!\1)[^\\\r\n]|\\(?:\r\n|[\s\S]))*\1/,greedy:!0},interpolation:null,func:null,important:/\B!(?:important|optional)\b/i,keyword:{pattern:/(^|\s+)(?:(?:else|for|if|return|unless)(?=\s|$)|@[\w-]+)/,lookbehind:!0},hexcode:/#[\da-f]{3,6}/i,color:[/\b(?:AliceBlue|AntiqueWhite|Aqua|Aquamarine|Azure|Beige|Bisque|Black|BlanchedAlmond|Blue|BlueViolet|Brown|BurlyWood|CadetBlue|Chartreuse|Chocolate|Coral|CornflowerBlue|Cornsilk|Crimson|Cyan|DarkBlue|DarkCyan|DarkGoldenRod|DarkGr[ae]y|DarkGreen|DarkKhaki|DarkMagenta|DarkOliveGreen|DarkOrange|DarkOrchid|DarkRed|DarkSalmon|DarkSeaGreen|DarkSlateBlue|DarkSlateGr[ae]y|DarkTurquoise|DarkViolet|DeepPink|DeepSkyBlue|DimGr[ae]y|DodgerBlue|FireBrick|FloralWhite|ForestGreen|Fuchsia|Gainsboro|GhostWhite|Gold|GoldenRod|Gr[ae]y|Green|GreenYellow|HoneyDew|HotPink|IndianRed|Indigo|Ivory|Khaki|Lavender|LavenderBlush|LawnGreen|LemonChiffon|LightBlue|LightCoral|LightCyan|LightGoldenRodYellow|LightGr[ae]y|LightGreen|LightPink|LightSalmon|LightSeaGreen|LightSkyBlue|LightSlateGr[ae]y|LightSteelBlue|LightYellow|Lime|LimeGreen|Linen|Magenta|Maroon|MediumAquaMarine|MediumBlue|MediumOrchid|MediumPurple|MediumSeaGreen|MediumSlateBlue|MediumSpringGreen|MediumTurquoise|MediumVioletRed|MidnightBlue|MintCream|MistyRose|Moccasin|NavajoWhite|Navy|OldLace|Olive|OliveDrab|Orange|OrangeRed|Orchid|PaleGoldenRod|PaleGreen|PaleTurquoise|PaleVioletRed|PapayaWhip|PeachPuff|Peru|Pink|Plum|PowderBlue|Purple|Red|RosyBrown|RoyalBlue|SaddleBrown|Salmon|SandyBrown|SeaGreen|SeaShell|Sienna|Silver|SkyBlue|SlateBlue|SlateGr[ae]y|Snow|SpringGreen|SteelBlue|Tan|Teal|Thistle|Tomato|Transparent|Turquoise|Violet|Wheat|White|WhiteSmoke|Yellow|YellowGreen)\b/i,{pattern:/\b(?:hsl|rgb)\(\s*\d{1,3}\s*,\s*\d{1,3}%?\s*,\s*\d{1,3}%?\s*\)\B|\b(?:hsl|rgb)a\(\s*\d{1,3}\s*,\s*\d{1,3}%?\s*,\s*\d{1,3}%?\s*,\s*(?:0|0?\.\d+|1)\s*\)\B/i,inside:{unit:u,number:f,function:/[\w-]+(?=\()/,punctuation:/[(),]/}}],entity:/\\[\da-f]{1,8}/i,unit:u,boolean:/\b(?:false|true)\b/,operator:[/~|[+!\/%<>?=]=?|[-:]=|\*[*=]?|\.{2,3}|&&|\|\||\B-\B|\b(?:and|in|is(?: a| defined| not|nt)?|not|or)\b/],number:f,punctuation:/[{}()\[\];:,]/};y.interpolation={pattern:/\{[^\r\n}:]+\}/,alias:"variable",inside:{delimiter:{pattern:/^\{|\}$/,alias:"punctuation"},rest:y}},y.func={pattern:/[\w-]+\([^)]*\).*/,inside:{function:/^[^(]+/,rest:y}},n.languages.stylus={"atrule-declaration":{pattern:/(^[ \t]*)@.+/m,lookbehind:!0,inside:{atrule:/^@[\w-]+/,rest:y}},"variable-declaration":{pattern:/(^[ \t]*)[\w$-]+\s*.?=[ \t]*(?:\{[^{}]*\}|\S.*|$)/m,lookbehind:!0,inside:{variable:/^\S+/,rest:y}},statement:{pattern:/(^[ \t]*)(?:else|for|if|return|unless)[ \t].+/m,lookbehind:!0,inside:{keyword:/^\S+/,rest:y}},"property-declaration":{pattern:/((?:^|\{)([ \t]*))(?:[\w-]|\{[^}\r\n]+\})+(?:\s*:\s*|[ \t]+)(?!\s)[^{\r\n]*(?:;|[^{\r\n,]$(?!(?:\r?\n|\r)(?:\{|\2[ \t])))/m,lookbehind:!0,inside:{property:{pattern:/^[^\s:]+/,inside:{interpolation:y.interpolation}},rest:y}},selector:{pattern:/(^[ \t]*)(?:(?=\S)(?:[^{}\r\n:()]|::?[\w-]+(?:\([^)\r\n]*\)|(?![\w-]))|\{[^}\r\n]+\})+)(?:(?:\r?\n|\r)(?:\1(?:(?=\S)(?:[^{}\r\n:()]|::?[\w-]+(?:\([^)\r\n]*\)|(?![\w-]))|\{[^}\r\n]+\})+)))*(?:,$|\{|(?=(?:\r?\n|\r)(?:\{|\1[ \t])))/m,lookbehind:!0,inside:{interpolation:y.interpolation,comment:y.comment,punctuation:/[{},]/}},func:y.func,string:y.string,comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|\/\/.*)/,lookbehind:!0,greedy:!0},interpolation:y.interpolation,punctuation:/[{}()\[\];:.]/}})(s)}twig.displayName="twig";twig.aliases=[];function twig(s){s.register(markupTemplating),s.languages.twig={comment:/^\{#[\s\S]*?#\}$/,"tag-name":{pattern:/(^\{%-?\s*)\w+/,lookbehind:!0,alias:"keyword"},delimiter:{pattern:/^\{[{%]-?|-?[%}]\}$/,alias:"punctuation"},string:{pattern:/("|')(?:\\.|(?!\1)[^\\\r\n])*\1/,inside:{punctuation:/^['"]|['"]$/}},keyword:/\b(?:even|if|odd)\b/,boolean:/\b(?:false|null|true)\b/,number:/\b0x[\dA-Fa-f]+|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee][-+]?\d+)?/,operator:[{pattern:/(\s)(?:and|b-and|b-or|b-xor|ends with|in|is|matches|not|or|same as|starts with)(?=\s)/,lookbehind:!0},/[=<>]=?|!=|\*\*?|\/\/?|\?:?|[-+~%|]/],punctuation:/[()\[\]{}:.,]/},s.hooks.add("before-tokenize",function(n){if(n.language==="twig"){var u=/\{(?:#[\s\S]*?#|%[\s\S]*?%|\{[\s\S]*?\})\}/g;s.languages["markup-templating"].buildPlaceholders(n,"twig",u)}}),s.hooks.add("after-tokenize",function(n){s.languages["markup-templating"].tokenizePlaceholders(n,"twig")})}pug.displayName="pug";pug.aliases=[];function pug(s){s.register(javascript),s.register(markup),(function(n){n.languages.pug={comment:{pattern:/(^([\t ]*))\/\/.*(?:(?:\r?\n|\r)\2[\t ].+)*/m,lookbehind:!0},"multiline-script":{pattern:/(^([\t ]*)script\b.*\.[\t ]*)(?:(?:\r?\n|\r(?!\n))(?:\2[\t ].+|\s*?(?=\r?\n|\r)))+/m,lookbehind:!0,inside:n.languages.javascript},filter:{pattern:/(^([\t ]*)):.+(?:(?:\r?\n|\r(?!\n))(?:\2[\t ].+|\s*?(?=\r?\n|\r)))+/m,lookbehind:!0,inside:{"filter-name":{pattern:/^:[\w-]+/,alias:"variable"},text:/\S[\s\S]*/}},"multiline-plain-text":{pattern:/(^([\t ]*)[\w\-#.]+\.[\t ]*)(?:(?:\r?\n|\r(?!\n))(?:\2[\t ].+|\s*?(?=\r?\n|\r)))+/m,lookbehind:!0},markup:{pattern:/(^[\t ]*)<.+/m,lookbehind:!0,inside:n.languages.markup},doctype:{pattern:/((?:^|\n)[\t ]*)doctype(?: .+)?/,lookbehind:!0},"flow-control":{pattern:/(^[\t ]*)(?:case|default|each|else|if|unless|when|while)\b(?: .+)?/m,lookbehind:!0,inside:{each:{pattern:/^each .+? in\b/,inside:{keyword:/\b(?:each|in)\b/,punctuation:/,/}},branch:{pattern:/^(?:case|default|else|if|unless|when|while)\b/,alias:"keyword"},rest:n.languages.javascript}},keyword:{pattern:/(^[\t ]*)(?:append|block|extends|include|prepend)\b.+/m,lookbehind:!0},mixin:[{pattern:/(^[\t ]*)mixin .+/m,lookbehind:!0,inside:{keyword:/^mixin/,function:/\w+(?=\s*\(|\s*$)/,punctuation:/[(),.]/}},{pattern:/(^[\t ]*)\+.+/m,lookbehind:!0,inside:{name:{pattern:/^\+\w+/,alias:"function"},rest:n.languages.javascript}}],script:{pattern:/(^[\t ]*script(?:(?:&[^(]+)?\([^)]+\))*[\t ]).+/m,lookbehind:!0,inside:n.languages.javascript},"plain-text":{pattern:/(^[\t ]*(?!-)[\w\-#.]*[\w\-](?:(?:&[^(]+)?\([^)]+\))*\/?[\t ]).+/m,lookbehind:!0},tag:{pattern:/(^[\t ]*)(?!-)[\w\-#.]*[\w\-](?:(?:&[^(]+)?\([^)]+\))*\/?:?/m,lookbehind:!0,inside:{attributes:[{pattern:/&[^(]+\([^)]+\)/,inside:n.languages.javascript},{pattern:/\([^)]+\)/,inside:{"attr-value":{pattern:/(=\s*(?!\s))(?:\{[^}]*\}|[^,)\r\n]+)/,lookbehind:!0,inside:n.languages.javascript},"attr-name":/[\w-]+(?=\s*!?=|\s*[,)])/,punctuation:/[!=(),]+/}}],punctuation:/:/,"attr-id":/#[\w\-]+/,"attr-class":/\.[\w\-]+/}},code:[{pattern:/(^[\t ]*(?:-|!?=)).+/m,lookbehind:!0,inside:n.languages.javascript}],punctuation:/[.\-!=|]+/};for(var u=/(^([\t ]*)):<filter_name>(?:(?:\r?\n|\r(?!\n))(?:\2[\t ].+|\s*?(?=\r?\n|\r)))+/.source,f=[{filter:"atpl",language:"twig"},{filter:"coffee",language:"coffeescript"},"ejs","handlebars","less","livescript","markdown",{filter:"sass",language:"scss"},"stylus"],y={},S=0,A=f.length;S<A;S++){var w=f[S];w=typeof w=="string"?{filter:w,language:w}:w,n.languages[w.language]&&(y["filter-"+w.filter]={pattern:RegExp(u.replace("<filter_name>",function(){return w.filter}),"m"),lookbehind:!0,inside:{"filter-name":{pattern:/^:[\w-]+/,alias:"variable"},text:{pattern:/\S[\s\S]*/,alias:[w.language,"language-"+w.language],inside:n.languages[w.language]}}})}n.languages.insertBefore("pug","filter",y)})(s)}puppet.displayName="puppet";puppet.aliases=[];function puppet(s){(function(n){n.languages.puppet={heredoc:[{pattern:/(@\("([^"\r\n\/):]+)"(?:\/[nrts$uL]*)?\).*(?:\r?\n|\r))(?:.*(?:\r?\n|\r(?!\n)))*?[ \t]*(?:\|[ \t]*)?(?:-[ \t]*)?\2/,lookbehind:!0,alias:"string",inside:{punctuation:/(?=\S).*\S(?= *$)/}},{pattern:/(@\(([^"\r\n\/):]+)(?:\/[nrts$uL]*)?\).*(?:\r?\n|\r))(?:.*(?:\r?\n|\r(?!\n)))*?[ \t]*(?:\|[ \t]*)?(?:-[ \t]*)?\2/,lookbehind:!0,greedy:!0,alias:"string",inside:{punctuation:/(?=\S).*\S(?= *$)/}},{pattern:/@\("?(?:[^"\r\n\/):]+)"?(?:\/[nrts$uL]*)?\)/,alias:"string",inside:{punctuation:{pattern:/(\().+?(?=\))/,lookbehind:!0}}}],"multiline-comment":{pattern:/(^|[^\\])\/\*[\s\S]*?\*\//,lookbehind:!0,greedy:!0,alias:"comment"},regex:{pattern:/((?:\bnode\s+|[~=\(\[\{,]\s*|[=+]>\s*|^\s*))\/(?:[^\/\\]|\\[\s\S])+\/(?:[imx]+\b|\B)/,lookbehind:!0,greedy:!0,inside:{"extended-regex":{pattern:/^\/(?:[^\/\\]|\\[\s\S])+\/[im]*x[im]*$/,inside:{comment:/#.*/}}}},comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},string:{pattern:/(["'])(?:\$\{(?:[^'"}]|(["'])(?:(?!\2)[^\\]|\\[\s\S])*\2)+\}|\$(?!\{)|(?!\1)[^\\$]|\\[\s\S])*\1/,greedy:!0,inside:{"double-quoted":{pattern:/^"[\s\S]*"$/,inside:{}}}},variable:{pattern:/\$(?:::)?\w+(?:::\w+)*/,inside:{punctuation:/::/}},"attr-name":/(?:\b\w+|\*)(?=\s*=>)/,function:[{pattern:/(\.)(?!\d)\w+/,lookbehind:!0},/\b(?:contain|debug|err|fail|include|info|notice|realize|require|tag|warning)\b|\b(?!\d)\w+(?=\()/],number:/\b(?:0x[a-f\d]+|\d+(?:\.\d+)?(?:e-?\d+)?)\b/i,boolean:/\b(?:false|true)\b/,keyword:/\b(?:application|attr|case|class|consumes|default|define|else|elsif|function|if|import|inherits|node|private|produces|type|undef|unless)\b/,datatype:{pattern:/\b(?:Any|Array|Boolean|Callable|Catalogentry|Class|Collection|Data|Default|Enum|Float|Hash|Integer|NotUndef|Numeric|Optional|Pattern|Regexp|Resource|Runtime|Scalar|String|Struct|Tuple|Type|Undef|Variant)\b/,alias:"symbol"},operator:/=[=~>]?|![=~]?|<(?:<\|?|[=~|-])?|>[>=]?|->?|~>|\|>?>?|[*\/%+?]|\b(?:and|in|or)\b/,punctuation:/[\[\]{}().,;]|:+/};var u=[{pattern:/(^|[^\\])\$\{(?:[^'"{}]|\{[^}]*\}|(["'])(?:(?!\2)[^\\]|\\[\s\S])*\2)+\}/,lookbehind:!0,inside:{"short-variable":{pattern:/(^\$\{)(?!\w+\()(?:::)?\w+(?:::\w+)*/,lookbehind:!0,alias:"variable",inside:{punctuation:/::/}},delimiter:{pattern:/^\$/,alias:"variable"},rest:n.languages.puppet}},{pattern:/(^|[^\\])\$(?:::)?\w+(?:::\w+)*/,lookbehind:!0,alias:"variable",inside:{punctuation:/::/}}];n.languages.puppet.heredoc[0].inside.interpolation=u,n.languages.puppet.string.inside["double-quoted"].inside.interpolation=u})(s)}pure.displayName="pure";pure.aliases=[];function pure(s){(function(n){n.languages.pure={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?\*\//,lookbehind:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0},/#!.+/],"inline-lang":{pattern:/%<[\s\S]+?%>/,greedy:!0,inside:{lang:{pattern:/(^%< *)-\*-.+?-\*-/,lookbehind:!0,alias:"comment"},delimiter:{pattern:/^%<.*|%>$/,alias:"punctuation"}}},string:{pattern:/"(?:\\.|[^"\\\r\n])*"/,greedy:!0},number:{pattern:/((?:\.\.)?)(?:\b(?:inf|nan)\b|\b0x[\da-f]+|(?:\b(?:0b)?\d+(?:\.\d+)?|\B\.\d+)(?:e[+-]?\d+)?L?)/i,lookbehind:!0},keyword:/\b(?:NULL|ans|break|bt|case|catch|cd|clear|const|def|del|dump|else|end|exit|extern|false|force|help|if|infix[lr]?|interface|let|ls|mem|namespace|nonfix|of|otherwise|outfix|override|postfix|prefix|private|public|pwd|quit|run|save|show|stats|then|throw|trace|true|type|underride|using|when|with)\b/,function:/\b(?:abs|add_(?:addr|constdef|(?:fundef|interface|macdef|typedef)(?:_at)?|vardef)|all|any|applp?|arity|bigintp?|blob(?:_crc|_size|p)?|boolp?|byte_c?string(?:_pointer)?|byte_(?:matrix|pointer)|calloc|cat|catmap|ceil|char[ps]?|check_ptrtag|chr|clear_sentry|clearsym|closurep?|cmatrixp?|cols?|colcat(?:map)?|colmap|colrev|colvector(?:p|seq)?|complex(?:_float_(?:matrix|pointer)|_matrix(?:_view)?|_pointer|p)?|conj|cookedp?|cst|cstring(?:_(?:dup|list|vector))?|curry3?|cyclen?|del_(?:constdef|fundef|interface|macdef|typedef|vardef)|delete|diag(?:mat)?|dim|dmatrixp?|do|double(?:_matrix(?:_view)?|_pointer|p)?|dowith3?|drop|dropwhile|eval(?:cmd)?|exactp|filter|fix|fixity|flip|float(?:_matrix|_pointer)|floor|fold[lr]1?|frac|free|funp?|functionp?|gcd|get(?:_(?:byte|constdef|double|float|fundef|int(?:64)?|interface(?:_typedef)?|long|macdef|pointer|ptrtag|sentry|short|string|typedef|vardef))?|globsym|hash|head|id|im|imatrixp?|index|inexactp|infp|init|insert|int(?:_matrix(?:_view)?|_pointer|p)?|int64_(?:matrix|pointer)|integerp?|iteraten?|iterwhile|join|keys?|lambdap?|last(?:err(?:pos)?)?|lcd|list[2p]?|listmap|make_ptrtag|malloc|map|matcat|matrixp?|max|member|min|nanp|nargs|nmatrixp?|null|numberp?|ord|pack(?:ed)?|pointer(?:_cast|_tag|_type|p)?|pow|pred|ptrtag|put(?:_(?:byte|double|float|int(?:64)?|long|pointer|short|string))?|rationalp?|re|realp?|realloc|recordp?|redim|reduce(?:_with)?|refp?|repeatn?|reverse|rlistp?|round|rows?|rowcat(?:map)?|rowmap|rowrev|rowvector(?:p|seq)?|same|scan[lr]1?|sentry|sgn|short_(?:matrix|pointer)|slice|smatrixp?|sort|split|str|strcat|stream|stride|string(?:_(?:dup|list|vector)|p)?|subdiag(?:mat)?|submat|subseq2?|substr|succ|supdiag(?:mat)?|symbolp?|tail|take|takewhile|thunkp?|transpose|trunc|tuplep?|typep|ubyte|uint(?:64)?|ulong|uncurry3?|unref|unzip3?|update|ushort|vals?|varp?|vector(?:p|seq)?|void|zip3?|zipwith3?)\b/,special:{pattern:/\b__[a-z]+__\b/i,alias:"builtin"},operator:/(?:[!"#$%&'*+,\-.\/:<=>?@\\^`|~\u00a1-\u00bf\u00d7-\u00f7\u20d0-\u2bff]|\b_+\b)+|\b(?:and|div|mod|not|or)\b/,punctuation:/[(){}\[\];,|]/};var u=["c",{lang:"c++",alias:"cpp"},"fortran"],f=/%< *-\*- *<lang>\d* *-\*-[\s\S]+?%>/.source;u.forEach(function(y){var S=y;if(typeof y!="string"&&(S=y.alias,y=y.lang),n.languages[S]){var A={};A["inline-lang-"+S]={pattern:RegExp(f.replace("<lang>",y.replace(/([.+*?\/\\(){}\[\]])/g,"\\$1")),"i"),inside:n.util.clone(n.languages.pure["inline-lang"].inside)},A["inline-lang-"+S].inside.rest=n.util.clone(n.languages[S]),n.languages.insertBefore("pure","inline-lang",A)}}),n.languages.c&&(n.languages.pure["inline-lang"].inside.rest=n.util.clone(n.languages.c))})(s)}purebasic.displayName="purebasic";purebasic.aliases=["pbfasm"];function purebasic(s){s.register(clike),s.languages.purebasic=s.languages.extend("clike",{comment:/;.*/,keyword:/\b(?:align|and|as|break|calldebugger|case|compilercase|compilerdefault|compilerelse|compilerelseif|compilerendif|compilerendselect|compilererror|compilerif|compilerselect|continue|data|datasection|debug|debuglevel|declare|declarec|declarecdll|declaredll|declaremodule|default|define|dim|disableasm|disabledebugger|disableexplicit|else|elseif|enableasm|enabledebugger|enableexplicit|end|enddatasection|enddeclaremodule|endenumeration|endif|endimport|endinterface|endmacro|endmodule|endprocedure|endselect|endstructure|endstructureunion|endwith|enumeration|extends|fakereturn|for|foreach|forever|global|gosub|goto|if|import|importc|includebinary|includefile|includepath|interface|macro|module|newlist|newmap|next|not|or|procedure|procedurec|procedurecdll|proceduredll|procedurereturn|protected|prototype|prototypec|read|redim|repeat|restore|return|runtime|select|shared|static|step|structure|structureunion|swap|threaded|to|until|wend|while|with|xincludefile|xor)\b/i,function:/\b\w+(?:\.\w+)?\s*(?=\()/,number:/(?:\$[\da-f]+|\b-?(?:\d+(?:\.\d+)?|\.\d+)(?:e[+-]?\d+)?)\b/i,operator:/(?:@\*?|\?|\*)\w+\$?|-[>-]?|\+\+?|!=?|<<?=?|>>?=?|==?|&&?|\|?\||[~^%?*/@]/}),s.languages.insertBefore("purebasic","keyword",{tag:/#\w+\$?/,asm:{pattern:/(^[\t ]*)!.*/m,lookbehind:!0,alias:"tag",inside:{comment:/;.*/,string:{pattern:/(["'`])(?:\\.|(?!\1)[^\\\r\n])*\1/,greedy:!0},"label-reference-anonymous":{pattern:/(!\s*j[a-z]+\s+)@[fb]/i,lookbehind:!0,alias:"fasm-label"},"label-reference-addressed":{pattern:/(!\s*j[a-z]+\s+)[A-Z._?$@][\w.?$@~#]*/i,lookbehind:!0,alias:"fasm-label"},keyword:[/\b(?:extern|global)\b[^;\r\n]*/i,/\b(?:CPU|DEFAULT|FLOAT)\b.*/],function:{pattern:/^([\t ]*!\s*)[\da-z]+(?=\s|$)/im,lookbehind:!0},"function-inline":{pattern:/(:\s*)[\da-z]+(?=\s)/i,lookbehind:!0,alias:"function"},label:{pattern:/^([\t ]*!\s*)[A-Za-z._?$@][\w.?$@~#]*(?=:)/m,lookbehind:!0,alias:"fasm-label"},register:/\b(?:st\d|[xyz]mm\d\d?|[cdt]r\d|r\d\d?[bwd]?|[er]?[abcd]x|[abcd][hl]|[er]?(?:bp|di|si|sp)|[cdefgs]s|mm\d+)\b/i,number:/(?:\b|-|(?=\$))(?:0[hx](?:[\da-f]*\.)?[\da-f]+(?:p[+-]?\d+)?|\d[\da-f]+[hx]|\$\d[\da-f]*|0[oq][0-7]+|[0-7]+[oq]|0[by][01]+|[01]+[by]|0[dt]\d+|(?:\d+(?:\.\d+)?|\.\d+)(?:\.?e[+-]?\d+)?[dt]?)\b/i,operator:/[\[\]*+\-/%<>=&|$!,.:]/}}}),delete s.languages.purebasic["class-name"],delete s.languages.purebasic.boolean,s.languages.pbfasm=s.languages.purebasic}purescript.displayName="purescript";purescript.aliases=["purs"];function purescript(s){s.register(haskell),s.languages.purescript=s.languages.extend("haskell",{keyword:/\b(?:ado|case|class|data|derive|do|else|forall|if|in|infixl|infixr|instance|let|module|newtype|of|primitive|then|type|where)\b|/,"import-statement":{pattern:/(^[\t ]*)import\s+[A-Z][\w']*(?:\.[A-Z][\w']*)*(?:\s+as\s+[A-Z][\w']*(?:\.[A-Z][\w']*)*)?(?:\s+hiding\b)?/m,lookbehind:!0,inside:{keyword:/\b(?:as|hiding|import)\b/,punctuation:/\./}},builtin:/\b(?:absurd|add|ap|append|apply|between|bind|bottom|clamp|compare|comparing|compose|conj|const|degree|discard|disj|div|eq|flap|flip|gcd|identity|ifM|join|lcm|liftA1|liftM1|map|max|mempty|min|mod|mul|negate|not|notEq|one|otherwise|recip|show|sub|top|unit|unless|unlessM|void|when|whenM|zero)\b/,operator:[s.languages.haskell.operator[0],s.languages.haskell.operator[2],/[\xa2-\xa6\xa8\xa9\xac\xae-\xb1\xb4\xb8\xd7\xf7\u02c2-\u02c5\u02d2-\u02df\u02e5-\u02eb\u02ed\u02ef-\u02ff\u0375\u0384\u0385\u03f6\u0482\u058d-\u058f\u0606-\u0608\u060b\u060e\u060f\u06de\u06e9\u06fd\u06fe\u07f6\u07fe\u07ff\u09f2\u09f3\u09fa\u09fb\u0af1\u0b70\u0bf3-\u0bfa\u0c7f\u0d4f\u0d79\u0e3f\u0f01-\u0f03\u0f13\u0f15-\u0f17\u0f1a-\u0f1f\u0f34\u0f36\u0f38\u0fbe-\u0fc5\u0fc7-\u0fcc\u0fce\u0fcf\u0fd5-\u0fd8\u109e\u109f\u1390-\u1399\u166d\u17db\u1940\u19de-\u19ff\u1b61-\u1b6a\u1b74-\u1b7c\u1fbd\u1fbf-\u1fc1\u1fcd-\u1fcf\u1fdd-\u1fdf\u1fed-\u1fef\u1ffd\u1ffe\u2044\u2052\u207a-\u207c\u208a-\u208c\u20a0-\u20bf\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211e-\u2123\u2125\u2127\u2129\u212e\u213a\u213b\u2140-\u2144\u214a-\u214d\u214f\u218a\u218b\u2190-\u2307\u230c-\u2328\u232b-\u2426\u2440-\u244a\u249c-\u24e9\u2500-\u2767\u2794-\u27c4\u27c7-\u27e5\u27f0-\u2982\u2999-\u29d7\u29dc-\u29fb\u29fe-\u2b73\u2b76-\u2b95\u2b97-\u2bff\u2ce5-\u2cea\u2e50\u2e51\u2e80-\u2e99\u2e9b-\u2ef3\u2f00-\u2fd5\u2ff0-\u2ffb\u3004\u3012\u3013\u3020\u3036\u3037\u303e\u303f\u309b\u309c\u3190\u3191\u3196-\u319f\u31c0-\u31e3\u3200-\u321e\u322a-\u3247\u3250\u3260-\u327f\u328a-\u32b0\u32c0-\u33ff\u4dc0-\u4dff\ua490-\ua4c6\ua700-\ua716\ua720\ua721\ua789\ua78a\ua828-\ua82b\ua836-\ua839\uaa77-\uaa79\uab5b\uab6a\uab6b\ufb29\ufbb2-\ufbc1\ufdfc\ufdfd\ufe62\ufe64-\ufe66\ufe69\uff04\uff0b\uff1c-\uff1e\uff3e\uff40\uff5c\uff5e\uffe0-\uffe6\uffe8-\uffee\ufffc\ufffd]/]}),s.languages.purs=s.languages.purescript}python.displayName="python";python.aliases=["py"];function python(s){s.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},s.languages.python["string-interpolation"].inside.interpolation.inside.rest=s.languages.python,s.languages.py=s.languages.python}qsharp.displayName="qsharp";qsharp.aliases=["qs"];function qsharp(s){s.register(clike),(function(n){function u(L,F){return L.replace(/<<(\d+)>>/g,function(H,z){return"(?:"+F[+z]+")"})}function f(L,F,H){return RegExp(u(L,F),"")}function y(L,F){for(var H=0;H<F;H++)L=L.replace(/<<self>>/g,function(){return"(?:"+L+")"});return L.replace(/<<self>>/g,"[^\\s\\S]")}var S={type:"Adj BigInt Bool Ctl Double false Int One Pauli PauliI PauliX PauliY PauliZ Qubit Range Result String true Unit Zero",other:"Adjoint adjoint apply as auto body borrow borrowing Controlled controlled distribute elif else fail fixup for function if in internal intrinsic invert is let mutable namespace new newtype open operation repeat return self set until use using while within"};function A(L){return"\\b(?:"+L.trim().replace(/ /g,"|")+")\\b"}var w=RegExp(A(S.type+" "+S.other)),C=/\b[A-Za-z_]\w*\b/.source,T=u(/<<0>>(?:\s*\.\s*<<0>>)*/.source,[C]),R={keyword:w,punctuation:/[<>()?,.:[\]]/},I=/"(?:\\.|[^\\"])*"/.source;n.languages.qsharp=n.languages.extend("clike",{comment:/\/\/.*/,string:[{pattern:f(/(^|[^$\\])<<0>>/.source,[I]),lookbehind:!0,greedy:!0}],"class-name":[{pattern:f(/(\b(?:as|open)\s+)<<0>>(?=\s*(?:;|as\b))/.source,[T]),lookbehind:!0,inside:R},{pattern:f(/(\bnamespace\s+)<<0>>(?=\s*\{)/.source,[T]),lookbehind:!0,inside:R}],keyword:w,number:/(?:\b0(?:x[\da-f]+|b[01]+|o[0-7]+)|(?:\B\.\d+|\b\d+(?:\.\d*)?)(?:e[-+]?\d+)?)l?\b/i,operator:/\band=|\bor=|\band\b|\bnot\b|\bor\b|<[-=]|[-=]>|>>>=?|<<<=?|\^\^\^=?|\|\|\|=?|&&&=?|w\/=?|~~~|[*\/+\-^=!%]=?/,punctuation:/::|[{}[\];(),.:]/}),n.languages.insertBefore("qsharp","number",{range:{pattern:/\.\./,alias:"operator"}});var N=y(u(/\{(?:[^"{}]|<<0>>|<<self>>)*\}/.source,[I]),2);n.languages.insertBefore("qsharp","string",{"interpolation-string":{pattern:f(/\$"(?:\\.|<<0>>|[^\\"{])*"/.source,[N]),greedy:!0,inside:{interpolation:{pattern:f(/((?:^|[^\\])(?:\\\\)*)<<0>>/.source,[N]),lookbehind:!0,inside:{punctuation:/^\{|\}$/,expression:{pattern:/[\s\S]+/,alias:"language-qsharp",inside:n.languages.qsharp}}},string:/[\s\S]+/}}})})(s),s.languages.qs=s.languages.qsharp}q.displayName="q";q.aliases=[];function q(s){s.languages.q={string:/"(?:\\.|[^"\\\r\n])*"/,comment:[{pattern:/([\t )\]}])\/.*/,lookbehind:!0,greedy:!0},{pattern:/(^|\r?\n|\r)\/[\t ]*(?:(?:\r?\n|\r)(?:.*(?:\r?\n|\r(?!\n)))*?(?:\\(?=[\t ]*(?:\r?\n|\r))|$)|\S.*)/,lookbehind:!0,greedy:!0},{pattern:/^\\[\t ]*(?:\r?\n|\r)[\s\S]+/m,greedy:!0},{pattern:/^#!.+/m,greedy:!0}],symbol:/`(?::\S+|[\w.]*)/,datetime:{pattern:/0N[mdzuvt]|0W[dtz]|\d{4}\.\d\d(?:m|\.\d\d(?:T(?:\d\d(?::\d\d(?::\d\d(?:[.:]\d\d\d)?)?)?)?)?[dz]?)|\d\d:\d\d(?::\d\d(?:[.:]\d\d\d)?)?[uvt]?/,alias:"number"},number:/\b(?![01]:)(?:0N[hje]?|0W[hj]?|0[wn]|0x[\da-fA-F]+|\d+(?:\.\d*)?(?:e[+-]?\d+)?[hjfeb]?)/,keyword:/\\\w+\b|\b(?:abs|acos|aj0?|all|and|any|asc|asin|asof|atan|attr|avgs?|binr?|by|ceiling|cols|cor|cos|count|cov|cross|csv|cut|delete|deltas|desc|dev|differ|distinct|div|do|dsave|ej|enlist|eval|except|exec|exit|exp|fby|fills|first|fkeys|flip|floor|from|get|getenv|group|gtime|hclose|hcount|hdel|hopen|hsym|iasc|identity|idesc|if|ij|in|insert|inter|inv|keys?|last|like|list|ljf?|load|log|lower|lsq|ltime|ltrim|mavg|maxs?|mcount|md5|mdev|med|meta|mins?|mmax|mmin|mmu|mod|msum|neg|next|not|null|or|over|parse|peach|pj|plist|prds?|prev|prior|rand|rank|ratios|raze|read0|read1|reciprocal|reval|reverse|rload|rotate|rsave|rtrim|save|scan|scov|sdev|select|set|setenv|show|signum|sin|sqrt|ssr?|string|sublist|sums?|sv|svar|system|tables|tan|til|trim|txf|type|uj|ungroup|union|update|upper|upsert|value|var|views?|vs|wavg|where|while|within|wj1?|wsum|ww|xasc|xbar|xcols?|xdesc|xexp|xgroup|xkey|xlog|xprev|xrank)\b/,adverb:{pattern:/['\/\\]:?|\beach\b/,alias:"function"},verb:{pattern:/(?:\B\.\B|\b[01]:|<[=>]?|>=?|[:+\-*%,!?~=|$&#@^]):?|\b_\b:?/,alias:"operator"},punctuation:/[(){}\[\];.]/}}qml.displayName="qml";qml.aliases=[];function qml(s){s.register(javascript),(function(n){for(var u=/"(?:\\.|[^\\"\r\n])*"|'(?:\\.|[^\\'\r\n])*'/.source,f=/\/\/.*(?!.)|\/\*(?:[^*]|\*(?!\/))*\*\//.source,y=/(?:[^\\()[\]{}"'/]|<string>|\/(?![*/])|<comment>|\(<expr>*\)|\[<expr>*\]|\{<expr>*\}|\\[\s\S])/.source.replace(/<string>/g,function(){return u}).replace(/<comment>/g,function(){return f}),S=0;S<2;S++)y=y.replace(/<expr>/g,function(){return y});y=y.replace(/<expr>/g,"[^\\s\\S]"),n.languages.qml={comment:{pattern:/\/\/.*|\/\*[\s\S]*?\*\//,greedy:!0},"javascript-function":{pattern:RegExp(/((?:^|;)[ \t]*)function\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*\(<js>*\)\s*\{<js>*\}/.source.replace(/<js>/g,function(){return y}),"m"),lookbehind:!0,greedy:!0,alias:"language-javascript",inside:n.languages.javascript},"class-name":{pattern:/((?:^|[:;])[ \t]*)(?!\d)\w+(?=[ \t]*\{|[ \t]+on\b)/m,lookbehind:!0},property:[{pattern:/((?:^|[;{])[ \t]*)(?!\d)\w+(?:\.\w+)*(?=[ \t]*:)/m,lookbehind:!0},{pattern:/((?:^|[;{])[ \t]*)property[ \t]+(?!\d)\w+(?:\.\w+)*[ \t]+(?!\d)\w+(?:\.\w+)*(?=[ \t]*:)/m,lookbehind:!0,inside:{keyword:/^property/,property:/\w+(?:\.\w+)*/}}],"javascript-expression":{pattern:RegExp(/(:[ \t]*)(?![\s;}[])(?:(?!$|[;}])<js>)+/.source.replace(/<js>/g,function(){return y}),"m"),lookbehind:!0,greedy:!0,alias:"language-javascript",inside:n.languages.javascript},string:{pattern:/"(?:\\.|[^\\"\r\n])*"/,greedy:!0},keyword:/\b(?:as|import|on)\b/,punctuation:/[{}[\]:;,]/}})(s)}qore.displayName="qore";qore.aliases=[];function qore(s){s.register(clike),s.languages.qore=s.languages.extend("clike",{comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:\/\/|#).*)/,lookbehind:!0},string:{pattern:/("|')(?:\\[\s\S]|(?!\1)[^\\])*\1/,greedy:!0},keyword:/\b(?:abstract|any|assert|binary|bool|boolean|break|byte|case|catch|char|class|code|const|continue|data|default|do|double|else|enum|extends|final|finally|float|for|goto|hash|if|implements|import|inherits|instanceof|int|interface|long|my|native|new|nothing|null|object|our|own|private|reference|rethrow|return|short|soft(?:bool|date|float|int|list|number|string)|static|strictfp|string|sub|super|switch|synchronized|this|throw|throws|transient|try|void|volatile|while)\b/,boolean:/\b(?:false|true)\b/i,function:/\$?\b(?!\d)\w+(?=\()/,number:/\b(?:0b[01]+|0x(?:[\da-f]*\.)?[\da-fp\-]+|(?:\d+(?:\.\d+)?|\.\d+)(?:e\d+)?[df]|(?:\d+(?:\.\d+)?|\.\d+))\b/i,operator:{pattern:/(^|[^.])(?:\+[+=]?|-[-=]?|[!=](?:==?|~)?|>>?=?|<(?:=>?|<=?)?|&[&=]?|\|[|=]?|[*\/%^]=?|[~?])/,lookbehind:!0},variable:/\$(?!\d)\w+\b/})}r$1.displayName="r";r$1.aliases=[];function r$1(s){s.languages.r={comment:/#.*/,string:{pattern:/(['"])(?:\\.|(?!\1)[^\\\r\n])*\1/,greedy:!0},"percent-operator":{pattern:/%[^%\s]*%/,alias:"operator"},boolean:/\b(?:FALSE|TRUE)\b/,ellipsis:/\.\.(?:\.|\d+)/,number:[/\b(?:Inf|NaN)\b/,/(?:\b0x[\dA-Fa-f]+(?:\.\d*)?|\b\d+(?:\.\d*)?|\B\.\d+)(?:[EePp][+-]?\d+)?[iL]?/],keyword:/\b(?:NA|NA_character_|NA_complex_|NA_integer_|NA_real_|NULL|break|else|for|function|if|in|next|repeat|while)\b/,operator:/->?>?|<(?:=|<?-)?|[>=!]=?|::?|&&?|\|\|?|[+*\/^$@~]/,punctuation:/[(){}\[\],;]/}}racket.displayName="racket";racket.aliases=["rkt"];function racket(s){s.register(scheme),s.languages.racket=s.languages.extend("scheme",{"lambda-parameter":{pattern:/([(\[]lambda\s+[(\[])[^()\[\]'\s]+/,lookbehind:!0}}),s.languages.insertBefore("racket","string",{lang:{pattern:/^#lang.+/m,greedy:!0,alias:"keyword"}}),s.languages.rkt=s.languages.racket}cshtml.displayName="cshtml";cshtml.aliases=["razor"];function cshtml(s){s.register(csharp),s.register(markup),(function(n){var u=/\/(?![/*])|\/\/.*[\r\n]|\/\*[^*]*(?:\*(?!\/)[^*]*)*\*\//.source,f=/@(?!")|"(?:[^\r\n\\"]|\\.)*"|@"(?:[^\\"]|""|\\[\s\S])*"(?!")/.source+"|"+/'(?:(?:[^\r\n'\\]|\\.|\\[Uux][\da-fA-F]{1,8})'|(?=[^\\](?!')))/.source;function y(G,Y){for(var K=0;K<Y;K++)G=G.replace(/<self>/g,function(){return"(?:"+G+")"});return G.replace(/<self>/g,"[^\\s\\S]").replace(/<str>/g,"(?:"+f+")").replace(/<comment>/g,"(?:"+u+")")}var S=y(/\((?:[^()'"@/]|<str>|<comment>|<self>)*\)/.source,2),A=y(/\[(?:[^\[\]'"@/]|<str>|<comment>|<self>)*\]/.source,1),w=y(/\{(?:[^{}'"@/]|<str>|<comment>|<self>)*\}/.source,2),C=y(/<(?:[^<>'"@/]|<comment>|<self>)*>/.source,1),T=/@/.source+/(?:await\b\s*)?/.source+"(?:"+/(?!await\b)\w+\b/.source+"|"+S+")(?:"+/[?!]?\.\w+\b/.source+"|(?:"+C+")?"+S+"|"+A+")*"+/(?![?!\.(\[]|<(?!\/))/.source,R=/@(?![\w()])/.source+"|"+T,I="(?:"+/"[^"@]*"|'[^'@]*'|[^\s'"@>=]+(?=[\s>])/.source+`|["'][^"'@]*(?:(?:`+R+`)[^"'@]*)+["'])`,N=/(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*<tagAttrValue>|(?=[\s/>])))+)?/.source.replace(/<tagAttrValue>/,I),L=/(?!\d)[^\s>\/=$<%]+/.source+N+/\s*\/?>/.source,F=/\B@?/.source+"(?:"+/<([a-zA-Z][\w:]*)/.source+N+/\s*>/.source+"(?:"+(/[^<]/.source+"|"+/<\/?(?!\1\b)/.source+L+"|"+y(/<\1/.source+N+/\s*>/.source+"(?:"+(/[^<]/.source+"|"+/<\/?(?!\1\b)/.source+L+"|<self>")+")*"+/<\/\1\s*>/.source,2))+")*"+/<\/\1\s*>/.source+"|"+/</.source+L+")";n.languages.cshtml=n.languages.extend("markup",{});var H=n.languages.insertBefore("csharp","string",{html:{pattern:RegExp(F),greedy:!0,inside:n.languages.cshtml}},{csharp:n.languages.extend("csharp",{})}),z={pattern:/\S[\s\S]*/,alias:"language-csharp",inside:H},U={pattern:RegExp(/(^|[^@])/.source+T),lookbehind:!0,greedy:!0,alias:"variable",inside:{keyword:/^@/,csharp:z}};n.languages.cshtml.tag.pattern=RegExp(/<\/?/.source+L),n.languages.cshtml.tag.inside["attr-value"].pattern=RegExp(/=\s*/.source+I),n.languages.insertBefore("inside","punctuation",{value:U},n.languages.cshtml.tag.inside["attr-value"]),n.languages.insertBefore("cshtml","prolog",{"razor-comment":{pattern:/@\*[\s\S]*?\*@/,greedy:!0,alias:"comment"},block:{pattern:RegExp(/(^|[^@])@/.source+"(?:"+[w,/(?:code|functions)\s*/.source+w,/(?:for|foreach|lock|switch|using|while)\s*/.source+S+/\s*/.source+w,/do\s*/.source+w+/\s*while\s*/.source+S+/(?:\s*;)?/.source,/try\s*/.source+w+/\s*catch\s*/.source+S+/\s*/.source+w+/\s*finally\s*/.source+w,/if\s*/.source+S+/\s*/.source+w+"(?:"+/\s*else/.source+"(?:"+/\s+if\s*/.source+S+")?"+/\s*/.source+w+")*",/helper\s+\w+\s*/.source+S+/\s*/.source+w].join("|")+")"),lookbehind:!0,greedy:!0,inside:{keyword:/^@\w*/,csharp:z}},directive:{pattern:/^([ \t]*)@(?:addTagHelper|attribute|implements|inherits|inject|layout|model|namespace|page|preservewhitespace|removeTagHelper|section|tagHelperPrefix|using)(?=\s).*/m,lookbehind:!0,greedy:!0,inside:{keyword:/^@\w+/,csharp:z}},value:U,"delegate-operator":{pattern:/(^|[^@])@(?=<)/,lookbehind:!0,alias:"operator"}}),n.languages.razor=n.languages.cshtml})(s)}jsx.displayName="jsx";jsx.aliases=[];function jsx(s){s.register(javascript),s.register(markup),(function(n){var u=n.util.clone(n.languages.javascript),f=/(?:\s|\/\/.*(?!.)|\/\*(?:[^*]|\*(?!\/))\*\/)/.source,y=/(?:\{(?:\{(?:\{[^{}]*\}|[^{}])*\}|[^{}])*\})/.source,S=/(?:\{<S>*\.{3}(?:[^{}]|<BRACES>)*\})/.source;function A(T,R){return T=T.replace(/<S>/g,function(){return f}).replace(/<BRACES>/g,function(){return y}).replace(/<SPREAD>/g,function(){return S}),RegExp(T,R)}S=A(S).source,n.languages.jsx=n.languages.extend("markup",u),n.languages.jsx.tag.pattern=A(/<\/?(?:[\w.:-]+(?:<S>+(?:[\w.:$-]+(?:=(?:"(?:\\[\s\S]|[^\\"])*"|'(?:\\[\s\S]|[^\\'])*'|[^\s{'"/>=]+|<BRACES>))?|<SPREAD>))*<S>*\/?)?>/.source),n.languages.jsx.tag.inside.tag.pattern=/^<\/?[^\s>\/]*/,n.languages.jsx.tag.inside["attr-value"].pattern=/=(?!\{)(?:"(?:\\[\s\S]|[^\\"])*"|'(?:\\[\s\S]|[^\\'])*'|[^\s'">]+)/,n.languages.jsx.tag.inside.tag.inside["class-name"]=/^[A-Z]\w*(?:\.[A-Z]\w*)*$/,n.languages.jsx.tag.inside.comment=u.comment,n.languages.insertBefore("inside","attr-name",{spread:{pattern:A(/<SPREAD>/.source),inside:n.languages.jsx}},n.languages.jsx.tag),n.languages.insertBefore("inside","special-attr",{script:{pattern:A(/=<BRACES>/.source),alias:"language-javascript",inside:{"script-punctuation":{pattern:/^=(?=\{)/,alias:"punctuation"},rest:n.languages.jsx}}},n.languages.jsx.tag);var w=function(T){return T?typeof T=="string"?T:typeof T.content=="string"?T.content:T.content.map(w).join(""):""},C=function(T){for(var R=[],I=0;I<T.length;I++){var N=T[I],L=!1;if(typeof N!="string"&&(N.type==="tag"&&N.content[0]&&N.content[0].type==="tag"?N.content[0].content[0].content==="</"?R.length>0&&R[R.length-1].tagName===w(N.content[0].content[1])&&R.pop():N.content[N.content.length-1].content==="/>"||R.push({tagName:w(N.content[0].content[1]),openedBraces:0}):R.length>0&&N.type==="punctuation"&&N.content==="{"?R[R.length-1].openedBraces++:R.length>0&&R[R.length-1].openedBraces>0&&N.type==="punctuation"&&N.content==="}"?R[R.length-1].openedBraces--:L=!0),(L||typeof N=="string")&&R.length>0&&R[R.length-1].openedBraces===0){var F=w(N);I<T.length-1&&(typeof T[I+1]=="string"||T[I+1].type==="plain-text")&&(F+=w(T[I+1]),T.splice(I+1,1)),I>0&&(typeof T[I-1]=="string"||T[I-1].type==="plain-text")&&(F=w(T[I-1])+F,T.splice(I-1,1),I--),T[I]=new n.Token("plain-text",F,null,F)}N.content&&typeof N.content!="string"&&C(N.content)}};n.hooks.add("after-tokenize",function(T){T.language!=="jsx"&&T.language!=="tsx"||C(T.tokens)})})(s)}tsx.displayName="tsx";tsx.aliases=[];function tsx(s){s.register(jsx),s.register(typescript),(function(n){var u=n.util.clone(n.languages.typescript);n.languages.tsx=n.languages.extend("jsx",u),delete n.languages.tsx.parameter,delete n.languages.tsx["literal-property"];var f=n.languages.tsx.tag;f.pattern=RegExp(/(^|[^\w$]|(?=<\/))/.source+"(?:"+f.pattern.source+")",f.pattern.flags),f.lookbehind=!0})(s)}reason.displayName="reason";reason.aliases=[];function reason(s){s.register(clike),s.languages.reason=s.languages.extend("clike",{string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^\\\r\n"])*"/,greedy:!0},"class-name":/\b[A-Z]\w*/,keyword:/\b(?:and|as|assert|begin|class|constraint|do|done|downto|else|end|exception|external|for|fun|function|functor|if|in|include|inherit|initializer|lazy|let|method|module|mutable|new|nonrec|object|of|open|or|private|rec|sig|struct|switch|then|to|try|type|val|virtual|when|while|with)\b/,operator:/\.{3}|:[:=]|\|>|->|=(?:==?|>)?|<=?|>=?|[|^?'#!~`]|[+\-*\/]\.?|\b(?:asr|land|lor|lsl|lsr|lxor|mod)\b/}),s.languages.insertBefore("reason","class-name",{char:{pattern:/'(?:\\x[\da-f]{2}|\\o[0-3][0-7][0-7]|\\\d{3}|\\.|[^'\\\r\n])'/,greedy:!0},constructor:/\b[A-Z]\w*\b(?!\s*\.)/,label:{pattern:/\b[a-z]\w*(?=::)/,alias:"symbol"}}),delete s.languages.reason.function}rego.displayName="rego";rego.aliases=[];function rego(s){s.languages.rego={comment:/#.*/,property:{pattern:/(^|[^\\.])(?:"(?:\\.|[^\\"\r\n])*"|`[^`]*`|\b[a-z_]\w*\b)(?=\s*:(?!=))/i,lookbehind:!0,greedy:!0},string:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"|`[^`]*`/,lookbehind:!0,greedy:!0},keyword:/\b(?:as|default|else|import|not|null|package|set(?=\s*\()|some|with)\b/,boolean:/\b(?:false|true)\b/,function:{pattern:/\b[a-z_]\w*\b(?:\s*\.\s*\b[a-z_]\w*\b)*(?=\s*\()/i,inside:{namespace:/\b\w+\b(?=\s*\.)/,punctuation:/\./}},number:/-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,operator:/[-+*/%|&]|[<>:=]=?|!=|\b_\b/,punctuation:/[,;.\[\]{}()]/}}renpy.displayName="renpy";renpy.aliases=["rpy"];function renpy(s){s.languages.renpy={comment:{pattern:/(^|[^\\])#.+/,lookbehind:!0},string:{pattern:/("""|''')[\s\S]+?\1|("|')(?:\\.|(?!\2)[^\\])*\2|(?:^#?(?:(?:[0-9a-fA-F]){3}|[0-9a-fA-F]{6})$)/m,greedy:!0},function:/\b[a-z_]\w*(?=\()/i,property:/\b(?:Update|UpdateVersion|action|activate_sound|adv_nvl_transition|after_load_transition|align|alpha|alt|anchor|antialias|area|auto|background|bar_invert|bar_resizing|bar_vertical|black_color|bold|bottom_bar|bottom_gutter|bottom_margin|bottom_padding|box_reverse|box_wrap|can_update|caret|child|color|crop|default_afm_enable|default_afm_time|default_fullscreen|default_text_cps|developer|directory_name|drag_handle|drag_joined|drag_name|drag_raise|draggable|dragged|drop_shadow|drop_shadow_color|droppable|dropped|easein|easeout|edgescroll|end_game_transition|end_splash_transition|enter_replay_transition|enter_sound|enter_transition|enter_yesno_transition|executable_name|exit_replay_transition|exit_sound|exit_transition|exit_yesno_transition|fadein|fadeout|first_indent|first_spacing|fit_first|focus|focus_mask|font|foreground|game_main_transition|get_installed_packages|google_play_key|google_play_salt|ground|has_music|has_sound|has_voice|height|help|hinting|hover|hover_background|hover_color|hover_sound|hovered|hyperlink_functions|idle|idle_color|image_style|include_update|insensitive|insensitive_background|insensitive_color|inside|intra_transition|italic|justify|kerning|keyboard_focus|language|layer_clipping|layers|layout|left_bar|left_gutter|left_margin|left_padding|length|line_leading|line_overlap_split|line_spacing|linear|main_game_transition|main_menu_music|maximum|min_width|minimum|minwidth|modal|mouse|mousewheel|name|narrator_menu|newline_indent|nvl_adv_transition|offset|order_reverse|outlines|overlay_functions|pos|position|prefix|radius|range|rest_indent|right_bar|right_gutter|right_margin|right_padding|rotate|rotate_pad|ruby_style|sample_sound|save_directory|say_attribute_transition|screen_height|screen_width|scrollbars|selected_hover|selected_hover_color|selected_idle|selected_idle_color|selected_insensitive|show_side_image|show_two_window|side_spacing|side_xpos|side_ypos|size|size_group|slow_cps|slow_cps_multiplier|spacing|strikethrough|subpixel|text_align|text_style|text_xpos|text_y_fudge|text_ypos|thumb|thumb_offset|thumb_shadow|thumbnail_height|thumbnail_width|time|top_bar|top_gutter|top_margin|top_padding|translations|underline|unscrollable|update|value|version|version_name|version_tuple|vertical|width|window_hide_transition|window_icon|window_left_padding|window_show_transition|window_title|windows_icon|xadjustment|xalign|xanchor|xanchoraround|xaround|xcenter|xfill|xinitial|xmargin|xmaximum|xminimum|xoffset|xofsset|xpadding|xpos|xsize|xzoom|yadjustment|yalign|yanchor|yanchoraround|yaround|ycenter|yfill|yinitial|ymargin|ymaximum|yminimum|yoffset|ypadding|ypos|ysize|ysizexysize|yzoom|zoom|zorder)\b/,tag:/\b(?:bar|block|button|buttoscreenn|drag|draggroup|fixed|frame|grid|[hv]box|hotbar|hotspot|image|imagebutton|imagemap|input|key|label|menu|mm_menu_frame|mousearea|nvl|parallel|screen|self|side|tag|text|textbutton|timer|vbar|viewport|window)\b|\$/,keyword:/\b(?:None|add|adjustment|alignaround|allow|angle|animation|around|as|assert|behind|box_layout|break|build|cache|call|center|changed|child_size|choice|circles|class|clear|clicked|clipping|clockwise|config|contains|continue|corner1|corner2|counterclockwise|def|default|define|del|delay|disabled|disabled_text|dissolve|elif|else|event|except|exclude|exec|expression|fade|finally|for|from|function|global|gm_root|has|hide|id|if|import|in|init|is|jump|knot|lambda|left|less_rounded|mm_root|movie|music|null|on|onlayer|pass|pause|persistent|play|print|python|queue|raise|random|renpy|repeat|return|right|rounded_window|scene|scope|set|show|slow|slow_abortable|slow_done|sound|stop|store|style|style_group|substitute|suffix|theme|transform|transform_anchor|transpose|try|ui|unhovered|updater|use|voice|while|widget|widget_hover|widget_selected|widget_text|yield)\b/,boolean:/\b(?:[Ff]alse|[Tt]rue)\b/,number:/(?:\b(?:0[bo])?(?:(?:\d|0x[\da-f])[\da-f]*(?:\.\d*)?)|\B\.\d+)(?:e[+-]?\d+)?j?/i,operator:/[-+%=]=?|!=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]|\b(?:and|at|not|or|with)\b/,punctuation:/[{}[\];(),.:]/},s.languages.rpy=s.languages.renpy}rescript.displayName="rescript";rescript.aliases=["res"];function rescript(s){s.languages.rescript={comment:{pattern:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},char:{pattern:/'(?:[^\r\n\\]|\\(?:.|\w+))'/,greedy:!0},string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^\\\r\n"])*"/,greedy:!0},"class-name":/\b[A-Z]\w*|@[a-z.]*|#[A-Za-z]\w*|#\d/,function:{pattern:/[a-zA-Z]\w*(?=\()|(\.)[a-z]\w*/,lookbehind:!0},number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,boolean:/\b(?:false|true)\b/,"attr-value":/[A-Za-z]\w*(?==)/,constant:{pattern:/(\btype\s+)[a-z]\w*/,lookbehind:!0},tag:{pattern:/(<)[a-z]\w*|(?:<\/)[a-z]\w*/,lookbehind:!0,inside:{operator:/<|>|\//}},keyword:/\b(?:and|as|assert|begin|bool|class|constraint|do|done|downto|else|end|exception|external|float|for|fun|function|if|in|include|inherit|initializer|int|lazy|let|method|module|mutable|new|nonrec|object|of|open|or|private|rec|string|switch|then|to|try|type|when|while|with)\b/,operator:/\.{3}|:[:=]?|\|>|->|=(?:==?|>)?|<=?|>=?|[|^?'#!~`]|[+\-*\/]\.?|\b(?:asr|land|lor|lsl|lsr|lxor|mod)\b/,punctuation:/[(){}[\],;.]/},s.languages.insertBefore("rescript","string",{"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"tag"},rest:s.languages.rescript}},string:/[\s\S]+/}}}),s.languages.res=s.languages.rescript}rest.displayName="rest";rest.aliases=[];function rest(s){s.languages.rest={table:[{pattern:/(^[\t ]*)(?:\+[=-]+)+\+(?:\r?\n|\r)(?:\1[+|].+[+|](?:\r?\n|\r))+\1(?:\+[=-]+)+\+/m,lookbehind:!0,inside:{punctuation:/\||(?:\+[=-]+)+\+/}},{pattern:/(^[\t ]*)=+ [ =]*=(?:(?:\r?\n|\r)\1.+)+(?:\r?\n|\r)\1=+ [ =]*=(?=(?:\r?\n|\r){2}|\s*$)/m,lookbehind:!0,inside:{punctuation:/[=-]+/}}],"substitution-def":{pattern:/(^[\t ]*\.\. )\|(?:[^|\s](?:[^|]*[^|\s])?)\| [^:]+::/m,lookbehind:!0,inside:{substitution:{pattern:/^\|(?:[^|\s]|[^|\s][^|]*[^|\s])\|/,alias:"attr-value",inside:{punctuation:/^\||\|$/}},directive:{pattern:/( )(?! )[^:]+::/,lookbehind:!0,alias:"function",inside:{punctuation:/::$/}}}},"link-target":[{pattern:/(^[\t ]*\.\. )\[[^\]]+\]/m,lookbehind:!0,alias:"string",inside:{punctuation:/^\[|\]$/}},{pattern:/(^[\t ]*\.\. )_(?:`[^`]+`|(?:[^:\\]|\\.)+):/m,lookbehind:!0,alias:"string",inside:{punctuation:/^_|:$/}}],directive:{pattern:/(^[\t ]*\.\. )[^:]+::/m,lookbehind:!0,alias:"function",inside:{punctuation:/::$/}},comment:{pattern:/(^[\t ]*\.\.)(?:(?: .+)?(?:(?:\r?\n|\r).+)+| .+)(?=(?:\r?\n|\r){2}|$)/m,lookbehind:!0},title:[{pattern:/^(([!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~])\2+)(?:\r?\n|\r).+(?:\r?\n|\r)\1$/m,inside:{punctuation:/^[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~]+|[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~]+$/,important:/.+/}},{pattern:/(^|(?:\r?\n|\r){2}).+(?:\r?\n|\r)([!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~])\2+(?=\r?\n|\r|$)/,lookbehind:!0,inside:{punctuation:/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~]+$/,important:/.+/}}],hr:{pattern:/((?:\r?\n|\r){2})([!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~])\2{3,}(?=(?:\r?\n|\r){2})/,lookbehind:!0,alias:"punctuation"},field:{pattern:/(^[\t ]*):[^:\r\n]+:(?= )/m,lookbehind:!0,alias:"attr-name"},"command-line-option":{pattern:/(^[\t ]*)(?:[+-][a-z\d]|(?:--|\/)[a-z\d-]+)(?:[ =](?:[a-z][\w-]*|<[^<>]+>))?(?:, (?:[+-][a-z\d]|(?:--|\/)[a-z\d-]+)(?:[ =](?:[a-z][\w-]*|<[^<>]+>))?)*(?=(?:\r?\n|\r)? {2,}\S)/im,lookbehind:!0,alias:"symbol"},"literal-block":{pattern:/::(?:\r?\n|\r){2}([ \t]+)(?![ \t]).+(?:(?:\r?\n|\r)\1.+)*/,inside:{"literal-block-punctuation":{pattern:/^::/,alias:"punctuation"}}},"quoted-literal-block":{pattern:/::(?:\r?\n|\r){2}([!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~]).*(?:(?:\r?\n|\r)\1.*)*/,inside:{"literal-block-punctuation":{pattern:/^(?:::|([!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~])\1*)/m,alias:"punctuation"}}},"list-bullet":{pattern:/(^[\t ]*)(?:[*+\-]|\(?(?:\d+|[a-z]|[ivxdclm]+)\)|(?:\d+|[a-z]|[ivxdclm]+)\.)(?= )/im,lookbehind:!0,alias:"punctuation"},"doctest-block":{pattern:/(^[\t ]*)>>> .+(?:(?:\r?\n|\r).+)*/m,lookbehind:!0,inside:{punctuation:/^>>>/}},inline:[{pattern:/(^|[\s\-:\/'"<(\[{])(?::[^:]+:`.*?`|`.*?`:[^:]+:|(\*\*?|``?|\|)(?!\s)(?:(?!\2).)*\S\2(?=[\s\-.,:;!?\\\/'")\]}]|$))/m,lookbehind:!0,inside:{bold:{pattern:/(^\*\*).+(?=\*\*$)/,lookbehind:!0},italic:{pattern:/(^\*).+(?=\*$)/,lookbehind:!0},"inline-literal":{pattern:/(^``).+(?=``$)/,lookbehind:!0,alias:"symbol"},role:{pattern:/^:[^:]+:|:[^:]+:$/,alias:"function",inside:{punctuation:/^:|:$/}},"interpreted-text":{pattern:/(^`).+(?=`$)/,lookbehind:!0,alias:"attr-value"},substitution:{pattern:/(^\|).+(?=\|$)/,lookbehind:!0,alias:"attr-value"},punctuation:/\*\*?|``?|\|/}}],link:[{pattern:/\[[^\[\]]+\]_(?=[\s\-.,:;!?\\\/'")\]}]|$)/,alias:"string",inside:{punctuation:/^\[|\]_$/}},{pattern:/(?:\b[a-z\d]+(?:[_.:+][a-z\d]+)*_?_|`[^`]+`_?_|_`[^`]+`)(?=[\s\-.,:;!?\\\/'")\]}]|$)/i,alias:"string",inside:{punctuation:/^_?`|`$|`?_?_$/}}],punctuation:{pattern:/(^[\t ]*)(?:\|(?= |$)|(?:---?||\.\.|__)(?= )|\.\.$)/m,lookbehind:!0}}}rip.displayName="rip";rip.aliases=[];function rip(s){s.languages.rip={comment:{pattern:/#.*/,greedy:!0},char:{pattern:/\B`[^\s`'",.:;#\/\\()<>\[\]{}]\b/,greedy:!0},string:{pattern:/("|')(?:\\.|(?!\1)[^\\\r\n])*\1/,greedy:!0},regex:{pattern:/(^|[^/])\/(?!\/)(?:\[[^\n\r\]]*\]|\\.|[^/\\\r\n\[])+\/(?=\s*(?:$|[\r\n,.;})]))/,lookbehind:!0,greedy:!0},keyword:/(?:=>|->)|\b(?:case|catch|class|else|exit|finally|if|raise|return|switch|try)\b/,builtin:/@|\bSystem\b/,boolean:/\b(?:false|true)\b/,date:/\b\d{4}-\d{2}-\d{2}\b/,time:/\b\d{2}:\d{2}:\d{2}\b/,datetime:/\b\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\b/,symbol:/:[^\d\s`'",.:;#\/\\()<>\[\]{}][^\s`'",.:;#\/\\()<>\[\]{}]*/,number:/[+-]?\b(?:\d+\.\d+|\d+)\b/,punctuation:/(?:\.{2,3})|[`,.:;=\/\\()<>\[\]{}]/,reference:/[^\d\s`'",.:;#\/\\()<>\[\]{}][^\s`'",.:;#\/\\()<>\[\]{}]*/}}roboconf.displayName="roboconf";roboconf.aliases=[];function roboconf(s){s.languages.roboconf={comment:/#.*/,keyword:{pattern:/(^|\s)(?:(?:external|import)\b|(?:facet|instance of)(?=[ \t]+[\w-]+[ \t]*\{))/,lookbehind:!0},component:{pattern:/[\w-]+(?=[ \t]*\{)/,alias:"variable"},property:/[\w.-]+(?=[ \t]*:)/,value:{pattern:/(=[ \t]*(?![ \t]))[^,;]+/,lookbehind:!0,alias:"attr-value"},optional:{pattern:/\(optional\)/,alias:"builtin"},wildcard:{pattern:/(\.)\*/,lookbehind:!0,alias:"operator"},punctuation:/[{},.;:=]/}}robotframework.displayName="robotframework";robotframework.aliases=["robot"];function robotframework(s){(function(n){var u={pattern:/(^[ \t]*| {2}|\t)#.*/m,lookbehind:!0,greedy:!0},f={pattern:/((?:^|[^\\])(?:\\{2})*)[$@&%]\{(?:[^{}\r\n]|\{[^{}\r\n]*\})*\}/,lookbehind:!0,inside:{punctuation:/^[$@&%]\{|\}$/}};function y(C,T){var R={};R["section-header"]={pattern:/^ ?\*{3}.+?\*{3}/,alias:"keyword"};for(var I in T)R[I]=T[I];return R.tag={pattern:/([\r\n](?: {2}|\t)[ \t]*)\[[-\w]+\]/,lookbehind:!0,inside:{punctuation:/\[|\]/}},R.variable=f,R.comment=u,{pattern:RegExp(/^ ?\*{3}[ \t]*<name>[ \t]*\*{3}(?:.|[\r\n](?!\*{3}))*/.source.replace(/<name>/g,function(){return C}),"im"),alias:"section",inside:R}}var S={pattern:/(\[Documentation\](?: {2}|\t)[ \t]*)(?![ \t]|#)(?:.|(?:\r\n?|\n)[ \t]*\.{3})+/,lookbehind:!0,alias:"string"},A={pattern:/([\r\n] ?)(?!#)(?:\S(?:[ \t]\S)*)+/,lookbehind:!0,alias:"function",inside:{variable:f}},w={pattern:/([\r\n](?: {2}|\t)[ \t]*)(?!\[|\.{3}|#)(?:\S(?:[ \t]\S)*)+/,lookbehind:!0,inside:{variable:f}};n.languages.robotframework={settings:y("Settings",{documentation:{pattern:/([\r\n] ?Documentation(?: {2}|\t)[ \t]*)(?![ \t]|#)(?:.|(?:\r\n?|\n)[ \t]*\.{3})+/,lookbehind:!0,alias:"string"},property:{pattern:/([\r\n] ?)(?!\.{3}|#)(?:\S(?:[ \t]\S)*)+/,lookbehind:!0}}),variables:y("Variables"),"test-cases":y("Test Cases",{"test-name":A,documentation:S,property:w}),keywords:y("Keywords",{"keyword-name":A,documentation:S,property:w}),tasks:y("Tasks",{"task-name":A,documentation:S,property:w}),comment:u},n.languages.robot=n.languages.robotframework})(s)}rust.displayName="rust";rust.aliases=[];function rust(s){(function(n){for(var u=/\/\*(?:[^*/]|\*(?!\/)|\/(?!\*)|<self>)*\*\//.source,f=0;f<2;f++)u=u.replace(/<self>/g,function(){return u});u=u.replace(/<self>/g,function(){return/[^\s\S]/.source}),n.languages.rust={comment:[{pattern:RegExp(/(^|[^\\])/.source+u),lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/b?"(?:\\[\s\S]|[^\\"])*"|b?r(#*)"(?:[^"]|"(?!\1))*"\1/,greedy:!0},char:{pattern:/b?'(?:\\(?:x[0-7][\da-fA-F]|u\{(?:[\da-fA-F]_*){1,6}\}|.)|[^\\\r\n\t'])'/,greedy:!0},attribute:{pattern:/#!?\[(?:[^\[\]"]|"(?:\\[\s\S]|[^\\"])*")*\]/,greedy:!0,alias:"attr-name",inside:{string:null}},"closure-params":{pattern:/([=(,:]\s*|\bmove\s*)\|[^|]*\||\|[^|]*\|(?=\s*(?:\{|->))/,lookbehind:!0,greedy:!0,inside:{"closure-punctuation":{pattern:/^\||\|$/,alias:"punctuation"},rest:null}},"lifetime-annotation":{pattern:/'\w+/,alias:"symbol"},"fragment-specifier":{pattern:/(\$\w+:)[a-z]+/,lookbehind:!0,alias:"punctuation"},variable:/\$\w+/,"function-definition":{pattern:/(\bfn\s+)\w+/,lookbehind:!0,alias:"function"},"type-definition":{pattern:/(\b(?:enum|struct|trait|type|union)\s+)\w+/,lookbehind:!0,alias:"class-name"},"module-declaration":[{pattern:/(\b(?:crate|mod)\s+)[a-z][a-z_\d]*/,lookbehind:!0,alias:"namespace"},{pattern:/(\b(?:crate|self|super)\s*)::\s*[a-z][a-z_\d]*\b(?:\s*::(?:\s*[a-z][a-z_\d]*\s*::)*)?/,lookbehind:!0,alias:"namespace",inside:{punctuation:/::/}}],keyword:[/\b(?:Self|abstract|as|async|await|become|box|break|const|continue|crate|do|dyn|else|enum|extern|final|fn|for|if|impl|in|let|loop|macro|match|mod|move|mut|override|priv|pub|ref|return|self|static|struct|super|trait|try|type|typeof|union|unsafe|unsized|use|virtual|where|while|yield)\b/,/\b(?:bool|char|f(?:32|64)|[ui](?:8|16|32|64|128|size)|str)\b/],function:/\b[a-z_]\w*(?=\s*(?:::\s*<|\())/,macro:{pattern:/\b\w+!/,alias:"property"},constant:/\b[A-Z_][A-Z_\d]+\b/,"class-name":/\b[A-Z]\w*\b/,namespace:{pattern:/(?:\b[a-z][a-z_\d]*\s*::\s*)*\b[a-z][a-z_\d]*\s*::(?!\s*<)/,inside:{punctuation:/::/}},number:/\b(?:0x[\dA-Fa-f](?:_?[\dA-Fa-f])*|0o[0-7](?:_?[0-7])*|0b[01](?:_?[01])*|(?:(?:\d(?:_?\d)*)?\.)?\d(?:_?\d)*(?:[Ee][+-]?\d+)?)(?:_?(?:f32|f64|[iu](?:8|16|32|64|size)?))?\b/,boolean:/\b(?:false|true)\b/,punctuation:/->|\.\.=|\.{1,3}|::|[{}[\];(),:]/,operator:/[-+*\/%!^]=?|=[=>]?|&[&=]?|\|[|=]?|<<?=?|>>?=?|[@?]/},n.languages.rust["closure-params"].inside.rest=n.languages.rust,n.languages.rust.attribute.inside.string=n.languages.rust.string})(s)}sas.displayName="sas";sas.aliases=[];function sas(s){(function(n){var u=/(?:"(?:""|[^"])*"(?!")|'(?:''|[^'])*'(?!'))/.source,f=/\b(?:\d[\da-f]*x|\d+(?:\.\d+)?(?:e[+-]?\d+)?)\b/i,y={pattern:RegExp(u+"[bx]"),alias:"number"},S={pattern:/&[a-z_]\w*/i},A={pattern:/((?:^|\s|=|\())%(?:ABORT|BY|CMS|COPY|DISPLAY|DO|ELSE|END|EVAL|GLOBAL|GO|GOTO|IF|INC|INCLUDE|INDEX|INPUT|KTRIM|LENGTH|LET|LIST|LOCAL|PUT|QKTRIM|QSCAN|QSUBSTR|QSYSFUNC|QUPCASE|RETURN|RUN|SCAN|SUBSTR|SUPERQ|SYMDEL|SYMEXIST|SYMGLOBL|SYMLOCAL|SYSCALL|SYSEVALF|SYSEXEC|SYSFUNC|SYSGET|SYSRPUT|THEN|TO|TSO|UNQUOTE|UNTIL|UPCASE|WHILE|WINDOW)\b/i,lookbehind:!0,alias:"keyword"},w={pattern:/(^|\s)(?:proc\s+\w+|data(?!=)|quit|run)\b/i,alias:"keyword",lookbehind:!0},C=[/\/\*[\s\S]*?\*\//,{pattern:/(^[ \t]*|;\s*)\*[^;]*;/m,lookbehind:!0}],T={pattern:RegExp(u),greedy:!0},R=/[$%@.(){}\[\];,\\]/,I={pattern:/%?\b\w+(?=\()/,alias:"keyword"},N={function:I,"arg-value":{pattern:/(=\s*)[A-Z\.]+/i,lookbehind:!0},operator:/=/,"macro-variable":S,arg:{pattern:/[A-Z]+/i,alias:"keyword"},number:f,"numeric-constant":y,punctuation:R,string:T},L={pattern:/\b(?:format|put)\b=?[\w'$.]+/i,inside:{keyword:/^(?:format|put)(?==)/i,equals:/=/,format:{pattern:/(?:\w|\$\d)+\.\d?/,alias:"number"}}},F={pattern:/\b(?:format|put)\s+[\w']+(?:\s+[$.\w]+)+(?=;)/i,inside:{keyword:/^(?:format|put)/i,format:{pattern:/[\w$]+\.\d?/,alias:"number"}}},H={pattern:/((?:^|\s)=?)(?:catname|checkpoint execute_always|dm|endsas|filename|footnote|%include|libname|%list|lock|missing|options|page|resetline|%run|sasfile|skip|sysecho|title\d?)\b/i,lookbehind:!0,alias:"keyword"},z={pattern:/(^|\s)(?:submit(?:\s+(?:load|norun|parseonly))?|endsubmit)\b/i,lookbehind:!0,alias:"keyword"},U=/aStore|accessControl|aggregation|audio|autotune|bayesianNetClassifier|bioMedImage|boolRule|builtins|cardinality|cdm|clustering|conditionalRandomFields|configuration|copula|countreg|dataDiscovery|dataPreprocess|dataSciencePilot|dataStep|decisionTree|deduplication|deepLearn|deepNeural|deepRnn|ds2|ecm|entityRes|espCluster|explainModel|factmac|fastKnn|fcmpact|fedSql|freqTab|gVarCluster|gam|gleam|graphSemiSupLearn|hiddenMarkovModel|hyperGroup|ica|image|iml|kernalPca|langModel|ldaTopic|loadStreams|mbc|mixed|mlTools|modelPublishing|network|neuralNet|nmf|nonParametricBayes|nonlinear|optNetwork|optimization|panel|pca|percentile|phreg|pls|qkb|qlim|quantreg|recommend|regression|reinforcementLearn|robustPca|ruleMining|sampling|sandwich|sccasl|search(?:Analytics)?|sentimentAnalysis|sequence|session(?:Prop)?|severity|simSystem|simple|smartData|sparkEmbeddedProcess|sparseML|spatialreg|spc|stabilityMonitoring|svDataDescription|svm|table|text(?:Filters|Frequency|Mining|Parse|Rule(?:Develop|Score)|Topic|Util)|timeData|transpose|tsInfo|tsReconcile|uniTimeSeries|varReduce/.source,G={pattern:RegExp(/(^|\s)(?:action\s+)?(?:<act>)\.[a-z]+\b[^;]+/.source.replace(/<act>/g,function(){return U}),"i"),lookbehind:!0,inside:{keyword:RegExp(/(?:<act>)\.[a-z]+\b/.source.replace(/<act>/g,function(){return U}),"i"),action:{pattern:/(?:action)/i,alias:"keyword"},comment:C,function:I,"arg-value":N["arg-value"],operator:N.operator,argument:N.arg,number:f,"numeric-constant":y,punctuation:R,string:T}},Y={pattern:/((?:^|\s)=?)(?:after|analysis|and|array|barchart|barwidth|begingraph|by|call|cas|cbarline|cfill|class(?:lev)?|close|column|computed?|contains|continue|data(?==)|define|delete|describe|document|do\s+over|do|dol|drop|dul|else|end(?:comp|source)?|entryTitle|eval(?:uate)?|exec(?:ute)?|exit|file(?:name)?|fill(?:attrs)?|flist|fnc|function(?:list)?|global|goto|group(?:by)?|headline|headskip|histogram|if|infile|keep|keylabel|keyword|label|layout|leave|legendlabel|length|libname|loadactionset|merge|midpoints|_?null_|name|noobs|nowd|ods|options|or|otherwise|out(?:put)?|over(?:lay)?|plot|print|put|raise|ranexp|rannor|rbreak|retain|return|select|session|sessref|set|source|statgraph|sum|summarize|table|temp|terminate|then\s+do|then|title\d?|to|var|when|where|xaxisopts|y2axisopts|yaxisopts)\b/i,lookbehind:!0};n.languages.sas={datalines:{pattern:/^([ \t]*)(?:cards|(?:data)?lines);[\s\S]+?^[ \t]*;/im,lookbehind:!0,alias:"string",inside:{keyword:{pattern:/^(?:cards|(?:data)?lines)/i},punctuation:/;/}},"proc-sql":{pattern:/(^proc\s+(?:fed)?sql(?:\s+[\w|=]+)?;)[\s\S]+?(?=^(?:proc\s+\w+|data|quit|run);|(?![\s\S]))/im,lookbehind:!0,inside:{sql:{pattern:RegExp(/^[ \t]*(?:select|alter\s+table|(?:create|describe|drop)\s+(?:index|table(?:\s+constraints)?|view)|create\s+unique\s+index|insert\s+into|update)(?:<str>|[^;"'])+;/.source.replace(/<str>/g,function(){return u}),"im"),alias:"language-sql",inside:n.languages.sql},"global-statements":H,"sql-statements":{pattern:/(^|\s)(?:disconnect\s+from|begin|commit|exec(?:ute)?|reset|rollback|validate)\b/i,lookbehind:!0,alias:"keyword"},number:f,"numeric-constant":y,punctuation:R,string:T}},"proc-groovy":{pattern:/(^proc\s+groovy(?:\s+[\w|=]+)?;)[\s\S]+?(?=^(?:proc\s+\w+|data|quit|run);|(?![\s\S]))/im,lookbehind:!0,inside:{comment:C,groovy:{pattern:RegExp(/(^[ \t]*submit(?:\s+(?:load|norun|parseonly))?)(?:<str>|[^"'])+?(?=endsubmit;)/.source.replace(/<str>/g,function(){return u}),"im"),lookbehind:!0,alias:"language-groovy",inside:n.languages.groovy},keyword:Y,"submit-statement":z,"global-statements":H,number:f,"numeric-constant":y,punctuation:R,string:T}},"proc-lua":{pattern:/(^proc\s+lua(?:\s+[\w|=]+)?;)[\s\S]+?(?=^(?:proc\s+\w+|data|quit|run);|(?![\s\S]))/im,lookbehind:!0,inside:{comment:C,lua:{pattern:RegExp(/(^[ \t]*submit(?:\s+(?:load|norun|parseonly))?)(?:<str>|[^"'])+?(?=endsubmit;)/.source.replace(/<str>/g,function(){return u}),"im"),lookbehind:!0,alias:"language-lua",inside:n.languages.lua},keyword:Y,"submit-statement":z,"global-statements":H,number:f,"numeric-constant":y,punctuation:R,string:T}},"proc-cas":{pattern:/(^proc\s+cas(?:\s+[\w|=]+)?;)[\s\S]+?(?=^(?:proc\s+\w+|quit|data);|(?![\s\S]))/im,lookbehind:!0,inside:{comment:C,"statement-var":{pattern:/((?:^|\s)=?)saveresult\s[^;]+/im,lookbehind:!0,inside:{statement:{pattern:/^saveresult\s+\S+/i,inside:{keyword:/^(?:saveresult)/i}},rest:N}},"cas-actions":G,statement:{pattern:/((?:^|\s)=?)(?:default|(?:un)?set|on|output|upload)[^;]+/im,lookbehind:!0,inside:N},step:w,keyword:Y,function:I,format:L,altformat:F,"global-statements":H,number:f,"numeric-constant":y,punctuation:R,string:T}},"proc-args":{pattern:RegExp(/(^proc\s+\w+\s+)(?!\s)(?:[^;"']|<str>)+;/.source.replace(/<str>/g,function(){return u}),"im"),lookbehind:!0,inside:N},"macro-keyword":A,"macro-variable":S,"macro-string-functions":{pattern:/((?:^|\s|=))%(?:BQUOTE|NRBQUOTE|NRQUOTE|NRSTR|QUOTE|STR)\(.*?(?:[^%]\))/i,lookbehind:!0,inside:{function:{pattern:/%(?:BQUOTE|NRBQUOTE|NRQUOTE|NRSTR|QUOTE|STR)/i,alias:"keyword"},"macro-keyword":A,"macro-variable":S,"escaped-char":{pattern:/%['"()<>=^~;,#]/},punctuation:R}},"macro-declaration":{pattern:/^%macro[^;]+(?=;)/im,inside:{keyword:/%macro/i}},"macro-end":{pattern:/^%mend[^;]+(?=;)/im,inside:{keyword:/%mend/i}},macro:{pattern:/%_\w+(?=\()/,alias:"keyword"},input:{pattern:/\binput\s[-\w\s/*.$&]+;/i,inside:{input:{alias:"keyword",pattern:/^input/i},comment:C,number:f,"numeric-constant":y}},"options-args":{pattern:/(^options)[-'"|/\\<>*+=:()\w\s]*(?=;)/im,lookbehind:!0,inside:N},"cas-actions":G,comment:C,function:I,format:L,altformat:F,"numeric-constant":y,datetime:{pattern:RegExp(u+"(?:dt?|t)"),alias:"number"},string:T,step:w,keyword:Y,"operator-keyword":{pattern:/\b(?:eq|ge|gt|in|le|lt|ne|not)\b/i,alias:"operator"},number:f,operator:/\*\*?|\|\|?|!!?|?|<[>=]?|>[<=]?|[-+\/=&]|[~^]=?/,punctuation:R}})(s)}sass.displayName="sass";sass.aliases=[];function sass(s){s.register(css),(function(n){n.languages.sass=n.languages.extend("css",{comment:{pattern:/^([ \t]*)\/[\/*].*(?:(?:\r?\n|\r)\1[ \t].+)*/m,lookbehind:!0,greedy:!0}}),n.languages.insertBefore("sass","atrule",{"atrule-line":{pattern:/^(?:[ \t]*)[@+=].+/m,greedy:!0,inside:{atrule:/(?:@[\w-]+|[+=])/}}}),delete n.languages.sass.atrule;var u=/\$[-\w]+|#\{\$[-\w]+\}/,f=[/[+*\/%]|[=!]=|<=?|>=?|\b(?:and|not|or)\b/,{pattern:/(\s)-(?=\s)/,lookbehind:!0}];n.languages.insertBefore("sass","property",{"variable-line":{pattern:/^[ \t]*\$.+/m,greedy:!0,inside:{punctuation:/:/,variable:u,operator:f}},"property-line":{pattern:/^[ \t]*(?:[^:\s]+ *:.*|:[^:\s].*)/m,greedy:!0,inside:{property:[/[^:\s]+(?=\s*:)/,{pattern:/(:)[^:\s]+/,lookbehind:!0}],punctuation:/:/,variable:u,operator:f,important:n.languages.sass.important}}}),delete n.languages.sass.property,delete n.languages.sass.important,n.languages.insertBefore("sass","punctuation",{selector:{pattern:/^([ \t]*)\S(?:,[^,\r\n]+|[^,\r\n]*)(?:,[^,\r\n]+)*(?:,(?:\r?\n|\r)\1[ \t]+\S(?:,[^,\r\n]+|[^,\r\n]*)(?:,[^,\r\n]+)*)*/m,lookbehind:!0,greedy:!0}})})(s)}shellSession.displayName="shell-session";shellSession.aliases=["sh-session","shellsession"];function shellSession(s){s.register(bash),(function(n){var u=[/"(?:\\[\s\S]|\$\([^)]+\)|\$(?!\()|`[^`]+`|[^"\\`$])*"/.source,/'[^']*'/.source,/\$'(?:[^'\\]|\\[\s\S])*'/.source,/<<-?\s*(["']?)(\w+)\1\s[\s\S]*?[\r\n]\2/.source].join("|");n.languages["shell-session"]={command:{pattern:RegExp(/^/.source+"(?:"+(/[^\s@:$#%*!/\\]+@[^\r\n@:$#%*!/\\]+(?::[^\0-\x1F$#%*?"<>:;|]+)?/.source+"|"+/[/~.][^\0-\x1F$#%*?"<>@:;|]*/.source)+")?"+/[$#%](?=\s)/.source+/(?:[^\\\r\n \t'"<$]|[ \t](?:(?!#)|#.*$)|\\(?:[^\r]|\r\n?)|\$(?!')|<(?!<)|<<str>>)+/.source.replace(/<<str>>/g,function(){return u}),"m"),greedy:!0,inside:{info:{pattern:/^[^#$%]+/,alias:"punctuation",inside:{user:/^[^\s@:$#%*!/\\]+@[^\r\n@:$#%*!/\\]+/,punctuation:/:/,path:/[\s\S]+/}},bash:{pattern:/(^[$#%]\s*)\S[\s\S]*/,lookbehind:!0,alias:"language-bash",inside:n.languages.bash},"shell-symbol":{pattern:/^[$#%]/,alias:"important"}}},output:/.(?:.*(?:[\r\n]|.$))*/},n.languages["sh-session"]=n.languages.shellsession=n.languages["shell-session"]})(s)}smali.displayName="smali";smali.aliases=[];function smali(s){s.languages.smali={comment:/#.*/,string:{pattern:/"(?:[^\r\n\\"]|\\.)*"|'(?:[^\r\n\\']|\\(?:.|u[\da-fA-F]{4}))'/,greedy:!0},"class-name":{pattern:/(^|[^L])L(?:(?:\w+|`[^`\r\n]*`)\/)*(?:[\w$]+|`[^`\r\n]*`)(?=\s*;)/,lookbehind:!0,inside:{"class-name":{pattern:/(^L|\/)(?:[\w$]+|`[^`\r\n]*`)$/,lookbehind:!0},namespace:{pattern:/^(L)(?:(?:\w+|`[^`\r\n]*`)\/)+/,lookbehind:!0,inside:{punctuation:/\//}},builtin:/^L/}},builtin:[{pattern:/([();\[])[BCDFIJSVZ]+/,lookbehind:!0},{pattern:/([\w$>]:)[BCDFIJSVZ]/,lookbehind:!0}],keyword:[{pattern:/(\.end\s+)[\w-]+/,lookbehind:!0},{pattern:/(^|[^\w.-])\.(?!\d)[\w-]+/,lookbehind:!0},{pattern:/(^|[^\w.-])(?:abstract|annotation|bridge|constructor|enum|final|interface|private|protected|public|runtime|static|synthetic|system|transient)(?![\w.-])/,lookbehind:!0}],function:{pattern:/(^|[^\w.-])(?:\w+|<[\w$-]+>)(?=\()/,lookbehind:!0},field:{pattern:/[\w$]+(?=:)/,alias:"variable"},register:{pattern:/(^|[^\w.-])[vp]\d(?![\w.-])/,lookbehind:!0,alias:"variable"},boolean:{pattern:/(^|[^\w.-])(?:false|true)(?![\w.-])/,lookbehind:!0},number:{pattern:/(^|[^/\w.-])-?(?:NAN|INFINITY|0x(?:[\dA-F]+(?:\.[\dA-F]*)?|\.[\dA-F]+)(?:p[+-]?[\dA-F]+)?|(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?)[dflst]?(?![\w.-])/i,lookbehind:!0},label:{pattern:/(:)\w+/,lookbehind:!0,alias:"property"},operator:/->|\.\.|[\[=]/,punctuation:/[{}(),;:]/}}smalltalk.displayName="smalltalk";smalltalk.aliases=[];function smalltalk(s){s.languages.smalltalk={comment:{pattern:/"(?:""|[^"])*"/,greedy:!0},char:{pattern:/\$./,greedy:!0},string:{pattern:/'(?:''|[^'])*'/,greedy:!0},symbol:/#[\da-z]+|#(?:-|([+\/\\*~<>=@%|&?!])\1?)|#(?=\()/i,"block-arguments":{pattern:/(\[\s*):[^\[|]*\|/,lookbehind:!0,inside:{variable:/:[\da-z]+/i,punctuation:/\|/}},"temporary-variables":{pattern:/\|[^|]+\|/,inside:{variable:/[\da-z]+/i,punctuation:/\|/}},keyword:/\b(?:new|nil|self|super)\b/,boolean:/\b(?:false|true)\b/,number:[/\d+r-?[\dA-Z]+(?:\.[\dA-Z]+)?(?:e-?\d+)?/,/\b\d+(?:\.\d+)?(?:e-?\d+)?/],operator:/[<=]=?|:=|~[~=]|\/\/?|\\\\|>[>=]?|[!^+\-*&|,@]/,punctuation:/[.;:?\[\](){}]/}}smarty.displayName="smarty";smarty.aliases=[];function smarty(s){s.register(markupTemplating),(function(n){n.languages.smarty={comment:{pattern:/^\{\*[\s\S]*?\*\}/,greedy:!0},"embedded-php":{pattern:/^\{php\}[\s\S]*?\{\/php\}/,greedy:!0,inside:{smarty:{pattern:/^\{php\}|\{\/php\}$/,inside:null},php:{pattern:/[\s\S]+/,alias:"language-php",inside:n.languages.php}}},string:[{pattern:/"(?:\\.|[^"\\\r\n])*"/,greedy:!0,inside:{interpolation:{pattern:/\{[^{}]*\}|`[^`]*`/,inside:{"interpolation-punctuation":{pattern:/^[{`]|[`}]$/,alias:"punctuation"},expression:{pattern:/[\s\S]+/,inside:null}}},variable:/\$\w+/}},{pattern:/'(?:\\.|[^'\\\r\n])*'/,greedy:!0}],keyword:{pattern:/(^\{\/?)[a-z_]\w*\b(?!\()/i,lookbehind:!0,greedy:!0},delimiter:{pattern:/^\{\/?|\}$/,greedy:!0,alias:"punctuation"},number:/\b0x[\dA-Fa-f]+|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee][-+]?\d+)?/,variable:[/\$(?!\d)\w+/,/#(?!\d)\w+#/,{pattern:/(\.|->|\w\s*=)(?!\d)\w+\b(?!\()/,lookbehind:!0},{pattern:/(\[)(?!\d)\w+(?=\])/,lookbehind:!0}],function:{pattern:/(\|\s*)@?[a-z_]\w*|\b[a-z_]\w*(?=\()/i,lookbehind:!0},"attr-name":/\b[a-z_]\w*(?=\s*=)/i,boolean:/\b(?:false|no|off|on|true|yes)\b/,punctuation:/[\[\](){}.,:`]|->/,operator:[/[+\-*\/%]|==?=?|[!<>]=?|&&|\|\|?/,/\bis\s+(?:not\s+)?(?:div|even|odd)(?:\s+by)?\b/,/\b(?:and|eq|gt?e|gt|lt?e|lt|mod|neq?|not|or)\b/]},n.languages.smarty["embedded-php"].inside.smarty.inside=n.languages.smarty,n.languages.smarty.string[0].inside.interpolation.inside.expression.inside=n.languages.smarty;var u=/"(?:\\.|[^"\\\r\n])*"|'(?:\\.|[^'\\\r\n])*'/,f=RegExp(/\{\*[\s\S]*?\*\}/.source+"|"+/\{php\}[\s\S]*?\{\/php\}/.source+"|"+/\{(?:[^{}"']|<str>|\{(?:[^{}"']|<str>|\{(?:[^{}"']|<str>)*\})*\})*\}/.source.replace(/<str>/g,function(){return u.source}),"g");n.hooks.add("before-tokenize",function(y){var S="{literal}",A="{/literal}",w=!1;n.languages["markup-templating"].buildPlaceholders(y,"smarty",f,function(C){return C===A&&(w=!1),w?!1:(C===S&&(w=!0),!0)})}),n.hooks.add("after-tokenize",function(y){n.languages["markup-templating"].tokenizePlaceholders(y,"smarty")})})(s)}sml.displayName="sml";sml.aliases=["smlnj"];function sml(s){(function(n){var u=/\b(?:abstype|and|andalso|as|case|datatype|do|else|end|eqtype|exception|fn|fun|functor|handle|if|in|include|infix|infixr|let|local|nonfix|of|op|open|orelse|raise|rec|sharing|sig|signature|struct|structure|then|type|val|where|while|with|withtype)\b/i;n.languages.sml={comment:/\(\*(?:[^*(]|\*(?!\))|\((?!\*)|\(\*(?:[^*(]|\*(?!\))|\((?!\*))*\*\))*\*\)/,string:{pattern:/#?"(?:[^"\\]|\\.)*"/,greedy:!0},"class-name":[{pattern:RegExp(/((?:^|[^:]):\s*)<TERMINAL>(?:\s*(?:(?:\*|->)\s*<TERMINAL>|,\s*<TERMINAL>(?:(?=<NOT-LAST>)|(?!<NOT-LAST>)\s+<LONG-ID>)))*/.source.replace(/<NOT-LAST>/g,function(){return/\s*(?:[*,]|->)/.source}).replace(/<TERMINAL>/g,function(){return/(?:'[\w']*|<LONG-ID>|\((?:[^()]|\([^()]*\))*\)|\{(?:[^{}]|\{[^{}]*\})*\})(?:\s+<LONG-ID>)*/.source}).replace(/<LONG-ID>/g,function(){return/(?!<KEYWORD>)[a-z\d_][\w'.]*/.source}).replace(/<KEYWORD>/g,function(){return u.source}),"i"),lookbehind:!0,greedy:!0,inside:null},{pattern:/((?:^|[^\w'])(?:datatype|exception|functor|signature|structure|type)\s+)[a-z_][\w'.]*/i,lookbehind:!0}],function:{pattern:/((?:^|[^\w'])fun\s+)[a-z_][\w'.]*/i,lookbehind:!0},keyword:u,variable:{pattern:/(^|[^\w'])'[\w']*/,lookbehind:!0},number:/~?\b(?:\d+(?:\.\d+)?(?:e~?\d+)?|0x[\da-f]+)\b/i,word:{pattern:/\b0w(?:\d+|x[\da-f]+)\b/i,alias:"constant"},boolean:/\b(?:false|true)\b/i,operator:/\.\.\.|:[>=:]|=>?|->|[<>]=?|[!+\-*/^#|@~]/,punctuation:/[(){}\[\].:,;]/},n.languages.sml["class-name"][0].inside=n.languages.sml,n.languages.smlnj=n.languages.sml})(s)}solidity.displayName="solidity";solidity.aliases=["sol"];function solidity(s){s.register(clike),s.languages.solidity=s.languages.extend("clike",{"class-name":{pattern:/(\b(?:contract|enum|interface|library|new|struct|using)\s+)(?!\d)[\w$]+/,lookbehind:!0},keyword:/\b(?:_|anonymous|as|assembly|assert|break|calldata|case|constant|constructor|continue|contract|default|delete|do|else|emit|enum|event|external|for|from|function|if|import|indexed|inherited|interface|internal|is|let|library|mapping|memory|modifier|new|payable|pragma|private|public|pure|require|returns?|revert|selfdestruct|solidity|storage|struct|suicide|switch|this|throw|using|var|view|while)\b/,operator:/=>|->|:=|=:|\*\*|\+\+|--|\|\||&&|<<=?|>>=?|[-+*/%^&|<>!=]=?|[~?]/}),s.languages.insertBefore("solidity","keyword",{builtin:/\b(?:address|bool|byte|u?int(?:8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?|string|bytes(?:[1-9]|[12]\d|3[0-2])?)\b/}),s.languages.insertBefore("solidity","number",{version:{pattern:/([<>]=?|\^)\d+\.\d+\.\d+\b/,lookbehind:!0,alias:"number"}}),s.languages.sol=s.languages.solidity}solutionFile.displayName="solution-file";solutionFile.aliases=["sln"];function solutionFile(s){(function(n){var u={pattern:/\{[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}\}/i,alias:"constant",inside:{punctuation:/[{}]/}};n.languages["solution-file"]={comment:{pattern:/#.*/,greedy:!0},string:{pattern:/"[^"\r\n]*"|'[^'\r\n]*'/,greedy:!0,inside:{guid:u}},object:{pattern:/^([ \t]*)(?:([A-Z]\w*)\b(?=.*(?:\r\n?|\n)(?:\1[ \t].*(?:\r\n?|\n))*\1End\2(?=[ \t]*$))|End[A-Z]\w*(?=[ \t]*$))/m,lookbehind:!0,greedy:!0,alias:"keyword"},property:{pattern:/^([ \t]*)(?!\s)[^\r\n"#=()]*[^\s"#=()](?=\s*=)/m,lookbehind:!0,inside:{guid:u}},guid:u,number:/\b\d+(?:\.\d+)*\b/,boolean:/\b(?:FALSE|TRUE)\b/,operator:/=/,punctuation:/[(),]/},n.languages.sln=n.languages["solution-file"]})(s)}soy.displayName="soy";soy.aliases=[];function soy(s){s.register(markupTemplating),(function(n){var u=/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,f=/\b\d+(?:\.\d+)?(?:[eE][+-]?\d+)?\b|\b0x[\dA-F]+\b/;n.languages.soy={comment:[/\/\*[\s\S]*?\*\//,{pattern:/(\s)\/\/.*/,lookbehind:!0,greedy:!0}],"command-arg":{pattern:/(\{+\/?\s*(?:alias|call|delcall|delpackage|deltemplate|namespace|template)\s+)\.?[\w.]+/,lookbehind:!0,alias:"string",inside:{punctuation:/\./}},parameter:{pattern:/(\{+\/?\s*@?param\??\s+)\.?[\w.]+/,lookbehind:!0,alias:"variable"},keyword:[{pattern:/(\{+\/?[^\S\r\n]*)(?:\\[nrt]|alias|call|case|css|default|delcall|delpackage|deltemplate|else(?:if)?|fallbackmsg|for(?:each)?|if(?:empty)?|lb|let|literal|msg|namespace|nil|@?param\??|rb|sp|switch|template|xid)/,lookbehind:!0},/\b(?:any|as|attributes|bool|css|float|html|in|int|js|list|map|null|number|string|uri)\b/],delimiter:{pattern:/^\{+\/?|\/?\}+$/,alias:"punctuation"},property:/\w+(?==)/,variable:{pattern:/\$[^\W\d]\w*(?:\??(?:\.\w+|\[[^\]]+\]))*/,inside:{string:{pattern:u,greedy:!0},number:f,punctuation:/[\[\].?]/}},string:{pattern:u,greedy:!0},function:[/\w+(?=\()/,{pattern:/(\|[^\S\r\n]*)\w+/,lookbehind:!0}],boolean:/\b(?:false|true)\b/,number:f,operator:/\?:?|<=?|>=?|==?|!=|[+*/%-]|\b(?:and|not|or)\b/,punctuation:/[{}()\[\]|.,:]/},n.hooks.add("before-tokenize",function(y){var S=/\{\{.+?\}\}|\{.+?\}|\s\/\/.*|\/\*[\s\S]*?\*\//g,A="{literal}",w="{/literal}",C=!1;n.languages["markup-templating"].buildPlaceholders(y,"soy",S,function(T){return T===w&&(C=!1),C?!1:(T===A&&(C=!0),!0)})}),n.hooks.add("after-tokenize",function(y){n.languages["markup-templating"].tokenizePlaceholders(y,"soy")})})(s)}turtle.displayName="turtle";turtle.aliases=["trig"];function turtle(s){s.languages.turtle={comment:{pattern:/#.*/,greedy:!0},"multiline-string":{pattern:/"""(?:(?:""?)?(?:[^"\\]|\\.))*"""|'''(?:(?:''?)?(?:[^'\\]|\\.))*'''/,greedy:!0,alias:"string",inside:{comment:/#.*/}},string:{pattern:/"(?:[^\\"\r\n]|\\.)*"|'(?:[^\\'\r\n]|\\.)*'/,greedy:!0},url:{pattern:/<(?:[^\x00-\x20<>"{}|^`\\]|\\(?:u[\da-fA-F]{4}|U[\da-fA-F]{8}))*>/,greedy:!0,inside:{punctuation:/[<>]/}},function:{pattern:/(?:(?![-.\d\xB7])[-.\w\xB7\xC0-\uFFFD]+)?:(?:(?![-.])(?:[-.:\w\xC0-\uFFFD]|%[\da-f]{2}|\\.)+)?/i,inside:{"local-name":{pattern:/([^:]*:)[\s\S]+/,lookbehind:!0},prefix:{pattern:/[\s\S]+/,inside:{punctuation:/:/}}}},number:/[+-]?\b\d+(?:\.\d*)?(?:e[+-]?\d+)?/i,punctuation:/[{}.,;()[\]]|\^\^/,boolean:/\b(?:false|true)\b/,keyword:[/(?:\ba|@prefix|@base)\b|=/,/\b(?:base|graph|prefix)\b/i],tag:{pattern:/@[a-z]+(?:-[a-z\d]+)*/i,inside:{punctuation:/@/}}},s.languages.trig=s.languages.turtle}sparql.displayName="sparql";sparql.aliases=["rq"];function sparql(s){s.register(turtle),s.languages.sparql=s.languages.extend("turtle",{boolean:/\b(?:false|true)\b/i,variable:{pattern:/[?$]\w+/,greedy:!0}}),s.languages.insertBefore("sparql","punctuation",{keyword:[/\b(?:A|ADD|ALL|AS|ASC|ASK|BNODE|BY|CLEAR|CONSTRUCT|COPY|CREATE|DATA|DEFAULT|DELETE|DESC|DESCRIBE|DISTINCT|DROP|EXISTS|FILTER|FROM|GROUP|HAVING|INSERT|INTO|LIMIT|LOAD|MINUS|MOVE|NAMED|NOT|NOW|OFFSET|OPTIONAL|ORDER|RAND|REDUCED|SELECT|SEPARATOR|SERVICE|SILENT|STRUUID|UNION|USING|UUID|VALUES|WHERE)\b/i,/\b(?:ABS|AVG|BIND|BOUND|CEIL|COALESCE|CONCAT|CONTAINS|COUNT|DATATYPE|DAY|ENCODE_FOR_URI|FLOOR|GROUP_CONCAT|HOURS|IF|IRI|isBLANK|isIRI|isLITERAL|isNUMERIC|isURI|LANG|LANGMATCHES|LCASE|MAX|MD5|MIN|MINUTES|MONTH|REGEX|REPLACE|ROUND|sameTerm|SAMPLE|SECONDS|SHA1|SHA256|SHA384|SHA512|STR|STRAFTER|STRBEFORE|STRDT|STRENDS|STRLANG|STRLEN|STRSTARTS|SUBSTR|SUM|TIMEZONE|TZ|UCASE|URI|YEAR)\b(?=\s*\()/i,/\b(?:BASE|GRAPH|PREFIX)\b/i]}),s.languages.rq=s.languages.sparql}splunkSpl.displayName="splunk-spl";splunkSpl.aliases=[];function splunkSpl(s){s.languages["splunk-spl"]={comment:/`comment\("(?:\\.|[^\\"])*"\)`/,string:{pattern:/"(?:\\.|[^\\"])*"/,greedy:!0},keyword:/\b(?:abstract|accum|addcoltotals|addinfo|addtotals|analyzefields|anomalies|anomalousvalue|anomalydetection|append|appendcols|appendcsv|appendlookup|appendpipe|arules|associate|audit|autoregress|bin|bucket|bucketdir|chart|cluster|cofilter|collect|concurrency|contingency|convert|correlate|datamodel|dbinspect|dedup|delete|delta|diff|erex|eval|eventcount|eventstats|extract|fieldformat|fields|fieldsummary|filldown|fillnull|findtypes|folderize|foreach|format|from|gauge|gentimes|geom|geomfilter|geostats|head|highlight|history|iconify|input|inputcsv|inputlookup|iplocation|join|kmeans|kv|kvform|loadjob|localize|localop|lookup|makecontinuous|makemv|makeresults|map|mcollect|metadata|metasearch|meventcollect|mstats|multikv|multisearch|mvcombine|mvexpand|nomv|outlier|outputcsv|outputlookup|outputtext|overlap|pivot|predict|rangemap|rare|regex|relevancy|reltime|rename|replace|rest|return|reverse|rex|rtorder|run|savedsearch|script|scrub|search|searchtxn|selfjoin|sendemail|set|setfields|sichart|sirare|sistats|sitimechart|sitop|sort|spath|stats|strcat|streamstats|table|tags|tail|timechart|timewrap|top|transaction|transpose|trendline|tscollect|tstats|typeahead|typelearner|typer|union|uniq|untable|where|x11|xmlkv|xmlunescape|xpath|xyseries)\b/i,"operator-word":{pattern:/\b(?:and|as|by|not|or|xor)\b/i,alias:"operator"},function:/\b\w+(?=\s*\()/,property:/\b\w+(?=\s*=(?!=))/,date:{pattern:/\b\d{1,2}\/\d{1,2}\/\d{1,4}(?:(?::\d{1,2}){3})?\b/,alias:"number"},number:/\b\d+(?:\.\d+)?\b/,boolean:/\b(?:f|false|t|true)\b/i,operator:/[<>=]=?|[-+*/%|]/,punctuation:/[()[\],]/}}sqf.displayName="sqf";sqf.aliases=[];function sqf(s){s.register(clike),s.languages.sqf=s.languages.extend("clike",{string:{pattern:/"(?:(?:"")?[^"])*"(?!")|'(?:[^'])*'/,greedy:!0},keyword:/\b(?:breakOut|breakTo|call|case|catch|default|do|echo|else|execFSM|execVM|exitWith|for|forEach|forEachMember|forEachMemberAgent|forEachMemberTeam|from|goto|if|nil|preprocessFile|preprocessFileLineNumbers|private|scopeName|spawn|step|switch|then|throw|to|try|while|with)\b/i,boolean:/\b(?:false|true)\b/i,function:/\b(?:abs|accTime|acos|action|actionIDs|actionKeys|actionKeysImages|actionKeysNames|actionKeysNamesArray|actionName|actionParams|activateAddons|activatedAddons|activateKey|add3DENConnection|add3DENEventHandler|add3DENLayer|addAction|addBackpack|addBackpackCargo|addBackpackCargoGlobal|addBackpackGlobal|addCamShake|addCuratorAddons|addCuratorCameraArea|addCuratorEditableObjects|addCuratorEditingArea|addCuratorPoints|addEditorObject|addEventHandler|addForce|addForceGeneratorRTD|addGoggles|addGroupIcon|addHandgunItem|addHeadgear|addItem|addItemCargo|addItemCargoGlobal|addItemPool|addItemToBackpack|addItemToUniform|addItemToVest|addLiveStats|addMagazine|addMagazineAmmoCargo|addMagazineCargo|addMagazineCargoGlobal|addMagazineGlobal|addMagazinePool|addMagazines|addMagazineTurret|addMenu|addMenuItem|addMissionEventHandler|addMPEventHandler|addMusicEventHandler|addOwnedMine|addPlayerScores|addPrimaryWeaponItem|addPublicVariableEventHandler|addRating|addResources|addScore|addScoreSide|addSecondaryWeaponItem|addSwitchableUnit|addTeamMember|addToRemainsCollector|addTorque|addUniform|addVehicle|addVest|addWaypoint|addWeapon|addWeaponCargo|addWeaponCargoGlobal|addWeaponGlobal|addWeaponItem|addWeaponPool|addWeaponTurret|admin|agent|agents|AGLToASL|aimedAtTarget|aimPos|airDensityCurveRTD|airDensityRTD|airplaneThrottle|airportSide|AISFinishHeal|alive|all3DENEntities|allAirports|allControls|allCurators|allCutLayers|allDead|allDeadMen|allDisplays|allGroups|allMapMarkers|allMines|allMissionObjects|allow3DMode|allowCrewInImmobile|allowCuratorLogicIgnoreAreas|allowDamage|allowDammage|allowFileOperations|allowFleeing|allowGetIn|allowSprint|allPlayers|allSimpleObjects|allSites|allTurrets|allUnits|allUnitsUAV|allVariables|ammo|ammoOnPylon|animate|animateBay|animateDoor|animatePylon|animateSource|animationNames|animationPhase|animationSourcePhase|animationState|append|apply|armoryPoints|arrayIntersect|asin|ASLToAGL|ASLToATL|assert|assignAsCargo|assignAsCargoIndex|assignAsCommander|assignAsDriver|assignAsGunner|assignAsTurret|assignCurator|assignedCargo|assignedCommander|assignedDriver|assignedGunner|assignedItems|assignedTarget|assignedTeam|assignedVehicle|assignedVehicleRole|assignItem|assignTeam|assignToAirport|atan|atan2|atg|ATLToASL|attachedObject|attachedObjects|attachedTo|attachObject|attachTo|attackEnabled|backpack|backpackCargo|backpackContainer|backpackItems|backpackMagazines|backpackSpaceFor|behaviour|benchmark|binocular|blufor|boundingBox|boundingBoxReal|boundingCenter|briefingName|buildingExit|buildingPos|buldozer_EnableRoadDiag|buldozer_IsEnabledRoadDiag|buldozer_LoadNewRoads|buldozer_reloadOperMap|buttonAction|buttonSetAction|cadetMode|callExtension|camCommand|camCommit|camCommitPrepared|camCommitted|camConstuctionSetParams|camCreate|camDestroy|cameraEffect|cameraEffectEnableHUD|cameraInterest|cameraOn|cameraView|campaignConfigFile|camPreload|camPreloaded|camPrepareBank|camPrepareDir|camPrepareDive|camPrepareFocus|camPrepareFov|camPrepareFovRange|camPreparePos|camPrepareRelPos|camPrepareTarget|camSetBank|camSetDir|camSetDive|camSetFocus|camSetFov|camSetFovRange|camSetPos|camSetRelPos|camSetTarget|camTarget|camUseNVG|canAdd|canAddItemToBackpack|canAddItemToUniform|canAddItemToVest|cancelSimpleTaskDestination|canFire|canMove|canSlingLoad|canStand|canSuspend|canTriggerDynamicSimulation|canUnloadInCombat|canVehicleCargo|captive|captiveNum|cbChecked|cbSetChecked|ceil|channelEnabled|cheatsEnabled|checkAIFeature|checkVisibility|civilian|className|clear3DENAttribute|clear3DENInventory|clearAllItemsFromBackpack|clearBackpackCargo|clearBackpackCargoGlobal|clearForcesRTD|clearGroupIcons|clearItemCargo|clearItemCargoGlobal|clearItemPool|clearMagazineCargo|clearMagazineCargoGlobal|clearMagazinePool|clearOverlay|clearRadio|clearVehicleInit|clearWeaponCargo|clearWeaponCargoGlobal|clearWeaponPool|clientOwner|closeDialog|closeDisplay|closeOverlay|collapseObjectTree|collect3DENHistory|collectiveRTD|combatMode|commandArtilleryFire|commandChat|commander|commandFire|commandFollow|commandFSM|commandGetOut|commandingMenu|commandMove|commandRadio|commandStop|commandSuppressiveFire|commandTarget|commandWatch|comment|commitOverlay|compile|compileFinal|completedFSM|composeText|configClasses|configFile|configHierarchy|configName|configNull|configProperties|configSourceAddonList|configSourceMod|configSourceModList|confirmSensorTarget|connectTerminalToUAV|controlNull|controlsGroupCtrl|copyFromClipboard|copyToClipboard|copyWaypoints|cos|count|countEnemy|countFriendly|countSide|countType|countUnknown|create3DENComposition|create3DENEntity|createAgent|createCenter|createDialog|createDiaryLink|createDiaryRecord|createDiarySubject|createDisplay|createGearDialog|createGroup|createGuardedPoint|createLocation|createMarker|createMarkerLocal|createMenu|createMine|createMissionDisplay|createMPCampaignDisplay|createSimpleObject|createSimpleTask|createSite|createSoundSource|createTask|createTeam|createTrigger|createUnit|createVehicle|createVehicleCrew|createVehicleLocal|crew|ctAddHeader|ctAddRow|ctClear|ctCurSel|ctData|ctFindHeaderRows|ctFindRowHeader|ctHeaderControls|ctHeaderCount|ctRemoveHeaders|ctRemoveRows|ctrlActivate|ctrlAddEventHandler|ctrlAngle|ctrlAutoScrollDelay|ctrlAutoScrollRewind|ctrlAutoScrollSpeed|ctrlChecked|ctrlClassName|ctrlCommit|ctrlCommitted|ctrlCreate|ctrlDelete|ctrlEnable|ctrlEnabled|ctrlFade|ctrlHTMLLoaded|ctrlIDC|ctrlIDD|ctrlMapAnimAdd|ctrlMapAnimClear|ctrlMapAnimCommit|ctrlMapAnimDone|ctrlMapCursor|ctrlMapMouseOver|ctrlMapScale|ctrlMapScreenToWorld|ctrlMapWorldToScreen|ctrlModel|ctrlModelDirAndUp|ctrlModelScale|ctrlParent|ctrlParentControlsGroup|ctrlPosition|ctrlRemoveAllEventHandlers|ctrlRemoveEventHandler|ctrlScale|ctrlSetActiveColor|ctrlSetAngle|ctrlSetAutoScrollDelay|ctrlSetAutoScrollRewind|ctrlSetAutoScrollSpeed|ctrlSetBackgroundColor|ctrlSetChecked|ctrlSetDisabledColor|ctrlSetEventHandler|ctrlSetFade|ctrlSetFocus|ctrlSetFont|ctrlSetFontH1|ctrlSetFontH1B|ctrlSetFontH2|ctrlSetFontH2B|ctrlSetFontH3|ctrlSetFontH3B|ctrlSetFontH4|ctrlSetFontH4B|ctrlSetFontH5|ctrlSetFontH5B|ctrlSetFontH6|ctrlSetFontH6B|ctrlSetFontHeight|ctrlSetFontHeightH1|ctrlSetFontHeightH2|ctrlSetFontHeightH3|ctrlSetFontHeightH4|ctrlSetFontHeightH5|ctrlSetFontHeightH6|ctrlSetFontHeightSecondary|ctrlSetFontP|ctrlSetFontPB|ctrlSetFontSecondary|ctrlSetForegroundColor|ctrlSetModel|ctrlSetModelDirAndUp|ctrlSetModelScale|ctrlSetPixelPrecision|ctrlSetPosition|ctrlSetScale|ctrlSetStructuredText|ctrlSetText|ctrlSetTextColor|ctrlSetTextColorSecondary|ctrlSetTextSecondary|ctrlSetTooltip|ctrlSetTooltipColorBox|ctrlSetTooltipColorShade|ctrlSetTooltipColorText|ctrlShow|ctrlShown|ctrlText|ctrlTextHeight|ctrlTextSecondary|ctrlTextWidth|ctrlType|ctrlVisible|ctRowControls|ctRowCount|ctSetCurSel|ctSetData|ctSetHeaderTemplate|ctSetRowTemplate|ctSetValue|ctValue|curatorAddons|curatorCamera|curatorCameraArea|curatorCameraAreaCeiling|curatorCoef|curatorEditableObjects|curatorEditingArea|curatorEditingAreaType|curatorMouseOver|curatorPoints|curatorRegisteredObjects|curatorSelected|curatorWaypointCost|current3DENOperation|currentChannel|currentCommand|currentMagazine|currentMagazineDetail|currentMagazineDetailTurret|currentMagazineTurret|currentMuzzle|currentNamespace|currentTask|currentTasks|currentThrowable|currentVisionMode|currentWaypoint|currentWeapon|currentWeaponMode|currentWeaponTurret|currentZeroing|cursorObject|cursorTarget|customChat|customRadio|cutFadeOut|cutObj|cutRsc|cutText|damage|date|dateToNumber|daytime|deActivateKey|debriefingText|debugFSM|debugLog|deg|delete3DENEntities|deleteAt|deleteCenter|deleteCollection|deleteEditorObject|deleteGroup|deleteGroupWhenEmpty|deleteIdentity|deleteLocation|deleteMarker|deleteMarkerLocal|deleteRange|deleteResources|deleteSite|deleteStatus|deleteTeam|deleteVehicle|deleteVehicleCrew|deleteWaypoint|detach|detectedMines|diag_activeMissionFSMs|diag_activeScripts|diag_activeSQFScripts|diag_activeSQSScripts|diag_captureFrame|diag_captureFrameToFile|diag_captureSlowFrame|diag_codePerformance|diag_drawMode|diag_dynamicSimulationEnd|diag_enable|diag_enabled|diag_fps|diag_fpsMin|diag_frameNo|diag_lightNewLoad|diag_list|diag_log|diag_logSlowFrame|diag_mergeConfigFile|diag_recordTurretLimits|diag_setLightNew|diag_tickTime|diag_toggle|dialog|diarySubjectExists|didJIP|didJIPOwner|difficulty|difficultyEnabled|difficultyEnabledRTD|difficultyOption|direction|directSay|disableAI|disableCollisionWith|disableConversation|disableDebriefingStats|disableMapIndicators|disableNVGEquipment|disableRemoteSensors|disableSerialization|disableTIEquipment|disableUAVConnectability|disableUserInput|displayAddEventHandler|displayCtrl|displayNull|displayParent|displayRemoveAllEventHandlers|displayRemoveEventHandler|displaySetEventHandler|dissolveTeam|distance|distance2D|distanceSqr|distributionRegion|do3DENAction|doArtilleryFire|doFire|doFollow|doFSM|doGetOut|doMove|doorPhase|doStop|doSuppressiveFire|doTarget|doWatch|drawArrow|drawEllipse|drawIcon|drawIcon3D|drawLine|drawLine3D|drawLink|drawLocation|drawPolygon|drawRectangle|drawTriangle|driver|drop|dynamicSimulationDistance|dynamicSimulationDistanceCoef|dynamicSimulationEnabled|dynamicSimulationSystemEnabled|east|edit3DENMissionAttributes|editObject|editorSetEventHandler|effectiveCommander|emptyPositions|enableAI|enableAIFeature|enableAimPrecision|enableAttack|enableAudioFeature|enableAutoStartUpRTD|enableAutoTrimRTD|enableCamShake|enableCaustics|enableChannel|enableCollisionWith|enableCopilot|enableDebriefingStats|enableDiagLegend|enableDynamicSimulation|enableDynamicSimulationSystem|enableEndDialog|enableEngineArtillery|enableEnvironment|enableFatigue|enableGunLights|enableInfoPanelComponent|enableIRLasers|enableMimics|enablePersonTurret|enableRadio|enableReload|enableRopeAttach|enableSatNormalOnDetail|enableSaving|enableSentences|enableSimulation|enableSimulationGlobal|enableStamina|enableStressDamage|enableTeamSwitch|enableTraffic|enableUAVConnectability|enableUAVWaypoints|enableVehicleCargo|enableVehicleSensor|enableWeaponDisassembly|endl|endLoadingScreen|endMission|engineOn|enginesIsOnRTD|enginesPowerRTD|enginesRpmRTD|enginesTorqueRTD|entities|environmentEnabled|estimatedEndServerTime|estimatedTimeLeft|evalObjectArgument|everyBackpack|everyContainer|exec|execEditorScript|exp|expectedDestination|exportJIPMessages|eyeDirection|eyePos|face|faction|fadeMusic|fadeRadio|fadeSound|fadeSpeech|failMission|fillWeaponsFromPool|find|findCover|findDisplay|findEditorObject|findEmptyPosition|findEmptyPositionReady|findIf|findNearestEnemy|finishMissionInit|finite|fire|fireAtTarget|firstBackpack|flag|flagAnimationPhase|flagOwner|flagSide|flagTexture|fleeing|floor|flyInHeight|flyInHeightASL|fog|fogForecast|fogParams|forceAddUniform|forceAtPositionRTD|forcedMap|forceEnd|forceFlagTexture|forceFollowRoad|forceGeneratorRTD|forceMap|forceRespawn|forceSpeed|forceWalk|forceWeaponFire|forceWeatherChange|forgetTarget|format|formation|formationDirection|formationLeader|formationMembers|formationPosition|formationTask|formatText|formLeader|freeLook|fromEditor|fuel|fullCrew|gearIDCAmmoCount|gearSlotAmmoCount|gearSlotData|get3DENActionState|get3DENAttribute|get3DENCamera|get3DENConnections|get3DENEntity|get3DENEntityID|get3DENGrid|get3DENIconsVisible|get3DENLayerEntities|get3DENLinesVisible|get3DENMissionAttribute|get3DENMouseOver|get3DENSelected|getAimingCoef|getAllEnvSoundControllers|getAllHitPointsDamage|getAllOwnedMines|getAllSoundControllers|getAmmoCargo|getAnimAimPrecision|getAnimSpeedCoef|getArray|getArtilleryAmmo|getArtilleryComputerSettings|getArtilleryETA|getAssignedCuratorLogic|getAssignedCuratorUnit|getBackpackCargo|getBleedingRemaining|getBurningValue|getCameraViewDirection|getCargoIndex|getCenterOfMass|getClientState|getClientStateNumber|getCompatiblePylonMagazines|getConnectedUAV|getContainerMaxLoad|getCursorObjectParams|getCustomAimCoef|getDammage|getDescription|getDir|getDirVisual|getDLCAssetsUsage|getDLCAssetsUsageByName|getDLCs|getDLCUsageTime|getEditorCamera|getEditorMode|getEditorObjectScope|getElevationOffset|getEngineTargetRpmRTD|getEnvSoundController|getFatigue|getFieldManualStartPage|getForcedFlagTexture|getFriend|getFSMVariable|getFuelCargo|getGroupIcon|getGroupIconParams|getGroupIcons|getHideFrom|getHit|getHitIndex|getHitPointDamage|getItemCargo|getMagazineCargo|getMarkerColor|getMarkerPos|getMarkerSize|getMarkerType|getMass|getMissionConfig|getMissionConfigValue|getMissionDLCs|getMissionLayerEntities|getMissionLayers|getModelInfo|getMousePosition|getMusicPlayedTime|getNumber|getObjectArgument|getObjectChildren|getObjectDLC|getObjectMaterials|getObjectProxy|getObjectTextures|getObjectType|getObjectViewDistance|getOxygenRemaining|getPersonUsedDLCs|getPilotCameraDirection|getPilotCameraPosition|getPilotCameraRotation|getPilotCameraTarget|getPlateNumber|getPlayerChannel|getPlayerScores|getPlayerUID|getPlayerUIDOld|getPos|getPosASL|getPosASLVisual|getPosASLW|getPosATL|getPosATLVisual|getPosVisual|getPosWorld|getPylonMagazines|getRelDir|getRelPos|getRemoteSensorsDisabled|getRepairCargo|getResolution|getRotorBrakeRTD|getShadowDistance|getShotParents|getSlingLoad|getSoundController|getSoundControllerResult|getSpeed|getStamina|getStatValue|getSuppression|getTerrainGrid|getTerrainHeightASL|getText|getTotalDLCUsageTime|getTrimOffsetRTD|getUnitLoadout|getUnitTrait|getUserMFDText|getUserMFDValue|getVariable|getVehicleCargo|getWeaponCargo|getWeaponSway|getWingsOrientationRTD|getWingsPositionRTD|getWPPos|glanceAt|globalChat|globalRadio|goggles|group|groupChat|groupFromNetId|groupIconSelectable|groupIconsVisible|groupId|groupOwner|groupRadio|groupSelectedUnits|groupSelectUnit|grpNull|gunner|gusts|halt|handgunItems|handgunMagazine|handgunWeapon|handsHit|hasInterface|hasPilotCamera|hasWeapon|hcAllGroups|hcGroupParams|hcLeader|hcRemoveAllGroups|hcRemoveGroup|hcSelected|hcSelectGroup|hcSetGroup|hcShowBar|hcShownBar|headgear|hideBody|hideObject|hideObjectGlobal|hideSelection|hint|hintC|hintCadet|hintSilent|hmd|hostMission|htmlLoad|HUDMovementLevels|humidity|image|importAllGroups|importance|in|inArea|inAreaArray|incapacitatedState|independent|inflame|inflamed|infoPanel|infoPanelComponentEnabled|infoPanelComponents|infoPanels|inGameUISetEventHandler|inheritsFrom|initAmbientLife|inPolygon|inputAction|inRangeOfArtillery|insertEditorObject|intersect|is3DEN|is3DENMultiplayer|isAbleToBreathe|isAgent|isAimPrecisionEnabled|isArray|isAutoHoverOn|isAutonomous|isAutoStartUpEnabledRTD|isAutotest|isAutoTrimOnRTD|isBleeding|isBurning|isClass|isCollisionLightOn|isCopilotEnabled|isDamageAllowed|isDedicated|isDLCAvailable|isEngineOn|isEqualTo|isEqualType|isEqualTypeAll|isEqualTypeAny|isEqualTypeArray|isEqualTypeParams|isFilePatchingEnabled|isFlashlightOn|isFlatEmpty|isForcedWalk|isFormationLeader|isGroupDeletedWhenEmpty|isHidden|isInRemainsCollector|isInstructorFigureEnabled|isIRLaserOn|isKeyActive|isKindOf|isLaserOn|isLightOn|isLocalized|isManualFire|isMarkedForCollection|isMultiplayer|isMultiplayerSolo|isNil|isNull|isNumber|isObjectHidden|isObjectRTD|isOnRoad|isPipEnabled|isPlayer|isRealTime|isRemoteExecuted|isRemoteExecutedJIP|isServer|isShowing3DIcons|isSimpleObject|isSprintAllowed|isStaminaEnabled|isSteamMission|isStreamFriendlyUIEnabled|isStressDamageEnabled|isText|isTouchingGround|isTurnedOut|isTutHintsEnabled|isUAVConnectable|isUAVConnected|isUIContext|isUniformAllowed|isVehicleCargo|isVehicleRadarOn|isVehicleSensorEnabled|isWalking|isWeaponDeployed|isWeaponRested|itemCargo|items|itemsWithMagazines|join|joinAs|joinAsSilent|joinSilent|joinString|kbAddDatabase|kbAddDatabaseTargets|kbAddTopic|kbHasTopic|kbReact|kbRemoveTopic|kbTell|kbWasSaid|keyImage|keyName|knowsAbout|land|landAt|landResult|language|laserTarget|lbAdd|lbClear|lbColor|lbColorRight|lbCurSel|lbData|lbDelete|lbIsSelected|lbPicture|lbPictureRight|lbSelection|lbSetColor|lbSetColorRight|lbSetCurSel|lbSetData|lbSetPicture|lbSetPictureColor|lbSetPictureColorDisabled|lbSetPictureColorSelected|lbSetPictureRight|lbSetPictureRightColor|lbSetPictureRightColorDisabled|lbSetPictureRightColorSelected|lbSetSelectColor|lbSetSelectColorRight|lbSetSelected|lbSetText|lbSetTextRight|lbSetTooltip|lbSetValue|lbSize|lbSort|lbSortByValue|lbText|lbTextRight|lbValue|leader|leaderboardDeInit|leaderboardGetRows|leaderboardInit|leaderboardRequestRowsFriends|leaderboardRequestRowsGlobal|leaderboardRequestRowsGlobalAroundUser|leaderboardsRequestUploadScore|leaderboardsRequestUploadScoreKeepBest|leaderboardState|leaveVehicle|libraryCredits|libraryDisclaimers|lifeState|lightAttachObject|lightDetachObject|lightIsOn|lightnings|limitSpeed|linearConversion|lineBreak|lineIntersects|lineIntersectsObjs|lineIntersectsSurfaces|lineIntersectsWith|linkItem|list|listObjects|listRemoteTargets|listVehicleSensors|ln|lnbAddArray|lnbAddColumn|lnbAddRow|lnbClear|lnbColor|lnbColorRight|lnbCurSelRow|lnbData|lnbDeleteColumn|lnbDeleteRow|lnbGetColumnsPosition|lnbPicture|lnbPictureRight|lnbSetColor|lnbSetColorRight|lnbSetColumnsPos|lnbSetCurSelRow|lnbSetData|lnbSetPicture|lnbSetPictureColor|lnbSetPictureColorRight|lnbSetPictureColorSelected|lnbSetPictureColorSelectedRight|lnbSetPictureRight|lnbSetText|lnbSetTextRight|lnbSetValue|lnbSize|lnbSort|lnbSortByValue|lnbText|lnbTextRight|lnbValue|load|loadAbs|loadBackpack|loadFile|loadGame|loadIdentity|loadMagazine|loadOverlay|loadStatus|loadUniform|loadVest|local|localize|locationNull|locationPosition|lock|lockCameraTo|lockCargo|lockDriver|locked|lockedCargo|lockedDriver|lockedTurret|lockIdentity|lockTurret|lockWP|log|logEntities|logNetwork|logNetworkTerminate|lookAt|lookAtPos|magazineCargo|magazines|magazinesAllTurrets|magazinesAmmo|magazinesAmmoCargo|magazinesAmmoFull|magazinesDetail|magazinesDetailBackpack|magazinesDetailUniform|magazinesDetailVest|magazinesTurret|magazineTurretAmmo|mapAnimAdd|mapAnimClear|mapAnimCommit|mapAnimDone|mapCenterOnCamera|mapGridPosition|markAsFinishedOnSteam|markerAlpha|markerBrush|markerColor|markerDir|markerPos|markerShape|markerSize|markerText|markerType|max|members|menuAction|menuAdd|menuChecked|menuClear|menuCollapse|menuData|menuDelete|menuEnable|menuEnabled|menuExpand|menuHover|menuPicture|menuSetAction|menuSetCheck|menuSetData|menuSetPicture|menuSetValue|menuShortcut|menuShortcutText|menuSize|menuSort|menuText|menuURL|menuValue|min|mineActive|mineDetectedBy|missionConfigFile|missionDifficulty|missionName|missionNamespace|missionStart|missionVersion|modelToWorld|modelToWorldVisual|modelToWorldVisualWorld|modelToWorldWorld|modParams|moonIntensity|moonPhase|morale|move|move3DENCamera|moveInAny|moveInCargo|moveInCommander|moveInDriver|moveInGunner|moveInTurret|moveObjectToEnd|moveOut|moveTime|moveTo|moveToCompleted|moveToFailed|musicVolume|name|nameSound|nearEntities|nearestBuilding|nearestLocation|nearestLocations|nearestLocationWithDubbing|nearestObject|nearestObjects|nearestTerrainObjects|nearObjects|nearObjectsReady|nearRoads|nearSupplies|nearTargets|needReload|netId|netObjNull|newOverlay|nextMenuItemIndex|nextWeatherChange|nMenuItems|numberOfEnginesRTD|numberToDate|objectCurators|objectFromNetId|objectParent|objNull|objStatus|onBriefingGear|onBriefingGroup|onBriefingNotes|onBriefingPlan|onBriefingTeamSwitch|onCommandModeChanged|onDoubleClick|onEachFrame|onGroupIconClick|onGroupIconOverEnter|onGroupIconOverLeave|onHCGroupSelectionChanged|onMapSingleClick|onPlayerConnected|onPlayerDisconnected|onPreloadFinished|onPreloadStarted|onShowNewObject|onTeamSwitch|openCuratorInterface|openDLCPage|openDSInterface|openMap|openSteamApp|openYoutubeVideo|opfor|orderGetIn|overcast|overcastForecast|owner|param|params|parseNumber|parseSimpleArray|parseText|parsingNamespace|particlesQuality|pi|pickWeaponPool|pitch|pixelGrid|pixelGridBase|pixelGridNoUIScale|pixelH|pixelW|playableSlotsNumber|playableUnits|playAction|playActionNow|player|playerRespawnTime|playerSide|playersNumber|playGesture|playMission|playMove|playMoveNow|playMusic|playScriptedMission|playSound|playSound3D|position|positionCameraToWorld|posScreenToWorld|posWorldToScreen|ppEffectAdjust|ppEffectCommit|ppEffectCommitted|ppEffectCreate|ppEffectDestroy|ppEffectEnable|ppEffectEnabled|ppEffectForceInNVG|precision|preloadCamera|preloadObject|preloadSound|preloadTitleObj|preloadTitleRsc|primaryWeapon|primaryWeaponItems|primaryWeaponMagazine|priority|processDiaryLink|processInitCommands|productVersion|profileName|profileNamespace|profileNameSteam|progressLoadingScreen|progressPosition|progressSetPosition|publicVariable|publicVariableClient|publicVariableServer|pushBack|pushBackUnique|putWeaponPool|queryItemsPool|queryMagazinePool|queryWeaponPool|rad|radioChannelAdd|radioChannelCreate|radioChannelRemove|radioChannelSetCallSign|radioChannelSetLabel|radioVolume|rain|rainbow|random|rank|rankId|rating|rectangular|registeredTasks|registerTask|reload|reloadEnabled|remoteControl|remoteExec|remoteExecCall|remoteExecutedOwner|remove3DENConnection|remove3DENEventHandler|remove3DENLayer|removeAction|removeAll3DENEventHandlers|removeAllActions|removeAllAssignedItems|removeAllContainers|removeAllCuratorAddons|removeAllCuratorCameraAreas|removeAllCuratorEditingAreas|removeAllEventHandlers|removeAllHandgunItems|removeAllItems|removeAllItemsWithMagazines|removeAllMissionEventHandlers|removeAllMPEventHandlers|removeAllMusicEventHandlers|removeAllOwnedMines|removeAllPrimaryWeaponItems|removeAllWeapons|removeBackpack|removeBackpackGlobal|removeCuratorAddons|removeCuratorCameraArea|removeCuratorEditableObjects|removeCuratorEditingArea|removeDrawIcon|removeDrawLinks|removeEventHandler|removeFromRemainsCollector|removeGoggles|removeGroupIcon|removeHandgunItem|removeHeadgear|removeItem|removeItemFromBackpack|removeItemFromUniform|removeItemFromVest|removeItems|removeMagazine|removeMagazineGlobal|removeMagazines|removeMagazinesTurret|removeMagazineTurret|removeMenuItem|removeMissionEventHandler|removeMPEventHandler|removeMusicEventHandler|removeOwnedMine|removePrimaryWeaponItem|removeSecondaryWeaponItem|removeSimpleTask|removeSwitchableUnit|removeTeamMember|removeUniform|removeVest|removeWeapon|removeWeaponAttachmentCargo|removeWeaponCargo|removeWeaponGlobal|removeWeaponTurret|reportRemoteTarget|requiredVersion|resetCamShake|resetSubgroupDirection|resistance|resize|resources|respawnVehicle|restartEditorCamera|reveal|revealMine|reverse|reversedMouseY|roadAt|roadsConnectedTo|roleDescription|ropeAttachedObjects|ropeAttachedTo|ropeAttachEnabled|ropeAttachTo|ropeCreate|ropeCut|ropeDestroy|ropeDetach|ropeEndPosition|ropeLength|ropes|ropeUnwind|ropeUnwound|rotorsForcesRTD|rotorsRpmRTD|round|runInitScript|safeZoneH|safeZoneW|safeZoneWAbs|safeZoneX|safeZoneXAbs|safeZoneY|save3DENInventory|saveGame|saveIdentity|saveJoysticks|saveOverlay|saveProfileNamespace|saveStatus|saveVar|savingEnabled|say|say2D|say3D|score|scoreSide|screenshot|screenToWorld|scriptDone|scriptName|scriptNull|scudState|secondaryWeapon|secondaryWeaponItems|secondaryWeaponMagazine|select|selectBestPlaces|selectDiarySubject|selectedEditorObjects|selectEditorObject|selectionNames|selectionPosition|selectLeader|selectMax|selectMin|selectNoPlayer|selectPlayer|selectRandom|selectRandomWeighted|selectWeapon|selectWeaponTurret|sendAUMessage|sendSimpleCommand|sendTask|sendTaskResult|sendUDPMessage|serverCommand|serverCommandAvailable|serverCommandExecutable|serverName|serverTime|set|set3DENAttribute|set3DENAttributes|set3DENGrid|set3DENIconsVisible|set3DENLayer|set3DENLinesVisible|set3DENLogicType|set3DENMissionAttribute|set3DENMissionAttributes|set3DENModelsVisible|set3DENObjectType|set3DENSelected|setAccTime|setActualCollectiveRTD|setAirplaneThrottle|setAirportSide|setAmmo|setAmmoCargo|setAmmoOnPylon|setAnimSpeedCoef|setAperture|setApertureNew|setArmoryPoints|setAttributes|setAutonomous|setBehaviour|setBleedingRemaining|setBrakesRTD|setCameraInterest|setCamShakeDefParams|setCamShakeParams|setCamUseTI|setCaptive|setCenterOfMass|setCollisionLight|setCombatMode|setCompassOscillation|setConvoySeparation|setCuratorCameraAreaCeiling|setCuratorCoef|setCuratorEditingAreaType|setCuratorWaypointCost|setCurrentChannel|setCurrentTask|setCurrentWaypoint|setCustomAimCoef|setCustomWeightRTD|setDamage|setDammage|setDate|setDebriefingText|setDefaultCamera|setDestination|setDetailMapBlendPars|setDir|setDirection|setDrawIcon|setDriveOnPath|setDropInterval|setDynamicSimulationDistance|setDynamicSimulationDistanceCoef|setEditorMode|setEditorObjectScope|setEffectCondition|setEngineRpmRTD|setFace|setFaceAnimation|setFatigue|setFeatureType|setFlagAnimationPhase|setFlagOwner|setFlagSide|setFlagTexture|setFog|setForceGeneratorRTD|setFormation|setFormationTask|setFormDir|setFriend|setFromEditor|setFSMVariable|setFuel|setFuelCargo|setGroupIcon|setGroupIconParams|setGroupIconsSelectable|setGroupIconsVisible|setGroupId|setGroupIdGlobal|setGroupOwner|setGusts|setHideBehind|setHit|setHitIndex|setHitPointDamage|setHorizonParallaxCoef|setHUDMovementLevels|setIdentity|setImportance|setInfoPanel|setLeader|setLightAmbient|setLightAttenuation|setLightBrightness|setLightColor|setLightDayLight|setLightFlareMaxDistance|setLightFlareSize|setLightIntensity|setLightnings|setLightUseFlare|setLocalWindParams|setMagazineTurretAmmo|setMarkerAlpha|setMarkerAlphaLocal|setMarkerBrush|setMarkerBrushLocal|setMarkerColor|setMarkerColorLocal|setMarkerDir|setMarkerDirLocal|setMarkerPos|setMarkerPosLocal|setMarkerShape|setMarkerShapeLocal|setMarkerSize|setMarkerSizeLocal|setMarkerText|setMarkerTextLocal|setMarkerType|setMarkerTypeLocal|setMass|setMimic|setMousePosition|setMusicEffect|setMusicEventHandler|setName|setNameSound|setObjectArguments|setObjectMaterial|setObjectMaterialGlobal|setObjectProxy|setObjectTexture|setObjectTextureGlobal|setObjectViewDistance|setOvercast|setOwner|setOxygenRemaining|setParticleCircle|setParticleClass|setParticleFire|setParticleParams|setParticleRandom|setPilotCameraDirection|setPilotCameraRotation|setPilotCameraTarget|setPilotLight|setPiPEffect|setPitch|setPlateNumber|setPlayable|setPlayerRespawnTime|setPos|setPosASL|setPosASL2|setPosASLW|setPosATL|setPosition|setPosWorld|setPylonLoadOut|setPylonsPriority|setRadioMsg|setRain|setRainbow|setRandomLip|setRank|setRectangular|setRepairCargo|setRotorBrakeRTD|setShadowDistance|setShotParents|setSide|setSimpleTaskAlwaysVisible|setSimpleTaskCustomData|setSimpleTaskDescription|setSimpleTaskDestination|setSimpleTaskTarget|setSimpleTaskType|setSimulWeatherLayers|setSize|setSkill|setSlingLoad|setSoundEffect|setSpeaker|setSpeech|setSpeedMode|setStamina|setStaminaScheme|setStatValue|setSuppression|setSystemOfUnits|setTargetAge|setTaskMarkerOffset|setTaskResult|setTaskState|setTerrainGrid|setText|setTimeMultiplier|setTitleEffect|setToneMapping|setToneMappingParams|setTrafficDensity|setTrafficDistance|setTrafficGap|setTrafficSpeed|setTriggerActivation|setTriggerArea|setTriggerStatements|setTriggerText|setTriggerTimeout|setTriggerType|setType|setUnconscious|setUnitAbility|setUnitLoadout|setUnitPos|setUnitPosWeak|setUnitRank|setUnitRecoilCoefficient|setUnitTrait|setUnloadInCombat|setUserActionText|setUserMFDText|setUserMFDValue|setVariable|setVectorDir|setVectorDirAndUp|setVectorUp|setVehicleAmmo|setVehicleAmmoDef|setVehicleArmor|setVehicleCargo|setVehicleId|setVehicleInit|setVehicleLock|setVehiclePosition|setVehicleRadar|setVehicleReceiveRemoteTargets|setVehicleReportOwnPosition|setVehicleReportRemoteTargets|setVehicleTIPars|setVehicleVarName|setVelocity|setVelocityModelSpace|setVelocityTransformation|setViewDistance|setVisibleIfTreeCollapsed|setWantedRpmRTD|setWaves|setWaypointBehaviour|setWaypointCombatMode|setWaypointCompletionRadius|setWaypointDescription|setWaypointForceBehaviour|setWaypointFormation|setWaypointHousePosition|setWaypointLoiterRadius|setWaypointLoiterType|setWaypointName|setWaypointPosition|setWaypointScript|setWaypointSpeed|setWaypointStatements|setWaypointTimeout|setWaypointType|setWaypointVisible|setWeaponReloadingTime|setWind|setWindDir|setWindForce|setWindStr|setWingForceScaleRTD|setWPPos|show3DIcons|showChat|showCinemaBorder|showCommandingMenu|showCompass|showCuratorCompass|showGPS|showHUD|showLegend|showMap|shownArtilleryComputer|shownChat|shownCompass|shownCuratorCompass|showNewEditorObject|shownGPS|shownHUD|shownMap|shownPad|shownRadio|shownScoretable|shownUAVFeed|shownWarrant|shownWatch|showPad|showRadio|showScoretable|showSubtitles|showUAVFeed|showWarrant|showWatch|showWaypoint|showWaypoints|side|sideAmbientLife|sideChat|sideEmpty|sideEnemy|sideFriendly|sideLogic|sideRadio|sideUnknown|simpleTasks|simulationEnabled|simulCloudDensity|simulCloudOcclusion|simulInClouds|simulWeatherSync|sin|size|sizeOf|skill|skillFinal|skipTime|sleep|sliderPosition|sliderRange|sliderSetPosition|sliderSetRange|sliderSetSpeed|sliderSpeed|slingLoadAssistantShown|soldierMagazines|someAmmo|sort|soundVolume|speaker|speed|speedMode|splitString|sqrt|squadParams|stance|startLoadingScreen|stop|stopEngineRTD|stopped|str|sunOrMoon|supportInfo|suppressFor|surfaceIsWater|surfaceNormal|surfaceType|swimInDepth|switchableUnits|switchAction|switchCamera|switchGesture|switchLight|switchMove|synchronizedObjects|synchronizedTriggers|synchronizedWaypoints|synchronizeObjectsAdd|synchronizeObjectsRemove|synchronizeTrigger|synchronizeWaypoint|systemChat|systemOfUnits|tan|targetKnowledge|targets|targetsAggregate|targetsQuery|taskAlwaysVisible|taskChildren|taskCompleted|taskCustomData|taskDescription|taskDestination|taskHint|taskMarkerOffset|taskNull|taskParent|taskResult|taskState|taskType|teamMember|teamMemberNull|teamName|teams|teamSwitch|teamSwitchEnabled|teamType|terminate|terrainIntersect|terrainIntersectASL|terrainIntersectAtASL|text|textLog|textLogFormat|tg|time|timeMultiplier|titleCut|titleFadeOut|titleObj|titleRsc|titleText|toArray|toFixed|toLower|toString|toUpper|triggerActivated|triggerActivation|triggerArea|triggerAttachedVehicle|triggerAttachObject|triggerAttachVehicle|triggerDynamicSimulation|triggerStatements|triggerText|triggerTimeout|triggerTimeoutCurrent|triggerType|turretLocal|turretOwner|turretUnit|tvAdd|tvClear|tvCollapse|tvCollapseAll|tvCount|tvCurSel|tvData|tvDelete|tvExpand|tvExpandAll|tvPicture|tvPictureRight|tvSetColor|tvSetCurSel|tvSetData|tvSetPicture|tvSetPictureColor|tvSetPictureColorDisabled|tvSetPictureColorSelected|tvSetPictureRight|tvSetPictureRightColor|tvSetPictureRightColorDisabled|tvSetPictureRightColorSelected|tvSetSelectColor|tvSetText|tvSetTooltip|tvSetValue|tvSort|tvSortByValue|tvText|tvTooltip|tvValue|type|typeName|typeOf|UAVControl|uiNamespace|uiSleep|unassignCurator|unassignItem|unassignTeam|unassignVehicle|underwater|uniform|uniformContainer|uniformItems|uniformMagazines|unitAddons|unitAimPosition|unitAimPositionVisual|unitBackpack|unitIsUAV|unitPos|unitReady|unitRecoilCoefficient|units|unitsBelowHeight|unlinkItem|unlockAchievement|unregisterTask|updateDrawIcon|updateMenuItem|updateObjectTree|useAIOperMapObstructionTest|useAISteeringComponent|useAudioTimeForMoves|userInputDisabled|vectorAdd|vectorCos|vectorCrossProduct|vectorDiff|vectorDir|vectorDirVisual|vectorDistance|vectorDistanceSqr|vectorDotProduct|vectorFromTo|vectorMagnitude|vectorMagnitudeSqr|vectorModelToWorld|vectorModelToWorldVisual|vectorMultiply|vectorNormalized|vectorUp|vectorUpVisual|vectorWorldToModel|vectorWorldToModelVisual|vehicle|vehicleCargoEnabled|vehicleChat|vehicleRadio|vehicleReceiveRemoteTargets|vehicleReportOwnPosition|vehicleReportRemoteTargets|vehicles|vehicleVarName|velocity|velocityModelSpace|verifySignature|vest|vestContainer|vestItems|vestMagazines|viewDistance|visibleCompass|visibleGPS|visibleMap|visiblePosition|visiblePositionASL|visibleScoretable|visibleWatch|waitUntil|waves|waypointAttachedObject|waypointAttachedVehicle|waypointAttachObject|waypointAttachVehicle|waypointBehaviour|waypointCombatMode|waypointCompletionRadius|waypointDescription|waypointForceBehaviour|waypointFormation|waypointHousePosition|waypointLoiterRadius|waypointLoiterType|waypointName|waypointPosition|waypoints|waypointScript|waypointsEnabledUAV|waypointShow|waypointSpeed|waypointStatements|waypointTimeout|waypointTimeoutCurrent|waypointType|waypointVisible|weaponAccessories|weaponAccessoriesCargo|weaponCargo|weaponDirection|weaponInertia|weaponLowered|weapons|weaponsItems|weaponsItemsCargo|weaponState|weaponsTurret|weightRTD|west|WFSideText|wind|windDir|windRTD|windStr|wingsForcesRTD|worldName|worldSize|worldToModel|worldToModelVisual|worldToScreen)\b/i,number:/(?:\$|\b0x)[\da-f]+\b|(?:\B\.\d+|\b\d+(?:\.\d+)?)(?:e[+-]?\d+)?\b/i,operator:/##|>>|&&|\|\||[!=<>]=?|[-+*/%#^]|\b(?:and|mod|not|or)\b/i,"magic-variable":{pattern:/\b(?:this|thisList|thisTrigger|_exception|_fnc_scriptName|_fnc_scriptNameParent|_forEachIndex|_this|_thisEventHandler|_thisFSM|_thisScript|_x)\b/i,alias:"keyword"},constant:/\bDIK(?:_[a-z\d]+)+\b/i}),s.languages.insertBefore("sqf","string",{macro:{pattern:/(^[ \t]*)#[a-z](?:[^\r\n\\]|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,greedy:!0,alias:"property",inside:{directive:{pattern:/#[a-z]+\b/i,alias:"keyword"},comment:s.languages.sqf.comment}}}),delete s.languages.sqf["class-name"]}squirrel.displayName="squirrel";squirrel.aliases=[];function squirrel(s){s.register(clike),s.languages.squirrel=s.languages.extend("clike",{comment:[s.languages.clike.comment[0],{pattern:/(^|[^\\:])(?:\/\/|#).*/,lookbehind:!0,greedy:!0}],string:{pattern:/(^|[^\\"'@])(?:@"(?:[^"]|"")*"(?!")|"(?:[^\\\r\n"]|\\.)*")/,lookbehind:!0,greedy:!0},"class-name":{pattern:/(\b(?:class|enum|extends|instanceof)\s+)\w+(?:\.\w+)*/,lookbehind:!0,inside:{punctuation:/\./}},keyword:/\b(?:__FILE__|__LINE__|base|break|case|catch|class|clone|const|constructor|continue|default|delete|else|enum|extends|for|foreach|function|if|in|instanceof|local|null|resume|return|static|switch|this|throw|try|typeof|while|yield)\b/,number:/\b(?:0x[0-9a-fA-F]+|\d+(?:\.(?:\d+|[eE][+-]?\d+))?)\b/,operator:/\+\+|--|<=>|<[-<]|>>>?|&&?|\|\|?|[-+*/%!=<>]=?|[~^]|::?/,punctuation:/[(){}\[\],;.]/}),s.languages.insertBefore("squirrel","string",{char:{pattern:/(^|[^\\"'])'(?:[^\\']|\\(?:[xuU][0-9a-fA-F]{0,8}|[\s\S]))'/,lookbehind:!0,greedy:!0}}),s.languages.insertBefore("squirrel","operator",{"attribute-punctuation":{pattern:/<\/|\/>/,alias:"important"},lambda:{pattern:/@(?=\()/,alias:"operator"}})}stan.displayName="stan";stan.aliases=[];function stan(s){(function(n){var u=/\b(?:algebra_solver|algebra_solver_newton|integrate_1d|integrate_ode|integrate_ode_bdf|integrate_ode_rk45|map_rect|ode_(?:adams|bdf|ckrk|rk45)(?:_tol)?|ode_adjoint_tol_ctl|reduce_sum|reduce_sum_static)\b/;n.languages.stan={comment:/\/\/.*|\/\*[\s\S]*?\*\/|#(?!include).*/,string:{pattern:/"[\x20\x21\x23-\x5B\x5D-\x7E]*"/,greedy:!0},directive:{pattern:/^([ \t]*)#include\b.*/m,lookbehind:!0,alias:"property"},"function-arg":{pattern:RegExp("("+u.source+/\s*\(\s*/.source+")"+/[a-zA-Z]\w*/.source),lookbehind:!0,alias:"function"},constraint:{pattern:/(\b(?:int|matrix|real|row_vector|vector)\s*)<[^<>]*>/,lookbehind:!0,inside:{expression:{pattern:/(=\s*)\S(?:\S|\s+(?!\s))*?(?=\s*(?:>$|,\s*\w+\s*=))/,lookbehind:!0,inside:null},property:/\b[a-z]\w*(?=\s*=)/i,operator:/=/,punctuation:/^<|>$|,/}},keyword:[{pattern:/\bdata(?=\s*\{)|\b(?:functions|generated|model|parameters|quantities|transformed)\b/,alias:"program-block"},/\b(?:array|break|cholesky_factor_corr|cholesky_factor_cov|complex|continue|corr_matrix|cov_matrix|data|else|for|if|in|increment_log_prob|int|matrix|ordered|positive_ordered|print|real|reject|return|row_vector|simplex|target|unit_vector|vector|void|while)\b/,u],function:/\b[a-z]\w*(?=\s*\()/i,number:/(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:E[+-]?\d+(?:_\d+)*)?i?(?!\w)/i,boolean:/\b(?:false|true)\b/,operator:/<-|\.[*/]=?|\|\|?|&&|[!=<>+\-*/]=?|['^%~?:]/,punctuation:/[()\[\]{},;]/},n.languages.stan.constraint.inside.expression.inside=n.languages.stan})(s)}stata.displayName="stata";stata.aliases=[];function stata(s){s.register(java),s.register(mata),s.register(python),s.languages.stata={comment:[{pattern:/(^[ \t]*)\*.*/m,lookbehind:!0,greedy:!0},{pattern:/(^|\s)\/\/.*|\/\*[\s\S]*?\*\//,lookbehind:!0,greedy:!0}],"string-literal":{pattern:/"[^"\r\n]*"|[`']".*?"[`']/,greedy:!0,inside:{interpolation:{pattern:/\$\{[^{}]*\}|[`']\w[^`'\r\n]*[`']/,inside:{punctuation:/^\$\{|\}$/,expression:{pattern:/[\s\S]+/,inside:null}}},string:/[\s\S]+/}},mata:{pattern:/(^[ \t]*mata[ \t]*:)[\s\S]+?(?=^end\b)/m,lookbehind:!0,greedy:!0,alias:"language-mata",inside:s.languages.mata},java:{pattern:/(^[ \t]*java[ \t]*:)[\s\S]+?(?=^end\b)/m,lookbehind:!0,greedy:!0,alias:"language-java",inside:s.languages.java},python:{pattern:/(^[ \t]*python[ \t]*:)[\s\S]+?(?=^end\b)/m,lookbehind:!0,greedy:!0,alias:"language-python",inside:s.languages.python},command:{pattern:/(^[ \t]*(?:\.[ \t]+)?(?:(?:bayes|bootstrap|by|bysort|capture|collect|fmm|fp|frame|jackknife|mfp|mi|nestreg|noisily|permute|quietly|rolling|simulate|statsby|stepwise|svy|version|xi)\b[^:\r\n]*:[ \t]*|(?:capture|noisily|quietly|version)[ \t]+)?)[a-zA-Z]\w*/m,lookbehind:!0,greedy:!0,alias:"keyword"},variable:/\$\w+|[`']\w[^`'\r\n]*[`']/,keyword:/\b(?:bayes|bootstrap|by|bysort|capture|clear|collect|fmm|fp|frame|if|in|jackknife|mi[ \t]+estimate|mfp|nestreg|noisily|of|permute|quietly|rolling|simulate|sort|statsby|stepwise|svy|varlist|version|xi)\b/,boolean:/\b(?:off|on)\b/,number:/\b\d+(?:\.\d+)?\b|\B\.\d+/,function:/\b[a-z_]\w*(?=\()/i,operator:/\+\+|--|##?|[<>!=~]=?|[+\-*^&|/]/,punctuation:/[(){}[\],:]/},s.languages.stata["string-literal"].inside.interpolation.inside.expression.inside=s.languages.stata}iecst.displayName="iecst";iecst.aliases=[];function iecst(s){s.languages.iecst={comment:[{pattern:/(^|[^\\])(?:\/\*[\s\S]*?(?:\*\/|$)|\(\*[\s\S]*?(?:\*\)|$)|\{[\s\S]*?(?:\}|$))/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},keyword:[/\b(?:END_)?(?:PROGRAM|CONFIGURATION|INTERFACE|FUNCTION_BLOCK|FUNCTION|ACTION|TRANSITION|TYPE|STRUCT|(?:INITIAL_)?STEP|NAMESPACE|LIBRARY|CHANNEL|FOLDER|RESOURCE|VAR_(?:ACCESS|CONFIG|EXTERNAL|GLOBAL|INPUT|IN_OUT|OUTPUT|TEMP)|VAR|METHOD|PROPERTY)\b/i,/\b(?:AT|BY|(?:END_)?(?:CASE|FOR|IF|REPEAT|WHILE)|CONSTANT|CONTINUE|DO|ELSE|ELSIF|EXIT|EXTENDS|FROM|GET|GOTO|IMPLEMENTS|JMP|NON_RETAIN|OF|PRIVATE|PROTECTED|PUBLIC|RETAIN|RETURN|SET|TASK|THEN|TO|UNTIL|USING|WITH|__CATCH|__ENDTRY|__FINALLY|__TRY)\b/],"class-name":/\b(?:ANY|ARRAY|BOOL|BYTE|U?(?:D|L|S)?INT|(?:D|L)?WORD|DATE(?:_AND_TIME)?|DT|L?REAL|POINTER|STRING|TIME(?:_OF_DAY)?|TOD)\b/,address:{pattern:/%[IQM][XBWDL][\d.]*|%[IQ][\d.]*/,alias:"symbol"},number:/\b(?:16#[\da-f]+|2#[01_]+|0x[\da-f]+)\b|\b(?:D|DT|T|TOD)#[\d_shmd:]*|\b[A-Z]*#[\d.,_]*|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,boolean:/\b(?:FALSE|NULL|TRUE)\b/,operator:/S?R?:?=>?|&&?|\*\*?|<[=>]?|>=?|[-:^/+#]|\b(?:AND|EQ|EXPT|GE|GT|LE|LT|MOD|NE|NOT|OR|XOR)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,punctuation:/[()[\].,;]/}}supercollider.displayName="supercollider";supercollider.aliases=["sclang"];function supercollider(s){s.languages.supercollider={comment:{pattern:/\/\/.*|\/\*(?:[^*/]|\*(?!\/)|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/)*\*\//,greedy:!0},string:{pattern:/(^|[^\\])"(?:[^"\\]|\\[\s\S])*"/,lookbehind:!0,greedy:!0},char:{pattern:/\$(?:[^\\\r\n]|\\.)/,greedy:!0},symbol:{pattern:/(^|[^\\])'(?:[^'\\]|\\[\s\S])*'|\\\w+/,lookbehind:!0,greedy:!0},keyword:/\b(?:_|arg|classvar|const|nil|var|while)\b/,boolean:/\b(?:false|true)\b/,label:{pattern:/\b[a-z_]\w*(?=\s*:)/,alias:"property"},number:/\b(?:inf|pi|0x[0-9a-fA-F]+|\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(?:pi)?|\d+r[0-9a-zA-Z]+(?:\.[0-9a-zA-Z]+)?|\d+[sb]{1,4}\d*)\b/,"class-name":/\b[A-Z]\w*\b/,operator:/\.{2,3}|#(?![[{])|&&|[!=]==?|\+>>|\+{1,3}|-[->]|=>|>>|\?\?|@\|?@|\|(?:@|[!=]=)?\||!\?|<[!=>]|\*{1,2}|<{2,3}\*?|[-!%&/<>?@|=`]/,punctuation:/[{}()[\].:,;]|#[[{]/},s.languages.sclang=s.languages.supercollider}swift.displayName="swift";swift.aliases=[];function swift(s){s.languages.swift={comment:{pattern:/(^|[^\\:])(?:\/\/.*|\/\*(?:[^/*]|\/(?!\*)|\*(?!\/)|\/\*(?:[^*]|\*(?!\/))*\*\/)*\*\/)/,lookbehind:!0,greedy:!0},"string-literal":[{pattern:RegExp(/(^|[^"#])/.source+"(?:"+/"(?:\\(?:\((?:[^()]|\([^()]*\))*\)|\r\n|[^(])|[^\\\r\n"])*"/.source+"|"+/"""(?:\\(?:\((?:[^()]|\([^()]*\))*\)|[^(])|[^\\"]|"(?!""))*"""/.source+")"+/(?!["#])/.source),lookbehind:!0,greedy:!0,inside:{interpolation:{pattern:/(\\\()(?:[^()]|\([^()]*\))*(?=\))/,lookbehind:!0,inside:null},"interpolation-punctuation":{pattern:/^\)|\\\($/,alias:"punctuation"},punctuation:/\\(?=[\r\n])/,string:/[\s\S]+/}},{pattern:RegExp(/(^|[^"#])(#+)/.source+"(?:"+/"(?:\\(?:#+\((?:[^()]|\([^()]*\))*\)|\r\n|[^#])|[^\\\r\n])*?"/.source+"|"+/"""(?:\\(?:#+\((?:[^()]|\([^()]*\))*\)|[^#])|[^\\])*?"""/.source+")\\2"),lookbehind:!0,greedy:!0,inside:{interpolation:{pattern:/(\\#+\()(?:[^()]|\([^()]*\))*(?=\))/,lookbehind:!0,inside:null},"interpolation-punctuation":{pattern:/^\)|\\#+\($/,alias:"punctuation"},string:/[\s\S]+/}}],directive:{pattern:RegExp(/#/.source+"(?:"+(/(?:elseif|if)\b/.source+"(?:[ 	]*"+/(?:![ \t]*)?(?:\b\w+\b(?:[ \t]*\((?:[^()]|\([^()]*\))*\))?|\((?:[^()]|\([^()]*\))*\))(?:[ \t]*(?:&&|\|\|))?/.source+")+")+"|"+/(?:else|endif)\b/.source+")"),alias:"property",inside:{"directive-name":/^#\w+/,boolean:/\b(?:false|true)\b/,number:/\b\d+(?:\.\d+)*\b/,operator:/!|&&|\|\||[<>]=?/,punctuation:/[(),]/}},literal:{pattern:/#(?:colorLiteral|column|dsohandle|file(?:ID|Literal|Path)?|function|imageLiteral|line)\b/,alias:"constant"},"other-directive":{pattern:/#\w+\b/,alias:"property"},attribute:{pattern:/@\w+/,alias:"atrule"},"function-definition":{pattern:/(\bfunc\s+)\w+/,lookbehind:!0,alias:"function"},label:{pattern:/\b(break|continue)\s+\w+|\b[a-zA-Z_]\w*(?=\s*:\s*(?:for|repeat|while)\b)/,lookbehind:!0,alias:"important"},keyword:/\b(?:Any|Protocol|Self|Type|actor|as|assignment|associatedtype|associativity|async|await|break|case|catch|class|continue|convenience|default|defer|deinit|didSet|do|dynamic|else|enum|extension|fallthrough|fileprivate|final|for|func|get|guard|higherThan|if|import|in|indirect|infix|init|inout|internal|is|isolated|lazy|left|let|lowerThan|mutating|none|nonisolated|nonmutating|open|operator|optional|override|postfix|precedencegroup|prefix|private|protocol|public|repeat|required|rethrows|return|right|safe|self|set|some|static|struct|subscript|super|switch|throw|throws|try|typealias|unowned|unsafe|var|weak|where|while|willSet)\b/,boolean:/\b(?:false|true)\b/,nil:{pattern:/\bnil\b/,alias:"constant"},"short-argument":/\$\d+\b/,omit:{pattern:/\b_\b/,alias:"keyword"},number:/\b(?:[\d_]+(?:\.[\de_]+)?|0x[a-f0-9_]+(?:\.[a-f0-9p_]+)?|0b[01_]+|0o[0-7_]+)\b/i,"class-name":/\b[A-Z](?:[A-Z_\d]*[a-z]\w*)?\b/,function:/\b[a-z_]\w*(?=\s*\()/i,constant:/\b(?:[A-Z_]{2,}|k[A-Z][A-Za-z_]+)\b/,operator:/[-+*/%=!<>&|^~?]+|\.[.\-+*/%=!<>&|^~?]+/,punctuation:/[{}[\]();,.:\\]/},s.languages.swift["string-literal"].forEach(function(n){n.inside.interpolation.inside=s.languages.swift})}systemd.displayName="systemd";systemd.aliases=[];function systemd(s){(function(n){var u={pattern:/^[;#].*/m,greedy:!0},f=/"(?:[^\r\n"\\]|\\(?:[^\r]|\r\n?))*"(?!\S)/.source;n.languages.systemd={comment:u,section:{pattern:/^\[[^\n\r\[\]]*\](?=[ \t]*$)/m,greedy:!0,inside:{punctuation:/^\[|\]$/,"section-name":{pattern:/[\s\S]+/,alias:"selector"}}},key:{pattern:/^[^\s=]+(?=[ \t]*=)/m,greedy:!0,alias:"attr-name"},value:{pattern:RegExp(/(=[ \t]*(?!\s))/.source+"(?:"+f+`|(?=[^"\r
]))(?:`+(/[^\s\\]/.source+'|[ 	]+(?:(?![ 	"])|'+f+")|"+/\\[\r\n]+(?:[#;].*[\r\n]+)*(?![#;])/.source)+")*"),lookbehind:!0,greedy:!0,alias:"attr-value",inside:{comment:u,quoted:{pattern:RegExp(/(^|\s)/.source+f),lookbehind:!0,greedy:!0},punctuation:/\\$/m,boolean:{pattern:/^(?:false|no|off|on|true|yes)$/,greedy:!0}}},punctuation:/=/}})(s)}t4Templating.displayName="t4-templating";t4Templating.aliases=[];function t4Templating(s){(function(n){function u(y,S,A){return{pattern:RegExp("<#"+y+"[\\s\\S]*?#>"),alias:"block",inside:{delimiter:{pattern:RegExp("^<#"+y+"|#>$"),alias:"important"},content:{pattern:/[\s\S]+/,inside:S,alias:A}}}}function f(y){var S=n.languages[y],A="language-"+y;return{block:{pattern:/<#[\s\S]+?#>/,inside:{directive:u("@",{"attr-value":{pattern:/=(?:("|')(?:\\[\s\S]|(?!\1)[^\\])*\1|[^\s'">=]+)/,inside:{punctuation:/^=|^["']|["']$/}},keyword:/\b\w+(?=\s)/,"attr-name":/\b\w+/}),expression:u("=",S,A),"class-feature":u("\\+",S,A),standard:u("",S,A)}}}}n.languages["t4-templating"]=Object.defineProperty({},"createT4",{value:f})})(s)}t4Cs.displayName="t4-cs";t4Cs.aliases=["t4"];function t4Cs(s){s.register(csharp),s.register(t4Templating),s.languages.t4=s.languages["t4-cs"]=s.languages["t4-templating"].createT4("csharp")}vbnet.displayName="vbnet";vbnet.aliases=[];function vbnet(s){s.register(basic),s.languages.vbnet=s.languages.extend("basic",{comment:[{pattern:/(?:!|REM\b).+/i,inside:{keyword:/^REM/i}},{pattern:/(^|[^\\:])'.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(^|[^"])"(?:""|[^"])*"(?!")/,lookbehind:!0,greedy:!0},keyword:/(?:\b(?:ADDHANDLER|ADDRESSOF|ALIAS|AND|ANDALSO|AS|BEEP|BLOAD|BOOLEAN|BSAVE|BYREF|BYTE|BYVAL|CALL(?: ABSOLUTE)?|CASE|CATCH|CBOOL|CBYTE|CCHAR|CDATE|CDBL|CDEC|CHAIN|CHAR|CHDIR|CINT|CLASS|CLEAR|CLNG|CLOSE|CLS|COBJ|COM|COMMON|CONST|CONTINUE|CSBYTE|CSHORT|CSNG|CSTR|CTYPE|CUINT|CULNG|CUSHORT|DATA|DATE|DECIMAL|DECLARE|DEF(?: FN| SEG|DBL|INT|LNG|SNG|STR)|DEFAULT|DELEGATE|DIM|DIRECTCAST|DO|DOUBLE|ELSE|ELSEIF|END|ENUM|ENVIRON|ERASE|ERROR|EVENT|EXIT|FALSE|FIELD|FILES|FINALLY|FOR(?: EACH)?|FRIEND|FUNCTION|GET|GETTYPE|GETXMLNAMESPACE|GLOBAL|GOSUB|GOTO|HANDLES|IF|IMPLEMENTS|IMPORTS|IN|INHERITS|INPUT|INTEGER|INTERFACE|IOCTL|IS|ISNOT|KEY|KILL|LET|LIB|LIKE|LINE INPUT|LOCATE|LOCK|LONG|LOOP|LSET|ME|MKDIR|MOD|MODULE|MUSTINHERIT|MUSTOVERRIDE|MYBASE|MYCLASS|NAME|NAMESPACE|NARROWING|NEW|NEXT|NOT|NOTHING|NOTINHERITABLE|NOTOVERRIDABLE|OBJECT|OF|OFF|ON(?: COM| ERROR| KEY| TIMER)?|OPEN|OPERATOR|OPTION(?: BASE)?|OPTIONAL|OR|ORELSE|OUT|OVERLOADS|OVERRIDABLE|OVERRIDES|PARAMARRAY|PARTIAL|POKE|PRIVATE|PROPERTY|PROTECTED|PUBLIC|PUT|RAISEEVENT|READ|READONLY|REDIM|REM|REMOVEHANDLER|RESTORE|RESUME|RETURN|RMDIR|RSET|RUN|SBYTE|SELECT(?: CASE)?|SET|SHADOWS|SHARED|SHELL|SHORT|SINGLE|SLEEP|STATIC|STEP|STOP|STRING|STRUCTURE|SUB|SWAP|SYNCLOCK|SYSTEM|THEN|THROW|TIMER|TO|TROFF|TRON|TRUE|TRY|TRYCAST|TYPE|TYPEOF|UINTEGER|ULONG|UNLOCK|UNTIL|USHORT|USING|VIEW PRINT|WAIT|WEND|WHEN|WHILE|WIDENING|WITH|WITHEVENTS|WRITE|WRITEONLY|XOR)|\B(?:#CONST|#ELSE|#ELSEIF|#END|#IF))(?:\$|\b)/i,punctuation:/[,;:(){}]/})}t4Vb.displayName="t4-vb";t4Vb.aliases=[];function t4Vb(s){s.register(t4Templating),s.register(vbnet),s.languages["t4-vb"]=s.languages["t4-templating"].createT4("vbnet")}tap.displayName="tap";tap.aliases=[];function tap(s){s.register(yaml),s.languages.tap={fail:/not ok[^#{\n\r]*/,pass:/ok[^#{\n\r]*/,pragma:/pragma [+-][a-z]+/,bailout:/bail out!.*/i,version:/TAP version \d+/i,plan:/\b\d+\.\.\d+(?: +#.*)?/,subtest:{pattern:/# Subtest(?:: .*)?/,greedy:!0},punctuation:/[{}]/,directive:/#.*/,yamlish:{pattern:/(^[ \t]*)---[\s\S]*?[\r\n][ \t]*\.\.\.$/m,lookbehind:!0,inside:s.languages.yaml,alias:"language-yaml"}}}tcl.displayName="tcl";tcl.aliases=[];function tcl(s){s.languages.tcl={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0},string:{pattern:/"(?:[^"\\\r\n]|\\(?:\r\n|[\s\S]))*"/,greedy:!0},variable:[{pattern:/(\$)(?:::)?(?:[a-zA-Z0-9]+::)*\w+/,lookbehind:!0},{pattern:/(\$)\{[^}]+\}/,lookbehind:!0},{pattern:/(^[\t ]*set[ \t]+)(?:::)?(?:[a-zA-Z0-9]+::)*\w+/m,lookbehind:!0}],function:{pattern:/(^[\t ]*proc[ \t]+)\S+/m,lookbehind:!0},builtin:[{pattern:/(^[\t ]*)(?:break|class|continue|error|eval|exit|for|foreach|if|proc|return|switch|while)\b/m,lookbehind:!0},/\b(?:else|elseif)\b/],scope:{pattern:/(^[\t ]*)(?:global|upvar|variable)\b/m,lookbehind:!0,alias:"constant"},keyword:{pattern:/(^[\t ]*|\[)(?:Safe_Base|Tcl|after|append|apply|array|auto_(?:execok|import|load|mkindex|qualify|reset)|automkindex_old|bgerror|binary|catch|cd|chan|clock|close|concat|dde|dict|encoding|eof|exec|expr|fblocked|fconfigure|fcopy|file(?:event|name)?|flush|gets|glob|history|http|incr|info|interp|join|lappend|lassign|lindex|linsert|list|llength|load|lrange|lrepeat|lreplace|lreverse|lsearch|lset|lsort|math(?:func|op)|memory|msgcat|namespace|open|package|parray|pid|pkg_mkIndex|platform|puts|pwd|re_syntax|read|refchan|regexp|registry|regsub|rename|scan|seek|set|socket|source|split|string|subst|tcl(?:_endOfWord|_findLibrary|startOf(?:Next|Previous)Word|test|vars|wordBreak(?:After|Before))|tell|time|tm|trace|unknown|unload|unset|update|uplevel|vwait)\b/m,lookbehind:!0},operator:/!=?|\*\*?|==|&&?|\|\|?|<[=<]?|>[=>]?|[-+~\/%?^]|\b(?:eq|in|ne|ni)\b/,punctuation:/[{}()\[\]]/}}tt2.displayName="tt2";tt2.aliases=[];function tt2(s){s.register(clike),s.register(markupTemplating),(function(n){n.languages.tt2=n.languages.extend("clike",{comment:/#.*|\[%#[\s\S]*?%\]/,keyword:/\b(?:BLOCK|CALL|CASE|CATCH|CLEAR|DEBUG|DEFAULT|ELSE|ELSIF|END|FILTER|FINAL|FOREACH|GET|IF|IN|INCLUDE|INSERT|LAST|MACRO|META|NEXT|PERL|PROCESS|RAWPERL|RETURN|SET|STOP|SWITCH|TAGS|THROW|TRY|UNLESS|USE|WHILE|WRAPPER)\b/,punctuation:/[[\]{},()]/}),n.languages.insertBefore("tt2","number",{operator:/=[>=]?|!=?|<=?|>=?|&&|\|\|?|\b(?:and|not|or)\b/,variable:{pattern:/\b[a-z]\w*(?:\s*\.\s*(?:\d+|\$?[a-z]\w*))*\b/i}}),n.languages.insertBefore("tt2","keyword",{delimiter:{pattern:/^(?:\[%|%%)-?|-?%\]$/,alias:"punctuation"}}),n.languages.insertBefore("tt2","string",{"single-quoted-string":{pattern:/'[^\\']*(?:\\[\s\S][^\\']*)*'/,greedy:!0,alias:"string"},"double-quoted-string":{pattern:/"[^\\"]*(?:\\[\s\S][^\\"]*)*"/,greedy:!0,alias:"string",inside:{variable:{pattern:/\$(?:[a-z]\w*(?:\.(?:\d+|\$?[a-z]\w*))*)/i}}}}),delete n.languages.tt2.string,n.hooks.add("before-tokenize",function(u){var f=/\[%[\s\S]+?%\]/g;n.languages["markup-templating"].buildPlaceholders(u,"tt2",f)}),n.hooks.add("after-tokenize",function(u){n.languages["markup-templating"].tokenizePlaceholders(u,"tt2")})})(s)}toml.displayName="toml";toml.aliases=[];function toml(s){(function(n){var u=/(?:[\w-]+|'[^'\n\r]*'|"(?:\\.|[^\\"\r\n])*")/.source;function f(y){return y.replace(/__/g,function(){return u})}n.languages.toml={comment:{pattern:/#.*/,greedy:!0},table:{pattern:RegExp(f(/(^[\t ]*\[\s*(?:\[\s*)?)__(?:\s*\.\s*__)*(?=\s*\])/.source),"m"),lookbehind:!0,greedy:!0,alias:"class-name"},key:{pattern:RegExp(f(/(^[\t ]*|[{,]\s*)__(?:\s*\.\s*__)*(?=\s*=)/.source),"m"),lookbehind:!0,greedy:!0,alias:"property"},string:{pattern:/"""(?:\\[\s\S]|[^\\])*?"""|'''[\s\S]*?'''|'[^'\n\r]*'|"(?:\\.|[^\\"\r\n])*"/,greedy:!0},date:[{pattern:/\b\d{4}-\d{2}-\d{2}(?:[T\s]\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|[+-]\d{2}:\d{2})?)?\b/i,alias:"number"},{pattern:/\b\d{2}:\d{2}:\d{2}(?:\.\d+)?\b/,alias:"number"}],number:/(?:\b0(?:x[\da-zA-Z]+(?:_[\da-zA-Z]+)*|o[0-7]+(?:_[0-7]+)*|b[10]+(?:_[10]+)*))\b|[-+]?\b\d+(?:_\d+)*(?:\.\d+(?:_\d+)*)?(?:[eE][+-]?\d+(?:_\d+)*)?\b|[-+]?\b(?:inf|nan)\b/,boolean:/\b(?:false|true)\b/,punctuation:/[.,=[\]{}]/}})(s)}tremor.displayName="tremor";tremor.aliases=["trickle","troy"];function tremor(s){(function(n){n.languages.tremor={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},"interpolated-string":null,extractor:{pattern:/\b[a-z_]\w*\|(?:[^\r\n\\|]|\\(?:\r\n|[\s\S]))*\|/i,greedy:!0,inside:{regex:{pattern:/(^re)\|[\s\S]+/,lookbehind:!0},function:/^\w+/,value:/\|[\s\S]+/}},identifier:{pattern:/`[^`]*`/,greedy:!0},function:/\b[a-z_]\w*(?=\s*(?:::\s*<|\())\b/,keyword:/\b(?:args|as|by|case|config|connect|connector|const|copy|create|default|define|deploy|drop|each|emit|end|erase|event|flow|fn|for|from|group|having|insert|into|intrinsic|let|links|match|merge|mod|move|of|operator|patch|pipeline|recur|script|select|set|sliding|state|stream|to|tumbling|update|use|when|where|window|with)\b/,boolean:/\b(?:false|null|true)\b/i,number:/\b(?:0b[01_]*|0x[0-9a-fA-F_]*|\d[\d_]*(?:\.\d[\d_]*)?(?:[Ee][+-]?[\d_]+)?)\b/,"pattern-punctuation":{pattern:/%(?=[({[])/,alias:"punctuation"},operator:/[-+*\/%~!^]=?|=[=>]?|&[&=]?|\|[|=]?|<<?=?|>>?>?=?|(?:absent|and|not|or|present|xor)\b/,punctuation:/::|[;\[\]()\{\},.:]/};var u=/#\{(?:[^"{}]|\{[^{}]*\}|"(?:[^"\\\r\n]|\\(?:\r\n|[\s\S]))*")*\}/.source;n.languages.tremor["interpolated-string"]={pattern:RegExp(/(^|[^\\])/.source+'(?:"""(?:'+/[^"\\#]|\\[\s\S]|"(?!"")|#(?!\{)/.source+"|"+u+')*"""|"(?:'+/[^"\\\r\n#]|\\(?:\r\n|[\s\S])|#(?!\{)/.source+"|"+u+')*")'),lookbehind:!0,greedy:!0,inside:{interpolation:{pattern:RegExp(u),inside:{punctuation:/^#\{|\}$/,expression:{pattern:/[\s\S]+/,inside:n.languages.tremor}}},string:/[\s\S]+/}},n.languages.troy=n.languages.tremor,n.languages.trickle=n.languages.tremor})(s)}typoscript.displayName="typoscript";typoscript.aliases=["tsconfig"];function typoscript(s){(function(n){var u=/\b(?:ACT|ACTIFSUB|CARRAY|CASE|CLEARGIF|COA|COA_INT|CONSTANTS|CONTENT|CUR|EDITPANEL|EFFECT|EXT|FILE|FLUIDTEMPLATE|FORM|FRAME|FRAMESET|GIFBUILDER|GMENU|GMENU_FOLDOUT|GMENU_LAYERS|GP|HMENU|HRULER|HTML|IENV|IFSUB|IMAGE|IMGMENU|IMGMENUITEM|IMGTEXT|IMG_RESOURCE|INCLUDE_TYPOSCRIPT|JSMENU|JSMENUITEM|LLL|LOAD_REGISTER|NO|PAGE|RECORDS|RESTORE_REGISTER|TEMPLATE|TEXT|TMENU|TMENUITEM|TMENU_LAYERS|USER|USER_INT|_GIFBUILDER|global|globalString|globalVar)\b/;n.languages.typoscript={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0},{pattern:/(^|[^\\:= \t]|(?:^|[^= \t])[ \t]+)\/\/.*/,lookbehind:!0,greedy:!0},{pattern:/(^|[^"'])#.*/,lookbehind:!0,greedy:!0}],function:[{pattern:/<INCLUDE_TYPOSCRIPT:\s*source\s*=\s*(?:"[^"\r\n]*"|'[^'\r\n]*')\s*>/,inside:{string:{pattern:/"[^"\r\n]*"|'[^'\r\n]*'/,inside:{keyword:u}},keyword:{pattern:/INCLUDE_TYPOSCRIPT/}}},{pattern:/@import\s*(?:"[^"\r\n]*"|'[^'\r\n]*')/,inside:{string:/"[^"\r\n]*"|'[^'\r\n]*'/}}],string:{pattern:/^([^=]*=[< ]?)(?:(?!\]\n).)*/,lookbehind:!0,inside:{function:/\{\$.*\}/,keyword:u,number:/^\d+$/,punctuation:/[,|:]/}},keyword:u,number:{pattern:/\b\d+\s*[.{=]/,inside:{operator:/[.{=]/}},tag:{pattern:/\.?[-\w\\]+\.?/,inside:{punctuation:/\./}},punctuation:/[{}[\];(),.:|]/,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/},n.languages.tsconfig=n.languages.typoscript})(s)}unrealscript.displayName="unrealscript";unrealscript.aliases=["uc","uscript"];function unrealscript(s){s.languages.unrealscript={comment:/\/\/.*|\/\*[\s\S]*?\*\//,string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},category:{pattern:/(\b(?:(?:autoexpand|hide|show)categories|var)\s*\()[^()]+(?=\))/,lookbehind:!0,greedy:!0,alias:"property"},metadata:{pattern:/(\w\s*)<\s*\w+\s*=[^<>|=\r\n]+(?:\|\s*\w+\s*=[^<>|=\r\n]+)*>/,lookbehind:!0,greedy:!0,inside:{property:/\b\w+(?=\s*=)/,operator:/=/,punctuation:/[<>|]/}},macro:{pattern:/`\w+/,alias:"property"},"class-name":{pattern:/(\b(?:class|enum|extends|interface|state(?:\(\))?|struct|within)\s+)\w+/,lookbehind:!0},keyword:/\b(?:abstract|actor|array|auto|autoexpandcategories|bool|break|byte|case|class|classgroup|client|coerce|collapsecategories|config|const|continue|default|defaultproperties|delegate|dependson|deprecated|do|dontcollapsecategories|editconst|editinlinenew|else|enum|event|exec|export|extends|final|float|for|forcescriptorder|foreach|function|goto|guid|hidecategories|hidedropdown|if|ignores|implements|inherits|input|int|interface|iterator|latent|local|material|name|native|nativereplication|noexport|nontransient|noteditinlinenew|notplaceable|operator|optional|out|pawn|perobjectconfig|perobjectlocalized|placeable|postoperator|preoperator|private|protected|reliable|replication|return|server|showcategories|simulated|singular|state|static|string|struct|structdefault|structdefaultproperties|switch|texture|transient|travel|unreliable|until|var|vector|while|within)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,boolean:/\b(?:false|true)\b/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/>>|<<|--|\+\+|\*\*|[-+*/~!=<>$@]=?|&&?|\|\|?|\^\^?|[?:%]|\b(?:ClockwiseFrom|Cross|Dot)\b/,punctuation:/[()[\]{};,.]/},s.languages.uc=s.languages.uscript=s.languages.unrealscript}uorazor.displayName="uorazor";uorazor.aliases=[];function uorazor(s){s.languages.uorazor={"comment-hash":{pattern:/#.*/,alias:"comment",greedy:!0},"comment-slash":{pattern:/\/\/.*/,alias:"comment",greedy:!0},string:{pattern:/("|')(?:\\.|(?!\1)[^\\\r\n])*\1/,inside:{punctuation:/^['"]|['"]$/},greedy:!0},"source-layers":{pattern:/\b(?:arms|backpack|blue|bracelet|cancel|clear|cloak|criminal|earrings|enemy|facialhair|friend|friendly|gloves|gray|grey|ground|hair|head|innerlegs|innertorso|innocent|lefthand|middletorso|murderer|neck|nonfriendly|onehandedsecondary|outerlegs|outertorso|pants|red|righthand|ring|self|shirt|shoes|talisman|waist)\b/i,alias:"function"},"source-commands":{pattern:/\b(?:alliance|attack|cast|clearall|clearignore|clearjournal|clearlist|clearsysmsg|createlist|createtimer|dclick|dclicktype|dclickvar|dress|dressconfig|drop|droprelloc|emote|getlabel|guild|gumpclose|gumpresponse|hotkey|ignore|lasttarget|lift|lifttype|menu|menuresponse|msg|org|organize|organizer|overhead|pause|poplist|potion|promptresponse|pushlist|removelist|removetimer|rename|restock|say|scav|scavenger|script|setability|setlasttarget|setskill|settimer|setvar|sysmsg|target|targetloc|targetrelloc|targettype|undress|unignore|unsetvar|useobject|useonce|useskill|usetype|virtue|wait|waitforgump|waitformenu|waitforprompt|waitforstat|waitforsysmsg|waitfortarget|walk|wfsysmsg|wft|whisper|yell)\b/,alias:"function"},"tag-name":{pattern:/(^\{%-?\s*)\w+/,lookbehind:!0,alias:"keyword"},delimiter:{pattern:/^\{[{%]-?|-?[%}]\}$/,alias:"punctuation"},function:/\b(?:atlist|close|closest|count|counter|counttype|dead|dex|diffhits|diffmana|diffstam|diffweight|find|findbuff|finddebuff|findlayer|findtype|findtypelist|followers|gumpexists|hidden|hits|hp|hue|human|humanoid|ingump|inlist|insysmessage|insysmsg|int|invul|lhandempty|list|listexists|mana|maxhits|maxhp|maxmana|maxstam|maxweight|monster|mounted|name|next|noto|paralyzed|poisoned|position|prev|previous|queued|rand|random|rhandempty|skill|stam|str|targetexists|timer|timerexists|varexist|warmode|weight)\b/,keyword:/\b(?:and|as|break|continue|else|elseif|endfor|endif|endwhile|for|if|loop|not|or|replay|stop|while)\b/,boolean:/\b(?:false|null|true)\b/,number:/\b0x[\dA-Fa-f]+|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee][-+]?\d+)?/,operator:[{pattern:/(\s)(?:and|b-and|b-or|b-xor|ends with|in|is|matches|not|or|same as|starts with)(?=\s)/,lookbehind:!0},/[=<>]=?|!=|\*\*?|\/\/?|\?:?|[-+~%|]/],punctuation:/[()\[\]{}:.,]/}}v.displayName="v";v.aliases=[];function v(s){s.register(clike),(function(n){var u={pattern:/[\s\S]+/,inside:null};n.languages.v=n.languages.extend("clike",{string:{pattern:/r?(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,alias:"quoted-string",greedy:!0,inside:{interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$(?:\{[^{}]*\}|\w+(?:\.\w+(?:\([^\(\)]*\))?|\[[^\[\]]+\])*)/,lookbehind:!0,inside:{"interpolation-variable":{pattern:/^\$\w[\s\S]*$/,alias:"variable"},"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},"interpolation-expression":u}}}},"class-name":{pattern:/(\b(?:enum|interface|struct|type)\s+)(?:C\.)?\w+/,lookbehind:!0},keyword:/(?:\b(?:__global|as|asm|assert|atomic|break|chan|const|continue|defer|else|embed|enum|fn|for|go(?:to)?|if|import|in|interface|is|lock|match|module|mut|none|or|pub|return|rlock|select|shared|sizeof|static|struct|type(?:of)?|union|unsafe)|\$(?:else|for|if)|#(?:flag|include))\b/,number:/\b(?:0x[a-f\d]+(?:_[a-f\d]+)*|0b[01]+(?:_[01]+)*|0o[0-7]+(?:_[0-7]+)*|\d+(?:_\d+)*(?:\.\d+(?:_\d+)*)?)\b/i,operator:/~|\?|[*\/%^!=]=?|\+[=+]?|-[=-]?|\|[=|]?|&(?:=|&|\^=?)?|>(?:>=?|=)?|<(?:<=?|=|-)?|:=|\.\.\.?/,builtin:/\b(?:any(?:_float|_int)?|bool|byte(?:ptr)?|charptr|f(?:32|64)|i(?:8|16|64|128|nt)|rune|size_t|string|u(?:16|32|64|128)|voidptr)\b/}),u.inside=n.languages.v,n.languages.insertBefore("v","string",{char:{pattern:/`(?:\\`|\\?[^`]{1,2})`/,alias:"rune"}}),n.languages.insertBefore("v","operator",{attribute:{pattern:/(^[\t ]*)\[(?:deprecated|direct_array_access|flag|inline|live|ref_only|typedef|unsafe_fn|windows_stdcall)\]/m,lookbehind:!0,alias:"annotation",inside:{punctuation:/[\[\]]/,keyword:/\w+/}},generic:{pattern:/<\w+>(?=\s*[\)\{])/,inside:{punctuation:/[<>]/,"class-name":/\w+/}}}),n.languages.insertBefore("v","function",{"generic-function":{pattern:/\b\w+\s*<\w+>(?=\()/,inside:{function:/^\w+/,generic:{pattern:/<\w+>/,inside:n.languages.v.generic.inside}}}})})(s)}vala.displayName="vala";vala.aliases=[];function vala(s){s.register(clike),s.languages.vala=s.languages.extend("clike",{"class-name":[{pattern:/\b[A-Z]\w*(?:\.\w+)*\b(?=(?:\?\s+|\*?\s+\*?)\w)/,inside:{punctuation:/\./}},{pattern:/(\[)[A-Z]\w*(?:\.\w+)*\b/,lookbehind:!0,inside:{punctuation:/\./}},{pattern:/(\b(?:class|interface)\s+[A-Z]\w*(?:\.\w+)*\s*:\s*)[A-Z]\w*(?:\.\w+)*\b/,lookbehind:!0,inside:{punctuation:/\./}},{pattern:/((?:\b(?:class|enum|interface|new|struct)\s+)|(?:catch\s+\())[A-Z]\w*(?:\.\w+)*\b/,lookbehind:!0,inside:{punctuation:/\./}}],keyword:/\b(?:abstract|as|assert|async|base|bool|break|case|catch|char|class|const|construct|continue|default|delegate|delete|do|double|dynamic|else|ensures|enum|errordomain|extern|finally|float|for|foreach|get|if|in|inline|int|int16|int32|int64|int8|interface|internal|is|lock|long|namespace|new|null|out|override|owned|params|private|protected|public|ref|requires|return|set|short|signal|sizeof|size_t|ssize_t|static|string|struct|switch|this|throw|throws|try|typeof|uchar|uint|uint16|uint32|uint64|uint8|ulong|unichar|unowned|ushort|using|value|var|virtual|void|volatile|weak|while|yield)\b/i,function:/\b\w+(?=\s*\()/,number:/(?:\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)(?:f|u?l?)?/i,operator:/\+\+|--|&&|\|\||<<=?|>>=?|=>|->|~|[+\-*\/%&^|=!<>]=?|\?\??|\.\.\./,punctuation:/[{}[\];(),.:]/,constant:/\b[A-Z0-9_]+\b/}),s.languages.insertBefore("vala","string",{"raw-string":{pattern:/"""[\s\S]*?"""/,greedy:!0,alias:"string"},"template-string":{pattern:/@"[\s\S]*?"/,greedy:!0,inside:{interpolation:{pattern:/\$(?:\([^)]*\)|[a-zA-Z]\w*)/,inside:{delimiter:{pattern:/^\$\(?|\)$/,alias:"punctuation"},rest:s.languages.vala}},string:/[\s\S]+/}}}),s.languages.insertBefore("vala","keyword",{regex:{pattern:/\/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[imsx]{0,4}(?=\s*(?:$|[\r\n,.;})\]]))/,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:s.languages.regex},"regex-delimiter":/^\//,"regex-flags":/^[a-z]+$/}}})}velocity.displayName="velocity";velocity.aliases=[];function velocity(s){s.register(markup),(function(n){n.languages.velocity=n.languages.extend("markup",{});var u={variable:{pattern:/(^|[^\\](?:\\\\)*)\$!?(?:[a-z][\w-]*(?:\([^)]*\))?(?:\.[a-z][\w-]*(?:\([^)]*\))?|\[[^\]]+\])*|\{[^}]+\})/i,lookbehind:!0,inside:{}},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},number:/\b\d+\b/,boolean:/\b(?:false|true)\b/,operator:/[=!<>]=?|[+*/%-]|&&|\|\||\.\.|\b(?:eq|g[et]|l[et]|n(?:e|ot))\b/,punctuation:/[(){}[\]:,.]/};u.variable.inside={string:u.string,function:{pattern:/([^\w-])[a-z][\w-]*(?=\()/,lookbehind:!0},number:u.number,boolean:u.boolean,punctuation:u.punctuation},n.languages.insertBefore("velocity","comment",{unparsed:{pattern:/(^|[^\\])#\[\[[\s\S]*?\]\]#/,lookbehind:!0,greedy:!0,inside:{punctuation:/^#\[\[|\]\]#$/}},"velocity-comment":[{pattern:/(^|[^\\])#\*[\s\S]*?\*#/,lookbehind:!0,greedy:!0,alias:"comment"},{pattern:/(^|[^\\])##.*/,lookbehind:!0,greedy:!0,alias:"comment"}],directive:{pattern:/(^|[^\\](?:\\\\)*)#@?(?:[a-z][\w-]*|\{[a-z][\w-]*\})(?:\s*\((?:[^()]|\([^()]*\))*\))?/i,lookbehind:!0,inside:{keyword:{pattern:/^#@?(?:[a-z][\w-]*|\{[a-z][\w-]*\})|\bin\b/,inside:{punctuation:/[{}]/}},rest:u}},variable:u.variable}),n.languages.velocity.tag.inside["attr-value"].inside.rest=n.languages.velocity})(s)}verilog.displayName="verilog";verilog.aliases=[];function verilog(s){s.languages.verilog={comment:{pattern:/\/\/.*|\/\*[\s\S]*?\*\//,greedy:!0},string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},"kernel-function":{pattern:/\B\$\w+\b/,alias:"property"},constant:/\B`\w+\b/,function:/\b\w+(?=\()/,keyword:/\b(?:alias|and|assert|assign|assume|automatic|before|begin|bind|bins|binsof|bit|break|buf|bufif0|bufif1|byte|case|casex|casez|cell|chandle|class|clocking|cmos|config|const|constraint|context|continue|cover|covergroup|coverpoint|cross|deassign|default|defparam|design|disable|dist|do|edge|else|end|endcase|endclass|endclocking|endconfig|endfunction|endgenerate|endgroup|endinterface|endmodule|endpackage|endprimitive|endprogram|endproperty|endsequence|endspecify|endtable|endtask|enum|event|expect|export|extends|extern|final|first_match|for|force|foreach|forever|fork|forkjoin|function|generate|genvar|highz0|highz1|if|iff|ifnone|ignore_bins|illegal_bins|import|incdir|include|initial|inout|input|inside|instance|int|integer|interface|intersect|join|join_any|join_none|large|liblist|library|local|localparam|logic|longint|macromodule|matches|medium|modport|module|nand|negedge|new|nmos|nor|noshowcancelled|not|notif0|notif1|null|or|output|package|packed|parameter|pmos|posedge|primitive|priority|program|property|protected|pull0|pull1|pulldown|pullup|pulsestyle_ondetect|pulsestyle_onevent|pure|rand|randc|randcase|randsequence|rcmos|real|realtime|ref|reg|release|repeat|return|rnmos|rpmos|rtran|rtranif0|rtranif1|scalared|sequence|shortint|shortreal|showcancelled|signed|small|solve|specify|specparam|static|string|strong0|strong1|struct|super|supply0|supply1|table|tagged|task|this|throughout|time|timeprecision|timeunit|tran|tranif0|tranif1|tri|tri0|tri1|triand|trior|trireg|type|typedef|union|unique|unsigned|use|uwire|var|vectored|virtual|void|wait|wait_order|wand|weak0|weak1|while|wildcard|wire|with|within|wor|xnor|xor)\b/,important:/\b(?:always|always_comb|always_ff|always_latch)\b(?: *@)?/,number:/\B##?\d+|(?:\b\d+)?'[odbh] ?[\da-fzx_?]+|\b(?:\d*[._])?\d+(?:e[-+]?\d+)?/i,operator:/[-+{}^~%*\/?=!<>&|]+/,punctuation:/[[\];(),.:]/}}vhdl.displayName="vhdl";vhdl.aliases=[];function vhdl(s){s.languages.vhdl={comment:/--.+/,"vhdl-vectors":{pattern:/\b[oxb]"[\da-f_]+"|"[01uxzwlh-]+"/i,alias:"number"},"quoted-function":{pattern:/"\S+?"(?=\()/,alias:"function"},string:/"(?:[^\\"\r\n]|\\(?:\r\n|[\s\S]))*"/,attribute:{pattern:/\b'\w+/,alias:"attr-name"},keyword:/\b(?:access|after|alias|all|architecture|array|assert|attribute|begin|block|body|buffer|bus|case|component|configuration|constant|disconnect|downto|else|elsif|end|entity|exit|file|for|function|generate|generic|group|guarded|if|impure|in|inertial|inout|is|label|library|linkage|literal|loop|map|new|next|null|of|on|open|others|out|package|port|postponed|private|procedure|process|pure|range|record|register|reject|report|return|select|severity|shared|signal|subtype|then|to|transport|type|unaffected|units|until|use|variable|view|wait|when|while|with)\b/i,boolean:/\b(?:false|true)\b/i,function:/\w+(?=\()/,number:/'[01uxzwlh-]'|\b(?:\d+#[\da-f_.]+#|\d[\d_.]*)(?:e[-+]?\d+)?/i,operator:/[<>]=?|:=|[-+*/&=]|\b(?:abs|and|mod|nand|nor|not|or|rem|rol|ror|sla|sll|sra|srl|xnor|xor)\b/i,punctuation:/[{}[\];(),.:]/}}vim.displayName="vim";vim.aliases=[];function vim(s){s.languages.vim={string:/"(?:[^"\\\r\n]|\\.)*"|'(?:[^'\r\n]|'')*'/,comment:/".*/,function:/\b\w+(?=\()/,keyword:/\b(?:N|Next|P|Print|X|XMLent|XMLns|ab|abbreviate|abc|abclear|abo|aboveleft|al|all|ar|arga|argadd|argd|argdelete|argdo|arge|argedit|argg|argglobal|argl|arglocal|args|argu|argument|as|ascii|b|bN|bNext|ba|bad|badd|ball|bd|bdelete|be|bel|belowright|bf|bfirst|bl|blast|bm|bmodified|bn|bnext|bo|botright|bp|bprevious|br|brea|break|breaka|breakadd|breakd|breakdel|breakl|breaklist|brewind|bro|browse|bufdo|buffer|buffers|bun|bunload|bw|bwipeout|c|cN|cNext|cNfcNfile|ca|cabbrev|cabc|cabclear|cad|caddb|caddbuffer|caddexpr|caddf|caddfile|cal|call|cat|catch|cb|cbuffer|cc|ccl|cclose|cd|ce|center|cex|cexpr|cf|cfile|cfir|cfirst|cg|cgetb|cgetbuffer|cgete|cgetexpr|cgetfile|change|changes|chd|chdir|che|checkpath|checkt|checktime|cl|cla|clast|clist|clo|close|cmapc|cmapclear|cn|cnew|cnewer|cnext|cnf|cnfile|cnorea|cnoreabbrev|co|col|colder|colo|colorscheme|comc|comclear|comp|compiler|con|conf|confirm|continue|cope|copen|copy|cp|cpf|cpfile|cprevious|cq|cquit|cr|crewind|cu|cuna|cunabbrev|cunmap|cw|cwindow|d|debugg|debuggreedy|delc|delcommand|delete|delf|delfunction|delm|delmarks|di|diffg|diffget|diffoff|diffpatch|diffpu|diffput|diffsplit|diffthis|diffu|diffupdate|dig|digraphs|display|dj|djump|dl|dlist|dr|drop|ds|dsearch|dsp|dsplit|e|earlier|echoe|echoerr|echom|echomsg|echon|edit|el|else|elsei|elseif|em|emenu|en|endf|endfo|endfor|endfun|endfunction|endif|endt|endtry|endw|endwhile|ene|enew|ex|exi|exit|exu|exusage|f|file|files|filetype|fin|fina|finally|find|fini|finish|fir|first|fix|fixdel|fo|fold|foldc|foldclose|foldd|folddoc|folddoclosed|folddoopen|foldo|foldopen|for|fu|fun|function|go|goto|gr|grep|grepa|grepadd|h|ha|hardcopy|help|helpf|helpfind|helpg|helpgrep|helpt|helptags|hid|hide|his|history|ia|iabbrev|iabc|iabclear|if|ij|ijump|il|ilist|imapc|imapclear|in|inorea|inoreabbrev|isearch|isp|isplit|iu|iuna|iunabbrev|iunmap|j|join|ju|jumps|k|kee|keepalt|keepj|keepjumps|keepmarks|l|lN|lNext|lNf|lNfile|la|lad|laddb|laddbuffer|laddexpr|laddf|laddfile|lan|language|last|later|lb|lbuffer|lc|lcd|lch|lchdir|lcl|lclose|left|lefta|leftabove|let|lex|lexpr|lf|lfile|lfir|lfirst|lg|lgetb|lgetbuffer|lgete|lgetexpr|lgetfile|lgr|lgrep|lgrepa|lgrepadd|lh|lhelpgrep|list|ll|lla|llast|lli|llist|lm|lmak|lmake|lmap|lmapc|lmapclear|ln|lne|lnew|lnewer|lnext|lnf|lnfile|lnoremap|lo|loadview|loc|lockmarks|lockv|lockvar|lol|lolder|lop|lopen|lp|lpf|lpfile|lprevious|lr|lrewind|ls|lt|ltag|lu|lunmap|lv|lvimgrep|lvimgrepa|lvimgrepadd|lw|lwindow|m|ma|mak|make|mark|marks|mat|match|menut|menutranslate|mk|mkexrc|mks|mksession|mksp|mkspell|mkv|mkvie|mkview|mkvimrc|mod|mode|move|mz|mzf|mzfile|mzscheme|n|nbkey|new|next|nmapc|nmapclear|noh|nohlsearch|norea|noreabbrev|nu|number|nun|nunmap|o|omapc|omapclear|on|only|open|opt|options|ou|ounmap|p|pc|pclose|pe|ped|pedit|perl|perld|perldo|po|pop|popu|popup|pp|ppop|pre|preserve|prev|previous|print|prof|profd|profdel|profile|promptf|promptfind|promptr|promptrepl|ps|psearch|ptN|ptNext|pta|ptag|ptf|ptfirst|ptj|ptjump|ptl|ptlast|ptn|ptnext|ptp|ptprevious|ptr|ptrewind|pts|ptselect|pu|put|pw|pwd|py|pyf|pyfile|python|q|qa|qall|quit|quita|quitall|r|read|rec|recover|red|redi|redir|redo|redr|redraw|redraws|redrawstatus|reg|registers|res|resize|ret|retab|retu|return|rew|rewind|ri|right|rightb|rightbelow|ru|rub|ruby|rubyd|rubydo|rubyf|rubyfile|runtime|rv|rviminfo|sN|sNext|sa|sal|sall|san|sandbox|sargument|sav|saveas|sb|sbN|sbNext|sba|sball|sbf|sbfirst|sbl|sblast|sbm|sbmodified|sbn|sbnext|sbp|sbprevious|sbr|sbrewind|sbuffer|scrip|scripte|scriptencoding|scriptnames|se|set|setf|setfiletype|setg|setglobal|setl|setlocal|sf|sfind|sfir|sfirst|sh|shell|sign|sil|silent|sim|simalt|sl|sla|slast|sleep|sm|smagic|smap|smapc|smapclear|sme|smenu|sn|snext|sni|sniff|sno|snomagic|snor|snoremap|snoreme|snoremenu|so|sor|sort|source|sp|spe|spelld|spelldump|spellgood|spelli|spellinfo|spellr|spellrepall|spellu|spellundo|spellw|spellwrong|split|spr|sprevious|sre|srewind|st|sta|stag|star|startg|startgreplace|startinsert|startr|startreplace|stj|stjump|stop|stopi|stopinsert|sts|stselect|sun|sunhide|sunm|sunmap|sus|suspend|sv|sview|syncbind|t|tN|tNext|ta|tab|tabN|tabNext|tabc|tabclose|tabd|tabdo|tabe|tabedit|tabf|tabfind|tabfir|tabfirst|tabl|tablast|tabm|tabmove|tabn|tabnew|tabnext|tabo|tabonly|tabp|tabprevious|tabr|tabrewind|tabs|tag|tags|tc|tcl|tcld|tcldo|tclf|tclfile|te|tearoff|tf|tfirst|th|throw|tj|tjump|tl|tlast|tm|tmenu|tn|tnext|to|topleft|tp|tprevious|tr|trewind|try|ts|tselect|tu|tunmenu|u|una|unabbreviate|undo|undoj|undojoin|undol|undolist|unh|unhide|unlet|unlo|unlockvar|unm|unmap|up|update|ve|verb|verbose|version|vert|vertical|vi|vie|view|vim|vimgrep|vimgrepa|vimgrepadd|visual|viu|viusage|vmapc|vmapclear|vne|vnew|vs|vsplit|vu|vunmap|w|wN|wNext|wa|wall|wh|while|win|winc|wincmd|windo|winp|winpos|winsize|wn|wnext|wp|wprevious|wq|wqa|wqall|write|ws|wsverb|wv|wviminfo|x|xa|xall|xit|xm|xmap|xmapc|xmapclear|xme|xmenu|xn|xnoremap|xnoreme|xnoremenu|xu|xunmap|y|yank)\b/,builtin:/\b(?:acd|ai|akm|aleph|allowrevins|altkeymap|ambiwidth|ambw|anti|antialias|arab|arabic|arabicshape|ari|arshape|autochdir|autocmd|autoindent|autoread|autowrite|autowriteall|aw|awa|background|backspace|backup|backupcopy|backupdir|backupext|backupskip|balloondelay|ballooneval|balloonexpr|bdir|bdlay|beval|bex|bexpr|bg|bh|bin|binary|biosk|bioskey|bk|bkc|bomb|breakat|brk|browsedir|bs|bsdir|bsk|bt|bufhidden|buflisted|buftype|casemap|ccv|cdpath|cedit|cfu|ch|charconvert|ci|cin|cindent|cink|cinkeys|cino|cinoptions|cinw|cinwords|clipboard|cmdheight|cmdwinheight|cmp|cms|columns|com|comments|commentstring|compatible|complete|completefunc|completeopt|consk|conskey|copyindent|cot|cpo|cpoptions|cpt|cscopepathcomp|cscopeprg|cscopequickfix|cscopetag|cscopetagorder|cscopeverbose|cspc|csprg|csqf|cst|csto|csverb|cuc|cul|cursorcolumn|cursorline|cwh|debug|deco|def|define|delcombine|dex|dg|dict|dictionary|diff|diffexpr|diffopt|digraph|dip|dir|directory|dy|ea|ead|eadirection|eb|ed|edcompatible|ef|efm|ei|ek|enc|encoding|endofline|eol|ep|equalalways|equalprg|errorbells|errorfile|errorformat|esckeys|et|eventignore|expandtab|exrc|fcl|fcs|fdc|fde|fdi|fdl|fdls|fdm|fdn|fdo|fdt|fen|fenc|fencs|fex|ff|ffs|fileencoding|fileencodings|fileformat|fileformats|fillchars|fk|fkmap|flp|fml|fmr|foldcolumn|foldenable|foldexpr|foldignore|foldlevel|foldlevelstart|foldmarker|foldmethod|foldminlines|foldnestmax|foldtext|formatexpr|formatlistpat|formatoptions|formatprg|fp|fs|fsync|ft|gcr|gd|gdefault|gfm|gfn|gfs|gfw|ghr|gp|grepformat|grepprg|gtl|gtt|guicursor|guifont|guifontset|guifontwide|guiheadroom|guioptions|guipty|guitablabel|guitabtooltip|helpfile|helpheight|helplang|hf|hh|hi|hidden|highlight|hk|hkmap|hkmapp|hkp|hl|hlg|hls|hlsearch|ic|icon|iconstring|ignorecase|im|imactivatekey|imak|imc|imcmdline|imd|imdisable|imi|iminsert|ims|imsearch|inc|include|includeexpr|incsearch|inde|indentexpr|indentkeys|indk|inex|inf|infercase|insertmode|invacd|invai|invakm|invallowrevins|invaltkeymap|invanti|invantialias|invar|invarab|invarabic|invarabicshape|invari|invarshape|invautochdir|invautoindent|invautoread|invautowrite|invautowriteall|invaw|invawa|invbackup|invballooneval|invbeval|invbin|invbinary|invbiosk|invbioskey|invbk|invbl|invbomb|invbuflisted|invcf|invci|invcin|invcindent|invcompatible|invconfirm|invconsk|invconskey|invcopyindent|invcp|invcscopetag|invcscopeverbose|invcst|invcsverb|invcuc|invcul|invcursorcolumn|invcursorline|invdeco|invdelcombine|invdg|invdiff|invdigraph|invdisable|invea|inveb|inved|invedcompatible|invek|invendofline|inveol|invequalalways|inverrorbells|invesckeys|invet|invex|invexpandtab|invexrc|invfen|invfk|invfkmap|invfoldenable|invgd|invgdefault|invguipty|invhid|invhidden|invhk|invhkmap|invhkmapp|invhkp|invhls|invhlsearch|invic|invicon|invignorecase|invim|invimc|invimcmdline|invimd|invincsearch|invinf|invinfercase|invinsertmode|invis|invjoinspaces|invjs|invlazyredraw|invlbr|invlinebreak|invlisp|invlist|invloadplugins|invlpl|invlz|invma|invmacatsui|invmagic|invmh|invml|invmod|invmodeline|invmodifiable|invmodified|invmore|invmousef|invmousefocus|invmousehide|invnu|invnumber|invodev|invopendevice|invpaste|invpi|invpreserveindent|invpreviewwindow|invprompt|invpvw|invreadonly|invremap|invrestorescreen|invrevins|invri|invrightleft|invrightleftcmd|invrl|invrlc|invro|invrs|invru|invruler|invsb|invsc|invscb|invscrollbind|invscs|invsecure|invsft|invshellslash|invshelltemp|invshiftround|invshortname|invshowcmd|invshowfulltag|invshowmatch|invshowmode|invsi|invsm|invsmartcase|invsmartindent|invsmarttab|invsmd|invsn|invsol|invspell|invsplitbelow|invsplitright|invspr|invsr|invssl|invsta|invstartofline|invstmp|invswapfile|invswf|invta|invtagbsearch|invtagrelative|invtagstack|invtbi|invtbidi|invtbs|invtermbidi|invterse|invtextauto|invtextmode|invtf|invtgst|invtildeop|invtimeout|invtitle|invto|invtop|invtr|invttimeout|invttybuiltin|invttyfast|invtx|invvb|invvisualbell|invwa|invwarn|invwb|invweirdinvert|invwfh|invwfw|invwildmenu|invwinfixheight|invwinfixwidth|invwiv|invwmnu|invwrap|invwrapscan|invwrite|invwriteany|invwritebackup|invws|isf|isfname|isi|isident|isk|iskeyword|isprint|joinspaces|js|key|keymap|keymodel|keywordprg|km|kmp|kp|langmap|langmenu|laststatus|lazyredraw|lbr|lcs|linebreak|lines|linespace|lisp|lispwords|listchars|loadplugins|lpl|lsp|lz|macatsui|magic|makeef|makeprg|matchpairs|matchtime|maxcombine|maxfuncdepth|maxmapdepth|maxmem|maxmempattern|maxmemtot|mco|mef|menuitems|mfd|mh|mis|mkspellmem|ml|mls|mm|mmd|mmp|mmt|modeline|modelines|modifiable|modified|more|mouse|mousef|mousefocus|mousehide|mousem|mousemodel|mouses|mouseshape|mouset|mousetime|mp|mps|msm|mzq|mzquantum|nf|noacd|noai|noakm|noallowrevins|noaltkeymap|noanti|noantialias|noar|noarab|noarabic|noarabicshape|noari|noarshape|noautochdir|noautoindent|noautoread|noautowrite|noautowriteall|noaw|noawa|nobackup|noballooneval|nobeval|nobin|nobinary|nobiosk|nobioskey|nobk|nobl|nobomb|nobuflisted|nocf|noci|nocin|nocindent|nocompatible|noconfirm|noconsk|noconskey|nocopyindent|nocp|nocscopetag|nocscopeverbose|nocst|nocsverb|nocuc|nocul|nocursorcolumn|nocursorline|nodeco|nodelcombine|nodg|nodiff|nodigraph|nodisable|noea|noeb|noed|noedcompatible|noek|noendofline|noeol|noequalalways|noerrorbells|noesckeys|noet|noex|noexpandtab|noexrc|nofen|nofk|nofkmap|nofoldenable|nogd|nogdefault|noguipty|nohid|nohidden|nohk|nohkmap|nohkmapp|nohkp|nohls|noic|noicon|noignorecase|noim|noimc|noimcmdline|noimd|noincsearch|noinf|noinfercase|noinsertmode|nois|nojoinspaces|nojs|nolazyredraw|nolbr|nolinebreak|nolisp|nolist|noloadplugins|nolpl|nolz|noma|nomacatsui|nomagic|nomh|noml|nomod|nomodeline|nomodifiable|nomodified|nomore|nomousef|nomousefocus|nomousehide|nonu|nonumber|noodev|noopendevice|nopaste|nopi|nopreserveindent|nopreviewwindow|noprompt|nopvw|noreadonly|noremap|norestorescreen|norevins|nori|norightleft|norightleftcmd|norl|norlc|noro|nors|noru|noruler|nosb|nosc|noscb|noscrollbind|noscs|nosecure|nosft|noshellslash|noshelltemp|noshiftround|noshortname|noshowcmd|noshowfulltag|noshowmatch|noshowmode|nosi|nosm|nosmartcase|nosmartindent|nosmarttab|nosmd|nosn|nosol|nospell|nosplitbelow|nosplitright|nospr|nosr|nossl|nosta|nostartofline|nostmp|noswapfile|noswf|nota|notagbsearch|notagrelative|notagstack|notbi|notbidi|notbs|notermbidi|noterse|notextauto|notextmode|notf|notgst|notildeop|notimeout|notitle|noto|notop|notr|nottimeout|nottybuiltin|nottyfast|notx|novb|novisualbell|nowa|nowarn|nowb|noweirdinvert|nowfh|nowfw|nowildmenu|nowinfixheight|nowinfixwidth|nowiv|nowmnu|nowrap|nowrapscan|nowrite|nowriteany|nowritebackup|nows|nrformats|numberwidth|nuw|odev|oft|ofu|omnifunc|opendevice|operatorfunc|opfunc|osfiletype|pa|para|paragraphs|paste|pastetoggle|patchexpr|patchmode|path|pdev|penc|pex|pexpr|pfn|ph|pheader|pi|pm|pmbcs|pmbfn|popt|preserveindent|previewheight|previewwindow|printdevice|printencoding|printexpr|printfont|printheader|printmbcharset|printmbfont|printoptions|prompt|pt|pumheight|pvh|pvw|qe|quoteescape|readonly|remap|report|restorescreen|revins|rightleft|rightleftcmd|rl|rlc|ro|rs|rtp|ruf|ruler|rulerformat|runtimepath|sbo|sc|scb|scr|scroll|scrollbind|scrolljump|scrolloff|scrollopt|scs|sect|sections|secure|sel|selection|selectmode|sessionoptions|sft|shcf|shellcmdflag|shellpipe|shellquote|shellredir|shellslash|shelltemp|shelltype|shellxquote|shiftround|shiftwidth|shm|shortmess|shortname|showbreak|showcmd|showfulltag|showmatch|showmode|showtabline|shq|si|sidescroll|sidescrolloff|siso|sj|slm|smartcase|smartindent|smarttab|smc|smd|softtabstop|sol|spc|spell|spellcapcheck|spellfile|spelllang|spellsuggest|spf|spl|splitbelow|splitright|sps|sr|srr|ss|ssl|ssop|stal|startofline|statusline|stl|stmp|su|sua|suffixes|suffixesadd|sw|swapfile|swapsync|swb|swf|switchbuf|sws|sxq|syn|synmaxcol|syntax|t_AB|t_AF|t_AL|t_CS|t_CV|t_Ce|t_Co|t_Cs|t_DL|t_EI|t_F1|t_F2|t_F3|t_F4|t_F5|t_F6|t_F7|t_F8|t_F9|t_IE|t_IS|t_K1|t_K3|t_K4|t_K5|t_K6|t_K7|t_K8|t_K9|t_KA|t_KB|t_KC|t_KD|t_KE|t_KF|t_KG|t_KH|t_KI|t_KJ|t_KK|t_KL|t_RI|t_RV|t_SI|t_Sb|t_Sf|t_WP|t_WS|t_ZH|t_ZR|t_al|t_bc|t_cd|t_ce|t_cl|t_cm|t_cs|t_da|t_db|t_dl|t_fs|t_k1|t_k2|t_k3|t_k4|t_k5|t_k6|t_k7|t_k8|t_k9|t_kB|t_kD|t_kI|t_kN|t_kP|t_kb|t_kd|t_ke|t_kh|t_kl|t_kr|t_ks|t_ku|t_le|t_mb|t_md|t_me|t_mr|t_ms|t_nd|t_op|t_se|t_so|t_sr|t_te|t_ti|t_ts|t_ue|t_us|t_ut|t_vb|t_ve|t_vi|t_vs|t_xs|tabline|tabpagemax|tabstop|tagbsearch|taglength|tagrelative|tagstack|tal|tb|tbi|tbidi|tbis|tbs|tenc|term|termbidi|termencoding|terse|textauto|textmode|textwidth|tgst|thesaurus|tildeop|timeout|timeoutlen|title|titlelen|titleold|titlestring|toolbar|toolbariconsize|top|tpm|tsl|tsr|ttimeout|ttimeoutlen|ttm|tty|ttybuiltin|ttyfast|ttym|ttymouse|ttyscroll|ttytype|tw|tx|uc|ul|undolevels|updatecount|updatetime|ut|vb|vbs|vdir|verbosefile|vfile|viewdir|viewoptions|viminfo|virtualedit|visualbell|vop|wak|warn|wb|wc|wcm|wd|weirdinvert|wfh|wfw|whichwrap|wi|wig|wildchar|wildcharm|wildignore|wildmenu|wildmode|wildoptions|wim|winaltkeys|window|winfixheight|winfixwidth|winheight|winminheight|winminwidth|winwidth|wiv|wiw|wm|wmh|wmnu|wmw|wop|wrap|wrapmargin|wrapscan|writeany|writebackup|writedelay|ww)\b/,number:/\b(?:0x[\da-f]+|\d+(?:\.\d+)?)\b/i,operator:/\|\||&&|[-+.]=?|[=!](?:[=~][#?]?)?|[<>]=?[#?]?|[*\/%?]|\b(?:is(?:not)?)\b/,punctuation:/[{}[\](),;:]/}}visualBasic.displayName="visual-basic";visualBasic.aliases=["vb","vba"];function visualBasic(s){s.languages["visual-basic"]={comment:{pattern:/(?:[']|REM\b)(?:[^\r\n_]|_(?:\r\n?|\n)?)*/i,inside:{keyword:/^REM/i}},directive:{pattern:/#(?:Const|Else|ElseIf|End|ExternalChecksum|ExternalSource|If|Region)(?:\b_[ \t]*(?:\r\n?|\n)|.)+/i,alias:"property",greedy:!0},string:{pattern:/\$?["](?:["]{2}|[^"])*["]C?/i,greedy:!0},date:{pattern:/#[ \t]*(?:\d+([/-])\d+\1\d+(?:[ \t]+(?:\d+[ \t]*(?:AM|PM)|\d+:\d+(?::\d+)?(?:[ \t]*(?:AM|PM))?))?|\d+[ \t]*(?:AM|PM)|\d+:\d+(?::\d+)?(?:[ \t]*(?:AM|PM))?)[ \t]*#/i,alias:"number"},number:/(?:(?:\b\d+(?:\.\d+)?|\.\d+)(?:E[+-]?\d+)?|&[HO][\dA-F]+)(?:[FRD]|U?[ILS])?/i,boolean:/\b(?:False|Nothing|True)\b/i,keyword:/\b(?:AddHandler|AddressOf|Alias|And(?:Also)?|As|Boolean|ByRef|Byte|ByVal|Call|Case|Catch|C(?:Bool|Byte|Char|Date|Dbl|Dec|Int|Lng|Obj|SByte|Short|Sng|Str|Type|UInt|ULng|UShort)|Char|Class|Const|Continue|Currency|Date|Decimal|Declare|Default|Delegate|Dim|DirectCast|Do|Double|Each|Else(?:If)?|End(?:If)?|Enum|Erase|Error|Event|Exit|Finally|For|Friend|Function|Get(?:Type|XMLNamespace)?|Global|GoSub|GoTo|Handles|If|Implements|Imports|In|Inherits|Integer|Interface|Is|IsNot|Let|Lib|Like|Long|Loop|Me|Mod|Module|Must(?:Inherit|Override)|My(?:Base|Class)|Namespace|Narrowing|New|Next|Not(?:Inheritable|Overridable)?|Object|Of|On|Operator|Option(?:al)?|Or(?:Else)?|Out|Overloads|Overridable|Overrides|ParamArray|Partial|Private|Property|Protected|Public|RaiseEvent|ReadOnly|ReDim|RemoveHandler|Resume|Return|SByte|Select|Set|Shadows|Shared|short|Single|Static|Step|Stop|String|Structure|Sub|SyncLock|Then|Throw|To|Try|TryCast|Type|TypeOf|U(?:Integer|Long|Short)|Until|Using|Variant|Wend|When|While|Widening|With(?:Events)?|WriteOnly|Xor)\b/i,operator:/[+\-*/\\^<=>&#@$%!]|\b_(?=[ \t]*[\r\n])/,punctuation:/[{}().,:?]/},s.languages.vb=s.languages["visual-basic"],s.languages.vba=s.languages["visual-basic"]}warpscript.displayName="warpscript";warpscript.aliases=[];function warpscript(s){s.languages.warpscript={comment:/#.*|\/\/.*|\/\*[\s\S]*?\*\//,string:{pattern:/"(?:[^"\\\r\n]|\\.)*"|'(?:[^'\\\r\n]|\\.)*'|<'(?:[^\\']|'(?!>)|\\.)*'>/,greedy:!0},variable:/\$\S+/,macro:{pattern:/@\S+/,alias:"property"},keyword:/\b(?:BREAK|CHECKMACRO|CONTINUE|CUDF|DEFINED|DEFINEDMACRO|EVAL|FAIL|FOR|FOREACH|FORSTEP|IFT|IFTE|MSGFAIL|NRETURN|RETHROW|RETURN|SWITCH|TRY|UDF|UNTIL|WHILE)\b/,number:/[+-]?\b(?:NaN|Infinity|\d+(?:\.\d*)?(?:[Ee][+-]?\d+)?|0x[\da-fA-F]+|0b[01]+)\b/,boolean:/\b(?:F|T|false|true)\b/,punctuation:/<%|%>|[{}[\]()]/,operator:/==|&&?|\|\|?|\*\*?|>>>?|<<|[<>!~]=?|[-/%^]|\+!?|\b(?:AND|NOT|OR)\b/}}wasm.displayName="wasm";wasm.aliases=[];function wasm(s){s.languages.wasm={comment:[/\(;[\s\S]*?;\)/,{pattern:/;;.*/,greedy:!0}],string:{pattern:/"(?:\\[\s\S]|[^"\\])*"/,greedy:!0},keyword:[{pattern:/\b(?:align|offset)=/,inside:{operator:/=/}},{pattern:/\b(?:(?:f32|f64|i32|i64)(?:\.(?:abs|add|and|ceil|clz|const|convert_[su]\/i(?:32|64)|copysign|ctz|demote\/f64|div(?:_[su])?|eqz?|extend_[su]\/i32|floor|ge(?:_[su])?|gt(?:_[su])?|le(?:_[su])?|load(?:(?:8|16|32)_[su])?|lt(?:_[su])?|max|min|mul|neg?|nearest|or|popcnt|promote\/f32|reinterpret\/[fi](?:32|64)|rem_[su]|rot[lr]|shl|shr_[su]|sqrt|store(?:8|16|32)?|sub|trunc(?:_[su]\/f(?:32|64))?|wrap\/i64|xor))?|memory\.(?:grow|size))\b/,inside:{punctuation:/\./}},/\b(?:anyfunc|block|br(?:_if|_table)?|call(?:_indirect)?|data|drop|elem|else|end|export|func|get_(?:global|local)|global|if|import|local|loop|memory|module|mut|nop|offset|param|result|return|select|set_(?:global|local)|start|table|tee_local|then|type|unreachable)\b/],variable:/\$[\w!#$%&'*+\-./:<=>?@\\^`|~]+/,number:/[+-]?\b(?:\d(?:_?\d)*(?:\.\d(?:_?\d)*)?(?:[eE][+-]?\d(?:_?\d)*)?|0x[\da-fA-F](?:_?[\da-fA-F])*(?:\.[\da-fA-F](?:_?[\da-fA-D])*)?(?:[pP][+-]?\d(?:_?\d)*)?)\b|\binf\b|\bnan(?::0x[\da-fA-F](?:_?[\da-fA-D])*)?\b/,punctuation:/[()]/}}webIdl.displayName="web-idl";webIdl.aliases=["webidl"];function webIdl(s){(function(n){var u=/(?:\B-|\b_|\b)[A-Za-z][\w-]*(?![\w-])/.source,f="(?:"+/\b(?:unsigned\s+)?long\s+long(?![\w-])/.source+"|"+/\b(?:unrestricted|unsigned)\s+[a-z]+(?![\w-])/.source+"|"+/(?!(?:unrestricted|unsigned)\b)/.source+u+/(?:\s*<(?:[^<>]|<[^<>]*>)*>)?/.source+")"+/(?:\s*\?)?/.source,y={};n.languages["web-idl"]={comment:{pattern:/\/\/.*|\/\*[\s\S]*?\*\//,greedy:!0},string:{pattern:/"[^"]*"/,greedy:!0},namespace:{pattern:RegExp(/(\bnamespace\s+)/.source+u),lookbehind:!0},"class-name":[{pattern:/(^|[^\w-])(?:iterable|maplike|setlike)\s*<(?:[^<>]|<[^<>]*>)*>/,lookbehind:!0,inside:y},{pattern:RegExp(/(\b(?:attribute|const|deleter|getter|optional|setter)\s+)/.source+f),lookbehind:!0,inside:y},{pattern:RegExp("("+/\bcallback\s+/.source+u+/\s*=\s*/.source+")"+f),lookbehind:!0,inside:y},{pattern:RegExp(/(\btypedef\b\s*)/.source+f),lookbehind:!0,inside:y},{pattern:RegExp(/(\b(?:callback|dictionary|enum|interface(?:\s+mixin)?)\s+)(?!(?:interface|mixin)\b)/.source+u),lookbehind:!0},{pattern:RegExp(/(:\s*)/.source+u),lookbehind:!0},RegExp(u+/(?=\s+(?:implements|includes)\b)/.source),{pattern:RegExp(/(\b(?:implements|includes)\s+)/.source+u),lookbehind:!0},{pattern:RegExp(f+"(?="+/\s*(?:\.{3}\s*)?/.source+u+/\s*[(),;=]/.source+")"),inside:y}],builtin:/\b(?:ArrayBuffer|BigInt64Array|BigUint64Array|ByteString|DOMString|DataView|Float32Array|Float64Array|FrozenArray|Int16Array|Int32Array|Int8Array|ObservableArray|Promise|USVString|Uint16Array|Uint32Array|Uint8Array|Uint8ClampedArray)\b/,keyword:[/\b(?:async|attribute|callback|const|constructor|deleter|dictionary|enum|getter|implements|includes|inherit|interface|mixin|namespace|null|optional|or|partial|readonly|required|setter|static|stringifier|typedef|unrestricted)\b/,/\b(?:any|bigint|boolean|byte|double|float|iterable|long|maplike|object|octet|record|sequence|setlike|short|symbol|undefined|unsigned|void)\b/],boolean:/\b(?:false|true)\b/,number:{pattern:/(^|[^\w-])-?(?:0x[0-9a-f]+|(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?|NaN|Infinity)(?![\w-])/i,lookbehind:!0},operator:/\.{3}|[=:?<>-]/,punctuation:/[(){}[\].,;]/};for(var S in n.languages["web-idl"])S!=="class-name"&&(y[S]=n.languages["web-idl"][S]);n.languages.webidl=n.languages["web-idl"]})(s)}wgsl.displayName="wgsl";wgsl.aliases=[];function wgsl(s){s.languages.wgsl={comment:{pattern:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},"builtin-attribute":{pattern:/(@)builtin\(.*?\)/,lookbehind:!0,inside:{attribute:{pattern:/^builtin/,alias:"attr-name"},punctuation:/[(),]/,"built-in-values":{pattern:/\b(?:frag_depth|front_facing|global_invocation_id|instance_index|local_invocation_id|local_invocation_index|num_workgroups|position|sample_index|sample_mask|vertex_index|workgroup_id)\b/,alias:"attr-value"}}},attributes:{pattern:/(@)(?:align|binding|compute|const|fragment|group|id|interpolate|invariant|location|size|vertex|workgroup_size)/i,lookbehind:!0,alias:"attr-name"},functions:{pattern:/\b(fn\s+)[_a-zA-Z]\w*(?=[(<])/,lookbehind:!0,alias:"function"},keyword:/\b(?:bitcast|break|case|const|continue|continuing|default|discard|else|enable|fallthrough|fn|for|function|if|let|loop|private|return|storage|struct|switch|type|uniform|var|while|workgroup)\b/,builtin:/\b(?:abs|acos|acosh|all|any|array|asin|asinh|atan|atan2|atanh|atomic|atomicAdd|atomicAnd|atomicCompareExchangeWeak|atomicExchange|atomicLoad|atomicMax|atomicMin|atomicOr|atomicStore|atomicSub|atomicXor|bool|ceil|clamp|cos|cosh|countLeadingZeros|countOneBits|countTrailingZeros|cross|degrees|determinant|distance|dot|dpdx|dpdxCoarse|dpdxFine|dpdy|dpdyCoarse|dpdyFine|exp|exp2|extractBits|f32|f64|faceForward|firstLeadingBit|floor|fma|fract|frexp|fwidth|fwidthCoarse|fwidthFine|i32|i64|insertBits|inverseSqrt|ldexp|length|log|log2|mat[2-4]x[2-4]|max|min|mix|modf|normalize|override|pack2x16float|pack2x16snorm|pack2x16unorm|pack4x8snorm|pack4x8unorm|pow|ptr|quantizeToF16|radians|reflect|refract|reverseBits|round|sampler|sampler_comparison|select|shiftLeft|shiftRight|sign|sin|sinh|smoothstep|sqrt|staticAssert|step|storageBarrier|tan|tanh|textureDimensions|textureGather|textureGatherCompare|textureLoad|textureNumLayers|textureNumLevels|textureNumSamples|textureSample|textureSampleBias|textureSampleCompare|textureSampleCompareLevel|textureSampleGrad|textureSampleLevel|textureStore|texture_1d|texture_2d|texture_2d_array|texture_3d|texture_cube|texture_cube_array|texture_depth_2d|texture_depth_2d_array|texture_depth_cube|texture_depth_cube_array|texture_depth_multisampled_2d|texture_multisampled_2d|texture_storage_1d|texture_storage_2d|texture_storage_2d_array|texture_storage_3d|transpose|trunc|u32|u64|unpack2x16float|unpack2x16snorm|unpack2x16unorm|unpack4x8snorm|unpack4x8unorm|vec[2-4]|workgroupBarrier)\b/,"function-calls":{pattern:/\b[_a-z]\w*(?=\()/i,alias:"function"},"class-name":/\b(?:[A-Z][A-Za-z0-9]*)\b/,"bool-literal":{pattern:/\b(?:false|true)\b/,alias:"boolean"},"hex-int-literal":{pattern:/\b0[xX][0-9a-fA-F]+[iu]?\b(?![.pP])/,alias:"number"},"hex-float-literal":{pattern:/\b0[xX][0-9a-fA-F]*(?:\.[0-9a-fA-F]*)?(?:[pP][+-]?\d+[fh]?)?/,alias:"number"},"decimal-float-literal":[{pattern:/\d*\.\d+(?:[eE](?:\+|-)?\d+)?[fh]?/,alias:"number"},{pattern:/\d+\.\d*(?:[eE](?:\+|-)?\d+)?[fh]?/,alias:"number"},{pattern:/\d+[eE](?:\+|-)?\d+[fh]?/,alias:"number"},{pattern:/\b\d+[fh]\b/,alias:"number"}],"int-literal":{pattern:/\b\d+[iu]?\b/,alias:"number"},operator:[{pattern:/(?:\^|~|\|(?!\|)|\|\||&&|<<|>>|!)(?!=)/},{pattern:/&(?![&=])/},{pattern:/(?:\+=|-=|\*=|\/=|%=|\^=|&=|\|=|<<=|>>=)/},{pattern:/(^|[^<>=!])=(?![=>])/,lookbehind:!0},{pattern:/(?:==|!=|<=|\+\+|--|(^|[^=])>=)/,lookbehind:!0},{pattern:/(?:(?:[+%]|(?:\*(?!\w)))(?!=))|(?:-(?!>))|(?:\/(?!\/))/},{pattern:/->/}],punctuation:/[@(){}[\],;<>:.]/}}wiki.displayName="wiki";wiki.aliases=[];function wiki(s){s.register(markup),s.languages.wiki=s.languages.extend("markup",{"block-comment":{pattern:/(^|[^\\])\/\*[\s\S]*?\*\//,lookbehind:!0,alias:"comment"},heading:{pattern:/^(=+)[^=\r\n].*?\1/m,inside:{punctuation:/^=+|=+$/,important:/.+/}},emphasis:{pattern:/('{2,5}).+?\1/,inside:{"bold-italic":{pattern:/(''''').+?(?=\1)/,lookbehind:!0,alias:["bold","italic"]},bold:{pattern:/(''')[^'](?:.*?[^'])?(?=\1)/,lookbehind:!0},italic:{pattern:/('')[^'](?:.*?[^'])?(?=\1)/,lookbehind:!0},punctuation:/^''+|''+$/}},hr:{pattern:/^-{4,}/m,alias:"punctuation"},url:[/ISBN +(?:97[89][ -]?)?(?:\d[ -]?){9}[\dx]\b|(?:PMID|RFC) +\d+/i,/\[\[.+?\]\]|\[.+?\]/],variable:[/__[A-Z]+__/,/\{{3}.+?\}{3}/,/\{\{.+?\}\}/],symbol:[/^#redirect/im,/~{3,5}/],"table-tag":{pattern:/((?:^|[|!])[|!])[^|\r\n]+\|(?!\|)/m,lookbehind:!0,inside:{"table-bar":{pattern:/\|$/,alias:"punctuation"},rest:s.languages.markup.tag.inside}},punctuation:/^(?:\{\||\|\}|\|-|[*#:;!|])|\|\||!!/m}),s.languages.insertBefore("wiki","tag",{nowiki:{pattern:/<(nowiki|pre|source)\b[^>]*>[\s\S]*?<\/\1>/i,inside:{tag:{pattern:/<(?:nowiki|pre|source)\b[^>]*>|<\/(?:nowiki|pre|source)>/i,inside:s.languages.markup.tag.inside}}}})}wolfram.displayName="wolfram";wolfram.aliases=["mathematica","nb","wl"];function wolfram(s){s.languages.wolfram={comment:/\(\*(?:\(\*(?:[^*]|\*(?!\)))*\*\)|(?!\(\*)[\s\S])*?\*\)/,string:{pattern:/"(?:\\.|[^"\\\r\n])*"/,greedy:!0},keyword:/\b(?:Abs|AbsArg|Accuracy|Block|Do|For|Function|If|Manipulate|Module|Nest|NestList|None|Return|Switch|Table|Which|While)\b/,context:{pattern:/\b\w+`+\w*/,alias:"class-name"},blank:{pattern:/\b\w+_\b/,alias:"regex"},"global-variable":{pattern:/\$\w+/,alias:"variable"},boolean:/\b(?:False|True)\b/,number:/(?:\b(?=\d)|\B(?=\.))(?:0[bo])?(?:(?:\d|0x[\da-f])[\da-f]*(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?j?\b/i,operator:/\/\.|;|=\.|\^=|\^:=|:=|<<|>>|<\||\|>|:>|\|->|->|<-|@@@|@@|@|\/@|=!=|===|==|=|\+|-|\[\/-+%=\]=?|!=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},s.languages.mathematica=s.languages.wolfram,s.languages.wl=s.languages.wolfram,s.languages.nb=s.languages.wolfram}wren.displayName="wren";wren.aliases=[];function wren(s){s.languages.wren={comment:[{pattern:/\/\*(?:[^*/]|\*(?!\/)|\/(?!\*)|\/\*(?:[^*/]|\*(?!\/)|\/(?!\*)|\/\*(?:[^*/]|\*(?!\/)|\/(?!\*))*\*\/)*\*\/)*\*\//,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],"triple-quoted-string":{pattern:/"""[\s\S]*?"""/,greedy:!0,alias:"string"},"string-literal":null,hashbang:{pattern:/^#!\/.+/,greedy:!0,alias:"comment"},attribute:{pattern:/#!?[ \t\u3000]*\w+/,alias:"keyword"},"class-name":[{pattern:/(\bclass\s+)\w+/,lookbehind:!0},/\b[A-Z][a-z\d_]*\b/],constant:/\b[A-Z][A-Z\d_]*\b/,null:{pattern:/\bnull\b/,alias:"keyword"},keyword:/\b(?:as|break|class|construct|continue|else|for|foreign|if|import|in|is|return|static|super|this|var|while)\b/,boolean:/\b(?:false|true)\b/,number:/\b(?:0x[\da-f]+|\d+(?:\.\d+)?(?:e[+-]?\d+)?)\b/i,function:/\b[a-z_]\w*(?=\s*[({])/i,operator:/<<|>>|[=!<>]=?|&&|\|\||[-+*/%~^&|?:]|\.{2,3}/,punctuation:/[\[\](){}.,;]/},s.languages.wren["string-literal"]={pattern:/(^|[^\\"])"(?:[^\\"%]|\\[\s\S]|%(?!\()|%\((?:[^()]|\((?:[^()]|\([^)]*\))*\))*\))*"/,lookbehind:!0,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)%\((?:[^()]|\((?:[^()]|\([^)]*\))*\))*\)/,lookbehind:!0,inside:{expression:{pattern:/^(%\()[\s\S]+(?=\)$)/,lookbehind:!0,inside:s.languages.wren},"interpolation-punctuation":{pattern:/^%\(|\)$/,alias:"punctuation"}}},string:/[\s\S]+/}}}xeora.displayName="xeora";xeora.aliases=["xeoracube"];function xeora(s){s.register(markup),(function(n){n.languages.xeora=n.languages.extend("markup",{constant:{pattern:/\$(?:DomainContents|PageRenderDuration)\$/,inside:{punctuation:{pattern:/\$/}}},variable:{pattern:/\$@?(?:#+|[-+*~=^])?[\w.]+\$/,inside:{punctuation:{pattern:/[$.]/},operator:{pattern:/#+|[-+*~=^@]/}}},"function-inline":{pattern:/\$F:[-\w.]+\?[-\w.]+(?:,(?:(?:@[-#]*\w+\.[\w+.]\.*)*\|)*(?:(?:[\w+]|[-#*.~^]+[\w+]|=\S)(?:[^$=]|=+[^=])*=*|(?:@[-#]*\w+\.[\w+.]\.*)+(?:(?:[\w+]|[-#*~^][-#*.~^]*[\w+]|=\S)(?:[^$=]|=+[^=])*=*)?)?)?\$/,inside:{variable:{pattern:/(?:[,|])@?(?:#+|[-+*~=^])?[\w.]+/,inside:{punctuation:{pattern:/[,.|]/},operator:{pattern:/#+|[-+*~=^@]/}}},punctuation:{pattern:/\$\w:|[$:?.,|]/}},alias:"function"},"function-block":{pattern:/\$XF:\{[-\w.]+\?[-\w.]+(?:,(?:(?:@[-#]*\w+\.[\w+.]\.*)*\|)*(?:(?:[\w+]|[-#*.~^]+[\w+]|=\S)(?:[^$=]|=+[^=])*=*|(?:@[-#]*\w+\.[\w+.]\.*)+(?:(?:[\w+]|[-#*~^][-#*.~^]*[\w+]|=\S)(?:[^$=]|=+[^=])*=*)?)?)?\}:XF\$/,inside:{punctuation:{pattern:/[$:{}?.,|]/}},alias:"function"},"directive-inline":{pattern:/\$\w(?:#\d+\+?)?(?:\[[-\w.]+\])?:[-\/\w.]+\$/,inside:{punctuation:{pattern:/\$(?:\w:|C(?:\[|#\d))?|[:{[\]]/,inside:{tag:{pattern:/#\d/}}}},alias:"function"},"directive-block-open":{pattern:/\$\w+:\{|\$\w(?:#\d+\+?)?(?:\[[-\w.]+\])?:[-\w.]+:\{(?:![A-Z]+)?/,inside:{punctuation:{pattern:/\$(?:\w:|C(?:\[|#\d))?|[:{[\]]/,inside:{tag:{pattern:/#\d/}}},attribute:{pattern:/![A-Z]+$/,inside:{punctuation:{pattern:/!/}},alias:"keyword"}},alias:"function"},"directive-block-separator":{pattern:/\}:[-\w.]+:\{/,inside:{punctuation:{pattern:/[:{}]/}},alias:"function"},"directive-block-close":{pattern:/\}:[-\w.]+\$/,inside:{punctuation:{pattern:/[:{}$]/}},alias:"function"}}),n.languages.insertBefore("inside","punctuation",{variable:n.languages.xeora["function-inline"].inside.variable},n.languages.xeora["function-block"]),n.languages.xeoracube=n.languages.xeora})(s)}xmlDoc.displayName="xml-doc";xmlDoc.aliases=[];function xmlDoc(s){s.register(markup),(function(n){function u(A,w){n.languages[A]&&n.languages.insertBefore(A,"comment",{"doc-comment":w})}var f=n.languages.markup.tag,y={pattern:/\/\/\/.*/,greedy:!0,alias:"comment",inside:{tag:f}},S={pattern:/'''.*/,greedy:!0,alias:"comment",inside:{tag:f}};u("csharp",y),u("fsharp",y),u("vbnet",S)})(s)}xojo.displayName="xojo";xojo.aliases=[];function xojo(s){s.languages.xojo={comment:{pattern:/(?:'|\/\/|Rem\b).+/i,greedy:!0},string:{pattern:/"(?:""|[^"])*"/,greedy:!0},number:[/(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:E[+-]?\d+)?/i,/&[bchou][a-z\d]+/i],directive:{pattern:/#(?:Else|ElseIf|Endif|If|Pragma)\b/i,alias:"property"},keyword:/\b(?:AddHandler|App|Array|As(?:signs)?|Auto|Boolean|Break|By(?:Ref|Val)|Byte|Call|Case|Catch|CFStringRef|CGFloat|Class|Color|Const|Continue|CString|Currency|CurrentMethodName|Declare|Delegate|Dim|Do(?:uble|wnTo)?|Each|Else(?:If)?|End|Enumeration|Event|Exception|Exit|Extends|False|Finally|For|Function|Get|GetTypeInfo|Global|GOTO|If|Implements|In|Inherits|Int(?:8|16|32|64|eger|erface)?|Lib|Loop|Me|Module|Next|Nil|Object|Optional|OSType|ParamArray|Private|Property|Protected|PString|Ptr|Raise(?:Event)?|ReDim|RemoveHandler|Return|Select(?:or)?|Self|Set|Shared|Short|Single|Soft|Static|Step|String|Sub|Super|Text|Then|To|True|Try|Ubound|UInt(?:8|16|32|64|eger)?|Until|Using|Var(?:iant)?|Wend|While|WindowPtr|WString)\b/i,operator:/<[=>]?|>=?|[+\-*\/\\^=]|\b(?:AddressOf|And|Ctype|IsA?|Mod|New|Not|Or|WeakAddressOf|Xor)\b/i,punctuation:/[.,;:()]/}}xquery.displayName="xquery";xquery.aliases=[];function xquery(s){s.register(markup),(function(n){n.languages.xquery=n.languages.extend("markup",{"xquery-comment":{pattern:/\(:[\s\S]*?:\)/,greedy:!0,alias:"comment"},string:{pattern:/(["'])(?:\1\1|(?!\1)[\s\S])*\1/,greedy:!0},extension:{pattern:/\(#.+?#\)/,alias:"symbol"},variable:/\$[-\w:]+/,axis:{pattern:/(^|[^-])(?:ancestor(?:-or-self)?|attribute|child|descendant(?:-or-self)?|following(?:-sibling)?|parent|preceding(?:-sibling)?|self)(?=::)/,lookbehind:!0,alias:"operator"},"keyword-operator":{pattern:/(^|[^:-])\b(?:and|castable as|div|eq|except|ge|gt|idiv|instance of|intersect|is|le|lt|mod|ne|or|union)\b(?=$|[^:-])/,lookbehind:!0,alias:"operator"},keyword:{pattern:/(^|[^:-])\b(?:as|ascending|at|base-uri|boundary-space|case|cast as|collation|construction|copy-namespaces|declare|default|descending|else|empty (?:greatest|least)|encoding|every|external|for|function|if|import|in|inherit|lax|let|map|module|namespace|no-inherit|no-preserve|option|order(?: by|ed|ing)?|preserve|return|satisfies|schema|some|stable|strict|strip|then|to|treat as|typeswitch|unordered|validate|variable|version|where|xquery)\b(?=$|[^:-])/,lookbehind:!0},function:/[\w-]+(?::[\w-]+)*(?=\s*\()/,"xquery-element":{pattern:/(element\s+)[\w-]+(?::[\w-]+)*/,lookbehind:!0,alias:"tag"},"xquery-attribute":{pattern:/(attribute\s+)[\w-]+(?::[\w-]+)*/,lookbehind:!0,alias:"attr-name"},builtin:{pattern:/(^|[^:-])\b(?:attribute|comment|document|element|processing-instruction|text|xs:(?:ENTITIES|ENTITY|ID|IDREFS?|NCName|NMTOKENS?|NOTATION|Name|QName|anyAtomicType|anyType|anyURI|base64Binary|boolean|byte|date|dateTime|dayTimeDuration|decimal|double|duration|float|gDay|gMonth|gMonthDay|gYear|gYearMonth|hexBinary|int|integer|language|long|negativeInteger|nonNegativeInteger|nonPositiveInteger|normalizedString|positiveInteger|short|string|time|token|unsigned(?:Byte|Int|Long|Short)|untyped(?:Atomic)?|yearMonthDuration))\b(?=$|[^:-])/,lookbehind:!0},number:/\b\d+(?:\.\d+)?(?:E[+-]?\d+)?/,operator:[/[+*=?|@]|\.\.?|:=|!=|<[=<]?|>[=>]?/,{pattern:/(\s)-(?=\s)/,lookbehind:!0}],punctuation:/[[\](){},;:/]/}),n.languages.xquery.tag.pattern=/<\/?(?!\d)[^\s>\/=$<%]+(?:\s+[^\s>\/=]+(?:=(?:("|')(?:\\[\s\S]|\{(?!\{)(?:\{(?:\{[^{}]*\}|[^{}])*\}|[^{}])+\}|(?!\1)[^\\])*\1|[^\s'">=]+))?)*\s*\/?>/,n.languages.xquery.tag.inside["attr-value"].pattern=/=(?:("|')(?:\\[\s\S]|\{(?!\{)(?:\{(?:\{[^{}]*\}|[^{}])*\}|[^{}])+\}|(?!\1)[^\\])*\1|[^\s'">=]+)/,n.languages.xquery.tag.inside["attr-value"].inside.punctuation=/^="|"$/,n.languages.xquery.tag.inside["attr-value"].inside.expression={pattern:/\{(?!\{)(?:\{(?:\{[^{}]*\}|[^{}])*\}|[^{}])+\}/,inside:n.languages.xquery,alias:"language-xquery"};var u=function(y){return typeof y=="string"?y:typeof y.content=="string"?y.content:y.content.map(u).join("")},f=function(y){for(var S=[],A=0;A<y.length;A++){var w=y[A],C=!1;if(typeof w!="string"&&(w.type==="tag"&&w.content[0]&&w.content[0].type==="tag"?w.content[0].content[0].content==="</"?S.length>0&&S[S.length-1].tagName===u(w.content[0].content[1])&&S.pop():w.content[w.content.length-1].content==="/>"||S.push({tagName:u(w.content[0].content[1]),openedBraces:0}):S.length>0&&w.type==="punctuation"&&w.content==="{"&&(!y[A+1]||y[A+1].type!=="punctuation"||y[A+1].content!=="{")&&(!y[A-1]||y[A-1].type!=="plain-text"||y[A-1].content!=="{")?S[S.length-1].openedBraces++:S.length>0&&S[S.length-1].openedBraces>0&&w.type==="punctuation"&&w.content==="}"?S[S.length-1].openedBraces--:w.type!=="comment"&&(C=!0)),(C||typeof w=="string")&&S.length>0&&S[S.length-1].openedBraces===0){var T=u(w);A<y.length-1&&(typeof y[A+1]=="string"||y[A+1].type==="plain-text")&&(T+=u(y[A+1]),y.splice(A+1,1)),A>0&&(typeof y[A-1]=="string"||y[A-1].type==="plain-text")&&(T=u(y[A-1])+T,y.splice(A-1,1),A--),/^\s+$/.test(T)?y[A]=T:y[A]=new n.Token("plain-text",T,null,T)}w.content&&typeof w.content!="string"&&f(w.content)}};n.hooks.add("after-tokenize",function(y){y.language==="xquery"&&f(y.tokens)})})(s)}yang.displayName="yang";yang.aliases=[];function yang(s){s.languages.yang={comment:/\/\*[\s\S]*?\*\/|\/\/.*/,string:{pattern:/"(?:[^\\"]|\\.)*"|'[^']*'/,greedy:!0},keyword:{pattern:/(^|[{};\r\n][ \t]*)[a-z_][\w.-]*/i,lookbehind:!0},namespace:{pattern:/(\s)[a-z_][\w.-]*(?=:)/i,lookbehind:!0},boolean:/\b(?:false|true)\b/,operator:/\+/,punctuation:/[{};:]/}}zig.displayName="zig";zig.aliases=[];function zig(s){(function(n){function u(T){return function(){return T}}var f=/\b(?:align|allowzero|and|anyframe|anytype|asm|async|await|break|cancel|catch|comptime|const|continue|defer|else|enum|errdefer|error|export|extern|fn|for|if|inline|linksection|nakedcc|noalias|nosuspend|null|or|orelse|packed|promise|pub|resume|return|stdcallcc|struct|suspend|switch|test|threadlocal|try|undefined|union|unreachable|usingnamespace|var|volatile|while)\b/,y="\\b(?!"+f.source+")(?!\\d)\\w+\\b",S=/align\s*\((?:[^()]|\([^()]*\))*\)/.source,A=/(?:\?|\bpromise->|(?:\[[^[\]]*\]|\*(?!\*)|\*\*)(?:\s*<ALIGN>|\s*const\b|\s*volatile\b|\s*allowzero\b)*)/.source.replace(/<ALIGN>/g,u(S)),w=/(?:\bpromise\b|(?:\berror\.)?<ID>(?:\.<ID>)*(?!\s+<ID>))/.source.replace(/<ID>/g,u(y)),C="(?!\\s)(?:!?\\s*(?:"+A+"\\s*)*"+w+")+";n.languages.zig={comment:[{pattern:/\/\/[/!].*/,alias:"doc-comment"},/\/{2}.*/],string:[{pattern:/(^|[^\\@])c?"(?:[^"\\\r\n]|\\.)*"/,lookbehind:!0,greedy:!0},{pattern:/([\r\n])([ \t]+c?\\{2}).*(?:(?:\r\n?|\n)\2.*)*/,lookbehind:!0,greedy:!0}],char:{pattern:/(^|[^\\])'(?:[^'\\\r\n]|[\uD800-\uDFFF]{2}|\\(?:.|x[a-fA-F\d]{2}|u\{[a-fA-F\d]{1,6}\}))'/,lookbehind:!0,greedy:!0},builtin:/\B@(?!\d)\w+(?=\s*\()/,label:{pattern:/(\b(?:break|continue)\s*:\s*)\w+\b|\b(?!\d)\w+\b(?=\s*:\s*(?:\{|while\b))/,lookbehind:!0},"class-name":[/\b(?!\d)\w+(?=\s*=\s*(?:(?:extern|packed)\s+)?(?:enum|struct|union)\s*[({])/,{pattern:RegExp(/(:\s*)<TYPE>(?=\s*(?:<ALIGN>\s*)?[=;,)])|<TYPE>(?=\s*(?:<ALIGN>\s*)?\{)/.source.replace(/<TYPE>/g,u(C)).replace(/<ALIGN>/g,u(S))),lookbehind:!0,inside:null},{pattern:RegExp(/(\)\s*)<TYPE>(?=\s*(?:<ALIGN>\s*)?;)/.source.replace(/<TYPE>/g,u(C)).replace(/<ALIGN>/g,u(S))),lookbehind:!0,inside:null}],"builtin-type":{pattern:/\b(?:anyerror|bool|c_u?(?:int|long|longlong|short)|c_longdouble|c_void|comptime_(?:float|int)|f(?:16|32|64|128)|[iu](?:8|16|32|64|128|size)|noreturn|type|void)\b/,alias:"keyword"},keyword:f,function:/\b(?!\d)\w+(?=\s*\()/,number:/\b(?:0b[01]+|0o[0-7]+|0x[a-fA-F\d]+(?:\.[a-fA-F\d]*)?(?:[pP][+-]?[a-fA-F\d]+)?|\d+(?:\.\d*)?(?:[eE][+-]?\d+)?)\b/,boolean:/\b(?:false|true)\b/,operator:/\.[*?]|\.{2,3}|[-=]>|\*\*|\+\+|\|\||(?:<<|>>|[-+*]%|[-+*/%^&|<>!=])=?|[?~]/,punctuation:/[.:,;(){}[\]]/},n.languages.zig["class-name"].forEach(function(T){T.inside===null&&(T.inside=n.languages.zig)})})(s)}refractor.register(markup);refractor.register(css);refractor.register(clike);refractor.register(regex);refractor.register(javascript);refractor.register(abap);refractor.register(abnf);refractor.register(actionscript);refractor.register(ada);refractor.register(agda);refractor.register(al);refractor.register(antlr4);refractor.register(apacheconf);refractor.register(sql);refractor.register(apex);refractor.register(apl);refractor.register(applescript);refractor.register(aql);refractor.register(c$1);refractor.register(cpp);refractor.register(arduino);refractor.register(arff);refractor.register(armasm);refractor.register(bash);refractor.register(yaml);refractor.register(markdown);refractor.register(arturo);refractor.register(asciidoc);refractor.register(csharp);refractor.register(aspnet);refractor.register(asm6502);refractor.register(asmatmel);refractor.register(autohotkey);refractor.register(autoit);refractor.register(avisynth);refractor.register(avroIdl);refractor.register(awk);refractor.register(basic);refractor.register(batch);refractor.register(bbcode);refractor.register(bbj);refractor.register(bicep);refractor.register(birb);refractor.register(bison);refractor.register(bnf);refractor.register(bqn);refractor.register(brainfuck);refractor.register(brightscript);refractor.register(bro);refractor.register(bsl);refractor.register(cfscript);refractor.register(chaiscript);refractor.register(cil);refractor.register(cilkc);refractor.register(cilkcpp);refractor.register(clojure);refractor.register(cmake);refractor.register(cobol);refractor.register(coffeescript);refractor.register(concurnas);refractor.register(csp);refractor.register(cooklang);refractor.register(coq);refractor.register(ruby);refractor.register(crystal);refractor.register(cssExtras);refractor.register(csv);refractor.register(cue);refractor.register(cypher);refractor.register(d);refractor.register(dart);refractor.register(dataweave);refractor.register(dax);refractor.register(dhall);refractor.register(diff);refractor.register(markupTemplating);refractor.register(django);refractor.register(dnsZoneFile);refractor.register(docker);refractor.register(dot);refractor.register(ebnf);refractor.register(editorconfig);refractor.register(eiffel);refractor.register(ejs);refractor.register(elixir);refractor.register(elm);refractor.register(lua);refractor.register(etlua);refractor.register(erb);refractor.register(erlang);refractor.register(excelFormula);refractor.register(fsharp);refractor.register(factor);refractor.register($false);refractor.register(firestoreSecurityRules);refractor.register(flow);refractor.register(fortran);refractor.register(ftl);refractor.register(gml);refractor.register(gap);refractor.register(gcode);refractor.register(gdscript);refractor.register(gedcom);refractor.register(gettext);refractor.register(gherkin);refractor.register(git);refractor.register(glsl);refractor.register(gn);refractor.register(linkerScript);refractor.register(go);refractor.register(goModule);refractor.register(gradle);refractor.register(graphql);refractor.register(groovy);refractor.register(less);refractor.register(scss);refractor.register(textile);refractor.register(haml);refractor.register(handlebars);refractor.register(haskell);refractor.register(haxe);refractor.register(hcl);refractor.register(hlsl);refractor.register(hoon);refractor.register(hpkp);refractor.register(hsts);refractor.register(json);refractor.register(uri$2);refractor.register(http);refractor.register(ichigojam);refractor.register(icon);refractor.register(icuMessageFormat);refractor.register(idris);refractor.register(ignore);refractor.register(inform7);refractor.register(ini);refractor.register(io);refractor.register(j$1);refractor.register(java);refractor.register(php);refractor.register(javadoclike);refractor.register(scala);refractor.register(javadoc);refractor.register(javastacktrace);refractor.register(jexl);refractor.register(jolie);refractor.register(jq);refractor.register(jsTemplates);refractor.register(typescript);refractor.register(jsdoc);refractor.register(n4js);refractor.register(jsExtras);refractor.register(json5);refractor.register(jsonp);refractor.register(jsstacktrace);refractor.register(julia);refractor.register(keepalived);refractor.register(keyman);refractor.register(kotlin);refractor.register(kumir);refractor.register(kusto);refractor.register(latex);refractor.register(latte);refractor.register(scheme);refractor.register(lilypond);refractor.register(liquid);refractor.register(lisp);refractor.register(livescript);refractor.register(llvm);refractor.register(log$1);refractor.register(lolcode);refractor.register(magma);refractor.register(makefile);refractor.register(mata);refractor.register(matlab);refractor.register(maxscript);refractor.register(mel);refractor.register(mermaid);refractor.register(metafont);refractor.register(mizar);refractor.register(mongodb);refractor.register(monkey);refractor.register(moonscript);refractor.register(n1ql);refractor.register(nand2tetrisHdl);refractor.register(naniscript);refractor.register(nasm);refractor.register(neon);refractor.register(nevod);refractor.register(nginx);refractor.register(nim);refractor.register(nix);refractor.register(nsis);refractor.register(objectivec);refractor.register(ocaml);refractor.register(odin);refractor.register(opencl);refractor.register(openqasm);refractor.register(oz);refractor.register(parigp);refractor.register(parser);refractor.register(pascal);refractor.register(pascaligo);refractor.register(psl);refractor.register(pcaxis);refractor.register(peoplecode);refractor.register(perl);refractor.register(phpdoc);refractor.register(phpExtras);refractor.register(plantUml);refractor.register(plsql);refractor.register(powerquery);refractor.register(powershell);refractor.register(processing);refractor.register(prolog);refractor.register(promql);refractor.register(properties$6);refractor.register(protobuf);refractor.register(stylus);refractor.register(twig);refractor.register(pug);refractor.register(puppet);refractor.register(pure);refractor.register(purebasic);refractor.register(purescript);refractor.register(python);refractor.register(qsharp);refractor.register(q);refractor.register(qml);refractor.register(qore);refractor.register(r$1);refractor.register(racket);refractor.register(cshtml);refractor.register(jsx);refractor.register(tsx);refractor.register(reason);refractor.register(rego);refractor.register(renpy);refractor.register(rescript);refractor.register(rest);refractor.register(rip);refractor.register(roboconf);refractor.register(robotframework);refractor.register(rust);refractor.register(sas);refractor.register(sass);refractor.register(shellSession);refractor.register(smali);refractor.register(smalltalk);refractor.register(smarty);refractor.register(sml);refractor.register(solidity);refractor.register(solutionFile);refractor.register(soy);refractor.register(turtle);refractor.register(sparql);refractor.register(splunkSpl);refractor.register(sqf);refractor.register(squirrel);refractor.register(stan);refractor.register(stata);refractor.register(iecst);refractor.register(supercollider);refractor.register(swift);refractor.register(systemd);refractor.register(t4Templating);refractor.register(t4Cs);refractor.register(vbnet);refractor.register(t4Vb);refractor.register(tap);refractor.register(tcl);refractor.register(tt2);refractor.register(toml);refractor.register(tremor);refractor.register(typoscript);refractor.register(unrealscript);refractor.register(uorazor);refractor.register(v);refractor.register(vala);refractor.register(velocity);refractor.register(verilog);refractor.register(vhdl);refractor.register(vim);refractor.register(visualBasic);refractor.register(warpscript);refractor.register(wasm);refractor.register(webIdl);refractor.register(wgsl);refractor.register(wiki);refractor.register(wolfram);refractor.register(wren);refractor.register(xeora);refractor.register(xmlDoc);refractor.register(xojo);refractor.register(xquery);refractor.register(yang);refractor.register(zig);var highlighter=highlight$1(refractor,defaultStyle);highlighter.supportedLanguages=supportedLanguages;const vscDarkPlus={'pre[class*="language-"]':{color:"#d4d4d4",fontSize:"13px",textShadow:"none",fontFamily:'Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace',direction:"ltr",textAlign:"left",whiteSpace:"pre",wordSpacing:"normal",wordBreak:"normal",lineHeight:"1.5",MozTabSize:"4",OTabSize:"4",tabSize:"4",WebkitHyphens:"none",MozHyphens:"none",msHyphens:"none",hyphens:"none",padding:"1em",margin:".5em 0",overflow:"auto",background:"#1e1e1e"},'code[class*="language-"]':{color:"#d4d4d4",fontSize:"13px",textShadow:"none",fontFamily:'Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace',direction:"ltr",textAlign:"left",whiteSpace:"pre",wordSpacing:"normal",wordBreak:"normal",lineHeight:"1.5",MozTabSize:"4",OTabSize:"4",tabSize:"4",WebkitHyphens:"none",MozHyphens:"none",msHyphens:"none",hyphens:"none"},'pre[class*="language-"]::selection':{textShadow:"none",background:"#264F78"},'code[class*="language-"]::selection':{textShadow:"none",background:"#264F78"},'pre[class*="language-"] *::selection':{textShadow:"none",background:"#264F78"},'code[class*="language-"] *::selection':{textShadow:"none",background:"#264F78"},':not(pre) > code[class*="language-"]':{padding:".1em .3em",borderRadius:".3em",color:"#db4c69",background:"#1e1e1e"},".namespace":{Opacity:".7"},"doctype.doctype-tag":{color:"#569CD6"},"doctype.name":{color:"#9cdcfe"},comment:{color:"#6a9955"},prolog:{color:"#6a9955"},punctuation:{color:"#d4d4d4"},".language-html .language-css .token.punctuation":{color:"#d4d4d4"},".language-html .language-javascript .token.punctuation":{color:"#d4d4d4"},property:{color:"#9cdcfe"},tag:{color:"#569cd6"},boolean:{color:"#569cd6"},number:{color:"#b5cea8"},constant:{color:"#9cdcfe"},symbol:{color:"#b5cea8"},inserted:{color:"#b5cea8"},unit:{color:"#b5cea8"},selector:{color:"#d7ba7d"},"attr-name":{color:"#9cdcfe"},string:{color:"#ce9178"},char:{color:"#ce9178"},builtin:{color:"#ce9178"},deleted:{color:"#ce9178"},".language-css .token.string.url":{textDecoration:"underline"},operator:{color:"#d4d4d4"},entity:{color:"#569cd6"},"operator.arrow":{color:"#569CD6"},atrule:{color:"#ce9178"},"atrule.rule":{color:"#c586c0"},"atrule.url":{color:"#9cdcfe"},"atrule.url.function":{color:"#dcdcaa"},"atrule.url.punctuation":{color:"#d4d4d4"},keyword:{color:"#569CD6"},"keyword.module":{color:"#c586c0"},"keyword.control-flow":{color:"#c586c0"},function:{color:"#dcdcaa"},"function.maybe-class-name":{color:"#dcdcaa"},regex:{color:"#d16969"},important:{color:"#569cd6"},italic:{fontStyle:"italic"},"class-name":{color:"#4ec9b0"},"maybe-class-name":{color:"#4ec9b0"},console:{color:"#9cdcfe"},parameter:{color:"#9cdcfe"},interpolation:{color:"#9cdcfe"},"punctuation.interpolation-punctuation":{color:"#569cd6"},variable:{color:"#9cdcfe"},"imports.maybe-class-name":{color:"#9cdcfe"},"exports.maybe-class-name":{color:"#9cdcfe"},escape:{color:"#d7ba7d"},"tag.punctuation":{color:"#808080"},cdata:{color:"#808080"},"attr-value":{color:"#ce9178"},"attr-value.punctuation":{color:"#ce9178"},"attr-value.punctuation.attr-equals":{color:"#d4d4d4"},namespace:{color:"#4ec9b0"},'pre[class*="language-javascript"]':{color:"#9cdcfe"},'code[class*="language-javascript"]':{color:"#9cdcfe"},'pre[class*="language-jsx"]':{color:"#9cdcfe"},'code[class*="language-jsx"]':{color:"#9cdcfe"},'pre[class*="language-typescript"]':{color:"#9cdcfe"},'code[class*="language-typescript"]':{color:"#9cdcfe"},'pre[class*="language-tsx"]':{color:"#9cdcfe"},'code[class*="language-tsx"]':{color:"#9cdcfe"},'pre[class*="language-css"]':{color:"#ce9178"},'code[class*="language-css"]':{color:"#ce9178"},'pre[class*="language-html"]':{color:"#d4d4d4"},'code[class*="language-html"]':{color:"#d4d4d4"},".language-regex .token.anchor":{color:"#dcdcaa"},".language-html .token.punctuation":{color:"#808080"},'pre[class*="language-"] > code[class*="language-"]':{position:"relative",zIndex:"1"},".line-highlight.line-highlight":{background:"#f7ebc6",boxShadow:"inset 5px 0 0 #f7d87c",zIndex:"0"}},LayoutGroupContext=reactExports.createContext({});function useConstant(s){const n=reactExports.useRef(null);return n.current===null&&(n.current=s()),n.current}const isBrowser$1=typeof window<"u",useIsomorphicLayoutEffect$1=isBrowser$1?reactExports.useLayoutEffect:reactExports.useEffect,PresenceContext=reactExports.createContext(null);function addUniqueItem(s,n){s.indexOf(n)===-1&&s.push(n)}function removeItem(s,n){const u=s.indexOf(n);u>-1&&s.splice(u,1)}const clamp$1=(s,n,u)=>u>n?n:u<s?s:u;let invariant=()=>{};const MotionGlobalConfig={},isNumericalString=s=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(s);function isObject$1(s){return typeof s=="object"&&s!==null}const isZeroValueString=s=>/^0[^.\s]+$/u.test(s);function memo(s){let n;return()=>(n===void 0&&(n=s()),n)}const noop$1=s=>s,combineFunctions=(s,n)=>u=>n(s(u)),pipe$1=(...s)=>s.reduce(combineFunctions),progress=(s,n,u)=>{const f=n-s;return f===0?1:(u-s)/f};class SubscriptionManager{constructor(){this.subscriptions=[]}add(n){return addUniqueItem(this.subscriptions,n),()=>removeItem(this.subscriptions,n)}notify(n,u,f){const y=this.subscriptions.length;if(y)if(y===1)this.subscriptions[0](n,u,f);else for(let S=0;S<y;S++){const A=this.subscriptions[S];A&&A(n,u,f)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const secondsToMilliseconds=s=>s*1e3,millisecondsToSeconds=s=>s/1e3;function velocityPerSecond(s,n){return n?s*(1e3/n):0}const calcBezier=(s,n,u)=>(((1-3*u+3*n)*s+(3*u-6*n))*s+3*n)*s,subdivisionPrecision=1e-7,subdivisionMaxIterations=12;function binarySubdivide(s,n,u,f,y){let S,A,w=0;do A=n+(u-n)/2,S=calcBezier(A,f,y)-s,S>0?u=A:n=A;while(Math.abs(S)>subdivisionPrecision&&++w<subdivisionMaxIterations);return A}function cubicBezier(s,n,u,f){if(s===n&&u===f)return noop$1;const y=S=>binarySubdivide(S,0,1,s,u);return S=>S===0||S===1?S:calcBezier(y(S),n,f)}const mirrorEasing=s=>n=>n<=.5?s(2*n)/2:(2-s(2*(1-n)))/2,reverseEasing=s=>n=>1-s(1-n),backOut=cubicBezier(.33,1.53,.69,.99),backIn=reverseEasing(backOut),backInOut=mirrorEasing(backIn),anticipate=s=>(s*=2)<1?.5*backIn(s):.5*(2-Math.pow(2,-10*(s-1))),circIn=s=>1-Math.sin(Math.acos(s)),circOut=reverseEasing(circIn),circInOut=mirrorEasing(circIn),easeIn=cubicBezier(.42,0,1,1),easeOut=cubicBezier(0,0,.58,1),easeInOut=cubicBezier(.42,0,.58,1),isEasingArray=s=>Array.isArray(s)&&typeof s[0]!="number",isBezierDefinition=s=>Array.isArray(s)&&typeof s[0]=="number",easingLookup={linear:noop$1,easeIn,easeInOut,easeOut,circIn,circInOut,circOut,backIn,backInOut,backOut,anticipate},isValidEasing=s=>typeof s=="string",easingDefinitionToFunction=s=>{if(isBezierDefinition(s)){invariant(s.length===4);const[n,u,f,y]=s;return cubicBezier(n,u,f,y)}else if(isValidEasing(s))return easingLookup[s];return s},stepsOrder=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function createRenderStep(s,n){let u=new Set,f=new Set,y=!1,S=!1;const A=new WeakSet;let w={delta:0,timestamp:0,isProcessing:!1};function C(R){A.has(R)&&(T.schedule(R),s()),R(w)}const T={schedule:(R,I=!1,N=!1)=>{const L=N&&y?u:f;return I&&A.add(R),L.has(R)||L.add(R),R},cancel:R=>{f.delete(R),A.delete(R)},process:R=>{if(w=R,y){S=!0;return}y=!0,[u,f]=[f,u],u.forEach(C),u.clear(),y=!1,S&&(S=!1,T.process(R))}};return T}const maxElapsed=40;function createRenderBatcher(s,n){let u=!1,f=!0;const y={delta:0,timestamp:0,isProcessing:!1},S=()=>u=!0,A=stepsOrder.reduce((U,G)=>(U[G]=createRenderStep(S),U),{}),{setup:w,read:C,resolveKeyframes:T,preUpdate:R,update:I,preRender:N,render:L,postRender:F}=A,H=()=>{const U=MotionGlobalConfig.useManualTiming?y.timestamp:performance.now();u=!1,MotionGlobalConfig.useManualTiming||(y.delta=f?1e3/60:Math.max(Math.min(U-y.timestamp,maxElapsed),1)),y.timestamp=U,y.isProcessing=!0,w.process(y),C.process(y),T.process(y),R.process(y),I.process(y),N.process(y),L.process(y),F.process(y),y.isProcessing=!1,u&&n&&(f=!1,s(H))},z=()=>{u=!0,f=!0,y.isProcessing||s(H)};return{schedule:stepsOrder.reduce((U,G)=>{const Y=A[G];return U[G]=(K,Z=!1,J=!1)=>(u||z(),Y.schedule(K,Z,J)),U},{}),cancel:U=>{for(let G=0;G<stepsOrder.length;G++)A[stepsOrder[G]].cancel(U)},state:y,steps:A}}const{schedule:frame$1,cancel:cancelFrame,state:frameData,steps:frameSteps}=createRenderBatcher(typeof requestAnimationFrame<"u"?requestAnimationFrame:noop$1,!0);let now$2;function clearTime(){now$2=void 0}const time$2={now:()=>(now$2===void 0&&time$2.set(frameData.isProcessing||MotionGlobalConfig.useManualTiming?frameData.timestamp:performance.now()),now$2),set:s=>{now$2=s,queueMicrotask(clearTime)}},checkStringStartsWith=s=>n=>typeof n=="string"&&n.startsWith(s),isCSSVariableName=checkStringStartsWith("--"),startsAsVariableToken=checkStringStartsWith("var(--"),isCSSVariableToken=s=>startsAsVariableToken(s)?singleCssVariableRegex.test(s.split("/*")[0].trim()):!1,singleCssVariableRegex=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function containsCSSVariable(s){return typeof s!="string"?!1:s.split("/*")[0].includes("var(--")}const number$3={test:s=>typeof s=="number",parse:parseFloat,transform:s=>s},alpha={...number$3,transform:s=>clamp$1(0,1,s)},scale={...number$3,default:1},sanitize=s=>Math.round(s*1e5)/1e5,floatRegex=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function isNullish(s){return s==null}const singleColorRegex=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,isColorString=(s,n)=>u=>!!(typeof u=="string"&&singleColorRegex.test(u)&&u.startsWith(s)||n&&!isNullish(u)&&Object.prototype.hasOwnProperty.call(u,n)),splitColor=(s,n,u)=>f=>{if(typeof f!="string")return f;const[y,S,A,w]=f.match(floatRegex);return{[s]:parseFloat(y),[n]:parseFloat(S),[u]:parseFloat(A),alpha:w!==void 0?parseFloat(w):1}},clampRgbUnit=s=>clamp$1(0,255,s),rgbUnit={...number$3,transform:s=>Math.round(clampRgbUnit(s))},rgba={test:isColorString("rgb","red"),parse:splitColor("red","green","blue"),transform:({red:s,green:n,blue:u,alpha:f=1})=>"rgba("+rgbUnit.transform(s)+", "+rgbUnit.transform(n)+", "+rgbUnit.transform(u)+", "+sanitize(alpha.transform(f))+")"};function parseHex(s){let n="",u="",f="",y="";return s.length>5?(n=s.substring(1,3),u=s.substring(3,5),f=s.substring(5,7),y=s.substring(7,9)):(n=s.substring(1,2),u=s.substring(2,3),f=s.substring(3,4),y=s.substring(4,5),n+=n,u+=u,f+=f,y+=y),{red:parseInt(n,16),green:parseInt(u,16),blue:parseInt(f,16),alpha:y?parseInt(y,16)/255:1}}const hex={test:isColorString("#"),parse:parseHex,transform:rgba.transform},createUnitType=s=>({test:n=>typeof n=="string"&&n.endsWith(s)&&n.split(" ").length===1,parse:parseFloat,transform:n=>`${n}${s}`}),degrees=createUnitType("deg"),percent=createUnitType("%"),px$1=createUnitType("px"),vh=createUnitType("vh"),vw=createUnitType("vw"),progressPercentage={...percent,parse:s=>percent.parse(s)/100,transform:s=>percent.transform(s*100)},hsla={test:isColorString("hsl","hue"),parse:splitColor("hue","saturation","lightness"),transform:({hue:s,saturation:n,lightness:u,alpha:f=1})=>"hsla("+Math.round(s)+", "+percent.transform(sanitize(n))+", "+percent.transform(sanitize(u))+", "+sanitize(alpha.transform(f))+")"},color$1={test:s=>rgba.test(s)||hex.test(s)||hsla.test(s),parse:s=>rgba.test(s)?rgba.parse(s):hsla.test(s)?hsla.parse(s):hex.parse(s),transform:s=>typeof s=="string"?s:s.hasOwnProperty("red")?rgba.transform(s):hsla.transform(s),getAnimatableNone:s=>{const n=color$1.parse(s);return n.alpha=0,color$1.transform(n)}},colorRegex=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function test(s){return isNaN(s)&&typeof s=="string"&&(s.match(floatRegex)?.length||0)+(s.match(colorRegex)?.length||0)>0}const NUMBER_TOKEN="number",COLOR_TOKEN="color",VAR_TOKEN="var",VAR_FUNCTION_TOKEN="var(",SPLIT_TOKEN="${}",complexRegex=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function analyseComplexValue(s){const n=s.toString(),u=[],f={color:[],number:[],var:[]},y=[];let S=0;const A=n.replace(complexRegex,w=>(color$1.test(w)?(f.color.push(S),y.push(COLOR_TOKEN),u.push(color$1.parse(w))):w.startsWith(VAR_FUNCTION_TOKEN)?(f.var.push(S),y.push(VAR_TOKEN),u.push(w)):(f.number.push(S),y.push(NUMBER_TOKEN),u.push(parseFloat(w))),++S,SPLIT_TOKEN)).split(SPLIT_TOKEN);return{values:u,split:A,indexes:f,types:y}}function parseComplexValue(s){return analyseComplexValue(s).values}function createTransformer(s){const{split:n,types:u}=analyseComplexValue(s),f=n.length;return y=>{let S="";for(let A=0;A<f;A++)if(S+=n[A],y[A]!==void 0){const w=u[A];w===NUMBER_TOKEN?S+=sanitize(y[A]):w===COLOR_TOKEN?S+=color$1.transform(y[A]):S+=y[A]}return S}}const convertNumbersToZero=s=>typeof s=="number"?0:color$1.test(s)?color$1.getAnimatableNone(s):s;function getAnimatableNone$1(s){const n=parseComplexValue(s);return createTransformer(s)(n.map(convertNumbersToZero))}const complex={test,parse:parseComplexValue,createTransformer,getAnimatableNone:getAnimatableNone$1};function hueToRgb(s,n,u){return u<0&&(u+=1),u>1&&(u-=1),u<1/6?s+(n-s)*6*u:u<1/2?n:u<2/3?s+(n-s)*(2/3-u)*6:s}function hslaToRgba({hue:s,saturation:n,lightness:u,alpha:f}){s/=360,n/=100,u/=100;let y=0,S=0,A=0;if(!n)y=S=A=u;else{const w=u<.5?u*(1+n):u+n-u*n,C=2*u-w;y=hueToRgb(C,w,s+1/3),S=hueToRgb(C,w,s),A=hueToRgb(C,w,s-1/3)}return{red:Math.round(y*255),green:Math.round(S*255),blue:Math.round(A*255),alpha:f}}function mixImmediate(s,n){return u=>u>0?n:s}const mixNumber$1=(s,n,u)=>s+(n-s)*u,mixLinearColor=(s,n,u)=>{const f=s*s,y=u*(n*n-f)+f;return y<0?0:Math.sqrt(y)},colorTypes=[hex,rgba,hsla],getColorType=s=>colorTypes.find(n=>n.test(s));function asRGBA(s){const n=getColorType(s);if(!n)return!1;let u=n.parse(s);return n===hsla&&(u=hslaToRgba(u)),u}const mixColor=(s,n)=>{const u=asRGBA(s),f=asRGBA(n);if(!u||!f)return mixImmediate(s,n);const y={...u};return S=>(y.red=mixLinearColor(u.red,f.red,S),y.green=mixLinearColor(u.green,f.green,S),y.blue=mixLinearColor(u.blue,f.blue,S),y.alpha=mixNumber$1(u.alpha,f.alpha,S),rgba.transform(y))},invisibleValues=new Set(["none","hidden"]);function mixVisibility(s,n){return invisibleValues.has(s)?u=>u<=0?s:n:u=>u>=1?n:s}function mixNumber(s,n){return u=>mixNumber$1(s,n,u)}function getMixer(s){return typeof s=="number"?mixNumber:typeof s=="string"?isCSSVariableToken(s)?mixImmediate:color$1.test(s)?mixColor:mixComplex:Array.isArray(s)?mixArray:typeof s=="object"?color$1.test(s)?mixColor:mixObject:mixImmediate}function mixArray(s,n){const u=[...s],f=u.length,y=s.map((S,A)=>getMixer(S)(S,n[A]));return S=>{for(let A=0;A<f;A++)u[A]=y[A](S);return u}}function mixObject(s,n){const u={...s,...n},f={};for(const y in u)s[y]!==void 0&&n[y]!==void 0&&(f[y]=getMixer(s[y])(s[y],n[y]));return y=>{for(const S in f)u[S]=f[S](y);return u}}function matchOrder(s,n){const u=[],f={color:0,var:0,number:0};for(let y=0;y<n.values.length;y++){const S=n.types[y],A=s.indexes[S][f[S]],w=s.values[A]??0;u[y]=w,f[S]++}return u}const mixComplex=(s,n)=>{const u=complex.createTransformer(n),f=analyseComplexValue(s),y=analyseComplexValue(n);return f.indexes.var.length===y.indexes.var.length&&f.indexes.color.length===y.indexes.color.length&&f.indexes.number.length>=y.indexes.number.length?invisibleValues.has(s)&&!y.values.length||invisibleValues.has(n)&&!f.values.length?mixVisibility(s,n):pipe$1(mixArray(matchOrder(f,y),y.values),u):mixImmediate(s,n)};function mix(s,n,u){return typeof s=="number"&&typeof n=="number"&&typeof u=="number"?mixNumber$1(s,n,u):getMixer(s)(s,n)}const frameloopDriver=s=>{const n=({timestamp:u})=>s(u);return{start:(u=!0)=>frame$1.update(n,u),stop:()=>cancelFrame(n),now:()=>frameData.isProcessing?frameData.timestamp:time$2.now()}},generateLinearEasing=(s,n,u=10)=>{let f="";const y=Math.max(Math.round(n/u),2);for(let S=0;S<y;S++)f+=Math.round(s(S/(y-1))*1e4)/1e4+", ";return`linear(${f.substring(0,f.length-2)})`},maxGeneratorDuration=2e4;function calcGeneratorDuration(s){let n=0;const u=50;let f=s.next(n);for(;!f.done&&n<maxGeneratorDuration;)n+=u,f=s.next(n);return n>=maxGeneratorDuration?1/0:n}function createGeneratorEasing(s,n=100,u){const f=u({...s,keyframes:[0,n]}),y=Math.min(calcGeneratorDuration(f),maxGeneratorDuration);return{type:"keyframes",ease:S=>f.next(y*S).value/n,duration:millisecondsToSeconds(y)}}const velocitySampleDuration=5;function calcGeneratorVelocity(s,n,u){const f=Math.max(n-velocitySampleDuration,0);return velocityPerSecond(u-s(f),n-f)}const springDefaults={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},safeMin=.001;function findSpring({duration:s=springDefaults.duration,bounce:n=springDefaults.bounce,velocity:u=springDefaults.velocity,mass:f=springDefaults.mass}){let y,S,A=1-n;A=clamp$1(springDefaults.minDamping,springDefaults.maxDamping,A),s=clamp$1(springDefaults.minDuration,springDefaults.maxDuration,millisecondsToSeconds(s)),A<1?(y=T=>{const R=T*A,I=R*s,N=R-u,L=calcAngularFreq(T,A),F=Math.exp(-I);return safeMin-N/L*F},S=T=>{const R=T*A*s,I=R*u+u,N=Math.pow(A,2)*Math.pow(T,2)*s,L=Math.exp(-R),F=calcAngularFreq(Math.pow(T,2),A);return(-y(T)+safeMin>0?-1:1)*((I-N)*L)/F}):(y=T=>{const R=Math.exp(-T*s),I=(T-u)*s+1;return-safeMin+R*I},S=T=>{const R=Math.exp(-T*s),I=(u-T)*(s*s);return R*I});const w=5/s,C=approximateRoot(y,S,w);if(s=secondsToMilliseconds(s),isNaN(C))return{stiffness:springDefaults.stiffness,damping:springDefaults.damping,duration:s};{const T=Math.pow(C,2)*f;return{stiffness:T,damping:A*2*Math.sqrt(f*T),duration:s}}}const rootIterations=12;function approximateRoot(s,n,u){let f=u;for(let y=1;y<rootIterations;y++)f=f-s(f)/n(f);return f}function calcAngularFreq(s,n){return s*Math.sqrt(1-n*n)}const durationKeys=["duration","bounce"],physicsKeys=["stiffness","damping","mass"];function isSpringType(s,n){return n.some(u=>s[u]!==void 0)}function getSpringOptions(s){let n={velocity:springDefaults.velocity,stiffness:springDefaults.stiffness,damping:springDefaults.damping,mass:springDefaults.mass,isResolvedFromDuration:!1,...s};if(!isSpringType(s,physicsKeys)&&isSpringType(s,durationKeys))if(s.visualDuration){const u=s.visualDuration,f=2*Math.PI/(u*1.2),y=f*f,S=2*clamp$1(.05,1,1-(s.bounce||0))*Math.sqrt(y);n={...n,mass:springDefaults.mass,stiffness:y,damping:S}}else{const u=findSpring(s);n={...n,...u,mass:springDefaults.mass},n.isResolvedFromDuration=!0}return n}function spring(s=springDefaults.visualDuration,n=springDefaults.bounce){const u=typeof s!="object"?{visualDuration:s,keyframes:[0,1],bounce:n}:s;let{restSpeed:f,restDelta:y}=u;const S=u.keyframes[0],A=u.keyframes[u.keyframes.length-1],w={done:!1,value:S},{stiffness:C,damping:T,mass:R,duration:I,velocity:N,isResolvedFromDuration:L}=getSpringOptions({...u,velocity:-millisecondsToSeconds(u.velocity||0)}),F=N||0,H=T/(2*Math.sqrt(C*R)),z=A-S,U=millisecondsToSeconds(Math.sqrt(C/R)),G=Math.abs(z)<5;f||(f=G?springDefaults.restSpeed.granular:springDefaults.restSpeed.default),y||(y=G?springDefaults.restDelta.granular:springDefaults.restDelta.default);let Y;if(H<1){const Z=calcAngularFreq(U,H);Y=J=>{const te=Math.exp(-H*U*J);return A-te*((F+H*U*z)/Z*Math.sin(Z*J)+z*Math.cos(Z*J))}}else if(H===1)Y=Z=>A-Math.exp(-U*Z)*(z+(F+U*z)*Z);else{const Z=U*Math.sqrt(H*H-1);Y=J=>{const te=Math.exp(-H*U*J),de=Math.min(Z*J,300);return A-te*((F+H*U*z)*Math.sinh(de)+Z*z*Math.cosh(de))/Z}}const K={calculatedDuration:L&&I||null,next:Z=>{const J=Y(Z);if(L)w.done=Z>=I;else{let te=Z===0?F:0;H<1&&(te=Z===0?secondsToMilliseconds(F):calcGeneratorVelocity(Y,Z,J));const de=Math.abs(te)<=f,se=Math.abs(A-J)<=y;w.done=de&&se}return w.value=w.done?A:J,w},toString:()=>{const Z=Math.min(calcGeneratorDuration(K),maxGeneratorDuration),J=generateLinearEasing(te=>K.next(Z*te).value,Z,30);return Z+"ms "+J},toTransition:()=>{}};return K}spring.applyToOptions=s=>{const n=createGeneratorEasing(s,100,spring);return s.ease=n.ease,s.duration=secondsToMilliseconds(n.duration),s.type="keyframes",s};function inertia({keyframes:s,velocity:n=0,power:u=.8,timeConstant:f=325,bounceDamping:y=10,bounceStiffness:S=500,modifyTarget:A,min:w,max:C,restDelta:T=.5,restSpeed:R}){const I=s[0],N={done:!1,value:I},L=de=>w!==void 0&&de<w||C!==void 0&&de>C,F=de=>w===void 0?C:C===void 0||Math.abs(w-de)<Math.abs(C-de)?w:C;let H=u*n;const z=I+H,U=A===void 0?z:A(z);U!==z&&(H=U-I);const G=de=>-H*Math.exp(-de/f),Y=de=>U+G(de),K=de=>{const se=G(de),ne=Y(de);N.done=Math.abs(se)<=T,N.value=N.done?U:ne};let Z,J;const te=de=>{L(N.value)&&(Z=de,J=spring({keyframes:[N.value,F(N.value)],velocity:calcGeneratorVelocity(Y,de,N.value),damping:y,stiffness:S,restDelta:T,restSpeed:R}))};return te(0),{calculatedDuration:null,next:de=>{let se=!1;return!J&&Z===void 0&&(se=!0,K(de),te(de)),Z!==void 0&&de>=Z?J.next(de-Z):(!se&&K(de),N)}}}function createMixers(s,n,u){const f=[],y=u||MotionGlobalConfig.mix||mix,S=s.length-1;for(let A=0;A<S;A++){let w=y(s[A],s[A+1]);if(n){const C=Array.isArray(n)?n[A]||noop$1:n;w=pipe$1(C,w)}f.push(w)}return f}function interpolate(s,n,{clamp:u=!0,ease:f,mixer:y}={}){const S=s.length;if(invariant(S===n.length),S===1)return()=>n[0];if(S===2&&n[0]===n[1])return()=>n[1];const A=s[0]===s[1];s[0]>s[S-1]&&(s=[...s].reverse(),n=[...n].reverse());const w=createMixers(n,f,y),C=w.length,T=R=>{if(A&&R<s[0])return n[0];let I=0;if(C>1)for(;I<s.length-2&&!(R<s[I+1]);I++);const N=progress(s[I],s[I+1],R);return w[I](N)};return u?R=>T(clamp$1(s[0],s[S-1],R)):T}function fillOffset(s,n){const u=s[s.length-1];for(let f=1;f<=n;f++){const y=progress(0,n,f);s.push(mixNumber$1(u,1,y))}}function defaultOffset(s){const n=[0];return fillOffset(n,s.length-1),n}function convertOffsetToTimes(s,n){return s.map(u=>u*n)}function defaultEasing(s,n){return s.map(()=>n||easeInOut).splice(0,s.length-1)}function keyframes({duration:s=300,keyframes:n,times:u,ease:f="easeInOut"}){const y=isEasingArray(f)?f.map(easingDefinitionToFunction):easingDefinitionToFunction(f),S={done:!1,value:n[0]},A=convertOffsetToTimes(u&&u.length===n.length?u:defaultOffset(n),s),w=interpolate(A,n,{ease:Array.isArray(y)?y:defaultEasing(n,y)});return{calculatedDuration:s,next:C=>(S.value=w(C),S.done=C>=s,S)}}const isNotNull$1=s=>s!==null;function getFinalKeyframe$1(s,{repeat:n,repeatType:u="loop"},f,y=1){const S=s.filter(isNotNull$1),A=y<0||n&&u!=="loop"&&n%2===1?0:S.length-1;return!A||f===void 0?S[A]:f}const transitionTypeMap={decay:inertia,inertia,tween:keyframes,keyframes,spring};function replaceTransitionType(s){typeof s.type=="string"&&(s.type=transitionTypeMap[s.type])}class WithPromise{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(n=>{this.resolve=n})}notifyFinished(){this.resolve()}then(n,u){return this.finished.then(n,u)}}const percentToProgress=s=>s/100;class JSAnimation extends WithPromise{constructor(n){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:u}=this.options;u&&u.updatedAt!==time$2.now()&&this.tick(time$2.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=n,this.initAnimation(),this.play(),n.autoplay===!1&&this.pause()}initAnimation(){const{options:n}=this;replaceTransitionType(n);const{type:u=keyframes,repeat:f=0,repeatDelay:y=0,repeatType:S,velocity:A=0}=n;let{keyframes:w}=n;const C=u||keyframes;C!==keyframes&&typeof w[0]!="number"&&(this.mixKeyframes=pipe$1(percentToProgress,mix(w[0],w[1])),w=[0,100]);const T=C({...n,keyframes:w});S==="mirror"&&(this.mirroredGenerator=C({...n,keyframes:[...w].reverse(),velocity:-A})),T.calculatedDuration===null&&(T.calculatedDuration=calcGeneratorDuration(T));const{calculatedDuration:R}=T;this.calculatedDuration=R,this.resolvedDuration=R+y,this.totalDuration=this.resolvedDuration*(f+1)-y,this.generator=T}updateTime(n){const u=Math.round(n-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=u}tick(n,u=!1){const{generator:f,totalDuration:y,mixKeyframes:S,mirroredGenerator:A,resolvedDuration:w,calculatedDuration:C}=this;if(this.startTime===null)return f.next(0);const{delay:T=0,keyframes:R,repeat:I,repeatType:N,repeatDelay:L,type:F,onUpdate:H,finalKeyframe:z}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,n):this.speed<0&&(this.startTime=Math.min(n-y/this.speed,this.startTime)),u?this.currentTime=n:this.updateTime(n);const U=this.currentTime-T*(this.playbackSpeed>=0?1:-1),G=this.playbackSpeed>=0?U<0:U>y;this.currentTime=Math.max(U,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=y);let Y=this.currentTime,K=f;if(I){const de=Math.min(this.currentTime,y)/w;let se=Math.floor(de),ne=de%1;!ne&&de>=1&&(ne=1),ne===1&&se--,se=Math.min(se,I+1),se%2&&(N==="reverse"?(ne=1-ne,L&&(ne-=L/w)):N==="mirror"&&(K=A)),Y=clamp$1(0,1,ne)*w}const Z=G?{done:!1,value:R[0]}:K.next(Y);S&&(Z.value=S(Z.value));let{done:J}=Z;!G&&C!==null&&(J=this.playbackSpeed>=0?this.currentTime>=y:this.currentTime<=0);const te=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&J);return te&&F!==inertia&&(Z.value=getFinalKeyframe$1(R,this.options,z,this.speed)),H&&H(Z.value),te&&this.finish(),Z}then(n,u){return this.finished.then(n,u)}get duration(){return millisecondsToSeconds(this.calculatedDuration)}get iterationDuration(){const{delay:n=0}=this.options||{};return this.duration+millisecondsToSeconds(n)}get time(){return millisecondsToSeconds(this.currentTime)}set time(n){n=secondsToMilliseconds(n),this.currentTime=n,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=n:this.driver&&(this.startTime=this.driver.now()-n/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(n){this.updateTime(time$2.now());const u=this.playbackSpeed!==n;this.playbackSpeed=n,u&&(this.time=millisecondsToSeconds(this.currentTime))}play(){if(this.isStopped)return;const{driver:n=frameloopDriver,startTime:u}=this.options;this.driver||(this.driver=n(y=>this.tick(y))),this.options.onPlay?.();const f=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=f):this.holdTime!==null?this.startTime=f-this.holdTime:this.startTime||(this.startTime=u??f),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(time$2.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(n){return this.startTime=0,this.tick(n,!0)}attachTimeline(n){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),n.observe(this)}}function fillWildcards(s){for(let n=1;n<s.length;n++)s[n]??(s[n]=s[n-1])}const radToDeg$1=s=>s*180/Math.PI,rotate=s=>{const n=radToDeg$1(Math.atan2(s[1],s[0]));return rebaseAngle(n)},matrix2dParsers={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:s=>(Math.abs(s[0])+Math.abs(s[3]))/2,rotate,rotateZ:rotate,skewX:s=>radToDeg$1(Math.atan(s[1])),skewY:s=>radToDeg$1(Math.atan(s[2])),skew:s=>(Math.abs(s[1])+Math.abs(s[2]))/2},rebaseAngle=s=>(s=s%360,s<0&&(s+=360),s),rotateZ=rotate,scaleX=s=>Math.sqrt(s[0]*s[0]+s[1]*s[1]),scaleY=s=>Math.sqrt(s[4]*s[4]+s[5]*s[5]),matrix3dParsers={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX,scaleY,scale:s=>(scaleX(s)+scaleY(s))/2,rotateX:s=>rebaseAngle(radToDeg$1(Math.atan2(s[6],s[5]))),rotateY:s=>rebaseAngle(radToDeg$1(Math.atan2(-s[2],s[0]))),rotateZ,rotate:rotateZ,skewX:s=>radToDeg$1(Math.atan(s[4])),skewY:s=>radToDeg$1(Math.atan(s[1])),skew:s=>(Math.abs(s[1])+Math.abs(s[4]))/2};function defaultTransformValue(s){return s.includes("scale")?1:0}function parseValueFromTransform(s,n){if(!s||s==="none")return defaultTransformValue(n);const u=s.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let f,y;if(u)f=matrix3dParsers,y=u;else{const w=s.match(/^matrix\(([-\d.e\s,]+)\)$/u);f=matrix2dParsers,y=w}if(!y)return defaultTransformValue(n);const S=f[n],A=y[1].split(",").map(convertTransformToNumber);return typeof S=="function"?S(A):A[S]}const readTransformValue=(s,n)=>{const{transform:u="none"}=getComputedStyle(s);return parseValueFromTransform(u,n)};function convertTransformToNumber(s){return parseFloat(s.trim())}const transformPropOrder=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],transformProps=new Set(transformPropOrder),isNumOrPxType=s=>s===number$3||s===px$1,transformKeys=new Set(["x","y","z"]),nonTranslationalTransformKeys=transformPropOrder.filter(s=>!transformKeys.has(s));function removeNonTranslationalTransform(s){const n=[];return nonTranslationalTransformKeys.forEach(u=>{const f=s.getValue(u);f!==void 0&&(n.push([u,f.get()]),f.set(u.startsWith("scale")?1:0))}),n}const positionalValues={width:({x:s},{paddingLeft:n="0",paddingRight:u="0"})=>s.max-s.min-parseFloat(n)-parseFloat(u),height:({y:s},{paddingTop:n="0",paddingBottom:u="0"})=>s.max-s.min-parseFloat(n)-parseFloat(u),top:(s,{top:n})=>parseFloat(n),left:(s,{left:n})=>parseFloat(n),bottom:({y:s},{top:n})=>parseFloat(n)+(s.max-s.min),right:({x:s},{left:n})=>parseFloat(n)+(s.max-s.min),x:(s,{transform:n})=>parseValueFromTransform(n,"x"),y:(s,{transform:n})=>parseValueFromTransform(n,"y")};positionalValues.translateX=positionalValues.x;positionalValues.translateY=positionalValues.y;const toResolve=new Set;let isScheduled=!1,anyNeedsMeasurement=!1,isForced=!1;function measureAllKeyframes(){if(anyNeedsMeasurement){const s=Array.from(toResolve).filter(f=>f.needsMeasurement),n=new Set(s.map(f=>f.element)),u=new Map;n.forEach(f=>{const y=removeNonTranslationalTransform(f);y.length&&(u.set(f,y),f.render())}),s.forEach(f=>f.measureInitialState()),n.forEach(f=>{f.render();const y=u.get(f);y&&y.forEach(([S,A])=>{f.getValue(S)?.set(A)})}),s.forEach(f=>f.measureEndState()),s.forEach(f=>{f.suspendedScrollY!==void 0&&window.scrollTo(0,f.suspendedScrollY)})}anyNeedsMeasurement=!1,isScheduled=!1,toResolve.forEach(s=>s.complete(isForced)),toResolve.clear()}function readAllKeyframes(){toResolve.forEach(s=>{s.readKeyframes(),s.needsMeasurement&&(anyNeedsMeasurement=!0)})}function flushKeyframeResolvers(){isForced=!0,readAllKeyframes(),measureAllKeyframes(),isForced=!1}class KeyframeResolver{constructor(n,u,f,y,S,A=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...n],this.onComplete=u,this.name=f,this.motionValue=y,this.element=S,this.isAsync=A}scheduleResolve(){this.state="scheduled",this.isAsync?(toResolve.add(this),isScheduled||(isScheduled=!0,frame$1.read(readAllKeyframes),frame$1.resolveKeyframes(measureAllKeyframes))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:n,name:u,element:f,motionValue:y}=this;if(n[0]===null){const S=y?.get(),A=n[n.length-1];if(S!==void 0)n[0]=S;else if(f&&u){const w=f.readValue(u,A);w!=null&&(n[0]=w)}n[0]===void 0&&(n[0]=A),y&&S===void 0&&y.set(n[0])}fillWildcards(n)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(n=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,n),toResolve.delete(this)}cancel(){this.state==="scheduled"&&(toResolve.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const isCSSVar=s=>s.startsWith("--");function setStyle(s,n,u){isCSSVar(n)?s.style.setProperty(n,u):s.style[n]=u}const supportsScrollTimeline=memo(()=>window.ScrollTimeline!==void 0),supportsFlags={};function memoSupports(s,n){const u=memo(s);return()=>supportsFlags[n]??u()}const supportsLinearEasing=memoSupports(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),cubicBezierAsString=([s,n,u,f])=>`cubic-bezier(${s}, ${n}, ${u}, ${f})`,supportedWaapiEasing={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:cubicBezierAsString([0,.65,.55,1]),circOut:cubicBezierAsString([.55,0,1,.45]),backIn:cubicBezierAsString([.31,.01,.66,-.59]),backOut:cubicBezierAsString([.33,1.53,.69,.99])};function mapEasingToNativeEasing(s,n){if(s)return typeof s=="function"?supportsLinearEasing()?generateLinearEasing(s,n):"ease-out":isBezierDefinition(s)?cubicBezierAsString(s):Array.isArray(s)?s.map(u=>mapEasingToNativeEasing(u,n)||supportedWaapiEasing.easeOut):supportedWaapiEasing[s]}function startWaapiAnimation(s,n,u,{delay:f=0,duration:y=300,repeat:S=0,repeatType:A="loop",ease:w="easeOut",times:C}={},T=void 0){const R={[n]:u};C&&(R.offset=C);const I=mapEasingToNativeEasing(w,y);Array.isArray(I)&&(R.easing=I);const N={delay:f,duration:y,easing:Array.isArray(I)?"linear":I,fill:"both",iterations:S+1,direction:A==="reverse"?"alternate":"normal"};return T&&(N.pseudoElement=T),s.animate(R,N)}function isGenerator(s){return typeof s=="function"&&"applyToOptions"in s}function applyGeneratorOptions({type:s,...n}){return isGenerator(s)&&supportsLinearEasing()?s.applyToOptions(n):(n.duration??(n.duration=300),n.ease??(n.ease="easeOut"),n)}class NativeAnimation extends WithPromise{constructor(n){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!n)return;const{element:u,name:f,keyframes:y,pseudoElement:S,allowFlatten:A=!1,finalKeyframe:w,onComplete:C}=n;this.isPseudoElement=!!S,this.allowFlatten=A,this.options=n,invariant(typeof n.type!="string");const T=applyGeneratorOptions(n);this.animation=startWaapiAnimation(u,f,y,T,S),T.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!S){const R=getFinalKeyframe$1(y,this.options,w,this.speed);this.updateMotionValue?this.updateMotionValue(R):setStyle(u,f,R),this.animation.cancel()}C?.(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:n}=this;n==="idle"||n==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){const n=this.options?.element;!this.isPseudoElement&&n?.isConnected&&this.animation.commitStyles?.()}get duration(){const n=this.animation.effect?.getComputedTiming?.().duration||0;return millisecondsToSeconds(Number(n))}get iterationDuration(){const{delay:n=0}=this.options||{};return this.duration+millisecondsToSeconds(n)}get time(){return millisecondsToSeconds(Number(this.animation.currentTime)||0)}set time(n){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=secondsToMilliseconds(n)}get speed(){return this.animation.playbackRate}set speed(n){n<0&&(this.finishedTime=null),this.animation.playbackRate=n}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(n){this.manualStartTime=this.animation.startTime=n}attachTimeline({timeline:n,observe:u}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,n&&supportsScrollTimeline()?(this.animation.timeline=n,noop$1):u(this)}}const unsupportedEasingFunctions={anticipate,backInOut,circInOut};function isUnsupportedEase(s){return s in unsupportedEasingFunctions}function replaceStringEasing(s){typeof s.ease=="string"&&isUnsupportedEase(s.ease)&&(s.ease=unsupportedEasingFunctions[s.ease])}const sampleDelta=10;class NativeAnimationExtended extends NativeAnimation{constructor(n){replaceStringEasing(n),replaceTransitionType(n),super(n),n.startTime!==void 0&&(this.startTime=n.startTime),this.options=n}updateMotionValue(n){const{motionValue:u,onUpdate:f,onComplete:y,element:S,...A}=this.options;if(!u)return;if(n!==void 0){u.set(n);return}const w=new JSAnimation({...A,autoplay:!1}),C=Math.max(sampleDelta,time$2.now()-this.startTime),T=clamp$1(0,sampleDelta,C-sampleDelta);u.setWithVelocity(w.sample(Math.max(0,C-T)).value,w.sample(C).value,T),w.stop()}}const isAnimatable=(s,n)=>n==="zIndex"?!1:!!(typeof s=="number"||Array.isArray(s)||typeof s=="string"&&(complex.test(s)||s==="0")&&!s.startsWith("url("));function hasKeyframesChanged(s){const n=s[0];if(s.length===1)return!0;for(let u=0;u<s.length;u++)if(s[u]!==n)return!0}function canAnimate(s,n,u,f){const y=s[0];if(y===null)return!1;if(n==="display"||n==="visibility")return!0;const S=s[s.length-1],A=isAnimatable(y,n),w=isAnimatable(S,n);return!A||!w?!1:hasKeyframesChanged(s)||(u==="spring"||isGenerator(u))&&f}function makeAnimationInstant(s){s.duration=0,s.type="keyframes"}const acceleratedValues=new Set(["opacity","clipPath","filter","transform"]),supportsWaapi=memo(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function supportsBrowserAnimation(s){const{motionValue:n,name:u,repeatDelay:f,repeatType:y,damping:S,type:A}=s;if(!(n?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:w,transformTemplate:C}=n.owner.getProps();return supportsWaapi()&&u&&acceleratedValues.has(u)&&(u!=="transform"||!C)&&!w&&!f&&y!=="mirror"&&S!==0&&A!=="inertia"}const MAX_RESOLVE_DELAY=40;class AsyncMotionValueAnimation extends WithPromise{constructor({autoplay:n=!0,delay:u=0,type:f="keyframes",repeat:y=0,repeatDelay:S=0,repeatType:A="loop",keyframes:w,name:C,motionValue:T,element:R,...I}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=time$2.now();const N={autoplay:n,delay:u,type:f,repeat:y,repeatDelay:S,repeatType:A,name:C,motionValue:T,element:R,...I},L=R?.KeyframeResolver||KeyframeResolver;this.keyframeResolver=new L(w,(F,H,z)=>this.onKeyframesResolved(F,H,N,!z),C,T,R),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(n,u,f,y){this.keyframeResolver=void 0;const{name:S,type:A,velocity:w,delay:C,isHandoff:T,onUpdate:R}=f;this.resolvedAt=time$2.now(),canAnimate(n,S,A,w)||((MotionGlobalConfig.instantAnimations||!C)&&R?.(getFinalKeyframe$1(n,f,u)),n[0]=n[n.length-1],makeAnimationInstant(f),f.repeat=0);const I={startTime:y?this.resolvedAt?this.resolvedAt-this.createdAt>MAX_RESOLVE_DELAY?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:u,...f,keyframes:n},N=!T&&supportsBrowserAnimation(I),L=I.motionValue?.owner?.current,F=N?new NativeAnimationExtended({...I,element:L}):new JSAnimation(I);F.finished.then(()=>{this.notifyFinished()}).catch(noop$1),this.pendingTimeline&&(this.stopTimeline=F.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=F}get finished(){return this._animation?this.animation.finished:this._finished}then(n,u){return this.finished.finally(n).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),flushKeyframeResolvers()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(n){this.animation.time=n}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(n){this.animation.speed=n}get startTime(){return this.animation.startTime}attachTimeline(n){return this._animation?this.stopTimeline=this.animation.attachTimeline(n):this.pendingTimeline=n,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}function calcChildStagger(s,n,u,f=0,y=1){const S=Array.from(s).sort((C,T)=>C.sortNodePosition(T)).indexOf(n),A=s.size,w=(A-1)*f;return typeof u=="function"?u(S,A):y===1?S*f:w-S*f}const splitCSSVariableRegex=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function parseCSSVariable(s){const n=splitCSSVariableRegex.exec(s);if(!n)return[,];const[,u,f,y]=n;return[`--${u??f}`,y]}function getVariableValue(s,n,u=1){const[f,y]=parseCSSVariable(s);if(!f)return;const S=window.getComputedStyle(n).getPropertyValue(f);if(S){const A=S.trim();return isNumericalString(A)?parseFloat(A):A}return isCSSVariableToken(y)?getVariableValue(y,n,u+1):y}const underDampedSpring={type:"spring",stiffness:500,damping:25,restSpeed:10},criticallyDampedSpring=s=>({type:"spring",stiffness:550,damping:s===0?2*Math.sqrt(550):30,restSpeed:10}),keyframesTransition={type:"keyframes",duration:.8},ease={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},getDefaultTransition=(s,{keyframes:n})=>n.length>2?keyframesTransition:transformProps.has(s)?s.startsWith("scale")?criticallyDampedSpring(n[1]):underDampedSpring:ease,isNotNull=s=>s!==null;function getFinalKeyframe(s,{repeat:n,repeatType:u="loop"},f){const y=s.filter(isNotNull),S=n&&u!=="loop"&&n%2===1?0:y.length-1;return y[S]}function getValueTransition(s,n){return s?.[n]??s?.default??s}function isTransitionDefined({when:s,delay:n,delayChildren:u,staggerChildren:f,staggerDirection:y,repeat:S,repeatType:A,repeatDelay:w,from:C,elapsed:T,...R}){return!!Object.keys(R).length}const animateMotionValue=(s,n,u,f={},y,S)=>A=>{const w=getValueTransition(f,s)||{},C=w.delay||f.delay||0;let{elapsed:T=0}=f;T=T-secondsToMilliseconds(C);const R={keyframes:Array.isArray(u)?u:[null,u],ease:"easeOut",velocity:n.getVelocity(),...w,delay:-T,onUpdate:N=>{n.set(N),w.onUpdate&&w.onUpdate(N)},onComplete:()=>{A(),w.onComplete&&w.onComplete()},name:s,motionValue:n,element:S?void 0:y};isTransitionDefined(w)||Object.assign(R,getDefaultTransition(s,R)),R.duration&&(R.duration=secondsToMilliseconds(R.duration)),R.repeatDelay&&(R.repeatDelay=secondsToMilliseconds(R.repeatDelay)),R.from!==void 0&&(R.keyframes[0]=R.from);let I=!1;if((R.type===!1||R.duration===0&&!R.repeatDelay)&&(makeAnimationInstant(R),R.delay===0&&(I=!0)),(MotionGlobalConfig.instantAnimations||MotionGlobalConfig.skipAnimations||y?.shouldSkipAnimations)&&(I=!0,makeAnimationInstant(R),R.delay=0),R.allowFlatten=!w.type&&!w.ease,I&&!S&&n.get()!==void 0){const N=getFinalKeyframe(R.keyframes,w);if(N!==void 0){frame$1.update(()=>{R.onUpdate(N),R.onComplete()});return}}return w.isSync?new JSAnimation(R):new AsyncMotionValueAnimation(R)};function getValueState(s){const n=[{},{}];return s?.values.forEach((u,f)=>{n[0][f]=u.get(),n[1][f]=u.getVelocity()}),n}function resolveVariantFromProps(s,n,u,f){if(typeof n=="function"){const[y,S]=getValueState(f);n=n(u!==void 0?u:s.custom,y,S)}if(typeof n=="string"&&(n=s.variants&&s.variants[n]),typeof n=="function"){const[y,S]=getValueState(f);n=n(u!==void 0?u:s.custom,y,S)}return n}function resolveVariant(s,n,u){const f=s.getProps();return resolveVariantFromProps(f,n,u!==void 0?u:f.custom,s)}const positionalKeys=new Set(["width","height","top","left","right","bottom",...transformPropOrder]),MAX_VELOCITY_DELTA=30,isFloat=s=>!isNaN(parseFloat(s));class MotionValue{constructor(n,u={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=f=>{const y=time$2.now();if(this.updatedAt!==y&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(f),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const S of this.dependents)S.dirty()},this.hasAnimated=!1,this.setCurrent(n),this.owner=u.owner}setCurrent(n){this.current=n,this.updatedAt=time$2.now(),this.canTrackVelocity===null&&n!==void 0&&(this.canTrackVelocity=isFloat(this.current))}setPrevFrameValue(n=this.current){this.prevFrameValue=n,this.prevUpdatedAt=this.updatedAt}onChange(n){return this.on("change",n)}on(n,u){this.events[n]||(this.events[n]=new SubscriptionManager);const f=this.events[n].add(u);return n==="change"?()=>{f(),frame$1.read(()=>{this.events.change.getSize()||this.stop()})}:f}clearListeners(){for(const n in this.events)this.events[n].clear()}attach(n,u){this.passiveEffect=n,this.stopPassiveEffect=u}set(n){this.passiveEffect?this.passiveEffect(n,this.updateAndNotify):this.updateAndNotify(n)}setWithVelocity(n,u,f){this.set(u),this.prev=void 0,this.prevFrameValue=n,this.prevUpdatedAt=this.updatedAt-f}jump(n,u=!0){this.updateAndNotify(n),this.prev=n,this.prevUpdatedAt=this.prevFrameValue=void 0,u&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(n){this.dependents||(this.dependents=new Set),this.dependents.add(n)}removeDependent(n){this.dependents&&this.dependents.delete(n)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const n=time$2.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||n-this.updatedAt>MAX_VELOCITY_DELTA)return 0;const u=Math.min(this.updatedAt-this.prevUpdatedAt,MAX_VELOCITY_DELTA);return velocityPerSecond(parseFloat(this.current)-parseFloat(this.prevFrameValue),u)}start(n){return this.stop(),new Promise(u=>{this.hasAnimated=!0,this.animation=n(u),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function motionValue(s,n){return new MotionValue(s,n)}const isKeyframesTarget=s=>Array.isArray(s);function setMotionValue(s,n,u){s.hasValue(n)?s.getValue(n).set(u):s.addValue(n,motionValue(u))}function resolveFinalValueInKeyframes(s){return isKeyframesTarget(s)?s[s.length-1]||0:s}function setTarget(s,n){const u=resolveVariant(s,n);let{transitionEnd:f={},transition:y={},...S}=u||{};S={...S,...f};for(const A in S){const w=resolveFinalValueInKeyframes(S[A]);setMotionValue(s,A,w)}}const isMotionValue=s=>!!(s&&s.getVelocity);function isWillChangeMotionValue(s){return!!(isMotionValue(s)&&s.add)}function addValueToWillChange(s,n){const u=s.getValue("willChange");if(isWillChangeMotionValue(u))return u.add(n);if(!u&&MotionGlobalConfig.WillChange){const f=new MotionGlobalConfig.WillChange("auto");s.addValue("willChange",f),f.add(n)}}function camelToDash(s){return s.replace(/([A-Z])/g,n=>`-${n.toLowerCase()}`)}const optimizedAppearDataId="framerAppearId",optimizedAppearDataAttribute="data-"+camelToDash(optimizedAppearDataId);function getOptimisedAppearId(s){return s.props[optimizedAppearDataAttribute]}function shouldBlockAnimation({protectedKeys:s,needsAnimating:n},u){const f=s.hasOwnProperty(u)&&n[u]!==!0;return n[u]=!1,f}function animateTarget(s,n,{delay:u=0,transitionOverride:f,type:y}={}){let{transition:S=s.getDefaultTransition(),transitionEnd:A,...w}=n;const C=S?.reduceMotion;f&&(S=f);const T=[],R=y&&s.animationState&&s.animationState.getState()[y];for(const I in w){const N=s.getValue(I,s.latestValues[I]??null),L=w[I];if(L===void 0||R&&shouldBlockAnimation(R,I))continue;const F={delay:u,...getValueTransition(S||{},I)},H=N.get();if(H!==void 0&&!N.isAnimating&&!Array.isArray(L)&&L===H&&!F.velocity)continue;let z=!1;if(window.MotionHandoffAnimation){const Y=getOptimisedAppearId(s);if(Y){const K=window.MotionHandoffAnimation(Y,I,frame$1);K!==null&&(F.startTime=K,z=!0)}}addValueToWillChange(s,I);const U=C??s.shouldReduceMotion;N.start(animateMotionValue(I,N,L,U&&positionalKeys.has(I)?{type:!1}:F,s,z));const G=N.animation;G&&T.push(G)}return A&&Promise.all(T).then(()=>{frame$1.update(()=>{A&&setTarget(s,A)})}),T}function animateVariant(s,n,u={}){const f=resolveVariant(s,n,u.type==="exit"?s.presenceContext?.custom:void 0);let{transition:y=s.getDefaultTransition()||{}}=f||{};u.transitionOverride&&(y=u.transitionOverride);const S=f?()=>Promise.all(animateTarget(s,f,u)):()=>Promise.resolve(),A=s.variantChildren&&s.variantChildren.size?(C=0)=>{const{delayChildren:T=0,staggerChildren:R,staggerDirection:I}=y;return animateChildren(s,n,C,T,R,I,u)}:()=>Promise.resolve(),{when:w}=y;if(w){const[C,T]=w==="beforeChildren"?[S,A]:[A,S];return C().then(()=>T())}else return Promise.all([S(),A(u.delay)])}function animateChildren(s,n,u=0,f=0,y=0,S=1,A){const w=[];for(const C of s.variantChildren)C.notify("AnimationStart",n),w.push(animateVariant(C,n,{...A,delay:u+(typeof f=="function"?0:f)+calcChildStagger(s.variantChildren,C,f,y,S)}).then(()=>C.notify("AnimationComplete",n)));return Promise.all(w)}function animateVisualElement(s,n,u={}){s.notify("AnimationStart",n);let f;if(Array.isArray(n)){const y=n.map(S=>animateVariant(s,S,u));f=Promise.all(y)}else if(typeof n=="string")f=animateVariant(s,n,u);else{const y=typeof n=="function"?resolveVariant(s,n,u.custom):n;f=Promise.all(animateTarget(s,y,u))}return f.then(()=>{s.notify("AnimationComplete",n)})}const auto={test:s=>s==="auto",parse:s=>s},testValueType=s=>n=>n.test(s),dimensionValueTypes=[number$3,px$1,percent,degrees,vw,vh,auto],findDimensionValueType=s=>dimensionValueTypes.find(testValueType(s));function isNone(s){return typeof s=="number"?s===0:s!==null?s==="none"||s==="0"||isZeroValueString(s):!0}const maxDefaults=new Set(["brightness","contrast","saturate","opacity"]);function applyDefaultFilter(s){const[n,u]=s.slice(0,-1).split("(");if(n==="drop-shadow")return s;const[f]=u.match(floatRegex)||[];if(!f)return s;const y=u.replace(f,"");let S=maxDefaults.has(n)?1:0;return f!==u&&(S*=100),n+"("+S+y+")"}const functionRegex=/\b([a-z-]*)\(.*?\)/gu,filter={...complex,getAnimatableNone:s=>{const n=s.match(functionRegex);return n?n.map(applyDefaultFilter).join(" "):s}},int$1={...number$3,transform:Math.round},transformValueTypes={rotate:degrees,rotateX:degrees,rotateY:degrees,rotateZ:degrees,scale,scaleX:scale,scaleY:scale,scaleZ:scale,skew:degrees,skewX:degrees,skewY:degrees,distance:px$1,translateX:px$1,translateY:px$1,translateZ:px$1,x:px$1,y:px$1,z:px$1,perspective:px$1,transformPerspective:px$1,opacity:alpha,originX:progressPercentage,originY:progressPercentage,originZ:px$1},numberValueTypes={borderWidth:px$1,borderTopWidth:px$1,borderRightWidth:px$1,borderBottomWidth:px$1,borderLeftWidth:px$1,borderRadius:px$1,borderTopLeftRadius:px$1,borderTopRightRadius:px$1,borderBottomRightRadius:px$1,borderBottomLeftRadius:px$1,width:px$1,maxWidth:px$1,height:px$1,maxHeight:px$1,top:px$1,right:px$1,bottom:px$1,left:px$1,inset:px$1,insetBlock:px$1,insetBlockStart:px$1,insetBlockEnd:px$1,insetInline:px$1,insetInlineStart:px$1,insetInlineEnd:px$1,padding:px$1,paddingTop:px$1,paddingRight:px$1,paddingBottom:px$1,paddingLeft:px$1,paddingBlock:px$1,paddingBlockStart:px$1,paddingBlockEnd:px$1,paddingInline:px$1,paddingInlineStart:px$1,paddingInlineEnd:px$1,margin:px$1,marginTop:px$1,marginRight:px$1,marginBottom:px$1,marginLeft:px$1,marginBlock:px$1,marginBlockStart:px$1,marginBlockEnd:px$1,marginInline:px$1,marginInlineStart:px$1,marginInlineEnd:px$1,fontSize:px$1,backgroundPositionX:px$1,backgroundPositionY:px$1,...transformValueTypes,zIndex:int$1,fillOpacity:alpha,strokeOpacity:alpha,numOctaves:int$1},defaultValueTypes={...numberValueTypes,color:color$1,backgroundColor:color$1,outlineColor:color$1,fill:color$1,stroke:color$1,borderColor:color$1,borderTopColor:color$1,borderRightColor:color$1,borderBottomColor:color$1,borderLeftColor:color$1,filter,WebkitFilter:filter},getDefaultValueType=s=>defaultValueTypes[s];function getAnimatableNone(s,n){let u=getDefaultValueType(s);return u!==filter&&(u=complex),u.getAnimatableNone?u.getAnimatableNone(n):void 0}const invalidTemplates=new Set(["auto","none","0"]);function makeNoneKeyframesAnimatable(s,n,u){let f=0,y;for(;f<s.length&&!y;){const S=s[f];typeof S=="string"&&!invalidTemplates.has(S)&&analyseComplexValue(S).values.length&&(y=s[f]),f++}if(y&&u)for(const S of n)s[S]=getAnimatableNone(u,y)}class DOMKeyframesResolver extends KeyframeResolver{constructor(n,u,f,y,S){super(n,u,f,y,S,!0)}readKeyframes(){const{unresolvedKeyframes:n,element:u,name:f}=this;if(!u||!u.current)return;super.readKeyframes();for(let R=0;R<n.length;R++){let I=n[R];if(typeof I=="string"&&(I=I.trim(),isCSSVariableToken(I))){const N=getVariableValue(I,u.current);N!==void 0&&(n[R]=N),R===n.length-1&&(this.finalKeyframe=I)}}if(this.resolveNoneKeyframes(),!positionalKeys.has(f)||n.length!==2)return;const[y,S]=n,A=findDimensionValueType(y),w=findDimensionValueType(S),C=containsCSSVariable(y),T=containsCSSVariable(S);if(C!==T&&positionalValues[f]){this.needsMeasurement=!0;return}if(A!==w)if(isNumOrPxType(A)&&isNumOrPxType(w))for(let R=0;R<n.length;R++){const I=n[R];typeof I=="string"&&(n[R]=parseFloat(I))}else positionalValues[f]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:n,name:u}=this,f=[];for(let y=0;y<n.length;y++)(n[y]===null||isNone(n[y]))&&f.push(y);f.length&&makeNoneKeyframesAnimatable(n,f,u)}measureInitialState(){const{element:n,unresolvedKeyframes:u,name:f}=this;if(!n||!n.current)return;f==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=positionalValues[f](n.measureViewportBox(),window.getComputedStyle(n.current)),u[0]=this.measuredOrigin;const y=u[u.length-1];y!==void 0&&n.getValue(f,y).jump(y,!1)}measureEndState(){const{element:n,name:u,unresolvedKeyframes:f}=this;if(!n||!n.current)return;const y=n.getValue(u);y&&y.jump(this.measuredOrigin,!1);const S=f.length-1,A=f[S];f[S]=positionalValues[u](n.measureViewportBox(),window.getComputedStyle(n.current)),A!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=A),this.removedTransforms?.length&&this.removedTransforms.forEach(([w,C])=>{n.getValue(w).set(C)}),this.resolveNoneKeyframes()}}function resolveElements(s,n,u){if(s==null)return[];if(s instanceof EventTarget)return[s];if(typeof s=="string"){const y=document.querySelectorAll(s);return y?Array.from(y):[]}return Array.from(s).filter(f=>f!=null)}const getValueAsType=(s,n)=>n&&typeof s=="number"?n.transform(s):s;function isHTMLElement(s){return isObject$1(s)&&"offsetHeight"in s}const{schedule:microtask}=createRenderBatcher(queueMicrotask,!1),isDragging={x:!1,y:!1};function isDragActive(){return isDragging.x||isDragging.y}function setDragLock(s){return s==="x"||s==="y"?isDragging[s]?null:(isDragging[s]=!0,()=>{isDragging[s]=!1}):isDragging.x||isDragging.y?null:(isDragging.x=isDragging.y=!0,()=>{isDragging.x=isDragging.y=!1})}function setupGesture(s,n){const u=resolveElements(s),f=new AbortController,y={passive:!0,...n,signal:f.signal};return[u,y,()=>f.abort()]}function isValidHover(s){return!(s.pointerType==="touch"||isDragActive())}function hover(s,n,u={}){const[f,y,S]=setupGesture(s,u),A=w=>{if(!isValidHover(w))return;const{target:C}=w,T=n(C,w);if(typeof T!="function"||!C)return;const R=I=>{isValidHover(I)&&(T(I),C.removeEventListener("pointerleave",R))};C.addEventListener("pointerleave",R,y)};return f.forEach(w=>{w.addEventListener("pointerenter",A,y)}),S}const isNodeOrChild=(s,n)=>n?s===n?!0:isNodeOrChild(s,n.parentElement):!1,isPrimaryPointer=s=>s.pointerType==="mouse"?typeof s.button!="number"||s.button<=0:s.isPrimary!==!1,keyboardAccessibleElements=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function isElementKeyboardAccessible(s){return keyboardAccessibleElements.has(s.tagName)||s.isContentEditable===!0}const textInputElements=new Set(["INPUT","SELECT","TEXTAREA"]);function isElementTextInput(s){return textInputElements.has(s.tagName)||s.isContentEditable===!0}const isPressing=new WeakSet;function filterEvents(s){return n=>{n.key==="Enter"&&s(n)}}function firePointerEvent(s,n){s.dispatchEvent(new PointerEvent("pointer"+n,{isPrimary:!0,bubbles:!0}))}const enableKeyboardPress=(s,n)=>{const u=s.currentTarget;if(!u)return;const f=filterEvents(()=>{if(isPressing.has(u))return;firePointerEvent(u,"down");const y=filterEvents(()=>{firePointerEvent(u,"up")}),S=()=>firePointerEvent(u,"cancel");u.addEventListener("keyup",y,n),u.addEventListener("blur",S,n)});u.addEventListener("keydown",f,n),u.addEventListener("blur",()=>u.removeEventListener("keydown",f),n)};function isValidPressEvent(s){return isPrimaryPointer(s)&&!isDragActive()}function press(s,n,u={}){const[f,y,S]=setupGesture(s,u),A=w=>{const C=w.currentTarget;if(!isValidPressEvent(w))return;isPressing.add(C);const T=n(C,w),R=(L,F)=>{window.removeEventListener("pointerup",I),window.removeEventListener("pointercancel",N),isPressing.has(C)&&isPressing.delete(C),isValidPressEvent(L)&&typeof T=="function"&&T(L,{success:F})},I=L=>{R(L,C===window||C===document||u.useGlobalTarget||isNodeOrChild(C,L.target))},N=L=>{R(L,!1)};window.addEventListener("pointerup",I,y),window.addEventListener("pointercancel",N,y)};return f.forEach(w=>{(u.useGlobalTarget?window:w).addEventListener("pointerdown",A,y),isHTMLElement(w)&&(w.addEventListener("focus",C=>enableKeyboardPress(C,y)),!isElementKeyboardAccessible(w)&&!w.hasAttribute("tabindex")&&(w.tabIndex=0))}),S}function isSVGElement(s){return isObject$1(s)&&"ownerSVGElement"in s}function isSVGSVGElement(s){return isSVGElement(s)&&s.tagName==="svg"}const valueTypes=[...dimensionValueTypes,color$1,complex],findValueType=s=>valueTypes.find(testValueType(s)),createAxisDelta=()=>({translate:0,scale:1,origin:0,originPoint:0}),createDelta=()=>({x:createAxisDelta(),y:createAxisDelta()}),createAxis=()=>({min:0,max:0}),createBox=()=>({x:createAxis(),y:createAxis()}),prefersReducedMotion={current:null},hasReducedMotionListener={current:!1},isBrowser=typeof window<"u";function initPrefersReducedMotion(){if(hasReducedMotionListener.current=!0,!!isBrowser)if(window.matchMedia){const s=window.matchMedia("(prefers-reduced-motion)"),n=()=>prefersReducedMotion.current=s.matches;s.addEventListener("change",n),n()}else prefersReducedMotion.current=!1}const visualElementStore=new WeakMap;function isAnimationControls(s){return s!==null&&typeof s=="object"&&typeof s.start=="function"}function isVariantLabel(s){return typeof s=="string"||Array.isArray(s)}const variantPriorityOrder=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],variantProps=["initial",...variantPriorityOrder];function isControllingVariants(s){return isAnimationControls(s.animate)||variantProps.some(n=>isVariantLabel(s[n]))}function isVariantNode(s){return!!(isControllingVariants(s)||s.variants)}function updateMotionValuesFromProps(s,n,u){for(const f in n){const y=n[f],S=u[f];if(isMotionValue(y))s.addValue(f,y);else if(isMotionValue(S))s.addValue(f,motionValue(y,{owner:s}));else if(S!==y)if(s.hasValue(f)){const A=s.getValue(f);A.liveStyle===!0?A.jump(y):A.hasAnimated||A.set(y)}else{const A=s.getStaticValue(f);s.addValue(f,motionValue(A!==void 0?A:y,{owner:s}))}}for(const f in u)n[f]===void 0&&s.removeValue(f);return n}const propEventHandlers=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let featureDefinitions={};function setFeatureDefinitions(s){featureDefinitions=s}function getFeatureDefinitions(){return featureDefinitions}class VisualElement{scrapeMotionValuesFromProps(n,u,f){return{}}constructor({parent:n,props:u,presenceContext:f,reducedMotionConfig:y,skipAnimations:S,blockInitialAnimation:A,visualState:w},C={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.shouldSkipAnimations=!1,this.values=new Map,this.KeyframeResolver=KeyframeResolver,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const L=time$2.now();this.renderScheduledAt<L&&(this.renderScheduledAt=L,frame$1.render(this.render,!1,!0))};const{latestValues:T,renderState:R}=w;this.latestValues=T,this.baseTarget={...T},this.initialValues=u.initial?{...T}:{},this.renderState=R,this.parent=n,this.props=u,this.presenceContext=f,this.depth=n?n.depth+1:0,this.reducedMotionConfig=y,this.skipAnimationsConfig=S,this.options=C,this.blockInitialAnimation=!!A,this.isControllingVariants=isControllingVariants(u),this.isVariantNode=isVariantNode(u),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(n&&n.current);const{willChange:I,...N}=this.scrapeMotionValuesFromProps(u,{},this);for(const L in N){const F=N[L];T[L]!==void 0&&isMotionValue(F)&&F.set(T[L])}}mount(n){this.current=n,visualElementStore.set(n,this),this.projection&&!this.projection.instance&&this.projection.mount(n),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((u,f)=>this.bindToMotionValue(f,u)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(hasReducedMotionListener.current||initPrefersReducedMotion(),this.shouldReduceMotion=prefersReducedMotion.current),this.shouldSkipAnimations=this.skipAnimationsConfig??!1,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),cancelFrame(this.notifyUpdate),cancelFrame(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const u=this.features[n];u&&(u.unmount(),u.isMounted=!1)}this.current=null}addChild(n){this.children.add(n),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(n)}removeChild(n){this.children.delete(n),this.enteringChildren&&this.enteringChildren.delete(n)}bindToMotionValue(n,u){this.valueSubscriptions.has(n)&&this.valueSubscriptions.get(n)();const f=transformProps.has(n);f&&this.onBindTransform&&this.onBindTransform();const y=u.on("change",A=>{this.latestValues[n]=A,this.props.onUpdate&&frame$1.preRender(this.notifyUpdate),f&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let S;typeof window<"u"&&window.MotionCheckAppearSync&&(S=window.MotionCheckAppearSync(this,n,u)),this.valueSubscriptions.set(n,()=>{y(),S&&S(),u.owner&&u.stop()})}sortNodePosition(n){return!this.current||!this.sortInstanceNodePosition||this.type!==n.type?0:this.sortInstanceNodePosition(this.current,n.current)}updateFeatures(){let n="animation";for(n in featureDefinitions){const u=featureDefinitions[n];if(!u)continue;const{isEnabled:f,Feature:y}=u;if(!this.features[n]&&y&&f(this.props)&&(this.features[n]=new y(this)),this.features[n]){const S=this.features[n];S.isMounted?S.update():(S.mount(),S.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):createBox()}getStaticValue(n){return this.latestValues[n]}setStaticValue(n,u){this.latestValues[n]=u}update(n,u){(n.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=n,this.prevPresenceContext=this.presenceContext,this.presenceContext=u;for(let f=0;f<propEventHandlers.length;f++){const y=propEventHandlers[f];this.propEventSubscriptions[y]&&(this.propEventSubscriptions[y](),delete this.propEventSubscriptions[y]);const S="on"+y,A=n[S];A&&(this.propEventSubscriptions[y]=this.on(y,A))}this.prevMotionValues=updateMotionValuesFromProps(this,this.scrapeMotionValuesFromProps(n,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(n){return this.props.variants?this.props.variants[n]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(n){const u=this.getClosestVariantNode();if(u)return u.variantChildren&&u.variantChildren.add(n),()=>u.variantChildren.delete(n)}addValue(n,u){const f=this.values.get(n);u!==f&&(f&&this.removeValue(n),this.bindToMotionValue(n,u),this.values.set(n,u),this.latestValues[n]=u.get())}removeValue(n){this.values.delete(n);const u=this.valueSubscriptions.get(n);u&&(u(),this.valueSubscriptions.delete(n)),delete this.latestValues[n],this.removeValueFromRenderState(n,this.renderState)}hasValue(n){return this.values.has(n)}getValue(n,u){if(this.props.values&&this.props.values[n])return this.props.values[n];let f=this.values.get(n);return f===void 0&&u!==void 0&&(f=motionValue(u===null?void 0:u,{owner:this}),this.addValue(n,f)),f}readValue(n,u){let f=this.latestValues[n]!==void 0||!this.current?this.latestValues[n]:this.getBaseTargetFromProps(this.props,n)??this.readValueFromInstance(this.current,n,this.options);return f!=null&&(typeof f=="string"&&(isNumericalString(f)||isZeroValueString(f))?f=parseFloat(f):!findValueType(f)&&complex.test(u)&&(f=getAnimatableNone(n,u)),this.setBaseTarget(n,isMotionValue(f)?f.get():f)),isMotionValue(f)?f.get():f}setBaseTarget(n,u){this.baseTarget[n]=u}getBaseTarget(n){const{initial:u}=this.props;let f;if(typeof u=="string"||typeof u=="object"){const S=resolveVariantFromProps(this.props,u,this.presenceContext?.custom);S&&(f=S[n])}if(u&&f!==void 0)return f;const y=this.getBaseTargetFromProps(this.props,n);return y!==void 0&&!isMotionValue(y)?y:this.initialValues[n]!==void 0&&f===void 0?void 0:this.baseTarget[n]}on(n,u){return this.events[n]||(this.events[n]=new SubscriptionManager),this.events[n].add(u)}notify(n,...u){this.events[n]&&this.events[n].notify(...u)}scheduleRenderMicrotask(){microtask.render(this.render)}}class DOMVisualElement extends VisualElement{constructor(){super(...arguments),this.KeyframeResolver=DOMKeyframesResolver}sortInstanceNodePosition(n,u){return n.compareDocumentPosition(u)&2?1:-1}getBaseTargetFromProps(n,u){const f=n.style;return f?f[u]:void 0}removeValueFromRenderState(n,{vars:u,style:f}){delete u[n],delete f[n]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:n}=this.props;isMotionValue(n)&&(this.childSubscription=n.on("change",u=>{this.current&&(this.current.textContent=`${u}`)}))}}class Feature{constructor(n){this.isMounted=!1,this.node=n}update(){}}function convertBoundingBoxToBox({top:s,left:n,right:u,bottom:f}){return{x:{min:n,max:u},y:{min:s,max:f}}}function convertBoxToBoundingBox({x:s,y:n}){return{top:n.min,right:s.max,bottom:n.max,left:s.min}}function transformBoxPoints(s,n){if(!n)return s;const u=n({x:s.left,y:s.top}),f=n({x:s.right,y:s.bottom});return{top:u.y,left:u.x,bottom:f.y,right:f.x}}function isIdentityScale(s){return s===void 0||s===1}function hasScale({scale:s,scaleX:n,scaleY:u}){return!isIdentityScale(s)||!isIdentityScale(n)||!isIdentityScale(u)}function hasTransform(s){return hasScale(s)||has2DTranslate(s)||s.z||s.rotate||s.rotateX||s.rotateY||s.skewX||s.skewY}function has2DTranslate(s){return is2DTranslate(s.x)||is2DTranslate(s.y)}function is2DTranslate(s){return s&&s!=="0%"}function scalePoint(s,n,u){const f=s-u,y=n*f;return u+y}function applyPointDelta(s,n,u,f,y){return y!==void 0&&(s=scalePoint(s,y,f)),scalePoint(s,u,f)+n}function applyAxisDelta(s,n=0,u=1,f,y){s.min=applyPointDelta(s.min,n,u,f,y),s.max=applyPointDelta(s.max,n,u,f,y)}function applyBoxDelta(s,{x:n,y:u}){applyAxisDelta(s.x,n.translate,n.scale,n.originPoint),applyAxisDelta(s.y,u.translate,u.scale,u.originPoint)}const TREE_SCALE_SNAP_MIN=.999999999999,TREE_SCALE_SNAP_MAX=1.0000000000001;function applyTreeDeltas(s,n,u,f=!1){const y=u.length;if(!y)return;n.x=n.y=1;let S,A;for(let w=0;w<y;w++){S=u[w],A=S.projectionDelta;const{visualElement:C}=S.options;C&&C.props.style&&C.props.style.display==="contents"||(f&&S.options.layoutScroll&&S.scroll&&S!==S.root&&transformBox(s,{x:-S.scroll.offset.x,y:-S.scroll.offset.y}),A&&(n.x*=A.x.scale,n.y*=A.y.scale,applyBoxDelta(s,A)),f&&hasTransform(S.latestValues)&&transformBox(s,S.latestValues))}n.x<TREE_SCALE_SNAP_MAX&&n.x>TREE_SCALE_SNAP_MIN&&(n.x=1),n.y<TREE_SCALE_SNAP_MAX&&n.y>TREE_SCALE_SNAP_MIN&&(n.y=1)}function translateAxis(s,n){s.min=s.min+n,s.max=s.max+n}function transformAxis(s,n,u,f,y=.5){const S=mixNumber$1(s.min,s.max,y);applyAxisDelta(s,n,u,S,f)}function transformBox(s,n){transformAxis(s.x,n.x,n.scaleX,n.scale,n.originX),transformAxis(s.y,n.y,n.scaleY,n.scale,n.originY)}function measureViewportBox(s,n){return convertBoundingBoxToBox(transformBoxPoints(s.getBoundingClientRect(),n))}function measurePageBox(s,n,u){const f=measureViewportBox(s,u),{scroll:y}=n;return y&&(translateAxis(f.x,y.offset.x),translateAxis(f.y,y.offset.y)),f}const translateAlias={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},numTransforms=transformPropOrder.length;function buildTransform(s,n,u){let f="",y=!0;for(let S=0;S<numTransforms;S++){const A=transformPropOrder[S],w=s[A];if(w===void 0)continue;let C=!0;if(typeof w=="number")C=w===(A.startsWith("scale")?1:0);else{const T=parseFloat(w);C=A.startsWith("scale")?T===1:T===0}if(!C||u){const T=getValueAsType(w,numberValueTypes[A]);if(!C){y=!1;const R=translateAlias[A]||A;f+=`${R}(${T}) `}u&&(n[A]=T)}}return f=f.trim(),u?f=u(n,y?"":f):y&&(f="none"),f}function buildHTMLStyles(s,n,u){const{style:f,vars:y,transformOrigin:S}=s;let A=!1,w=!1;for(const C in n){const T=n[C];if(transformProps.has(C)){A=!0;continue}else if(isCSSVariableName(C)){y[C]=T;continue}else{const R=getValueAsType(T,numberValueTypes[C]);C.startsWith("origin")?(w=!0,S[C]=R):f[C]=R}}if(n.transform||(A||u?f.transform=buildTransform(n,s.transform,u):f.transform&&(f.transform="none")),w){const{originX:C="50%",originY:T="50%",originZ:R=0}=S;f.transformOrigin=`${C} ${T} ${R}`}}function renderHTML(s,{style:n,vars:u},f,y){const S=s.style;let A;for(A in n)S[A]=n[A];y?.applyProjectionStyles(S,f);for(A in u)S.setProperty(A,u[A])}function pixelsToPercent(s,n){return n.max===n.min?0:s/(n.max-n.min)*100}const correctBorderRadius={correct:(s,n)=>{if(!n.target)return s;if(typeof s=="string")if(px$1.test(s))s=parseFloat(s);else return s;const u=pixelsToPercent(s,n.target.x),f=pixelsToPercent(s,n.target.y);return`${u}% ${f}%`}},correctBoxShadow={correct:(s,{treeScale:n,projectionDelta:u})=>{const f=s,y=complex.parse(s);if(y.length>5)return f;const S=complex.createTransformer(s),A=typeof y[0]!="number"?1:0,w=u.x.scale*n.x,C=u.y.scale*n.y;y[0+A]/=w,y[1+A]/=C;const T=mixNumber$1(w,C,.5);return typeof y[2+A]=="number"&&(y[2+A]/=T),typeof y[3+A]=="number"&&(y[3+A]/=T),S(y)}},scaleCorrectors={borderRadius:{...correctBorderRadius,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:correctBorderRadius,borderTopRightRadius:correctBorderRadius,borderBottomLeftRadius:correctBorderRadius,borderBottomRightRadius:correctBorderRadius,boxShadow:correctBoxShadow};function isForcedMotionValue(s,{layout:n,layoutId:u}){return transformProps.has(s)||s.startsWith("origin")||(n||u!==void 0)&&(!!scaleCorrectors[s]||s==="opacity")}function scrapeMotionValuesFromProps$1(s,n,u){const f=s.style,y=n?.style,S={};if(!f)return S;for(const A in f)(isMotionValue(f[A])||y&&isMotionValue(y[A])||isForcedMotionValue(A,s)||u?.getValue(A)?.liveStyle!==void 0)&&(S[A]=f[A]);return S}function getComputedStyle$1(s){return window.getComputedStyle(s)}class HTMLVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="html",this.renderInstance=renderHTML}readValueFromInstance(n,u){if(transformProps.has(u))return this.projection?.isProjecting?defaultTransformValue(u):readTransformValue(n,u);{const f=getComputedStyle$1(n),y=(isCSSVariableName(u)?f.getPropertyValue(u):f[u])||0;return typeof y=="string"?y.trim():y}}measureInstanceViewportBox(n,{transformPagePoint:u}){return measureViewportBox(n,u)}build(n,u,f){buildHTMLStyles(n,u,f.transformTemplate)}scrapeMotionValuesFromProps(n,u,f){return scrapeMotionValuesFromProps$1(n,u,f)}}const dashKeys={offset:"stroke-dashoffset",array:"stroke-dasharray"},camelKeys={offset:"strokeDashoffset",array:"strokeDasharray"};function buildSVGPath(s,n,u=1,f=0,y=!0){s.pathLength=1;const S=y?dashKeys:camelKeys;s[S.offset]=`${-f}`,s[S.array]=`${n} ${u}`}const cssMotionPathProperties=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function buildSVGAttrs(s,{attrX:n,attrY:u,attrScale:f,pathLength:y,pathSpacing:S=1,pathOffset:A=0,...w},C,T,R){if(buildHTMLStyles(s,w,T),C){s.style.viewBox&&(s.attrs.viewBox=s.style.viewBox);return}s.attrs=s.style,s.style={};const{attrs:I,style:N}=s;I.transform&&(N.transform=I.transform,delete I.transform),(N.transform||I.transformOrigin)&&(N.transformOrigin=I.transformOrigin??"50% 50%",delete I.transformOrigin),N.transform&&(N.transformBox=R?.transformBox??"fill-box",delete I.transformBox);for(const L of cssMotionPathProperties)I[L]!==void 0&&(N[L]=I[L],delete I[L]);n!==void 0&&(I.x=n),u!==void 0&&(I.y=u),f!==void 0&&(I.scale=f),y!==void 0&&buildSVGPath(I,y,S,A,!1)}const camelCaseAttributes=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),isSVGTag=s=>typeof s=="string"&&s.toLowerCase()==="svg";function renderSVG(s,n,u,f){renderHTML(s,n,void 0,f);for(const y in n.attrs)s.setAttribute(camelCaseAttributes.has(y)?y:camelToDash(y),n.attrs[y])}function scrapeMotionValuesFromProps(s,n,u){const f=scrapeMotionValuesFromProps$1(s,n,u);for(const y in s)if(isMotionValue(s[y])||isMotionValue(n[y])){const S=transformPropOrder.indexOf(y)!==-1?"attr"+y.charAt(0).toUpperCase()+y.substring(1):y;f[S]=s[y]}return f}class SVGVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=createBox}getBaseTargetFromProps(n,u){return n[u]}readValueFromInstance(n,u){if(transformProps.has(u)){const f=getDefaultValueType(u);return f&&f.default||0}return u=camelCaseAttributes.has(u)?u:camelToDash(u),n.getAttribute(u)}scrapeMotionValuesFromProps(n,u,f){return scrapeMotionValuesFromProps(n,u,f)}build(n,u,f){buildSVGAttrs(n,u,this.isSVGTag,f.transformTemplate,f.style)}renderInstance(n,u,f,y){renderSVG(n,u,f,y)}mount(n){this.isSVGTag=isSVGTag(n.tagName),super.mount(n)}}const numVariantProps=variantProps.length;function getVariantContext(s){if(!s)return;if(!s.isControllingVariants){const u=s.parent?getVariantContext(s.parent)||{}:{};return s.props.initial!==void 0&&(u.initial=s.props.initial),u}const n={};for(let u=0;u<numVariantProps;u++){const f=variantProps[u],y=s.props[f];(isVariantLabel(y)||y===!1)&&(n[f]=y)}return n}function shallowCompare(s,n){if(!Array.isArray(n))return!1;const u=n.length;if(u!==s.length)return!1;for(let f=0;f<u;f++)if(n[f]!==s[f])return!1;return!0}const reversePriorityOrder=[...variantPriorityOrder].reverse(),numAnimationTypes=variantPriorityOrder.length;function createAnimateFunction(s){return n=>Promise.all(n.map(({animation:u,options:f})=>animateVisualElement(s,u,f)))}function createAnimationState(s){let n=createAnimateFunction(s),u=createState(),f=!0;const y=C=>(T,R)=>{const I=resolveVariant(s,R,C==="exit"?s.presenceContext?.custom:void 0);if(I){const{transition:N,transitionEnd:L,...F}=I;T={...T,...F,...L}}return T};function S(C){n=C(s)}function A(C){const{props:T}=s,R=getVariantContext(s.parent)||{},I=[],N=new Set;let L={},F=1/0;for(let z=0;z<numAnimationTypes;z++){const U=reversePriorityOrder[z],G=u[U],Y=T[U]!==void 0?T[U]:R[U],K=isVariantLabel(Y),Z=U===C?G.isActive:null;Z===!1&&(F=z);let J=Y===R[U]&&Y!==T[U]&&K;if(J&&f&&s.manuallyAnimateOnMount&&(J=!1),G.protectedKeys={...L},!G.isActive&&Z===null||!Y&&!G.prevProp||isAnimationControls(Y)||typeof Y=="boolean")continue;const te=checkVariantsDidChange(G.prevProp,Y);let de=te||U===C&&G.isActive&&!J&&K||z>F&&K,se=!1;const ne=Array.isArray(Y)?Y:[Y];let ge=ne.reduce(y(U),{});Z===!1&&(ge={});const{prevResolvedValues:Ee={}}=G,we={...Ee,...ge},Ie=Me=>{de=!0,N.has(Me)&&(se=!0,N.delete(Me)),G.needsAnimating[Me]=!0;const Re=s.getValue(Me);Re&&(Re.liveStyle=!1)};for(const Me in we){const Re=ge[Me],Te=Ee[Me];if(L.hasOwnProperty(Me))continue;let Se=!1;isKeyframesTarget(Re)&&isKeyframesTarget(Te)?Se=!shallowCompare(Re,Te):Se=Re!==Te,Se?Re!=null?Ie(Me):N.add(Me):Re!==void 0&&N.has(Me)?Ie(Me):G.protectedKeys[Me]=!0}G.prevProp=Y,G.prevResolvedValues=ge,G.isActive&&(L={...L,...ge}),f&&s.blockInitialAnimation&&(de=!1);const Be=J&&te;de&&(!Be||se)&&I.push(...ne.map(Me=>{const Re={type:U};if(typeof Me=="string"&&f&&!Be&&s.manuallyAnimateOnMount&&s.parent){const{parent:Te}=s,Se=resolveVariant(Te,Me);if(Te.enteringChildren&&Se){const{delayChildren:oe}=Se.transition||{};Re.delay=calcChildStagger(Te.enteringChildren,s,oe)}}return{animation:Me,options:Re}}))}if(N.size){const z={};if(typeof T.initial!="boolean"){const U=resolveVariant(s,Array.isArray(T.initial)?T.initial[0]:T.initial);U&&U.transition&&(z.transition=U.transition)}N.forEach(U=>{const G=s.getBaseTarget(U),Y=s.getValue(U);Y&&(Y.liveStyle=!0),z[U]=G??null}),I.push({animation:z})}let H=!!I.length;return f&&(T.initial===!1||T.initial===T.animate)&&!s.manuallyAnimateOnMount&&(H=!1),f=!1,H?n(I):Promise.resolve()}function w(C,T){if(u[C].isActive===T)return Promise.resolve();s.variantChildren?.forEach(I=>I.animationState?.setActive(C,T)),u[C].isActive=T;const R=A(C);for(const I in u)u[I].protectedKeys={};return R}return{animateChanges:A,setActive:w,setAnimateFunction:S,getState:()=>u,reset:()=>{u=createState()}}}function checkVariantsDidChange(s,n){return typeof n=="string"?n!==s:Array.isArray(n)?!shallowCompare(n,s):!1}function createTypeState(s=!1){return{isActive:s,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function createState(){return{animate:createTypeState(!0),whileInView:createTypeState(),whileHover:createTypeState(),whileTap:createTypeState(),whileDrag:createTypeState(),whileFocus:createTypeState(),exit:createTypeState()}}function copyAxisInto(s,n){s.min=n.min,s.max=n.max}function copyBoxInto(s,n){copyAxisInto(s.x,n.x),copyAxisInto(s.y,n.y)}function copyAxisDeltaInto(s,n){s.translate=n.translate,s.scale=n.scale,s.originPoint=n.originPoint,s.origin=n.origin}const SCALE_PRECISION=1e-4,SCALE_MIN=1-SCALE_PRECISION,SCALE_MAX=1+SCALE_PRECISION,TRANSLATE_PRECISION=.01,TRANSLATE_MIN=0-TRANSLATE_PRECISION,TRANSLATE_MAX=0+TRANSLATE_PRECISION;function calcLength(s){return s.max-s.min}function isNear(s,n,u){return Math.abs(s-n)<=u}function calcAxisDelta(s,n,u,f=.5){s.origin=f,s.originPoint=mixNumber$1(n.min,n.max,s.origin),s.scale=calcLength(u)/calcLength(n),s.translate=mixNumber$1(u.min,u.max,s.origin)-s.originPoint,(s.scale>=SCALE_MIN&&s.scale<=SCALE_MAX||isNaN(s.scale))&&(s.scale=1),(s.translate>=TRANSLATE_MIN&&s.translate<=TRANSLATE_MAX||isNaN(s.translate))&&(s.translate=0)}function calcBoxDelta(s,n,u,f){calcAxisDelta(s.x,n.x,u.x,f?f.originX:void 0),calcAxisDelta(s.y,n.y,u.y,f?f.originY:void 0)}function calcRelativeAxis(s,n,u){s.min=u.min+n.min,s.max=s.min+calcLength(n)}function calcRelativeBox(s,n,u){calcRelativeAxis(s.x,n.x,u.x),calcRelativeAxis(s.y,n.y,u.y)}function calcRelativeAxisPosition(s,n,u){s.min=n.min-u.min,s.max=s.min+calcLength(n)}function calcRelativePosition(s,n,u){calcRelativeAxisPosition(s.x,n.x,u.x),calcRelativeAxisPosition(s.y,n.y,u.y)}function removePointDelta(s,n,u,f,y){return s-=n,s=scalePoint(s,1/u,f),y!==void 0&&(s=scalePoint(s,1/y,f)),s}function removeAxisDelta(s,n=0,u=1,f=.5,y,S=s,A=s){if(percent.test(n)&&(n=parseFloat(n),n=mixNumber$1(A.min,A.max,n/100)-A.min),typeof n!="number")return;let w=mixNumber$1(S.min,S.max,f);s===S&&(w-=n),s.min=removePointDelta(s.min,n,u,w,y),s.max=removePointDelta(s.max,n,u,w,y)}function removeAxisTransforms(s,n,[u,f,y],S,A){removeAxisDelta(s,n[u],n[f],n[y],n.scale,S,A)}const xKeys=["x","scaleX","originX"],yKeys=["y","scaleY","originY"];function removeBoxTransforms(s,n,u,f){removeAxisTransforms(s.x,n,xKeys,u?u.x:void 0,f?f.x:void 0),removeAxisTransforms(s.y,n,yKeys,u?u.y:void 0,f?f.y:void 0)}function isAxisDeltaZero(s){return s.translate===0&&s.scale===1}function isDeltaZero(s){return isAxisDeltaZero(s.x)&&isAxisDeltaZero(s.y)}function axisEquals(s,n){return s.min===n.min&&s.max===n.max}function boxEquals(s,n){return axisEquals(s.x,n.x)&&axisEquals(s.y,n.y)}function axisEqualsRounded(s,n){return Math.round(s.min)===Math.round(n.min)&&Math.round(s.max)===Math.round(n.max)}function boxEqualsRounded(s,n){return axisEqualsRounded(s.x,n.x)&&axisEqualsRounded(s.y,n.y)}function aspectRatio(s){return calcLength(s.x)/calcLength(s.y)}function axisDeltaEquals(s,n){return s.translate===n.translate&&s.scale===n.scale&&s.originPoint===n.originPoint}function eachAxis(s){return[s("x"),s("y")]}function buildProjectionTransform(s,n,u){let f="";const y=s.x.translate/n.x,S=s.y.translate/n.y,A=u?.z||0;if((y||S||A)&&(f=`translate3d(${y}px, ${S}px, ${A}px) `),(n.x!==1||n.y!==1)&&(f+=`scale(${1/n.x}, ${1/n.y}) `),u){const{transformPerspective:T,rotate:R,rotateX:I,rotateY:N,skewX:L,skewY:F}=u;T&&(f=`perspective(${T}px) ${f}`),R&&(f+=`rotate(${R}deg) `),I&&(f+=`rotateX(${I}deg) `),N&&(f+=`rotateY(${N}deg) `),L&&(f+=`skewX(${L}deg) `),F&&(f+=`skewY(${F}deg) `)}const w=s.x.scale*n.x,C=s.y.scale*n.y;return(w!==1||C!==1)&&(f+=`scale(${w}, ${C})`),f||"none"}const borders=["TopLeft","TopRight","BottomLeft","BottomRight"],numBorders=borders.length,asNumber=s=>typeof s=="string"?parseFloat(s):s,isPx=s=>typeof s=="number"||px$1.test(s);function mixValues(s,n,u,f,y,S){y?(s.opacity=mixNumber$1(0,u.opacity??1,easeCrossfadeIn(f)),s.opacityExit=mixNumber$1(n.opacity??1,0,easeCrossfadeOut(f))):S&&(s.opacity=mixNumber$1(n.opacity??1,u.opacity??1,f));for(let A=0;A<numBorders;A++){const w=`border${borders[A]}Radius`;let C=getRadius(n,w),T=getRadius(u,w);C===void 0&&T===void 0||(C||(C=0),T||(T=0),C===0||T===0||isPx(C)===isPx(T)?(s[w]=Math.max(mixNumber$1(asNumber(C),asNumber(T),f),0),(percent.test(T)||percent.test(C))&&(s[w]+="%")):s[w]=T)}(n.rotate||u.rotate)&&(s.rotate=mixNumber$1(n.rotate||0,u.rotate||0,f))}function getRadius(s,n){return s[n]!==void 0?s[n]:s.borderRadius}const easeCrossfadeIn=compress(0,.5,circOut),easeCrossfadeOut=compress(.5,.95,noop$1);function compress(s,n,u){return f=>f<s?0:f>n?1:u(progress(s,n,f))}function animateSingleValue(s,n,u){const f=isMotionValue(s)?s:motionValue(s);return f.start(animateMotionValue("",f,n,u)),f.animation}function addDomEvent(s,n,u,f={passive:!0}){return s.addEventListener(n,u,f),()=>s.removeEventListener(n,u)}const compareByDepth=(s,n)=>s.depth-n.depth;class FlatTree{constructor(){this.children=[],this.isDirty=!1}add(n){addUniqueItem(this.children,n),this.isDirty=!0}remove(n){removeItem(this.children,n),this.isDirty=!0}forEach(n){this.isDirty&&this.children.sort(compareByDepth),this.isDirty=!1,this.children.forEach(n)}}function delay(s,n){const u=time$2.now(),f=({timestamp:y})=>{const S=y-u;S>=n&&(cancelFrame(f),s(S-n))};return frame$1.setup(f,!0),()=>cancelFrame(f)}function resolveMotionValue(s){return isMotionValue(s)?s.get():s}class NodeStack{constructor(){this.members=[]}add(n){addUniqueItem(this.members,n),n.scheduleRender()}remove(n){if(removeItem(this.members,n),n===this.prevLead&&(this.prevLead=void 0),n===this.lead){const u=this.members[this.members.length-1];u&&this.promote(u)}}relegate(n){const u=this.members.findIndex(y=>n===y);if(u===0)return!1;let f;for(let y=u;y>=0;y--){const S=this.members[y];if(S.isPresent!==!1){f=S;break}}return f?(this.promote(f),!0):!1}promote(n,u){const f=this.lead;if(n!==f&&(this.prevLead=f,this.lead=n,n.show(),f)){f.instance&&f.scheduleRender(),n.scheduleRender();const y=f.options.layoutDependency,S=n.options.layoutDependency;y!==void 0&&S!==void 0&&y===S||(n.resumeFrom=f,u&&(n.resumeFrom.preserveOpacity=!0),f.snapshot&&(n.snapshot=f.snapshot,n.snapshot.latestValues=f.animationValues||f.latestValues),n.root&&n.root.isUpdating&&(n.isLayoutDirty=!0));const{crossfade:A}=n.options;A===!1&&f.hide()}}exitAnimationComplete(){this.members.forEach(n=>{const{options:u,resumingFrom:f}=n;u.onExitComplete&&u.onExitComplete(),f&&f.options.onExitComplete&&f.options.onExitComplete()})}scheduleRender(){this.members.forEach(n=>{n.instance&&n.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const globalProjectionState={hasAnimatedSinceResize:!0,hasEverUpdated:!1},transformAxes=["","X","Y","Z"],animationTarget=1e3;let id$3=0;function resetDistortingTransform(s,n,u,f){const{latestValues:y}=n;y[s]&&(u[s]=y[s],n.setStaticValue(s,0),f&&(f[s]=0))}function cancelTreeOptimisedTransformAnimations(s){if(s.hasCheckedOptimisedAppear=!0,s.root===s)return;const{visualElement:n}=s.options;if(!n)return;const u=getOptimisedAppearId(n);if(window.MotionHasOptimisedAnimation(u,"transform")){const{layout:y,layoutId:S}=s.options;window.MotionCancelOptimisedAnimation(u,"transform",frame$1,!(y||S))}const{parent:f}=s;f&&!f.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(f)}function createProjectionNode$1({attachResizeListener:s,defaultParent:n,measureScroll:u,checkIsScrollRoot:f,resetTransform:y}){return class{constructor(S={},A=n?.()){this.id=id$3++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(propagateDirtyNodes),this.nodes.forEach(resolveTargetDelta),this.nodes.forEach(calcProjection),this.nodes.forEach(cleanDirtyNodes)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=S,this.root=A?A.root||A:this,this.path=A?[...A.path,A]:[],this.parent=A,this.depth=A?A.depth+1:0;for(let w=0;w<this.path.length;w++)this.path[w].shouldResetTransform=!0;this.root===this&&(this.nodes=new FlatTree)}addEventListener(S,A){return this.eventHandlers.has(S)||this.eventHandlers.set(S,new SubscriptionManager),this.eventHandlers.get(S).add(A)}notifyListeners(S,...A){const w=this.eventHandlers.get(S);w&&w.notify(...A)}hasListeners(S){return this.eventHandlers.has(S)}mount(S){if(this.instance)return;this.isSVG=isSVGElement(S)&&!isSVGSVGElement(S),this.instance=S;const{layoutId:A,layout:w,visualElement:C}=this.options;if(C&&!C.current&&C.mount(S),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(w||A)&&(this.isLayoutDirty=!0),s){let T,R=0;const I=()=>this.root.updateBlockedByResize=!1;frame$1.read(()=>{R=window.innerWidth}),s(S,()=>{const N=window.innerWidth;N!==R&&(R=N,this.root.updateBlockedByResize=!0,T&&T(),T=delay(I,250),globalProjectionState.hasAnimatedSinceResize&&(globalProjectionState.hasAnimatedSinceResize=!1,this.nodes.forEach(finishAnimation)))})}A&&this.root.registerSharedNode(A,this),this.options.animate!==!1&&C&&(A||w)&&this.addEventListener("didUpdate",({delta:T,hasLayoutChanged:R,hasRelativeLayoutChanged:I,layout:N})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const L=this.options.transition||C.getDefaultTransition()||defaultLayoutTransition,{onLayoutAnimationStart:F,onLayoutAnimationComplete:H}=C.getProps(),z=!this.targetLayout||!boxEqualsRounded(this.targetLayout,N),U=!R&&I;if(this.options.layoutRoot||this.resumeFrom||U||R&&(z||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const G={...getValueTransition(L,"layout"),onPlay:F,onComplete:H};(C.shouldReduceMotion||this.options.layoutRoot)&&(G.delay=0,G.type=!1),this.startAnimation(G),this.setAnimationOrigin(T,U)}else R||finishAnimation(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=N})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const S=this.getStack();S&&S.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),cancelFrame(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(resetSkewAndRotation),this.animationId++)}getTransformTemplate(){const{visualElement:S}=this.options;return S&&S.getProps().transformTemplate}willUpdate(S=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let T=0;T<this.path.length;T++){const R=this.path[T];R.shouldResetTransform=!0,R.updateScroll("snapshot"),R.options.layoutRoot&&R.willUpdate(!1)}const{layoutId:A,layout:w}=this.options;if(A===void 0&&!w)return;const C=this.getTransformTemplate();this.prevTransformTemplateValue=C?C(this.latestValues,""):void 0,this.updateSnapshot(),S&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(clearMeasurements);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(clearIsLayoutDirty);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(resetTransformStyle),this.nodes.forEach(updateLayout),this.nodes.forEach(notifyLayoutUpdate)):this.nodes.forEach(clearIsLayoutDirty),this.clearAllSnapshots();const S=time$2.now();frameData.delta=clamp$1(0,1e3/60,S-frameData.timestamp),frameData.timestamp=S,frameData.isProcessing=!0,frameSteps.update.process(frameData),frameSteps.preRender.process(frameData),frameSteps.render.process(frameData),frameData.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,microtask.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(clearSnapshot),this.sharedNodes.forEach(removeLeadSnapshots)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,frame$1.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){frame$1.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!calcLength(this.snapshot.measuredBox.x)&&!calcLength(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let w=0;w<this.path.length;w++)this.path[w].updateScroll();const S=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=createBox(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:A}=this.options;A&&A.notify("LayoutMeasure",this.layout.layoutBox,S?S.layoutBox:void 0)}updateScroll(S="measure"){let A=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===S&&(A=!1),A&&this.instance){const w=f(this.instance);this.scroll={animationId:this.root.animationId,phase:S,isRoot:w,offset:u(this.instance),wasRoot:this.scroll?this.scroll.isRoot:w}}}resetTransform(){if(!y)return;const S=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,A=this.projectionDelta&&!isDeltaZero(this.projectionDelta),w=this.getTransformTemplate(),C=w?w(this.latestValues,""):void 0,T=C!==this.prevTransformTemplateValue;S&&this.instance&&(A||hasTransform(this.latestValues)||T)&&(y(this.instance,C),this.shouldResetTransform=!1,this.scheduleRender())}measure(S=!0){const A=this.measurePageBox();let w=this.removeElementScroll(A);return S&&(w=this.removeTransform(w)),roundBox(w),{animationId:this.root.animationId,measuredBox:A,layoutBox:w,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:S}=this.options;if(!S)return createBox();const A=S.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(checkNodeWasScrollRoot))){const{scroll:w}=this.root;w&&(translateAxis(A.x,w.offset.x),translateAxis(A.y,w.offset.y))}return A}removeElementScroll(S){const A=createBox();if(copyBoxInto(A,S),this.scroll?.wasRoot)return A;for(let w=0;w<this.path.length;w++){const C=this.path[w],{scroll:T,options:R}=C;C!==this.root&&T&&R.layoutScroll&&(T.wasRoot&&copyBoxInto(A,S),translateAxis(A.x,T.offset.x),translateAxis(A.y,T.offset.y))}return A}applyTransform(S,A=!1){const w=createBox();copyBoxInto(w,S);for(let C=0;C<this.path.length;C++){const T=this.path[C];!A&&T.options.layoutScroll&&T.scroll&&T!==T.root&&transformBox(w,{x:-T.scroll.offset.x,y:-T.scroll.offset.y}),hasTransform(T.latestValues)&&transformBox(w,T.latestValues)}return hasTransform(this.latestValues)&&transformBox(w,this.latestValues),w}removeTransform(S){const A=createBox();copyBoxInto(A,S);for(let w=0;w<this.path.length;w++){const C=this.path[w];if(!C.instance||!hasTransform(C.latestValues))continue;hasScale(C.latestValues)&&C.updateSnapshot();const T=createBox(),R=C.measurePageBox();copyBoxInto(T,R),removeBoxTransforms(A,C.latestValues,C.snapshot?C.snapshot.layoutBox:void 0,T)}return hasTransform(this.latestValues)&&removeBoxTransforms(A,this.latestValues),A}setTargetDelta(S){this.targetDelta=S,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(S){this.options={...this.options,...S,crossfade:S.crossfade!==void 0?S.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==frameData.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(S=!1){const A=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=A.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=A.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=A.isSharedProjectionDirty);const w=!!this.resumingFrom||this!==A;if(!(S||w&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:C,layoutId:T}=this.options;if(!this.layout||!(C||T))return;this.resolvedRelativeTargetAt=frameData.timestamp;const R=this.getClosestProjectingParent();R&&this.linkedParentVersion!==R.layoutVersion&&!R.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(R&&R.layout?this.createRelativeTarget(R,this.layout.layoutBox,R.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=createBox(),this.targetWithTransforms=createBox()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),calcRelativeBox(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):copyBoxInto(this.target,this.layout.layoutBox),applyBoxDelta(this.target,this.targetDelta)):copyBoxInto(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,R&&!!R.resumingFrom==!!this.resumingFrom&&!R.options.layoutScroll&&R.target&&this.animationProgress!==1?this.createRelativeTarget(R,this.target,R.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||hasScale(this.parent.latestValues)||has2DTranslate(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(S,A,w){this.relativeParent=S,this.linkedParentVersion=S.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,A,w),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const S=this.getLead(),A=!!this.resumingFrom||this!==S;let w=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(w=!1),A&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(w=!1),this.resolvedRelativeTargetAt===frameData.timestamp&&(w=!1),w)return;const{layout:C,layoutId:T}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(C||T))return;copyBoxInto(this.layoutCorrected,this.layout.layoutBox);const R=this.treeScale.x,I=this.treeScale.y;applyTreeDeltas(this.layoutCorrected,this.treeScale,this.path,A),S.layout&&!S.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(S.target=S.layout.layoutBox,S.targetWithTransforms=createBox());const{target:N}=S;if(!N){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(copyAxisDeltaInto(this.prevProjectionDelta.x,this.projectionDelta.x),copyAxisDeltaInto(this.prevProjectionDelta.y,this.projectionDelta.y)),calcBoxDelta(this.projectionDelta,this.layoutCorrected,N,this.latestValues),(this.treeScale.x!==R||this.treeScale.y!==I||!axisDeltaEquals(this.projectionDelta.x,this.prevProjectionDelta.x)||!axisDeltaEquals(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",N))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(S=!0){if(this.options.visualElement?.scheduleRender(),S){const A=this.getStack();A&&A.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=createDelta(),this.projectionDelta=createDelta(),this.projectionDeltaWithTransform=createDelta()}setAnimationOrigin(S,A=!1){const w=this.snapshot,C=w?w.latestValues:{},T={...this.latestValues},R=createDelta();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!A;const I=createBox(),N=w?w.source:void 0,L=this.layout?this.layout.source:void 0,F=N!==L,H=this.getStack(),z=!H||H.members.length<=1,U=!!(F&&!z&&this.options.crossfade===!0&&!this.path.some(hasOpacityCrossfade));this.animationProgress=0;let G;this.mixTargetDelta=Y=>{const K=Y/1e3;mixAxisDelta(R.x,S.x,K),mixAxisDelta(R.y,S.y,K),this.setTargetDelta(R),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(calcRelativePosition(I,this.layout.layoutBox,this.relativeParent.layout.layoutBox),mixBox(this.relativeTarget,this.relativeTargetOrigin,I,K),G&&boxEquals(this.relativeTarget,G)&&(this.isProjectionDirty=!1),G||(G=createBox()),copyBoxInto(G,this.relativeTarget)),F&&(this.animationValues=T,mixValues(T,C,this.latestValues,K,U,z)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=K},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(S){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(cancelFrame(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=frame$1.update(()=>{globalProjectionState.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=motionValue(0)),this.currentAnimation=animateSingleValue(this.motionValue,[0,1e3],{...S,velocity:0,isSync:!0,onUpdate:A=>{this.mixTargetDelta(A),S.onUpdate&&S.onUpdate(A)},onStop:()=>{},onComplete:()=>{S.onComplete&&S.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const S=this.getStack();S&&S.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(animationTarget),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const S=this.getLead();let{targetWithTransforms:A,target:w,layout:C,latestValues:T}=S;if(!(!A||!w||!C)){if(this!==S&&this.layout&&C&&shouldAnimatePositionOnly(this.options.animationType,this.layout.layoutBox,C.layoutBox)){w=this.target||createBox();const R=calcLength(this.layout.layoutBox.x);w.x.min=S.target.x.min,w.x.max=w.x.min+R;const I=calcLength(this.layout.layoutBox.y);w.y.min=S.target.y.min,w.y.max=w.y.min+I}copyBoxInto(A,w),transformBox(A,T),calcBoxDelta(this.projectionDeltaWithTransform,this.layoutCorrected,A,T)}}registerSharedNode(S,A){this.sharedNodes.has(S)||this.sharedNodes.set(S,new NodeStack),this.sharedNodes.get(S).add(A);const w=A.options.initialPromotionConfig;A.promote({transition:w?w.transition:void 0,preserveFollowOpacity:w&&w.shouldPreserveFollowOpacity?w.shouldPreserveFollowOpacity(A):void 0})}isLead(){const S=this.getStack();return S?S.lead===this:!0}getLead(){const{layoutId:S}=this.options;return S?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:S}=this.options;return S?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:S}=this.options;if(S)return this.root.sharedNodes.get(S)}promote({needsReset:S,transition:A,preserveFollowOpacity:w}={}){const C=this.getStack();C&&C.promote(this,w),S&&(this.projectionDelta=void 0,this.needsReset=!0),A&&this.setOptions({transition:A})}relegate(){const S=this.getStack();return S?S.relegate(this):!1}resetSkewAndRotation(){const{visualElement:S}=this.options;if(!S)return;let A=!1;const{latestValues:w}=S;if((w.z||w.rotate||w.rotateX||w.rotateY||w.rotateZ||w.skewX||w.skewY)&&(A=!0),!A)return;const C={};w.z&&resetDistortingTransform("z",S,C,this.animationValues);for(let T=0;T<transformAxes.length;T++)resetDistortingTransform(`rotate${transformAxes[T]}`,S,C,this.animationValues),resetDistortingTransform(`skew${transformAxes[T]}`,S,C,this.animationValues);S.render();for(const T in C)S.setStaticValue(T,C[T]),this.animationValues&&(this.animationValues[T]=C[T]);S.scheduleRender()}applyProjectionStyles(S,A){if(!this.instance||this.isSVG)return;if(!this.isVisible){S.visibility="hidden";return}const w=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,S.visibility="",S.opacity="",S.pointerEvents=resolveMotionValue(A?.pointerEvents)||"",S.transform=w?w(this.latestValues,""):"none";return}const C=this.getLead();if(!this.projectionDelta||!this.layout||!C.target){this.options.layoutId&&(S.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,S.pointerEvents=resolveMotionValue(A?.pointerEvents)||""),this.hasProjected&&!hasTransform(this.latestValues)&&(S.transform=w?w({},""):"none",this.hasProjected=!1);return}S.visibility="";const T=C.animationValues||C.latestValues;this.applyTransformsToTarget();let R=buildProjectionTransform(this.projectionDeltaWithTransform,this.treeScale,T);w&&(R=w(T,R)),S.transform=R;const{x:I,y:N}=this.projectionDelta;S.transformOrigin=`${I.origin*100}% ${N.origin*100}% 0`,C.animationValues?S.opacity=C===this?T.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:T.opacityExit:S.opacity=C===this?T.opacity!==void 0?T.opacity:"":T.opacityExit!==void 0?T.opacityExit:0;for(const L in scaleCorrectors){if(T[L]===void 0)continue;const{correct:F,applyTo:H,isCSSVariable:z}=scaleCorrectors[L],U=R==="none"?T[L]:F(T[L],C);if(H){const G=H.length;for(let Y=0;Y<G;Y++)S[H[Y]]=U}else z?this.options.visualElement.renderState.vars[L]=U:S[L]=U}this.options.layoutId&&(S.pointerEvents=C===this?resolveMotionValue(A?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(S=>S.currentAnimation?.stop()),this.root.nodes.forEach(clearMeasurements),this.root.sharedNodes.clear()}}}function updateLayout(s){s.updateLayout()}function notifyLayoutUpdate(s){const n=s.resumeFrom?.snapshot||s.snapshot;if(s.isLead()&&s.layout&&n&&s.hasListeners("didUpdate")){const{layoutBox:u,measuredBox:f}=s.layout,{animationType:y}=s.options,S=n.source!==s.layout.source;y==="size"?eachAxis(R=>{const I=S?n.measuredBox[R]:n.layoutBox[R],N=calcLength(I);I.min=u[R].min,I.max=I.min+N}):shouldAnimatePositionOnly(y,n.layoutBox,u)&&eachAxis(R=>{const I=S?n.measuredBox[R]:n.layoutBox[R],N=calcLength(u[R]);I.max=I.min+N,s.relativeTarget&&!s.currentAnimation&&(s.isProjectionDirty=!0,s.relativeTarget[R].max=s.relativeTarget[R].min+N)});const A=createDelta();calcBoxDelta(A,u,n.layoutBox);const w=createDelta();S?calcBoxDelta(w,s.applyTransform(f,!0),n.measuredBox):calcBoxDelta(w,u,n.layoutBox);const C=!isDeltaZero(A);let T=!1;if(!s.resumeFrom){const R=s.getClosestProjectingParent();if(R&&!R.resumeFrom){const{snapshot:I,layout:N}=R;if(I&&N){const L=createBox();calcRelativePosition(L,n.layoutBox,I.layoutBox);const F=createBox();calcRelativePosition(F,u,N.layoutBox),boxEqualsRounded(L,F)||(T=!0),R.options.layoutRoot&&(s.relativeTarget=F,s.relativeTargetOrigin=L,s.relativeParent=R)}}}s.notifyListeners("didUpdate",{layout:u,snapshot:n,delta:w,layoutDelta:A,hasLayoutChanged:C,hasRelativeLayoutChanged:T})}else if(s.isLead()){const{onExitComplete:u}=s.options;u&&u()}s.options.transition=void 0}function propagateDirtyNodes(s){s.parent&&(s.isProjecting()||(s.isProjectionDirty=s.parent.isProjectionDirty),s.isSharedProjectionDirty||(s.isSharedProjectionDirty=!!(s.isProjectionDirty||s.parent.isProjectionDirty||s.parent.isSharedProjectionDirty)),s.isTransformDirty||(s.isTransformDirty=s.parent.isTransformDirty))}function cleanDirtyNodes(s){s.isProjectionDirty=s.isSharedProjectionDirty=s.isTransformDirty=!1}function clearSnapshot(s){s.clearSnapshot()}function clearMeasurements(s){s.clearMeasurements()}function clearIsLayoutDirty(s){s.isLayoutDirty=!1}function resetTransformStyle(s){const{visualElement:n}=s.options;n&&n.getProps().onBeforeLayoutMeasure&&n.notify("BeforeLayoutMeasure"),s.resetTransform()}function finishAnimation(s){s.finishAnimation(),s.targetDelta=s.relativeTarget=s.target=void 0,s.isProjectionDirty=!0}function resolveTargetDelta(s){s.resolveTargetDelta()}function calcProjection(s){s.calcProjection()}function resetSkewAndRotation(s){s.resetSkewAndRotation()}function removeLeadSnapshots(s){s.removeLeadSnapshot()}function mixAxisDelta(s,n,u){s.translate=mixNumber$1(n.translate,0,u),s.scale=mixNumber$1(n.scale,1,u),s.origin=n.origin,s.originPoint=n.originPoint}function mixAxis(s,n,u,f){s.min=mixNumber$1(n.min,u.min,f),s.max=mixNumber$1(n.max,u.max,f)}function mixBox(s,n,u,f){mixAxis(s.x,n.x,u.x,f),mixAxis(s.y,n.y,u.y,f)}function hasOpacityCrossfade(s){return s.animationValues&&s.animationValues.opacityExit!==void 0}const defaultLayoutTransition={duration:.45,ease:[.4,0,.1,1]},userAgentContains=s=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(s),roundPoint=userAgentContains("applewebkit/")&&!userAgentContains("chrome/")?Math.round:noop$1;function roundAxis(s){s.min=roundPoint(s.min),s.max=roundPoint(s.max)}function roundBox(s){roundAxis(s.x),roundAxis(s.y)}function shouldAnimatePositionOnly(s,n,u){return s==="position"||s==="preserve-aspect"&&!isNear(aspectRatio(n),aspectRatio(u),.2)}function checkNodeWasScrollRoot(s){return s!==s.root&&s.scroll?.wasRoot}const DocumentProjectionNode=createProjectionNode$1({attachResizeListener:(s,n)=>addDomEvent(s,"resize",n),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body?.scrollLeft||0,y:document.documentElement.scrollTop||document.body?.scrollTop||0}),checkIsScrollRoot:()=>!0}),rootProjectionNode={current:void 0},HTMLProjectionNode=createProjectionNode$1({measureScroll:s=>({x:s.scrollLeft,y:s.scrollTop}),defaultParent:()=>{if(!rootProjectionNode.current){const s=new DocumentProjectionNode({});s.mount(window),s.setOptions({layoutScroll:!0}),rootProjectionNode.current=s}return rootProjectionNode.current},resetTransform:(s,n)=>{s.style.transform=n!==void 0?n:"none"},checkIsScrollRoot:s=>window.getComputedStyle(s).position==="fixed"}),MotionConfigContext=reactExports.createContext({transformPagePoint:s=>s,isStatic:!1,reducedMotion:"never"});function setRef(s,n){if(typeof s=="function")return s(n);s!=null&&(s.current=n)}function composeRefs(...s){return n=>{let u=!1;const f=s.map(y=>{const S=setRef(y,n);return!u&&typeof S=="function"&&(u=!0),S});if(u)return()=>{for(let y=0;y<f.length;y++){const S=f[y];typeof S=="function"?S():setRef(s[y],null)}}}}function useComposedRefs(...s){return reactExports.useCallback(composeRefs(...s),s)}class PopChildMeasure extends reactExports.Component{getSnapshotBeforeUpdate(n){const u=this.props.childRef.current;if(u&&n.isPresent&&!this.props.isPresent){const f=u.offsetParent,y=isHTMLElement(f)&&f.offsetWidth||0,S=isHTMLElement(f)&&f.offsetHeight||0,A=this.props.sizeRef.current;A.height=u.offsetHeight||0,A.width=u.offsetWidth||0,A.top=u.offsetTop,A.left=u.offsetLeft,A.right=y-A.width-A.left,A.bottom=S-A.height-A.top}return null}componentDidUpdate(){}render(){return this.props.children}}function PopChild({children:s,isPresent:n,anchorX:u,anchorY:f,root:y}){const S=reactExports.useId(),A=reactExports.useRef(null),w=reactExports.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:C}=reactExports.useContext(MotionConfigContext),T=s.props?.ref??s?.ref,R=useComposedRefs(A,T);return reactExports.useInsertionEffect(()=>{const{width:I,height:N,top:L,left:F,right:H,bottom:z}=w.current;if(n||!A.current||!I||!N)return;const U=u==="left"?`left: ${F}`:`right: ${H}`,G=f==="bottom"?`bottom: ${z}`:`top: ${L}`;A.current.dataset.motionPopId=S;const Y=document.createElement("style");C&&(Y.nonce=C);const K=y??document.head;return K.appendChild(Y),Y.sheet&&Y.sheet.insertRule(`
          [data-motion-pop-id="${S}"] {
            position: absolute !important;
            width: ${I}px !important;
            height: ${N}px !important;
            ${U}px !important;
            ${G}px !important;
          }
        `),()=>{K.contains(Y)&&K.removeChild(Y)}},[n]),jsxRuntimeExports.jsx(PopChildMeasure,{isPresent:n,childRef:A,sizeRef:w,children:reactExports.cloneElement(s,{ref:R})})}const PresenceChild=({children:s,initial:n,isPresent:u,onExitComplete:f,custom:y,presenceAffectsLayout:S,mode:A,anchorX:w,anchorY:C,root:T})=>{const R=useConstant(newChildrenMap),I=reactExports.useId();let N=!0,L=reactExports.useMemo(()=>(N=!1,{id:I,initial:n,isPresent:u,custom:y,onExitComplete:F=>{R.set(F,!0);for(const H of R.values())if(!H)return;f&&f()},register:F=>(R.set(F,!1),()=>R.delete(F))}),[u,R,f]);return S&&N&&(L={...L}),reactExports.useMemo(()=>{R.forEach((F,H)=>R.set(H,!1))},[u]),reactExports.useEffect(()=>{!u&&!R.size&&f&&f()},[u]),A==="popLayout"&&(s=jsxRuntimeExports.jsx(PopChild,{isPresent:u,anchorX:w,anchorY:C,root:T,children:s})),jsxRuntimeExports.jsx(PresenceContext.Provider,{value:L,children:s})};function newChildrenMap(){return new Map}function usePresence(s=!0){const n=reactExports.useContext(PresenceContext);if(n===null)return[!0,null];const{isPresent:u,onExitComplete:f,register:y}=n,S=reactExports.useId();reactExports.useEffect(()=>{if(s)return y(S)},[s]);const A=reactExports.useCallback(()=>s&&f&&f(S),[S,f,s]);return!u&&f?[!1,A]:[!0]}const getChildKey=s=>s.key||"";function onlyElements(s){const n=[];return reactExports.Children.forEach(s,u=>{reactExports.isValidElement(u)&&n.push(u)}),n}const AnimatePresence=({children:s,custom:n,initial:u=!0,onExitComplete:f,presenceAffectsLayout:y=!0,mode:S="sync",propagate:A=!1,anchorX:w="left",anchorY:C="top",root:T})=>{const[R,I]=usePresence(A),N=reactExports.useMemo(()=>onlyElements(s),[s]),L=A&&!R?[]:N.map(getChildKey),F=reactExports.useRef(!0),H=reactExports.useRef(N),z=useConstant(()=>new Map),U=reactExports.useRef(new Set),[G,Y]=reactExports.useState(N),[K,Z]=reactExports.useState(N);useIsomorphicLayoutEffect$1(()=>{F.current=!1,H.current=N;for(let de=0;de<K.length;de++){const se=getChildKey(K[de]);L.includes(se)?(z.delete(se),U.current.delete(se)):z.get(se)!==!0&&z.set(se,!1)}},[K,L.length,L.join("-")]);const J=[];if(N!==G){let de=[...N];for(let se=0;se<K.length;se++){const ne=K[se],ge=getChildKey(ne);L.includes(ge)||(de.splice(se,0,ne),J.push(ne))}return S==="wait"&&J.length&&(de=J),Z(onlyElements(de)),Y(N),null}const{forceRender:te}=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:K.map(de=>{const se=getChildKey(de),ne=A&&!R?!1:N===K||L.includes(se),ge=()=>{if(U.current.has(se))return;if(U.current.add(se),z.has(se))z.set(se,!0);else return;let Ee=!0;z.forEach(we=>{we||(Ee=!1)}),Ee&&(te?.(),Z(H.current),A&&I?.(),f&&f())};return jsxRuntimeExports.jsx(PresenceChild,{isPresent:ne,initial:!F.current||u?void 0:!1,custom:n,presenceAffectsLayout:y,mode:S,root:T,onExitComplete:ne?void 0:ge,anchorX:w,anchorY:C,children:de},se)})})},LazyContext=reactExports.createContext({strict:!1}),featureProps={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let isInitialized=!1;function initFeatureDefinitions(){if(isInitialized)return;const s={};for(const n in featureProps)s[n]={isEnabled:u=>featureProps[n].some(f=>!!u[f])};setFeatureDefinitions(s),isInitialized=!0}function getInitializedFeatureDefinitions(){return initFeatureDefinitions(),getFeatureDefinitions()}function loadFeatures(s){const n=getInitializedFeatureDefinitions();for(const u in s)n[u]={...n[u],...s[u]};setFeatureDefinitions(n)}const validMotionProps=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function isValidMotionProp(s){return s.startsWith("while")||s.startsWith("drag")&&s!=="draggable"||s.startsWith("layout")||s.startsWith("onTap")||s.startsWith("onPan")||s.startsWith("onLayout")||validMotionProps.has(s)}let shouldForward=s=>!isValidMotionProp(s);function loadExternalIsValidProp(s){typeof s=="function"&&(shouldForward=n=>n.startsWith("on")?!isValidMotionProp(n):s(n))}try{loadExternalIsValidProp(require("@emotion/is-prop-valid").default)}catch{}function filterProps(s,n,u){const f={};for(const y in s)y==="values"&&typeof s.values=="object"||(shouldForward(y)||u===!0&&isValidMotionProp(y)||!n&&!isValidMotionProp(y)||s.draggable&&y.startsWith("onDrag"))&&(f[y]=s[y]);return f}const MotionContext=reactExports.createContext({});function getCurrentTreeVariants(s,n){if(isControllingVariants(s)){const{initial:u,animate:f}=s;return{initial:u===!1||isVariantLabel(u)?u:void 0,animate:isVariantLabel(f)?f:void 0}}return s.inherit!==!1?n:{}}function useCreateMotionContext(s){const{initial:n,animate:u}=getCurrentTreeVariants(s,reactExports.useContext(MotionContext));return reactExports.useMemo(()=>({initial:n,animate:u}),[variantLabelsAsDependency(n),variantLabelsAsDependency(u)])}function variantLabelsAsDependency(s){return Array.isArray(s)?s.join(" "):s}const createHtmlRenderState=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function copyRawValuesOnly(s,n,u){for(const f in n)!isMotionValue(n[f])&&!isForcedMotionValue(f,u)&&(s[f]=n[f])}function useInitialMotionValues({transformTemplate:s},n){return reactExports.useMemo(()=>{const u=createHtmlRenderState();return buildHTMLStyles(u,n,s),Object.assign({},u.vars,u.style)},[n])}function useStyle(s,n){const u=s.style||{},f={};return copyRawValuesOnly(f,u,s),Object.assign(f,useInitialMotionValues(s,n)),f}function useHTMLProps(s,n){const u={},f=useStyle(s,n);return s.drag&&s.dragListener!==!1&&(u.draggable=!1,f.userSelect=f.WebkitUserSelect=f.WebkitTouchCallout="none",f.touchAction=s.drag===!0?"none":`pan-${s.drag==="x"?"y":"x"}`),s.tabIndex===void 0&&(s.onTap||s.onTapStart||s.whileTap)&&(u.tabIndex=0),u.style=f,u}const createSvgRenderState=()=>({...createHtmlRenderState(),attrs:{}});function useSVGProps(s,n,u,f){const y=reactExports.useMemo(()=>{const S=createSvgRenderState();return buildSVGAttrs(S,n,isSVGTag(f),s.transformTemplate,s.style),{...S.attrs,style:{...S.style}}},[n]);if(s.style){const S={};copyRawValuesOnly(S,s.style,s),y.style={...S,...y.style}}return y}const lowercaseSVGElements=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function isSVGComponent(s){return typeof s!="string"||s.includes("-")?!1:!!(lowercaseSVGElements.indexOf(s)>-1||/[A-Z]/u.test(s))}function useRender(s,n,u,{latestValues:f},y,S=!1,A){const w=(A??isSVGComponent(s)?useSVGProps:useHTMLProps)(n,f,y,s),C=filterProps(n,typeof s=="string",S),T=s!==reactExports.Fragment?{...C,...w,ref:u}:{},{children:R}=n,I=reactExports.useMemo(()=>isMotionValue(R)?R.get():R,[R]);return reactExports.createElement(s,{...T,children:I})}function makeState({scrapeMotionValuesFromProps:s,createRenderState:n},u,f,y){return{latestValues:makeLatestValues(u,f,y,s),renderState:n()}}function makeLatestValues(s,n,u,f){const y={},S=f(s,{});for(const N in S)y[N]=resolveMotionValue(S[N]);let{initial:A,animate:w}=s;const C=isControllingVariants(s),T=isVariantNode(s);n&&T&&!C&&s.inherit!==!1&&(A===void 0&&(A=n.initial),w===void 0&&(w=n.animate));let R=u?u.initial===!1:!1;R=R||A===!1;const I=R?w:A;if(I&&typeof I!="boolean"&&!isAnimationControls(I)){const N=Array.isArray(I)?I:[I];for(let L=0;L<N.length;L++){const F=resolveVariantFromProps(s,N[L]);if(F){const{transitionEnd:H,transition:z,...U}=F;for(const G in U){let Y=U[G];if(Array.isArray(Y)){const K=R?Y.length-1:0;Y=Y[K]}Y!==null&&(y[G]=Y)}for(const G in H)y[G]=H[G]}}}return y}const makeUseVisualState=s=>(n,u)=>{const f=reactExports.useContext(MotionContext),y=reactExports.useContext(PresenceContext),S=()=>makeState(s,n,f,y);return u?S():useConstant(S)},useHTMLVisualState=makeUseVisualState({scrapeMotionValuesFromProps:scrapeMotionValuesFromProps$1,createRenderState:createHtmlRenderState}),useSVGVisualState=makeUseVisualState({scrapeMotionValuesFromProps,createRenderState:createSvgRenderState}),motionComponentSymbol=Symbol.for("motionComponentSymbol");function useMotionRef(s,n,u){const f=reactExports.useRef(u);reactExports.useInsertionEffect(()=>{f.current=u});const y=reactExports.useRef(null);return reactExports.useCallback(S=>{S&&s.onMount?.(S),n&&(S?n.mount(S):n.unmount());const A=f.current;if(typeof A=="function")if(S){const w=A(S);typeof w=="function"&&(y.current=w)}else y.current?(y.current(),y.current=null):A(S);else A&&(A.current=S)},[n])}const SwitchLayoutGroupContext=reactExports.createContext({});function isRefObject$1(s){return s&&typeof s=="object"&&Object.prototype.hasOwnProperty.call(s,"current")}function useVisualElement(s,n,u,f,y,S){const{visualElement:A}=reactExports.useContext(MotionContext),w=reactExports.useContext(LazyContext),C=reactExports.useContext(PresenceContext),T=reactExports.useContext(MotionConfigContext),R=T.reducedMotion,I=T.skipAnimations,N=reactExports.useRef(null),L=reactExports.useRef(!1);f=f||w.renderer,!N.current&&f&&(N.current=f(s,{visualState:n,parent:A,props:u,presenceContext:C,blockInitialAnimation:C?C.initial===!1:!1,reducedMotionConfig:R,skipAnimations:I,isSVG:S}),L.current&&N.current&&(N.current.manuallyAnimateOnMount=!0));const F=N.current,H=reactExports.useContext(SwitchLayoutGroupContext);F&&!F.projection&&y&&(F.type==="html"||F.type==="svg")&&createProjectionNode(N.current,u,y,H);const z=reactExports.useRef(!1);reactExports.useInsertionEffect(()=>{F&&z.current&&F.update(u,C)});const U=u[optimizedAppearDataAttribute],G=reactExports.useRef(!!U&&!window.MotionHandoffIsComplete?.(U)&&window.MotionHasOptimisedAnimation?.(U));return useIsomorphicLayoutEffect$1(()=>{L.current=!0,F&&(z.current=!0,window.MotionIsMounted=!0,F.updateFeatures(),F.scheduleRenderMicrotask(),G.current&&F.animationState&&F.animationState.animateChanges())}),reactExports.useEffect(()=>{F&&(!G.current&&F.animationState&&F.animationState.animateChanges(),G.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(U)}),G.current=!1),F.enteringChildren=void 0)}),F}function createProjectionNode(s,n,u,f){const{layoutId:y,layout:S,drag:A,dragConstraints:w,layoutScroll:C,layoutRoot:T,layoutCrossfade:R}=n;s.projection=new u(s.latestValues,n["data-framer-portal-id"]?void 0:getClosestProjectingNode(s.parent)),s.projection.setOptions({layoutId:y,layout:S,alwaysMeasureLayout:!!A||w&&isRefObject$1(w),visualElement:s,animationType:typeof S=="string"?S:"both",initialPromotionConfig:f,crossfade:R,layoutScroll:C,layoutRoot:T})}function getClosestProjectingNode(s){if(s)return s.options.allowProjection!==!1?s.projection:getClosestProjectingNode(s.parent)}function createMotionComponent(s,{forwardMotionProps:n=!1,type:u}={},f,y){f&&loadFeatures(f);const S=u?u==="svg":isSVGComponent(s),A=S?useSVGVisualState:useHTMLVisualState;function w(T,R){let I;const N={...reactExports.useContext(MotionConfigContext),...T,layoutId:useLayoutId(T)},{isStatic:L}=N,F=useCreateMotionContext(T),H=A(T,L);if(!L&&isBrowser$1){useStrictMode();const z=getProjectionFunctionality(N);I=z.MeasureLayout,F.visualElement=useVisualElement(s,H,N,y,z.ProjectionNode,S)}return jsxRuntimeExports.jsxs(MotionContext.Provider,{value:F,children:[I&&F.visualElement?jsxRuntimeExports.jsx(I,{visualElement:F.visualElement,...N}):null,useRender(s,T,useMotionRef(H,F.visualElement,R),H,L,n,S)]})}w.displayName=`motion.${typeof s=="string"?s:`create(${s.displayName??s.name??""})`}`;const C=reactExports.forwardRef(w);return C[motionComponentSymbol]=s,C}function useLayoutId({layoutId:s}){const n=reactExports.useContext(LayoutGroupContext).id;return n&&s!==void 0?n+"-"+s:s}function useStrictMode(s,n){reactExports.useContext(LazyContext).strict}function getProjectionFunctionality(s){const n=getInitializedFeatureDefinitions(),{drag:u,layout:f}=n;if(!u&&!f)return{};const y={...u,...f};return{MeasureLayout:u?.isEnabled(s)||f?.isEnabled(s)?y.MeasureLayout:void 0,ProjectionNode:y.ProjectionNode}}function createMotionProxy(s,n){if(typeof Proxy>"u")return createMotionComponent;const u=new Map,f=(S,A)=>createMotionComponent(S,A,s,n),y=(S,A)=>f(S,A);return new Proxy(y,{get:(S,A)=>A==="create"?f:(u.has(A)||u.set(A,createMotionComponent(A,void 0,s,n)),u.get(A))})}const createDomVisualElement=(s,n)=>n.isSVG??isSVGComponent(s)?new SVGVisualElement(n):new HTMLVisualElement(n,{allowProjection:s!==reactExports.Fragment});class AnimationFeature extends Feature{constructor(n){super(n),n.animationState||(n.animationState=createAnimationState(n))}updateAnimationControlsSubscription(){const{animate:n}=this.node.getProps();isAnimationControls(n)&&(this.unmountControls=n.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:n}=this.node.getProps(),{animate:u}=this.node.prevProps||{};n!==u&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let id$2=0;class ExitAnimationFeature extends Feature{constructor(){super(...arguments),this.id=id$2++}update(){if(!this.node.presenceContext)return;const{isPresent:n,onExitComplete:u}=this.node.presenceContext,{isPresent:f}=this.node.prevPresenceContext||{};if(!this.node.animationState||n===f)return;const y=this.node.animationState.setActive("exit",!n);u&&!n&&y.then(()=>{u(this.id)})}mount(){const{register:n,onExitComplete:u}=this.node.presenceContext||{};u&&u(this.id),n&&(this.unmount=n(this.id))}unmount(){}}const animations={animation:{Feature:AnimationFeature},exit:{Feature:ExitAnimationFeature}};function extractEventInfo(s){return{point:{x:s.pageX,y:s.pageY}}}const addPointerInfo=s=>n=>isPrimaryPointer(n)&&s(n,extractEventInfo(n));function addPointerEvent(s,n,u,f){return addDomEvent(s,n,addPointerInfo(u),f)}const getContextWindow=({current:s})=>s?s.ownerDocument.defaultView:null,distance=(s,n)=>Math.abs(s-n);function distance2D(s,n){const u=distance(s.x,n.x),f=distance(s.y,n.y);return Math.sqrt(u**2+f**2)}const overflowStyles=new Set(["auto","scroll"]);class PanSession{constructor(n,u,{transformPagePoint:f,contextWindow:y=window,dragSnapToOrigin:S=!1,distanceThreshold:A=3,element:w}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=L=>{this.handleScroll(L.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const L=getPanInfo(this.lastMoveEventInfo,this.history),F=this.startEvent!==null,H=distance2D(L.offset,{x:0,y:0})>=this.distanceThreshold;if(!F&&!H)return;const{point:z}=L,{timestamp:U}=frameData;this.history.push({...z,timestamp:U});const{onStart:G,onMove:Y}=this.handlers;F||(G&&G(this.lastMoveEvent,L),this.startEvent=this.lastMoveEvent),Y&&Y(this.lastMoveEvent,L)},this.handlePointerMove=(L,F)=>{this.lastMoveEvent=L,this.lastMoveEventInfo=transformPoint(F,this.transformPagePoint),frame$1.update(this.updatePoint,!0)},this.handlePointerUp=(L,F)=>{this.end();const{onEnd:H,onSessionEnd:z,resumeAnimation:U}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&U&&U(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const G=getPanInfo(L.type==="pointercancel"?this.lastMoveEventInfo:transformPoint(F,this.transformPagePoint),this.history);this.startEvent&&H&&H(L,G),z&&z(L,G)},!isPrimaryPointer(n))return;this.dragSnapToOrigin=S,this.handlers=u,this.transformPagePoint=f,this.distanceThreshold=A,this.contextWindow=y||window;const C=extractEventInfo(n),T=transformPoint(C,this.transformPagePoint),{point:R}=T,{timestamp:I}=frameData;this.history=[{...R,timestamp:I}];const{onSessionStart:N}=u;N&&N(n,getPanInfo(T,this.history)),this.removeListeners=pipe$1(addPointerEvent(this.contextWindow,"pointermove",this.handlePointerMove),addPointerEvent(this.contextWindow,"pointerup",this.handlePointerUp),addPointerEvent(this.contextWindow,"pointercancel",this.handlePointerUp)),w&&this.startScrollTracking(w)}startScrollTracking(n){let u=n.parentElement;for(;u;){const f=getComputedStyle(u);(overflowStyles.has(f.overflowX)||overflowStyles.has(f.overflowY))&&this.scrollPositions.set(u,{x:u.scrollLeft,y:u.scrollTop}),u=u.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(n){const u=this.scrollPositions.get(n);if(!u)return;const f=n===window,y=f?{x:window.scrollX,y:window.scrollY}:{x:n.scrollLeft,y:n.scrollTop},S={x:y.x-u.x,y:y.y-u.y};S.x===0&&S.y===0||(f?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=S.x,this.lastMoveEventInfo.point.y+=S.y):this.history.length>0&&(this.history[0].x-=S.x,this.history[0].y-=S.y),this.scrollPositions.set(n,y),frame$1.update(this.updatePoint,!0))}updateHandlers(n){this.handlers=n}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),cancelFrame(this.updatePoint)}}function transformPoint(s,n){return n?{point:n(s.point)}:s}function subtractPoint(s,n){return{x:s.x-n.x,y:s.y-n.y}}function getPanInfo({point:s},n){return{point:s,delta:subtractPoint(s,lastDevicePoint(n)),offset:subtractPoint(s,startDevicePoint(n)),velocity:getVelocity(n,.1)}}function startDevicePoint(s){return s[0]}function lastDevicePoint(s){return s[s.length-1]}function getVelocity(s,n){if(s.length<2)return{x:0,y:0};let u=s.length-1,f=null;const y=lastDevicePoint(s);for(;u>=0&&(f=s[u],!(y.timestamp-f.timestamp>secondsToMilliseconds(n)));)u--;if(!f)return{x:0,y:0};const S=millisecondsToSeconds(y.timestamp-f.timestamp);if(S===0)return{x:0,y:0};const A={x:(y.x-f.x)/S,y:(y.y-f.y)/S};return A.x===1/0&&(A.x=0),A.y===1/0&&(A.y=0),A}function applyConstraints(s,{min:n,max:u},f){return n!==void 0&&s<n?s=f?mixNumber$1(n,s,f.min):Math.max(s,n):u!==void 0&&s>u&&(s=f?mixNumber$1(u,s,f.max):Math.min(s,u)),s}function calcRelativeAxisConstraints(s,n,u){return{min:n!==void 0?s.min+n:void 0,max:u!==void 0?s.max+u-(s.max-s.min):void 0}}function calcRelativeConstraints(s,{top:n,left:u,bottom:f,right:y}){return{x:calcRelativeAxisConstraints(s.x,u,y),y:calcRelativeAxisConstraints(s.y,n,f)}}function calcViewportAxisConstraints(s,n){let u=n.min-s.min,f=n.max-s.max;return n.max-n.min<s.max-s.min&&([u,f]=[f,u]),{min:u,max:f}}function calcViewportConstraints(s,n){return{x:calcViewportAxisConstraints(s.x,n.x),y:calcViewportAxisConstraints(s.y,n.y)}}function calcOrigin(s,n){let u=.5;const f=calcLength(s),y=calcLength(n);return y>f?u=progress(n.min,n.max-f,s.min):f>y&&(u=progress(s.min,s.max-y,n.min)),clamp$1(0,1,u)}function rebaseAxisConstraints(s,n){const u={};return n.min!==void 0&&(u.min=n.min-s.min),n.max!==void 0&&(u.max=n.max-s.min),u}const defaultElastic=.35;function resolveDragElastic(s=defaultElastic){return s===!1?s=0:s===!0&&(s=defaultElastic),{x:resolveAxisElastic(s,"left","right"),y:resolveAxisElastic(s,"top","bottom")}}function resolveAxisElastic(s,n,u){return{min:resolvePointElastic(s,n),max:resolvePointElastic(s,u)}}function resolvePointElastic(s,n){return typeof s=="number"?s:s[n]||0}const elementDragControls=new WeakMap;class VisualElementDragControls{constructor(n){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=createBox(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=n}start(n,{snapToCursor:u=!1,distanceThreshold:f}={}){const{presenceContext:y}=this.visualElement;if(y&&y.isPresent===!1)return;const S=I=>{u?(this.stopAnimation(),this.snapToCursor(extractEventInfo(I).point)):this.pauseAnimation()},A=(I,N)=>{this.stopAnimation();const{drag:L,dragPropagation:F,onDragStart:H}=this.getProps();if(L&&!F&&(this.openDragLock&&this.openDragLock(),this.openDragLock=setDragLock(L),!this.openDragLock))return;this.latestPointerEvent=I,this.latestPanInfo=N,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),eachAxis(U=>{let G=this.getAxisMotionValue(U).get()||0;if(percent.test(G)){const{projection:Y}=this.visualElement;if(Y&&Y.layout){const K=Y.layout.layoutBox[U];K&&(G=calcLength(K)*(parseFloat(G)/100))}}this.originPoint[U]=G}),H&&frame$1.update(()=>H(I,N),!1,!0),addValueToWillChange(this.visualElement,"transform");const{animationState:z}=this.visualElement;z&&z.setActive("whileDrag",!0)},w=(I,N)=>{this.latestPointerEvent=I,this.latestPanInfo=N;const{dragPropagation:L,dragDirectionLock:F,onDirectionLock:H,onDrag:z}=this.getProps();if(!L&&!this.openDragLock)return;const{offset:U}=N;if(F&&this.currentDirection===null){this.currentDirection=getCurrentDirection(U),this.currentDirection!==null&&H&&H(this.currentDirection);return}this.updateAxis("x",N.point,U),this.updateAxis("y",N.point,U),this.visualElement.render(),z&&frame$1.update(()=>z(I,N),!1,!0)},C=(I,N)=>{this.latestPointerEvent=I,this.latestPanInfo=N,this.stop(I,N),this.latestPointerEvent=null,this.latestPanInfo=null},T=()=>eachAxis(I=>this.getAnimationState(I)==="paused"&&this.getAxisMotionValue(I).animation?.play()),{dragSnapToOrigin:R}=this.getProps();this.panSession=new PanSession(n,{onSessionStart:S,onStart:A,onMove:w,onSessionEnd:C,resumeAnimation:T},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:R,distanceThreshold:f,contextWindow:getContextWindow(this.visualElement),element:this.visualElement.current})}stop(n,u){const f=n||this.latestPointerEvent,y=u||this.latestPanInfo,S=this.isDragging;if(this.cancel(),!S||!y||!f)return;const{velocity:A}=y;this.startAnimation(A);const{onDragEnd:w}=this.getProps();w&&frame$1.postRender(()=>w(f,y))}cancel(){this.isDragging=!1;const{projection:n,animationState:u}=this.visualElement;n&&(n.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:f}=this.getProps();!f&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),u&&u.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(n,u,f){const{drag:y}=this.getProps();if(!f||!shouldDrag(n,y,this.currentDirection))return;const S=this.getAxisMotionValue(n);let A=this.originPoint[n]+f[n];this.constraints&&this.constraints[n]&&(A=applyConstraints(A,this.constraints[n],this.elastic[n])),S.set(A)}resolveConstraints(){const{dragConstraints:n,dragElastic:u}=this.getProps(),f=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,y=this.constraints;n&&isRefObject$1(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&f?this.constraints=calcRelativeConstraints(f.layoutBox,n):this.constraints=!1,this.elastic=resolveDragElastic(u),y!==this.constraints&&f&&this.constraints&&!this.hasMutatedConstraints&&eachAxis(S=>{this.constraints!==!1&&this.getAxisMotionValue(S)&&(this.constraints[S]=rebaseAxisConstraints(f.layoutBox[S],this.constraints[S]))})}resolveRefConstraints(){const{dragConstraints:n,onMeasureDragConstraints:u}=this.getProps();if(!n||!isRefObject$1(n))return!1;const f=n.current,{projection:y}=this.visualElement;if(!y||!y.layout)return!1;const S=measurePageBox(f,y.root,this.visualElement.getTransformPagePoint());let A=calcViewportConstraints(y.layout.layoutBox,S);if(u){const w=u(convertBoxToBoundingBox(A));this.hasMutatedConstraints=!!w,w&&(A=convertBoundingBoxToBox(w))}return A}startAnimation(n){const{drag:u,dragMomentum:f,dragElastic:y,dragTransition:S,dragSnapToOrigin:A,onDragTransitionEnd:w}=this.getProps(),C=this.constraints||{},T=eachAxis(R=>{if(!shouldDrag(R,u,this.currentDirection))return;let I=C&&C[R]||{};A&&(I={min:0,max:0});const N=y?200:1e6,L=y?40:1e7,F={type:"inertia",velocity:f?n[R]:0,bounceStiffness:N,bounceDamping:L,timeConstant:750,restDelta:1,restSpeed:10,...S,...I};return this.startAxisValueAnimation(R,F)});return Promise.all(T).then(w)}startAxisValueAnimation(n,u){const f=this.getAxisMotionValue(n);return addValueToWillChange(this.visualElement,n),f.start(animateMotionValue(n,f,0,u,this.visualElement,!1))}stopAnimation(){eachAxis(n=>this.getAxisMotionValue(n).stop())}pauseAnimation(){eachAxis(n=>this.getAxisMotionValue(n).animation?.pause())}getAnimationState(n){return this.getAxisMotionValue(n).animation?.state}getAxisMotionValue(n){const u=`_drag${n.toUpperCase()}`,f=this.visualElement.getProps();return f[u]||this.visualElement.getValue(n,(f.initial?f.initial[n]:void 0)||0)}snapToCursor(n){eachAxis(u=>{const{drag:f}=this.getProps();if(!shouldDrag(u,f,this.currentDirection))return;const{projection:y}=this.visualElement,S=this.getAxisMotionValue(u);if(y&&y.layout){const{min:A,max:w}=y.layout.layoutBox[u],C=S.get()||0;S.set(n[u]-mixNumber$1(A,w,.5)+C)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:n,dragConstraints:u}=this.getProps(),{projection:f}=this.visualElement;if(!isRefObject$1(u)||!f||!this.constraints)return;this.stopAnimation();const y={x:0,y:0};eachAxis(A=>{const w=this.getAxisMotionValue(A);if(w&&this.constraints!==!1){const C=w.get();y[A]=calcOrigin({min:C,max:C},this.constraints[A])}});const{transformTemplate:S}=this.visualElement.getProps();this.visualElement.current.style.transform=S?S({},""):"none",f.root&&f.root.updateScroll(),f.updateLayout(),this.resolveConstraints(),eachAxis(A=>{if(!shouldDrag(A,n,null))return;const w=this.getAxisMotionValue(A),{min:C,max:T}=this.constraints[A];w.set(mixNumber$1(C,T,y[A]))})}addListeners(){if(!this.visualElement.current)return;elementDragControls.set(this.visualElement,this);const n=this.visualElement.current,u=addPointerEvent(n,"pointerdown",C=>{const{drag:T,dragListener:R=!0}=this.getProps(),I=C.target,N=I!==n&&isElementTextInput(I);T&&R&&!N&&this.start(C)}),f=()=>{const{dragConstraints:C}=this.getProps();isRefObject$1(C)&&C.current&&(this.constraints=this.resolveRefConstraints())},{projection:y}=this.visualElement,S=y.addEventListener("measure",f);y&&!y.layout&&(y.root&&y.root.updateScroll(),y.updateLayout()),frame$1.read(f);const A=addDomEvent(window,"resize",()=>this.scalePositionWithinConstraints()),w=y.addEventListener("didUpdate",(({delta:C,hasLayoutChanged:T})=>{this.isDragging&&T&&(eachAxis(R=>{const I=this.getAxisMotionValue(R);I&&(this.originPoint[R]+=C[R].translate,I.set(I.get()+C[R].translate))}),this.visualElement.render())}));return()=>{A(),u(),S(),w&&w()}}getProps(){const n=this.visualElement.getProps(),{drag:u=!1,dragDirectionLock:f=!1,dragPropagation:y=!1,dragConstraints:S=!1,dragElastic:A=defaultElastic,dragMomentum:w=!0}=n;return{...n,drag:u,dragDirectionLock:f,dragPropagation:y,dragConstraints:S,dragElastic:A,dragMomentum:w}}}function shouldDrag(s,n,u){return(n===!0||n===s)&&(u===null||u===s)}function getCurrentDirection(s,n=10){let u=null;return Math.abs(s.y)>n?u="y":Math.abs(s.x)>n&&(u="x"),u}class DragGesture extends Feature{constructor(n){super(n),this.removeGroupControls=noop$1,this.removeListeners=noop$1,this.controls=new VisualElementDragControls(n)}mount(){const{dragControls:n}=this.node.getProps();n&&(this.removeGroupControls=n.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||noop$1}update(){const{dragControls:n}=this.node.getProps(),{dragControls:u}=this.node.prevProps||{};n!==u&&(this.removeGroupControls(),n&&(this.removeGroupControls=n.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const asyncHandler=s=>(n,u)=>{s&&frame$1.update(()=>s(n,u),!1,!0)};class PanGesture extends Feature{constructor(){super(...arguments),this.removePointerDownListener=noop$1}onPointerDown(n){this.session=new PanSession(n,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:getContextWindow(this.node)})}createPanHandlers(){const{onPanSessionStart:n,onPanStart:u,onPan:f,onPanEnd:y}=this.node.getProps();return{onSessionStart:asyncHandler(n),onStart:asyncHandler(u),onMove:asyncHandler(f),onEnd:(S,A)=>{delete this.session,y&&frame$1.postRender(()=>y(S,A))}}}mount(){this.removePointerDownListener=addPointerEvent(this.node.current,"pointerdown",n=>this.onPointerDown(n))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let hasTakenAnySnapshot=!1;class MeasureLayoutWithContext extends reactExports.Component{componentDidMount(){const{visualElement:n,layoutGroup:u,switchLayoutGroup:f,layoutId:y}=this.props,{projection:S}=n;S&&(u.group&&u.group.add(S),f&&f.register&&y&&f.register(S),hasTakenAnySnapshot&&S.root.didUpdate(),S.addEventListener("animationComplete",()=>{this.safeToRemove()}),S.setOptions({...S.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),globalProjectionState.hasEverUpdated=!0}getSnapshotBeforeUpdate(n){const{layoutDependency:u,visualElement:f,drag:y,isPresent:S}=this.props,{projection:A}=f;return A&&(A.isPresent=S,n.layoutDependency!==u&&A.setOptions({...A.options,layoutDependency:u}),hasTakenAnySnapshot=!0,y||n.layoutDependency!==u||u===void 0||n.isPresent!==S?A.willUpdate():this.safeToRemove(),n.isPresent!==S&&(S?A.promote():A.relegate()||frame$1.postRender(()=>{const w=A.getStack();(!w||!w.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:n}=this.props.visualElement;n&&(n.root.didUpdate(),microtask.postRender(()=>{!n.currentAnimation&&n.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:n,layoutGroup:u,switchLayoutGroup:f}=this.props,{projection:y}=n;hasTakenAnySnapshot=!0,y&&(y.scheduleCheckAfterUnmount(),u&&u.group&&u.group.remove(y),f&&f.deregister&&f.deregister(y))}safeToRemove(){const{safeToRemove:n}=this.props;n&&n()}render(){return null}}function MeasureLayout(s){const[n,u]=usePresence(),f=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(MeasureLayoutWithContext,{...s,layoutGroup:f,switchLayoutGroup:reactExports.useContext(SwitchLayoutGroupContext),isPresent:n,safeToRemove:u})}const drag={pan:{Feature:PanGesture},drag:{Feature:DragGesture,ProjectionNode:HTMLProjectionNode,MeasureLayout}};function handleHoverEvent(s,n,u){const{props:f}=s;s.animationState&&f.whileHover&&s.animationState.setActive("whileHover",u==="Start");const y="onHover"+u,S=f[y];S&&frame$1.postRender(()=>S(n,extractEventInfo(n)))}class HoverGesture extends Feature{mount(){const{current:n}=this.node;n&&(this.unmount=hover(n,(u,f)=>(handleHoverEvent(this.node,f,"Start"),y=>handleHoverEvent(this.node,y,"End"))))}unmount(){}}class FocusGesture extends Feature{constructor(){super(...arguments),this.isActive=!1}onFocus(){let n=!1;try{n=this.node.current.matches(":focus-visible")}catch{n=!0}!n||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pipe$1(addDomEvent(this.node.current,"focus",()=>this.onFocus()),addDomEvent(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function handlePressEvent(s,n,u){const{props:f}=s;if(s.current instanceof HTMLButtonElement&&s.current.disabled)return;s.animationState&&f.whileTap&&s.animationState.setActive("whileTap",u==="Start");const y="onTap"+(u==="End"?"":u),S=f[y];S&&frame$1.postRender(()=>S(n,extractEventInfo(n)))}class PressGesture extends Feature{mount(){const{current:n}=this.node;n&&(this.unmount=press(n,(u,f)=>(handlePressEvent(this.node,f,"Start"),(y,{success:S})=>handlePressEvent(this.node,y,S?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const observerCallbacks=new WeakMap,observers=new WeakMap,fireObserverCallback=s=>{const n=observerCallbacks.get(s.target);n&&n(s)},fireAllObserverCallbacks=s=>{s.forEach(fireObserverCallback)};function initIntersectionObserver({root:s,...n}){const u=s||document;observers.has(u)||observers.set(u,{});const f=observers.get(u),y=JSON.stringify(n);return f[y]||(f[y]=new IntersectionObserver(fireAllObserverCallbacks,{root:s,...n})),f[y]}function observeIntersection(s,n,u){const f=initIntersectionObserver(n);return observerCallbacks.set(s,u),f.observe(s),()=>{observerCallbacks.delete(s),f.unobserve(s)}}const thresholdNames={some:0,all:1};class InViewFeature extends Feature{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:n={}}=this.node.getProps(),{root:u,margin:f,amount:y="some",once:S}=n,A={root:u?u.current:void 0,rootMargin:f,threshold:typeof y=="number"?y:thresholdNames[y]},w=C=>{const{isIntersecting:T}=C;if(this.isInView===T||(this.isInView=T,S&&!T&&this.hasEnteredView))return;T&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",T);const{onViewportEnter:R,onViewportLeave:I}=this.node.getProps(),N=T?R:I;N&&N(C)};return observeIntersection(this.node.current,A,w)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:n,prevProps:u}=this.node;["amount","margin","root"].some(hasViewportOptionChanged(n,u))&&this.startObserver()}unmount(){}}function hasViewportOptionChanged({viewport:s={}},{viewport:n={}}={}){return u=>s[u]!==n[u]}const gestureAnimations={inView:{Feature:InViewFeature},tap:{Feature:PressGesture},focus:{Feature:FocusGesture},hover:{Feature:HoverGesture}},layout={layout:{ProjectionNode:HTMLProjectionNode,MeasureLayout}},featureBundle={...animations,...gestureAnimations,...drag,...layout},motion=createMotionProxy(featureBundle,createDomVisualElement);function AnimatedNexus({state:s="idle"}){const n=Array.from({length:6}).map((S,A)=>({id:A,size:90-A*14,duration:10+A*2,reverse:A%2===0})),u=S=>s==="idle"?"#9CA3AF":s==="active"&&S%2===0?"#06B6D4":"#3B82F6",f=()=>s==="idle"?3:4,y=(S,A,w)=>{const C=Array.from({length:6}).map((L,F)=>{const H=Math.PI/3*F-Math.PI/2;return{x:S+w*Math.cos(H),y:A+w*Math.sin(H)}}),T=L=>C[(L+6)%6],R=(L,F,H)=>({x:L.x+(F.x-L.x)*H,y:L.y+(F.y-L.y)*H}),I=.15;let N="";for(let L=0;L<6;L++){const F=T(L),H=T(L+1);if(L===0){const G=R(F,H,I);N+=`M ${G.x},${G.y} `}const z=R(F,H,1-I);N+=`L ${z.x},${z.y} `;const U=R(H,T(L+2),I);N+=`Q ${H.x},${H.y} ${U.x},${U.y} `}return N+"Z"};return jsxRuntimeExports.jsx("div",{className:"relative w-full h-full flex items-center justify-center bg-white rounded-full overflow-hidden",style:{background:"transparent",width:"100%",height:"100%"},children:jsxRuntimeExports.jsx("svg",{viewBox:"0 0 200 200",className:"w-full h-full p-1",children:n.map(S=>jsxRuntimeExports.jsx(motion.path,{d:y(100,100,S.size),fill:"none",stroke:u(S.id),strokeWidth:f(),strokeLinecap:"round",strokeLinejoin:"round",initial:{rotate:0,scale:1},animate:{rotate:s==="thinking"||s==="idle"?S.reverse?360:-360:0,scale:s==="thinking"?[1,1.15,.9,1]:1,strokeWidth:s==="thinking"?[4,6,2,4]:f(),stroke:s==="thinking"?["#3B82F6","#2DD4BF","#10B981","#2DD4BF","#3B82F6"]:u(S.id)},transition:{rotate:{duration:s==="idle"?S.duration*5:S.duration,repeat:1/0,ease:"linear"},scale:{duration:2,repeat:1/0,ease:"easeInOut",delay:(5-S.id)*.15},strokeWidth:{duration:2,repeat:1/0,ease:"easeInOut",delay:(5-S.id)*.15},stroke:{duration:4,repeat:1/0,ease:"easeInOut",delay:S.id*.2}},style:{originX:"50%",originY:"50%"}},`${S.id}-${s}`))})})}const Avatar=({onClick:s,isOpen:n,userName:u,state:f,isMaximized:y,config:S})=>{const[A,w]=reactExports.useState(!1);return reactExports.useEffect(()=>{if(!n&&f==="idle"){const C=setTimeout(()=>{w(!0)},2e3);return()=>clearTimeout(C)}else w(!1)},[n,f]),jsxRuntimeExports.jsxs("div",{className:"agent-neo-font",children:[jsxRuntimeExports.jsx(AnimatePresence,{children:A&&!n&&!y&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,x:20,scale:.8},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,scale:.8},className:"greeting-bubble glass-morphism",children:S?.greeting||`Hello there, ${u||"there"}! I'm your assistant. How can I help you today?`})}),jsxRuntimeExports.jsx(motion.div,{className:`floating-avatar glass-morphism ${y?"maximized":""}`,onClick:s,whileHover:{scale:1.1},whileTap:{scale:.9},style:{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",width:y?"90px":"70px",height:y?"90px":"70px",overflow:"hidden",background:S?.avatar?.type==="video"?"black":"transparent",...S?.avatar?.styles},children:S?.avatar?.type==="video"&&S.avatar.source?jsxRuntimeExports.jsx("video",{src:S.avatar.source,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,style:{width:"100%",height:"100%",objectFit:"cover",maskImage:"radial-gradient(circle, black 60%, transparent 100%)",WebkitMaskImage:"radial-gradient(circle, black 60%, transparent 100%)"}}):S?.avatar?.type==="image"&&S.avatar.source?jsxRuntimeExports.jsx("img",{src:S.avatar.source,alt:u||"Agent",style:{width:"100%",height:"100%",objectFit:"cover"}}):jsxRuntimeExports.jsx(AnimatedNexus,{state:f})})]})};function ccount(s,n){const u=String(s);if(typeof n!="string")throw new TypeError("Expected character");let f=0,y=u.indexOf(n);for(;y!==-1;)f++,y=u.indexOf(n,y+n.length);return f}const asciiAlpha=regexCheck(/[A-Za-z]/),asciiAlphanumeric=regexCheck(/[\dA-Za-z]/);function asciiControl(s){return s!==null&&(s<32||s===127)}function markdownLineEnding(s){return s!==null&&s<-2}function markdownLineEndingOrSpace(s){return s!==null&&(s<0||s===32)}function markdownSpace(s){return s===-2||s===-1||s===32}const unicodePunctuation=regexCheck(new RegExp("\\p{P}|\\p{S}","u")),unicodeWhitespace=regexCheck(/\s/);function regexCheck(s){return n;function n(u){return u!==null&&u>-1&&s.test(String.fromCharCode(u))}}function escapeStringRegexp(s){if(typeof s!="string")throw new TypeError("Expected a string");return s.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}const convert=(function(s){if(s==null)return ok;if(typeof s=="function")return castFactory(s);if(typeof s=="object")return Array.isArray(s)?anyFactory(s):propertiesFactory(s);if(typeof s=="string")return typeFactory(s);throw new Error("Expected function, string, or object as test")});function anyFactory(s){const n=[];let u=-1;for(;++u<s.length;)n[u]=convert(s[u]);return castFactory(f);function f(...y){let S=-1;for(;++S<n.length;)if(n[S].apply(this,y))return!0;return!1}}function propertiesFactory(s){const n=s;return castFactory(u);function u(f){const y=f;let S;for(S in s)if(y[S]!==n[S])return!1;return!0}}function typeFactory(s){return castFactory(n);function n(u){return u&&u.type===s}}function castFactory(s){return n;function n(u,f,y){return!!(looksLikeANode(u)&&s.call(this,u,typeof f=="number"?f:void 0,y||void 0))}}function ok(){return!0}function looksLikeANode(s){return s!==null&&typeof s=="object"&&"type"in s}const empty=[],CONTINUE=!0,EXIT=!1,SKIP="skip";function visitParents(s,n,u,f){let y;typeof n=="function"&&typeof u!="function"?(f=u,u=n):y=n;const S=convert(y),A=f?-1:1;w(s,void 0,[])();function w(C,T,R){const I=C&&typeof C=="object"?C:{};if(typeof I.type=="string"){const L=typeof I.tagName=="string"?I.tagName:typeof I.name=="string"?I.name:void 0;Object.defineProperty(N,"name",{value:"node ("+(C.type+(L?"<"+L+">":""))+")"})}return N;function N(){let L=empty,F,H,z;if((!n||S(C,T,R[R.length-1]||void 0))&&(L=toResult(u(C,R)),L[0]===EXIT))return L;if("children"in C&&C.children){const U=C;if(U.children&&L[0]!==SKIP)for(H=(f?U.children.length:-1)+A,z=R.concat(U);H>-1&&H<U.children.length;){const G=U.children[H];if(F=w(G,H,z)(),F[0]===EXIT)return F;H=typeof F[1]=="number"?F[1]:H+A}}return L}}}function toResult(s){return Array.isArray(s)?s:typeof s=="number"?[CONTINUE,s]:s==null?empty:[s]}function findAndReplace(s,n,u){const f=convert((u||{}).ignore||[]),y=toPairs(n);let S=-1;for(;++S<y.length;)visitParents(s,"text",A);function A(C,T){let R=-1,I;for(;++R<T.length;){const N=T[R],L=I?I.children:void 0;if(f(N,L?L.indexOf(N):void 0,I))return;I=N}if(I)return w(C,T)}function w(C,T){const R=T[T.length-1],I=y[S][0],N=y[S][1];let L=0;const F=R.children.indexOf(C);let H=!1,z=[];I.lastIndex=0;let U=I.exec(C.value);for(;U;){const G=U.index,Y={index:U.index,input:U.input,stack:[...T,C]};let K=N(...U,Y);if(typeof K=="string"&&(K=K.length>0?{type:"text",value:K}:void 0),K===!1?I.lastIndex=G+1:(L!==G&&z.push({type:"text",value:C.value.slice(L,G)}),Array.isArray(K)?z.push(...K):K&&z.push(K),L=G+U[0].length,H=!0),!I.global)break;U=I.exec(C.value)}return H?(L<C.value.length&&z.push({type:"text",value:C.value.slice(L)}),R.children.splice(F,1,...z)):z=[C],F+z.length}}function toPairs(s){const n=[];if(!Array.isArray(s))throw new TypeError("Expected find and replace tuple or list of tuples");const u=!s[0]||Array.isArray(s[0])?s:[s];let f=-1;for(;++f<u.length;){const y=u[f];n.push([toExpression(y[0]),toFunction(y[1])])}return n}function toExpression(s){return typeof s=="string"?new RegExp(escapeStringRegexp(s),"g"):s}function toFunction(s){return typeof s=="function"?s:function(){return s}}const inConstruct="phrasing",notInConstruct=["autolink","link","image","label"];function gfmAutolinkLiteralFromMarkdown(){return{transforms:[transformGfmAutolinkLiterals],enter:{literalAutolink:enterLiteralAutolink,literalAutolinkEmail:enterLiteralAutolinkValue,literalAutolinkHttp:enterLiteralAutolinkValue,literalAutolinkWww:enterLiteralAutolinkValue},exit:{literalAutolink:exitLiteralAutolink,literalAutolinkEmail:exitLiteralAutolinkEmail,literalAutolinkHttp:exitLiteralAutolinkHttp,literalAutolinkWww:exitLiteralAutolinkWww}}}function gfmAutolinkLiteralToMarkdown(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct,notInConstruct},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct,notInConstruct},{character:":",before:"[ps]",after:"\\/",inConstruct,notInConstruct}]}}function enterLiteralAutolink(s){this.enter({type:"link",title:null,url:"",children:[]},s)}function enterLiteralAutolinkValue(s){this.config.enter.autolinkProtocol.call(this,s)}function exitLiteralAutolinkHttp(s){this.config.exit.autolinkProtocol.call(this,s)}function exitLiteralAutolinkWww(s){this.config.exit.data.call(this,s);const n=this.stack[this.stack.length-1];n.type,n.url="http://"+this.sliceSerialize(s)}function exitLiteralAutolinkEmail(s){this.config.exit.autolinkEmail.call(this,s)}function exitLiteralAutolink(s){this.exit(s)}function transformGfmAutolinkLiterals(s){findAndReplace(s,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,findUrl],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),findEmail]],{ignore:["link","linkReference"]})}function findUrl(s,n,u,f,y){let S="";if(!previous(y)||(/^w/i.test(n)&&(u=n+u,n="",S="http://"),!isCorrectDomain(u)))return!1;const A=splitUrl(u+f);if(!A[0])return!1;const w={type:"link",title:null,url:S+n+A[0],children:[{type:"text",value:n+A[0]}]};return A[1]?[w,{type:"text",value:A[1]}]:w}function findEmail(s,n,u,f){return!previous(f,!0)||/[-\d_]$/.test(u)?!1:{type:"link",title:null,url:"mailto:"+n+"@"+u,children:[{type:"text",value:n+"@"+u}]}}function isCorrectDomain(s){const n=s.split(".");return!(n.length<2||n[n.length-1]&&(/_/.test(n[n.length-1])||!/[a-zA-Z\d]/.test(n[n.length-1]))||n[n.length-2]&&(/_/.test(n[n.length-2])||!/[a-zA-Z\d]/.test(n[n.length-2])))}function splitUrl(s){const n=/[!"&'),.:;<>?\]}]+$/.exec(s);if(!n)return[s,void 0];s=s.slice(0,n.index);let u=n[0],f=u.indexOf(")");const y=ccount(s,"(");let S=ccount(s,")");for(;f!==-1&&y>S;)s+=u.slice(0,f+1),u=u.slice(f+1),f=u.indexOf(")"),S++;return[s,u]}function previous(s,n){const u=s.input.charCodeAt(s.index-1);return(s.index===0||unicodeWhitespace(u)||unicodePunctuation(u))&&(!n||u!==47)}function normalizeIdentifier(s){return s.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}footnoteReference.peek=footnoteReferencePeek;function enterFootnoteCallString(){this.buffer()}function enterFootnoteCall(s){this.enter({type:"footnoteReference",identifier:"",label:""},s)}function enterFootnoteDefinitionLabelString(){this.buffer()}function enterFootnoteDefinition(s){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},s)}function exitFootnoteCallString(s){const n=this.resume(),u=this.stack[this.stack.length-1];u.type,u.identifier=normalizeIdentifier(this.sliceSerialize(s)).toLowerCase(),u.label=n}function exitFootnoteCall(s){this.exit(s)}function exitFootnoteDefinitionLabelString(s){const n=this.resume(),u=this.stack[this.stack.length-1];u.type,u.identifier=normalizeIdentifier(this.sliceSerialize(s)).toLowerCase(),u.label=n}function exitFootnoteDefinition(s){this.exit(s)}function footnoteReferencePeek(){return"["}function footnoteReference(s,n,u,f){const y=u.createTracker(f);let S=y.move("[^");const A=u.enter("footnoteReference"),w=u.enter("reference");return S+=y.move(u.safe(u.associationId(s),{after:"]",before:S})),w(),A(),S+=y.move("]"),S}function gfmFootnoteFromMarkdown(){return{enter:{gfmFootnoteCallString:enterFootnoteCallString,gfmFootnoteCall:enterFootnoteCall,gfmFootnoteDefinitionLabelString:enterFootnoteDefinitionLabelString,gfmFootnoteDefinition:enterFootnoteDefinition},exit:{gfmFootnoteCallString:exitFootnoteCallString,gfmFootnoteCall:exitFootnoteCall,gfmFootnoteDefinitionLabelString:exitFootnoteDefinitionLabelString,gfmFootnoteDefinition:exitFootnoteDefinition}}}function gfmFootnoteToMarkdown(s){let n=!1;return s&&s.firstLineBlank&&(n=!0),{handlers:{footnoteDefinition:u,footnoteReference},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function u(f,y,S,A){const w=S.createTracker(A);let C=w.move("[^");const T=S.enter("footnoteDefinition"),R=S.enter("label");return C+=w.move(S.safe(S.associationId(f),{before:C,after:"]"})),R(),C+=w.move("]:"),f.children&&f.children.length>0&&(w.shift(4),C+=w.move((n?`
`:" ")+S.indentLines(S.containerFlow(f,w.current()),n?mapAll:mapExceptFirst))),T(),C}}function mapExceptFirst(s,n,u){return n===0?s:mapAll(s,n,u)}function mapAll(s,n,u){return(u?"":"    ")+s}const constructsWithoutStrikethrough=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];handleDelete.peek=peekDelete;function gfmStrikethroughFromMarkdown(){return{canContainEols:["delete"],enter:{strikethrough:enterStrikethrough},exit:{strikethrough:exitStrikethrough}}}function gfmStrikethroughToMarkdown(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:constructsWithoutStrikethrough}],handlers:{delete:handleDelete}}}function enterStrikethrough(s){this.enter({type:"delete",children:[]},s)}function exitStrikethrough(s){this.exit(s)}function handleDelete(s,n,u,f){const y=u.createTracker(f),S=u.enter("strikethrough");let A=y.move("~~");return A+=u.containerPhrasing(s,{...y.current(),before:A,after:"~"}),A+=y.move("~~"),S(),A}function peekDelete(){return"~"}function defaultStringLength(s){return s.length}function markdownTable(s,n){const u=n||{},f=(u.align||[]).concat(),y=u.stringLength||defaultStringLength,S=[],A=[],w=[],C=[];let T=0,R=-1;for(;++R<s.length;){const H=[],z=[];let U=-1;for(s[R].length>T&&(T=s[R].length);++U<s[R].length;){const G=serialize(s[R][U]);if(u.alignDelimiters!==!1){const Y=y(G);z[U]=Y,(C[U]===void 0||Y>C[U])&&(C[U]=Y)}H.push(G)}A[R]=H,w[R]=z}let I=-1;if(typeof f=="object"&&"length"in f)for(;++I<T;)S[I]=toAlignment(f[I]);else{const H=toAlignment(f);for(;++I<T;)S[I]=H}I=-1;const N=[],L=[];for(;++I<T;){const H=S[I];let z="",U="";H===99?(z=":",U=":"):H===108?z=":":H===114&&(U=":");let G=u.alignDelimiters===!1?1:Math.max(1,C[I]-z.length-U.length);const Y=z+"-".repeat(G)+U;u.alignDelimiters!==!1&&(G=z.length+G+U.length,G>C[I]&&(C[I]=G),L[I]=G),N[I]=Y}A.splice(1,0,N),w.splice(1,0,L),R=-1;const F=[];for(;++R<A.length;){const H=A[R],z=w[R];I=-1;const U=[];for(;++I<T;){const G=H[I]||"";let Y="",K="";if(u.alignDelimiters!==!1){const Z=C[I]-(z[I]||0),J=S[I];J===114?Y=" ".repeat(Z):J===99?Z%2?(Y=" ".repeat(Z/2+.5),K=" ".repeat(Z/2-.5)):(Y=" ".repeat(Z/2),K=Y):K=" ".repeat(Z)}u.delimiterStart!==!1&&!I&&U.push("|"),u.padding!==!1&&!(u.alignDelimiters===!1&&G==="")&&(u.delimiterStart!==!1||I)&&U.push(" "),u.alignDelimiters!==!1&&U.push(Y),U.push(G),u.alignDelimiters!==!1&&U.push(K),u.padding!==!1&&U.push(" "),(u.delimiterEnd!==!1||I!==T-1)&&U.push("|")}F.push(u.delimiterEnd===!1?U.join("").replace(/ +$/,""):U.join(""))}return F.join(`
`)}function serialize(s){return s==null?"":String(s)}function toAlignment(s){const n=typeof s=="string"?s.codePointAt(0):0;return n===67||n===99?99:n===76||n===108?108:n===82||n===114?114:0}function blockquote(s,n,u,f){const y=u.enter("blockquote"),S=u.createTracker(f);S.move("> "),S.shift(2);const A=u.indentLines(u.containerFlow(s,S.current()),map$1);return y(),A}function map$1(s,n,u){return">"+(u?"":" ")+s}function patternInScope(s,n){return listInScope(s,n.inConstruct,!0)&&!listInScope(s,n.notInConstruct,!1)}function listInScope(s,n,u){if(typeof n=="string"&&(n=[n]),!n||n.length===0)return u;let f=-1;for(;++f<n.length;)if(s.includes(n[f]))return!0;return!1}function hardBreak(s,n,u,f){let y=-1;for(;++y<u.unsafe.length;)if(u.unsafe[y].character===`
`&&patternInScope(u.stack,u.unsafe[y]))return/[ \t]/.test(f.before)?"":" ";return`\\
`}function longestStreak(s,n){const u=String(s);let f=u.indexOf(n),y=f,S=0,A=0;if(typeof n!="string")throw new TypeError("Expected substring");for(;f!==-1;)f===y?++S>A&&(A=S):S=1,y=f+n.length,f=u.indexOf(n,y);return A}function formatCodeAsIndented(s,n){return!!(n.options.fences===!1&&s.value&&!s.lang&&/[^ \r\n]/.test(s.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(s.value))}function checkFence(s){const n=s.options.fence||"`";if(n!=="`"&&n!=="~")throw new Error("Cannot serialize code with `"+n+"` for `options.fence`, expected `` ` `` or `~`");return n}function code$5(s,n,u,f){const y=checkFence(u),S=s.value||"",A=y==="`"?"GraveAccent":"Tilde";if(formatCodeAsIndented(s,u)){const I=u.enter("codeIndented"),N=u.indentLines(S,map);return I(),N}const w=u.createTracker(f),C=y.repeat(Math.max(longestStreak(S,y)+1,3)),T=u.enter("codeFenced");let R=w.move(C);if(s.lang){const I=u.enter(`codeFencedLang${A}`);R+=w.move(u.safe(s.lang,{before:R,after:" ",encode:["`"],...w.current()})),I()}if(s.lang&&s.meta){const I=u.enter(`codeFencedMeta${A}`);R+=w.move(" "),R+=w.move(u.safe(s.meta,{before:R,after:`
`,encode:["`"],...w.current()})),I()}return R+=w.move(`
`),S&&(R+=w.move(S+`
`)),R+=w.move(C),T(),R}function map(s,n,u){return(u?"":"    ")+s}function checkQuote(s){const n=s.options.quote||'"';if(n!=='"'&&n!=="'")throw new Error("Cannot serialize title with `"+n+"` for `options.quote`, expected `\"`, or `'`");return n}function definition(s,n,u,f){const y=checkQuote(u),S=y==='"'?"Quote":"Apostrophe",A=u.enter("definition");let w=u.enter("label");const C=u.createTracker(f);let T=C.move("[");return T+=C.move(u.safe(u.associationId(s),{before:T,after:"]",...C.current()})),T+=C.move("]: "),w(),!s.url||/[\0- \u007F]/.test(s.url)?(w=u.enter("destinationLiteral"),T+=C.move("<"),T+=C.move(u.safe(s.url,{before:T,after:">",...C.current()})),T+=C.move(">")):(w=u.enter("destinationRaw"),T+=C.move(u.safe(s.url,{before:T,after:s.title?" ":`
`,...C.current()}))),w(),s.title&&(w=u.enter(`title${S}`),T+=C.move(" "+y),T+=C.move(u.safe(s.title,{before:T,after:y,...C.current()})),T+=C.move(y),w()),A(),T}function checkEmphasis(s){const n=s.options.emphasis||"*";if(n!=="*"&&n!=="_")throw new Error("Cannot serialize emphasis with `"+n+"` for `options.emphasis`, expected `*`, or `_`");return n}function encodeCharacterReference(s){return"&#x"+s.toString(16).toUpperCase()+";"}function classifyCharacter(s){if(s===null||markdownLineEndingOrSpace(s)||unicodeWhitespace(s))return 1;if(unicodePunctuation(s))return 2}function encodeInfo(s,n,u){const f=classifyCharacter(s),y=classifyCharacter(n);return f===void 0?y===void 0?u==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:y===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:f===1?y===void 0?{inside:!1,outside:!1}:y===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:y===void 0?{inside:!1,outside:!1}:y===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}emphasis.peek=emphasisPeek;function emphasis(s,n,u,f){const y=checkEmphasis(u),S=u.enter("emphasis"),A=u.createTracker(f),w=A.move(y);let C=A.move(u.containerPhrasing(s,{after:y,before:w,...A.current()}));const T=C.charCodeAt(0),R=encodeInfo(f.before.charCodeAt(f.before.length-1),T,y);R.inside&&(C=encodeCharacterReference(T)+C.slice(1));const I=C.charCodeAt(C.length-1),N=encodeInfo(f.after.charCodeAt(0),I,y);N.inside&&(C=C.slice(0,-1)+encodeCharacterReference(I));const L=A.move(y);return S(),u.attentionEncodeSurroundingInfo={after:N.outside,before:R.outside},w+C+L}function emphasisPeek(s,n,u){return u.options.emphasis||"*"}function visit(s,n,u,f){let y,S,A;typeof n=="function"&&typeof u!="function"?(S=void 0,A=n,y=u):(S=n,A=u,y=f),visitParents(s,S,w,y);function w(C,T){const R=T[T.length-1],I=R?R.children.indexOf(C):void 0;return A(C,I,R)}}const emptyOptions$1={};function toString(s,n){const u=emptyOptions$1,f=typeof u.includeImageAlt=="boolean"?u.includeImageAlt:!0,y=typeof u.includeHtml=="boolean"?u.includeHtml:!0;return one(s,f,y)}function one(s,n,u){if(node(s)){if("value"in s)return s.type==="html"&&!u?"":s.value;if(n&&"alt"in s&&s.alt)return s.alt;if("children"in s)return all(s.children,n,u)}return Array.isArray(s)?all(s,n,u):""}function all(s,n,u){const f=[];let y=-1;for(;++y<s.length;)f[y]=one(s[y],n,u);return f.join("")}function node(s){return!!(s&&typeof s=="object")}function formatHeadingAsSetext(s,n){let u=!1;return visit(s,function(f){if("value"in f&&/\r?\n|\r/.test(f.value)||f.type==="break")return u=!0,EXIT}),!!((!s.depth||s.depth<3)&&toString(s)&&(n.options.setext||u))}function heading(s,n,u,f){const y=Math.max(Math.min(6,s.depth||1),1),S=u.createTracker(f);if(formatHeadingAsSetext(s,u)){const R=u.enter("headingSetext"),I=u.enter("phrasing"),N=u.containerPhrasing(s,{...S.current(),before:`
`,after:`
`});return I(),R(),N+`
`+(y===1?"=":"-").repeat(N.length-(Math.max(N.lastIndexOf("\r"),N.lastIndexOf(`
`))+1))}const A="#".repeat(y),w=u.enter("headingAtx"),C=u.enter("phrasing");S.move(A+" ");let T=u.containerPhrasing(s,{before:"# ",after:`
`,...S.current()});return/^[\t ]/.test(T)&&(T=encodeCharacterReference(T.charCodeAt(0))+T.slice(1)),T=T?A+" "+T:A,u.options.closeAtx&&(T+=" "+A),C(),w(),T}html.peek=htmlPeek;function html(s){return s.value||""}function htmlPeek(){return"<"}image.peek=imagePeek;function image(s,n,u,f){const y=checkQuote(u),S=y==='"'?"Quote":"Apostrophe",A=u.enter("image");let w=u.enter("label");const C=u.createTracker(f);let T=C.move("![");return T+=C.move(u.safe(s.alt,{before:T,after:"]",...C.current()})),T+=C.move("]("),w(),!s.url&&s.title||/[\0- \u007F]/.test(s.url)?(w=u.enter("destinationLiteral"),T+=C.move("<"),T+=C.move(u.safe(s.url,{before:T,after:">",...C.current()})),T+=C.move(">")):(w=u.enter("destinationRaw"),T+=C.move(u.safe(s.url,{before:T,after:s.title?" ":")",...C.current()}))),w(),s.title&&(w=u.enter(`title${S}`),T+=C.move(" "+y),T+=C.move(u.safe(s.title,{before:T,after:y,...C.current()})),T+=C.move(y),w()),T+=C.move(")"),A(),T}function imagePeek(){return"!"}imageReference.peek=imageReferencePeek;function imageReference(s,n,u,f){const y=s.referenceType,S=u.enter("imageReference");let A=u.enter("label");const w=u.createTracker(f);let C=w.move("![");const T=u.safe(s.alt,{before:C,after:"]",...w.current()});C+=w.move(T+"]["),A();const R=u.stack;u.stack=[],A=u.enter("reference");const I=u.safe(u.associationId(s),{before:C,after:"]",...w.current()});return A(),u.stack=R,S(),y==="full"||!T||T!==I?C+=w.move(I+"]"):y==="shortcut"?C=C.slice(0,-1):C+=w.move("]"),C}function imageReferencePeek(){return"!"}inlineCode.peek=inlineCodePeek;function inlineCode(s,n,u){let f=s.value||"",y="`",S=-1;for(;new RegExp("(^|[^`])"+y+"([^`]|$)").test(f);)y+="`";for(/[^ \r\n]/.test(f)&&(/^[ \r\n]/.test(f)&&/[ \r\n]$/.test(f)||/^`|`$/.test(f))&&(f=" "+f+" ");++S<u.unsafe.length;){const A=u.unsafe[S],w=u.compilePattern(A);let C;if(A.atBreak)for(;C=w.exec(f);){let T=C.index;f.charCodeAt(T)===10&&f.charCodeAt(T-1)===13&&T--,f=f.slice(0,T)+" "+f.slice(C.index+1)}}return y+f+y}function inlineCodePeek(){return"`"}function formatLinkAsAutolink(s,n){const u=toString(s);return!!(!n.options.resourceLink&&s.url&&!s.title&&s.children&&s.children.length===1&&s.children[0].type==="text"&&(u===s.url||"mailto:"+u===s.url)&&/^[a-z][a-z+.-]+:/i.test(s.url)&&!/[\0- <>\u007F]/.test(s.url))}link.peek=linkPeek;function link(s,n,u,f){const y=checkQuote(u),S=y==='"'?"Quote":"Apostrophe",A=u.createTracker(f);let w,C;if(formatLinkAsAutolink(s,u)){const R=u.stack;u.stack=[],w=u.enter("autolink");let I=A.move("<");return I+=A.move(u.containerPhrasing(s,{before:I,after:">",...A.current()})),I+=A.move(">"),w(),u.stack=R,I}w=u.enter("link"),C=u.enter("label");let T=A.move("[");return T+=A.move(u.containerPhrasing(s,{before:T,after:"](",...A.current()})),T+=A.move("]("),C(),!s.url&&s.title||/[\0- \u007F]/.test(s.url)?(C=u.enter("destinationLiteral"),T+=A.move("<"),T+=A.move(u.safe(s.url,{before:T,after:">",...A.current()})),T+=A.move(">")):(C=u.enter("destinationRaw"),T+=A.move(u.safe(s.url,{before:T,after:s.title?" ":")",...A.current()}))),C(),s.title&&(C=u.enter(`title${S}`),T+=A.move(" "+y),T+=A.move(u.safe(s.title,{before:T,after:y,...A.current()})),T+=A.move(y),C()),T+=A.move(")"),w(),T}function linkPeek(s,n,u){return formatLinkAsAutolink(s,u)?"<":"["}linkReference.peek=linkReferencePeek;function linkReference(s,n,u,f){const y=s.referenceType,S=u.enter("linkReference");let A=u.enter("label");const w=u.createTracker(f);let C=w.move("[");const T=u.containerPhrasing(s,{before:C,after:"]",...w.current()});C+=w.move(T+"]["),A();const R=u.stack;u.stack=[],A=u.enter("reference");const I=u.safe(u.associationId(s),{before:C,after:"]",...w.current()});return A(),u.stack=R,S(),y==="full"||!T||T!==I?C+=w.move(I+"]"):y==="shortcut"?C=C.slice(0,-1):C+=w.move("]"),C}function linkReferencePeek(){return"["}function checkBullet(s){const n=s.options.bullet||"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bullet`, expected `*`, `+`, or `-`");return n}function checkBulletOther(s){const n=checkBullet(s),u=s.options.bulletOther;if(!u)return n==="*"?"-":"*";if(u!=="*"&&u!=="+"&&u!=="-")throw new Error("Cannot serialize items with `"+u+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(u===n)throw new Error("Expected `bullet` (`"+n+"`) and `bulletOther` (`"+u+"`) to be different");return u}function checkBulletOrdered(s){const n=s.options.bulletOrdered||".";if(n!=="."&&n!==")")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOrdered`, expected `.` or `)`");return n}function checkRule(s){const n=s.options.rule||"*";if(n!=="*"&&n!=="-"&&n!=="_")throw new Error("Cannot serialize rules with `"+n+"` for `options.rule`, expected `*`, `-`, or `_`");return n}function list(s,n,u,f){const y=u.enter("list"),S=u.bulletCurrent;let A=s.ordered?checkBulletOrdered(u):checkBullet(u);const w=s.ordered?A==="."?")":".":checkBulletOther(u);let C=n&&u.bulletLastUsed?A===u.bulletLastUsed:!1;if(!s.ordered){const R=s.children?s.children[0]:void 0;if((A==="*"||A==="-")&&R&&(!R.children||!R.children[0])&&u.stack[u.stack.length-1]==="list"&&u.stack[u.stack.length-2]==="listItem"&&u.stack[u.stack.length-3]==="list"&&u.stack[u.stack.length-4]==="listItem"&&u.indexStack[u.indexStack.length-1]===0&&u.indexStack[u.indexStack.length-2]===0&&u.indexStack[u.indexStack.length-3]===0&&(C=!0),checkRule(u)===A&&R){let I=-1;for(;++I<s.children.length;){const N=s.children[I];if(N&&N.type==="listItem"&&N.children&&N.children[0]&&N.children[0].type==="thematicBreak"){C=!0;break}}}}C&&(A=w),u.bulletCurrent=A;const T=u.containerFlow(s,f);return u.bulletLastUsed=A,u.bulletCurrent=S,y(),T}function checkListItemIndent(s){const n=s.options.listItemIndent||"one";if(n!=="tab"&&n!=="one"&&n!=="mixed")throw new Error("Cannot serialize items with `"+n+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return n}function listItem(s,n,u,f){const y=checkListItemIndent(u);let S=u.bulletCurrent||checkBullet(u);n&&n.type==="list"&&n.ordered&&(S=(typeof n.start=="number"&&n.start>-1?n.start:1)+(u.options.incrementListMarker===!1?0:n.children.indexOf(s))+S);let A=S.length+1;(y==="tab"||y==="mixed"&&(n&&n.type==="list"&&n.spread||s.spread))&&(A=Math.ceil(A/4)*4);const w=u.createTracker(f);w.move(S+" ".repeat(A-S.length)),w.shift(A);const C=u.enter("listItem"),T=u.indentLines(u.containerFlow(s,w.current()),R);return C(),T;function R(I,N,L){return N?(L?"":" ".repeat(A))+I:(L?S:S+" ".repeat(A-S.length))+I}}function paragraph(s,n,u,f){const y=u.enter("paragraph"),S=u.enter("phrasing"),A=u.containerPhrasing(s,f);return S(),y(),A}const phrasing=convert(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function root(s,n,u,f){return(s.children.some(function(y){return phrasing(y)})?u.containerPhrasing:u.containerFlow).call(u,s,f)}function checkStrong(s){const n=s.options.strong||"*";if(n!=="*"&&n!=="_")throw new Error("Cannot serialize strong with `"+n+"` for `options.strong`, expected `*`, or `_`");return n}strong.peek=strongPeek;function strong(s,n,u,f){const y=checkStrong(u),S=u.enter("strong"),A=u.createTracker(f),w=A.move(y+y);let C=A.move(u.containerPhrasing(s,{after:y,before:w,...A.current()}));const T=C.charCodeAt(0),R=encodeInfo(f.before.charCodeAt(f.before.length-1),T,y);R.inside&&(C=encodeCharacterReference(T)+C.slice(1));const I=C.charCodeAt(C.length-1),N=encodeInfo(f.after.charCodeAt(0),I,y);N.inside&&(C=C.slice(0,-1)+encodeCharacterReference(I));const L=A.move(y+y);return S(),u.attentionEncodeSurroundingInfo={after:N.outside,before:R.outside},w+C+L}function strongPeek(s,n,u){return u.options.strong||"*"}function text$1(s,n,u,f){return u.safe(s.value,f)}function checkRuleRepetition(s){const n=s.options.ruleRepetition||3;if(n<3)throw new Error("Cannot serialize rules with repetition `"+n+"` for `options.ruleRepetition`, expected `3` or more");return n}function thematicBreak(s,n,u){const f=(checkRule(u)+(u.options.ruleSpaces?" ":"")).repeat(checkRuleRepetition(u));return u.options.ruleSpaces?f.slice(0,-1):f}const handle={blockquote,break:hardBreak,code:code$5,definition,emphasis,hardBreak,heading,html,image,imageReference,inlineCode,link,linkReference,list,listItem,paragraph,root,strong,text:text$1,thematicBreak};function gfmTableFromMarkdown(){return{enter:{table:enterTable,tableData:enterCell,tableHeader:enterCell,tableRow:enterRow},exit:{codeText:exitCodeText,table:exitTable,tableData:exit,tableHeader:exit,tableRow:exit}}}function enterTable(s){const n=s._align;this.enter({type:"table",align:n.map(function(u){return u==="none"?null:u}),children:[]},s),this.data.inTable=!0}function exitTable(s){this.exit(s),this.data.inTable=void 0}function enterRow(s){this.enter({type:"tableRow",children:[]},s)}function exit(s){this.exit(s)}function enterCell(s){this.enter({type:"tableCell",children:[]},s)}function exitCodeText(s){let n=this.resume();this.data.inTable&&(n=n.replace(/\\([\\|])/g,replace));const u=this.stack[this.stack.length-1];u.type,u.value=n,this.exit(s)}function replace(s,n){return n==="|"?n:s}function gfmTableToMarkdown(s){const n=s||{},u=n.tableCellPadding,f=n.tablePipeAlign,y=n.stringLength,S=u?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:N,table:A,tableCell:C,tableRow:w}};function A(L,F,H,z){return T(R(L,H,z),L.align)}function w(L,F,H,z){const U=I(L,H,z),G=T([U]);return G.slice(0,G.indexOf(`
`))}function C(L,F,H,z){const U=H.enter("tableCell"),G=H.enter("phrasing"),Y=H.containerPhrasing(L,{...z,before:S,after:S});return G(),U(),Y}function T(L,F){return markdownTable(L,{align:F,alignDelimiters:f,padding:u,stringLength:y})}function R(L,F,H){const z=L.children;let U=-1;const G=[],Y=F.enter("table");for(;++U<z.length;)G[U]=I(z[U],F,H);return Y(),G}function I(L,F,H){const z=L.children;let U=-1;const G=[],Y=F.enter("tableRow");for(;++U<z.length;)G[U]=C(z[U],L,F,H);return Y(),G}function N(L,F,H){let z=handle.inlineCode(L,F,H);return H.stack.includes("tableCell")&&(z=z.replace(/\|/g,"\\$&")),z}}function gfmTaskListItemFromMarkdown(){return{exit:{taskListCheckValueChecked:exitCheck,taskListCheckValueUnchecked:exitCheck,paragraph:exitParagraphWithTaskListItem}}}function gfmTaskListItemToMarkdown(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:listItemWithTaskListItem}}}function exitCheck(s){const n=this.stack[this.stack.length-2];n.type,n.checked=s.type==="taskListCheckValueChecked"}function exitParagraphWithTaskListItem(s){const n=this.stack[this.stack.length-2];if(n&&n.type==="listItem"&&typeof n.checked=="boolean"){const u=this.stack[this.stack.length-1];u.type;const f=u.children[0];if(f&&f.type==="text"){const y=n.children;let S=-1,A;for(;++S<y.length;){const w=y[S];if(w.type==="paragraph"){A=w;break}}A===u&&(f.value=f.value.slice(1),f.value.length===0?u.children.shift():u.position&&f.position&&typeof f.position.start.offset=="number"&&(f.position.start.column++,f.position.start.offset++,u.position.start=Object.assign({},f.position.start)))}}this.exit(s)}function listItemWithTaskListItem(s,n,u,f){const y=s.children[0],S=typeof s.checked=="boolean"&&y&&y.type==="paragraph",A="["+(s.checked?"x":" ")+"] ",w=u.createTracker(f);S&&w.move(A);let C=handle.listItem(s,n,u,{...f,...w.current()});return S&&(C=C.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,T)),C;function T(R){return R+A}}function gfmFromMarkdown(){return[gfmAutolinkLiteralFromMarkdown(),gfmFootnoteFromMarkdown(),gfmStrikethroughFromMarkdown(),gfmTableFromMarkdown(),gfmTaskListItemFromMarkdown()]}function gfmToMarkdown(s){return{extensions:[gfmAutolinkLiteralToMarkdown(),gfmFootnoteToMarkdown(s),gfmStrikethroughToMarkdown(),gfmTableToMarkdown(s),gfmTaskListItemToMarkdown()]}}function splice(s,n,u,f){const y=s.length;let S=0,A;if(n<0?n=-n>y?0:y+n:n=n>y?y:n,u=u>0?u:0,f.length<1e4)A=Array.from(f),A.unshift(n,u),s.splice(...A);else for(u&&s.splice(n,u);S<f.length;)A=f.slice(S,S+1e4),A.unshift(n,0),s.splice(...A),S+=1e4,n+=1e4}const hasOwnProperty={}.hasOwnProperty;function combineExtensions(s){const n={};let u=-1;for(;++u<s.length;)syntaxExtension(n,s[u]);return n}function syntaxExtension(s,n){let u;for(u in n){const f=(hasOwnProperty.call(s,u)?s[u]:void 0)||(s[u]={}),y=n[u];let S;if(y)for(S in y){hasOwnProperty.call(f,S)||(f[S]=[]);const A=y[S];constructs(f[S],Array.isArray(A)?A:A?[A]:[])}}}function constructs(s,n){let u=-1;const f=[];for(;++u<n.length;)(n[u].add==="after"?s:f).push(n[u]);splice(s,0,0,f)}const wwwPrefix={tokenize:tokenizeWwwPrefix,partial:!0},domain={tokenize:tokenizeDomain,partial:!0},path={tokenize:tokenizePath,partial:!0},trail={tokenize:tokenizeTrail,partial:!0},emailDomainDotTrail={tokenize:tokenizeEmailDomainDotTrail,partial:!0},wwwAutolink={name:"wwwAutolink",tokenize:tokenizeWwwAutolink,previous:previousWww},protocolAutolink={name:"protocolAutolink",tokenize:tokenizeProtocolAutolink,previous:previousProtocol},emailAutolink={name:"emailAutolink",tokenize:tokenizeEmailAutolink,previous:previousEmail},text={};function gfmAutolinkLiteral(){return{text}}let code$4=48;for(;code$4<123;)text[code$4]=emailAutolink,code$4++,code$4===58?code$4=65:code$4===91&&(code$4=97);text[43]=emailAutolink;text[45]=emailAutolink;text[46]=emailAutolink;text[95]=emailAutolink;text[72]=[emailAutolink,protocolAutolink];text[104]=[emailAutolink,protocolAutolink];text[87]=[emailAutolink,wwwAutolink];text[119]=[emailAutolink,wwwAutolink];function tokenizeEmailAutolink(s,n,u){const f=this;let y,S;return A;function A(I){return!gfmAtext(I)||!previousEmail.call(f,f.previous)||previousUnbalanced(f.events)?u(I):(s.enter("literalAutolink"),s.enter("literalAutolinkEmail"),w(I))}function w(I){return gfmAtext(I)?(s.consume(I),w):I===64?(s.consume(I),C):u(I)}function C(I){return I===46?s.check(emailDomainDotTrail,R,T)(I):I===45||I===95||asciiAlphanumeric(I)?(S=!0,s.consume(I),C):R(I)}function T(I){return s.consume(I),y=!0,C}function R(I){return S&&y&&asciiAlpha(f.previous)?(s.exit("literalAutolinkEmail"),s.exit("literalAutolink"),n(I)):u(I)}}function tokenizeWwwAutolink(s,n,u){const f=this;return y;function y(A){return A!==87&&A!==119||!previousWww.call(f,f.previous)||previousUnbalanced(f.events)?u(A):(s.enter("literalAutolink"),s.enter("literalAutolinkWww"),s.check(wwwPrefix,s.attempt(domain,s.attempt(path,S),u),u)(A))}function S(A){return s.exit("literalAutolinkWww"),s.exit("literalAutolink"),n(A)}}function tokenizeProtocolAutolink(s,n,u){const f=this;let y="",S=!1;return A;function A(I){return(I===72||I===104)&&previousProtocol.call(f,f.previous)&&!previousUnbalanced(f.events)?(s.enter("literalAutolink"),s.enter("literalAutolinkHttp"),y+=String.fromCodePoint(I),s.consume(I),w):u(I)}function w(I){if(asciiAlpha(I)&&y.length<5)return y+=String.fromCodePoint(I),s.consume(I),w;if(I===58){const N=y.toLowerCase();if(N==="http"||N==="https")return s.consume(I),C}return u(I)}function C(I){return I===47?(s.consume(I),S?T:(S=!0,C)):u(I)}function T(I){return I===null||asciiControl(I)||markdownLineEndingOrSpace(I)||unicodeWhitespace(I)||unicodePunctuation(I)?u(I):s.attempt(domain,s.attempt(path,R),u)(I)}function R(I){return s.exit("literalAutolinkHttp"),s.exit("literalAutolink"),n(I)}}function tokenizeWwwPrefix(s,n,u){let f=0;return y;function y(A){return(A===87||A===119)&&f<3?(f++,s.consume(A),y):A===46&&f===3?(s.consume(A),S):u(A)}function S(A){return A===null?u(A):n(A)}}function tokenizeDomain(s,n,u){let f,y,S;return A;function A(T){return T===46||T===95?s.check(trail,C,w)(T):T===null||markdownLineEndingOrSpace(T)||unicodeWhitespace(T)||T!==45&&unicodePunctuation(T)?C(T):(S=!0,s.consume(T),A)}function w(T){return T===95?f=!0:(y=f,f=void 0),s.consume(T),A}function C(T){return y||f||!S?u(T):n(T)}}function tokenizePath(s,n){let u=0,f=0;return y;function y(A){return A===40?(u++,s.consume(A),y):A===41&&f<u?S(A):A===33||A===34||A===38||A===39||A===41||A===42||A===44||A===46||A===58||A===59||A===60||A===63||A===93||A===95||A===126?s.check(trail,n,S)(A):A===null||markdownLineEndingOrSpace(A)||unicodeWhitespace(A)?n(A):(s.consume(A),y)}function S(A){return A===41&&f++,s.consume(A),y}}function tokenizeTrail(s,n,u){return f;function f(w){return w===33||w===34||w===39||w===41||w===42||w===44||w===46||w===58||w===59||w===63||w===95||w===126?(s.consume(w),f):w===38?(s.consume(w),S):w===93?(s.consume(w),y):w===60||w===null||markdownLineEndingOrSpace(w)||unicodeWhitespace(w)?n(w):u(w)}function y(w){return w===null||w===40||w===91||markdownLineEndingOrSpace(w)||unicodeWhitespace(w)?n(w):f(w)}function S(w){return asciiAlpha(w)?A(w):u(w)}function A(w){return w===59?(s.consume(w),f):asciiAlpha(w)?(s.consume(w),A):u(w)}}function tokenizeEmailDomainDotTrail(s,n,u){return f;function f(S){return s.consume(S),y}function y(S){return asciiAlphanumeric(S)?u(S):n(S)}}function previousWww(s){return s===null||s===40||s===42||s===95||s===91||s===93||s===126||markdownLineEndingOrSpace(s)}function previousProtocol(s){return!asciiAlpha(s)}function previousEmail(s){return!(s===47||gfmAtext(s))}function gfmAtext(s){return s===43||s===45||s===46||s===95||asciiAlphanumeric(s)}function previousUnbalanced(s){let n=s.length,u=!1;for(;n--;){const f=s[n][1];if((f.type==="labelLink"||f.type==="labelImage")&&!f._balanced){u=!0;break}if(f._gfmAutolinkLiteralWalkedInto){u=!1;break}}return s.length>0&&!u&&(s[s.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),u}function resolveAll(s,n,u){const f=[];let y=-1;for(;++y<s.length;){const S=s[y].resolveAll;S&&!f.includes(S)&&(n=S(n,u),f.push(S))}return n}function factorySpace(s,n,u,f){const y=f?f-1:Number.POSITIVE_INFINITY;let S=0;return A;function A(C){return markdownSpace(C)?(s.enter(u),w(C)):n(C)}function w(C){return markdownSpace(C)&&S++<y?(s.consume(C),w):(s.exit(u),n(C))}}const blankLine={partial:!0,tokenize:tokenizeBlankLine};function tokenizeBlankLine(s,n,u){return f;function f(S){return markdownSpace(S)?factorySpace(s,y,"linePrefix")(S):y(S)}function y(S){return S===null||markdownLineEnding(S)?n(S):u(S)}}const indent={tokenize:tokenizeIndent,partial:!0};function gfmFootnote(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:tokenizeDefinitionStart,continuation:{tokenize:tokenizeDefinitionContinuation},exit:gfmFootnoteDefinitionEnd}},text:{91:{name:"gfmFootnoteCall",tokenize:tokenizeGfmFootnoteCall},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:tokenizePotentialGfmFootnoteCall,resolveTo:resolveToPotentialGfmFootnoteCall}}}}function tokenizePotentialGfmFootnoteCall(s,n,u){const f=this;let y=f.events.length;const S=f.parser.gfmFootnotes||(f.parser.gfmFootnotes=[]);let A;for(;y--;){const C=f.events[y][1];if(C.type==="labelImage"){A=C;break}if(C.type==="gfmFootnoteCall"||C.type==="labelLink"||C.type==="label"||C.type==="image"||C.type==="link")break}return w;function w(C){if(!A||!A._balanced)return u(C);const T=normalizeIdentifier(f.sliceSerialize({start:A.end,end:f.now()}));return T.codePointAt(0)!==94||!S.includes(T.slice(1))?u(C):(s.enter("gfmFootnoteCallLabelMarker"),s.consume(C),s.exit("gfmFootnoteCallLabelMarker"),n(C))}}function resolveToPotentialGfmFootnoteCall(s,n){let u=s.length;for(;u--;)if(s[u][1].type==="labelImage"&&s[u][0]==="enter"){s[u][1];break}s[u+1][1].type="data",s[u+3][1].type="gfmFootnoteCallLabelMarker";const f={type:"gfmFootnoteCall",start:Object.assign({},s[u+3][1].start),end:Object.assign({},s[s.length-1][1].end)},y={type:"gfmFootnoteCallMarker",start:Object.assign({},s[u+3][1].end),end:Object.assign({},s[u+3][1].end)};y.end.column++,y.end.offset++,y.end._bufferIndex++;const S={type:"gfmFootnoteCallString",start:Object.assign({},y.end),end:Object.assign({},s[s.length-1][1].start)},A={type:"chunkString",contentType:"string",start:Object.assign({},S.start),end:Object.assign({},S.end)},w=[s[u+1],s[u+2],["enter",f,n],s[u+3],s[u+4],["enter",y,n],["exit",y,n],["enter",S,n],["enter",A,n],["exit",A,n],["exit",S,n],s[s.length-2],s[s.length-1],["exit",f,n]];return s.splice(u,s.length-u+1,...w),s}function tokenizeGfmFootnoteCall(s,n,u){const f=this,y=f.parser.gfmFootnotes||(f.parser.gfmFootnotes=[]);let S=0,A;return w;function w(I){return s.enter("gfmFootnoteCall"),s.enter("gfmFootnoteCallLabelMarker"),s.consume(I),s.exit("gfmFootnoteCallLabelMarker"),C}function C(I){return I!==94?u(I):(s.enter("gfmFootnoteCallMarker"),s.consume(I),s.exit("gfmFootnoteCallMarker"),s.enter("gfmFootnoteCallString"),s.enter("chunkString").contentType="string",T)}function T(I){if(S>999||I===93&&!A||I===null||I===91||markdownLineEndingOrSpace(I))return u(I);if(I===93){s.exit("chunkString");const N=s.exit("gfmFootnoteCallString");return y.includes(normalizeIdentifier(f.sliceSerialize(N)))?(s.enter("gfmFootnoteCallLabelMarker"),s.consume(I),s.exit("gfmFootnoteCallLabelMarker"),s.exit("gfmFootnoteCall"),n):u(I)}return markdownLineEndingOrSpace(I)||(A=!0),S++,s.consume(I),I===92?R:T}function R(I){return I===91||I===92||I===93?(s.consume(I),S++,T):T(I)}}function tokenizeDefinitionStart(s,n,u){const f=this,y=f.parser.gfmFootnotes||(f.parser.gfmFootnotes=[]);let S,A=0,w;return C;function C(F){return s.enter("gfmFootnoteDefinition")._container=!0,s.enter("gfmFootnoteDefinitionLabel"),s.enter("gfmFootnoteDefinitionLabelMarker"),s.consume(F),s.exit("gfmFootnoteDefinitionLabelMarker"),T}function T(F){return F===94?(s.enter("gfmFootnoteDefinitionMarker"),s.consume(F),s.exit("gfmFootnoteDefinitionMarker"),s.enter("gfmFootnoteDefinitionLabelString"),s.enter("chunkString").contentType="string",R):u(F)}function R(F){if(A>999||F===93&&!w||F===null||F===91||markdownLineEndingOrSpace(F))return u(F);if(F===93){s.exit("chunkString");const H=s.exit("gfmFootnoteDefinitionLabelString");return S=normalizeIdentifier(f.sliceSerialize(H)),s.enter("gfmFootnoteDefinitionLabelMarker"),s.consume(F),s.exit("gfmFootnoteDefinitionLabelMarker"),s.exit("gfmFootnoteDefinitionLabel"),N}return markdownLineEndingOrSpace(F)||(w=!0),A++,s.consume(F),F===92?I:R}function I(F){return F===91||F===92||F===93?(s.consume(F),A++,R):R(F)}function N(F){return F===58?(s.enter("definitionMarker"),s.consume(F),s.exit("definitionMarker"),y.includes(S)||y.push(S),factorySpace(s,L,"gfmFootnoteDefinitionWhitespace")):u(F)}function L(F){return n(F)}}function tokenizeDefinitionContinuation(s,n,u){return s.check(blankLine,n,s.attempt(indent,n,u))}function gfmFootnoteDefinitionEnd(s){s.exit("gfmFootnoteDefinition")}function tokenizeIndent(s,n,u){const f=this;return factorySpace(s,y,"gfmFootnoteDefinitionIndent",5);function y(S){const A=f.events[f.events.length-1];return A&&A[1].type==="gfmFootnoteDefinitionIndent"&&A[2].sliceSerialize(A[1],!0).length===4?n(S):u(S)}}function gfmStrikethrough(s){let n=(s||{}).singleTilde;const u={name:"strikethrough",tokenize:y,resolveAll:f};return n==null&&(n=!0),{text:{126:u},insideSpan:{null:[u]},attentionMarkers:{null:[126]}};function f(S,A){let w=-1;for(;++w<S.length;)if(S[w][0]==="enter"&&S[w][1].type==="strikethroughSequenceTemporary"&&S[w][1]._close){let C=w;for(;C--;)if(S[C][0]==="exit"&&S[C][1].type==="strikethroughSequenceTemporary"&&S[C][1]._open&&S[w][1].end.offset-S[w][1].start.offset===S[C][1].end.offset-S[C][1].start.offset){S[w][1].type="strikethroughSequence",S[C][1].type="strikethroughSequence";const T={type:"strikethrough",start:Object.assign({},S[C][1].start),end:Object.assign({},S[w][1].end)},R={type:"strikethroughText",start:Object.assign({},S[C][1].end),end:Object.assign({},S[w][1].start)},I=[["enter",T,A],["enter",S[C][1],A],["exit",S[C][1],A],["enter",R,A]],N=A.parser.constructs.insideSpan.null;N&&splice(I,I.length,0,resolveAll(N,S.slice(C+1,w),A)),splice(I,I.length,0,[["exit",R,A],["enter",S[w][1],A],["exit",S[w][1],A],["exit",T,A]]),splice(S,C-1,w-C+3,I),w=C+I.length-2;break}}for(w=-1;++w<S.length;)S[w][1].type==="strikethroughSequenceTemporary"&&(S[w][1].type="data");return S}function y(S,A,w){const C=this.previous,T=this.events;let R=0;return I;function I(L){return C===126&&T[T.length-1][1].type!=="characterEscape"?w(L):(S.enter("strikethroughSequenceTemporary"),N(L))}function N(L){const F=classifyCharacter(C);if(L===126)return R>1?w(L):(S.consume(L),R++,N);if(R<2&&!n)return w(L);const H=S.exit("strikethroughSequenceTemporary"),z=classifyCharacter(L);return H._open=!z||z===2&&!!F,H._close=!F||F===2&&!!z,A(L)}}}class EditMap{constructor(){this.map=[]}add(n,u,f){addImplementation(this,n,u,f)}consume(n){if(this.map.sort(function(S,A){return S[0]-A[0]}),this.map.length===0)return;let u=this.map.length;const f=[];for(;u>0;)u-=1,f.push(n.slice(this.map[u][0]+this.map[u][1]),this.map[u][2]),n.length=this.map[u][0];f.push(n.slice()),n.length=0;let y=f.pop();for(;y;){for(const S of y)n.push(S);y=f.pop()}this.map.length=0}}function addImplementation(s,n,u,f){let y=0;if(!(u===0&&f.length===0)){for(;y<s.map.length;){if(s.map[y][0]===n){s.map[y][1]+=u,s.map[y][2].push(...f);return}y+=1}s.map.push([n,u,f])}}function gfmTableAlign(s,n){let u=!1;const f=[];for(;n<s.length;){const y=s[n];if(u){if(y[0]==="enter")y[1].type==="tableContent"&&f.push(s[n+1][1].type==="tableDelimiterMarker"?"left":"none");else if(y[1].type==="tableContent"){if(s[n-1][1].type==="tableDelimiterMarker"){const S=f.length-1;f[S]=f[S]==="left"?"center":"right"}}else if(y[1].type==="tableDelimiterRow")break}else y[0]==="enter"&&y[1].type==="tableDelimiterRow"&&(u=!0);n+=1}return f}function gfmTable(){return{flow:{null:{name:"table",tokenize:tokenizeTable,resolveAll:resolveTable}}}}function tokenizeTable(s,n,u){const f=this;let y=0,S=0,A;return w;function w(ne){let ge=f.events.length-1;for(;ge>-1;){const Ie=f.events[ge][1].type;if(Ie==="lineEnding"||Ie==="linePrefix")ge--;else break}const Ee=ge>-1?f.events[ge][1].type:null,we=Ee==="tableHead"||Ee==="tableRow"?J:C;return we===J&&f.parser.lazy[f.now().line]?u(ne):we(ne)}function C(ne){return s.enter("tableHead"),s.enter("tableRow"),T(ne)}function T(ne){return ne===124||(A=!0,S+=1),R(ne)}function R(ne){return ne===null?u(ne):markdownLineEnding(ne)?S>1?(S=0,f.interrupt=!0,s.exit("tableRow"),s.enter("lineEnding"),s.consume(ne),s.exit("lineEnding"),L):u(ne):markdownSpace(ne)?factorySpace(s,R,"whitespace")(ne):(S+=1,A&&(A=!1,y+=1),ne===124?(s.enter("tableCellDivider"),s.consume(ne),s.exit("tableCellDivider"),A=!0,R):(s.enter("data"),I(ne)))}function I(ne){return ne===null||ne===124||markdownLineEndingOrSpace(ne)?(s.exit("data"),R(ne)):(s.consume(ne),ne===92?N:I)}function N(ne){return ne===92||ne===124?(s.consume(ne),I):I(ne)}function L(ne){return f.interrupt=!1,f.parser.lazy[f.now().line]?u(ne):(s.enter("tableDelimiterRow"),A=!1,markdownSpace(ne)?factorySpace(s,F,"linePrefix",f.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(ne):F(ne))}function F(ne){return ne===45||ne===58?z(ne):ne===124?(A=!0,s.enter("tableCellDivider"),s.consume(ne),s.exit("tableCellDivider"),H):Z(ne)}function H(ne){return markdownSpace(ne)?factorySpace(s,z,"whitespace")(ne):z(ne)}function z(ne){return ne===58?(S+=1,A=!0,s.enter("tableDelimiterMarker"),s.consume(ne),s.exit("tableDelimiterMarker"),U):ne===45?(S+=1,U(ne)):ne===null||markdownLineEnding(ne)?K(ne):Z(ne)}function U(ne){return ne===45?(s.enter("tableDelimiterFiller"),G(ne)):Z(ne)}function G(ne){return ne===45?(s.consume(ne),G):ne===58?(A=!0,s.exit("tableDelimiterFiller"),s.enter("tableDelimiterMarker"),s.consume(ne),s.exit("tableDelimiterMarker"),Y):(s.exit("tableDelimiterFiller"),Y(ne))}function Y(ne){return markdownSpace(ne)?factorySpace(s,K,"whitespace")(ne):K(ne)}function K(ne){return ne===124?F(ne):ne===null||markdownLineEnding(ne)?!A||y!==S?Z(ne):(s.exit("tableDelimiterRow"),s.exit("tableHead"),n(ne)):Z(ne)}function Z(ne){return u(ne)}function J(ne){return s.enter("tableRow"),te(ne)}function te(ne){return ne===124?(s.enter("tableCellDivider"),s.consume(ne),s.exit("tableCellDivider"),te):ne===null||markdownLineEnding(ne)?(s.exit("tableRow"),n(ne)):markdownSpace(ne)?factorySpace(s,te,"whitespace")(ne):(s.enter("data"),de(ne))}function de(ne){return ne===null||ne===124||markdownLineEndingOrSpace(ne)?(s.exit("data"),te(ne)):(s.consume(ne),ne===92?se:de)}function se(ne){return ne===92||ne===124?(s.consume(ne),de):de(ne)}}function resolveTable(s,n){let u=-1,f=!0,y=0,S=[0,0,0,0],A=[0,0,0,0],w=!1,C=0,T,R,I;const N=new EditMap;for(;++u<s.length;){const L=s[u],F=L[1];L[0]==="enter"?F.type==="tableHead"?(w=!1,C!==0&&(flushTableEnd(N,n,C,T,R),R=void 0,C=0),T={type:"table",start:Object.assign({},F.start),end:Object.assign({},F.end)},N.add(u,0,[["enter",T,n]])):F.type==="tableRow"||F.type==="tableDelimiterRow"?(f=!0,I=void 0,S=[0,0,0,0],A=[0,u+1,0,0],w&&(w=!1,R={type:"tableBody",start:Object.assign({},F.start),end:Object.assign({},F.end)},N.add(u,0,[["enter",R,n]])),y=F.type==="tableDelimiterRow"?2:R?3:1):y&&(F.type==="data"||F.type==="tableDelimiterMarker"||F.type==="tableDelimiterFiller")?(f=!1,A[2]===0&&(S[1]!==0&&(A[0]=A[1],I=flushCell(N,n,S,y,void 0,I),S=[0,0,0,0]),A[2]=u)):F.type==="tableCellDivider"&&(f?f=!1:(S[1]!==0&&(A[0]=A[1],I=flushCell(N,n,S,y,void 0,I)),S=A,A=[S[1],u,0,0])):F.type==="tableHead"?(w=!0,C=u):F.type==="tableRow"||F.type==="tableDelimiterRow"?(C=u,S[1]!==0?(A[0]=A[1],I=flushCell(N,n,S,y,u,I)):A[1]!==0&&(I=flushCell(N,n,A,y,u,I)),y=0):y&&(F.type==="data"||F.type==="tableDelimiterMarker"||F.type==="tableDelimiterFiller")&&(A[3]=u)}for(C!==0&&flushTableEnd(N,n,C,T,R),N.consume(n.events),u=-1;++u<n.events.length;){const L=n.events[u];L[0]==="enter"&&L[1].type==="table"&&(L[1]._align=gfmTableAlign(n.events,u))}return s}function flushCell(s,n,u,f,y,S){const A=f===1?"tableHeader":f===2?"tableDelimiter":"tableData",w="tableContent";u[0]!==0&&(S.end=Object.assign({},getPoint(n.events,u[0])),s.add(u[0],0,[["exit",S,n]]));const C=getPoint(n.events,u[1]);if(S={type:A,start:Object.assign({},C),end:Object.assign({},C)},s.add(u[1],0,[["enter",S,n]]),u[2]!==0){const T=getPoint(n.events,u[2]),R=getPoint(n.events,u[3]),I={type:w,start:Object.assign({},T),end:Object.assign({},R)};if(s.add(u[2],0,[["enter",I,n]]),f!==2){const N=n.events[u[2]],L=n.events[u[3]];if(N[1].end=Object.assign({},L[1].end),N[1].type="chunkText",N[1].contentType="text",u[3]>u[2]+1){const F=u[2]+1,H=u[3]-u[2]-1;s.add(F,H,[])}}s.add(u[3]+1,0,[["exit",I,n]])}return y!==void 0&&(S.end=Object.assign({},getPoint(n.events,y)),s.add(y,0,[["exit",S,n]]),S=void 0),S}function flushTableEnd(s,n,u,f,y){const S=[],A=getPoint(n.events,u);y&&(y.end=Object.assign({},A),S.push(["exit",y,n])),f.end=Object.assign({},A),S.push(["exit",f,n]),s.add(u+1,0,S)}function getPoint(s,n){const u=s[n],f=u[0]==="enter"?"start":"end";return u[1][f]}const tasklistCheck={name:"tasklistCheck",tokenize:tokenizeTasklistCheck};function gfmTaskListItem(){return{text:{91:tasklistCheck}}}function tokenizeTasklistCheck(s,n,u){const f=this;return y;function y(C){return f.previous!==null||!f._gfmTasklistFirstContentOfListItem?u(C):(s.enter("taskListCheck"),s.enter("taskListCheckMarker"),s.consume(C),s.exit("taskListCheckMarker"),S)}function S(C){return markdownLineEndingOrSpace(C)?(s.enter("taskListCheckValueUnchecked"),s.consume(C),s.exit("taskListCheckValueUnchecked"),A):C===88||C===120?(s.enter("taskListCheckValueChecked"),s.consume(C),s.exit("taskListCheckValueChecked"),A):u(C)}function A(C){return C===93?(s.enter("taskListCheckMarker"),s.consume(C),s.exit("taskListCheckMarker"),s.exit("taskListCheck"),w):u(C)}function w(C){return markdownLineEnding(C)?n(C):markdownSpace(C)?s.check({tokenize:spaceThenNonSpace},n,u)(C):u(C)}}function spaceThenNonSpace(s,n,u){return factorySpace(s,f,"whitespace");function f(y){return y===null?u(y):n(y)}}function gfm(s){return combineExtensions([gfmAutolinkLiteral(),gfmFootnote(),gfmStrikethrough(s),gfmTable(),gfmTaskListItem()])}const emptyOptions={};function remarkGfm(s){const n=this,u=s||emptyOptions,f=n.data(),y=f.micromarkExtensions||(f.micromarkExtensions=[]),S=f.fromMarkdownExtensions||(f.fromMarkdownExtensions=[]),A=f.toMarkdownExtensions||(f.toMarkdownExtensions=[]);y.push(gfm(u)),S.push(gfmFromMarkdown()),A.push(gfmToMarkdown(u))}const mergeClasses=(...s)=>s.filter((n,u,f)=>!!n&&n.trim()!==""&&f.indexOf(n)===u).join(" ").trim(),toKebabCase=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),toCamelCase=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,u,f)=>f?f.toUpperCase():u.toLowerCase()),toPascalCase$1=s=>{const n=toCamelCase(s);return n.charAt(0).toUpperCase()+n.slice(1)};var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const hasA11yProp=s=>{for(const n in s)if(n.startsWith("aria-")||n==="role"||n==="title")return!0;return!1},Icon=reactExports.forwardRef(({color:s="currentColor",size:n=24,strokeWidth:u=2,absoluteStrokeWidth:f,className:y="",children:S,iconNode:A,...w},C)=>reactExports.createElement("svg",{ref:C,...defaultAttributes,width:n,height:n,stroke:s,strokeWidth:f?Number(u)*24/Number(n):u,className:mergeClasses("lucide",y),...!S&&!hasA11yProp(w)&&{"aria-hidden":"true"},...w},[...A.map(([T,R])=>reactExports.createElement(T,R)),...Array.isArray(S)?S:[S]])),createLucideIcon=(s,n)=>{const u=reactExports.forwardRef(({className:f,...y},S)=>reactExports.createElement(Icon,{ref:S,iconNode:n,className:mergeClasses(`lucide-${toKebabCase(toPascalCase$1(s))}`,`lucide-${s}`,f),...y}));return u.displayName=toPascalCase$1(s),u},__iconNode$8=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Clock$1=createLucideIcon("clock",__iconNode$8),__iconNode$7=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],Maximize=createLucideIcon("maximize",__iconNode$7),__iconNode$6=[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]],Minimize=createLucideIcon("minimize",__iconNode$6),__iconNode$5=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],Palette=createLucideIcon("palette",__iconNode$5),__iconNode$4=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],Paperclip=createLucideIcon("paperclip",__iconNode$4),__iconNode$3=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Plus=createLucideIcon("plus",__iconNode$3),__iconNode$2=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Square=createLucideIcon("square",__iconNode$2),__iconNode$1=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],User=createLucideIcon("user",__iconNode$1),__iconNode=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],X$1=createLucideIcon("x",__iconNode);function getDefaultExportFromCjs(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function getAugmentedNamespace(s){if(Object.prototype.hasOwnProperty.call(s,"__esModule"))return s;var n=s.default;if(typeof n=="function"){var u=function f(){var y=!1;try{y=this instanceof f}catch{}return y?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};u.prototype=n.prototype}else u={};return Object.defineProperty(u,"__esModule",{value:!0}),Object.keys(s).forEach(function(f){var y=Object.getOwnPropertyDescriptor(s,f);Object.defineProperty(u,f,y.get?y:{enumerable:!0,get:function(){return s[f]}})}),u}function commonjsRequire(s){throw new Error('Could not dynamically require "'+s+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);var hasRequiredPdf;function requirePdf(){return hasRequiredPdf||(hasRequiredPdf=1,(function(module,exports$1){(function(s,n){module.exports=s.pdfjsLib=n()})(globalThis,()=>(()=>{var __webpack_modules__=[,((s,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.VerbosityLevel=n.Util=n.UnknownErrorException=n.UnexpectedResponseException=n.TextRenderingMode=n.RenderingIntentFlag=n.PromiseCapability=n.PermissionFlag=n.PasswordResponses=n.PasswordException=n.PageActionEventType=n.OPS=n.MissingPDFException=n.MAX_IMAGE_SIZE_TO_CACHE=n.LINE_FACTOR=n.LINE_DESCENT_FACTOR=n.InvalidPDFException=n.ImageKind=n.IDENTITY_MATRIX=n.FormatError=n.FeatureTest=n.FONT_IDENTITY_MATRIX=n.DocumentActionEventType=n.CMapCompressionType=n.BaseException=n.BASELINE_FACTOR=n.AnnotationType=n.AnnotationReplyType=n.AnnotationPrefix=n.AnnotationMode=n.AnnotationFlag=n.AnnotationFieldFlag=n.AnnotationEditorType=n.AnnotationEditorPrefix=n.AnnotationEditorParamsType=n.AnnotationBorderStyleType=n.AnnotationActionEventType=n.AbortException=void 0,n.assert=Se,n.bytesToString=xe,n.createValidAbsoluteUrl=ae,n.getModificationDate=Qe,n.getUuid=Gt,n.getVerbosityLevel=Be,n.info=Me,n.isArrayBuffer=lt,n.isArrayEqual=We,n.isNodeJS=void 0,n.normalizeUnicode=jt,n.objectFromMap=Ye,n.objectSize=He,n.setVerbosityLevel=Ie,n.shadow=be,n.string32=je,n.stringToBytes=Ne,n.stringToPDFString=Et,n.stringToUTF8String=qe,n.unreachable=Te,n.utf8StringToString=Le,n.warn=Re;const u=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");n.isNodeJS=u;const f=[1,0,0,1,0,0];n.IDENTITY_MATRIX=f;const y=[.001,0,0,.001,0,0];n.FONT_IDENTITY_MATRIX=y;const S=1e7;n.MAX_IMAGE_SIZE_TO_CACHE=S;const A=1.35;n.LINE_FACTOR=A;const w=.35;n.LINE_DESCENT_FACTOR=w;const C=w/A;n.BASELINE_FACTOR=C;const T={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};n.RenderingIntentFlag=T;const R={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};n.AnnotationMode=R;const I="pdfjs_internal_editor_";n.AnnotationEditorPrefix=I;const N={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};n.AnnotationEditorType=N;const L={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};n.AnnotationEditorParamsType=L;const F={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};n.PermissionFlag=F;const H={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};n.TextRenderingMode=H;const z={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};n.ImageKind=z;const U={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};n.AnnotationType=U;const G={GROUP:"Group",REPLY:"R"};n.AnnotationReplyType=G;const Y={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};n.AnnotationFlag=Y;const K={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};n.AnnotationFieldFlag=K;const Z={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};n.AnnotationBorderStyleType=Z;const J={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};n.AnnotationActionEventType=J;const te={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};n.DocumentActionEventType=te;const de={O:"PageOpen",C:"PageClose"};n.PageActionEventType=de;const se={ERRORS:0,WARNINGS:1,INFOS:5};n.VerbosityLevel=se;const ne={NONE:0,BINARY:1};n.CMapCompressionType=ne;const ge={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};n.OPS=ge;const Ee={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};n.PasswordResponses=Ee;let we=se.WARNINGS;function Ie(ct){Number.isInteger(ct)&&(we=ct)}function Be(){return we}function Me(ct){we>=se.INFOS&&console.log(`Info: ${ct}`)}function Re(ct){we>=se.WARNINGS&&console.log(`Warning: ${ct}`)}function Te(ct){throw new Error(ct)}function Se(ct,st){ct||Te(st)}function oe(ct){switch(ct?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function ae(ct,st=null,nt=null){if(!ct)return null;try{if(nt&&typeof ct=="string"&&(nt.addDefaultProtocol&&ct.startsWith("www.")&&ct.match(/\./g)?.length>=2&&(ct=`http://${ct}`),nt.tryConvertEncoding))try{ct=qe(ct)}catch{}const At=st?new URL(ct,st):new URL(ct);if(oe(At))return At}catch{}return null}function be(ct,st,nt,At=!1){return Object.defineProperty(ct,st,{value:nt,enumerable:!At,configurable:!0,writable:!1}),nt}const he=(function(){function ct(st,nt){this.constructor===ct&&Te("Cannot initialize BaseException."),this.message=st,this.name=nt}return ct.prototype=new Error,ct.constructor=ct,ct})();n.BaseException=he;class ue extends he{constructor(st,nt){super(st,"PasswordException"),this.code=nt}}n.PasswordException=ue;class ye extends he{constructor(st,nt){super(st,"UnknownErrorException"),this.details=nt}}n.UnknownErrorException=ye;class ce extends he{constructor(st){super(st,"InvalidPDFException")}}n.InvalidPDFException=ce;class _e extends he{constructor(st){super(st,"MissingPDFException")}}n.MissingPDFException=_e;class ke extends he{constructor(st,nt){super(st,"UnexpectedResponseException"),this.status=nt}}n.UnexpectedResponseException=ke;class Pe extends he{constructor(st){super(st,"FormatError")}}n.FormatError=Pe;class $e extends he{constructor(st){super(st,"AbortException")}}n.AbortException=$e;function xe(ct){(typeof ct!="object"||ct?.length===void 0)&&Te("Invalid argument for bytesToString");const st=ct.length,nt=8192;if(st<nt)return String.fromCharCode.apply(null,ct);const At=[];for(let Yt=0;Yt<st;Yt+=nt){const ht=Math.min(Yt+nt,st),Tt=ct.subarray(Yt,ht);At.push(String.fromCharCode.apply(null,Tt))}return At.join("")}function Ne(ct){typeof ct!="string"&&Te("Invalid argument for stringToBytes");const st=ct.length,nt=new Uint8Array(st);for(let At=0;At<st;++At)nt[At]=ct.charCodeAt(At)&255;return nt}function je(ct){return String.fromCharCode(ct>>24&255,ct>>16&255,ct>>8&255,ct&255)}function He(ct){return Object.keys(ct).length}function Ye(ct){const st=Object.create(null);for(const[nt,At]of ct)st[nt]=At;return st}function Je(){const ct=new Uint8Array(4);return ct[0]=1,new Uint32Array(ct.buffer,0,1)[0]===1}function ot(){try{return new Function(""),!0}catch{return!1}}class ze{static get isLittleEndian(){return be(this,"isLittleEndian",Je())}static get isEvalSupported(){return be(this,"isEvalSupported",ot())}static get isOffscreenCanvasSupported(){return be(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?be(this,"platform",{isWin:!1,isMac:!1}):be(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){return be(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}n.FeatureTest=ze;const pt=[...Array(256).keys()].map(ct=>ct.toString(16).padStart(2,"0"));class yt{static makeHexColor(st,nt,At){return`#${pt[st]}${pt[nt]}${pt[At]}`}static scaleMinMax(st,nt){let At;st[0]?(st[0]<0&&(At=nt[0],nt[0]=nt[1],nt[1]=At),nt[0]*=st[0],nt[1]*=st[0],st[3]<0&&(At=nt[2],nt[2]=nt[3],nt[3]=At),nt[2]*=st[3],nt[3]*=st[3]):(At=nt[0],nt[0]=nt[2],nt[2]=At,At=nt[1],nt[1]=nt[3],nt[3]=At,st[1]<0&&(At=nt[2],nt[2]=nt[3],nt[3]=At),nt[2]*=st[1],nt[3]*=st[1],st[2]<0&&(At=nt[0],nt[0]=nt[1],nt[1]=At),nt[0]*=st[2],nt[1]*=st[2]),nt[0]+=st[4],nt[1]+=st[4],nt[2]+=st[5],nt[3]+=st[5]}static transform(st,nt){return[st[0]*nt[0]+st[2]*nt[1],st[1]*nt[0]+st[3]*nt[1],st[0]*nt[2]+st[2]*nt[3],st[1]*nt[2]+st[3]*nt[3],st[0]*nt[4]+st[2]*nt[5]+st[4],st[1]*nt[4]+st[3]*nt[5]+st[5]]}static applyTransform(st,nt){const At=st[0]*nt[0]+st[1]*nt[2]+nt[4],Yt=st[0]*nt[1]+st[1]*nt[3]+nt[5];return[At,Yt]}static applyInverseTransform(st,nt){const At=nt[0]*nt[3]-nt[1]*nt[2],Yt=(st[0]*nt[3]-st[1]*nt[2]+nt[2]*nt[5]-nt[4]*nt[3])/At,ht=(-st[0]*nt[1]+st[1]*nt[0]+nt[4]*nt[1]-nt[5]*nt[0])/At;return[Yt,ht]}static getAxialAlignedBoundingBox(st,nt){const At=this.applyTransform(st,nt),Yt=this.applyTransform(st.slice(2,4),nt),ht=this.applyTransform([st[0],st[3]],nt),Tt=this.applyTransform([st[2],st[1]],nt);return[Math.min(At[0],Yt[0],ht[0],Tt[0]),Math.min(At[1],Yt[1],ht[1],Tt[1]),Math.max(At[0],Yt[0],ht[0],Tt[0]),Math.max(At[1],Yt[1],ht[1],Tt[1])]}static inverseTransform(st){const nt=st[0]*st[3]-st[1]*st[2];return[st[3]/nt,-st[1]/nt,-st[2]/nt,st[0]/nt,(st[2]*st[5]-st[4]*st[3])/nt,(st[4]*st[1]-st[5]*st[0])/nt]}static singularValueDecompose2dScale(st){const nt=[st[0],st[2],st[1],st[3]],At=st[0]*nt[0]+st[1]*nt[2],Yt=st[0]*nt[1]+st[1]*nt[3],ht=st[2]*nt[0]+st[3]*nt[2],Tt=st[2]*nt[1]+st[3]*nt[3],Kt=(At+Tt)/2,_n=Math.sqrt((At+Tt)**2-4*(At*Tt-ht*Yt))/2,Ht=Kt+_n||1,Ot=Kt-_n||1;return[Math.sqrt(Ht),Math.sqrt(Ot)]}static normalizeRect(st){const nt=st.slice(0);return st[0]>st[2]&&(nt[0]=st[2],nt[2]=st[0]),st[1]>st[3]&&(nt[1]=st[3],nt[3]=st[1]),nt}static intersect(st,nt){const At=Math.max(Math.min(st[0],st[2]),Math.min(nt[0],nt[2])),Yt=Math.min(Math.max(st[0],st[2]),Math.max(nt[0],nt[2]));if(At>Yt)return null;const ht=Math.max(Math.min(st[1],st[3]),Math.min(nt[1],nt[3])),Tt=Math.min(Math.max(st[1],st[3]),Math.max(nt[1],nt[3]));return ht>Tt?null:[At,ht,Yt,Tt]}static bezierBoundingBox(st,nt,At,Yt,ht,Tt,Kt,_n){const Ht=[],Ot=[[],[]];let cn,Mn,In,On,rr,Ar,hr,Yr;for(let ir=0;ir<2;++ir){if(ir===0?(Mn=6*st-12*At+6*ht,cn=-3*st+9*At-9*ht+3*Kt,In=3*At-3*st):(Mn=6*nt-12*Yt+6*Tt,cn=-3*nt+9*Yt-9*Tt+3*_n,In=3*Yt-3*nt),Math.abs(cn)<1e-12){if(Math.abs(Mn)<1e-12)continue;On=-In/Mn,0<On&&On<1&&Ht.push(On);continue}hr=Mn*Mn-4*In*cn,Yr=Math.sqrt(hr),!(hr<0)&&(rr=(-Mn+Yr)/(2*cn),0<rr&&rr<1&&Ht.push(rr),Ar=(-Mn-Yr)/(2*cn),0<Ar&&Ar<1&&Ht.push(Ar))}let $r=Ht.length,wr;const mr=$r;for(;$r--;)On=Ht[$r],wr=1-On,Ot[0][$r]=wr*wr*wr*st+3*wr*wr*On*At+3*wr*On*On*ht+On*On*On*Kt,Ot[1][$r]=wr*wr*wr*nt+3*wr*wr*On*Yt+3*wr*On*On*Tt+On*On*On*_n;return Ot[0][mr]=st,Ot[1][mr]=nt,Ot[0][mr+1]=Kt,Ot[1][mr+1]=_n,Ot[0].length=Ot[1].length=mr+2,[Math.min(...Ot[0]),Math.min(...Ot[1]),Math.max(...Ot[0]),Math.max(...Ot[1])]}}n.Util=yt;const ut=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Et(ct){if(ct[0]>=""){let nt;if(ct[0]===""&&ct[1]===""?nt="utf-16be":ct[0]===""&&ct[1]===""?nt="utf-16le":ct[0]===""&&ct[1]===""&&ct[2]===""&&(nt="utf-8"),nt)try{const At=new TextDecoder(nt,{fatal:!0}),Yt=Ne(ct);return At.decode(Yt)}catch(At){Re(`stringToPDFString: "${At}".`)}}const st=[];for(let nt=0,At=ct.length;nt<At;nt++){const Yt=ut[ct.charCodeAt(nt)];st.push(Yt?String.fromCharCode(Yt):ct.charAt(nt))}return st.join("")}function qe(ct){return decodeURIComponent(escape(ct))}function Le(ct){return unescape(encodeURIComponent(ct))}function lt(ct){return typeof ct=="object"&&ct?.byteLength!==void 0}function We(ct,st){if(ct.length!==st.length)return!1;for(let nt=0,At=ct.length;nt<At;nt++)if(ct[nt]!==st[nt])return!1;return!0}function Qe(ct=new Date){return[ct.getUTCFullYear().toString(),(ct.getUTCMonth()+1).toString().padStart(2,"0"),ct.getUTCDate().toString().padStart(2,"0"),ct.getUTCHours().toString().padStart(2,"0"),ct.getUTCMinutes().toString().padStart(2,"0"),ct.getUTCSeconds().toString().padStart(2,"0")].join("")}class at{#e=!1;constructor(){this.promise=new Promise((st,nt)=>{this.resolve=At=>{this.#e=!0,st(At)},this.reject=At=>{this.#e=!0,nt(At)}})}get settled(){return this.#e}}n.PromiseCapability=at;let St=null,Ct=null;function jt(ct){return St||(St=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Ct=new Map([["","t"]])),ct.replaceAll(St,(st,nt,At)=>nt?nt.normalize("NFKC"):Ct.get(At))}function Gt(){if(typeof crypto<"u"&&typeof crypto?.randomUUID=="function")return crypto.randomUUID();const ct=new Uint8Array(32);if(typeof crypto<"u"&&typeof crypto?.getRandomValues=="function")crypto.getRandomValues(ct);else for(let st=0;st<32;st++)ct[st]=Math.floor(Math.random()*255);return xe(ct)}const Ft="pdfjs_internal_id_";n.AnnotationPrefix=Ft}),((__unused_webpack_module,exports$1,__w_pdfjs_require__)=>{Object.defineProperty(exports$1,"__esModule",{value:!0}),exports$1.RenderTask=exports$1.PDFWorkerUtil=exports$1.PDFWorker=exports$1.PDFPageProxy=exports$1.PDFDocumentProxy=exports$1.PDFDocumentLoadingTask=exports$1.PDFDataRangeTransport=exports$1.LoopbackPort=exports$1.DefaultStandardFontDataFactory=exports$1.DefaultFilterFactory=exports$1.DefaultCanvasFactory=exports$1.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports$1,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports$1.build=void 0,exports$1.getDocument=getDocument,exports$1.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports$1.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports$1.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports$1.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports$1.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(s){if(typeof s=="string"||s instanceof URL?s={url:s}:(0,_util.isArrayBuffer)(s)&&(s={data:s}),typeof s!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!s.url&&!s.data&&!s.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const n=new PDFDocumentLoadingTask,{docId:u}=n,f=s.url?getUrlProp(s.url):null,y=s.data?getDataProp(s.data):null,S=s.httpHeaders||null,A=s.withCredentials===!0,w=s.password??null,C=s.range instanceof PDFDataRangeTransport?s.range:null,T=Number.isInteger(s.rangeChunkSize)&&s.rangeChunkSize>0?s.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let R=s.worker instanceof PDFWorker?s.worker:null;const I=s.verbosity,N=typeof s.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(s.docBaseUrl)?s.docBaseUrl:null,L=typeof s.cMapUrl=="string"?s.cMapUrl:null,F=s.cMapPacked!==!1,H=s.CMapReaderFactory||DefaultCMapReaderFactory,z=typeof s.standardFontDataUrl=="string"?s.standardFontDataUrl:null,U=s.StandardFontDataFactory||DefaultStandardFontDataFactory,G=s.stopAtErrors!==!0,Y=Number.isInteger(s.maxImageSize)&&s.maxImageSize>-1?s.maxImageSize:-1,K=s.isEvalSupported!==!1,Z=typeof s.isOffscreenCanvasSupported=="boolean"?s.isOffscreenCanvasSupported:!_util.isNodeJS,J=Number.isInteger(s.canvasMaxAreaInBytes)?s.canvasMaxAreaInBytes:-1,te=typeof s.disableFontFace=="boolean"?s.disableFontFace:_util.isNodeJS,de=s.fontExtraProperties===!0,se=s.enableXfa===!0,ne=s.ownerDocument||globalThis.document,ge=s.disableRange===!0,Ee=s.disableStream===!0,we=s.disableAutoFetch===!0,Ie=s.pdfBug===!0,Be=C?C.length:s.length??NaN,Me=typeof s.useSystemFonts=="boolean"?s.useSystemFonts:!_util.isNodeJS&&!te,Re=typeof s.useWorkerFetch=="boolean"?s.useWorkerFetch:H===_display_utils.DOMCMapReaderFactory&&U===_display_utils.DOMStandardFontDataFactory&&L&&z&&(0,_display_utils.isValidFetchUrl)(L,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(z,document.baseURI),Te=s.canvasFactory||new DefaultCanvasFactory({ownerDocument:ne}),Se=s.filterFactory||new DefaultFilterFactory({docId:u,ownerDocument:ne}),oe=null;(0,_util.setVerbosityLevel)(I);const ae={canvasFactory:Te,filterFactory:Se};if(Re||(ae.cMapReaderFactory=new H({baseUrl:L,isCompressed:F}),ae.standardFontDataFactory=new U({baseUrl:z})),!R){const ue={verbosity:I,port:_worker_options.GlobalWorkerOptions.workerPort};R=ue.port?PDFWorker.fromPort(ue):new PDFWorker(ue),n._worker=R}const be={docId:u,apiVersion:"3.11.174",data:y,password:w,disableAutoFetch:we,rangeChunkSize:T,length:Be,docBaseUrl:N,enableXfa:se,evaluatorOptions:{maxImageSize:Y,disableFontFace:te,ignoreErrors:G,isEvalSupported:K,isOffscreenCanvasSupported:Z,canvasMaxAreaInBytes:J,fontExtraProperties:de,useSystemFonts:Me,cMapUrl:Re?L:null,standardFontDataUrl:Re?z:null}},he={ignoreErrors:G,isEvalSupported:K,disableFontFace:te,fontExtraProperties:de,enableXfa:se,ownerDocument:ne,disableAutoFetch:we,pdfBug:Ie,styleElement:oe};return R.promise.then(function(){if(n.destroyed)throw new Error("Loading aborted");const ue=_fetchDocument(R,be),ye=new Promise(function(ce){let _e;C?_e=new _transport_stream.PDFDataTransportStream({length:Be,initialData:C.initialData,progressiveDone:C.progressiveDone,contentDispositionFilename:C.contentDispositionFilename,disableRange:ge,disableStream:Ee},C):y||(_e=(ke=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(ke):(0,_display_utils.isValidFetchUrl)(ke.url)?new _displayFetch_stream.PDFFetchStream(ke):new _displayNetwork.PDFNetworkStream(ke))({url:f,length:Be,httpHeaders:S,withCredentials:A,rangeChunkSize:T,disableRange:ge,disableStream:Ee})),ce(_e)});return Promise.all([ue,ye]).then(function([ce,_e]){if(n.destroyed)throw new Error("Loading aborted");const ke=new _message_handler.MessageHandler(u,ce,R.port),Pe=new WorkerTransport(ke,n,_e,he,ae);n._transport=Pe,ke.send("Ready",null)})}).catch(n._capability.reject),n}async function _fetchDocument(s,n){if(s.destroyed)throw new Error("Worker was destroyed");const u=await s.messageHandler.sendWithPromise("GetDocRequest",n,n.data?[n.data.buffer]:null);if(s.destroyed)throw new Error("Worker was destroyed");return u}function getUrlProp(s){if(s instanceof URL)return s.href;try{return new URL(s,window.location).href}catch{if(_util.isNodeJS&&typeof s=="string")return s}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(s){if(_util.isNodeJS&&typeof Buffer<"u"&&s instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength)return s;if(typeof s=="string")return(0,_util.stringToBytes)(s);if(typeof s=="object"&&!isNaN(s?.length)||(0,_util.isArrayBuffer)(s))return new Uint8Array(s);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}class PDFDocumentLoadingTask{static#e=0;constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${PDFDocumentLoadingTask.#e++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(n){throw this._worker?.port&&delete this._worker._pendingDestroy,n}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}exports$1.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(n,u,f=!1,y=null){this.length=n,this.initialData=u,this.progressiveDone=f,this.contentDispositionFilename=y,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(n){this._rangeListeners.push(n)}addProgressListener(n){this._progressListeners.push(n)}addProgressiveReadListener(n){this._progressiveReadListeners.push(n)}addProgressiveDoneListener(n){this._progressiveDoneListeners.push(n)}onDataRange(n,u){for(const f of this._rangeListeners)f(n,u)}onDataProgress(n,u){this._readyCapability.promise.then(()=>{for(const f of this._progressListeners)f(n,u)})}onDataProgressiveRead(n){this._readyCapability.promise.then(()=>{for(const u of this._progressiveReadListeners)u(n)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const n of this._progressiveDoneListeners)n()})}transportReady(){this._readyCapability.resolve()}requestDataRange(n,u){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports$1.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(n,u){this._pdfInfo=n,this._transport=u,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(f=>{if(!f)return f;const y=[];for(const S in f)y.push(...f[S]);return y}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(n){return this._transport.getPage(n)}getPageIndex(n){return this._transport.getPageIndex(n)}getDestinations(){return this._transport.getDestinations()}getDestination(n){return this._transport.getDestination(n)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(n=!1){return this._transport.startCleanup(n||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports$1.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{#e=null;#t=!1;constructor(n,u,f,y=!1){this._pageIndex=n,this._pageInfo=u,this._transport=f,this._stats=y?new _display_utils.StatTimer:null,this._pdfBug=y,this.commonObjs=f.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:n,rotation:u=this.rotate,offsetX:f=0,offsetY:y=0,dontFlip:S=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:n,rotation:u,offsetX:f,offsetY:y,dontFlip:S})}getAnnotations({intent:n="display"}={}){const u=this._transport.getRenderingIntent(n);return this._transport.getAnnotations(this._pageIndex,u.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:n,viewport:u,intent:f="display",annotationMode:y=_util.AnnotationMode.ENABLE,transform:S=null,background:A=null,optionalContentConfigPromise:w=null,annotationCanvasMap:C=null,pageColors:T=null,printAnnotationStorage:R=null}){this._stats?.time("Overall");const I=this._transport.getRenderingIntent(f,y,R);this.#t=!1,this.#r(),w||(w=this._transport.getOptionalContentConfig());let N=this._intentStates.get(I.cacheKey);N||(N=Object.create(null),this._intentStates.set(I.cacheKey,N)),N.streamReaderCancelTimeout&&(clearTimeout(N.streamReaderCancelTimeout),N.streamReaderCancelTimeout=null);const L=!!(I.renderingIntent&_util.RenderingIntentFlag.PRINT);N.displayReadyCapability||(N.displayReadyCapability=new _util.PromiseCapability,N.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(I));const F=U=>{N.renderTasks.delete(H),(this._maybeCleanupAfterRender||L)&&(this.#t=!0),this.#n(!L),U?(H.capability.reject(U),this._abortOperatorList({intentState:N,reason:U instanceof Error?U:new Error(U)})):H.capability.resolve(),this._stats?.timeEnd("Rendering"),this._stats?.timeEnd("Overall")},H=new InternalRenderTask({callback:F,params:{canvasContext:n,viewport:u,transform:S,background:A},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:C,operatorList:N.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!L,pdfBug:this._pdfBug,pageColors:T});(N.renderTasks||=new Set).add(H);const z=H.task;return Promise.all([N.displayReadyCapability.promise,w]).then(([U,G])=>{if(this.destroyed){F();return}this._stats?.time("Rendering"),H.initializeGraphics({transparency:U,optionalContentConfig:G}),H.operatorListChanged()}).catch(F),z}getOperatorList({intent:n="display",annotationMode:u=_util.AnnotationMode.ENABLE,printAnnotationStorage:f=null}={}){function y(){A.operatorList.lastChunk&&(A.opListReadCapability.resolve(A.operatorList),A.renderTasks.delete(w))}const S=this._transport.getRenderingIntent(n,u,f,!0);let A=this._intentStates.get(S.cacheKey);A||(A=Object.create(null),this._intentStates.set(S.cacheKey,A));let w;return A.opListReadCapability||(w=Object.create(null),w.operatorListChanged=y,A.opListReadCapability=new _util.PromiseCapability,(A.renderTasks||=new Set).add(w),A.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(S)),A.opListReadCapability.promise}streamTextContent({includeMarkedContent:n=!1,disableNormalization:u=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:n===!0,disableNormalization:u===!0},{highWaterMark:100,size(f){return f.items.length}})}getTextContent(n={}){if(this._transport._htmlForXfa)return this.getXfa().then(f=>_xfa_text.XfaText.textContent(f));const u=this.streamTextContent(n);return new Promise(function(f,y){function S(){A.read().then(function({value:C,done:T}){if(T){f(w);return}Object.assign(w.styles,C.styles),w.items.push(...C.items),S()},y)}const A=u.getReader(),w={items:[],styles:Object.create(null)};S()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const n=[];for(const u of this._intentStates.values())if(this._abortOperatorList({intentState:u,reason:new Error("Page was destroyed."),force:!0}),!u.opListReadCapability)for(const f of u.renderTasks)n.push(f.completed),f.cancel();return this.objs.clear(),this.#t=!1,this.#r(),Promise.all(n)}cleanup(n=!1){this.#t=!0;const u=this.#n(!1);return n&&u&&(this._stats&&=new _display_utils.StatTimer),u}#n(n=!1){if(this.#r(),!this.#t||this.destroyed)return!1;if(n)return this.#e=setTimeout(()=>{this.#e=null,this.#n(!1)},DELAYED_CLEANUP_TIMEOUT),!1;for(const{renderTasks:u,operatorList:f}of this._intentStates.values())if(u.size>0||!f.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}#r(){this.#e&&(clearTimeout(this.#e),this.#e=null)}_startRenderPage(n,u){const f=this._intentStates.get(u);f&&(this._stats?.timeEnd("Page Request"),f.displayReadyCapability?.resolve(n))}_renderPageChunk(n,u){for(let f=0,y=n.length;f<y;f++)u.operatorList.fnArray.push(n.fnArray[f]),u.operatorList.argsArray.push(n.argsArray[f]);u.operatorList.lastChunk=n.lastChunk,u.operatorList.separateAnnots=n.separateAnnots;for(const f of u.renderTasks)f.operatorListChanged();n.lastChunk&&this.#n(!0)}_pumpOperatorList({renderingIntent:n,cacheKey:u,annotationStorageSerializable:f}){const{map:y,transfers:S}=f,A=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:n,cacheKey:u,annotationStorage:y},S).getReader(),w=this._intentStates.get(u);w.streamReader=A;const C=()=>{A.read().then(({value:T,done:R})=>{if(R){w.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(T,w),C())},T=>{if(w.streamReader=null,!this._transport.destroyed){if(w.operatorList){w.operatorList.lastChunk=!0;for(const R of w.renderTasks)R.operatorListChanged();this.#n(!0)}if(w.displayReadyCapability)w.displayReadyCapability.reject(T);else if(w.opListReadCapability)w.opListReadCapability.reject(T);else throw T}})};C()}_abortOperatorList({intentState:n,reason:u,force:f=!1}){if(n.streamReader){if(n.streamReaderCancelTimeout&&(clearTimeout(n.streamReaderCancelTimeout),n.streamReaderCancelTimeout=null),!f){if(n.renderTasks.size>0)return;if(u instanceof _display_utils.RenderingCancelledException){let y=RENDERING_CANCELLED_TIMEOUT;u.extraDelay>0&&u.extraDelay<1e3&&(y+=u.extraDelay),n.streamReaderCancelTimeout=setTimeout(()=>{n.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:n,reason:u,force:!0})},y);return}}if(n.streamReader.cancel(new _util.AbortException(u.message)).catch(()=>{}),n.streamReader=null,!this._transport.destroyed){for(const[y,S]of this._intentStates)if(S===n){this._intentStates.delete(y);break}this.cleanup()}}}get stats(){return this._stats}}exports$1.PDFPageProxy=PDFPageProxy;class LoopbackPort{#e=new Set;#t=Promise.resolve();postMessage(n,u){const f={data:structuredClone(n,u?{transfer:u}:null)};this.#t.then(()=>{for(const y of this.#e)y.call(this,f)})}addEventListener(n,u){this.#e.add(u)}removeEventListener(n,u){this.#e.delete(u)}terminate(){this.#e.clear()}}exports$1.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports$1.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const s=document?.currentScript?.src;s&&(PDFWorkerUtil.fallbackWorkerSrc=s.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(s,n){let u;try{if(u=new URL(s),!u.origin||u.origin==="null")return!1}catch{return!1}const f=new URL(n,u);return u.origin===f.origin},PDFWorkerUtil.createCDNWrapper=function(s){const n=`importScripts("${s}");`;return URL.createObjectURL(new Blob([n]))}}class PDFWorker{static#workerPorts;constructor({name:s=null,port:n=null,verbosity:u=(0,_util.getVerbosityLevel)()}={}){if(this.name=s,this.destroyed=!1,this.verbosity=u,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,n){if(PDFWorker.#workerPorts?.has(n))throw new Error("Cannot use more than one PDFWorker per port.");(PDFWorker.#workerPorts||=new WeakMap).set(n,this),this._initializeFromPort(n);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(s){this._port=s,this._messageHandler=new _message_handler.MessageHandler("main","worker",s),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:s}=PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,s)||(s=PDFWorkerUtil.createCDNWrapper(new URL(s,window.location).href));const n=new Worker(s),u=new _message_handler.MessageHandler("main","worker",n),f=()=>{n.removeEventListener("error",y),u.destroy(),n.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},y=()=>{this._webWorker||f()};n.addEventListener("error",y),u.on("test",A=>{if(n.removeEventListener("error",y),this.destroyed){f();return}A?(this._messageHandler=u,this._port=n,this._webWorker=n,this._readyCapability.resolve(),u.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),u.destroy(),n.terminate())}),u.on("ready",A=>{if(n.removeEventListener("error",y),this.destroyed){f();return}try{S()}catch{this._setupFakeWorker()}});const S=()=>{const A=new Uint8Array;u.send("test",A,[A.buffer])};S();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then(s=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const n=new LoopbackPort;this._port=n;const u=`fake${PDFWorkerUtil.fakeWorkerId++}`,f=new _message_handler.MessageHandler(u+"_worker",u,n);s.setup(f,n);const y=new _message_handler.MessageHandler(u,u+"_worker",n);this._messageHandler=y,this._readyCapability.resolve(),y.send("configure",{verbosity:this.verbosity})}).catch(s=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${s.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),PDFWorker.#workerPorts?.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(s){if(!s?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");const n=this.#workerPorts?.get(s.port);if(n){if(n._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return n}return new PDFWorker(s)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}exports$1.PDFWorker=PDFWorker;class WorkerTransport{#e=new Map;#t=new Map;#n=new Map;#r=null;constructor(n,u,f,y,S){this.messageHandler=n,this.loadingTask=u,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:y.ownerDocument,styleElement:y.styleElement}),this._params=y,this.canvasFactory=S.canvasFactory,this.filterFactory=S.filterFactory,this.cMapReaderFactory=S.cMapReaderFactory,this.standardFontDataFactory=S.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=f,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}#o(n,u=null){const f=this.#e.get(n);if(f)return f;const y=this.messageHandler.sendWithPromise(n,u);return this.#e.set(n,y),y}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(n,u=_util.AnnotationMode.ENABLE,f=null,y=!1){let S=_util.RenderingIntentFlag.DISPLAY,A=_annotation_storage.SerializableEmpty;switch(n){case"any":S=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":S=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${n}`)}switch(u){case _util.AnnotationMode.DISABLE:S+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:S+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:S+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,A=(S&_util.RenderingIntentFlag.PRINT&&f instanceof _annotation_storage.PrintAnnotationStorage?f:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${u}`)}return y&&(S+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:S,cacheKey:`${S}_${A.hash}`,annotationStorageSerializable:A}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,this.#r?.reject(new Error("Worker was destroyed during onPassword callback"));const n=[];for(const f of this.#t.values())n.push(f._destroy());this.#t.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const u=this.messageHandler.sendWithPromise("Terminate",null);return n.push(u),Promise.all(n).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),this._networkStream?.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:n,loadingTask:u}=this;n.on("GetReader",(f,y)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=S=>{this._lastProgress={loaded:S.loaded,total:S.total}},y.onPull=()=>{this._fullReader.read().then(function({value:S,done:A}){if(A){y.close();return}(0,_util.assert)(S instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),y.enqueue(new Uint8Array(S),1,[S])}).catch(S=>{y.error(S)})},y.onCancel=S=>{this._fullReader.cancel(S),y.ready.catch(A=>{if(!this.destroyed)throw A})}}),n.on("ReaderHeadersReady",f=>{const y=new _util.PromiseCapability,S=this._fullReader;return S.headersReady.then(()=>{(!S.isStreamingSupported||!S.isRangeSupported)&&(this._lastProgress&&u.onProgress?.(this._lastProgress),S.onProgress=A=>{u.onProgress?.({loaded:A.loaded,total:A.total})}),y.resolve({isStreamingSupported:S.isStreamingSupported,isRangeSupported:S.isRangeSupported,contentLength:S.contentLength})},y.reject),y.promise}),n.on("GetRangeReader",(f,y)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const S=this._networkStream.getRangeReader(f.begin,f.end);if(!S){y.close();return}y.onPull=()=>{S.read().then(function({value:A,done:w}){if(w){y.close();return}(0,_util.assert)(A instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),y.enqueue(new Uint8Array(A),1,[A])}).catch(A=>{y.error(A)})},y.onCancel=A=>{S.cancel(A),y.ready.catch(w=>{if(!this.destroyed)throw w})}}),n.on("GetDoc",({pdfInfo:f})=>{this._numPages=f.numPages,this._htmlForXfa=f.htmlForXfa,delete f.htmlForXfa,u._capability.resolve(new PDFDocumentProxy(f,this))}),n.on("DocException",function(f){let y;switch(f.name){case"PasswordException":y=new _util.PasswordException(f.message,f.code);break;case"InvalidPDFException":y=new _util.InvalidPDFException(f.message);break;case"MissingPDFException":y=new _util.MissingPDFException(f.message);break;case"UnexpectedResponseException":y=new _util.UnexpectedResponseException(f.message,f.status);break;case"UnknownErrorException":y=new _util.UnknownErrorException(f.message,f.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}u._capability.reject(y)}),n.on("PasswordRequest",f=>{if(this.#r=new _util.PromiseCapability,u.onPassword){const y=S=>{S instanceof Error?this.#r.reject(S):this.#r.resolve({password:S})};try{u.onPassword(y,f.code)}catch(S){this.#r.reject(S)}}else this.#r.reject(new _util.PasswordException(f.message,f.code));return this.#r.promise}),n.on("DataLoaded",f=>{u.onProgress?.({loaded:f.length,total:f.length}),this.downloadInfoCapability.resolve(f)}),n.on("StartRenderPage",f=>{this.destroyed||this.#t.get(f.pageIndex)._startRenderPage(f.transparency,f.cacheKey)}),n.on("commonobj",([f,y,S])=>{if(!this.destroyed&&!this.commonObjs.has(f))switch(y){case"Font":const A=this._params;if("error"in S){const T=S.error;(0,_util.warn)(`Error during font loading: ${T}`),this.commonObjs.resolve(f,T);break}const w=A.pdfBug&&globalThis.FontInspector?.enabled?(T,R)=>globalThis.FontInspector.fontAdded(T,R):null,C=new _font_loader.FontFaceObject(S,{isEvalSupported:A.isEvalSupported,disableFontFace:A.disableFontFace,ignoreErrors:A.ignoreErrors,inspectFont:w});this.fontLoader.bind(C).catch(T=>n.sendWithPromise("FontFallback",{id:f})).finally(()=>{!A.fontExtraProperties&&C.data&&(C.data=null),this.commonObjs.resolve(f,C)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(f,S);break;default:throw new Error(`Got unknown common object type ${y}`)}}),n.on("obj",([f,y,S,A])=>{if(this.destroyed)return;const w=this.#t.get(y);if(!w.objs.has(f))switch(S){case"Image":if(w.objs.resolve(f,A),A){let C;if(A.bitmap){const{width:T,height:R}=A;C=T*R*4}else C=A.data?.length||0;C>_util.MAX_IMAGE_SIZE_TO_CACHE&&(w._maybeCleanupAfterRender=!0)}break;case"Pattern":w.objs.resolve(f,A);break;default:throw new Error(`Got unknown object type ${S}`)}}),n.on("DocProgress",f=>{this.destroyed||u.onProgress?.({loaded:f.loaded,total:f.total})}),n.on("FetchBuiltInCMap",f=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(f):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),n.on("FetchStandardFontData",f=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(f):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:n,transfers:u}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:n,filename:this._fullReader?.filename??null},u).finally(()=>{this.annotationStorage.resetModified()})}getPage(n){if(!Number.isInteger(n)||n<=0||n>this._numPages)return Promise.reject(new Error("Invalid page request."));const u=n-1,f=this.#n.get(u);if(f)return f;const y=this.messageHandler.sendWithPromise("GetPage",{pageIndex:u}).then(S=>{if(this.destroyed)throw new Error("Transport destroyed");const A=new PDFPageProxy(u,S,this,this._params.pdfBug);return this.#t.set(u,A),A});return this.#n.set(u,y),y}getPageIndex(n){return typeof n!="object"||n===null||!Number.isInteger(n.num)||n.num<0||!Number.isInteger(n.gen)||n.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:n.num,gen:n.gen})}getAnnotations(n,u){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:n,intent:u})}getFieldObjects(){return this.#o("GetFieldObjects")}hasJSActions(){return this.#o("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(n){return typeof n!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:n})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#o("GetDocJSActions")}getPageJSActions(n){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:n})}getStructTree(n){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:n})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(n=>new _optional_content_config.OptionalContentConfig(n))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const n="GetMetadata",u=this.#e.get(n);if(u)return u;const f=this.messageHandler.sendWithPromise(n,null).then(y=>({info:y[0],metadata:y[1]?new _metadata.Metadata(y[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#e.set(n,f),f}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(n=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const u of this.#t.values())if(!u.cleanup())throw new Error(`startCleanup: Page ${u.pageNumber} is currently rendering.`);this.commonObjs.clear(),n||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:n,enableXfa:u}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:n,enableXfa:u})}}class PDFObjects{#e=Object.create(null);#t(n){return this.#e[n]||={capability:new _util.PromiseCapability,data:null}}get(n,u=null){if(u){const y=this.#t(n);return y.capability.promise.then(()=>u(y.data)),null}const f=this.#e[n];if(!f?.capability.settled)throw new Error(`Requesting object that isn't resolved yet ${n}.`);return f.data}has(n){return this.#e[n]?.capability.settled||!1}resolve(n,u=null){const f=this.#t(n);f.data=u,f.capability.resolve()}clear(){for(const n in this.#e){const{data:u}=this.#e[n];u?.bitmap?.close()}this.#e=Object.create(null)}}class RenderTask{#e=null;constructor(n){this.#e=n,this.onContinue=null}get promise(){return this.#e.capability.promise}cancel(n=0){this.#e.cancel(null,n)}get separateAnnots(){const{separateAnnots:n}=this.#e.operatorList;if(!n)return!1;const{annotationCanvasMap:u}=this.#e;return n.form||n.canvas&&u?.size>0}}exports$1.RenderTask=RenderTask;class InternalRenderTask{static#e=new WeakSet;constructor({callback:n,params:u,objs:f,commonObjs:y,annotationCanvasMap:S,operatorList:A,pageIndex:w,canvasFactory:C,filterFactory:T,useRequestAnimationFrame:R=!1,pdfBug:I=!1,pageColors:N=null}){this.callback=n,this.params=u,this.objs=f,this.commonObjs=y,this.annotationCanvasMap=S,this.operatorListIdx=null,this.operatorList=A,this._pageIndex=w,this.canvasFactory=C,this.filterFactory=T,this._pdfBug=I,this.pageColors=N,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=R===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=u.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:n=!1,optionalContentConfig:u}){if(this.cancelled)return;if(this._canvas){if(InternalRenderTask.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");InternalRenderTask.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:f,viewport:y,transform:S,background:A}=this.params;this.gfx=new _canvas.CanvasGraphics(f,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:u},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:S,viewport:y,transparency:n,background:A}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(n=null,u=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),InternalRenderTask.#e.delete(this._canvas),this.callback(n||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,u))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),InternalRenderTask.#e.delete(this._canvas),this.callback())))}}const version="3.11.174";exports$1.version=version;const build="ce8716743";exports$1.build=build}),((s,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.SerializableEmpty=n.PrintAnnotationStorage=n.AnnotationStorage=void 0;var f=u(1),y=u(4),S=u(8);const A=Object.freeze({map:null,hash:"",transfers:void 0});n.SerializableEmpty=A;class w{#e=!1;#t=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(R,I){const N=this.#t.get(R);return N===void 0?I:Object.assign(I,N)}getRawValue(R){return this.#t.get(R)}remove(R){if(this.#t.delete(R),this.#t.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const I of this.#t.values())if(I instanceof y.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(R,I){const N=this.#t.get(R);let L=!1;if(N!==void 0)for(const[F,H]of Object.entries(I))N[F]!==H&&(L=!0,N[F]=H);else L=!0,this.#t.set(R,I);L&&this.#n(),I instanceof y.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(I.constructor._type)}has(R){return this.#t.has(R)}getAll(){return this.#t.size>0?(0,f.objectFromMap)(this.#t):null}setAll(R){for(const[I,N]of Object.entries(R))this.setValue(I,N)}get size(){return this.#t.size}#n(){this.#e||(this.#e=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new C(this)}get serializable(){if(this.#t.size===0)return A;const R=new Map,I=new S.MurmurHash3_64,N=[],L=Object.create(null);let F=!1;for(const[H,z]of this.#t){const U=z instanceof y.AnnotationEditor?z.serialize(!1,L):z;U&&(R.set(H,U),I.update(`${H}:${JSON.stringify(U)}`),F||=!!U.bitmap)}if(F)for(const H of R.values())H.bitmap&&N.push(H.bitmap);return R.size>0?{map:R,hash:I.hexdigest(),transfers:N}:A}}n.AnnotationStorage=w;class C extends w{#e;constructor(R){super();const{map:I,hash:N,transfers:L}=R.serializable,F=structuredClone(I,L?{transfer:L}:null);this.#e={map:F,hash:N,transfers:L}}get print(){(0,f.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}}n.PrintAnnotationStorage=C}),((s,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.AnnotationEditor=void 0;var f=u(5),y=u(1),S=u(6);class A{#e="";#t=!1;#n=null;#r=null;#o=null;#s=!1;#a=null;#l=this.focusin.bind(this);#c=this.focusout.bind(this);#i=!1;#f=!1;#d=!1;_initialOptions=Object.create(null);_uiManager=null;_focusEventsAllowed=!0;_l10nPromise=null;#h=!1;#p=A._zIndex++;static _borderLineWidth=-1;static _colorManager=new f.ColorManager;static _zIndex=1;static SMALL_EDITOR_SIZE=0;constructor(T){this.constructor===A&&(0,y.unreachable)("Cannot initialize AnnotationEditor."),this.parent=T.parent,this.id=T.id,this.width=this.height=null,this.pageIndex=T.parent.pageIndex,this.name=T.name,this.div=null,this._uiManager=T.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=T.isCentered,this._structTreeParentId=null;const{rotation:R,rawDims:{pageWidth:I,pageHeight:N,pageX:L,pageY:F}}=this.parent.viewport;this.rotation=R,this.pageRotation=(360+R-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[I,N],this.pageTranslation=[L,F];const[H,z]=this.parentDimensions;this.x=T.x/H,this.y=T.y/z,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,y.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(T){const R=new w({id:T.parent.getNextId(),parent:T.parent,uiManager:T._uiManager});R.annotationElementId=T.annotationElementId,R.deleted=!0,R._uiManager.addToAnnotationStorage(R)}static initialize(T,R=null){if(A._l10nPromise||=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(N=>[N,T.get(N)])),R?.strings)for(const N of R.strings)A._l10nPromise.set(N,T.get(N));if(A._borderLineWidth!==-1)return;const I=getComputedStyle(document.documentElement);A._borderLineWidth=parseFloat(I.getPropertyValue("--outline-width"))||0}static updateDefaultParams(T,R){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(T){return!1}static paste(T,R){(0,y.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#h}set _isDraggable(T){this.#h=T,this.div?.classList.toggle("draggable",T)}center(){const[T,R]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*R/(T*2),this.y+=this.width*T/(R*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*R/(T*2),this.y-=this.width*T/(R*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(T){this._uiManager.addCommands(T)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#p}setParent(T){T!==null&&(this.pageIndex=T.pageIndex,this.pageDimensions=T.pageDimensions),this.parent=T}focusin(T){this._focusEventsAllowed&&(this.#i?this.#i=!1:this.parent.setSelected(this))}focusout(T){!this._focusEventsAllowed||!this.isAttachedToDOM||T.relatedTarget?.closest(`#${this.id}`)||(T.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(T,R,I,N){const[L,F]=this.parentDimensions;[I,N]=this.screenToPageTranslation(I,N),this.x=(T+I)/L,this.y=(R+N)/F,this.fixAndSetPosition()}#y([T,R],I,N){[I,N]=this.screenToPageTranslation(I,N),this.x+=I/T,this.y+=N/R,this.fixAndSetPosition()}translate(T,R){this.#y(this.parentDimensions,T,R)}translateInPage(T,R){this.#y(this.pageDimensions,T,R),this.div.scrollIntoView({block:"nearest"})}drag(T,R){const[I,N]=this.parentDimensions;if(this.x+=T/I,this.y+=R/N,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:U,y:G}=this.div.getBoundingClientRect();this.parent.findNewParent(this,U,G)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:L,y:F}=this;const[H,z]=this.#g();L+=H,F+=z,this.div.style.left=`${(100*L).toFixed(2)}%`,this.div.style.top=`${(100*F).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}#g(){const[T,R]=this.parentDimensions,{_borderLineWidth:I}=A,N=I/T,L=I/R;switch(this.rotation){case 90:return[-N,L];case 180:return[N,L];case 270:return[N,-L];default:return[-N,-L]}}fixAndSetPosition(){const[T,R]=this.pageDimensions;let{x:I,y:N,width:L,height:F}=this;switch(L*=T,F*=R,I*=T,N*=R,this.rotation){case 0:I=Math.max(0,Math.min(T-L,I)),N=Math.max(0,Math.min(R-F,N));break;case 90:I=Math.max(0,Math.min(T-F,I)),N=Math.min(R,Math.max(L,N));break;case 180:I=Math.min(T,Math.max(L,I)),N=Math.min(R,Math.max(F,N));break;case 270:I=Math.min(T,Math.max(F,I)),N=Math.max(0,Math.min(R-L,N));break}this.x=I/=T,this.y=N/=R;const[H,z]=this.#g();I+=H,N+=z;const{style:U}=this.div;U.left=`${(100*I).toFixed(2)}%`,U.top=`${(100*N).toFixed(2)}%`,this.moveInDOM()}static#m(T,R,I){switch(I){case 90:return[R,-T];case 180:return[-T,-R];case 270:return[-R,T];default:return[T,R]}}screenToPageTranslation(T,R){return A.#m(T,R,this.parentRotation)}pageTranslationToScreen(T,R){return A.#m(T,R,360-this.parentRotation)}#u(T){switch(T){case 90:{const[R,I]=this.pageDimensions;return[0,-R/I,I/R,0]}case 180:return[-1,0,0,-1];case 270:{const[R,I]=this.pageDimensions;return[0,R/I,-I/R,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:T,pageDimensions:[R,I]}=this,N=R*T,L=I*T;return y.FeatureTest.isCSSRoundSupported?[Math.round(N),Math.round(L)]:[N,L]}setDims(T,R){const[I,N]=this.parentDimensions;this.div.style.width=`${(100*T/I).toFixed(2)}%`,this.#s||(this.div.style.height=`${(100*R/N).toFixed(2)}%`),this.#n?.classList.toggle("small",T<A.SMALL_EDITOR_SIZE||R<A.SMALL_EDITOR_SIZE)}fixDims(){const{style:T}=this.div,{height:R,width:I}=T,N=I.endsWith("%"),L=!this.#s&&R.endsWith("%");if(N&&L)return;const[F,H]=this.parentDimensions;N||(T.width=`${(100*parseFloat(I)/F).toFixed(2)}%`),!this.#s&&!L&&(T.height=`${(100*parseFloat(R)/H).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#v(){if(this.#a)return;this.#a=document.createElement("div"),this.#a.classList.add("resizers");const T=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||T.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const R of T){const I=document.createElement("div");this.#a.append(I),I.classList.add("resizer",R),I.addEventListener("pointerdown",this.#E.bind(this,R)),I.addEventListener("contextmenu",S.noContextMenu)}this.div.prepend(this.#a)}#E(T,R){R.preventDefault();const{isMac:I}=y.FeatureTest.platform;if(R.button!==0||R.ctrlKey&&I)return;const N=this.#x.bind(this,T),L=this._isDraggable;this._isDraggable=!1;const F={passive:!0,capture:!0};window.addEventListener("pointermove",N,F);const H=this.x,z=this.y,U=this.width,G=this.height,Y=this.parent.div.style.cursor,K=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(R.target).cursor;const Z=()=>{this._isDraggable=L,window.removeEventListener("pointerup",Z),window.removeEventListener("blur",Z),window.removeEventListener("pointermove",N,F),this.parent.div.style.cursor=Y,this.div.style.cursor=K;const J=this.x,te=this.y,de=this.width,se=this.height;J===H&&te===z&&de===U&&se===G||this.addCommands({cmd:()=>{this.width=de,this.height=se,this.x=J,this.y=te;const[ne,ge]=this.parentDimensions;this.setDims(ne*de,ge*se),this.fixAndSetPosition()},undo:()=>{this.width=U,this.height=G,this.x=H,this.y=z;const[ne,ge]=this.parentDimensions;this.setDims(ne*U,ge*G),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",Z),window.addEventListener("blur",Z)}#x(T,R){const[I,N]=this.parentDimensions,L=this.x,F=this.y,H=this.width,z=this.height,U=A.MIN_SIZE/I,G=A.MIN_SIZE/N,Y=ye=>Math.round(ye*1e4)/1e4,K=this.#u(this.rotation),Z=(ye,ce)=>[K[0]*ye+K[2]*ce,K[1]*ye+K[3]*ce],J=this.#u(360-this.rotation),te=(ye,ce)=>[J[0]*ye+J[2]*ce,J[1]*ye+J[3]*ce];let de,se,ne=!1,ge=!1;switch(T){case"topLeft":ne=!0,de=(ye,ce)=>[0,0],se=(ye,ce)=>[ye,ce];break;case"topMiddle":de=(ye,ce)=>[ye/2,0],se=(ye,ce)=>[ye/2,ce];break;case"topRight":ne=!0,de=(ye,ce)=>[ye,0],se=(ye,ce)=>[0,ce];break;case"middleRight":ge=!0,de=(ye,ce)=>[ye,ce/2],se=(ye,ce)=>[0,ce/2];break;case"bottomRight":ne=!0,de=(ye,ce)=>[ye,ce],se=(ye,ce)=>[0,0];break;case"bottomMiddle":de=(ye,ce)=>[ye/2,ce],se=(ye,ce)=>[ye/2,0];break;case"bottomLeft":ne=!0,de=(ye,ce)=>[0,ce],se=(ye,ce)=>[ye,0];break;case"middleLeft":ge=!0,de=(ye,ce)=>[0,ce/2],se=(ye,ce)=>[ye,ce/2];break}const Ee=de(H,z),we=se(H,z);let Ie=Z(...we);const Be=Y(L+Ie[0]),Me=Y(F+Ie[1]);let Re=1,Te=1,[Se,oe]=this.screenToPageTranslation(R.movementX,R.movementY);if([Se,oe]=te(Se/I,oe/N),ne){const ye=Math.hypot(H,z);Re=Te=Math.max(Math.min(Math.hypot(we[0]-Ee[0]-Se,we[1]-Ee[1]-oe)/ye,1/H,1/z),U/H,G/z)}else ge?Re=Math.max(U,Math.min(1,Math.abs(we[0]-Ee[0]-Se)))/H:Te=Math.max(G,Math.min(1,Math.abs(we[1]-Ee[1]-oe)))/z;const ae=Y(H*Re),be=Y(z*Te);Ie=Z(...se(ae,be));const he=Be-Ie[0],ue=Me-Ie[1];this.width=ae,this.height=be,this.x=he,this.y=ue,this.setDims(I*ae,N*be),this.fixAndSetPosition()}async addAltTextButton(){if(this.#n)return;const T=this.#n=document.createElement("button");T.className="altText";const R=await A._l10nPromise.get("editor_alt_text_button_label");T.textContent=R,T.setAttribute("aria-label",R),T.tabIndex="0",T.addEventListener("contextmenu",S.noContextMenu),T.addEventListener("pointerdown",I=>I.stopPropagation()),T.addEventListener("click",I=>{I.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),T.addEventListener("keydown",I=>{I.target===T&&I.key==="Enter"&&(I.preventDefault(),this._uiManager.editAltText(this))}),this.#T(),this.div.append(T),A.SMALL_EDITOR_SIZE||(A.SMALL_EDITOR_SIZE=Math.min(128,Math.round(T.getBoundingClientRect().width*1.4)))}async#T(){const T=this.#n;if(!T)return;if(!this.#e&&!this.#t){T.classList.remove("done"),this.#r?.remove();return}A._l10nPromise.get("editor_alt_text_edit_button_label").then(I=>{T.setAttribute("aria-label",I)});let R=this.#r;if(!R){this.#r=R=document.createElement("span"),R.className="tooltip",R.setAttribute("role","tooltip");const I=R.id=`alt-text-tooltip-${this.id}`;T.setAttribute("aria-describedby",I);const N=100;T.addEventListener("mouseenter",()=>{this.#o=setTimeout(()=>{this.#o=null,this.#r.classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},N)}),T.addEventListener("mouseleave",()=>{clearTimeout(this.#o),this.#o=null,this.#r?.classList.remove("show")})}T.classList.add("done"),R.innerText=this.#t?await A._l10nPromise.get("editor_alt_text_decorative_tooltip"):this.#e,R.parentNode||T.append(R)}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:this.#e,decorative:this.#t}}set altTextData({altText:T,decorative:R}){this.#e===T&&this.#t===R||(this.#e=T,this.#t=R,this.#T())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",this.#l),this.div.addEventListener("focusout",this.#c);const[T,R]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*R/T).toFixed(2)}%`,this.div.style.maxHeight=`${(100*T/R).toFixed(2)}%`);const[I,N]=this.getInitialTranslation();return this.translate(I,N),(0,f.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(T){const{isMac:R}=y.FeatureTest.platform;if(T.button!==0||T.ctrlKey&&R){T.preventDefault();return}this.#i=!0,this.#R(T)}#R(T){if(!this._isDraggable)return;const R=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let I,N;R&&(I={passive:!0,capture:!0},N=F=>{const[H,z]=this.screenToPageTranslation(F.movementX,F.movementY);this._uiManager.dragSelectedEditors(H,z)},window.addEventListener("pointermove",N,I));const L=()=>{if(window.removeEventListener("pointerup",L),window.removeEventListener("blur",L),R&&window.removeEventListener("pointermove",N,I),this.#i=!1,!this._uiManager.endDragSession()){const{isMac:F}=y.FeatureTest.platform;T.ctrlKey&&!F||T.shiftKey||T.metaKey&&F?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",L),window.addEventListener("blur",L)}moveInDOM(){this.parent?.moveEditorInDOM(this)}_setParentAndPosition(T,R,I){T.changeParent(this),this.x=R,this.y=I,this.fixAndSetPosition()}getRect(T,R){const I=this.parentScale,[N,L]=this.pageDimensions,[F,H]=this.pageTranslation,z=T/I,U=R/I,G=this.x*N,Y=this.y*L,K=this.width*N,Z=this.height*L;switch(this.rotation){case 0:return[G+z+F,L-Y-U-Z+H,G+z+K+F,L-Y-U+H];case 90:return[G+U+F,L-Y+z+H,G+U+Z+F,L-Y+z+K+H];case 180:return[G-z-K+F,L-Y+U+H,G-z+F,L-Y+U+Z+H];case 270:return[G-U-Z+F,L-Y-z-K+H,G-U+F,L-Y-z+H];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(T,R){const[I,N,L,F]=T,H=L-I,z=F-N;switch(this.rotation){case 0:return[I,R-F,H,z];case 90:return[I,R-N,z,H];case 180:return[L,R-N,H,z];case 270:return[L,R-F,z,H];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#d=!0}disableEditMode(){this.#d=!1}isInEditMode(){return this.#d}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){this.div?.addEventListener("focusin",this.#l),this.div?.addEventListener("focusout",this.#c)}serialize(T=!1,R=null){(0,y.unreachable)("An editor must be serializable")}static deserialize(T,R,I){const N=new this.prototype.constructor({parent:R,id:R.getNextId(),uiManager:I});N.rotation=T.rotation;const[L,F]=N.pageDimensions,[H,z,U,G]=N.getRectInCurrentCoords(T.rect,F);return N.x=H/L,N.y=z/F,N.width=U/L,N.height=G/F,N}remove(){this.div.removeEventListener("focusin",this.#l),this.div.removeEventListener("focusout",this.#c),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#n?.remove(),this.#n=null,this.#r=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#v(),this.#a.classList.remove("hidden"))}select(){this.makeResizable(),this.div?.classList.add("selectedEditor")}unselect(){this.#a?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(T,R){}disableEditing(){this.#n&&(this.#n.hidden=!0)}enableEditing(){this.#n&&(this.#n.hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return this.#f}set isEditing(T){this.#f=T,this.parent&&(T?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(T,R){this.#s=!0;const I=T/R,{style:N}=this.div;N.aspectRatio=I,N.height="auto"}static get MIN_SIZE(){return 16}}n.AnnotationEditor=A;class w extends A{constructor(T){super(T),this.annotationElementId=T.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}}),((s,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.KeyboardManager=n.CommandManager=n.ColorManager=n.AnnotationEditorUIManager=void 0,n.bindEvents=S,n.opacityToHex=A;var f=u(1),y=u(6);function S(L,F,H){for(const z of H)F.addEventListener(z,L[z].bind(L))}function A(L){return Math.round(Math.min(255,Math.max(1,255*L))).toString(16).padStart(2,"0")}class w{#e=0;getId(){return`${f.AnnotationEditorPrefix}${this.#e++}`}}class C{#e=(0,f.getUuid)();#t=0;#n=null;static get _isSVGFittingCanvas(){const F='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',H=new OffscreenCanvas(1,3).getContext("2d"),z=new Image;z.src=F;const U=z.decode().then(()=>(H.drawImage(z,0,0,1,1,0,0,1,3),new Uint32Array(H.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,f.shadow)(this,"_isSVGFittingCanvas",U)}async#r(F,H){this.#n||=new Map;let z=this.#n.get(F);if(z===null)return null;if(z?.bitmap)return z.refCounter+=1,z;try{z||={bitmap:null,id:`image_${this.#e}_${this.#t++}`,refCounter:0,isSvg:!1};let U;if(typeof H=="string"){z.url=H;const G=await fetch(H);if(!G.ok)throw new Error(G.statusText);U=await G.blob()}else U=z.file=H;if(U.type==="image/svg+xml"){const G=C._isSVGFittingCanvas,Y=new FileReader,K=new Image,Z=new Promise((J,te)=>{K.onload=()=>{z.bitmap=K,z.isSvg=!0,J()},Y.onload=async()=>{const de=z.svgUrl=Y.result;K.src=await G?`${de}#svgView(preserveAspectRatio(none))`:de},K.onerror=Y.onerror=te});Y.readAsDataURL(U),await Z}else z.bitmap=await createImageBitmap(U);z.refCounter=1}catch(U){console.error(U),z=null}return this.#n.set(F,z),z&&this.#n.set(z.id,z),z}async getFromFile(F){const{lastModified:H,name:z,size:U,type:G}=F;return this.#r(`${H}_${z}_${U}_${G}`,F)}async getFromUrl(F){return this.#r(F,F)}async getFromId(F){this.#n||=new Map;const H=this.#n.get(F);return H?H.bitmap?(H.refCounter+=1,H):H.file?this.getFromFile(H.file):this.getFromUrl(H.url):null}getSvgUrl(F){const H=this.#n.get(F);return H?.isSvg?H.svgUrl:null}deleteId(F){this.#n||=new Map;const H=this.#n.get(F);H&&(H.refCounter-=1,H.refCounter===0&&(H.bitmap=null))}isValidId(F){return F.startsWith(`image_${this.#e}_`)}}class T{#e=[];#t=!1;#n;#r=-1;constructor(F=128){this.#n=F}add({cmd:F,undo:H,mustExec:z,type:U=NaN,overwriteIfSameType:G=!1,keepUndo:Y=!1}){if(z&&F(),this.#t)return;const K={cmd:F,undo:H,type:U};if(this.#r===-1){this.#e.length>0&&(this.#e.length=0),this.#r=0,this.#e.push(K);return}if(G&&this.#e[this.#r].type===U){Y&&(K.undo=this.#e[this.#r].undo),this.#e[this.#r]=K;return}const Z=this.#r+1;Z===this.#n?this.#e.splice(0,1):(this.#r=Z,Z<this.#e.length&&this.#e.splice(Z)),this.#e.push(K)}undo(){this.#r!==-1&&(this.#t=!0,this.#e[this.#r].undo(),this.#t=!1,this.#r-=1)}redo(){this.#r<this.#e.length-1&&(this.#r+=1,this.#t=!0,this.#e[this.#r].cmd(),this.#t=!1)}hasSomethingToUndo(){return this.#r!==-1}hasSomethingToRedo(){return this.#r<this.#e.length-1}destroy(){this.#e=null}}n.CommandManager=T;class R{constructor(F){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:H}=f.FeatureTest.platform;for(const[z,U,G={}]of F)for(const Y of z){const K=Y.startsWith("mac+");H&&K?(this.callbacks.set(Y.slice(4),{callback:U,options:G}),this.allKeys.add(Y.split("+").at(-1))):!H&&!K&&(this.callbacks.set(Y,{callback:U,options:G}),this.allKeys.add(Y.split("+").at(-1)))}}#e(F){F.altKey&&this.buffer.push("alt"),F.ctrlKey&&this.buffer.push("ctrl"),F.metaKey&&this.buffer.push("meta"),F.shiftKey&&this.buffer.push("shift"),this.buffer.push(F.key);const H=this.buffer.join("+");return this.buffer.length=0,H}exec(F,H){if(!this.allKeys.has(H.key))return;const z=this.callbacks.get(this.#e(H));if(!z)return;const{callback:U,options:{bubbles:G=!1,args:Y=[],checker:K=null}}=z;K&&!K(F,H)||(U.bind(F,...Y)(),G||(H.stopPropagation(),H.preventDefault()))}}n.KeyboardManager=R;class I{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const F=new Map([["CanvasText",null],["Canvas",null]]);return(0,y.getColorValues)(F),(0,f.shadow)(this,"_colors",F)}convert(F){const H=(0,y.getRGB)(F);if(!window.matchMedia("(forced-colors: active)").matches)return H;for(const[z,U]of this._colors)if(U.every((G,Y)=>G===H[Y]))return I._colorsMapping.get(z);return H}getHexCode(F){const H=this._colors.get(F);return H?f.Util.makeHexColor(...H):F}}n.ColorManager=I;class N{#e=null;#t=new Map;#n=new Map;#r=null;#o=null;#s=new T;#a=0;#l=new Set;#c=null;#i=null;#f=new Set;#d=null;#h=new w;#p=!1;#y=!1;#g=null;#m=f.AnnotationEditorType.NONE;#u=new Set;#v=null;#E=this.blur.bind(this);#x=this.focus.bind(this);#T=this.copy.bind(this);#R=this.cut.bind(this);#D=this.paste.bind(this);#L=this.keydown.bind(this);#P=this.onEditingAction.bind(this);#b=this.onPageChanging.bind(this);#O=this.onScaleChanging.bind(this);#M=this.onRotationChanging.bind(this);#k={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1};#_=[0,0];#C=null;#A=null;#F=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const F=N.prototype,H=G=>{const{activeElement:Y}=document;return Y&&G.#A.contains(Y)&&G.hasSomethingToControl()},z=this.TRANSLATE_SMALL,U=this.TRANSLATE_BIG;return(0,f.shadow)(this,"_keyboardManager",new R([[["ctrl+a","mac+meta+a"],F.selectAll],[["ctrl+z","mac+meta+z"],F.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],F.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],F.delete],[["Escape","mac+Escape"],F.unselectAll],[["ArrowLeft","mac+ArrowLeft"],F.translateSelectedEditors,{args:[-z,0],checker:H}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],F.translateSelectedEditors,{args:[-U,0],checker:H}],[["ArrowRight","mac+ArrowRight"],F.translateSelectedEditors,{args:[z,0],checker:H}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],F.translateSelectedEditors,{args:[U,0],checker:H}],[["ArrowUp","mac+ArrowUp"],F.translateSelectedEditors,{args:[0,-z],checker:H}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],F.translateSelectedEditors,{args:[0,-U],checker:H}],[["ArrowDown","mac+ArrowDown"],F.translateSelectedEditors,{args:[0,z],checker:H}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],F.translateSelectedEditors,{args:[0,U],checker:H}]]))}constructor(F,H,z,U,G,Y){this.#A=F,this.#F=H,this.#r=z,this._eventBus=U,this._eventBus._on("editingaction",this.#P),this._eventBus._on("pagechanging",this.#b),this._eventBus._on("scalechanging",this.#O),this._eventBus._on("rotationchanging",this.#M),this.#o=G.annotationStorage,this.#d=G.filterFactory,this.#v=Y,this.viewParameters={realScale:y.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){this.#I(),this.#U(),this._eventBus._off("editingaction",this.#P),this._eventBus._off("pagechanging",this.#b),this._eventBus._off("scalechanging",this.#O),this._eventBus._off("rotationchanging",this.#M);for(const F of this.#n.values())F.destroy();this.#n.clear(),this.#t.clear(),this.#f.clear(),this.#e=null,this.#u.clear(),this.#s.destroy(),this.#r.destroy()}get hcmFilter(){return(0,f.shadow)(this,"hcmFilter",this.#v?this.#d.addHCMFilter(this.#v.foreground,this.#v.background):"none")}get direction(){return(0,f.shadow)(this,"direction",getComputedStyle(this.#A).direction)}editAltText(F){this.#r?.editAltText(this,F)}onPageChanging({pageNumber:F}){this.#a=F-1}focusMainContainer(){this.#A.focus()}findParent(F,H){for(const z of this.#n.values()){const{x:U,y:G,width:Y,height:K}=z.div.getBoundingClientRect();if(F>=U&&F<=U+Y&&H>=G&&H<=G+K)return z}return null}disableUserSelect(F=!1){this.#F.classList.toggle("noUserSelect",F)}addShouldRescale(F){this.#f.add(F)}removeShouldRescale(F){this.#f.delete(F)}onScaleChanging({scale:F}){this.commitOrRemove(),this.viewParameters.realScale=F*y.PixelsPerInch.PDF_TO_CSS_UNITS;for(const H of this.#f)H.onScaleChanging()}onRotationChanging({pagesRotation:F}){this.commitOrRemove(),this.viewParameters.rotation=F}addToAnnotationStorage(F){!F.isEmpty()&&this.#o&&!this.#o.has(F.id)&&this.#o.setValue(F.id,F)}#B(){window.addEventListener("focus",this.#x),window.addEventListener("blur",this.#E)}#U(){window.removeEventListener("focus",this.#x),window.removeEventListener("blur",this.#E)}blur(){if(!this.hasSelection)return;const{activeElement:F}=document;for(const H of this.#u)if(H.div.contains(F)){this.#g=[H,F],H._focusEventsAllowed=!1;break}}focus(){if(!this.#g)return;const[F,H]=this.#g;this.#g=null,H.addEventListener("focusin",()=>{F._focusEventsAllowed=!0},{once:!0}),H.focus()}#$(){window.addEventListener("keydown",this.#L,{capture:!0})}#I(){window.removeEventListener("keydown",this.#L,{capture:!0})}#N(){document.addEventListener("copy",this.#T),document.addEventListener("cut",this.#R),document.addEventListener("paste",this.#D)}#w(){document.removeEventListener("copy",this.#T),document.removeEventListener("cut",this.#R),document.removeEventListener("paste",this.#D)}addEditListeners(){this.#$(),this.#N()}removeEditListeners(){this.#I(),this.#w()}copy(F){if(F.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const H=[];for(const z of this.#u){const U=z.serialize(!0);U&&H.push(U)}H.length!==0&&F.clipboardData.setData("application/pdfjs",JSON.stringify(H))}cut(F){this.copy(F),this.delete()}paste(F){F.preventDefault();const{clipboardData:H}=F;for(const G of H.items)for(const Y of this.#i)if(Y.isHandlingMimeForPasting(G.type)){Y.paste(G,this.currentLayer);return}let z=H.getData("application/pdfjs");if(!z)return;try{z=JSON.parse(z)}catch(G){(0,f.warn)(`paste: "${G.message}".`);return}if(!Array.isArray(z))return;this.unselectAll();const U=this.currentLayer;try{const G=[];for(const Z of z){const J=U.deserialize(Z);if(!J)return;G.push(J)}const Y=()=>{for(const Z of G)this.#j(Z);this.#V(G)},K=()=>{for(const Z of G)Z.remove()};this.addCommands({cmd:Y,undo:K,mustExec:!0})}catch(G){(0,f.warn)(`paste: "${G.message}".`)}}keydown(F){this.getActive()?.shouldGetKeyboardEvents()||N._keyboardManager.exec(this,F)}onEditingAction(F){["undo","redo","delete","selectAll"].includes(F.name)&&this[F.name]()}#S(F){Object.entries(F).some(([H,z])=>this.#k[H]!==z)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#k,F)})}#z(F){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:F})}setEditingState(F){F?(this.#B(),this.#$(),this.#N(),this.#S({isEditing:this.#m!==f.AnnotationEditorType.NONE,isEmpty:this.#G(),hasSomethingToUndo:this.#s.hasSomethingToUndo(),hasSomethingToRedo:this.#s.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#U(),this.#I(),this.#w(),this.#S({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(F){if(!this.#i){this.#i=F;for(const H of this.#i)this.#z(H.defaultPropertiesToUpdate)}}getId(){return this.#h.getId()}get currentLayer(){return this.#n.get(this.#a)}getLayer(F){return this.#n.get(F)}get currentPageIndex(){return this.#a}addLayer(F){this.#n.set(F.pageIndex,F),this.#p?F.enable():F.disable()}removeLayer(F){this.#n.delete(F.pageIndex)}updateMode(F,H=null){if(this.#m!==F){if(this.#m=F,F===f.AnnotationEditorType.NONE){this.setEditingState(!1),this.#q();return}this.setEditingState(!0),this.#H(),this.unselectAll();for(const z of this.#n.values())z.updateMode(F);if(H){for(const z of this.#t.values())if(z.annotationElementId===H){this.setSelected(z),z.enterInEditMode();break}}}}updateToolbar(F){F!==this.#m&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:F})}updateParams(F,H){if(this.#i){if(F===f.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(F);return}for(const z of this.#u)z.updateParams(F,H);for(const z of this.#i)z.updateDefaultParams(F,H)}}enableWaiting(F=!1){if(this.#y!==F){this.#y=F;for(const H of this.#n.values())F?H.disableClick():H.enableClick(),H.div.classList.toggle("waiting",F)}}#H(){if(!this.#p){this.#p=!0;for(const F of this.#n.values())F.enable()}}#q(){if(this.unselectAll(),this.#p){this.#p=!1;for(const F of this.#n.values())F.disable()}}getEditors(F){const H=[];for(const z of this.#t.values())z.pageIndex===F&&H.push(z);return H}getEditor(F){return this.#t.get(F)}addEditor(F){this.#t.set(F.id,F)}removeEditor(F){this.#t.delete(F.id),this.unselect(F),(!F.annotationElementId||!this.#l.has(F.annotationElementId))&&this.#o?.remove(F.id)}addDeletedAnnotationElement(F){this.#l.add(F.annotationElementId),F.deleted=!0}isDeletedAnnotationElement(F){return this.#l.has(F)}removeDeletedAnnotationElement(F){this.#l.delete(F.annotationElementId),F.deleted=!1}#j(F){const H=this.#n.get(F.pageIndex);H?H.addOrRebuild(F):this.addEditor(F)}setActiveEditor(F){this.#e!==F&&(this.#e=F,F&&this.#z(F.propertiesToUpdate))}toggleSelected(F){if(this.#u.has(F)){this.#u.delete(F),F.unselect(),this.#S({hasSelectedEditor:this.hasSelection});return}this.#u.add(F),F.select(),this.#z(F.propertiesToUpdate),this.#S({hasSelectedEditor:!0})}setSelected(F){for(const H of this.#u)H!==F&&H.unselect();this.#u.clear(),this.#u.add(F),F.select(),this.#z(F.propertiesToUpdate),this.#S({hasSelectedEditor:!0})}isSelected(F){return this.#u.has(F)}unselect(F){F.unselect(),this.#u.delete(F),this.#S({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#u.size!==0}undo(){this.#s.undo(),this.#S({hasSomethingToUndo:this.#s.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#G()})}redo(){this.#s.redo(),this.#S({hasSomethingToUndo:!0,hasSomethingToRedo:this.#s.hasSomethingToRedo(),isEmpty:this.#G()})}addCommands(F){this.#s.add(F),this.#S({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#G()})}#G(){if(this.#t.size===0)return!0;if(this.#t.size===1)for(const F of this.#t.values())return F.isEmpty();return!1}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const F=[...this.#u],H=()=>{for(const U of F)U.remove()},z=()=>{for(const U of F)this.#j(U)};this.addCommands({cmd:H,undo:z,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#V(F){this.#u.clear();for(const H of F)H.isEmpty()||(this.#u.add(H),H.select());this.#S({hasSelectedEditor:!0})}selectAll(){for(const F of this.#u)F.commit();this.#V(this.#t.values())}unselectAll(){if(this.#e){this.#e.commitOrRemove();return}if(this.hasSelection){for(const F of this.#u)F.unselect();this.#u.clear(),this.#S({hasSelectedEditor:!1})}}translateSelectedEditors(F,H,z=!1){if(z||this.commitOrRemove(),!this.hasSelection)return;this.#_[0]+=F,this.#_[1]+=H;const[U,G]=this.#_,Y=[...this.#u],K=1e3;this.#C&&clearTimeout(this.#C),this.#C=setTimeout(()=>{this.#C=null,this.#_[0]=this.#_[1]=0,this.addCommands({cmd:()=>{for(const Z of Y)this.#t.has(Z.id)&&Z.translateInPage(U,G)},undo:()=>{for(const Z of Y)this.#t.has(Z.id)&&Z.translateInPage(-U,-G)},mustExec:!1})},K);for(const Z of Y)Z.translateInPage(F,H)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#c=new Map;for(const F of this.#u)this.#c.set(F,{savedX:F.x,savedY:F.y,savedPageIndex:F.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#c)return!1;this.disableUserSelect(!1);const F=this.#c;this.#c=null;let H=!1;for(const[{x:U,y:G,pageIndex:Y},K]of F)K.newX=U,K.newY=G,K.newPageIndex=Y,H||=U!==K.savedX||G!==K.savedY||Y!==K.savedPageIndex;if(!H)return!1;const z=(U,G,Y,K)=>{if(this.#t.has(U.id)){const Z=this.#n.get(K);Z?U._setParentAndPosition(Z,G,Y):(U.pageIndex=K,U.x=G,U.y=Y)}};return this.addCommands({cmd:()=>{for(const[U,{newX:G,newY:Y,newPageIndex:K}]of F)z(U,G,Y,K)},undo:()=>{for(const[U,{savedX:G,savedY:Y,savedPageIndex:K}]of F)z(U,G,Y,K)},mustExec:!0}),!0}dragSelectedEditors(F,H){if(this.#c)for(const z of this.#c.keys())z.drag(F,H)}rebuild(F){if(F.parent===null){const H=this.getLayer(F.pageIndex);H?(H.changeParent(F),H.addOrRebuild(F)):(this.addEditor(F),this.addToAnnotationStorage(F),F.rebuild())}else F.parent.addOrRebuild(F)}isActive(F){return this.#e===F}getActive(){return this.#e}getMode(){return this.#m}get imageManager(){return(0,f.shadow)(this,"imageManager",new C)}}n.AnnotationEditorUIManager=N}),((s,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.StatTimer=n.RenderingCancelledException=n.PixelsPerInch=n.PageViewport=n.PDFDateString=n.DOMStandardFontDataFactory=n.DOMSVGFactory=n.DOMFilterFactory=n.DOMCanvasFactory=n.DOMCMapReaderFactory=void 0,n.deprecated=te,n.getColorValues=Ee,n.getCurrentTransform=we,n.getCurrentTransformInverse=Ie,n.getFilenameFromUrl=U,n.getPdfFilenameFromUrl=G,n.getRGB=ge,n.getXfaPageViewport=ne,n.isDataScheme=H,n.isPdfFile=z,n.isValidFetchUrl=K,n.loadScript=J,n.noContextMenu=Z,n.setLayerDimensions=Be;var f=u(7),y=u(1);const S="http://www.w3.org/2000/svg";class A{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}n.PixelsPerInch=A;class w extends f.BaseFilterFactory{#e;#t;#n;#r;#o;#s;#a;#l;#c;#i;#f=0;constructor({docId:Re,ownerDocument:Te=globalThis.document}={}){super(),this.#n=Re,this.#r=Te}get#d(){return this.#e||=new Map}get#h(){if(!this.#t){const Re=this.#r.createElement("div"),{style:Te}=Re;Te.visibility="hidden",Te.contain="strict",Te.width=Te.height=0,Te.position="absolute",Te.top=Te.left=0,Te.zIndex=-1;const Se=this.#r.createElementNS(S,"svg");Se.setAttribute("width",0),Se.setAttribute("height",0),this.#t=this.#r.createElementNS(S,"defs"),Re.append(Se),Se.append(this.#t),this.#r.body.append(Re)}return this.#t}addFilter(Re){if(!Re)return"none";let Te=this.#d.get(Re);if(Te)return Te;let Se,oe,ae,be;if(Re.length===1){const ce=Re[0],_e=new Array(256);for(let ke=0;ke<256;ke++)_e[ke]=ce[ke]/255;be=Se=oe=ae=_e.join(",")}else{const[ce,_e,ke]=Re,Pe=new Array(256),$e=new Array(256),xe=new Array(256);for(let Ne=0;Ne<256;Ne++)Pe[Ne]=ce[Ne]/255,$e[Ne]=_e[Ne]/255,xe[Ne]=ke[Ne]/255;Se=Pe.join(","),oe=$e.join(","),ae=xe.join(","),be=`${Se}${oe}${ae}`}if(Te=this.#d.get(be),Te)return this.#d.set(Re,Te),Te;const he=`g_${this.#n}_transfer_map_${this.#f++}`,ue=`url(#${he})`;this.#d.set(Re,ue),this.#d.set(be,ue);const ye=this.#y(he);return this.#m(Se,oe,ae,ye),ue}addHCMFilter(Re,Te){const Se=`${Re}-${Te}`;if(this.#s===Se)return this.#a;if(this.#s=Se,this.#a="none",this.#o?.remove(),!Re||!Te)return this.#a;const oe=this.#u(Re);Re=y.Util.makeHexColor(...oe);const ae=this.#u(Te);if(Te=y.Util.makeHexColor(...ae),this.#h.style.color="",Re==="#000000"&&Te==="#ffffff"||Re===Te)return this.#a;const be=new Array(256);for(let _e=0;_e<=255;_e++){const ke=_e/255;be[_e]=ke<=.03928?ke/12.92:((ke+.055)/1.055)**2.4}const he=be.join(","),ue=`g_${this.#n}_hcm_filter`,ye=this.#l=this.#y(ue);this.#m(he,he,he,ye),this.#p(ye);const ce=(_e,ke)=>{const Pe=oe[_e]/255,$e=ae[_e]/255,xe=new Array(ke+1);for(let Ne=0;Ne<=ke;Ne++)xe[Ne]=Pe+Ne/ke*($e-Pe);return xe.join(",")};return this.#m(ce(0,5),ce(1,5),ce(2,5),ye),this.#a=`url(#${ue})`,this.#a}addHighlightHCMFilter(Re,Te,Se,oe){const ae=`${Re}-${Te}-${Se}-${oe}`;if(this.#c===ae)return this.#i;if(this.#c=ae,this.#i="none",this.#l?.remove(),!Re||!Te)return this.#i;const[be,he]=[Re,Te].map(this.#u.bind(this));let ue=Math.round(.2126*be[0]+.7152*be[1]+.0722*be[2]),ye=Math.round(.2126*he[0]+.7152*he[1]+.0722*he[2]),[ce,_e]=[Se,oe].map(this.#u.bind(this));ye<ue&&([ue,ye,ce,_e]=[ye,ue,_e,ce]),this.#h.style.color="";const ke=(xe,Ne,je)=>{const He=new Array(256),Ye=(ye-ue)/je,Je=xe/255,ot=(Ne-xe)/(255*je);let ze=0;for(let pt=0;pt<=je;pt++){const yt=Math.round(ue+pt*Ye),ut=Je+pt*ot;for(let Et=ze;Et<=yt;Et++)He[Et]=ut;ze=yt+1}for(let pt=ze;pt<256;pt++)He[pt]=He[ze-1];return He.join(",")},Pe=`g_${this.#n}_hcm_highlight_filter`,$e=this.#l=this.#y(Pe);return this.#p($e),this.#m(ke(ce[0],_e[0],5),ke(ce[1],_e[1],5),ke(ce[2],_e[2],5),$e),this.#i=`url(#${Pe})`,this.#i}destroy(Re=!1){Re&&(this.#a||this.#i)||(this.#t&&(this.#t.parentNode.parentNode.remove(),this.#t=null),this.#e&&(this.#e.clear(),this.#e=null),this.#f=0)}#p(Re){const Te=this.#r.createElementNS(S,"feColorMatrix");Te.setAttribute("type","matrix"),Te.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),Re.append(Te)}#y(Re){const Te=this.#r.createElementNS(S,"filter");return Te.setAttribute("color-interpolation-filters","sRGB"),Te.setAttribute("id",Re),this.#h.append(Te),Te}#g(Re,Te,Se){const oe=this.#r.createElementNS(S,Te);oe.setAttribute("type","discrete"),oe.setAttribute("tableValues",Se),Re.append(oe)}#m(Re,Te,Se,oe){const ae=this.#r.createElementNS(S,"feComponentTransfer");oe.append(ae),this.#g(ae,"feFuncR",Re),this.#g(ae,"feFuncG",Te),this.#g(ae,"feFuncB",Se)}#u(Re){return this.#h.style.color=Re,ge(getComputedStyle(this.#h).getPropertyValue("color"))}}n.DOMFilterFactory=w;class C extends f.BaseCanvasFactory{constructor({ownerDocument:Re=globalThis.document}={}){super(),this._document=Re}_createCanvas(Re,Te){const Se=this._document.createElement("canvas");return Se.width=Re,Se.height=Te,Se}}n.DOMCanvasFactory=C;async function T(Me,Re=!1){if(K(Me,document.baseURI)){const Te=await fetch(Me);if(!Te.ok)throw new Error(Te.statusText);return Re?new Uint8Array(await Te.arrayBuffer()):(0,y.stringToBytes)(await Te.text())}return new Promise((Te,Se)=>{const oe=new XMLHttpRequest;oe.open("GET",Me,!0),Re&&(oe.responseType="arraybuffer"),oe.onreadystatechange=()=>{if(oe.readyState===XMLHttpRequest.DONE){if(oe.status===200||oe.status===0){let ae;if(Re&&oe.response?ae=new Uint8Array(oe.response):!Re&&oe.responseText&&(ae=(0,y.stringToBytes)(oe.responseText)),ae){Te(ae);return}}Se(new Error(oe.statusText))}},oe.send(null)})}class R extends f.BaseCMapReaderFactory{_fetchData(Re,Te){return T(Re,this.isCompressed).then(Se=>({cMapData:Se,compressionType:Te}))}}n.DOMCMapReaderFactory=R;class I extends f.BaseStandardFontDataFactory{_fetchData(Re){return T(Re,!0)}}n.DOMStandardFontDataFactory=I;class N extends f.BaseSVGFactory{_createSVG(Re){return document.createElementNS(S,Re)}}n.DOMSVGFactory=N;class L{constructor({viewBox:Re,scale:Te,rotation:Se,offsetX:oe=0,offsetY:ae=0,dontFlip:be=!1}){this.viewBox=Re,this.scale=Te,this.rotation=Se,this.offsetX=oe,this.offsetY=ae;const he=(Re[2]+Re[0])/2,ue=(Re[3]+Re[1])/2;let ye,ce,_e,ke;switch(Se%=360,Se<0&&(Se+=360),Se){case 180:ye=-1,ce=0,_e=0,ke=1;break;case 90:ye=0,ce=1,_e=1,ke=0;break;case 270:ye=0,ce=-1,_e=-1,ke=0;break;case 0:ye=1,ce=0,_e=0,ke=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}be&&(_e=-_e,ke=-ke);let Pe,$e,xe,Ne;ye===0?(Pe=Math.abs(ue-Re[1])*Te+oe,$e=Math.abs(he-Re[0])*Te+ae,xe=(Re[3]-Re[1])*Te,Ne=(Re[2]-Re[0])*Te):(Pe=Math.abs(he-Re[0])*Te+oe,$e=Math.abs(ue-Re[1])*Te+ae,xe=(Re[2]-Re[0])*Te,Ne=(Re[3]-Re[1])*Te),this.transform=[ye*Te,ce*Te,_e*Te,ke*Te,Pe-ye*Te*he-_e*Te*ue,$e-ce*Te*he-ke*Te*ue],this.width=xe,this.height=Ne}get rawDims(){const{viewBox:Re}=this;return(0,y.shadow)(this,"rawDims",{pageWidth:Re[2]-Re[0],pageHeight:Re[3]-Re[1],pageX:Re[0],pageY:Re[1]})}clone({scale:Re=this.scale,rotation:Te=this.rotation,offsetX:Se=this.offsetX,offsetY:oe=this.offsetY,dontFlip:ae=!1}={}){return new L({viewBox:this.viewBox.slice(),scale:Re,rotation:Te,offsetX:Se,offsetY:oe,dontFlip:ae})}convertToViewportPoint(Re,Te){return y.Util.applyTransform([Re,Te],this.transform)}convertToViewportRectangle(Re){const Te=y.Util.applyTransform([Re[0],Re[1]],this.transform),Se=y.Util.applyTransform([Re[2],Re[3]],this.transform);return[Te[0],Te[1],Se[0],Se[1]]}convertToPdfPoint(Re,Te){return y.Util.applyInverseTransform([Re,Te],this.transform)}}n.PageViewport=L;class F extends y.BaseException{constructor(Re,Te=0){super(Re,"RenderingCancelledException"),this.extraDelay=Te}}n.RenderingCancelledException=F;function H(Me){const Re=Me.length;let Te=0;for(;Te<Re&&Me[Te].trim()==="";)Te++;return Me.substring(Te,Te+5).toLowerCase()==="data:"}function z(Me){return typeof Me=="string"&&/\.pdf$/i.test(Me)}function U(Me,Re=!1){return Re||([Me]=Me.split(/[#?]/,1)),Me.substring(Me.lastIndexOf("/")+1)}function G(Me,Re="document.pdf"){if(typeof Me!="string")return Re;if(H(Me))return(0,y.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),Re;const Te=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,Se=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,oe=Te.exec(Me);let ae=Se.exec(oe[1])||Se.exec(oe[2])||Se.exec(oe[3]);if(ae&&(ae=ae[0],ae.includes("%")))try{ae=Se.exec(decodeURIComponent(ae))[0]}catch{}return ae||Re}class Y{started=Object.create(null);times=[];time(Re){Re in this.started&&(0,y.warn)(`Timer is already running for ${Re}`),this.started[Re]=Date.now()}timeEnd(Re){Re in this.started||(0,y.warn)(`Timer has not been started for ${Re}`),this.times.push({name:Re,start:this.started[Re],end:Date.now()}),delete this.started[Re]}toString(){const Re=[];let Te=0;for(const{name:Se}of this.times)Te=Math.max(Se.length,Te);for(const{name:Se,start:oe,end:ae}of this.times)Re.push(`${Se.padEnd(Te)} ${ae-oe}ms
`);return Re.join("")}}n.StatTimer=Y;function K(Me,Re){try{const{protocol:Te}=Re?new URL(Me,Re):new URL(Me);return Te==="http:"||Te==="https:"}catch{return!1}}function Z(Me){Me.preventDefault()}function J(Me,Re=!1){return new Promise((Te,Se)=>{const oe=document.createElement("script");oe.src=Me,oe.onload=function(ae){Re&&oe.remove(),Te(ae)},oe.onerror=function(){Se(new Error(`Cannot load script at: ${oe.src}`))},(document.head||document.documentElement).append(oe)})}function te(Me){console.log("Deprecated API usage: "+Me)}let de;class se{static toDateObject(Re){if(!Re||typeof Re!="string")return null;de||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const Te=de.exec(Re);if(!Te)return null;const Se=parseInt(Te[1],10);let oe=parseInt(Te[2],10);oe=oe>=1&&oe<=12?oe-1:0;let ae=parseInt(Te[3],10);ae=ae>=1&&ae<=31?ae:1;let be=parseInt(Te[4],10);be=be>=0&&be<=23?be:0;let he=parseInt(Te[5],10);he=he>=0&&he<=59?he:0;let ue=parseInt(Te[6],10);ue=ue>=0&&ue<=59?ue:0;const ye=Te[7]||"Z";let ce=parseInt(Te[8],10);ce=ce>=0&&ce<=23?ce:0;let _e=parseInt(Te[9],10)||0;return _e=_e>=0&&_e<=59?_e:0,ye==="-"?(be+=ce,he+=_e):ye==="+"&&(be-=ce,he-=_e),new Date(Date.UTC(Se,oe,ae,be,he,ue))}}n.PDFDateString=se;function ne(Me,{scale:Re=1,rotation:Te=0}){const{width:Se,height:oe}=Me.attributes.style,ae=[0,0,parseInt(Se),parseInt(oe)];return new L({viewBox:ae,scale:Re,rotation:Te})}function ge(Me){if(Me.startsWith("#")){const Re=parseInt(Me.slice(1),16);return[(Re&16711680)>>16,(Re&65280)>>8,Re&255]}return Me.startsWith("rgb(")?Me.slice(4,-1).split(",").map(Re=>parseInt(Re)):Me.startsWith("rgba(")?Me.slice(5,-1).split(",").map(Re=>parseInt(Re)).slice(0,3):((0,y.warn)(`Not a valid color format: "${Me}"`),[0,0,0])}function Ee(Me){const Re=document.createElement("span");Re.style.visibility="hidden",document.body.append(Re);for(const Te of Me.keys()){Re.style.color=Te;const Se=window.getComputedStyle(Re).color;Me.set(Te,ge(Se))}Re.remove()}function we(Me){const{a:Re,b:Te,c:Se,d:oe,e:ae,f:be}=Me.getTransform();return[Re,Te,Se,oe,ae,be]}function Ie(Me){const{a:Re,b:Te,c:Se,d:oe,e:ae,f:be}=Me.getTransform().invertSelf();return[Re,Te,Se,oe,ae,be]}function Be(Me,Re,Te=!1,Se=!0){if(Re instanceof L){const{pageWidth:oe,pageHeight:ae}=Re.rawDims,{style:be}=Me,he=y.FeatureTest.isCSSRoundSupported,ue=`var(--scale-factor) * ${oe}px`,ye=`var(--scale-factor) * ${ae}px`,ce=he?`round(${ue}, 1px)`:`calc(${ue})`,_e=he?`round(${ye}, 1px)`:`calc(${ye})`;!Te||Re.rotation%180===0?(be.width=ce,be.height=_e):(be.width=_e,be.height=ce)}Se&&Me.setAttribute("data-main-rotation",Re.rotation)}}),((s,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.BaseStandardFontDataFactory=n.BaseSVGFactory=n.BaseFilterFactory=n.BaseCanvasFactory=n.BaseCMapReaderFactory=void 0;var f=u(1);class y{constructor(){this.constructor===y&&(0,f.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(R){return"none"}addHCMFilter(R,I){return"none"}addHighlightHCMFilter(R,I,N,L){return"none"}destroy(R=!1){}}n.BaseFilterFactory=y;class S{constructor(){this.constructor===S&&(0,f.unreachable)("Cannot initialize BaseCanvasFactory.")}create(R,I){if(R<=0||I<=0)throw new Error("Invalid canvas size");const N=this._createCanvas(R,I);return{canvas:N,context:N.getContext("2d")}}reset(R,I,N){if(!R.canvas)throw new Error("Canvas is not specified");if(I<=0||N<=0)throw new Error("Invalid canvas size");R.canvas.width=I,R.canvas.height=N}destroy(R){if(!R.canvas)throw new Error("Canvas is not specified");R.canvas.width=0,R.canvas.height=0,R.canvas=null,R.context=null}_createCanvas(R,I){(0,f.unreachable)("Abstract method `_createCanvas` called.")}}n.BaseCanvasFactory=S;class A{constructor({baseUrl:R=null,isCompressed:I=!0}){this.constructor===A&&(0,f.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=R,this.isCompressed=I}async fetch({name:R}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!R)throw new Error("CMap name must be specified.");const I=this.baseUrl+R+(this.isCompressed?".bcmap":""),N=this.isCompressed?f.CMapCompressionType.BINARY:f.CMapCompressionType.NONE;return this._fetchData(I,N).catch(L=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${I}`)})}_fetchData(R,I){(0,f.unreachable)("Abstract method `_fetchData` called.")}}n.BaseCMapReaderFactory=A;class w{constructor({baseUrl:R=null}){this.constructor===w&&(0,f.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=R}async fetch({filename:R}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!R)throw new Error("Font filename must be specified.");const I=`${this.baseUrl}${R}`;return this._fetchData(I).catch(N=>{throw new Error(`Unable to load font data at: ${I}`)})}_fetchData(R){(0,f.unreachable)("Abstract method `_fetchData` called.")}}n.BaseStandardFontDataFactory=w;class C{constructor(){this.constructor===C&&(0,f.unreachable)("Cannot initialize BaseSVGFactory.")}create(R,I,N=!1){if(R<=0||I<=0)throw new Error("Invalid SVG dimensions");const L=this._createSVG("svg:svg");return L.setAttribute("version","1.1"),N||(L.setAttribute("width",`${R}px`),L.setAttribute("height",`${I}px`)),L.setAttribute("preserveAspectRatio","none"),L.setAttribute("viewBox",`0 0 ${R} ${I}`),L}createElement(R){if(typeof R!="string")throw new Error("Invalid SVG element type");return this._createSVG(R)}_createSVG(R){(0,f.unreachable)("Abstract method `_createSVG` called.")}}n.BaseSVGFactory=C}),((s,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.MurmurHash3_64=void 0;var f=u(1);const y=3285377520,S=4294901760,A=65535;class w{constructor(T){this.h1=T?T&4294967295:y,this.h2=T?T&4294967295:y}update(T){let R,I;if(typeof T=="string"){R=new Uint8Array(T.length*2),I=0;for(let te=0,de=T.length;te<de;te++){const se=T.charCodeAt(te);se<=255?R[I++]=se:(R[I++]=se>>>8,R[I++]=se&255)}}else if((0,f.isArrayBuffer)(T))R=T.slice(),I=R.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const N=I>>2,L=I-N*4,F=new Uint32Array(R.buffer,0,N);let H=0,z=0,U=this.h1,G=this.h2;const Y=3432918353,K=461845907,Z=Y&A,J=K&A;for(let te=0;te<N;te++)te&1?(H=F[te],H=H*Y&S|H*Z&A,H=H<<15|H>>>17,H=H*K&S|H*J&A,U^=H,U=U<<13|U>>>19,U=U*5+3864292196):(z=F[te],z=z*Y&S|z*Z&A,z=z<<15|z>>>17,z=z*K&S|z*J&A,G^=z,G=G<<13|G>>>19,G=G*5+3864292196);switch(H=0,L){case 3:H^=R[N*4+2]<<16;case 2:H^=R[N*4+1]<<8;case 1:H^=R[N*4],H=H*Y&S|H*Z&A,H=H<<15|H>>>17,H=H*K&S|H*J&A,N&1?U^=H:G^=H}this.h1=U,this.h2=G}hexdigest(){let T=this.h1,R=this.h2;return T^=R>>>1,T=T*3981806797&S|T*36045&A,R=R*4283543511&S|((R<<16|T>>>16)*2950163797&S)>>>16,T^=R>>>1,T=T*444984403&S|T*60499&A,R=R*3301882366&S|((R<<16|T>>>16)*3120437893&S)>>>16,T^=R>>>1,(T>>>0).toString(16).padStart(8,"0")+(R>>>0).toString(16).padStart(8,"0")}}n.MurmurHash3_64=w}),((s,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.FontLoader=n.FontFaceObject=void 0;var f=u(1);class y{#e=new Set;constructor({ownerDocument:w=globalThis.document,styleElement:C=null}){this._document=w,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(w){this.nativeFontFaces.add(w),this._document.fonts.add(w)}removeNativeFontFace(w){this.nativeFontFaces.delete(w),this._document.fonts.delete(w)}insertRule(w){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const C=this.styleElement.sheet;C.insertRule(w,C.cssRules.length)}clear(){for(const w of this.nativeFontFaces)this._document.fonts.delete(w);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(w){if(!(!w||this.#e.has(w.loadedName))){if((0,f.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:C,src:T,style:R}=w,I=new FontFace(C,T,R);this.addNativeFontFace(I);try{await I.load(),this.#e.add(C)}catch{(0,f.warn)(`Cannot load system font: ${w.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(I)}return}(0,f.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(w){if(w.attached||w.missingFile&&!w.systemFontInfo)return;if(w.attached=!0,w.systemFontInfo){await this.loadSystemFont(w.systemFontInfo);return}if(this.isFontLoadingAPISupported){const T=w.createNativeFontFace();if(T){this.addNativeFontFace(T);try{await T.loaded}catch(R){throw(0,f.warn)(`Failed to load font '${T.family}': '${R}'.`),w.disableFontFace=!0,R}}return}const C=w.createFontFaceRule();if(C){if(this.insertRule(C),this.isSyncFontLoadingSupported)return;await new Promise(T=>{const R=this._queueLoadingCallback(T);this._prepareFontLoadEvent(w,R)})}}get isFontLoadingAPISupported(){const w=!!this._document?.fonts;return(0,f.shadow)(this,"isFontLoadingAPISupported",w)}get isSyncFontLoadingSupported(){let w=!1;return(f.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(w=!0),(0,f.shadow)(this,"isSyncFontLoadingSupported",w)}_queueLoadingCallback(w){function C(){for((0,f.assert)(!R.done,"completeRequest() cannot be called twice."),R.done=!0;T.length>0&&T[0].done;){const I=T.shift();setTimeout(I.callback,0)}}const{loadingRequests:T}=this,R={done:!1,complete:C,callback:w};return T.push(R),R}get _loadTestFont(){const w=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,f.shadow)(this,"_loadTestFont",w)}_prepareFontLoadEvent(w,C){function T(se,ne){return se.charCodeAt(ne)<<24|se.charCodeAt(ne+1)<<16|se.charCodeAt(ne+2)<<8|se.charCodeAt(ne+3)&255}function R(se,ne,ge,Ee){const we=se.substring(0,ne),Ie=se.substring(ne+ge);return we+Ee+Ie}let I,N;const L=this._document.createElement("canvas");L.width=1,L.height=1;const F=L.getContext("2d");let H=0;function z(se,ne){if(++H>30){(0,f.warn)("Load test font never loaded."),ne();return}if(F.font="30px "+se,F.fillText(".",0,20),F.getImageData(0,0,1,1).data[3]>0){ne();return}setTimeout(z.bind(null,se,ne))}const U=`lt${Date.now()}${this.loadTestFontId++}`;let G=this._loadTestFont;G=R(G,976,U.length,U);const Y=16,K=1482184792;let Z=T(G,Y);for(I=0,N=U.length-3;I<N;I+=4)Z=Z-K+T(U,I)|0;I<U.length&&(Z=Z-K+T(U+"XXX",I)|0),G=R(G,Y,4,(0,f.string32)(Z));const J=`url(data:font/opentype;base64,${btoa(G)});`,te=`@font-face {font-family:"${U}";src:${J}}`;this.insertRule(te);const de=this._document.createElement("div");de.style.visibility="hidden",de.style.width=de.style.height="10px",de.style.position="absolute",de.style.top=de.style.left="0px";for(const se of[w.loadedName,U]){const ne=this._document.createElement("span");ne.textContent="Hi",ne.style.fontFamily=se,de.append(ne)}this._document.body.append(de),z(U,()=>{de.remove(),C.complete()})}}n.FontLoader=y;class S{constructor(w,{isEvalSupported:C=!0,disableFontFace:T=!1,ignoreErrors:R=!1,inspectFont:I=null}){this.compiledGlyphs=Object.create(null);for(const N in w)this[N]=w[N];this.isEvalSupported=C!==!1,this.disableFontFace=T===!0,this.ignoreErrors=R===!0,this._inspectFont=I}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let w;if(!this.cssFontInfo)w=new FontFace(this.loadedName,this.data,{});else{const C={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(C.style=`oblique ${this.cssFontInfo.italicAngle}deg`),w=new FontFace(this.cssFontInfo.fontFamily,this.data,C)}return this._inspectFont?.(this),w}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const w=(0,f.bytesToString)(this.data),C=`url(data:${this.mimetype};base64,${btoa(w)});`;let T;if(!this.cssFontInfo)T=`@font-face {font-family:"${this.loadedName}";src:${C}}`;else{let R=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(R+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),T=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${R}src:${C}}`}return this._inspectFont?.(this,C),T}getPathGenerator(w,C){if(this.compiledGlyphs[C]!==void 0)return this.compiledGlyphs[C];let T;try{T=w.get(this.loadedName+"_path_"+C)}catch(R){if(!this.ignoreErrors)throw R;return(0,f.warn)(`getPathGenerator - ignoring character: "${R}".`),this.compiledGlyphs[C]=function(I,N){}}if(this.isEvalSupported&&f.FeatureTest.isEvalSupported){const R=[];for(const I of T){const N=I.args!==void 0?I.args.join(","):"";R.push("c.",I.cmd,"(",N,`);
`)}return this.compiledGlyphs[C]=new Function("c","size",R.join(""))}return this.compiledGlyphs[C]=function(R,I){for(const N of T)N.cmd==="scale"&&(N.args=[I,-I]),R[N.cmd].apply(R,N.args)}}}n.FontFaceObject=S}),((s,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.NodeStandardFontDataFactory=n.NodeFilterFactory=n.NodeCanvasFactory=n.NodeCMapReaderFactory=void 0;var f=u(7);u(1);const y=function(T){return new Promise((R,I)=>{require$$5.readFile(T,(N,L)=>{if(N||!L){I(new Error(N));return}R(new Uint8Array(L))})})};class S extends f.BaseFilterFactory{}n.NodeFilterFactory=S;class A extends f.BaseCanvasFactory{_createCanvas(R,I){return require$$5.createCanvas(R,I)}}n.NodeCanvasFactory=A;class w extends f.BaseCMapReaderFactory{_fetchData(R,I){return y(R).then(N=>({cMapData:N,compressionType:I}))}}n.NodeCMapReaderFactory=w;class C extends f.BaseStandardFontDataFactory{_fetchData(R){return y(R)}}n.NodeStandardFontDataFactory=C}),((s,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.CanvasGraphics=void 0;var f=u(1),y=u(6),S=u(12),A=u(13);const w=16,C=100,T=4096,R=15,I=10,N=1e3,L=16;function F(Te,Se){if(Te._removeMirroring)throw new Error("Context is already forwarding operations.");Te.__originalSave=Te.save,Te.__originalRestore=Te.restore,Te.__originalRotate=Te.rotate,Te.__originalScale=Te.scale,Te.__originalTranslate=Te.translate,Te.__originalTransform=Te.transform,Te.__originalSetTransform=Te.setTransform,Te.__originalResetTransform=Te.resetTransform,Te.__originalClip=Te.clip,Te.__originalMoveTo=Te.moveTo,Te.__originalLineTo=Te.lineTo,Te.__originalBezierCurveTo=Te.bezierCurveTo,Te.__originalRect=Te.rect,Te.__originalClosePath=Te.closePath,Te.__originalBeginPath=Te.beginPath,Te._removeMirroring=()=>{Te.save=Te.__originalSave,Te.restore=Te.__originalRestore,Te.rotate=Te.__originalRotate,Te.scale=Te.__originalScale,Te.translate=Te.__originalTranslate,Te.transform=Te.__originalTransform,Te.setTransform=Te.__originalSetTransform,Te.resetTransform=Te.__originalResetTransform,Te.clip=Te.__originalClip,Te.moveTo=Te.__originalMoveTo,Te.lineTo=Te.__originalLineTo,Te.bezierCurveTo=Te.__originalBezierCurveTo,Te.rect=Te.__originalRect,Te.closePath=Te.__originalClosePath,Te.beginPath=Te.__originalBeginPath,delete Te._removeMirroring},Te.save=function(){Se.save(),this.__originalSave()},Te.restore=function(){Se.restore(),this.__originalRestore()},Te.translate=function(oe,ae){Se.translate(oe,ae),this.__originalTranslate(oe,ae)},Te.scale=function(oe,ae){Se.scale(oe,ae),this.__originalScale(oe,ae)},Te.transform=function(oe,ae,be,he,ue,ye){Se.transform(oe,ae,be,he,ue,ye),this.__originalTransform(oe,ae,be,he,ue,ye)},Te.setTransform=function(oe,ae,be,he,ue,ye){Se.setTransform(oe,ae,be,he,ue,ye),this.__originalSetTransform(oe,ae,be,he,ue,ye)},Te.resetTransform=function(){Se.resetTransform(),this.__originalResetTransform()},Te.rotate=function(oe){Se.rotate(oe),this.__originalRotate(oe)},Te.clip=function(oe){Se.clip(oe),this.__originalClip(oe)},Te.moveTo=function(oe,ae){Se.moveTo(oe,ae),this.__originalMoveTo(oe,ae)},Te.lineTo=function(oe,ae){Se.lineTo(oe,ae),this.__originalLineTo(oe,ae)},Te.bezierCurveTo=function(oe,ae,be,he,ue,ye){Se.bezierCurveTo(oe,ae,be,he,ue,ye),this.__originalBezierCurveTo(oe,ae,be,he,ue,ye)},Te.rect=function(oe,ae,be,he){Se.rect(oe,ae,be,he),this.__originalRect(oe,ae,be,he)},Te.closePath=function(){Se.closePath(),this.__originalClosePath()},Te.beginPath=function(){Se.beginPath(),this.__originalBeginPath()}}class H{constructor(Se){this.canvasFactory=Se,this.cache=Object.create(null)}getCanvas(Se,oe,ae){let be;return this.cache[Se]!==void 0?(be=this.cache[Se],this.canvasFactory.reset(be,oe,ae)):(be=this.canvasFactory.create(oe,ae),this.cache[Se]=be),be}delete(Se){delete this.cache[Se]}clear(){for(const Se in this.cache){const oe=this.cache[Se];this.canvasFactory.destroy(oe),delete this.cache[Se]}}}function z(Te,Se,oe,ae,be,he,ue,ye,ce,_e){const[ke,Pe,$e,xe,Ne,je]=(0,y.getCurrentTransform)(Te);if(Pe===0&&$e===0){const Je=ue*ke+Ne,ot=Math.round(Je),ze=ye*xe+je,pt=Math.round(ze),yt=(ue+ce)*ke+Ne,ut=Math.abs(Math.round(yt)-ot)||1,Et=(ye+_e)*xe+je,qe=Math.abs(Math.round(Et)-pt)||1;return Te.setTransform(Math.sign(ke),0,0,Math.sign(xe),ot,pt),Te.drawImage(Se,oe,ae,be,he,0,0,ut,qe),Te.setTransform(ke,Pe,$e,xe,Ne,je),[ut,qe]}if(ke===0&&xe===0){const Je=ye*$e+Ne,ot=Math.round(Je),ze=ue*Pe+je,pt=Math.round(ze),yt=(ye+_e)*$e+Ne,ut=Math.abs(Math.round(yt)-ot)||1,Et=(ue+ce)*Pe+je,qe=Math.abs(Math.round(Et)-pt)||1;return Te.setTransform(0,Math.sign(Pe),Math.sign($e),0,ot,pt),Te.drawImage(Se,oe,ae,be,he,0,0,qe,ut),Te.setTransform(ke,Pe,$e,xe,Ne,je),[qe,ut]}Te.drawImage(Se,oe,ae,be,he,ue,ye,ce,_e);const He=Math.hypot(ke,Pe),Ye=Math.hypot($e,xe);return[He*ce,Ye*_e]}function U(Te){const{width:Se,height:oe}=Te;if(Se>N||oe>N)return null;const ae=1e3,be=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),he=Se+1;let ue=new Uint8Array(he*(oe+1)),ye,ce,_e;const ke=Se+7&-8;let Pe=new Uint8Array(ke*oe),$e=0;for(const He of Te.data){let Ye=128;for(;Ye>0;)Pe[$e++]=He&Ye?0:255,Ye>>=1}let xe=0;for($e=0,Pe[$e]!==0&&(ue[0]=1,++xe),ce=1;ce<Se;ce++)Pe[$e]!==Pe[$e+1]&&(ue[ce]=Pe[$e]?2:1,++xe),$e++;for(Pe[$e]!==0&&(ue[ce]=2,++xe),ye=1;ye<oe;ye++){$e=ye*ke,_e=ye*he,Pe[$e-ke]!==Pe[$e]&&(ue[_e]=Pe[$e]?1:8,++xe);let He=(Pe[$e]?4:0)+(Pe[$e-ke]?8:0);for(ce=1;ce<Se;ce++)He=(He>>2)+(Pe[$e+1]?4:0)+(Pe[$e-ke+1]?8:0),be[He]&&(ue[_e+ce]=be[He],++xe),$e++;if(Pe[$e-ke]!==Pe[$e]&&(ue[_e+ce]=Pe[$e]?2:4,++xe),xe>ae)return null}for($e=ke*(oe-1),_e=ye*he,Pe[$e]!==0&&(ue[_e]=8,++xe),ce=1;ce<Se;ce++)Pe[$e]!==Pe[$e+1]&&(ue[_e+ce]=Pe[$e]?4:8,++xe),$e++;if(Pe[$e]!==0&&(ue[_e+ce]=4,++xe),xe>ae)return null;const Ne=new Int32Array([0,he,-1,0,-he,0,0,0,1]),je=new Path2D;for(ye=0;xe&&ye<=oe;ye++){let He=ye*he;const Ye=He+Se;for(;He<Ye&&!ue[He];)He++;if(He===Ye)continue;je.moveTo(He%he,ye);const Je=He;let ot=ue[He];do{const ze=Ne[ot];do He+=ze;while(!ue[He]);const pt=ue[He];pt!==5&&pt!==10?(ot=pt,ue[He]=0):(ot=pt&51*ot>>4,ue[He]&=ot>>2|ot<<2),je.lineTo(He%he,He/he|0),ue[He]||--xe}while(Je!==He);--ye}return Pe=null,ue=null,function(He){He.save(),He.scale(1/Se,-1/oe),He.translate(0,-oe),He.fill(je),He.beginPath(),He.restore()}}class G{constructor(Se,oe){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=f.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=f.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=f.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,Se,oe])}clone(){const Se=Object.create(this);return Se.clipBox=this.clipBox.slice(),Se}setCurrentPoint(Se,oe){this.x=Se,this.y=oe}updatePathMinMax(Se,oe,ae){[oe,ae]=f.Util.applyTransform([oe,ae],Se),this.minX=Math.min(this.minX,oe),this.minY=Math.min(this.minY,ae),this.maxX=Math.max(this.maxX,oe),this.maxY=Math.max(this.maxY,ae)}updateRectMinMax(Se,oe){const ae=f.Util.applyTransform(oe,Se),be=f.Util.applyTransform(oe.slice(2),Se);this.minX=Math.min(this.minX,ae[0],be[0]),this.minY=Math.min(this.minY,ae[1],be[1]),this.maxX=Math.max(this.maxX,ae[0],be[0]),this.maxY=Math.max(this.maxY,ae[1],be[1])}updateScalingPathMinMax(Se,oe){f.Util.scaleMinMax(Se,oe),this.minX=Math.min(this.minX,oe[0]),this.maxX=Math.max(this.maxX,oe[1]),this.minY=Math.min(this.minY,oe[2]),this.maxY=Math.max(this.maxY,oe[3])}updateCurvePathMinMax(Se,oe,ae,be,he,ue,ye,ce,_e,ke){const Pe=f.Util.bezierBoundingBox(oe,ae,be,he,ue,ye,ce,_e);if(ke){ke[0]=Math.min(ke[0],Pe[0],Pe[2]),ke[1]=Math.max(ke[1],Pe[0],Pe[2]),ke[2]=Math.min(ke[2],Pe[1],Pe[3]),ke[3]=Math.max(ke[3],Pe[1],Pe[3]);return}this.updateRectMinMax(Se,Pe)}getPathBoundingBox(Se=S.PathType.FILL,oe=null){const ae=[this.minX,this.minY,this.maxX,this.maxY];if(Se===S.PathType.STROKE){oe||(0,f.unreachable)("Stroke bounding box must include transform.");const be=f.Util.singularValueDecompose2dScale(oe),he=be[0]*this.lineWidth/2,ue=be[1]*this.lineWidth/2;ae[0]-=he,ae[1]-=ue,ae[2]+=he,ae[3]+=ue}return ae}updateClipFromPath(){const Se=f.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(Se||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(Se){this.clipBox=Se,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(Se=S.PathType.FILL,oe=null){return f.Util.intersect(this.clipBox,this.getPathBoundingBox(Se,oe))}}function Y(Te,Se){if(typeof ImageData<"u"&&Se instanceof ImageData){Te.putImageData(Se,0,0);return}const oe=Se.height,ae=Se.width,be=oe%L,he=(oe-be)/L,ue=be===0?he:he+1,ye=Te.createImageData(ae,L);let ce=0,_e;const ke=Se.data,Pe=ye.data;let $e,xe,Ne,je;if(Se.kind===f.ImageKind.GRAYSCALE_1BPP){const He=ke.byteLength,Ye=new Uint32Array(Pe.buffer,0,Pe.byteLength>>2),Je=Ye.length,ot=ae+7>>3,ze=4294967295,pt=f.FeatureTest.isLittleEndian?4278190080:255;for($e=0;$e<ue;$e++){for(Ne=$e<he?L:be,_e=0,xe=0;xe<Ne;xe++){const yt=He-ce;let ut=0;const Et=yt>ot?ae:yt*8-7,qe=Et&-8;let Le=0,lt=0;for(;ut<qe;ut+=8)lt=ke[ce++],Ye[_e++]=lt&128?ze:pt,Ye[_e++]=lt&64?ze:pt,Ye[_e++]=lt&32?ze:pt,Ye[_e++]=lt&16?ze:pt,Ye[_e++]=lt&8?ze:pt,Ye[_e++]=lt&4?ze:pt,Ye[_e++]=lt&2?ze:pt,Ye[_e++]=lt&1?ze:pt;for(;ut<Et;ut++)Le===0&&(lt=ke[ce++],Le=128),Ye[_e++]=lt&Le?ze:pt,Le>>=1}for(;_e<Je;)Ye[_e++]=0;Te.putImageData(ye,0,$e*L)}}else if(Se.kind===f.ImageKind.RGBA_32BPP){for(xe=0,je=ae*L*4,$e=0;$e<he;$e++)Pe.set(ke.subarray(ce,ce+je)),ce+=je,Te.putImageData(ye,0,xe),xe+=L;$e<ue&&(je=ae*be*4,Pe.set(ke.subarray(ce,ce+je)),Te.putImageData(ye,0,xe))}else if(Se.kind===f.ImageKind.RGB_24BPP)for(Ne=L,je=ae*Ne,$e=0;$e<ue;$e++){for($e>=he&&(Ne=be,je=ae*Ne),_e=0,xe=je;xe--;)Pe[_e++]=ke[ce++],Pe[_e++]=ke[ce++],Pe[_e++]=ke[ce++],Pe[_e++]=255;Te.putImageData(ye,0,$e*L)}else throw new Error(`bad image kind: ${Se.kind}`)}function K(Te,Se){if(Se.bitmap){Te.drawImage(Se.bitmap,0,0);return}const oe=Se.height,ae=Se.width,be=oe%L,he=(oe-be)/L,ue=be===0?he:he+1,ye=Te.createImageData(ae,L);let ce=0;const _e=Se.data,ke=ye.data;for(let Pe=0;Pe<ue;Pe++){const $e=Pe<he?L:be;({srcPos:ce}=(0,A.convertBlackAndWhiteToRGBA)({src:_e,srcPos:ce,dest:ke,width:ae,height:$e,nonBlackColor:0})),Te.putImageData(ye,0,Pe*L)}}function Z(Te,Se){const oe=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const ae of oe)Te[ae]!==void 0&&(Se[ae]=Te[ae]);Te.setLineDash!==void 0&&(Se.setLineDash(Te.getLineDash()),Se.lineDashOffset=Te.lineDashOffset)}function J(Te){if(Te.strokeStyle=Te.fillStyle="#000000",Te.fillRule="nonzero",Te.globalAlpha=1,Te.lineWidth=1,Te.lineCap="butt",Te.lineJoin="miter",Te.miterLimit=10,Te.globalCompositeOperation="source-over",Te.font="10px sans-serif",Te.setLineDash!==void 0&&(Te.setLineDash([]),Te.lineDashOffset=0),!f.isNodeJS){const{filter:Se}=Te;Se!=="none"&&Se!==""&&(Te.filter="none")}}function te(Te,Se,oe,ae){const be=Te.length;for(let he=3;he<be;he+=4){const ue=Te[he];if(ue===0)Te[he-3]=Se,Te[he-2]=oe,Te[he-1]=ae;else if(ue<255){const ye=255-ue;Te[he-3]=Te[he-3]*ue+Se*ye>>8,Te[he-2]=Te[he-2]*ue+oe*ye>>8,Te[he-1]=Te[he-1]*ue+ae*ye>>8}}}function de(Te,Se,oe){const ae=Te.length,be=1/255;for(let he=3;he<ae;he+=4){const ue=oe?oe[Te[he]]:Te[he];Se[he]=Se[he]*ue*be|0}}function se(Te,Se,oe){const ae=Te.length;for(let be=3;be<ae;be+=4){const he=Te[be-3]*77+Te[be-2]*152+Te[be-1]*28;Se[be]=oe?Se[be]*oe[he>>8]>>8:Se[be]*he>>16}}function ne(Te,Se,oe,ae,be,he,ue,ye,ce,_e,ke){const Pe=!!he,$e=Pe?he[0]:0,xe=Pe?he[1]:0,Ne=Pe?he[2]:0,je=be==="Luminosity"?se:de,He=Math.min(ae,Math.ceil(1048576/oe));for(let Ye=0;Ye<ae;Ye+=He){const Je=Math.min(He,ae-Ye),ot=Te.getImageData(ye-_e,Ye+(ce-ke),oe,Je),ze=Se.getImageData(ye,Ye+ce,oe,Je);Pe&&te(ot.data,$e,xe,Ne),je(ot.data,ze.data,ue),Se.putImageData(ze,ye,Ye+ce)}}function ge(Te,Se,oe,ae){const be=ae[0],he=ae[1],ue=ae[2]-be,ye=ae[3]-he;ue===0||ye===0||(ne(Se.context,oe,ue,ye,Se.subtype,Se.backdrop,Se.transferMap,be,he,Se.offsetX,Se.offsetY),Te.save(),Te.globalAlpha=1,Te.globalCompositeOperation="source-over",Te.setTransform(1,0,0,1,0,0),Te.drawImage(oe.canvas,0,0),Te.restore())}function Ee(Te,Se){const oe=f.Util.singularValueDecompose2dScale(Te);oe[0]=Math.fround(oe[0]),oe[1]=Math.fround(oe[1]);const ae=Math.fround((globalThis.devicePixelRatio||1)*y.PixelsPerInch.PDF_TO_CSS_UNITS);return Se!==void 0?Se:oe[0]<=ae||oe[1]<=ae}const we=["butt","round","square"],Ie=["miter","round","bevel"],Be={},Me={};class Re{constructor(Se,oe,ae,be,he,{optionalContentConfig:ue,markedContentStack:ye=null},ce,_e){this.ctx=Se,this.current=new G(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=oe,this.objs=ae,this.canvasFactory=be,this.filterFactory=he,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=ye||[],this.optionalContentConfig=ue,this.cachedCanvases=new H(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=ce,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=_e,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(Se,oe=null){return typeof Se=="string"?Se.startsWith("g_")?this.commonObjs.get(Se):this.objs.get(Se):oe}beginDrawing({transform:Se,viewport:oe,transparency:ae=!1,background:be=null}){const he=this.ctx.canvas.width,ue=this.ctx.canvas.height,ye=this.ctx.fillStyle;if(this.ctx.fillStyle=be||"#ffffff",this.ctx.fillRect(0,0,he,ue),this.ctx.fillStyle=ye,ae){const ce=this.cachedCanvases.getCanvas("transparent",he,ue);this.compositeCtx=this.ctx,this.transparentCanvas=ce.canvas,this.ctx=ce.context,this.ctx.save(),this.ctx.transform(...(0,y.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),J(this.ctx),Se&&(this.ctx.transform(...Se),this.outputScaleX=Se[0],this.outputScaleY=Se[0]),this.ctx.transform(...oe.transform),this.viewportScale=oe.scale,this.baseTransform=(0,y.getCurrentTransform)(this.ctx)}executeOperatorList(Se,oe,ae,be){const he=Se.argsArray,ue=Se.fnArray;let ye=oe||0;const ce=he.length;if(ce===ye)return ye;const _e=ce-ye>I&&typeof ae=="function",ke=_e?Date.now()+R:0;let Pe=0;const $e=this.commonObjs,xe=this.objs;let Ne;for(;;){if(be!==void 0&&ye===be.nextBreakPoint)return be.breakIt(ye,ae),ye;if(Ne=ue[ye],Ne!==f.OPS.dependency)this[Ne].apply(this,he[ye]);else for(const je of he[ye]){const He=je.startsWith("g_")?$e:xe;if(!He.has(je))return He.get(je,ae),ye}if(ye++,ye===ce)return ye;if(_e&&++Pe>I){if(Date.now()>ke)return ae(),ye;Pe=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const Se of this._cachedBitmapsMap.values()){for(const oe of Se.values())typeof HTMLCanvasElement<"u"&&oe instanceof HTMLCanvasElement&&(oe.width=oe.height=0);Se.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){const Se=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(Se!=="none"){const oe=this.ctx.filter;this.ctx.filter=Se,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=oe}}}_scaleImage(Se,oe){const ae=Se.width,be=Se.height;let he=Math.max(Math.hypot(oe[0],oe[1]),1),ue=Math.max(Math.hypot(oe[2],oe[3]),1),ye=ae,ce=be,_e="prescale1",ke,Pe;for(;he>2&&ye>1||ue>2&&ce>1;){let $e=ye,xe=ce;he>2&&ye>1&&($e=ye>=16384?Math.floor(ye/2)-1||1:Math.ceil(ye/2),he/=ye/$e),ue>2&&ce>1&&(xe=ce>=16384?Math.floor(ce/2)-1||1:Math.ceil(ce)/2,ue/=ce/xe),ke=this.cachedCanvases.getCanvas(_e,$e,xe),Pe=ke.context,Pe.clearRect(0,0,$e,xe),Pe.drawImage(Se,0,0,ye,ce,0,0,$e,xe),Se=ke.canvas,ye=$e,ce=xe,_e=_e==="prescale1"?"prescale2":"prescale1"}return{img:Se,paintWidth:ye,paintHeight:ce}}_createMaskCanvas(Se){const oe=this.ctx,{width:ae,height:be}=Se,he=this.current.fillColor,ue=this.current.patternFill,ye=(0,y.getCurrentTransform)(oe);let ce,_e,ke,Pe;if((Se.bitmap||Se.data)&&Se.count>1){const ut=Se.bitmap||Se.data.buffer;_e=JSON.stringify(ue?ye:[ye.slice(0,4),he]),ce=this._cachedBitmapsMap.get(ut),ce||(ce=new Map,this._cachedBitmapsMap.set(ut,ce));const Et=ce.get(_e);if(Et&&!ue){const qe=Math.round(Math.min(ye[0],ye[2])+ye[4]),Le=Math.round(Math.min(ye[1],ye[3])+ye[5]);return{canvas:Et,offsetX:qe,offsetY:Le}}ke=Et}ke||(Pe=this.cachedCanvases.getCanvas("maskCanvas",ae,be),K(Pe.context,Se));let $e=f.Util.transform(ye,[1/ae,0,0,-1/be,0,0]);$e=f.Util.transform($e,[1,0,0,1,0,-be]);const xe=f.Util.applyTransform([0,0],$e),Ne=f.Util.applyTransform([ae,be],$e),je=f.Util.normalizeRect([xe[0],xe[1],Ne[0],Ne[1]]),He=Math.round(je[2]-je[0])||1,Ye=Math.round(je[3]-je[1])||1,Je=this.cachedCanvases.getCanvas("fillCanvas",He,Ye),ot=Je.context,ze=Math.min(xe[0],Ne[0]),pt=Math.min(xe[1],Ne[1]);ot.translate(-ze,-pt),ot.transform(...$e),ke||(ke=this._scaleImage(Pe.canvas,(0,y.getCurrentTransformInverse)(ot)),ke=ke.img,ce&&ue&&ce.set(_e,ke)),ot.imageSmoothingEnabled=Ee((0,y.getCurrentTransform)(ot),Se.interpolate),z(ot,ke,0,0,ke.width,ke.height,0,0,ae,be),ot.globalCompositeOperation="source-in";const yt=f.Util.transform((0,y.getCurrentTransformInverse)(ot),[1,0,0,1,-ze,-pt]);return ot.fillStyle=ue?he.getPattern(oe,this,yt,S.PathType.FILL):he,ot.fillRect(0,0,ae,be),ce&&!ue&&(this.cachedCanvases.delete("fillCanvas"),ce.set(_e,Je.canvas)),{canvas:Je.canvas,offsetX:Math.round(ze),offsetY:Math.round(pt)}}setLineWidth(Se){Se!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=Se,this.ctx.lineWidth=Se}setLineCap(Se){this.ctx.lineCap=we[Se]}setLineJoin(Se){this.ctx.lineJoin=Ie[Se]}setMiterLimit(Se){this.ctx.miterLimit=Se}setDash(Se,oe){const ae=this.ctx;ae.setLineDash!==void 0&&(ae.setLineDash(Se),ae.lineDashOffset=oe)}setRenderingIntent(Se){}setFlatness(Se){}setGState(Se){for(const[oe,ae]of Se)switch(oe){case"LW":this.setLineWidth(ae);break;case"LC":this.setLineCap(ae);break;case"LJ":this.setLineJoin(ae);break;case"ML":this.setMiterLimit(ae);break;case"D":this.setDash(ae[0],ae[1]);break;case"RI":this.setRenderingIntent(ae);break;case"FL":this.setFlatness(ae);break;case"Font":this.setFont(ae[0],ae[1]);break;case"CA":this.current.strokeAlpha=ae;break;case"ca":this.current.fillAlpha=ae,this.ctx.globalAlpha=ae;break;case"BM":this.ctx.globalCompositeOperation=ae;break;case"SMask":this.current.activeSMask=ae?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(ae);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const Se=this.inSMaskMode;this.current.activeSMask&&!Se?this.beginSMaskMode():!this.current.activeSMask&&Se&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const Se=this.ctx.canvas.width,oe=this.ctx.canvas.height,ae="smaskGroupAt"+this.groupLevel,be=this.cachedCanvases.getCanvas(ae,Se,oe);this.suspendedCtx=this.ctx,this.ctx=be.context;const he=this.ctx;he.setTransform(...(0,y.getCurrentTransform)(this.suspendedCtx)),Z(this.suspendedCtx,he),F(he,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Z(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(Se){if(!this.current.activeSMask)return;Se?(Se[0]=Math.floor(Se[0]),Se[1]=Math.floor(Se[1]),Se[2]=Math.ceil(Se[2]),Se[3]=Math.ceil(Se[3])):Se=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const oe=this.current.activeSMask,ae=this.suspendedCtx;ge(ae,oe,this.ctx,Se),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(Z(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const Se=this.current;this.stateStack.push(Se),this.current=Se.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Z(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(Se,oe,ae,be,he,ue){this.ctx.transform(Se,oe,ae,be,he,ue),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(Se,oe,ae){const be=this.ctx,he=this.current;let ue=he.x,ye=he.y,ce,_e;const ke=(0,y.getCurrentTransform)(be),Pe=ke[0]===0&&ke[3]===0||ke[1]===0&&ke[2]===0,$e=Pe?ae.slice(0):null;for(let xe=0,Ne=0,je=Se.length;xe<je;xe++)switch(Se[xe]|0){case f.OPS.rectangle:ue=oe[Ne++],ye=oe[Ne++];const He=oe[Ne++],Ye=oe[Ne++],Je=ue+He,ot=ye+Ye;be.moveTo(ue,ye),He===0||Ye===0?be.lineTo(Je,ot):(be.lineTo(Je,ye),be.lineTo(Je,ot),be.lineTo(ue,ot)),Pe||he.updateRectMinMax(ke,[ue,ye,Je,ot]),be.closePath();break;case f.OPS.moveTo:ue=oe[Ne++],ye=oe[Ne++],be.moveTo(ue,ye),Pe||he.updatePathMinMax(ke,ue,ye);break;case f.OPS.lineTo:ue=oe[Ne++],ye=oe[Ne++],be.lineTo(ue,ye),Pe||he.updatePathMinMax(ke,ue,ye);break;case f.OPS.curveTo:ce=ue,_e=ye,ue=oe[Ne+4],ye=oe[Ne+5],be.bezierCurveTo(oe[Ne],oe[Ne+1],oe[Ne+2],oe[Ne+3],ue,ye),he.updateCurvePathMinMax(ke,ce,_e,oe[Ne],oe[Ne+1],oe[Ne+2],oe[Ne+3],ue,ye,$e),Ne+=6;break;case f.OPS.curveTo2:ce=ue,_e=ye,be.bezierCurveTo(ue,ye,oe[Ne],oe[Ne+1],oe[Ne+2],oe[Ne+3]),he.updateCurvePathMinMax(ke,ce,_e,ue,ye,oe[Ne],oe[Ne+1],oe[Ne+2],oe[Ne+3],$e),ue=oe[Ne+2],ye=oe[Ne+3],Ne+=4;break;case f.OPS.curveTo3:ce=ue,_e=ye,ue=oe[Ne+2],ye=oe[Ne+3],be.bezierCurveTo(oe[Ne],oe[Ne+1],ue,ye,ue,ye),he.updateCurvePathMinMax(ke,ce,_e,oe[Ne],oe[Ne+1],ue,ye,ue,ye,$e),Ne+=4;break;case f.OPS.closePath:be.closePath();break}Pe&&he.updateScalingPathMinMax(ke,$e),he.setCurrentPoint(ue,ye)}closePath(){this.ctx.closePath()}stroke(Se=!0){const oe=this.ctx,ae=this.current.strokeColor;oe.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof ae=="object"&&ae?.getPattern?(oe.save(),oe.strokeStyle=ae.getPattern(oe,this,(0,y.getCurrentTransformInverse)(oe),S.PathType.STROKE),this.rescaleAndStroke(!1),oe.restore()):this.rescaleAndStroke(!0)),Se&&this.consumePath(this.current.getClippedPathBoundingBox()),oe.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(Se=!0){const oe=this.ctx,ae=this.current.fillColor,be=this.current.patternFill;let he=!1;be&&(oe.save(),oe.fillStyle=ae.getPattern(oe,this,(0,y.getCurrentTransformInverse)(oe),S.PathType.FILL),he=!0);const ue=this.current.getClippedPathBoundingBox();this.contentVisible&&ue!==null&&(this.pendingEOFill?(oe.fill("evenodd"),this.pendingEOFill=!1):oe.fill()),he&&oe.restore(),Se&&this.consumePath(ue)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Be}eoClip(){this.pendingClip=Me}beginText(){this.current.textMatrix=f.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const Se=this.pendingTextPaths,oe=this.ctx;if(Se===void 0){oe.beginPath();return}oe.save(),oe.beginPath();for(const ae of Se)oe.setTransform(...ae.transform),oe.translate(ae.x,ae.y),ae.addToPath(oe,ae.fontSize);oe.restore(),oe.clip(),oe.beginPath(),delete this.pendingTextPaths}setCharSpacing(Se){this.current.charSpacing=Se}setWordSpacing(Se){this.current.wordSpacing=Se}setHScale(Se){this.current.textHScale=Se/100}setLeading(Se){this.current.leading=-Se}setFont(Se,oe){const ae=this.commonObjs.get(Se),be=this.current;if(!ae)throw new Error(`Can't find font for ${Se}`);if(be.fontMatrix=ae.fontMatrix||f.FONT_IDENTITY_MATRIX,(be.fontMatrix[0]===0||be.fontMatrix[3]===0)&&(0,f.warn)("Invalid font matrix for font "+Se),oe<0?(oe=-oe,be.fontDirection=-1):be.fontDirection=1,this.current.font=ae,this.current.fontSize=oe,ae.isType3Font)return;const he=ae.loadedName||"sans-serif",ue=ae.systemFontInfo?.css||`"${he}", ${ae.fallbackName}`;let ye="normal";ae.black?ye="900":ae.bold&&(ye="bold");const ce=ae.italic?"italic":"normal";let _e=oe;oe<w?_e=w:oe>C&&(_e=C),this.current.fontSizeScale=oe/_e,this.ctx.font=`${ce} ${ye} ${_e}px ${ue}`}setTextRenderingMode(Se){this.current.textRenderingMode=Se}setTextRise(Se){this.current.textRise=Se}moveText(Se,oe){this.current.x=this.current.lineX+=Se,this.current.y=this.current.lineY+=oe}setLeadingMoveText(Se,oe){this.setLeading(-oe),this.moveText(Se,oe)}setTextMatrix(Se,oe,ae,be,he,ue){this.current.textMatrix=[Se,oe,ae,be,he,ue],this.current.textMatrixScale=Math.hypot(Se,oe),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(Se,oe,ae,be){const he=this.ctx,ue=this.current,ye=ue.font,ce=ue.textRenderingMode,_e=ue.fontSize/ue.fontSizeScale,ke=ce&f.TextRenderingMode.FILL_STROKE_MASK,Pe=!!(ce&f.TextRenderingMode.ADD_TO_PATH_FLAG),$e=ue.patternFill&&!ye.missingFile;let xe;(ye.disableFontFace||Pe||$e)&&(xe=ye.getPathGenerator(this.commonObjs,Se)),ye.disableFontFace||$e?(he.save(),he.translate(oe,ae),he.beginPath(),xe(he,_e),be&&he.setTransform(...be),(ke===f.TextRenderingMode.FILL||ke===f.TextRenderingMode.FILL_STROKE)&&he.fill(),(ke===f.TextRenderingMode.STROKE||ke===f.TextRenderingMode.FILL_STROKE)&&he.stroke(),he.restore()):((ke===f.TextRenderingMode.FILL||ke===f.TextRenderingMode.FILL_STROKE)&&he.fillText(Se,oe,ae),(ke===f.TextRenderingMode.STROKE||ke===f.TextRenderingMode.FILL_STROKE)&&he.strokeText(Se,oe,ae)),Pe&&(this.pendingTextPaths||=[]).push({transform:(0,y.getCurrentTransform)(he),x:oe,y:ae,fontSize:_e,addToPath:xe})}get isFontSubpixelAAEnabled(){const{context:Se}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);Se.scale(1.5,1),Se.fillText("I",0,10);const oe=Se.getImageData(0,0,10,10).data;let ae=!1;for(let be=3;be<oe.length;be+=4)if(oe[be]>0&&oe[be]<255){ae=!0;break}return(0,f.shadow)(this,"isFontSubpixelAAEnabled",ae)}showText(Se){const oe=this.current,ae=oe.font;if(ae.isType3Font)return this.showType3Text(Se);const be=oe.fontSize;if(be===0)return;const he=this.ctx,ue=oe.fontSizeScale,ye=oe.charSpacing,ce=oe.wordSpacing,_e=oe.fontDirection,ke=oe.textHScale*_e,Pe=Se.length,$e=ae.vertical,xe=$e?1:-1,Ne=ae.defaultVMetrics,je=be*oe.fontMatrix[0],He=oe.textRenderingMode===f.TextRenderingMode.FILL&&!ae.disableFontFace&&!oe.patternFill;he.save(),he.transform(...oe.textMatrix),he.translate(oe.x,oe.y+oe.textRise),_e>0?he.scale(ke,-1):he.scale(ke,1);let Ye;if(oe.patternFill){he.save();const yt=oe.fillColor.getPattern(he,this,(0,y.getCurrentTransformInverse)(he),S.PathType.FILL);Ye=(0,y.getCurrentTransform)(he),he.restore(),he.fillStyle=yt}let Je=oe.lineWidth;const ot=oe.textMatrixScale;if(ot===0||Je===0){const yt=oe.textRenderingMode&f.TextRenderingMode.FILL_STROKE_MASK;(yt===f.TextRenderingMode.STROKE||yt===f.TextRenderingMode.FILL_STROKE)&&(Je=this.getSinglePixelWidth())}else Je/=ot;if(ue!==1&&(he.scale(ue,ue),Je/=ue),he.lineWidth=Je,ae.isInvalidPDFjsFont){const yt=[];let ut=0;for(const Et of Se)yt.push(Et.unicode),ut+=Et.width;he.fillText(yt.join(""),0,0),oe.x+=ut*je*ke,he.restore(),this.compose();return}let ze=0,pt;for(pt=0;pt<Pe;++pt){const yt=Se[pt];if(typeof yt=="number"){ze+=xe*yt*be/1e3;continue}let ut=!1;const Et=(yt.isSpace?ce:0)+ye,qe=yt.fontChar,Le=yt.accent;let lt,We,Qe=yt.width;if($e){const St=yt.vmetric||Ne,Ct=-(yt.vmetric?St[1]:Qe*.5)*je,jt=St[2]*je;Qe=St?-St[0]:Qe,lt=Ct/ue,We=(ze+jt)/ue}else lt=ze/ue,We=0;if(ae.remeasure&&Qe>0){const St=he.measureText(qe).width*1e3/be*ue;if(Qe<St&&this.isFontSubpixelAAEnabled){const Ct=Qe/St;ut=!0,he.save(),he.scale(Ct,1),lt/=Ct}else Qe!==St&&(lt+=(Qe-St)/2e3*be/ue)}if(this.contentVisible&&(yt.isInFont||ae.missingFile)){if(He&&!Le)he.fillText(qe,lt,We);else if(this.paintChar(qe,lt,We,Ye),Le){const St=lt+be*Le.offset.x/ue,Ct=We-be*Le.offset.y/ue;this.paintChar(Le.fontChar,St,Ct,Ye)}}const at=$e?Qe*je-Et*_e:Qe*je+Et*_e;ze+=at,ut&&he.restore()}$e?oe.y-=ze:oe.x+=ze*ke,he.restore(),this.compose()}showType3Text(Se){const oe=this.ctx,ae=this.current,be=ae.font,he=ae.fontSize,ue=ae.fontDirection,ye=be.vertical?1:-1,ce=ae.charSpacing,_e=ae.wordSpacing,ke=ae.textHScale*ue,Pe=ae.fontMatrix||f.FONT_IDENTITY_MATRIX,$e=Se.length,xe=ae.textRenderingMode===f.TextRenderingMode.INVISIBLE;let Ne,je,He,Ye;if(!(xe||he===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,oe.save(),oe.transform(...ae.textMatrix),oe.translate(ae.x,ae.y),oe.scale(ke,ue),Ne=0;Ne<$e;++Ne){if(je=Se[Ne],typeof je=="number"){Ye=ye*je*he/1e3,this.ctx.translate(Ye,0),ae.x+=Ye*ke;continue}const Je=(je.isSpace?_e:0)+ce,ot=be.charProcOperatorList[je.operatorListId];if(!ot){(0,f.warn)(`Type3 character "${je.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=je,this.save(),oe.scale(he,he),oe.transform(...Pe),this.executeOperatorList(ot),this.restore()),He=f.Util.applyTransform([je.width,0],Pe)[0]*he+Je,oe.translate(He,0),ae.x+=He*ke}oe.restore(),this.processingType3=null}}setCharWidth(Se,oe){}setCharWidthAndBounds(Se,oe,ae,be,he,ue){this.ctx.rect(ae,be,he-ae,ue-be),this.ctx.clip(),this.endPath()}getColorN_Pattern(Se){let oe;if(Se[0]==="TilingPattern"){const ae=Se[1],be=this.baseTransform||(0,y.getCurrentTransform)(this.ctx),he={createCanvasGraphics:ue=>new Re(ue,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};oe=new S.TilingPattern(Se,ae,this.ctx,he,be)}else oe=this._getPattern(Se[1],Se[2]);return oe}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(Se,oe,ae){const be=f.Util.makeHexColor(Se,oe,ae);this.ctx.strokeStyle=be,this.current.strokeColor=be}setFillRGBColor(Se,oe,ae){const be=f.Util.makeHexColor(Se,oe,ae);this.ctx.fillStyle=be,this.current.fillColor=be,this.current.patternFill=!1}_getPattern(Se,oe=null){let ae;return this.cachedPatterns.has(Se)?ae=this.cachedPatterns.get(Se):(ae=(0,S.getShadingPattern)(this.getObject(Se)),this.cachedPatterns.set(Se,ae)),oe&&(ae.matrix=oe),ae}shadingFill(Se){if(!this.contentVisible)return;const oe=this.ctx;this.save();const ae=this._getPattern(Se);oe.fillStyle=ae.getPattern(oe,this,(0,y.getCurrentTransformInverse)(oe),S.PathType.SHADING);const be=(0,y.getCurrentTransformInverse)(oe);if(be){const{width:he,height:ue}=oe.canvas,[ye,ce,_e,ke]=f.Util.getAxialAlignedBoundingBox([0,0,he,ue],be);this.ctx.fillRect(ye,ce,_e-ye,ke-ce)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,f.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,f.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(Se,oe){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(Se)&&Se.length===6&&this.transform(...Se),this.baseTransform=(0,y.getCurrentTransform)(this.ctx),oe)){const ae=oe[2]-oe[0],be=oe[3]-oe[1];this.ctx.rect(oe[0],oe[1],ae,be),this.current.updateRectMinMax((0,y.getCurrentTransform)(this.ctx),oe),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(Se){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const oe=this.ctx;Se.isolated||(0,f.info)("TODO: Support non-isolated groups."),Se.knockout&&(0,f.warn)("Knockout groups not supported.");const ae=(0,y.getCurrentTransform)(oe);if(Se.matrix&&oe.transform(...Se.matrix),!Se.bbox)throw new Error("Bounding box is required.");let be=f.Util.getAxialAlignedBoundingBox(Se.bbox,(0,y.getCurrentTransform)(oe));const he=[0,0,oe.canvas.width,oe.canvas.height];be=f.Util.intersect(be,he)||[0,0,0,0];const ue=Math.floor(be[0]),ye=Math.floor(be[1]);let ce=Math.max(Math.ceil(be[2])-ue,1),_e=Math.max(Math.ceil(be[3])-ye,1),ke=1,Pe=1;ce>T&&(ke=ce/T,ce=T),_e>T&&(Pe=_e/T,_e=T),this.current.startNewPathAndClipBox([0,0,ce,_e]);let $e="groupAt"+this.groupLevel;Se.smask&&($e+="_smask_"+this.smaskCounter++%2);const xe=this.cachedCanvases.getCanvas($e,ce,_e),Ne=xe.context;Ne.scale(1/ke,1/Pe),Ne.translate(-ue,-ye),Ne.transform(...ae),Se.smask?this.smaskStack.push({canvas:xe.canvas,context:Ne,offsetX:ue,offsetY:ye,scaleX:ke,scaleY:Pe,subtype:Se.smask.subtype,backdrop:Se.smask.backdrop,transferMap:Se.smask.transferMap||null,startTransformInverse:null}):(oe.setTransform(1,0,0,1,0,0),oe.translate(ue,ye),oe.scale(ke,Pe),oe.save()),Z(oe,Ne),this.ctx=Ne,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(oe),this.groupLevel++}endGroup(Se){if(!this.contentVisible)return;this.groupLevel--;const oe=this.ctx,ae=this.groupStack.pop();if(this.ctx=ae,this.ctx.imageSmoothingEnabled=!1,Se.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const be=(0,y.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...be);const he=f.Util.getAxialAlignedBoundingBox([0,0,oe.canvas.width,oe.canvas.height],be);this.ctx.drawImage(oe.canvas,0,0),this.ctx.restore(),this.compose(he)}}beginAnnotation(Se,oe,ae,be,he){if(this.#e(),J(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(oe)&&oe.length===4){const ue=oe[2]-oe[0],ye=oe[3]-oe[1];if(he&&this.annotationCanvasMap){ae=ae.slice(),ae[4]-=oe[0],ae[5]-=oe[1],oe=oe.slice(),oe[0]=oe[1]=0,oe[2]=ue,oe[3]=ye;const[ce,_e]=f.Util.singularValueDecompose2dScale((0,y.getCurrentTransform)(this.ctx)),{viewportScale:ke}=this,Pe=Math.ceil(ue*this.outputScaleX*ke),$e=Math.ceil(ye*this.outputScaleY*ke);this.annotationCanvas=this.canvasFactory.create(Pe,$e);const{canvas:xe,context:Ne}=this.annotationCanvas;this.annotationCanvasMap.set(Se,xe),this.annotationCanvas.savedCtx=this.ctx,this.ctx=Ne,this.ctx.save(),this.ctx.setTransform(ce,0,0,-_e,0,ye*_e),J(this.ctx)}else J(this.ctx),this.ctx.rect(oe[0],oe[1],ue,ye),this.ctx.clip(),this.endPath()}this.current=new G(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...ae),this.transform(...be)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(Se){if(!this.contentVisible)return;const oe=Se.count;Se=this.getObject(Se.data,Se),Se.count=oe;const ae=this.ctx,be=this.processingType3;if(be&&(be.compiled===void 0&&(be.compiled=U(Se)),be.compiled)){be.compiled(ae);return}const he=this._createMaskCanvas(Se),ue=he.canvas;ae.save(),ae.setTransform(1,0,0,1,0,0),ae.drawImage(ue,he.offsetX,he.offsetY),ae.restore(),this.compose()}paintImageMaskXObjectRepeat(Se,oe,ae=0,be=0,he,ue){if(!this.contentVisible)return;Se=this.getObject(Se.data,Se);const ye=this.ctx;ye.save();const ce=(0,y.getCurrentTransform)(ye);ye.transform(oe,ae,be,he,0,0);const _e=this._createMaskCanvas(Se);ye.setTransform(1,0,0,1,_e.offsetX-ce[4],_e.offsetY-ce[5]);for(let ke=0,Pe=ue.length;ke<Pe;ke+=2){const $e=f.Util.transform(ce,[oe,ae,be,he,ue[ke],ue[ke+1]]),[xe,Ne]=f.Util.applyTransform([0,0],$e);ye.drawImage(_e.canvas,xe,Ne)}ye.restore(),this.compose()}paintImageMaskXObjectGroup(Se){if(!this.contentVisible)return;const oe=this.ctx,ae=this.current.fillColor,be=this.current.patternFill;for(const he of Se){const{data:ue,width:ye,height:ce,transform:_e}=he,ke=this.cachedCanvases.getCanvas("maskCanvas",ye,ce),Pe=ke.context;Pe.save();const $e=this.getObject(ue,he);K(Pe,$e),Pe.globalCompositeOperation="source-in",Pe.fillStyle=be?ae.getPattern(Pe,this,(0,y.getCurrentTransformInverse)(oe),S.PathType.FILL):ae,Pe.fillRect(0,0,ye,ce),Pe.restore(),oe.save(),oe.transform(..._e),oe.scale(1,-1),z(oe,ke.canvas,0,0,ye,ce,0,-1,1,1),oe.restore()}this.compose()}paintImageXObject(Se){if(!this.contentVisible)return;const oe=this.getObject(Se);if(!oe){(0,f.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(oe)}paintImageXObjectRepeat(Se,oe,ae,be){if(!this.contentVisible)return;const he=this.getObject(Se);if(!he){(0,f.warn)("Dependent image isn't ready yet");return}const ue=he.width,ye=he.height,ce=[];for(let _e=0,ke=be.length;_e<ke;_e+=2)ce.push({transform:[oe,0,0,ae,be[_e],be[_e+1]],x:0,y:0,w:ue,h:ye});this.paintInlineImageXObjectGroup(he,ce)}applyTransferMapsToCanvas(Se){return this.current.transferMaps!=="none"&&(Se.filter=this.current.transferMaps,Se.drawImage(Se.canvas,0,0),Se.filter="none"),Se.canvas}applyTransferMapsToBitmap(Se){if(this.current.transferMaps==="none")return Se.bitmap;const{bitmap:oe,width:ae,height:be}=Se,he=this.cachedCanvases.getCanvas("inlineImage",ae,be),ue=he.context;return ue.filter=this.current.transferMaps,ue.drawImage(oe,0,0),ue.filter="none",he.canvas}paintInlineImageXObject(Se){if(!this.contentVisible)return;const oe=Se.width,ae=Se.height,be=this.ctx;if(this.save(),!f.isNodeJS){const{filter:ye}=be;ye!=="none"&&ye!==""&&(be.filter="none")}be.scale(1/oe,-1/ae);let he;if(Se.bitmap)he=this.applyTransferMapsToBitmap(Se);else if(typeof HTMLElement=="function"&&Se instanceof HTMLElement||!Se.data)he=Se;else{const ye=this.cachedCanvases.getCanvas("inlineImage",oe,ae).context;Y(ye,Se),he=this.applyTransferMapsToCanvas(ye)}const ue=this._scaleImage(he,(0,y.getCurrentTransformInverse)(be));be.imageSmoothingEnabled=Ee((0,y.getCurrentTransform)(be),Se.interpolate),z(be,ue.img,0,0,ue.paintWidth,ue.paintHeight,0,-ae,oe,ae),this.compose(),this.restore()}paintInlineImageXObjectGroup(Se,oe){if(!this.contentVisible)return;const ae=this.ctx;let be;if(Se.bitmap)be=Se.bitmap;else{const he=Se.width,ue=Se.height,ye=this.cachedCanvases.getCanvas("inlineImage",he,ue).context;Y(ye,Se),be=this.applyTransferMapsToCanvas(ye)}for(const he of oe)ae.save(),ae.transform(...he.transform),ae.scale(1,-1),z(ae,be,he.x,he.y,he.w,he.h,0,-1,1,1),ae.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(Se){}markPointProps(Se,oe){}beginMarkedContent(Se){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(Se,oe){Se==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(oe)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(Se){const oe=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(Se);const ae=this.ctx;this.pendingClip&&(oe||(this.pendingClip===Me?ae.clip("evenodd"):ae.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),ae.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const Se=(0,y.getCurrentTransform)(this.ctx);if(Se[1]===0&&Se[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(Se[0]),Math.abs(Se[3]));else{const oe=Math.abs(Se[0]*Se[3]-Se[2]*Se[1]),ae=Math.hypot(Se[0],Se[2]),be=Math.hypot(Se[1],Se[3]);this._cachedGetSinglePixelWidth=Math.max(ae,be)/oe}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:Se}=this.current,{a:oe,b:ae,c:be,d:he}=this.ctx.getTransform();let ue,ye;if(ae===0&&be===0){const ce=Math.abs(oe),_e=Math.abs(he);if(ce===_e)if(Se===0)ue=ye=1/ce;else{const ke=ce*Se;ue=ye=ke<1?1/ke:1}else if(Se===0)ue=1/ce,ye=1/_e;else{const ke=ce*Se,Pe=_e*Se;ue=ke<1?1/ke:1,ye=Pe<1?1/Pe:1}}else{const ce=Math.abs(oe*he-ae*be),_e=Math.hypot(oe,ae),ke=Math.hypot(be,he);if(Se===0)ue=ke/ce,ye=_e/ce;else{const Pe=Se*ce;ue=ke>Pe?ke/Pe:1,ye=_e>Pe?_e/Pe:1}}this._cachedScaleForStroking[0]=ue,this._cachedScaleForStroking[1]=ye}return this._cachedScaleForStroking}rescaleAndStroke(Se){const{ctx:oe}=this,{lineWidth:ae}=this.current,[be,he]=this.getScaleForStroking();if(oe.lineWidth=ae||1,be===1&&he===1){oe.stroke();return}const ue=oe.getLineDash();if(Se&&oe.save(),oe.scale(be,he),ue.length>0){const ye=Math.max(be,he);oe.setLineDash(ue.map(ce=>ce/ye)),oe.lineDashOffset/=ye}oe.stroke(),Se&&oe.restore()}isContentVisible(){for(let Se=this.markedContentStack.length-1;Se>=0;Se--)if(!this.markedContentStack[Se].visible)return!1;return!0}}n.CanvasGraphics=Re;for(const Te in f.OPS)Re.prototype[Te]!==void 0&&(Re.prototype[f.OPS[Te]]=Re.prototype[Te])}),((s,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.TilingPattern=n.PathType=void 0,n.getShadingPattern=L;var f=u(1),y=u(6);const S={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};n.PathType=S;function A(z,U){if(!U)return;const G=U[2]-U[0],Y=U[3]-U[1],K=new Path2D;K.rect(U[0],U[1],G,Y),z.clip(K)}class w{constructor(){this.constructor===w&&(0,f.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,f.unreachable)("Abstract method `getPattern` called.")}}class C extends w{constructor(U){super(),this._type=U[1],this._bbox=U[2],this._colorStops=U[3],this._p0=U[4],this._p1=U[5],this._r0=U[6],this._r1=U[7],this.matrix=null}_createGradient(U){let G;this._type==="axial"?G=U.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(G=U.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const Y of this._colorStops)G.addColorStop(Y[0],Y[1]);return G}getPattern(U,G,Y,K){let Z;if(K===S.STROKE||K===S.FILL){const J=G.current.getClippedPathBoundingBox(K,(0,y.getCurrentTransform)(U))||[0,0,0,0],te=Math.ceil(J[2]-J[0])||1,de=Math.ceil(J[3]-J[1])||1,se=G.cachedCanvases.getCanvas("pattern",te,de,!0),ne=se.context;ne.clearRect(0,0,ne.canvas.width,ne.canvas.height),ne.beginPath(),ne.rect(0,0,ne.canvas.width,ne.canvas.height),ne.translate(-J[0],-J[1]),Y=f.Util.transform(Y,[1,0,0,1,J[0],J[1]]),ne.transform(...G.baseTransform),this.matrix&&ne.transform(...this.matrix),A(ne,this._bbox),ne.fillStyle=this._createGradient(ne),ne.fill(),Z=U.createPattern(se.canvas,"no-repeat");const ge=new DOMMatrix(Y);Z.setTransform(ge)}else A(U,this._bbox),Z=this._createGradient(U);return Z}}function T(z,U,G,Y,K,Z,J,te){const de=U.coords,se=U.colors,ne=z.data,ge=z.width*4;let Ee;de[G+1]>de[Y+1]&&(Ee=G,G=Y,Y=Ee,Ee=Z,Z=J,J=Ee),de[Y+1]>de[K+1]&&(Ee=Y,Y=K,K=Ee,Ee=J,J=te,te=Ee),de[G+1]>de[Y+1]&&(Ee=G,G=Y,Y=Ee,Ee=Z,Z=J,J=Ee);const we=(de[G]+U.offsetX)*U.scaleX,Ie=(de[G+1]+U.offsetY)*U.scaleY,Be=(de[Y]+U.offsetX)*U.scaleX,Me=(de[Y+1]+U.offsetY)*U.scaleY,Re=(de[K]+U.offsetX)*U.scaleX,Te=(de[K+1]+U.offsetY)*U.scaleY;if(Ie>=Te)return;const Se=se[Z],oe=se[Z+1],ae=se[Z+2],be=se[J],he=se[J+1],ue=se[J+2],ye=se[te],ce=se[te+1],_e=se[te+2],ke=Math.round(Ie),Pe=Math.round(Te);let $e,xe,Ne,je,He,Ye,Je,ot;for(let ze=ke;ze<=Pe;ze++){if(ze<Me){const qe=ze<Ie?0:(Ie-ze)/(Ie-Me);$e=we-(we-Be)*qe,xe=Se-(Se-be)*qe,Ne=oe-(oe-he)*qe,je=ae-(ae-ue)*qe}else{let qe;ze>Te?qe=1:Me===Te?qe=0:qe=(Me-ze)/(Me-Te),$e=Be-(Be-Re)*qe,xe=be-(be-ye)*qe,Ne=he-(he-ce)*qe,je=ue-(ue-_e)*qe}let pt;ze<Ie?pt=0:ze>Te?pt=1:pt=(Ie-ze)/(Ie-Te),He=we-(we-Re)*pt,Ye=Se-(Se-ye)*pt,Je=oe-(oe-ce)*pt,ot=ae-(ae-_e)*pt;const yt=Math.round(Math.min($e,He)),ut=Math.round(Math.max($e,He));let Et=ge*ze+yt*4;for(let qe=yt;qe<=ut;qe++)pt=($e-qe)/($e-He),pt<0?pt=0:pt>1&&(pt=1),ne[Et++]=xe-(xe-Ye)*pt|0,ne[Et++]=Ne-(Ne-Je)*pt|0,ne[Et++]=je-(je-ot)*pt|0,ne[Et++]=255}}function R(z,U,G){const Y=U.coords,K=U.colors;let Z,J;switch(U.type){case"lattice":const te=U.verticesPerRow,de=Math.floor(Y.length/te)-1,se=te-1;for(Z=0;Z<de;Z++){let ne=Z*te;for(let ge=0;ge<se;ge++,ne++)T(z,G,Y[ne],Y[ne+1],Y[ne+te],K[ne],K[ne+1],K[ne+te]),T(z,G,Y[ne+te+1],Y[ne+1],Y[ne+te],K[ne+te+1],K[ne+1],K[ne+te])}break;case"triangles":for(Z=0,J=Y.length;Z<J;Z+=3)T(z,G,Y[Z],Y[Z+1],Y[Z+2],K[Z],K[Z+1],K[Z+2]);break;default:throw new Error("illegal figure")}}class I extends w{constructor(U){super(),this._coords=U[2],this._colors=U[3],this._figures=U[4],this._bounds=U[5],this._bbox=U[7],this._background=U[8],this.matrix=null}_createMeshCanvas(U,G,Y){const K=Math.floor(this._bounds[0]),Z=Math.floor(this._bounds[1]),J=Math.ceil(this._bounds[2])-K,te=Math.ceil(this._bounds[3])-Z,de=Math.min(Math.ceil(Math.abs(J*U[0]*1.1)),3e3),se=Math.min(Math.ceil(Math.abs(te*U[1]*1.1)),3e3),ne=J/de,ge=te/se,Ee={coords:this._coords,colors:this._colors,offsetX:-K,offsetY:-Z,scaleX:1/ne,scaleY:1/ge},we=de+4,Ie=se+4,Be=Y.getCanvas("mesh",we,Ie,!1),Me=Be.context,Re=Me.createImageData(de,se);if(G){const Te=Re.data;for(let Se=0,oe=Te.length;Se<oe;Se+=4)Te[Se]=G[0],Te[Se+1]=G[1],Te[Se+2]=G[2],Te[Se+3]=255}for(const Te of this._figures)R(Re,Te,Ee);return Me.putImageData(Re,2,2),{canvas:Be.canvas,offsetX:K-2*ne,offsetY:Z-2*ge,scaleX:ne,scaleY:ge}}getPattern(U,G,Y,K){A(U,this._bbox);let Z;if(K===S.SHADING)Z=f.Util.singularValueDecompose2dScale((0,y.getCurrentTransform)(U));else if(Z=f.Util.singularValueDecompose2dScale(G.baseTransform),this.matrix){const te=f.Util.singularValueDecompose2dScale(this.matrix);Z=[Z[0]*te[0],Z[1]*te[1]]}const J=this._createMeshCanvas(Z,K===S.SHADING?null:this._background,G.cachedCanvases);return K!==S.SHADING&&(U.setTransform(...G.baseTransform),this.matrix&&U.transform(...this.matrix)),U.translate(J.offsetX,J.offsetY),U.scale(J.scaleX,J.scaleY),U.createPattern(J.canvas,"no-repeat")}}class N extends w{getPattern(){return"hotpink"}}function L(z){switch(z[0]){case"RadialAxial":return new C(z);case"Mesh":return new I(z);case"Dummy":return new N}throw new Error(`Unknown IR type: ${z[0]}`)}const F={COLORED:1,UNCOLORED:2};class H{static MAX_PATTERN_SIZE=3e3;constructor(U,G,Y,K,Z){this.operatorList=U[2],this.matrix=U[3]||[1,0,0,1,0,0],this.bbox=U[4],this.xstep=U[5],this.ystep=U[6],this.paintType=U[7],this.tilingType=U[8],this.color=G,this.ctx=Y,this.canvasGraphicsFactory=K,this.baseTransform=Z}createPatternCanvas(U){const G=this.operatorList,Y=this.bbox,K=this.xstep,Z=this.ystep,J=this.paintType,te=this.tilingType,de=this.color,se=this.canvasGraphicsFactory;(0,f.info)("TilingType: "+te);const ne=Y[0],ge=Y[1],Ee=Y[2],we=Y[3],Ie=f.Util.singularValueDecompose2dScale(this.matrix),Be=f.Util.singularValueDecompose2dScale(this.baseTransform),Me=[Ie[0]*Be[0],Ie[1]*Be[1]],Re=this.getSizeAndScale(K,this.ctx.canvas.width,Me[0]),Te=this.getSizeAndScale(Z,this.ctx.canvas.height,Me[1]),Se=U.cachedCanvases.getCanvas("pattern",Re.size,Te.size,!0),oe=Se.context,ae=se.createCanvasGraphics(oe);ae.groupLevel=U.groupLevel,this.setFillAndStrokeStyleToContext(ae,J,de);let be=ne,he=ge,ue=Ee,ye=we;return ne<0&&(be=0,ue+=Math.abs(ne)),ge<0&&(he=0,ye+=Math.abs(ge)),oe.translate(-(Re.scale*be),-(Te.scale*he)),ae.transform(Re.scale,0,0,Te.scale,0,0),oe.save(),this.clipBbox(ae,be,he,ue,ye),ae.baseTransform=(0,y.getCurrentTransform)(ae.ctx),ae.executeOperatorList(G),ae.endDrawing(),{canvas:Se.canvas,scaleX:Re.scale,scaleY:Te.scale,offsetX:be,offsetY:he}}getSizeAndScale(U,G,Y){U=Math.abs(U);const K=Math.max(H.MAX_PATTERN_SIZE,G);let Z=Math.ceil(U*Y);return Z>=K?Z=K:Y=Z/U,{scale:Y,size:Z}}clipBbox(U,G,Y,K,Z){const J=K-G,te=Z-Y;U.ctx.rect(G,Y,J,te),U.current.updateRectMinMax((0,y.getCurrentTransform)(U.ctx),[G,Y,K,Z]),U.clip(),U.endPath()}setFillAndStrokeStyleToContext(U,G,Y){const K=U.ctx,Z=U.current;switch(G){case F.COLORED:const J=this.ctx;K.fillStyle=J.fillStyle,K.strokeStyle=J.strokeStyle,Z.fillColor=J.fillStyle,Z.strokeColor=J.strokeStyle;break;case F.UNCOLORED:const te=f.Util.makeHexColor(Y[0],Y[1],Y[2]);K.fillStyle=te,K.strokeStyle=te,Z.fillColor=te,Z.strokeColor=te;break;default:throw new f.FormatError(`Unsupported paint type: ${G}`)}}getPattern(U,G,Y,K){let Z=Y;K!==S.SHADING&&(Z=f.Util.transform(Z,G.baseTransform),this.matrix&&(Z=f.Util.transform(Z,this.matrix)));const J=this.createPatternCanvas(G);let te=new DOMMatrix(Z);te=te.translate(J.offsetX,J.offsetY),te=te.scale(1/J.scaleX,1/J.scaleY);const de=U.createPattern(J.canvas,"repeat");return de.setTransform(te),de}}n.TilingPattern=H}),((s,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.convertBlackAndWhiteToRGBA=S,n.convertToRGBA=y,n.grayToRGBA=w;var f=u(1);function y(C){switch(C.kind){case f.ImageKind.GRAYSCALE_1BPP:return S(C);case f.ImageKind.RGB_24BPP:return A(C)}return null}function S({src:C,srcPos:T=0,dest:R,width:I,height:N,nonBlackColor:L=4294967295,inverseDecode:F=!1}){const H=f.FeatureTest.isLittleEndian?4278190080:255,[z,U]=F?[L,H]:[H,L],G=I>>3,Y=I&7,K=C.length;R=new Uint32Array(R.buffer);let Z=0;for(let J=0;J<N;J++){for(const de=T+G;T<de;T++){const se=T<K?C[T]:255;R[Z++]=se&128?U:z,R[Z++]=se&64?U:z,R[Z++]=se&32?U:z,R[Z++]=se&16?U:z,R[Z++]=se&8?U:z,R[Z++]=se&4?U:z,R[Z++]=se&2?U:z,R[Z++]=se&1?U:z}if(Y===0)continue;const te=T<K?C[T++]:255;for(let de=0;de<Y;de++)R[Z++]=te&1<<7-de?U:z}return{srcPos:T,destPos:Z}}function A({src:C,srcPos:T=0,dest:R,destPos:I=0,width:N,height:L}){let F=0;const H=C.length>>2,z=new Uint32Array(C.buffer,T,H);if(f.FeatureTest.isLittleEndian){for(;F<H-2;F+=3,I+=4){const U=z[F],G=z[F+1],Y=z[F+2];R[I]=U|4278190080,R[I+1]=U>>>24|G<<8|4278190080,R[I+2]=G>>>16|Y<<16|4278190080,R[I+3]=Y>>>8|4278190080}for(let U=F*4,G=C.length;U<G;U+=3)R[I++]=C[U]|C[U+1]<<8|C[U+2]<<16|4278190080}else{for(;F<H-2;F+=3,I+=4){const U=z[F],G=z[F+1],Y=z[F+2];R[I]=U|255,R[I+1]=U<<24|G>>>8|255,R[I+2]=G<<16|Y>>>16|255,R[I+3]=Y<<8|255}for(let U=F*4,G=C.length;U<G;U+=3)R[I++]=C[U]<<24|C[U+1]<<16|C[U+2]<<8|255}return{srcPos:T,destPos:I}}function w(C,T){if(f.FeatureTest.isLittleEndian)for(let R=0,I=C.length;R<I;R++)T[R]=C[R]*65793|4278190080;else for(let R=0,I=C.length;R<I;R++)T[R]=C[R]*16843008|255}}),((s,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.GlobalWorkerOptions=void 0;const u=Object.create(null);n.GlobalWorkerOptions=u,u.workerPort=null,u.workerSrc=""}),((s,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.MessageHandler=void 0;var f=u(1);const y={DATA:1,ERROR:2},S={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function A(C){switch(C instanceof Error||typeof C=="object"&&C!==null||(0,f.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),C.name){case"AbortException":return new f.AbortException(C.message);case"MissingPDFException":return new f.MissingPDFException(C.message);case"PasswordException":return new f.PasswordException(C.message,C.code);case"UnexpectedResponseException":return new f.UnexpectedResponseException(C.message,C.status);case"UnknownErrorException":return new f.UnknownErrorException(C.message,C.details);default:return new f.UnknownErrorException(C.message,C.toString())}}class w{constructor(T,R,I){this.sourceName=T,this.targetName=R,this.comObj=I,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=N=>{const L=N.data;if(L.targetName!==this.sourceName)return;if(L.stream){this.#t(L);return}if(L.callback){const H=L.callbackId,z=this.callbackCapabilities[H];if(!z)throw new Error(`Cannot resolve callback ${H}`);if(delete this.callbackCapabilities[H],L.callback===y.DATA)z.resolve(L.data);else if(L.callback===y.ERROR)z.reject(A(L.reason));else throw new Error("Unexpected callback case");return}const F=this.actionHandler[L.action];if(!F)throw new Error(`Unknown action from worker: ${L.action}`);if(L.callbackId){const H=this.sourceName,z=L.sourceName;new Promise(function(U){U(F(L.data))}).then(function(U){I.postMessage({sourceName:H,targetName:z,callback:y.DATA,callbackId:L.callbackId,data:U})},function(U){I.postMessage({sourceName:H,targetName:z,callback:y.ERROR,callbackId:L.callbackId,reason:A(U)})});return}if(L.streamId){this.#e(L);return}F(L.data)},I.addEventListener("message",this._onComObjOnMessage)}on(T,R){const I=this.actionHandler;if(I[T])throw new Error(`There is already an actionName called "${T}"`);I[T]=R}send(T,R,I){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:T,data:R},I)}sendWithPromise(T,R,I){const N=this.callbackId++,L=new f.PromiseCapability;this.callbackCapabilities[N]=L;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:T,callbackId:N,data:R},I)}catch(F){L.reject(F)}return L.promise}sendWithStream(T,R,I,N){const L=this.streamId++,F=this.sourceName,H=this.targetName,z=this.comObj;return new ReadableStream({start:U=>{const G=new f.PromiseCapability;return this.streamControllers[L]={controller:U,startCall:G,pullCall:null,cancelCall:null,isClosed:!1},z.postMessage({sourceName:F,targetName:H,action:T,streamId:L,data:R,desiredSize:U.desiredSize},N),G.promise},pull:U=>{const G=new f.PromiseCapability;return this.streamControllers[L].pullCall=G,z.postMessage({sourceName:F,targetName:H,stream:S.PULL,streamId:L,desiredSize:U.desiredSize}),G.promise},cancel:U=>{(0,f.assert)(U instanceof Error,"cancel must have a valid reason");const G=new f.PromiseCapability;return this.streamControllers[L].cancelCall=G,this.streamControllers[L].isClosed=!0,z.postMessage({sourceName:F,targetName:H,stream:S.CANCEL,streamId:L,reason:A(U)}),G.promise}},I)}#e(T){const R=T.streamId,I=this.sourceName,N=T.sourceName,L=this.comObj,F=this,H=this.actionHandler[T.action],z={enqueue(U,G=1,Y){if(this.isCancelled)return;const K=this.desiredSize;this.desiredSize-=G,K>0&&this.desiredSize<=0&&(this.sinkCapability=new f.PromiseCapability,this.ready=this.sinkCapability.promise),L.postMessage({sourceName:I,targetName:N,stream:S.ENQUEUE,streamId:R,chunk:U},Y)},close(){this.isCancelled||(this.isCancelled=!0,L.postMessage({sourceName:I,targetName:N,stream:S.CLOSE,streamId:R}),delete F.streamSinks[R])},error(U){(0,f.assert)(U instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,L.postMessage({sourceName:I,targetName:N,stream:S.ERROR,streamId:R,reason:A(U)}))},sinkCapability:new f.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:T.desiredSize,ready:null};z.sinkCapability.resolve(),z.ready=z.sinkCapability.promise,this.streamSinks[R]=z,new Promise(function(U){U(H(T.data,z))}).then(function(){L.postMessage({sourceName:I,targetName:N,stream:S.START_COMPLETE,streamId:R,success:!0})},function(U){L.postMessage({sourceName:I,targetName:N,stream:S.START_COMPLETE,streamId:R,reason:A(U)})})}#t(T){const R=T.streamId,I=this.sourceName,N=T.sourceName,L=this.comObj,F=this.streamControllers[R],H=this.streamSinks[R];switch(T.stream){case S.START_COMPLETE:T.success?F.startCall.resolve():F.startCall.reject(A(T.reason));break;case S.PULL_COMPLETE:T.success?F.pullCall.resolve():F.pullCall.reject(A(T.reason));break;case S.PULL:if(!H){L.postMessage({sourceName:I,targetName:N,stream:S.PULL_COMPLETE,streamId:R,success:!0});break}H.desiredSize<=0&&T.desiredSize>0&&H.sinkCapability.resolve(),H.desiredSize=T.desiredSize,new Promise(function(z){z(H.onPull?.())}).then(function(){L.postMessage({sourceName:I,targetName:N,stream:S.PULL_COMPLETE,streamId:R,success:!0})},function(z){L.postMessage({sourceName:I,targetName:N,stream:S.PULL_COMPLETE,streamId:R,reason:A(z)})});break;case S.ENQUEUE:if((0,f.assert)(F,"enqueue should have stream controller"),F.isClosed)break;F.controller.enqueue(T.chunk);break;case S.CLOSE:if((0,f.assert)(F,"close should have stream controller"),F.isClosed)break;F.isClosed=!0,F.controller.close(),this.#n(F,R);break;case S.ERROR:(0,f.assert)(F,"error should have stream controller"),F.controller.error(A(T.reason)),this.#n(F,R);break;case S.CANCEL_COMPLETE:T.success?F.cancelCall.resolve():F.cancelCall.reject(A(T.reason)),this.#n(F,R);break;case S.CANCEL:if(!H)break;new Promise(function(z){z(H.onCancel?.(A(T.reason)))}).then(function(){L.postMessage({sourceName:I,targetName:N,stream:S.CANCEL_COMPLETE,streamId:R,success:!0})},function(z){L.postMessage({sourceName:I,targetName:N,stream:S.CANCEL_COMPLETE,streamId:R,reason:A(z)})}),H.sinkCapability.reject(A(T.reason)),H.isCancelled=!0,delete this.streamSinks[R];break;default:throw new Error("Unexpected stream case")}}async#n(T,R){await Promise.allSettled([T.startCall?.promise,T.pullCall?.promise,T.cancelCall?.promise]),delete this.streamControllers[R]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}n.MessageHandler=w}),((s,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.Metadata=void 0;var f=u(1);class y{#e;#t;constructor({parsedData:A,rawData:w}){this.#e=A,this.#t=w}getRaw(){return this.#t}get(A){return this.#e.get(A)??null}getAll(){return(0,f.objectFromMap)(this.#e)}has(A){return this.#e.has(A)}}n.Metadata=y}),((s,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.OptionalContentConfig=void 0;var f=u(1),y=u(8);const S=Symbol("INTERNAL");class A{#e=!0;constructor(T,R){this.name=T,this.intent=R}get visible(){return this.#e}_setVisible(T,R){T!==S&&(0,f.unreachable)("Internal method `_setVisible` called."),this.#e=R}}class w{#e=null;#t=new Map;#n=null;#r=null;constructor(T){if(this.name=null,this.creator=null,T!==null){this.name=T.name,this.creator=T.creator,this.#r=T.order;for(const R of T.groups)this.#t.set(R.id,new A(R.name,R.intent));if(T.baseState==="OFF")for(const R of this.#t.values())R._setVisible(S,!1);for(const R of T.on)this.#t.get(R)._setVisible(S,!0);for(const R of T.off)this.#t.get(R)._setVisible(S,!1);this.#n=this.getHash()}}#o(T){const R=T.length;if(R<2)return!0;const I=T[0];for(let N=1;N<R;N++){const L=T[N];let F;if(Array.isArray(L))F=this.#o(L);else if(this.#t.has(L))F=this.#t.get(L).visible;else return(0,f.warn)(`Optional content group not found: ${L}`),!0;switch(I){case"And":if(!F)return!1;break;case"Or":if(F)return!0;break;case"Not":return!F;default:return!0}}return I==="And"}isVisible(T){if(this.#t.size===0)return!0;if(!T)return(0,f.warn)("Optional content group not defined."),!0;if(T.type==="OCG")return this.#t.has(T.id)?this.#t.get(T.id).visible:((0,f.warn)(`Optional content group not found: ${T.id}`),!0);if(T.type==="OCMD"){if(T.expression)return this.#o(T.expression);if(!T.policy||T.policy==="AnyOn"){for(const R of T.ids){if(!this.#t.has(R))return(0,f.warn)(`Optional content group not found: ${R}`),!0;if(this.#t.get(R).visible)return!0}return!1}else if(T.policy==="AllOn"){for(const R of T.ids){if(!this.#t.has(R))return(0,f.warn)(`Optional content group not found: ${R}`),!0;if(!this.#t.get(R).visible)return!1}return!0}else if(T.policy==="AnyOff"){for(const R of T.ids){if(!this.#t.has(R))return(0,f.warn)(`Optional content group not found: ${R}`),!0;if(!this.#t.get(R).visible)return!0}return!1}else if(T.policy==="AllOff"){for(const R of T.ids){if(!this.#t.has(R))return(0,f.warn)(`Optional content group not found: ${R}`),!0;if(this.#t.get(R).visible)return!1}return!0}return(0,f.warn)(`Unknown optional content policy ${T.policy}.`),!0}return(0,f.warn)(`Unknown group type ${T.type}.`),!0}setVisibility(T,R=!0){if(!this.#t.has(T)){(0,f.warn)(`Optional content group not found: ${T}`);return}this.#t.get(T)._setVisible(S,!!R),this.#e=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#t.size?this.#r?this.#r.slice():[...this.#t.keys()]:null}getGroups(){return this.#t.size>0?(0,f.objectFromMap)(this.#t):null}getGroup(T){return this.#t.get(T)||null}getHash(){if(this.#e!==null)return this.#e;const T=new y.MurmurHash3_64;for(const[R,I]of this.#t)T.update(`${R}:${I.visible}`);return this.#e=T.hexdigest()}}n.OptionalContentConfig=w}),((s,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.PDFDataTransportStream=void 0;var f=u(1),y=u(6);class S{constructor({length:T,initialData:R,progressiveDone:I=!1,contentDispositionFilename:N=null,disableRange:L=!1,disableStream:F=!1},H){if((0,f.assert)(H,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=I,this._contentDispositionFilename=N,R?.length>0){const z=R instanceof Uint8Array&&R.byteLength===R.buffer.byteLength?R.buffer:new Uint8Array(R).buffer;this._queuedChunks.push(z)}this._pdfDataRangeTransport=H,this._isStreamingSupported=!F,this._isRangeSupported=!L,this._contentLength=T,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((z,U)=>{this._onReceiveData({begin:z,chunk:U})}),this._pdfDataRangeTransport.addProgressListener((z,U)=>{this._onProgress({loaded:z,total:U})}),this._pdfDataRangeTransport.addProgressiveReadListener(z=>{this._onReceiveData({chunk:z})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:T,chunk:R}){const I=R instanceof Uint8Array&&R.byteLength===R.buffer.byteLength?R.buffer:new Uint8Array(R).buffer;if(T===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(I):this._queuedChunks.push(I);else{const N=this._rangeReaders.some(function(L){return L._begin!==T?!1:(L._enqueue(I),!0)});(0,f.assert)(N,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(T){T.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:T.loaded}):this._fullRequestReader?.onProgress?.({loaded:T.loaded,total:T.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(T){const R=this._rangeReaders.indexOf(T);R>=0&&this._rangeReaders.splice(R,1)}getFullReader(){(0,f.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const T=this._queuedChunks;return this._queuedChunks=null,new A(this,T,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(T,R){if(R<=this._progressiveDataLength)return null;const I=new w(this,T,R);return this._pdfDataRangeTransport.requestDataRange(T,R),this._rangeReaders.push(I),I}cancelAllRequests(T){this._fullRequestReader?.cancel(T);for(const R of this._rangeReaders.slice(0))R.cancel(T);this._pdfDataRangeTransport.abort()}}n.PDFDataTransportStream=S;class A{constructor(T,R,I=!1,N=null){this._stream=T,this._done=I||!1,this._filename=(0,y.isPdfFile)(N)?N:null,this._queuedChunks=R||[],this._loaded=0;for(const L of this._queuedChunks)this._loaded+=L.byteLength;this._requests=[],this._headersReady=Promise.resolve(),T._fullRequestReader=this,this.onProgress=null}_enqueue(T){this._done||(this._requests.length>0?this._requests.shift().resolve({value:T,done:!1}):this._queuedChunks.push(T),this._loaded+=T.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const T=new f.PromiseCapability;return this._requests.push(T),T.promise}cancel(T){this._done=!0;for(const R of this._requests)R.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class w{constructor(T,R,I){this._stream=T,this._begin=R,this._end=I,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(T){if(!this._done){if(this._requests.length===0)this._queuedChunk=T;else{this._requests.shift().resolve({value:T,done:!1});for(const R of this._requests)R.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const R=this._queuedChunk;return this._queuedChunk=null,{value:R,done:!1}}if(this._done)return{value:void 0,done:!0};const T=new f.PromiseCapability;return this._requests.push(T),T.promise}cancel(T){this._done=!0;for(const R of this._requests)R.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}}),((s,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.PDFFetchStream=void 0;var f=u(1),y=u(20);function S(I,N,L){return{method:"GET",headers:I,signal:L.signal,mode:"cors",credentials:N?"include":"same-origin",redirect:"follow"}}function A(I){const N=new Headers;for(const L in I){const F=I[L];F!==void 0&&N.append(L,F)}return N}function w(I){return I instanceof Uint8Array?I.buffer:I instanceof ArrayBuffer?I:((0,f.warn)(`getArrayBuffer - unexpected data format: ${I}`),new Uint8Array(I).buffer)}class C{constructor(N){this.source=N,this.isHttp=/^https?:/i.test(N.url),this.httpHeaders=this.isHttp&&N.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,f.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new T(this),this._fullRequestReader}getRangeReader(N,L){if(L<=this._progressiveDataLength)return null;const F=new R(this,N,L);return this._rangeRequestReaders.push(F),F}cancelAllRequests(N){this._fullRequestReader?.cancel(N);for(const L of this._rangeRequestReaders.slice(0))L.cancel(N)}}n.PDFFetchStream=C;class T{constructor(N){this._stream=N,this._reader=null,this._loaded=0,this._filename=null;const L=N.source;this._withCredentials=L.withCredentials||!1,this._contentLength=L.length,this._headersCapability=new f.PromiseCapability,this._disableRange=L.disableRange||!1,this._rangeChunkSize=L.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!L.disableStream,this._isRangeSupported=!L.disableRange,this._headers=A(this._stream.httpHeaders);const F=L.url;fetch(F,S(this._headers,this._withCredentials,this._abortController)).then(H=>{if(!(0,y.validateResponseStatus)(H.status))throw(0,y.createResponseStatusError)(H.status,F);this._reader=H.body.getReader(),this._headersCapability.resolve();const z=Y=>H.headers.get(Y),{allowRangeRequests:U,suggestedLength:G}=(0,y.validateRangeRequestCapabilities)({getResponseHeader:z,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=U,this._contentLength=G||this._contentLength,this._filename=(0,y.extractFilenameFromHeader)(z),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new f.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:N,done:L}=await this._reader.read();return L?{value:N,done:L}:(this._loaded+=N.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:w(N),done:!1})}cancel(N){this._reader?.cancel(N),this._abortController.abort()}}class R{constructor(N,L,F){this._stream=N,this._reader=null,this._loaded=0;const H=N.source;this._withCredentials=H.withCredentials||!1,this._readCapability=new f.PromiseCapability,this._isStreamingSupported=!H.disableStream,this._abortController=new AbortController,this._headers=A(this._stream.httpHeaders),this._headers.append("Range",`bytes=${L}-${F-1}`);const z=H.url;fetch(z,S(this._headers,this._withCredentials,this._abortController)).then(U=>{if(!(0,y.validateResponseStatus)(U.status))throw(0,y.createResponseStatusError)(U.status,z);this._readCapability.resolve(),this._reader=U.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:N,done:L}=await this._reader.read();return L?{value:N,done:L}:(this._loaded+=N.byteLength,this.onProgress?.({loaded:this._loaded}),{value:w(N),done:!1})}cancel(N){this._reader?.cancel(N),this._abortController.abort()}}}),((s,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.createResponseStatusError=C,n.extractFilenameFromHeader=w,n.validateRangeRequestCapabilities=A,n.validateResponseStatus=T;var f=u(1),y=u(21),S=u(6);function A({getResponseHeader:R,isHttp:I,rangeChunkSize:N,disableRange:L}){const F={allowRangeRequests:!1,suggestedLength:void 0},H=parseInt(R("Content-Length"),10);return!Number.isInteger(H)||(F.suggestedLength=H,H<=2*N)||L||!I||R("Accept-Ranges")!=="bytes"||(R("Content-Encoding")||"identity")!=="identity"||(F.allowRangeRequests=!0),F}function w(R){const I=R("Content-Disposition");if(I){let N=(0,y.getFilenameFromContentDispositionHeader)(I);if(N.includes("%"))try{N=decodeURIComponent(N)}catch{}if((0,S.isPdfFile)(N))return N}return null}function C(R,I){return R===404||R===0&&I.startsWith("file:")?new f.MissingPDFException('Missing PDF "'+I+'".'):new f.UnexpectedResponseException(`Unexpected server response (${R}) while retrieving PDF "${I}".`,R)}function T(R){return R===200||R===206}}),((s,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.getFilenameFromContentDispositionHeader=y;var f=u(1);function y(S){let A=!0,w=C("filename\\*","i").exec(S);if(w){w=w[1];let H=N(w);return H=unescape(H),H=L(H),H=F(H),R(H)}if(w=I(S),w){const H=F(w);return R(H)}if(w=C("filename","i").exec(S),w){w=w[1];let H=N(w);return H=F(H),R(H)}function C(H,z){return new RegExp("(?:^|;)\\s*"+H+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',z)}function T(H,z){if(H){if(!/^[\x00-\xFF]+$/.test(z))return z;try{const U=new TextDecoder(H,{fatal:!0}),G=(0,f.stringToBytes)(z);z=U.decode(G),A=!1}catch{}}return z}function R(H){return A&&/[\x80-\xff]/.test(H)&&(H=T("utf-8",H),A&&(H=T("iso-8859-1",H))),H}function I(H){const z=[];let U;const G=C("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(U=G.exec(H))!==null;){let[,K,Z,J]=U;if(K=parseInt(K,10),K in z){if(K===0)break;continue}z[K]=[Z,J]}const Y=[];for(let K=0;K<z.length&&K in z;++K){let[Z,J]=z[K];J=N(J),Z&&(J=unescape(J),K===0&&(J=L(J))),Y.push(J)}return Y.join("")}function N(H){if(H.startsWith('"')){const z=H.slice(1).split('\\"');for(let U=0;U<z.length;++U){const G=z[U].indexOf('"');G!==-1&&(z[U]=z[U].slice(0,G),z.length=U+1),z[U]=z[U].replaceAll(/\\(.)/g,"$1")}H=z.join('"')}return H}function L(H){const z=H.indexOf("'");if(z===-1)return H;const U=H.slice(0,z),G=H.slice(z+1).replace(/^[^']*'/,"");return T(U,G)}function F(H){return!H.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(H)?H:H.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(z,U,G,Y){if(G==="q"||G==="Q")return Y=Y.replaceAll("_"," "),Y=Y.replaceAll(/=([0-9a-fA-F]{2})/g,function(K,Z){return String.fromCharCode(parseInt(Z,16))}),T(U,Y);try{Y=atob(Y)}catch{}return T(U,Y)})}return""}}),((s,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.PDFNetworkStream=void 0;var f=u(1),y=u(20);const S=200,A=206;function w(N){const L=N.response;return typeof L!="string"?L:(0,f.stringToBytes)(L).buffer}class C{constructor(L,F={}){this.url=L,this.isHttp=/^https?:/i.test(L),this.httpHeaders=this.isHttp&&F.httpHeaders||Object.create(null),this.withCredentials=F.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(L,F,H){const z={begin:L,end:F};for(const U in H)z[U]=H[U];return this.request(z)}requestFull(L){return this.request(L)}request(L){const F=new XMLHttpRequest,H=this.currXhrId++,z=this.pendingRequests[H]={xhr:F};F.open("GET",this.url),F.withCredentials=this.withCredentials;for(const U in this.httpHeaders){const G=this.httpHeaders[U];G!==void 0&&F.setRequestHeader(U,G)}return this.isHttp&&"begin"in L&&"end"in L?(F.setRequestHeader("Range",`bytes=${L.begin}-${L.end-1}`),z.expectedStatus=A):z.expectedStatus=S,F.responseType="arraybuffer",L.onError&&(F.onerror=function(U){L.onError(F.status)}),F.onreadystatechange=this.onStateChange.bind(this,H),F.onprogress=this.onProgress.bind(this,H),z.onHeadersReceived=L.onHeadersReceived,z.onDone=L.onDone,z.onError=L.onError,z.onProgress=L.onProgress,F.send(null),H}onProgress(L,F){const H=this.pendingRequests[L];H&&H.onProgress?.(F)}onStateChange(L,F){const H=this.pendingRequests[L];if(!H)return;const z=H.xhr;if(z.readyState>=2&&H.onHeadersReceived&&(H.onHeadersReceived(),delete H.onHeadersReceived),z.readyState!==4||!(L in this.pendingRequests))return;if(delete this.pendingRequests[L],z.status===0&&this.isHttp){H.onError?.(z.status);return}const U=z.status||S;if(!(U===S&&H.expectedStatus===A)&&U!==H.expectedStatus){H.onError?.(z.status);return}const G=w(z);if(U===A){const Y=z.getResponseHeader("Content-Range"),K=/bytes (\d+)-(\d+)\/(\d+)/.exec(Y);H.onDone({begin:parseInt(K[1],10),chunk:G})}else G?H.onDone({begin:0,chunk:G}):H.onError?.(z.status)}getRequestXhr(L){return this.pendingRequests[L].xhr}isPendingRequest(L){return L in this.pendingRequests}abortRequest(L){const F=this.pendingRequests[L].xhr;delete this.pendingRequests[L],F.abort()}}class T{constructor(L){this._source=L,this._manager=new C(L.url,{httpHeaders:L.httpHeaders,withCredentials:L.withCredentials}),this._rangeChunkSize=L.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(L){const F=this._rangeRequestReaders.indexOf(L);F>=0&&this._rangeRequestReaders.splice(F,1)}getFullReader(){return(0,f.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new R(this._manager,this._source),this._fullRequestReader}getRangeReader(L,F){const H=new I(this._manager,L,F);return H.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(H),H}cancelAllRequests(L){this._fullRequestReader?.cancel(L);for(const F of this._rangeRequestReaders.slice(0))F.cancel(L)}}n.PDFNetworkStream=T;class R{constructor(L,F){this._manager=L;const H={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=F.url,this._fullRequestId=L.requestFull(H),this._headersReceivedCapability=new f.PromiseCapability,this._disableRange=F.disableRange||!1,this._contentLength=F.length,this._rangeChunkSize=F.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const L=this._fullRequestId,F=this._manager.getRequestXhr(L),H=G=>F.getResponseHeader(G),{allowRangeRequests:z,suggestedLength:U}=(0,y.validateRangeRequestCapabilities)({getResponseHeader:H,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});z&&(this._isRangeSupported=!0),this._contentLength=U||this._contentLength,this._filename=(0,y.extractFilenameFromHeader)(H),this._isRangeSupported&&this._manager.abortRequest(L),this._headersReceivedCapability.resolve()}_onDone(L){if(L&&(this._requests.length>0?this._requests.shift().resolve({value:L.chunk,done:!1}):this._cachedChunks.push(L.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const F of this._requests)F.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(L){this._storedError=(0,y.createResponseStatusError)(L,this._url),this._headersReceivedCapability.reject(this._storedError);for(const F of this._requests)F.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(L){this.onProgress?.({loaded:L.loaded,total:L.lengthComputable?L.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const L=new f.PromiseCapability;return this._requests.push(L),L.promise}cancel(L){this._done=!0,this._headersReceivedCapability.reject(L);for(const F of this._requests)F.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class I{constructor(L,F,H){this._manager=L;const z={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=L.url,this._requestId=L.requestRange(F,H,z),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(L){const F=L.chunk;this._requests.length>0?this._requests.shift().resolve({value:F,done:!1}):this._queuedChunk=F,this._done=!0;for(const H of this._requests)H.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(L){this._storedError=(0,y.createResponseStatusError)(L,this._url);for(const F of this._requests)F.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(L){this.isStreamingSupported||this.onProgress?.({loaded:L.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const F=this._queuedChunk;return this._queuedChunk=null,{value:F,done:!1}}if(this._done)return{value:void 0,done:!0};const L=new f.PromiseCapability;return this._requests.push(L),L.promise}cancel(L){this._done=!0;for(const F of this._requests)F.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}}),((s,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.PDFNodeStream=void 0;var f=u(1),y=u(20);const S=/^file:\/\/\/[a-zA-Z]:\//;function A(H){const z=require$$5,U=z.parse(H);return U.protocol==="file:"||U.host?U:/^[a-z]:[/\\]/i.test(H)?z.parse(`file:///${H}`):(U.host||(U.protocol="file:"),U)}class w{constructor(z){this.source=z,this.url=A(z.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&z.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,f.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new L(this):new I(this),this._fullRequestReader}getRangeReader(z,U){if(U<=this._progressiveDataLength)return null;const G=this.isFsUrl?new F(this,z,U):new N(this,z,U);return this._rangeRequestReaders.push(G),G}cancelAllRequests(z){this._fullRequestReader?.cancel(z);for(const U of this._rangeRequestReaders.slice(0))U.cancel(z)}}n.PDFNodeStream=w;class C{constructor(z){this._url=z.url,this._done=!1,this._storedError=null,this.onProgress=null;const U=z.source;this._contentLength=U.length,this._loaded=0,this._filename=null,this._disableRange=U.disableRange||!1,this._rangeChunkSize=U.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!U.disableStream,this._isRangeSupported=!U.disableRange,this._readableStream=null,this._readCapability=new f.PromiseCapability,this._headersCapability=new f.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const z=this._readableStream.read();return z===null?(this._readCapability=new f.PromiseCapability,this.read()):(this._loaded+=z.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(z).buffer,done:!1})}cancel(z){if(!this._readableStream){this._error(z);return}this._readableStream.destroy(z)}_error(z){this._storedError=z,this._readCapability.resolve()}_setReadableStream(z){this._readableStream=z,z.on("readable",()=>{this._readCapability.resolve()}),z.on("end",()=>{z.destroy(),this._done=!0,this._readCapability.resolve()}),z.on("error",U=>{this._error(U)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new f.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class T{constructor(z){this._url=z.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new f.PromiseCapability;const U=z.source;this._isStreamingSupported=!U.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const z=this._readableStream.read();return z===null?(this._readCapability=new f.PromiseCapability,this.read()):(this._loaded+=z.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(z).buffer,done:!1})}cancel(z){if(!this._readableStream){this._error(z);return}this._readableStream.destroy(z)}_error(z){this._storedError=z,this._readCapability.resolve()}_setReadableStream(z){this._readableStream=z,z.on("readable",()=>{this._readCapability.resolve()}),z.on("end",()=>{z.destroy(),this._done=!0,this._readCapability.resolve()}),z.on("error",U=>{this._error(U)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function R(H,z){return{protocol:H.protocol,auth:H.auth,host:H.hostname,port:H.port,path:H.path,method:"GET",headers:z}}class I extends C{constructor(z){super(z);const U=G=>{if(G.statusCode===404){const J=new f.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=J,this._headersCapability.reject(J);return}this._headersCapability.resolve(),this._setReadableStream(G);const Y=J=>this._readableStream.headers[J.toLowerCase()],{allowRangeRequests:K,suggestedLength:Z}=(0,y.validateRangeRequestCapabilities)({getResponseHeader:Y,isHttp:z.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=K,this._contentLength=Z||this._contentLength,this._filename=(0,y.extractFilenameFromHeader)(Y)};if(this._request=null,this._url.protocol==="http:"){const G=require$$5;this._request=G.request(R(this._url,z.httpHeaders),U)}else{const G=require$$5;this._request=G.request(R(this._url,z.httpHeaders),U)}this._request.on("error",G=>{this._storedError=G,this._headersCapability.reject(G)}),this._request.end()}}class N extends T{constructor(z,U,G){super(z),this._httpHeaders={};for(const K in z.httpHeaders){const Z=z.httpHeaders[K];Z!==void 0&&(this._httpHeaders[K]=Z)}this._httpHeaders.Range=`bytes=${U}-${G-1}`;const Y=K=>{if(K.statusCode===404){const Z=new f.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=Z;return}this._setReadableStream(K)};if(this._request=null,this._url.protocol==="http:"){const K=require$$5;this._request=K.request(R(this._url,this._httpHeaders),Y)}else{const K=require$$5;this._request=K.request(R(this._url,this._httpHeaders),Y)}this._request.on("error",K=>{this._storedError=K}),this._request.end()}}class L extends C{constructor(z){super(z);let U=decodeURIComponent(this._url.path);S.test(this._url.href)&&(U=U.replace(/^\//,""));const G=require$$5;G.lstat(U,(Y,K)=>{if(Y){Y.code==="ENOENT"&&(Y=new f.MissingPDFException(`Missing PDF "${U}".`)),this._storedError=Y,this._headersCapability.reject(Y);return}this._contentLength=K.size,this._setReadableStream(G.createReadStream(U)),this._headersCapability.resolve()})}}class F extends T{constructor(z,U,G){super(z);let Y=decodeURIComponent(this._url.path);S.test(this._url.href)&&(Y=Y.replace(/^\//,""));const K=require$$5;this._setReadableStream(K.createReadStream(Y,{start:U,end:G-1}))}}}),((s,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.SVGGraphics=void 0;var f=u(6),y=u(1);const S={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},A="http://www.w3.org/XML/1998/namespace",w="http://www.w3.org/1999/xlink",C=["butt","round","square"],T=["miter","round","bevel"],R=function(K,Z="",J=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!J)return URL.createObjectURL(new Blob([K],{type:Z}));const te="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let de=`data:${Z};base64,`;for(let se=0,ne=K.length;se<ne;se+=3){const ge=K[se]&255,Ee=K[se+1]&255,we=K[se+2]&255,Ie=ge>>2,Be=(ge&3)<<4|Ee>>4,Me=se+1<ne?(Ee&15)<<2|we>>6:64,Re=se+2<ne?we&63:64;de+=te[Ie]+te[Be]+te[Me]+te[Re]}return de},I=(function(){const K=new Uint8Array([137,80,78,71,13,10,26,10]),Z=12,J=new Int32Array(256);for(let we=0;we<256;we++){let Ie=we;for(let Be=0;Be<8;Be++)Ie=Ie&1?3988292384^Ie>>1&2147483647:Ie>>1&2147483647;J[we]=Ie}function te(we,Ie,Be){let Me=-1;for(let Re=Ie;Re<Be;Re++){const Te=(Me^we[Re])&255,Se=J[Te];Me=Me>>>8^Se}return Me^-1}function de(we,Ie,Be,Me){let Re=Me;const Te=Ie.length;Be[Re]=Te>>24&255,Be[Re+1]=Te>>16&255,Be[Re+2]=Te>>8&255,Be[Re+3]=Te&255,Re+=4,Be[Re]=we.charCodeAt(0)&255,Be[Re+1]=we.charCodeAt(1)&255,Be[Re+2]=we.charCodeAt(2)&255,Be[Re+3]=we.charCodeAt(3)&255,Re+=4,Be.set(Ie,Re),Re+=Ie.length;const Se=te(Be,Me+4,Re);Be[Re]=Se>>24&255,Be[Re+1]=Se>>16&255,Be[Re+2]=Se>>8&255,Be[Re+3]=Se&255}function se(we,Ie,Be){let Me=1,Re=0;for(let Te=Ie;Te<Be;++Te)Me=(Me+(we[Te]&255))%65521,Re=(Re+Me)%65521;return Re<<16|Me}function ne(we){if(!y.isNodeJS)return ge(we);try{const Ie=parseInt(process.versions.node)>=8?we:Buffer.from(we),Be=require$$5.deflateSync(Ie,{level:9});return Be instanceof Uint8Array?Be:new Uint8Array(Be)}catch(Ie){(0,y.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+Ie)}return ge(we)}function ge(we){let Ie=we.length;const Be=65535,Me=Math.ceil(Ie/Be),Re=new Uint8Array(2+Ie+Me*5+4);let Te=0;Re[Te++]=120,Re[Te++]=156;let Se=0;for(;Ie>Be;)Re[Te++]=0,Re[Te++]=255,Re[Te++]=255,Re[Te++]=0,Re[Te++]=0,Re.set(we.subarray(Se,Se+Be),Te),Te+=Be,Se+=Be,Ie-=Be;Re[Te++]=1,Re[Te++]=Ie&255,Re[Te++]=Ie>>8&255,Re[Te++]=~Ie&65535&255,Re[Te++]=(~Ie&65535)>>8&255,Re.set(we.subarray(Se),Te),Te+=we.length-Se;const oe=se(we,0,we.length);return Re[Te++]=oe>>24&255,Re[Te++]=oe>>16&255,Re[Te++]=oe>>8&255,Re[Te++]=oe&255,Re}function Ee(we,Ie,Be,Me){const Re=we.width,Te=we.height;let Se,oe,ae;const be=we.data;switch(Ie){case y.ImageKind.GRAYSCALE_1BPP:oe=0,Se=1,ae=Re+7>>3;break;case y.ImageKind.RGB_24BPP:oe=2,Se=8,ae=Re*3;break;case y.ImageKind.RGBA_32BPP:oe=6,Se=8,ae=Re*4;break;default:throw new Error("invalid format")}const he=new Uint8Array((1+ae)*Te);let ue=0,ye=0;for(let xe=0;xe<Te;++xe)he[ue++]=0,he.set(be.subarray(ye,ye+ae),ue),ye+=ae,ue+=ae;if(Ie===y.ImageKind.GRAYSCALE_1BPP&&Me){ue=0;for(let xe=0;xe<Te;xe++){ue++;for(let Ne=0;Ne<ae;Ne++)he[ue++]^=255}}const ce=new Uint8Array([Re>>24&255,Re>>16&255,Re>>8&255,Re&255,Te>>24&255,Te>>16&255,Te>>8&255,Te&255,Se,oe,0,0,0]),_e=ne(he),ke=K.length+Z*3+ce.length+_e.length,Pe=new Uint8Array(ke);let $e=0;return Pe.set(K,$e),$e+=K.length,de("IHDR",ce,Pe,$e),$e+=Z+ce.length,de("IDATA",_e,Pe,$e),$e+=Z+_e.length,de("IEND",new Uint8Array(0),Pe,$e),R(Pe,"image/png",Be)}return function(we,Ie,Be){const Me=we.kind===void 0?y.ImageKind.GRAYSCALE_1BPP:we.kind;return Ee(we,Me,Ie,Be)}})();class N{constructor(){this.fontSizeScale=1,this.fontWeight=S.fontWeight,this.fontSize=0,this.textMatrix=y.IDENTITY_MATRIX,this.fontMatrix=y.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=y.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=S.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(Z,J){this.x=Z,this.y=J}}function L(K){let Z=[];const J=[];for(const te of K){if(te.fn==="save"){Z.push({fnId:92,fn:"group",items:[]}),J.push(Z),Z=Z.at(-1).items;continue}te.fn==="restore"?Z=J.pop():Z.push(te)}return Z}function F(K){if(Number.isInteger(K))return K.toString();const Z=K.toFixed(10);let J=Z.length-1;if(Z[J]!=="0")return Z;do J--;while(Z[J]==="0");return Z.substring(0,Z[J]==="."?J:J+1)}function H(K){if(K[4]===0&&K[5]===0){if(K[1]===0&&K[2]===0)return K[0]===1&&K[3]===1?"":`scale(${F(K[0])} ${F(K[3])})`;if(K[0]===K[3]&&K[1]===-K[2]){const Z=Math.acos(K[0])*180/Math.PI;return`rotate(${F(Z)})`}}else if(K[0]===1&&K[1]===0&&K[2]===0&&K[3]===1)return`translate(${F(K[4])} ${F(K[5])})`;return`matrix(${F(K[0])} ${F(K[1])} ${F(K[2])} ${F(K[3])} ${F(K[4])} ${F(K[5])})`}let z=0,U=0,G=0;class Y{constructor(Z,J,te=!1){(0,f.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new f.DOMSVGFactory,this.current=new N,this.transformMatrix=y.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=Z,this.objs=J,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!te,this._operatorIdMapping=[];for(const de in y.OPS)this._operatorIdMapping[y.OPS[de]]=de}getObject(Z,J=null){return typeof Z=="string"?Z.startsWith("g_")?this.commonObjs.get(Z):this.objs.get(Z):J}save(){this.transformStack.push(this.transformMatrix);const Z=this.current;this.extraStack.push(Z),this.current=Z.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(Z){this.save(),this.executeOpTree(Z),this.restore()}loadDependencies(Z){const J=Z.fnArray,te=Z.argsArray;for(let de=0,se=J.length;de<se;de++)if(J[de]===y.OPS.dependency)for(const ne of te[de]){const ge=ne.startsWith("g_")?this.commonObjs:this.objs,Ee=new Promise(we=>{ge.get(ne,we)});this.current.dependencies.push(Ee)}return Promise.all(this.current.dependencies)}transform(Z,J,te,de,se,ne){const ge=[Z,J,te,de,se,ne];this.transformMatrix=y.Util.transform(this.transformMatrix,ge),this.tgrp=null}getSVG(Z,J){this.viewport=J;const te=this._initialize(J);return this.loadDependencies(Z).then(()=>(this.transformMatrix=y.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(Z)),te))}convertOpList(Z){const J=this._operatorIdMapping,te=Z.argsArray,de=Z.fnArray,se=[];for(let ne=0,ge=de.length;ne<ge;ne++){const Ee=de[ne];se.push({fnId:Ee,fn:J[Ee],args:te[ne]})}return L(se)}executeOpTree(Z){for(const J of Z){const te=J.fn,de=J.fnId,se=J.args;switch(de|0){case y.OPS.beginText:this.beginText();break;case y.OPS.dependency:break;case y.OPS.setLeading:this.setLeading(se);break;case y.OPS.setLeadingMoveText:this.setLeadingMoveText(se[0],se[1]);break;case y.OPS.setFont:this.setFont(se);break;case y.OPS.showText:this.showText(se[0]);break;case y.OPS.showSpacedText:this.showText(se[0]);break;case y.OPS.endText:this.endText();break;case y.OPS.moveText:this.moveText(se[0],se[1]);break;case y.OPS.setCharSpacing:this.setCharSpacing(se[0]);break;case y.OPS.setWordSpacing:this.setWordSpacing(se[0]);break;case y.OPS.setHScale:this.setHScale(se[0]);break;case y.OPS.setTextMatrix:this.setTextMatrix(se[0],se[1],se[2],se[3],se[4],se[5]);break;case y.OPS.setTextRise:this.setTextRise(se[0]);break;case y.OPS.setTextRenderingMode:this.setTextRenderingMode(se[0]);break;case y.OPS.setLineWidth:this.setLineWidth(se[0]);break;case y.OPS.setLineJoin:this.setLineJoin(se[0]);break;case y.OPS.setLineCap:this.setLineCap(se[0]);break;case y.OPS.setMiterLimit:this.setMiterLimit(se[0]);break;case y.OPS.setFillRGBColor:this.setFillRGBColor(se[0],se[1],se[2]);break;case y.OPS.setStrokeRGBColor:this.setStrokeRGBColor(se[0],se[1],se[2]);break;case y.OPS.setStrokeColorN:this.setStrokeColorN(se);break;case y.OPS.setFillColorN:this.setFillColorN(se);break;case y.OPS.shadingFill:this.shadingFill(se[0]);break;case y.OPS.setDash:this.setDash(se[0],se[1]);break;case y.OPS.setRenderingIntent:this.setRenderingIntent(se[0]);break;case y.OPS.setFlatness:this.setFlatness(se[0]);break;case y.OPS.setGState:this.setGState(se[0]);break;case y.OPS.fill:this.fill();break;case y.OPS.eoFill:this.eoFill();break;case y.OPS.stroke:this.stroke();break;case y.OPS.fillStroke:this.fillStroke();break;case y.OPS.eoFillStroke:this.eoFillStroke();break;case y.OPS.clip:this.clip("nonzero");break;case y.OPS.eoClip:this.clip("evenodd");break;case y.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case y.OPS.paintImageXObject:this.paintImageXObject(se[0]);break;case y.OPS.paintInlineImageXObject:this.paintInlineImageXObject(se[0]);break;case y.OPS.paintImageMaskXObject:this.paintImageMaskXObject(se[0]);break;case y.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(se[0],se[1]);break;case y.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case y.OPS.closePath:this.closePath();break;case y.OPS.closeStroke:this.closeStroke();break;case y.OPS.closeFillStroke:this.closeFillStroke();break;case y.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case y.OPS.nextLine:this.nextLine();break;case y.OPS.transform:this.transform(se[0],se[1],se[2],se[3],se[4],se[5]);break;case y.OPS.constructPath:this.constructPath(se[0],se[1]);break;case y.OPS.endPath:this.endPath();break;case 92:this.group(J.items);break;default:(0,y.warn)(`Unimplemented operator ${te}`);break}}}setWordSpacing(Z){this.current.wordSpacing=Z}setCharSpacing(Z){this.current.charSpacing=Z}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(Z,J,te,de,se,ne){const ge=this.current;ge.textMatrix=ge.lineMatrix=[Z,J,te,de,se,ne],ge.textMatrixScale=Math.hypot(Z,J),ge.x=ge.lineX=0,ge.y=ge.lineY=0,ge.xcoords=[],ge.ycoords=[],ge.tspan=this.svgFactory.createElement("svg:tspan"),ge.tspan.setAttributeNS(null,"font-family",ge.fontFamily),ge.tspan.setAttributeNS(null,"font-size",`${F(ge.fontSize)}px`),ge.tspan.setAttributeNS(null,"y",F(-ge.y)),ge.txtElement=this.svgFactory.createElement("svg:text"),ge.txtElement.append(ge.tspan)}beginText(){const Z=this.current;Z.x=Z.lineX=0,Z.y=Z.lineY=0,Z.textMatrix=y.IDENTITY_MATRIX,Z.lineMatrix=y.IDENTITY_MATRIX,Z.textMatrixScale=1,Z.tspan=this.svgFactory.createElement("svg:tspan"),Z.txtElement=this.svgFactory.createElement("svg:text"),Z.txtgrp=this.svgFactory.createElement("svg:g"),Z.xcoords=[],Z.ycoords=[]}moveText(Z,J){const te=this.current;te.x=te.lineX+=Z,te.y=te.lineY+=J,te.xcoords=[],te.ycoords=[],te.tspan=this.svgFactory.createElement("svg:tspan"),te.tspan.setAttributeNS(null,"font-family",te.fontFamily),te.tspan.setAttributeNS(null,"font-size",`${F(te.fontSize)}px`),te.tspan.setAttributeNS(null,"y",F(-te.y))}showText(Z){const J=this.current,te=J.font,de=J.fontSize;if(de===0)return;const se=J.fontSizeScale,ne=J.charSpacing,ge=J.wordSpacing,Ee=J.fontDirection,we=J.textHScale*Ee,Ie=te.vertical,Be=Ie?1:-1,Me=te.defaultVMetrics,Re=de*J.fontMatrix[0];let Te=0;for(const ae of Z){if(ae===null){Te+=Ee*ge;continue}else if(typeof ae=="number"){Te+=Be*ae*de/1e3;continue}const be=(ae.isSpace?ge:0)+ne,he=ae.fontChar;let ue,ye,ce=ae.width;if(Ie){let ke;const Pe=ae.vmetric||Me;ke=ae.vmetric?Pe[1]:ce*.5,ke=-ke*Re;const $e=Pe[2]*Re;ce=Pe?-Pe[0]:ce,ue=ke/se,ye=(Te+$e)/se}else ue=Te/se,ye=0;(ae.isInFont||te.missingFile)&&(J.xcoords.push(J.x+ue),Ie&&J.ycoords.push(-J.y+ye),J.tspan.textContent+=he);const _e=Ie?ce*Re-be*Ee:ce*Re+be*Ee;Te+=_e}J.tspan.setAttributeNS(null,"x",J.xcoords.map(F).join(" ")),Ie?J.tspan.setAttributeNS(null,"y",J.ycoords.map(F).join(" ")):J.tspan.setAttributeNS(null,"y",F(-J.y)),Ie?J.y-=Te:J.x+=Te*we,J.tspan.setAttributeNS(null,"font-family",J.fontFamily),J.tspan.setAttributeNS(null,"font-size",`${F(J.fontSize)}px`),J.fontStyle!==S.fontStyle&&J.tspan.setAttributeNS(null,"font-style",J.fontStyle),J.fontWeight!==S.fontWeight&&J.tspan.setAttributeNS(null,"font-weight",J.fontWeight);const Se=J.textRenderingMode&y.TextRenderingMode.FILL_STROKE_MASK;if(Se===y.TextRenderingMode.FILL||Se===y.TextRenderingMode.FILL_STROKE?(J.fillColor!==S.fillColor&&J.tspan.setAttributeNS(null,"fill",J.fillColor),J.fillAlpha<1&&J.tspan.setAttributeNS(null,"fill-opacity",J.fillAlpha)):J.textRenderingMode===y.TextRenderingMode.ADD_TO_PATH?J.tspan.setAttributeNS(null,"fill","transparent"):J.tspan.setAttributeNS(null,"fill","none"),Se===y.TextRenderingMode.STROKE||Se===y.TextRenderingMode.FILL_STROKE){const ae=1/(J.textMatrixScale||1);this._setStrokeAttributes(J.tspan,ae)}let oe=J.textMatrix;J.textRise!==0&&(oe=oe.slice(),oe[5]+=J.textRise),J.txtElement.setAttributeNS(null,"transform",`${H(oe)} scale(${F(we)}, -1)`),J.txtElement.setAttributeNS(A,"xml:space","preserve"),J.txtElement.append(J.tspan),J.txtgrp.append(J.txtElement),this._ensureTransformGroup().append(J.txtElement)}setLeadingMoveText(Z,J){this.setLeading(-J),this.moveText(Z,J)}addFontStyle(Z){if(!Z.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const J=R(Z.data,Z.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${Z.loadedName}"; src: url(${J}); }
`}setFont(Z){const J=this.current,te=this.commonObjs.get(Z[0]);let de=Z[1];J.font=te,this.embedFonts&&!te.missingFile&&!this.embeddedFonts[te.loadedName]&&(this.addFontStyle(te),this.embeddedFonts[te.loadedName]=te),J.fontMatrix=te.fontMatrix||y.FONT_IDENTITY_MATRIX;let se="normal";te.black?se="900":te.bold&&(se="bold");const ne=te.italic?"italic":"normal";de<0?(de=-de,J.fontDirection=-1):J.fontDirection=1,J.fontSize=de,J.fontFamily=te.loadedName,J.fontWeight=se,J.fontStyle=ne,J.tspan=this.svgFactory.createElement("svg:tspan"),J.tspan.setAttributeNS(null,"y",F(-J.y)),J.xcoords=[],J.ycoords=[]}endText(){const Z=this.current;Z.textRenderingMode&y.TextRenderingMode.ADD_TO_PATH_FLAG&&Z.txtElement?.hasChildNodes()&&(Z.element=Z.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(Z){Z>0&&(this.current.lineWidth=Z)}setLineCap(Z){this.current.lineCap=C[Z]}setLineJoin(Z){this.current.lineJoin=T[Z]}setMiterLimit(Z){this.current.miterLimit=Z}setStrokeAlpha(Z){this.current.strokeAlpha=Z}setStrokeRGBColor(Z,J,te){this.current.strokeColor=y.Util.makeHexColor(Z,J,te)}setFillAlpha(Z){this.current.fillAlpha=Z}setFillRGBColor(Z,J,te){this.current.fillColor=y.Util.makeHexColor(Z,J,te),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(Z){this.current.strokeColor=this._makeColorN_Pattern(Z)}setFillColorN(Z){this.current.fillColor=this._makeColorN_Pattern(Z)}shadingFill(Z){const{width:J,height:te}=this.viewport,de=y.Util.inverseTransform(this.transformMatrix),[se,ne,ge,Ee]=y.Util.getAxialAlignedBoundingBox([0,0,J,te],de),we=this.svgFactory.createElement("svg:rect");we.setAttributeNS(null,"x",se),we.setAttributeNS(null,"y",ne),we.setAttributeNS(null,"width",ge-se),we.setAttributeNS(null,"height",Ee-ne),we.setAttributeNS(null,"fill",this._makeShadingPattern(Z)),this.current.fillAlpha<1&&we.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(we)}_makeColorN_Pattern(Z){return Z[0]==="TilingPattern"?this._makeTilingPattern(Z):this._makeShadingPattern(Z)}_makeTilingPattern(Z){const J=Z[1],te=Z[2],de=Z[3]||y.IDENTITY_MATRIX,[se,ne,ge,Ee]=Z[4],we=Z[5],Ie=Z[6],Be=Z[7],Me=`shading${G++}`,[Re,Te,Se,oe]=y.Util.normalizeRect([...y.Util.applyTransform([se,ne],de),...y.Util.applyTransform([ge,Ee],de)]),[ae,be]=y.Util.singularValueDecompose2dScale(de),he=we*ae,ue=Ie*be,ye=this.svgFactory.createElement("svg:pattern");ye.setAttributeNS(null,"id",Me),ye.setAttributeNS(null,"patternUnits","userSpaceOnUse"),ye.setAttributeNS(null,"width",he),ye.setAttributeNS(null,"height",ue),ye.setAttributeNS(null,"x",`${Re}`),ye.setAttributeNS(null,"y",`${Te}`);const ce=this.svg,_e=this.transformMatrix,ke=this.current.fillColor,Pe=this.current.strokeColor,$e=this.svgFactory.create(Se-Re,oe-Te);if(this.svg=$e,this.transformMatrix=de,Be===2){const xe=y.Util.makeHexColor(...J);this.current.fillColor=xe,this.current.strokeColor=xe}return this.executeOpTree(this.convertOpList(te)),this.svg=ce,this.transformMatrix=_e,this.current.fillColor=ke,this.current.strokeColor=Pe,ye.append($e.childNodes[0]),this.defs.append(ye),`url(#${Me})`}_makeShadingPattern(Z){switch(typeof Z=="string"&&(Z=this.objs.get(Z)),Z[0]){case"RadialAxial":const J=`shading${G++}`,te=Z[3];let de;switch(Z[1]){case"axial":const se=Z[4],ne=Z[5];de=this.svgFactory.createElement("svg:linearGradient"),de.setAttributeNS(null,"id",J),de.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),de.setAttributeNS(null,"x1",se[0]),de.setAttributeNS(null,"y1",se[1]),de.setAttributeNS(null,"x2",ne[0]),de.setAttributeNS(null,"y2",ne[1]);break;case"radial":const ge=Z[4],Ee=Z[5],we=Z[6],Ie=Z[7];de=this.svgFactory.createElement("svg:radialGradient"),de.setAttributeNS(null,"id",J),de.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),de.setAttributeNS(null,"cx",Ee[0]),de.setAttributeNS(null,"cy",Ee[1]),de.setAttributeNS(null,"r",Ie),de.setAttributeNS(null,"fx",ge[0]),de.setAttributeNS(null,"fy",ge[1]),de.setAttributeNS(null,"fr",we);break;default:throw new Error(`Unknown RadialAxial type: ${Z[1]}`)}for(const se of te){const ne=this.svgFactory.createElement("svg:stop");ne.setAttributeNS(null,"offset",se[0]),ne.setAttributeNS(null,"stop-color",se[1]),de.append(ne)}return this.defs.append(de),`url(#${J})`;case"Mesh":return(0,y.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${Z[0]}`)}}setDash(Z,J){this.current.dashArray=Z,this.current.dashPhase=J}constructPath(Z,J){const te=this.current;let de=te.x,se=te.y,ne=[],ge=0;for(const Ee of Z)switch(Ee|0){case y.OPS.rectangle:de=J[ge++],se=J[ge++];const we=J[ge++],Ie=J[ge++],Be=de+we,Me=se+Ie;ne.push("M",F(de),F(se),"L",F(Be),F(se),"L",F(Be),F(Me),"L",F(de),F(Me),"Z");break;case y.OPS.moveTo:de=J[ge++],se=J[ge++],ne.push("M",F(de),F(se));break;case y.OPS.lineTo:de=J[ge++],se=J[ge++],ne.push("L",F(de),F(se));break;case y.OPS.curveTo:de=J[ge+4],se=J[ge+5],ne.push("C",F(J[ge]),F(J[ge+1]),F(J[ge+2]),F(J[ge+3]),F(de),F(se)),ge+=6;break;case y.OPS.curveTo2:ne.push("C",F(de),F(se),F(J[ge]),F(J[ge+1]),F(J[ge+2]),F(J[ge+3])),de=J[ge+2],se=J[ge+3],ge+=4;break;case y.OPS.curveTo3:de=J[ge+2],se=J[ge+3],ne.push("C",F(J[ge]),F(J[ge+1]),F(de),F(se),F(de),F(se)),ge+=4;break;case y.OPS.closePath:ne.push("Z");break}ne=ne.join(" "),te.path&&Z.length>0&&Z[0]!==y.OPS.rectangle&&Z[0]!==y.OPS.moveTo?ne=te.path.getAttributeNS(null,"d")+ne:(te.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(te.path)),te.path.setAttributeNS(null,"d",ne),te.path.setAttributeNS(null,"fill","none"),te.element=te.path,te.setCurrentPoint(de,se)}endPath(){const Z=this.current;if(Z.path=null,!this.pendingClip)return;if(!Z.element){this.pendingClip=null;return}const J=`clippath${z++}`,te=this.svgFactory.createElement("svg:clipPath");te.setAttributeNS(null,"id",J),te.setAttributeNS(null,"transform",H(this.transformMatrix));const de=Z.element.cloneNode(!0);if(this.pendingClip==="evenodd"?de.setAttributeNS(null,"clip-rule","evenodd"):de.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,te.append(de),this.defs.append(te),Z.activeClipUrl){Z.clipGroup=null;for(const se of this.extraStack)se.clipGroup=null;te.setAttributeNS(null,"clip-path",Z.activeClipUrl)}Z.activeClipUrl=`url(#${J})`,this.tgrp=null}clip(Z){this.pendingClip=Z}closePath(){const Z=this.current;if(Z.path){const J=`${Z.path.getAttributeNS(null,"d")}Z`;Z.path.setAttributeNS(null,"d",J)}}setLeading(Z){this.current.leading=-Z}setTextRise(Z){this.current.textRise=Z}setTextRenderingMode(Z){this.current.textRenderingMode=Z}setHScale(Z){this.current.textHScale=Z/100}setRenderingIntent(Z){}setFlatness(Z){}setGState(Z){for(const[J,te]of Z)switch(J){case"LW":this.setLineWidth(te);break;case"LC":this.setLineCap(te);break;case"LJ":this.setLineJoin(te);break;case"ML":this.setMiterLimit(te);break;case"D":this.setDash(te[0],te[1]);break;case"RI":this.setRenderingIntent(te);break;case"FL":this.setFlatness(te);break;case"Font":this.setFont(te);break;case"CA":this.setStrokeAlpha(te);break;case"ca":this.setFillAlpha(te);break;default:(0,y.warn)(`Unimplemented graphic state operator ${J}`);break}}fill(){const Z=this.current;Z.element&&(Z.element.setAttributeNS(null,"fill",Z.fillColor),Z.element.setAttributeNS(null,"fill-opacity",Z.fillAlpha),this.endPath())}stroke(){const Z=this.current;Z.element&&(this._setStrokeAttributes(Z.element),Z.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(Z,J=1){const te=this.current;let de=te.dashArray;J!==1&&de.length>0&&(de=de.map(function(se){return J*se})),Z.setAttributeNS(null,"stroke",te.strokeColor),Z.setAttributeNS(null,"stroke-opacity",te.strokeAlpha),Z.setAttributeNS(null,"stroke-miterlimit",F(te.miterLimit)),Z.setAttributeNS(null,"stroke-linecap",te.lineCap),Z.setAttributeNS(null,"stroke-linejoin",te.lineJoin),Z.setAttributeNS(null,"stroke-width",F(J*te.lineWidth)+"px"),Z.setAttributeNS(null,"stroke-dasharray",de.map(F).join(" ")),Z.setAttributeNS(null,"stroke-dashoffset",F(J*te.dashPhase)+"px")}eoFill(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const Z=this.svgFactory.createElement("svg:rect");Z.setAttributeNS(null,"x","0"),Z.setAttributeNS(null,"y","0"),Z.setAttributeNS(null,"width","1px"),Z.setAttributeNS(null,"height","1px"),Z.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(Z)}paintImageXObject(Z){const J=this.getObject(Z);if(!J){(0,y.warn)(`Dependent image with object ID ${Z} is not ready yet`);return}this.paintInlineImageXObject(J)}paintInlineImageXObject(Z,J){const te=Z.width,de=Z.height,se=I(Z,this.forceDataSchema,!!J),ne=this.svgFactory.createElement("svg:rect");ne.setAttributeNS(null,"x","0"),ne.setAttributeNS(null,"y","0"),ne.setAttributeNS(null,"width",F(te)),ne.setAttributeNS(null,"height",F(de)),this.current.element=ne,this.clip("nonzero");const ge=this.svgFactory.createElement("svg:image");ge.setAttributeNS(w,"xlink:href",se),ge.setAttributeNS(null,"x","0"),ge.setAttributeNS(null,"y",F(-de)),ge.setAttributeNS(null,"width",F(te)+"px"),ge.setAttributeNS(null,"height",F(de)+"px"),ge.setAttributeNS(null,"transform",`scale(${F(1/te)} ${F(-1/de)})`),J?J.append(ge):this._ensureTransformGroup().append(ge)}paintImageMaskXObject(Z){const J=this.getObject(Z.data,Z);if(J.bitmap){(0,y.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const te=this.current,de=J.width,se=J.height,ne=te.fillColor;te.maskId=`mask${U++}`;const ge=this.svgFactory.createElement("svg:mask");ge.setAttributeNS(null,"id",te.maskId);const Ee=this.svgFactory.createElement("svg:rect");Ee.setAttributeNS(null,"x","0"),Ee.setAttributeNS(null,"y","0"),Ee.setAttributeNS(null,"width",F(de)),Ee.setAttributeNS(null,"height",F(se)),Ee.setAttributeNS(null,"fill",ne),Ee.setAttributeNS(null,"mask",`url(#${te.maskId})`),this.defs.append(ge),this._ensureTransformGroup().append(Ee),this.paintInlineImageXObject(J,ge)}paintFormXObjectBegin(Z,J){if(Array.isArray(Z)&&Z.length===6&&this.transform(Z[0],Z[1],Z[2],Z[3],Z[4],Z[5]),J){const te=J[2]-J[0],de=J[3]-J[1],se=this.svgFactory.createElement("svg:rect");se.setAttributeNS(null,"x",J[0]),se.setAttributeNS(null,"y",J[1]),se.setAttributeNS(null,"width",F(te)),se.setAttributeNS(null,"height",F(de)),this.current.element=se,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(Z){const J=this.svgFactory.create(Z.width,Z.height),te=this.svgFactory.createElement("svg:defs");J.append(te),this.defs=te;const de=this.svgFactory.createElement("svg:g");return de.setAttributeNS(null,"transform",H(Z.transform)),J.append(de),this.svg=de,J}_ensureClipGroup(){if(!this.current.clipGroup){const Z=this.svgFactory.createElement("svg:g");Z.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(Z),this.current.clipGroup=Z}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",H(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}n.SVGGraphics=Y}),((s,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.XfaText=void 0;class u{static textContent(y){const S=[],A={items:S,styles:Object.create(null)};function w(C){if(!C)return;let T=null;const R=C.name;if(R==="#text")T=C.value;else if(u.shouldBuildText(R))C?.attributes?.textContent?T=C.attributes.textContent:C.value&&(T=C.value);else return;if(T!==null&&S.push({str:T}),!!C.children)for(const I of C.children)w(I)}return w(y),A}static shouldBuildText(y){return!(y==="textarea"||y==="input"||y==="option"||y==="select")}}n.XfaText=u}),((s,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.TextLayerRenderTask=void 0,n.renderTextLayer=H,n.updateTextLayer=z;var f=u(1),y=u(6);const S=1e5,A=30,w=.8,C=new Map;function T(U,G){let Y;if(G&&f.FeatureTest.isOffscreenCanvasSupported)Y=new OffscreenCanvas(U,U).getContext("2d",{alpha:!1});else{const K=document.createElement("canvas");K.width=K.height=U,Y=K.getContext("2d",{alpha:!1})}return Y}function R(U,G){const Y=C.get(U);if(Y)return Y;const K=T(A,G);K.font=`${A}px ${U}`;const Z=K.measureText("");let J=Z.fontBoundingBoxAscent,te=Math.abs(Z.fontBoundingBoxDescent);if(J){const se=J/(J+te);return C.set(U,se),K.canvas.width=K.canvas.height=0,se}K.strokeStyle="red",K.clearRect(0,0,A,A),K.strokeText("g",0,0);let de=K.getImageData(0,0,A,A).data;te=0;for(let se=de.length-1-3;se>=0;se-=4)if(de[se]>0){te=Math.ceil(se/4/A);break}K.clearRect(0,0,A,A),K.strokeText("A",0,A),de=K.getImageData(0,0,A,A).data,J=0;for(let se=0,ne=de.length;se<ne;se+=4)if(de[se]>0){J=A-Math.floor(se/4/A);break}if(K.canvas.width=K.canvas.height=0,J){const se=J/(J+te);return C.set(U,se),se}return C.set(U,w),w}function I(U,G,Y){const K=document.createElement("span"),Z={angle:0,canvasWidth:0,hasText:G.str!=="",hasEOL:G.hasEOL,fontSize:0};U._textDivs.push(K);const J=f.Util.transform(U._transform,G.transform);let te=Math.atan2(J[1],J[0]);const de=Y[G.fontName];de.vertical&&(te+=Math.PI/2);const se=Math.hypot(J[2],J[3]),ne=se*R(de.fontFamily,U._isOffscreenCanvasSupported);let ge,Ee;te===0?(ge=J[4],Ee=J[5]-ne):(ge=J[4]+ne*Math.sin(te),Ee=J[5]-ne*Math.cos(te));const we="calc(var(--scale-factor)*",Ie=K.style;U._container===U._rootContainer?(Ie.left=`${(100*ge/U._pageWidth).toFixed(2)}%`,Ie.top=`${(100*Ee/U._pageHeight).toFixed(2)}%`):(Ie.left=`${we}${ge.toFixed(2)}px)`,Ie.top=`${we}${Ee.toFixed(2)}px)`),Ie.fontSize=`${we}${se.toFixed(2)}px)`,Ie.fontFamily=de.fontFamily,Z.fontSize=se,K.setAttribute("role","presentation"),K.textContent=G.str,K.dir=G.dir,U._fontInspectorEnabled&&(K.dataset.fontName=G.fontName),te!==0&&(Z.angle=te*(180/Math.PI));let Be=!1;if(G.str.length>1)Be=!0;else if(G.str!==" "&&G.transform[0]!==G.transform[3]){const Me=Math.abs(G.transform[0]),Re=Math.abs(G.transform[3]);Me!==Re&&Math.max(Me,Re)/Math.min(Me,Re)>1.5&&(Be=!0)}Be&&(Z.canvasWidth=de.vertical?G.height:G.width),U._textDivProperties.set(K,Z),U._isReadableStream&&U._layoutText(K)}function N(U){const{div:G,scale:Y,properties:K,ctx:Z,prevFontSize:J,prevFontFamily:te}=U,{style:de}=G;let se="";if(K.canvasWidth!==0&&K.hasText){const{fontFamily:ne}=de,{canvasWidth:ge,fontSize:Ee}=K;(J!==Ee||te!==ne)&&(Z.font=`${Ee*Y}px ${ne}`,U.prevFontSize=Ee,U.prevFontFamily=ne);const{width:we}=Z.measureText(G.textContent);we>0&&(se=`scaleX(${ge*Y/we})`)}K.angle!==0&&(se=`rotate(${K.angle}deg) ${se}`),se.length>0&&(de.transform=se)}function L(U){if(U._canceled)return;const G=U._textDivs,Y=U._capability;if(G.length>S){Y.resolve();return}if(!U._isReadableStream)for(const K of G)U._layoutText(K);Y.resolve()}class F{constructor({textContentSource:G,container:Y,viewport:K,textDivs:Z,textDivProperties:J,textContentItemsStr:te,isOffscreenCanvasSupported:de}){this._textContentSource=G,this._isReadableStream=G instanceof ReadableStream,this._container=this._rootContainer=Y,this._textDivs=Z||[],this._textContentItemsStr=te||[],this._isOffscreenCanvasSupported=de,this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled,this._reader=null,this._textDivProperties=J||new WeakMap,this._canceled=!1,this._capability=new f.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:K.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:T(0,de)};const{pageWidth:se,pageHeight:ne,pageX:ge,pageY:Ee}=K.rawDims;this._transform=[1,0,0,-1,-ge,Ee+ne],this._pageWidth=se,this._pageHeight=ne,(0,y.setLayerDimensions)(Y,K),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new f.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new f.AbortException("TextLayer task cancelled."))}_processItems(G,Y){for(const K of G){if(K.str===void 0){if(K.type==="beginMarkedContentProps"||K.type==="beginMarkedContent"){const Z=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),K.id!==null&&this._container.setAttribute("id",`${K.id}`),Z.append(this._container)}else K.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(K.str),I(this,K,Y)}}_layoutText(G){const Y=this._layoutTextParams.properties=this._textDivProperties.get(G);if(this._layoutTextParams.div=G,N(this._layoutTextParams),Y.hasText&&this._container.append(G),Y.hasEOL){const K=document.createElement("br");K.setAttribute("role","presentation"),this._container.append(K)}}_render(){const G=new f.PromiseCapability;let Y=Object.create(null);if(this._isReadableStream){const K=()=>{this._reader.read().then(({value:Z,done:J})=>{if(J){G.resolve();return}Object.assign(Y,Z.styles),this._processItems(Z.items,Y),K()},G.reject)};this._reader=this._textContentSource.getReader(),K()}else if(this._textContentSource){const{items:K,styles:Z}=this._textContentSource;this._processItems(K,Z),G.resolve()}else throw new Error('No "textContentSource" parameter specified.');G.promise.then(()=>{Y=null,L(this)},this._capability.reject)}}n.TextLayerRenderTask=F;function H(U){!U.textContentSource&&(U.textContent||U.textContentStream)&&((0,y.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),U.textContentSource=U.textContent||U.textContentStream);const{container:G,viewport:Y}=U,K=getComputedStyle(G),Z=K.getPropertyValue("visibility"),J=parseFloat(K.getPropertyValue("--scale-factor"));Z==="visible"&&(!J||Math.abs(J-Y.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const te=new F(U);return te._render(),te}function z({container:U,viewport:G,textDivs:Y,textDivProperties:K,isOffscreenCanvasSupported:Z,mustRotate:J=!0,mustRescale:te=!0}){if(J&&(0,y.setLayerDimensions)(U,{rotation:G.rotation}),te){const de=T(0,Z),se={prevFontSize:null,prevFontFamily:null,div:null,scale:G.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:de};for(const ne of Y)se.properties=K.get(ne),se.div=ne,N(se)}}}),((s,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.AnnotationEditorLayer=void 0;var f=u(1),y=u(4),S=u(28),A=u(33),w=u(6),C=u(34);class T{#e;#t=!1;#n=null;#r=this.pointerup.bind(this);#o=this.pointerdown.bind(this);#s=new Map;#a=!1;#l=!1;#c=!1;#i;static _initialized=!1;constructor({uiManager:I,pageIndex:N,div:L,accessibilityManager:F,annotationLayer:H,viewport:z,l10n:U}){const G=[S.FreeTextEditor,A.InkEditor,C.StampEditor];if(!T._initialized){T._initialized=!0;for(const Y of G)Y.initialize(U)}I.registerEditorTypes(G),this.#i=I,this.pageIndex=N,this.div=L,this.#e=F,this.#n=H,this.viewport=z,this.#i.addLayer(this)}get isEmpty(){return this.#s.size===0}updateToolbar(I){this.#i.updateToolbar(I)}updateMode(I=this.#i.getMode()){this.#p(),I===f.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),I!==f.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",I===f.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",I===f.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",I===f.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(I){if(!(!I&&this.#i.getMode()!==f.AnnotationEditorType.INK)){if(!I){for(const N of this.#s.values())if(N.isEmpty()){N.setInBackground();return}}this.#d({offsetX:0,offsetY:0},!1).setInBackground()}}setEditingState(I){this.#i.setEditingState(I)}addCommands(I){this.#i.addCommands(I)}enable(){this.div.style.pointerEvents="auto";const I=new Set;for(const L of this.#s.values())L.enableEditing(),L.annotationElementId&&I.add(L.annotationElementId);if(!this.#n)return;const N=this.#n.getEditableAnnotations();for(const L of N){if(L.hide(),this.#i.isDeletedAnnotationElement(L.data.id)||I.has(L.data.id))continue;const F=this.deserialize(L);F&&(this.addOrRebuild(F),F.enableEditing())}}disable(){this.#c=!0,this.div.style.pointerEvents="none";const I=new Set;for(const N of this.#s.values()){if(N.disableEditing(),!N.annotationElementId||N.serialize()!==null){I.add(N.annotationElementId);continue}this.getEditableAnnotation(N.annotationElementId)?.show(),N.remove()}if(this.#n){const N=this.#n.getEditableAnnotations();for(const L of N){const{id:F}=L.data;I.has(F)||this.#i.isDeletedAnnotationElement(F)||L.show()}}this.#p(),this.isEmpty&&(this.div.hidden=!0),this.#c=!1}getEditableAnnotation(I){return this.#n?.getEditableAnnotation(I)||null}setActiveEditor(I){this.#i.getActive()!==I&&this.#i.setActiveEditor(I)}enableClick(){this.div.addEventListener("pointerdown",this.#o),this.div.addEventListener("pointerup",this.#r)}disableClick(){this.div.removeEventListener("pointerdown",this.#o),this.div.removeEventListener("pointerup",this.#r)}attach(I){this.#s.set(I.id,I);const{annotationElementId:N}=I;N&&this.#i.isDeletedAnnotationElement(N)&&this.#i.removeDeletedAnnotationElement(I)}detach(I){this.#s.delete(I.id),this.#e?.removePointerInTextLayer(I.contentDiv),!this.#c&&I.annotationElementId&&this.#i.addDeletedAnnotationElement(I)}remove(I){this.detach(I),this.#i.removeEditor(I),I.div.contains(document.activeElement)&&setTimeout(()=>{this.#i.focusMainContainer()},0),I.div.remove(),I.isAttachedToDOM=!1,this.#l||this.addInkEditorIfNeeded(!1)}changeParent(I){I.parent!==this&&(I.annotationElementId&&(this.#i.addDeletedAnnotationElement(I.annotationElementId),y.AnnotationEditor.deleteAnnotationElement(I),I.annotationElementId=null),this.attach(I),I.parent?.detach(I),I.setParent(this),I.div&&I.isAttachedToDOM&&(I.div.remove(),this.div.append(I.div)))}add(I){if(this.changeParent(I),this.#i.addEditor(I),this.attach(I),!I.isAttachedToDOM){const N=I.render();this.div.append(N),I.isAttachedToDOM=!0}I.fixAndSetPosition(),I.onceAdded(),this.#i.addToAnnotationStorage(I)}moveEditorInDOM(I){if(!I.isAttachedToDOM)return;const{activeElement:N}=document;I.div.contains(N)&&(I._focusEventsAllowed=!1,setTimeout(()=>{I.div.contains(document.activeElement)?I._focusEventsAllowed=!0:(I.div.addEventListener("focusin",()=>{I._focusEventsAllowed=!0},{once:!0}),N.focus())},0)),I._structTreeParentId=this.#e?.moveElementInDOM(this.div,I.div,I.contentDiv,!0)}addOrRebuild(I){I.needsToBeRebuilt()?I.rebuild():this.add(I)}addUndoableEditor(I){const N=()=>I._uiManager.rebuild(I),L=()=>{I.remove()};this.addCommands({cmd:N,undo:L,mustExec:!1})}getNextId(){return this.#i.getId()}#f(I){switch(this.#i.getMode()){case f.AnnotationEditorType.FREETEXT:return new S.FreeTextEditor(I);case f.AnnotationEditorType.INK:return new A.InkEditor(I);case f.AnnotationEditorType.STAMP:return new C.StampEditor(I)}return null}pasteEditor(I,N){this.#i.updateToolbar(I),this.#i.updateMode(I);const{offsetX:L,offsetY:F}=this.#h(),H=this.getNextId(),z=this.#f({parent:this,id:H,x:L,y:F,uiManager:this.#i,isCentered:!0,...N});z&&this.add(z)}deserialize(I){switch(I.annotationType??I.annotationEditorType){case f.AnnotationEditorType.FREETEXT:return S.FreeTextEditor.deserialize(I,this,this.#i);case f.AnnotationEditorType.INK:return A.InkEditor.deserialize(I,this,this.#i);case f.AnnotationEditorType.STAMP:return C.StampEditor.deserialize(I,this,this.#i)}return null}#d(I,N){const L=this.getNextId(),F=this.#f({parent:this,id:L,x:I.offsetX,y:I.offsetY,uiManager:this.#i,isCentered:N});return F&&this.add(F),F}#h(){const{x:I,y:N,width:L,height:F}=this.div.getBoundingClientRect(),H=Math.max(0,I),z=Math.max(0,N),U=Math.min(window.innerWidth,I+L),G=Math.min(window.innerHeight,N+F),Y=(H+U)/2-I,K=(z+G)/2-N,[Z,J]=this.viewport.rotation%180===0?[Y,K]:[K,Y];return{offsetX:Z,offsetY:J}}addNewEditor(){this.#d(this.#h(),!0)}setSelected(I){this.#i.setSelected(I)}toggleSelected(I){this.#i.toggleSelected(I)}isSelected(I){return this.#i.isSelected(I)}unselect(I){this.#i.unselect(I)}pointerup(I){const{isMac:N}=f.FeatureTest.platform;if(!(I.button!==0||I.ctrlKey&&N)&&I.target===this.div&&this.#a){if(this.#a=!1,!this.#t){this.#t=!0;return}if(this.#i.getMode()===f.AnnotationEditorType.STAMP){this.#i.unselectAll();return}this.#d(I,!1)}}pointerdown(I){if(this.#a){this.#a=!1;return}const{isMac:N}=f.FeatureTest.platform;if(I.button!==0||I.ctrlKey&&N||I.target!==this.div)return;this.#a=!0;const L=this.#i.getActive();this.#t=!L||L.isEmpty()}findNewParent(I,N,L){const F=this.#i.findParent(N,L);return F===null||F===this?!1:(F.changeParent(I),!0)}destroy(){this.#i.getActive()?.parent===this&&(this.#i.commitOrRemove(),this.#i.setActiveEditor(null));for(const I of this.#s.values())this.#e?.removePointerInTextLayer(I.contentDiv),I.setParent(null),I.isAttachedToDOM=!1,I.div.remove();this.div=null,this.#s.clear(),this.#i.removeLayer(this)}#p(){this.#l=!0;for(const I of this.#s.values())I.isEmpty()&&I.remove();this.#l=!1}render({viewport:I}){this.viewport=I,(0,w.setLayerDimensions)(this.div,I);for(const N of this.#i.getEditors(this.pageIndex))this.add(N);this.updateMode()}update({viewport:I}){this.#i.commitOrRemove(),this.viewport=I,(0,w.setLayerDimensions)(this.div,{rotation:I.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:I,pageHeight:N}=this.viewport.rawDims;return[I,N]}}n.AnnotationEditorLayer=T}),((s,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.FreeTextEditor=void 0;var f=u(1),y=u(5),S=u(4),A=u(29);class w extends S.AnnotationEditor{#e=this.editorDivBlur.bind(this);#t=this.editorDivFocus.bind(this);#n=this.editorDivInput.bind(this);#r=this.editorDivKeydown.bind(this);#o;#s="";#a=`${this.id}-editor`;#l;#c=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const T=w.prototype,R=L=>L.isEmpty(),I=y.AnnotationEditorUIManager.TRANSLATE_SMALL,N=y.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,f.shadow)(this,"_keyboardManager",new y.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],T.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],T.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],T._translateEmpty,{args:[-I,0],checker:R}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],T._translateEmpty,{args:[-N,0],checker:R}],[["ArrowRight","mac+ArrowRight"],T._translateEmpty,{args:[I,0],checker:R}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],T._translateEmpty,{args:[N,0],checker:R}],[["ArrowUp","mac+ArrowUp"],T._translateEmpty,{args:[0,-I],checker:R}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],T._translateEmpty,{args:[0,-N],checker:R}],[["ArrowDown","mac+ArrowDown"],T._translateEmpty,{args:[0,I],checker:R}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],T._translateEmpty,{args:[0,N],checker:R}]]))}static _type="freetext";constructor(T){super({...T,name:"freeTextEditor"}),this.#o=T.color||w._defaultColor||S.AnnotationEditor._defaultLineColor,this.#l=T.fontSize||w._defaultFontSize}static initialize(T){S.AnnotationEditor.initialize(T,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const R=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(R.getPropertyValue("--freetext-padding"))}static updateDefaultParams(T,R){switch(T){case f.AnnotationEditorParamsType.FREETEXT_SIZE:w._defaultFontSize=R;break;case f.AnnotationEditorParamsType.FREETEXT_COLOR:w._defaultColor=R;break}}updateParams(T,R){switch(T){case f.AnnotationEditorParamsType.FREETEXT_SIZE:this.#i(R);break;case f.AnnotationEditorParamsType.FREETEXT_COLOR:this.#f(R);break}}static get defaultPropertiesToUpdate(){return[[f.AnnotationEditorParamsType.FREETEXT_SIZE,w._defaultFontSize],[f.AnnotationEditorParamsType.FREETEXT_COLOR,w._defaultColor||S.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[f.AnnotationEditorParamsType.FREETEXT_SIZE,this.#l],[f.AnnotationEditorParamsType.FREETEXT_COLOR,this.#o]]}#i(T){const R=N=>{this.editorDiv.style.fontSize=`calc(${N}px * var(--scale-factor))`,this.translate(0,-(N-this.#l)*this.parentScale),this.#l=N,this.#h()},I=this.#l;this.addCommands({cmd:()=>{R(T)},undo:()=>{R(I)},mustExec:!0,type:f.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#f(T){const R=this.#o;this.addCommands({cmd:()=>{this.#o=this.editorDiv.style.color=T},undo:()=>{this.#o=this.editorDiv.style.color=R},mustExec:!0,type:f.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(T,R){this._uiManager.translateSelectedEditors(T,R,!0)}getInitialTranslation(){const T=this.parentScale;return[-w._internalPadding*T,-(w._internalPadding+this.#l)*T]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(f.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",this.#r),this.editorDiv.addEventListener("focus",this.#t),this.editorDiv.addEventListener("blur",this.#e),this.editorDiv.addEventListener("input",this.#n))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#a),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",this.#r),this.editorDiv.removeEventListener("focus",this.#t),this.editorDiv.removeEventListener("blur",this.#e),this.editorDiv.removeEventListener("input",this.#n),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(T){this._focusEventsAllowed&&(super.focusin(T),T.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){if(this.width){this.#g();return}this.enableEditMode(),this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}#d(){const T=this.editorDiv.getElementsByTagName("div");if(T.length===0)return this.editorDiv.innerText;const R=[];for(const I of T)R.push(I.innerText.replace(/\r\n?|\n/,""));return R.join(`
`)}#h(){const[T,R]=this.parentDimensions;let I;if(this.isAttachedToDOM)I=this.div.getBoundingClientRect();else{const{currentLayer:N,div:L}=this,F=L.style.display;L.style.display="hidden",N.div.append(this.div),I=L.getBoundingClientRect(),L.remove(),L.style.display=F}this.rotation%180===this.parentRotation%180?(this.width=I.width/T,this.height=I.height/R):(this.width=I.height/T,this.height=I.width/R),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const T=this.#s,R=this.#s=this.#d().trimEnd();if(T===R)return;const I=N=>{if(this.#s=N,!N){this.remove();return}this.#p(),this._uiManager.rebuild(this),this.#h()};this.addCommands({cmd:()=>{I(R)},undo:()=>{I(T)},mustExec:!1}),this.#h()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(T){this.enterInEditMode()}keydown(T){T.target===this.div&&T.key==="Enter"&&(this.enterInEditMode(),T.preventDefault())}editorDivKeydown(T){w._keyboardManager.exec(this,T)}editorDivFocus(T){this.isEditing=!0}editorDivBlur(T){this.isEditing=!1}editorDivInput(T){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let T,R;this.width&&(T=this.x,R=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#a),this.enableEditing(),S.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(N=>this.editorDiv?.setAttribute("aria-label",N)),S.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(N=>this.editorDiv?.setAttribute("default-content",N)),this.editorDiv.contentEditable=!0;const{style:I}=this.editorDiv;if(I.fontSize=`calc(${this.#l}px * var(--scale-factor))`,I.color=this.#o,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,y.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[N,L]=this.parentDimensions;if(this.annotationElementId){const{position:F}=this.#c;let[H,z]=this.getInitialTranslation();[H,z]=this.pageTranslationToScreen(H,z);const[U,G]=this.pageDimensions,[Y,K]=this.pageTranslation;let Z,J;switch(this.rotation){case 0:Z=T+(F[0]-Y)/U,J=R+this.height-(F[1]-K)/G;break;case 90:Z=T+(F[0]-Y)/U,J=R-(F[1]-K)/G,[H,z]=[z,-H];break;case 180:Z=T-this.width+(F[0]-Y)/U,J=R-(F[1]-K)/G,[H,z]=[-H,-z];break;case 270:Z=T+(F[0]-Y-this.height*G)/U,J=R+(F[1]-K-this.width*U)/G,[H,z]=[-z,H];break}this.setAt(Z*N,J*L,H,z)}else this.setAt(T*N,R*L,this.width*N,this.height*L);this.#p(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}#p(){if(this.editorDiv.replaceChildren(),!!this.#s)for(const T of this.#s.split(`
`)){const R=document.createElement("div");R.append(T?document.createTextNode(T):document.createElement("br")),this.editorDiv.append(R)}}get contentDiv(){return this.editorDiv}static deserialize(T,R,I){let N=null;if(T instanceof A.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:F,fontColor:H},rect:z,rotation:U,id:G},textContent:Y,textPosition:K,parent:{page:{pageNumber:Z}}}=T;if(!Y||Y.length===0)return null;N=T={annotationType:f.AnnotationEditorType.FREETEXT,color:Array.from(H),fontSize:F,value:Y.join(`
`),position:K,pageIndex:Z-1,rect:z,rotation:U,id:G,deleted:!1}}const L=super.deserialize(T,R,I);return L.#l=T.fontSize,L.#o=f.Util.makeHexColor(...T.color),L.#s=T.value,L.annotationElementId=T.id||null,L.#c=N,L}serialize(T=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const R=w._internalPadding*this.parentScale,I=this.getRect(R,R),N=S.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#o),L={annotationType:f.AnnotationEditorType.FREETEXT,color:N,fontSize:this.#l,value:this.#s,pageIndex:this.pageIndex,rect:I,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return T?L:this.annotationElementId&&!this.#y(L)?null:(L.id=this.annotationElementId,L)}#y(T){const{value:R,fontSize:I,color:N,rect:L,pageIndex:F}=this.#c;return T.value!==R||T.fontSize!==I||T.rect.some((H,z)=>Math.abs(H-L[z])>=1)||T.color.some((H,z)=>H!==N[z])||T.pageIndex!==F}#g(T=!1){if(!this.annotationElementId)return;if(this.#h(),!T&&(this.width===0||this.height===0)){setTimeout(()=>this.#g(!0),0);return}const R=w._internalPadding*this.parentScale;this.#c.rect=this.getRect(R,R)}}n.FreeTextEditor=w}),((s,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.StampAnnotationElement=n.InkAnnotationElement=n.FreeTextAnnotationElement=n.AnnotationLayer=void 0;var f=u(1),y=u(6),S=u(3),A=u(30),w=u(31),C=u(32);const T=1e3,R=9,I=new WeakSet;function N(ye){return{width:ye[2]-ye[0],height:ye[3]-ye[1]}}class L{static create(ce){switch(ce.data.annotationType){case f.AnnotationType.LINK:return new H(ce);case f.AnnotationType.TEXT:return new z(ce);case f.AnnotationType.WIDGET:switch(ce.data.fieldType){case"Tx":return new G(ce);case"Btn":return ce.data.radioButton?new Z(ce):ce.data.checkBox?new K(ce):new J(ce);case"Ch":return new te(ce);case"Sig":return new Y(ce)}return new U(ce);case f.AnnotationType.POPUP:return new de(ce);case f.AnnotationType.FREETEXT:return new ne(ce);case f.AnnotationType.LINE:return new ge(ce);case f.AnnotationType.SQUARE:return new Ee(ce);case f.AnnotationType.CIRCLE:return new we(ce);case f.AnnotationType.POLYLINE:return new Ie(ce);case f.AnnotationType.CARET:return new Me(ce);case f.AnnotationType.INK:return new Re(ce);case f.AnnotationType.POLYGON:return new Be(ce);case f.AnnotationType.HIGHLIGHT:return new Te(ce);case f.AnnotationType.UNDERLINE:return new Se(ce);case f.AnnotationType.SQUIGGLY:return new oe(ce);case f.AnnotationType.STRIKEOUT:return new ae(ce);case f.AnnotationType.STAMP:return new be(ce);case f.AnnotationType.FILEATTACHMENT:return new he(ce);default:return new F(ce)}}}class F{#e=!1;constructor(ce,{isRenderable:_e=!1,ignoreBorder:ke=!1,createQuadrilaterals:Pe=!1}={}){this.isRenderable=_e,this.data=ce.data,this.layer=ce.layer,this.linkService=ce.linkService,this.downloadManager=ce.downloadManager,this.imageResourcesPath=ce.imageResourcesPath,this.renderForms=ce.renderForms,this.svgFactory=ce.svgFactory,this.annotationStorage=ce.annotationStorage,this.enableScripting=ce.enableScripting,this.hasJSActions=ce.hasJSActions,this._fieldObjects=ce.fieldObjects,this.parent=ce.parent,_e&&(this.container=this._createContainer(ke)),Pe&&this._createQuadrilaterals()}static _hasPopupData({titleObj:ce,contentsObj:_e,richText:ke}){return!!(ce?.str||_e?.str||ke?.str)}get hasPopupData(){return F._hasPopupData(this.data)}_createContainer(ce){const{data:_e,parent:{page:ke,viewport:Pe}}=this,$e=document.createElement("section");$e.setAttribute("data-annotation-id",_e.id),this instanceof U||($e.tabIndex=T),$e.style.zIndex=this.parent.zIndex++,this.data.popupRef&&$e.setAttribute("aria-haspopup","dialog"),_e.noRotate&&$e.classList.add("norotate");const{pageWidth:xe,pageHeight:Ne,pageX:je,pageY:He}=Pe.rawDims;if(!_e.rect||this instanceof de){const{rotation:pt}=_e;return!_e.hasOwnCanvas&&pt!==0&&this.setRotation(pt,$e),$e}const{width:Ye,height:Je}=N(_e.rect),ot=f.Util.normalizeRect([_e.rect[0],ke.view[3]-_e.rect[1]+ke.view[1],_e.rect[2],ke.view[3]-_e.rect[3]+ke.view[1]]);if(!ce&&_e.borderStyle.width>0){$e.style.borderWidth=`${_e.borderStyle.width}px`;const pt=_e.borderStyle.horizontalCornerRadius,yt=_e.borderStyle.verticalCornerRadius;if(pt>0||yt>0){const Et=`calc(${pt}px * var(--scale-factor)) / calc(${yt}px * var(--scale-factor))`;$e.style.borderRadius=Et}else if(this instanceof Z){const Et=`calc(${Ye}px * var(--scale-factor)) / calc(${Je}px * var(--scale-factor))`;$e.style.borderRadius=Et}switch(_e.borderStyle.style){case f.AnnotationBorderStyleType.SOLID:$e.style.borderStyle="solid";break;case f.AnnotationBorderStyleType.DASHED:$e.style.borderStyle="dashed";break;case f.AnnotationBorderStyleType.BEVELED:(0,f.warn)("Unimplemented border style: beveled");break;case f.AnnotationBorderStyleType.INSET:(0,f.warn)("Unimplemented border style: inset");break;case f.AnnotationBorderStyleType.UNDERLINE:$e.style.borderBottomStyle="solid";break}const ut=_e.borderColor||null;ut?(this.#e=!0,$e.style.borderColor=f.Util.makeHexColor(ut[0]|0,ut[1]|0,ut[2]|0)):$e.style.borderWidth=0}$e.style.left=`${100*(ot[0]-je)/xe}%`,$e.style.top=`${100*(ot[1]-He)/Ne}%`;const{rotation:ze}=_e;return _e.hasOwnCanvas||ze===0?($e.style.width=`${100*Ye/xe}%`,$e.style.height=`${100*Je/Ne}%`):this.setRotation(ze,$e),$e}setRotation(ce,_e=this.container){if(!this.data.rect)return;const{pageWidth:ke,pageHeight:Pe}=this.parent.viewport.rawDims,{width:$e,height:xe}=N(this.data.rect);let Ne,je;ce%180===0?(Ne=100*$e/ke,je=100*xe/Pe):(Ne=100*xe/ke,je=100*$e/Pe),_e.style.width=`${Ne}%`,_e.style.height=`${je}%`,_e.setAttribute("data-main-rotation",(360-ce)%360)}get _commonActions(){const ce=(_e,ke,Pe)=>{const $e=Pe.detail[_e],xe=$e[0],Ne=$e.slice(1);Pe.target.style[ke]=A.ColorConverters[`${xe}_HTML`](Ne),this.annotationStorage.setValue(this.data.id,{[ke]:A.ColorConverters[`${xe}_rgb`](Ne)})};return(0,f.shadow)(this,"_commonActions",{display:_e=>{const{display:ke}=_e.detail,Pe=ke%2===1;this.container.style.visibility=Pe?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:Pe,noPrint:ke===1||ke===2})},print:_e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!_e.detail.print})},hidden:_e=>{const{hidden:ke}=_e.detail;this.container.style.visibility=ke?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:ke,noView:ke})},focus:_e=>{setTimeout(()=>_e.target.focus({preventScroll:!1}),0)},userName:_e=>{_e.target.title=_e.detail.userName},readonly:_e=>{_e.target.disabled=_e.detail.readonly},required:_e=>{this._setRequired(_e.target,_e.detail.required)},bgColor:_e=>{ce("bgColor","backgroundColor",_e)},fillColor:_e=>{ce("fillColor","backgroundColor",_e)},fgColor:_e=>{ce("fgColor","color",_e)},textColor:_e=>{ce("textColor","color",_e)},borderColor:_e=>{ce("borderColor","borderColor",_e)},strokeColor:_e=>{ce("strokeColor","borderColor",_e)},rotation:_e=>{const ke=_e.detail.rotation;this.setRotation(ke),this.annotationStorage.setValue(this.data.id,{rotation:ke})}})}_dispatchEventFromSandbox(ce,_e){const ke=this._commonActions;for(const Pe of Object.keys(_e.detail))(ce[Pe]||ke[Pe])?.(_e)}_setDefaultPropertiesFromJS(ce){if(!this.enableScripting)return;const _e=this.annotationStorage.getRawValue(this.data.id);if(!_e)return;const ke=this._commonActions;for(const[Pe,$e]of Object.entries(_e)){const xe=ke[Pe];if(xe){const Ne={detail:{[Pe]:$e},target:ce};xe(Ne),delete _e[Pe]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:ce}=this.data;if(!ce)return;const[_e,ke,Pe,$e]=this.data.rect;if(ce.length===1){const[,{x:yt,y:ut},{x:Et,y:qe}]=ce[0];if(Pe===yt&&$e===ut&&_e===Et&&ke===qe)return}const{style:xe}=this.container;let Ne;if(this.#e){const{borderColor:yt,borderWidth:ut}=xe;xe.borderWidth=0,Ne=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${yt}" stroke-width="${ut}">`],this.container.classList.add("hasBorder")}const je=Pe-_e,He=$e-ke,{svgFactory:Ye}=this,Je=Ye.createElement("svg");Je.classList.add("quadrilateralsContainer"),Je.setAttribute("width",0),Je.setAttribute("height",0);const ot=Ye.createElement("defs");Je.append(ot);const ze=Ye.createElement("clipPath"),pt=`clippath_${this.data.id}`;ze.setAttribute("id",pt),ze.setAttribute("clipPathUnits","objectBoundingBox"),ot.append(ze);for(const[,{x:yt,y:ut},{x:Et,y:qe}]of ce){const Le=Ye.createElement("rect"),lt=(Et-_e)/je,We=($e-ut)/He,Qe=(yt-Et)/je,at=(ut-qe)/He;Le.setAttribute("x",lt),Le.setAttribute("y",We),Le.setAttribute("width",Qe),Le.setAttribute("height",at),ze.append(Le),Ne?.push(`<rect vector-effect="non-scaling-stroke" x="${lt}" y="${We}" width="${Qe}" height="${at}"/>`)}this.#e&&(Ne.push("</g></svg>')"),xe.backgroundImage=Ne.join("")),this.container.append(Je),this.container.style.clipPath=`url(#${pt})`}_createPopup(){const{container:ce,data:_e}=this;ce.setAttribute("aria-haspopup","dialog");const ke=new de({data:{color:_e.color,titleObj:_e.titleObj,modificationDate:_e.modificationDate,contentsObj:_e.contentsObj,richText:_e.richText,parentRect:_e.rect,borderStyle:0,id:`popup_${_e.id}`,rotation:_e.rotation},parent:this.parent,elements:[this]});this.parent.div.append(ke.render())}render(){(0,f.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(ce,_e=null){const ke=[];if(this._fieldObjects){const Pe=this._fieldObjects[ce];if(Pe)for(const{page:$e,id:xe,exportValues:Ne}of Pe){if($e===-1||xe===_e)continue;const je=typeof Ne=="string"?Ne:null,He=document.querySelector(`[data-element-id="${xe}"]`);if(He&&!I.has(He)){(0,f.warn)(`_getElementsByName - element not allowed: ${xe}`);continue}ke.push({id:xe,exportValue:je,domElement:He})}return ke}for(const Pe of document.getElementsByName(ce)){const{exportValue:$e}=Pe,xe=Pe.getAttribute("data-element-id");xe!==_e&&I.has(Pe)&&ke.push({id:xe,exportValue:$e,domElement:Pe})}return ke}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const ce=this.getElementsToTriggerPopup();if(Array.isArray(ce))for(const _e of ce)_e.classList.add("highlightArea");else ce.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:ce,data:{id:_e}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:ce,editId:_e})})}}class H extends F{constructor(ce,_e=null){super(ce,{isRenderable:!0,ignoreBorder:!!_e?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=ce.data.isTooltipOnly}render(){const{data:ce,linkService:_e}=this,ke=document.createElement("a");ke.setAttribute("data-element-id",ce.id);let Pe=!1;return ce.url?(_e.addLinkAttributes(ke,ce.url,ce.newWindow),Pe=!0):ce.action?(this._bindNamedAction(ke,ce.action),Pe=!0):ce.attachment?(this._bindAttachment(ke,ce.attachment),Pe=!0):ce.setOCGState?(this.#t(ke,ce.setOCGState),Pe=!0):ce.dest?(this._bindLink(ke,ce.dest),Pe=!0):(ce.actions&&(ce.actions.Action||ce.actions["Mouse Up"]||ce.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(ke,ce),Pe=!0),ce.resetForm?(this._bindResetFormAction(ke,ce.resetForm),Pe=!0):this.isTooltipOnly&&!Pe&&(this._bindLink(ke,""),Pe=!0)),this.container.classList.add("linkAnnotation"),Pe&&this.container.append(ke),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(ce,_e){ce.href=this.linkService.getDestinationHash(_e),ce.onclick=()=>(_e&&this.linkService.goToDestination(_e),!1),(_e||_e==="")&&this.#e()}_bindNamedAction(ce,_e){ce.href=this.linkService.getAnchorUrl(""),ce.onclick=()=>(this.linkService.executeNamedAction(_e),!1),this.#e()}_bindAttachment(ce,_e){ce.href=this.linkService.getAnchorUrl(""),ce.onclick=()=>(this.downloadManager?.openOrDownloadData(this.container,_e.content,_e.filename),!1),this.#e()}#t(ce,_e){ce.href=this.linkService.getAnchorUrl(""),ce.onclick=()=>(this.linkService.executeSetOCGState(_e),!1),this.#e()}_bindJSAction(ce,_e){ce.href=this.linkService.getAnchorUrl("");const ke=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const Pe of Object.keys(_e.actions)){const $e=ke.get(Pe);$e&&(ce[$e]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:_e.id,name:Pe}}),!1))}ce.onclick||(ce.onclick=()=>!1),this.#e()}_bindResetFormAction(ce,_e){const ke=ce.onclick;if(ke||(ce.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects){(0,f.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),ke||(ce.onclick=()=>!1);return}ce.onclick=()=>{ke?.();const{fields:Pe,refs:$e,include:xe}=_e,Ne=[];if(Pe.length!==0||$e.length!==0){const Ye=new Set($e);for(const Je of Pe){const ot=this._fieldObjects[Je]||[];for(const{id:ze}of ot)Ye.add(ze)}for(const Je of Object.values(this._fieldObjects))for(const ot of Je)Ye.has(ot.id)===xe&&Ne.push(ot)}else for(const Ye of Object.values(this._fieldObjects))Ne.push(...Ye);const je=this.annotationStorage,He=[];for(const Ye of Ne){const{id:Je}=Ye;switch(He.push(Je),Ye.type){case"text":{const ze=Ye.defaultValue||"";je.setValue(Je,{value:ze});break}case"checkbox":case"radiobutton":{const ze=Ye.defaultValue===Ye.exportValues;je.setValue(Je,{value:ze});break}case"combobox":case"listbox":{const ze=Ye.defaultValue||"";je.setValue(Je,{value:ze});break}default:continue}const ot=document.querySelector(`[data-element-id="${Je}"]`);if(ot){if(!I.has(ot)){(0,f.warn)(`_bindResetFormAction - element not allowed: ${Je}`);continue}}else continue;ot.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:He,name:"ResetForm"}}),!1}}}class z extends F{constructor(ce){super(ce,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const ce=document.createElement("img");return ce.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",ce.alt="[{{type}} Annotation]",ce.dataset.l10nId="text_annotation_type",ce.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(ce),this.container}}class U extends F{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(ce){this.data.hasOwnCanvas&&(ce.previousSibling?.nodeName==="CANVAS"&&(ce.previousSibling.hidden=!0),ce.hidden=!1)}_getKeyModifier(ce){const{isWin:_e,isMac:ke}=f.FeatureTest.platform;return _e&&ce.ctrlKey||ke&&ce.metaKey}_setEventListener(ce,_e,ke,Pe,$e){ke.includes("mouse")?ce.addEventListener(ke,xe=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:Pe,value:$e(xe),shift:xe.shiftKey,modifier:this._getKeyModifier(xe)}})}):ce.addEventListener(ke,xe=>{if(ke==="blur"){if(!_e.focused||!xe.relatedTarget)return;_e.focused=!1}else if(ke==="focus"){if(_e.focused)return;_e.focused=!0}$e&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:Pe,value:$e(xe)}})})}_setEventListeners(ce,_e,ke,Pe){for(const[$e,xe]of ke)(xe==="Action"||this.data.actions?.[xe])&&((xe==="Focus"||xe==="Blur")&&(_e||={focused:!1}),this._setEventListener(ce,_e,$e,xe,Pe),xe==="Focus"&&!this.data.actions?.Blur?this._setEventListener(ce,_e,"blur","Blur",null):xe==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(ce,_e,"focus","Focus",null))}_setBackgroundColor(ce){const _e=this.data.backgroundColor||null;ce.style.backgroundColor=_e===null?"transparent":f.Util.makeHexColor(_e[0],_e[1],_e[2])}_setTextStyle(ce){const _e=["left","center","right"],{fontColor:ke}=this.data.defaultAppearanceData,Pe=this.data.defaultAppearanceData.fontSize||R,$e=ce.style;let xe;const Ne=2,je=He=>Math.round(10*He)/10;if(this.data.multiLine){const He=Math.abs(this.data.rect[3]-this.data.rect[1]-Ne),Ye=Math.round(He/(f.LINE_FACTOR*Pe))||1,Je=He/Ye;xe=Math.min(Pe,je(Je/f.LINE_FACTOR))}else{const He=Math.abs(this.data.rect[3]-this.data.rect[1]-Ne);xe=Math.min(Pe,je(He/f.LINE_FACTOR))}$e.fontSize=`calc(${xe}px * var(--scale-factor))`,$e.color=f.Util.makeHexColor(ke[0],ke[1],ke[2]),this.data.textAlignment!==null&&($e.textAlign=_e[this.data.textAlignment])}_setRequired(ce,_e){_e?ce.setAttribute("required",!0):ce.removeAttribute("required"),ce.setAttribute("aria-required",_e)}}class G extends U{constructor(ce){const _e=ce.renderForms||!ce.data.hasAppearance&&!!ce.data.fieldValue;super(ce,{isRenderable:_e})}setPropertyOnSiblings(ce,_e,ke,Pe){const $e=this.annotationStorage;for(const xe of this._getElementsByName(ce.name,ce.id))xe.domElement&&(xe.domElement[_e]=ke),$e.setValue(xe.id,{[Pe]:ke})}render(){const ce=this.annotationStorage,_e=this.data.id;this.container.classList.add("textWidgetAnnotation");let ke=null;if(this.renderForms){const Pe=ce.getValue(_e,{value:this.data.fieldValue});let $e=Pe.value||"";const xe=ce.getValue(_e,{charLimit:this.data.maxLen}).charLimit;xe&&$e.length>xe&&($e=$e.slice(0,xe));let Ne=Pe.formattedValue||this.data.textContent?.join(`
`)||null;Ne&&this.data.comb&&(Ne=Ne.replaceAll(/\s+/g,""));const je={userValue:$e,formattedValue:Ne,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(ke=document.createElement("textarea"),ke.textContent=Ne??$e,this.data.doNotScroll&&(ke.style.overflowY="hidden")):(ke=document.createElement("input"),ke.type="text",ke.setAttribute("value",Ne??$e),this.data.doNotScroll&&(ke.style.overflowX="hidden")),this.data.hasOwnCanvas&&(ke.hidden=!0),I.add(ke),ke.setAttribute("data-element-id",_e),ke.disabled=this.data.readOnly,ke.name=this.data.fieldName,ke.tabIndex=T,this._setRequired(ke,this.data.required),xe&&(ke.maxLength=xe),ke.addEventListener("input",Ye=>{ce.setValue(_e,{value:Ye.target.value}),this.setPropertyOnSiblings(ke,"value",Ye.target.value,"value"),je.formattedValue=null}),ke.addEventListener("resetform",Ye=>{const Je=this.data.defaultFieldValue??"";ke.value=je.userValue=Je,je.formattedValue=null});let He=Ye=>{const{formattedValue:Je}=je;Je!=null&&(Ye.target.value=Je),Ye.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){ke.addEventListener("focus",Je=>{if(je.focused)return;const{target:ot}=Je;je.userValue&&(ot.value=je.userValue),je.lastCommittedValue=ot.value,je.commitKey=1,je.focused=!0}),ke.addEventListener("updatefromsandbox",Je=>{this.showElementAndHideCanvas(Je.target);const ot={value(ze){je.userValue=ze.detail.value??"",ce.setValue(_e,{value:je.userValue.toString()}),ze.target.value=je.userValue},formattedValue(ze){const{formattedValue:pt}=ze.detail;je.formattedValue=pt,pt!=null&&ze.target!==document.activeElement&&(ze.target.value=pt),ce.setValue(_e,{formattedValue:pt})},selRange(ze){ze.target.setSelectionRange(...ze.detail.selRange)},charLimit:ze=>{const{charLimit:pt}=ze.detail,{target:yt}=ze;if(pt===0){yt.removeAttribute("maxLength");return}yt.setAttribute("maxLength",pt);let ut=je.userValue;!ut||ut.length<=pt||(ut=ut.slice(0,pt),yt.value=je.userValue=ut,ce.setValue(_e,{value:ut}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:_e,name:"Keystroke",value:ut,willCommit:!0,commitKey:1,selStart:yt.selectionStart,selEnd:yt.selectionEnd}}))}};this._dispatchEventFromSandbox(ot,Je)}),ke.addEventListener("keydown",Je=>{je.commitKey=1;let ot=-1;if(Je.key==="Escape"?ot=0:Je.key==="Enter"&&!this.data.multiLine?ot=2:Je.key==="Tab"&&(je.commitKey=3),ot===-1)return;const{value:ze}=Je.target;je.lastCommittedValue!==ze&&(je.lastCommittedValue=ze,je.userValue=ze,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:_e,name:"Keystroke",value:ze,willCommit:!0,commitKey:ot,selStart:Je.target.selectionStart,selEnd:Je.target.selectionEnd}}))});const Ye=He;He=null,ke.addEventListener("blur",Je=>{if(!je.focused||!Je.relatedTarget)return;je.focused=!1;const{value:ot}=Je.target;je.userValue=ot,je.lastCommittedValue!==ot&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:_e,name:"Keystroke",value:ot,willCommit:!0,commitKey:je.commitKey,selStart:Je.target.selectionStart,selEnd:Je.target.selectionEnd}}),Ye(Je)}),this.data.actions?.Keystroke&&ke.addEventListener("beforeinput",Je=>{je.lastCommittedValue=null;const{data:ot,target:ze}=Je,{value:pt,selectionStart:yt,selectionEnd:ut}=ze;let Et=yt,qe=ut;switch(Je.inputType){case"deleteWordBackward":{const Le=pt.substring(0,yt).match(/\w*[^\w]*$/);Le&&(Et-=Le[0].length);break}case"deleteWordForward":{const Le=pt.substring(yt).match(/^[^\w]*\w*/);Le&&(qe+=Le[0].length);break}case"deleteContentBackward":yt===ut&&(Et-=1);break;case"deleteContentForward":yt===ut&&(qe+=1);break}Je.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:_e,name:"Keystroke",value:pt,change:ot||"",willCommit:!1,selStart:Et,selEnd:qe}})}),this._setEventListeners(ke,je,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Je=>Je.target.value)}if(He&&ke.addEventListener("blur",He),this.data.comb){const Ye=(this.data.rect[2]-this.data.rect[0])/xe;ke.classList.add("comb"),ke.style.letterSpacing=`calc(${Ye}px * var(--scale-factor) - 1ch)`}}else ke=document.createElement("div"),ke.textContent=this.data.fieldValue,ke.style.verticalAlign="middle",ke.style.display="table-cell";return this._setTextStyle(ke),this._setBackgroundColor(ke),this._setDefaultPropertiesFromJS(ke),this.container.append(ke),this.container}}class Y extends U{constructor(ce){super(ce,{isRenderable:!!ce.data.hasOwnCanvas})}}class K extends U{constructor(ce){super(ce,{isRenderable:ce.renderForms})}render(){const ce=this.annotationStorage,_e=this.data,ke=_e.id;let Pe=ce.getValue(ke,{value:_e.exportValue===_e.fieldValue}).value;typeof Pe=="string"&&(Pe=Pe!=="Off",ce.setValue(ke,{value:Pe})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const $e=document.createElement("input");return I.add($e),$e.setAttribute("data-element-id",ke),$e.disabled=_e.readOnly,this._setRequired($e,this.data.required),$e.type="checkbox",$e.name=_e.fieldName,Pe&&$e.setAttribute("checked",!0),$e.setAttribute("exportValue",_e.exportValue),$e.tabIndex=T,$e.addEventListener("change",xe=>{const{name:Ne,checked:je}=xe.target;for(const He of this._getElementsByName(Ne,ke)){const Ye=je&&He.exportValue===_e.exportValue;He.domElement&&(He.domElement.checked=Ye),ce.setValue(He.id,{value:Ye})}ce.setValue(ke,{value:je})}),$e.addEventListener("resetform",xe=>{const Ne=_e.defaultFieldValue||"Off";xe.target.checked=Ne===_e.exportValue}),this.enableScripting&&this.hasJSActions&&($e.addEventListener("updatefromsandbox",xe=>{const Ne={value(je){je.target.checked=je.detail.value!=="Off",ce.setValue(ke,{value:je.target.checked})}};this._dispatchEventFromSandbox(Ne,xe)}),this._setEventListeners($e,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],xe=>xe.target.checked)),this._setBackgroundColor($e),this._setDefaultPropertiesFromJS($e),this.container.append($e),this.container}}class Z extends U{constructor(ce){super(ce,{isRenderable:ce.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const ce=this.annotationStorage,_e=this.data,ke=_e.id;let Pe=ce.getValue(ke,{value:_e.fieldValue===_e.buttonValue}).value;typeof Pe=="string"&&(Pe=Pe!==_e.buttonValue,ce.setValue(ke,{value:Pe}));const $e=document.createElement("input");if(I.add($e),$e.setAttribute("data-element-id",ke),$e.disabled=_e.readOnly,this._setRequired($e,this.data.required),$e.type="radio",$e.name=_e.fieldName,Pe&&$e.setAttribute("checked",!0),$e.tabIndex=T,$e.addEventListener("change",xe=>{const{name:Ne,checked:je}=xe.target;for(const He of this._getElementsByName(Ne,ke))ce.setValue(He.id,{value:!1});ce.setValue(ke,{value:je})}),$e.addEventListener("resetform",xe=>{const Ne=_e.defaultFieldValue;xe.target.checked=Ne!=null&&Ne===_e.buttonValue}),this.enableScripting&&this.hasJSActions){const xe=_e.buttonValue;$e.addEventListener("updatefromsandbox",Ne=>{const je={value:He=>{const Ye=xe===He.detail.value;for(const Je of this._getElementsByName(He.target.name)){const ot=Ye&&Je.id===ke;Je.domElement&&(Je.domElement.checked=ot),ce.setValue(Je.id,{value:ot})}}};this._dispatchEventFromSandbox(je,Ne)}),this._setEventListeners($e,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Ne=>Ne.target.checked)}return this._setBackgroundColor($e),this._setDefaultPropertiesFromJS($e),this.container.append($e),this.container}}class J extends H{constructor(ce){super(ce,{ignoreBorder:ce.data.hasAppearance})}render(){const ce=super.render();ce.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(ce.title=this.data.alternativeText);const _e=ce.lastChild;return this.enableScripting&&this.hasJSActions&&_e&&(this._setDefaultPropertiesFromJS(_e),_e.addEventListener("updatefromsandbox",ke=>{this._dispatchEventFromSandbox({},ke)})),ce}}class te extends U{constructor(ce){super(ce,{isRenderable:ce.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const ce=this.annotationStorage,_e=this.data.id,ke=ce.getValue(_e,{value:this.data.fieldValue}),Pe=document.createElement("select");I.add(Pe),Pe.setAttribute("data-element-id",_e),Pe.disabled=this.data.readOnly,this._setRequired(Pe,this.data.required),Pe.name=this.data.fieldName,Pe.tabIndex=T;let $e=this.data.combo&&this.data.options.length>0;this.data.combo||(Pe.size=this.data.options.length,this.data.multiSelect&&(Pe.multiple=!0)),Pe.addEventListener("resetform",Ye=>{const Je=this.data.defaultFieldValue;for(const ot of Pe.options)ot.selected=ot.value===Je});for(const Ye of this.data.options){const Je=document.createElement("option");Je.textContent=Ye.displayValue,Je.value=Ye.exportValue,ke.value.includes(Ye.exportValue)&&(Je.setAttribute("selected",!0),$e=!1),Pe.append(Je)}let xe=null;if($e){const Ye=document.createElement("option");Ye.value=" ",Ye.setAttribute("hidden",!0),Ye.setAttribute("selected",!0),Pe.prepend(Ye),xe=()=>{Ye.remove(),Pe.removeEventListener("input",xe),xe=null},Pe.addEventListener("input",xe)}const Ne=Ye=>{const Je=Ye?"value":"textContent",{options:ot,multiple:ze}=Pe;return ze?Array.prototype.filter.call(ot,pt=>pt.selected).map(pt=>pt[Je]):ot.selectedIndex===-1?null:ot[ot.selectedIndex][Je]};let je=Ne(!1);const He=Ye=>{const Je=Ye.target.options;return Array.prototype.map.call(Je,ot=>({displayValue:ot.textContent,exportValue:ot.value}))};return this.enableScripting&&this.hasJSActions?(Pe.addEventListener("updatefromsandbox",Ye=>{const Je={value(ot){xe?.();const ze=ot.detail.value,pt=new Set(Array.isArray(ze)?ze:[ze]);for(const yt of Pe.options)yt.selected=pt.has(yt.value);ce.setValue(_e,{value:Ne(!0)}),je=Ne(!1)},multipleSelection(ot){Pe.multiple=!0},remove(ot){const ze=Pe.options,pt=ot.detail.remove;ze[pt].selected=!1,Pe.remove(pt),ze.length>0&&Array.prototype.findIndex.call(ze,yt=>yt.selected)===-1&&(ze[0].selected=!0),ce.setValue(_e,{value:Ne(!0),items:He(ot)}),je=Ne(!1)},clear(ot){for(;Pe.length!==0;)Pe.remove(0);ce.setValue(_e,{value:null,items:[]}),je=Ne(!1)},insert(ot){const{index:ze,displayValue:pt,exportValue:yt}=ot.detail.insert,ut=Pe.children[ze],Et=document.createElement("option");Et.textContent=pt,Et.value=yt,ut?ut.before(Et):Pe.append(Et),ce.setValue(_e,{value:Ne(!0),items:He(ot)}),je=Ne(!1)},items(ot){const{items:ze}=ot.detail;for(;Pe.length!==0;)Pe.remove(0);for(const pt of ze){const{displayValue:yt,exportValue:ut}=pt,Et=document.createElement("option");Et.textContent=yt,Et.value=ut,Pe.append(Et)}Pe.options.length>0&&(Pe.options[0].selected=!0),ce.setValue(_e,{value:Ne(!0),items:He(ot)}),je=Ne(!1)},indices(ot){const ze=new Set(ot.detail.indices);for(const pt of ot.target.options)pt.selected=ze.has(pt.index);ce.setValue(_e,{value:Ne(!0)}),je=Ne(!1)},editable(ot){ot.target.disabled=!ot.detail.editable}};this._dispatchEventFromSandbox(Je,Ye)}),Pe.addEventListener("input",Ye=>{const Je=Ne(!0);ce.setValue(_e,{value:Je}),Ye.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:_e,name:"Keystroke",value:je,changeEx:Je,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(Pe,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Ye=>Ye.target.value)):Pe.addEventListener("input",function(Ye){ce.setValue(_e,{value:Ne(!0)})}),this.data.combo&&this._setTextStyle(Pe),this._setBackgroundColor(Pe),this._setDefaultPropertiesFromJS(Pe),this.container.append(Pe),this.container}}class de extends F{constructor(ce){const{data:_e,elements:ke}=ce;super(ce,{isRenderable:F._hasPopupData(_e)}),this.elements=ke}render(){this.container.classList.add("popupAnnotation");const ce=new se({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),_e=[];for(const ke of this.elements)ke.popup=ce,_e.push(ke.data.id),ke.addHighlightArea();return this.container.setAttribute("aria-controls",_e.map(ke=>`${f.AnnotationPrefix}${ke}`).join(",")),this.container}}class se{#e=null;#t=this.#u.bind(this);#n=this.#x.bind(this);#r=this.#E.bind(this);#o=this.#v.bind(this);#s=null;#a=null;#l=null;#c=null;#i=null;#f=null;#d=!1;#h=null;#p=null;#y=null;#g=null;#m=!1;constructor({container:ce,color:_e,elements:ke,titleObj:Pe,modificationDate:$e,contentsObj:xe,richText:Ne,parent:je,rect:He,parentRect:Ye,open:Je}){this.#a=ce,this.#g=Pe,this.#l=xe,this.#y=Ne,this.#i=je,this.#s=_e,this.#p=He,this.#f=Ye,this.#c=ke;const ot=y.PDFDateString.toDateObject($e);ot&&(this.#e=je.l10n.get("annotation_date_string",{date:ot.toLocaleDateString(),time:ot.toLocaleTimeString()})),this.trigger=ke.flatMap(ze=>ze.getElementsToTriggerPopup());for(const ze of this.trigger)ze.addEventListener("click",this.#o),ze.addEventListener("mouseenter",this.#r),ze.addEventListener("mouseleave",this.#n),ze.classList.add("popupTriggerArea");for(const ze of ke)ze.container?.addEventListener("keydown",this.#t);this.#a.hidden=!0,Je&&this.#v()}render(){if(this.#h)return;const{page:{view:ce},viewport:{rawDims:{pageWidth:_e,pageHeight:ke,pageX:Pe,pageY:$e}}}=this.#i,xe=this.#h=document.createElement("div");if(xe.className="popup",this.#s){const qe=xe.style.outlineColor=f.Util.makeHexColor(...this.#s);CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?xe.style.backgroundColor=`color-mix(in srgb, ${qe} 30%, white)`:xe.style.backgroundColor=f.Util.makeHexColor(...this.#s.map(Le=>Math.floor(.7*(255-Le)+Le)))}const Ne=document.createElement("span");Ne.className="header";const je=document.createElement("h1");if(Ne.append(je),{dir:je.dir,str:je.textContent}=this.#g,xe.append(Ne),this.#e){const qe=document.createElement("span");qe.classList.add("popupDate"),this.#e.then(Le=>{qe.textContent=Le}),Ne.append(qe)}const He=this.#l,Ye=this.#y;if(Ye?.str&&(!He?.str||He.str===Ye.str))C.XfaLayer.render({xfaHtml:Ye.html,intent:"richText",div:xe}),xe.lastChild.classList.add("richText","popupContent");else{const qe=this._formatContents(He);xe.append(qe)}let Je=!!this.#f,ot=Je?this.#f:this.#p;for(const qe of this.#c)if(!ot||f.Util.intersect(qe.data.rect,ot)!==null){ot=qe.data.rect,Je=!0;break}const ze=f.Util.normalizeRect([ot[0],ce[3]-ot[1]+ce[1],ot[2],ce[3]-ot[3]+ce[1]]),pt=Je?ot[2]-ot[0]+5:0,yt=ze[0]+pt,ut=ze[1],{style:Et}=this.#a;Et.left=`${100*(yt-Pe)/_e}%`,Et.top=`${100*(ut-$e)/ke}%`,this.#a.append(xe)}_formatContents({str:ce,dir:_e}){const ke=document.createElement("p");ke.classList.add("popupContent"),ke.dir=_e;const Pe=ce.split(/(?:\r\n?|\n)/);for(let $e=0,xe=Pe.length;$e<xe;++$e){const Ne=Pe[$e];ke.append(document.createTextNode(Ne)),$e<xe-1&&ke.append(document.createElement("br"))}return ke}#u(ce){ce.altKey||ce.shiftKey||ce.ctrlKey||ce.metaKey||(ce.key==="Enter"||ce.key==="Escape"&&this.#d)&&this.#v()}#v(){this.#d=!this.#d,this.#d?(this.#E(),this.#a.addEventListener("click",this.#o),this.#a.addEventListener("keydown",this.#t)):(this.#x(),this.#a.removeEventListener("click",this.#o),this.#a.removeEventListener("keydown",this.#t))}#E(){this.#h||this.render(),this.isVisible?this.#d&&this.#a.classList.add("focused"):(this.#a.hidden=!1,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)+1e3)}#x(){this.#a.classList.remove("focused"),!(this.#d||!this.isVisible)&&(this.#a.hidden=!0,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)-1e3)}forceHide(){this.#m=this.isVisible,this.#m&&(this.#a.hidden=!0)}maybeShow(){this.#m&&(this.#m=!1,this.#a.hidden=!1)}get isVisible(){return this.#a.hidden===!1}}class ne extends F{constructor(ce){super(ce,{isRenderable:!0,ignoreBorder:!0}),this.textContent=ce.data.textContent,this.textPosition=ce.data.textPosition,this.annotationEditorType=f.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const ce=document.createElement("div");ce.classList.add("annotationTextContent"),ce.setAttribute("role","comment");for(const _e of this.textContent){const ke=document.createElement("span");ke.textContent=_e,ce.append(ke)}this.container.append(ce)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}n.FreeTextAnnotationElement=ne;class ge extends F{#e=null;constructor(ce){super(ce,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const ce=this.data,{width:_e,height:ke}=N(ce.rect),Pe=this.svgFactory.create(_e,ke,!0),$e=this.#e=this.svgFactory.createElement("svg:line");return $e.setAttribute("x1",ce.rect[2]-ce.lineCoordinates[0]),$e.setAttribute("y1",ce.rect[3]-ce.lineCoordinates[1]),$e.setAttribute("x2",ce.rect[2]-ce.lineCoordinates[2]),$e.setAttribute("y2",ce.rect[3]-ce.lineCoordinates[3]),$e.setAttribute("stroke-width",ce.borderStyle.width||1),$e.setAttribute("stroke","transparent"),$e.setAttribute("fill","transparent"),Pe.append($e),this.container.append(Pe),!ce.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class Ee extends F{#e=null;constructor(ce){super(ce,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const ce=this.data,{width:_e,height:ke}=N(ce.rect),Pe=this.svgFactory.create(_e,ke,!0),$e=ce.borderStyle.width,xe=this.#e=this.svgFactory.createElement("svg:rect");return xe.setAttribute("x",$e/2),xe.setAttribute("y",$e/2),xe.setAttribute("width",_e-$e),xe.setAttribute("height",ke-$e),xe.setAttribute("stroke-width",$e||1),xe.setAttribute("stroke","transparent"),xe.setAttribute("fill","transparent"),Pe.append(xe),this.container.append(Pe),!ce.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class we extends F{#e=null;constructor(ce){super(ce,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const ce=this.data,{width:_e,height:ke}=N(ce.rect),Pe=this.svgFactory.create(_e,ke,!0),$e=ce.borderStyle.width,xe=this.#e=this.svgFactory.createElement("svg:ellipse");return xe.setAttribute("cx",_e/2),xe.setAttribute("cy",ke/2),xe.setAttribute("rx",_e/2-$e/2),xe.setAttribute("ry",ke/2-$e/2),xe.setAttribute("stroke-width",$e||1),xe.setAttribute("stroke","transparent"),xe.setAttribute("fill","transparent"),Pe.append(xe),this.container.append(Pe),!ce.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class Ie extends F{#e=null;constructor(ce){super(ce,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const ce=this.data,{width:_e,height:ke}=N(ce.rect),Pe=this.svgFactory.create(_e,ke,!0);let $e=[];for(const Ne of ce.vertices){const je=Ne.x-ce.rect[0],He=ce.rect[3]-Ne.y;$e.push(je+","+He)}$e=$e.join(" ");const xe=this.#e=this.svgFactory.createElement(this.svgElementName);return xe.setAttribute("points",$e),xe.setAttribute("stroke-width",ce.borderStyle.width||1),xe.setAttribute("stroke","transparent"),xe.setAttribute("fill","transparent"),Pe.append(xe),this.container.append(Pe),!ce.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class Be extends Ie{constructor(ce){super(ce),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Me extends F{constructor(ce){super(ce,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Re extends F{#e=[];constructor(ce){super(ce,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=f.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const ce=this.data,{width:_e,height:ke}=N(ce.rect),Pe=this.svgFactory.create(_e,ke,!0);for(const $e of ce.inkLists){let xe=[];for(const je of $e){const He=je.x-ce.rect[0],Ye=ce.rect[3]-je.y;xe.push(`${He},${Ye}`)}xe=xe.join(" ");const Ne=this.svgFactory.createElement(this.svgElementName);this.#e.push(Ne),Ne.setAttribute("points",xe),Ne.setAttribute("stroke-width",ce.borderStyle.width||1),Ne.setAttribute("stroke","transparent"),Ne.setAttribute("fill","transparent"),!ce.popupRef&&this.hasPopupData&&this._createPopup(),Pe.append(Ne)}return this.container.append(Pe),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}n.InkAnnotationElement=Re;class Te extends F{constructor(ce){super(ce,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class Se extends F{constructor(ce){super(ce,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class oe extends F{constructor(ce){super(ce,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class ae extends F{constructor(ce){super(ce,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class be extends F{constructor(ce){super(ce,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}n.StampAnnotationElement=be;class he extends F{#e=null;constructor(ce){super(ce,{isRenderable:!0});const{filename:_e,content:ke}=this.data.file;this.filename=(0,y.getFilenameFromUrl)(_e,!0),this.content=ke,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,filename:_e,content:ke})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:ce,data:_e}=this;let ke;_e.hasAppearance||_e.fillAlpha===0?ke=document.createElement("div"):(ke=document.createElement("img"),ke.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(_e.name)?"paperclip":"pushpin"}.svg`,_e.fillAlpha&&_e.fillAlpha<1&&(ke.style=`filter: opacity(${Math.round(_e.fillAlpha*100)}%);`)),ke.addEventListener("dblclick",this.#t.bind(this)),this.#e=ke;const{isMac:Pe}=f.FeatureTest.platform;return ce.addEventListener("keydown",$e=>{$e.key==="Enter"&&(Pe?$e.metaKey:$e.ctrlKey)&&this.#t()}),!_e.popupRef&&this.hasPopupData?this._createPopup():ke.classList.add("popupTriggerArea"),ce.append(ke),ce}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.container,this.content,this.filename)}}class ue{#e=null;#t=null;#n=new Map;constructor({div:ce,accessibilityManager:_e,annotationCanvasMap:ke,l10n:Pe,page:$e,viewport:xe}){this.div=ce,this.#e=_e,this.#t=ke,this.l10n=Pe,this.page=$e,this.viewport=xe,this.zIndex=0,this.l10n||=w.NullL10n}#r(ce,_e){const ke=ce.firstChild||ce;ke.id=`${f.AnnotationPrefix}${_e}`,this.div.append(ce),this.#e?.moveElementInDOM(this.div,ce,ke,!1)}async render(ce){const{annotations:_e}=ce,ke=this.div;(0,y.setLayerDimensions)(ke,this.viewport);const Pe=new Map,$e={data:null,layer:ke,linkService:ce.linkService,downloadManager:ce.downloadManager,imageResourcesPath:ce.imageResourcesPath||"",renderForms:ce.renderForms!==!1,svgFactory:new y.DOMSVGFactory,annotationStorage:ce.annotationStorage||new S.AnnotationStorage,enableScripting:ce.enableScripting===!0,hasJSActions:ce.hasJSActions,fieldObjects:ce.fieldObjects,parent:this,elements:null};for(const xe of _e){if(xe.noHTML)continue;const Ne=xe.annotationType===f.AnnotationType.POPUP;if(Ne){const Ye=Pe.get(xe.id);if(!Ye)continue;$e.elements=Ye}else{const{width:Ye,height:Je}=N(xe.rect);if(Ye<=0||Je<=0)continue}$e.data=xe;const je=L.create($e);if(!je.isRenderable)continue;if(!Ne&&xe.popupRef){const Ye=Pe.get(xe.popupRef);Ye?Ye.push(je):Pe.set(xe.popupRef,[je])}je.annotationEditorType>0&&this.#n.set(je.data.id,je);const He=je.render();xe.hidden&&(He.style.visibility="hidden"),this.#r(He,xe.id)}this.#o(),await this.l10n.translate(ke)}update({viewport:ce}){const _e=this.div;this.viewport=ce,(0,y.setLayerDimensions)(_e,{rotation:ce.rotation}),this.#o(),_e.hidden=!1}#o(){if(!this.#t)return;const ce=this.div;for(const[_e,ke]of this.#t){const Pe=ce.querySelector(`[data-annotation-id="${_e}"]`);if(!Pe)continue;const{firstChild:$e}=Pe;$e?$e.nodeName==="CANVAS"?$e.replaceWith(ke):$e.before(ke):Pe.append(ke)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(ce){return this.#n.get(ce)}}n.AnnotationLayer=ue}),((s,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.ColorConverters=void 0;function u(S){return Math.floor(Math.max(0,Math.min(1,S))*255).toString(16).padStart(2,"0")}function f(S){return Math.max(0,Math.min(255,255*S))}class y{static CMYK_G([A,w,C,T]){return["G",1-Math.min(1,.3*A+.59*C+.11*w+T)]}static G_CMYK([A]){return["CMYK",0,0,0,1-A]}static G_RGB([A]){return["RGB",A,A,A]}static G_rgb([A]){return A=f(A),[A,A,A]}static G_HTML([A]){const w=u(A);return`#${w}${w}${w}`}static RGB_G([A,w,C]){return["G",.3*A+.59*w+.11*C]}static RGB_rgb(A){return A.map(f)}static RGB_HTML(A){return`#${A.map(u).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([A,w,C,T]){return["RGB",1-Math.min(1,A+T),1-Math.min(1,C+T),1-Math.min(1,w+T)]}static CMYK_rgb([A,w,C,T]){return[f(1-Math.min(1,A+T)),f(1-Math.min(1,C+T)),f(1-Math.min(1,w+T))]}static CMYK_HTML(A){const w=this.CMYK_RGB(A).slice(1);return this.RGB_HTML(w)}static RGB_CMYK([A,w,C]){const T=1-A,R=1-w,I=1-C,N=Math.min(T,R,I);return["CMYK",T,R,I,N]}}n.ColorConverters=y}),((s,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.NullL10n=void 0,n.getL10nFallback=f;const u={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}}  {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}}  {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};u.print_progress_percent="{{progress}}%";function f(A,w){switch(A){case"find_match_count":A=`find_match_count[${w.total===1?"one":"other"}]`;break;case"find_match_count_limit":A=`find_match_count_limit[${w.limit===1?"one":"other"}]`;break}return u[A]||""}function y(A,w){return w?A.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(C,T)=>T in w?w[T]:"{{"+T+"}}"):A}const S={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(A,w=null,C=f(A,w)){return y(C,w)},async translate(A){}};n.NullL10n=S}),((s,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.XfaLayer=void 0;var f=u(25);class y{static setupStorage(A,w,C,T,R){const I=T.getValue(w,{value:null});switch(C.name){case"textarea":if(I.value!==null&&(A.textContent=I.value),R==="print")break;A.addEventListener("input",N=>{T.setValue(w,{value:N.target.value})});break;case"input":if(C.attributes.type==="radio"||C.attributes.type==="checkbox"){if(I.value===C.attributes.xfaOn?A.setAttribute("checked",!0):I.value===C.attributes.xfaOff&&A.removeAttribute("checked"),R==="print")break;A.addEventListener("change",N=>{T.setValue(w,{value:N.target.checked?N.target.getAttribute("xfaOn"):N.target.getAttribute("xfaOff")})})}else{if(I.value!==null&&A.setAttribute("value",I.value),R==="print")break;A.addEventListener("input",N=>{T.setValue(w,{value:N.target.value})})}break;case"select":if(I.value!==null){A.setAttribute("value",I.value);for(const N of C.children)N.attributes.value===I.value?N.attributes.selected=!0:N.attributes.hasOwnProperty("selected")&&delete N.attributes.selected}A.addEventListener("input",N=>{const L=N.target.options,F=L.selectedIndex===-1?"":L[L.selectedIndex].value;T.setValue(w,{value:F})});break}}static setAttributes({html:A,element:w,storage:C=null,intent:T,linkService:R}){const{attributes:I}=w,N=A instanceof HTMLAnchorElement;I.type==="radio"&&(I.name=`${I.name}-${T}`);for(const[L,F]of Object.entries(I))if(F!=null)switch(L){case"class":F.length&&A.setAttribute(L,F.join(" "));break;case"dataId":break;case"id":A.setAttribute("data-element-id",F);break;case"style":Object.assign(A.style,F);break;case"textContent":A.textContent=F;break;default:(!N||L!=="href"&&L!=="newWindow")&&A.setAttribute(L,F)}N&&R.addLinkAttributes(A,I.href,I.newWindow),C&&I.dataId&&this.setupStorage(A,I.dataId,w,C)}static render(A){const w=A.annotationStorage,C=A.linkService,T=A.xfaHtml,R=A.intent||"display",I=document.createElement(T.name);T.attributes&&this.setAttributes({html:I,element:T,intent:R,linkService:C});const N=[[T,-1,I]],L=A.div;if(L.append(I),A.viewport){const H=`matrix(${A.viewport.transform.join(",")})`;L.style.transform=H}R!=="richText"&&L.setAttribute("class","xfaLayer xfaFont");const F=[];for(;N.length>0;){const[H,z,U]=N.at(-1);if(z+1===H.children.length){N.pop();continue}const G=H.children[++N.at(-1)[1]];if(G===null)continue;const{name:Y}=G;if(Y==="#text"){const Z=document.createTextNode(G.value);F.push(Z),U.append(Z);continue}const K=G?.attributes?.xmlns?document.createElementNS(G.attributes.xmlns,Y):document.createElement(Y);if(U.append(K),G.attributes&&this.setAttributes({html:K,element:G,storage:w,intent:R,linkService:C}),G.children&&G.children.length>0)N.push([G,-1,K]);else if(G.value){const Z=document.createTextNode(G.value);f.XfaText.shouldBuildText(Y)&&F.push(Z),K.append(Z)}}for(const H of L.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))H.setAttribute("readOnly",!0);return{textDivs:F}}static update(A){const w=`matrix(${A.viewport.transform.join(",")})`;A.div.style.transform=w,A.div.hidden=!1}}n.XfaLayer=y}),((s,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.InkEditor=void 0;var f=u(1),y=u(4),S=u(29),A=u(6),w=u(5);class C extends y.AnnotationEditor{#e=0;#t=0;#n=this.canvasPointermove.bind(this);#r=this.canvasPointerleave.bind(this);#o=this.canvasPointerup.bind(this);#s=this.canvasPointerdown.bind(this);#a=new Path2D;#l=!1;#c=!1;#i=!1;#f=null;#d=0;#h=0;#p=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _type="ink";constructor(R){super({...R,name:"inkEditor"}),this.color=R.color||null,this.thickness=R.thickness||null,this.opacity=R.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(R){y.AnnotationEditor.initialize(R,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(R,I){switch(R){case f.AnnotationEditorParamsType.INK_THICKNESS:C._defaultThickness=I;break;case f.AnnotationEditorParamsType.INK_COLOR:C._defaultColor=I;break;case f.AnnotationEditorParamsType.INK_OPACITY:C._defaultOpacity=I/100;break}}updateParams(R,I){switch(R){case f.AnnotationEditorParamsType.INK_THICKNESS:this.#y(I);break;case f.AnnotationEditorParamsType.INK_COLOR:this.#g(I);break;case f.AnnotationEditorParamsType.INK_OPACITY:this.#m(I);break}}static get defaultPropertiesToUpdate(){return[[f.AnnotationEditorParamsType.INK_THICKNESS,C._defaultThickness],[f.AnnotationEditorParamsType.INK_COLOR,C._defaultColor||y.AnnotationEditor._defaultLineColor],[f.AnnotationEditorParamsType.INK_OPACITY,Math.round(C._defaultOpacity*100)]]}get propertiesToUpdate(){return[[f.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||C._defaultThickness],[f.AnnotationEditorParamsType.INK_COLOR,this.color||C._defaultColor||y.AnnotationEditor._defaultLineColor],[f.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??C._defaultOpacity))]]}#y(R){const I=this.thickness;this.addCommands({cmd:()=>{this.thickness=R,this.#w()},undo:()=>{this.thickness=I,this.#w()},mustExec:!0,type:f.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#g(R){const I=this.color;this.addCommands({cmd:()=>{this.color=R,this.#b()},undo:()=>{this.color=I,this.#b()},mustExec:!0,type:f.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#m(R){R/=100;const I=this.opacity;this.addCommands({cmd:()=>{this.opacity=R,this.#b()},undo:()=>{this.opacity=I,this.#b()},mustExec:!0,type:f.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(this.#M(),this.#k()),this.isAttachedToDOM||(this.parent.add(this),this.#_()),this.#w()))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#f.disconnect(),this.#f=null,super.remove())}setParent(R){!this.parent&&R?this._uiManager.removeShouldRescale(this):this.parent&&R===null&&this._uiManager.addShouldRescale(this),super.setParent(R)}onScaleChanging(){const[R,I]=this.parentDimensions,N=this.width*R,L=this.height*I;this.setDimensions(N,L)}enableEditMode(){this.#l||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",this.#s))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",this.#s))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}#u(){const{parentRotation:R,parentDimensions:[I,N]}=this;switch(R){case 90:return[0,N,N,I];case 180:return[I,N,I,N];case 270:return[I,0,N,I];default:return[0,0,I,N]}}#v(){const{ctx:R,color:I,opacity:N,thickness:L,parentScale:F,scaleFactor:H}=this;R.lineWidth=L*F/H,R.lineCap="round",R.lineJoin="round",R.miterLimit=10,R.strokeStyle=`${I}${(0,w.opacityToHex)(N)}`}#E(R,I){this.canvas.addEventListener("contextmenu",A.noContextMenu),this.canvas.addEventListener("pointerleave",this.#r),this.canvas.addEventListener("pointermove",this.#n),this.canvas.addEventListener("pointerup",this.#o),this.canvas.removeEventListener("pointerdown",this.#s),this.isEditing=!0,this.#i||(this.#i=!0,this.#_(),this.thickness||=C._defaultThickness,this.color||=C._defaultColor||y.AnnotationEditor._defaultLineColor,this.opacity??=C._defaultOpacity),this.currentPath.push([R,I]),this.#c=!1,this.#v(),this.#p=()=>{this.#D(),this.#p&&window.requestAnimationFrame(this.#p)},window.requestAnimationFrame(this.#p)}#x(R,I){const[N,L]=this.currentPath.at(-1);if(this.currentPath.length>1&&R===N&&I===L)return;const F=this.currentPath;let H=this.#a;if(F.push([R,I]),this.#c=!0,F.length<=2){H.moveTo(...F[0]),H.lineTo(R,I);return}F.length===3&&(this.#a=H=new Path2D,H.moveTo(...F[0])),this.#L(H,...F.at(-3),...F.at(-2),R,I)}#T(){if(this.currentPath.length===0)return;const R=this.currentPath.at(-1);this.#a.lineTo(...R)}#R(R,I){this.#p=null,R=Math.min(Math.max(R,0),this.canvas.width),I=Math.min(Math.max(I,0),this.canvas.height),this.#x(R,I),this.#T();let N;if(this.currentPath.length!==1)N=this.#P();else{const U=[R,I];N=[[U,U.slice(),U.slice(),U]]}const L=this.#a,F=this.currentPath;this.currentPath=[],this.#a=new Path2D;const H=()=>{this.allRawPaths.push(F),this.paths.push(N),this.bezierPath2D.push(L),this.rebuild()},z=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(this.#M(),this.#k()),this.#w())};this.addCommands({cmd:H,undo:z,mustExec:!0})}#D(){if(!this.#c)return;this.#c=!1;const R=Math.ceil(this.thickness*this.parentScale),I=this.currentPath.slice(-3),N=I.map(H=>H[0]),L=I.map(H=>H[1]);Math.min(...N)-R,Math.max(...N)+R,Math.min(...L)-R,Math.max(...L)+R;const{ctx:F}=this;F.save(),F.clearRect(0,0,this.canvas.width,this.canvas.height);for(const H of this.bezierPath2D)F.stroke(H);F.stroke(this.#a),F.restore()}#L(R,I,N,L,F,H,z){const U=(I+L)/2,G=(N+F)/2,Y=(L+H)/2,K=(F+z)/2;R.bezierCurveTo(U+2*(L-U)/3,G+2*(F-G)/3,Y+2*(L-Y)/3,K+2*(F-K)/3,Y,K)}#P(){const R=this.currentPath;if(R.length<=2)return[[R[0],R[0],R.at(-1),R.at(-1)]];const I=[];let N,[L,F]=R[0];for(N=1;N<R.length-2;N++){const[Z,J]=R[N],[te,de]=R[N+1],se=(Z+te)/2,ne=(J+de)/2,ge=[L+2*(Z-L)/3,F+2*(J-F)/3],Ee=[se+2*(Z-se)/3,ne+2*(J-ne)/3];I.push([[L,F],ge,Ee,[se,ne]]),[L,F]=[se,ne]}const[H,z]=R[N],[U,G]=R[N+1],Y=[L+2*(H-L)/3,F+2*(z-F)/3],K=[U+2*(H-U)/3,G+2*(z-G)/3];return I.push([[L,F],Y,K,[U,G]]),I}#b(){if(this.isEmpty()){this.#A();return}this.#v();const{canvas:R,ctx:I}=this;I.setTransform(1,0,0,1,0,0),I.clearRect(0,0,R.width,R.height),this.#A();for(const N of this.bezierPath2D)I.stroke(N)}commit(){this.#l||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#l=!0,this.div.classList.add("disabled"),this.#w(!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(R){this._focusEventsAllowed&&(super.focusin(R),this.enableEditMode())}canvasPointerdown(R){R.button!==0||!this.isInEditMode()||this.#l||(this.setInForeground(),R.preventDefault(),R.type!=="mouse"&&this.div.focus(),this.#E(R.offsetX,R.offsetY))}canvasPointermove(R){R.preventDefault(),this.#x(R.offsetX,R.offsetY)}canvasPointerup(R){R.preventDefault(),this.#O(R)}canvasPointerleave(R){this.#O(R)}#O(R){this.canvas.removeEventListener("pointerleave",this.#r),this.canvas.removeEventListener("pointermove",this.#n),this.canvas.removeEventListener("pointerup",this.#o),this.canvas.addEventListener("pointerdown",this.#s),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",A.noContextMenu)},10),this.#R(R.offsetX,R.offsetY),this.addToAnnotationStorage(),this.setInBackground()}#M(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",y.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(R=>this.canvas?.setAttribute("aria-label",R)),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#k(){this.#f=new ResizeObserver(R=>{const I=R[0].contentRect;I.width&&I.height&&this.setDimensions(I.width,I.height)}),this.#f.observe(this.div)}get isResizable(){return!this.isEmpty()&&this.#l}render(){if(this.div)return this.div;let R,I;this.width&&(R=this.x,I=this.y),super.render(),y.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(z=>this.div?.setAttribute("aria-label",z));const[N,L,F,H]=this.#u();if(this.setAt(N,L,0,0),this.setDims(F,H),this.#M(),this.width){const[z,U]=this.parentDimensions;this.setAspectRatio(this.width*z,this.height*U),this.setAt(R*z,I*U,this.width*z,this.height*U),this.#i=!0,this.#_(),this.setDims(this.width*z,this.height*U),this.#b(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#k(),this.div}#_(){if(!this.#i)return;const[R,I]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*R),this.canvas.height=Math.ceil(this.height*I),this.#A()}setDimensions(R,I){const N=Math.round(R),L=Math.round(I);if(this.#d===N&&this.#h===L)return;this.#d=N,this.#h=L,this.canvas.style.visibility="hidden";const[F,H]=this.parentDimensions;this.width=R/F,this.height=I/H,this.fixAndSetPosition(),this.#l&&this.#C(R,I),this.#_(),this.#b(),this.canvas.style.visibility="visible",this.fixDims()}#C(R,I){const N=this.#N(),L=(R-N)/this.#t,F=(I-N)/this.#e;this.scaleFactor=Math.min(L,F)}#A(){const R=this.#N()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+R,this.translationY*this.scaleFactor+R)}static#F(R){const I=new Path2D;for(let N=0,L=R.length;N<L;N++){const[F,H,z,U]=R[N];N===0&&I.moveTo(...F),I.bezierCurveTo(H[0],H[1],z[0],z[1],U[0],U[1])}return I}static#B(R,I,N){const[L,F,H,z]=I;switch(N){case 0:for(let U=0,G=R.length;U<G;U+=2)R[U]+=L,R[U+1]=z-R[U+1];break;case 90:for(let U=0,G=R.length;U<G;U+=2){const Y=R[U];R[U]=R[U+1]+L,R[U+1]=Y+F}break;case 180:for(let U=0,G=R.length;U<G;U+=2)R[U]=H-R[U],R[U+1]+=F;break;case 270:for(let U=0,G=R.length;U<G;U+=2){const Y=R[U];R[U]=H-R[U+1],R[U+1]=z-Y}break;default:throw new Error("Invalid rotation")}return R}static#U(R,I,N){const[L,F,H,z]=I;switch(N){case 0:for(let U=0,G=R.length;U<G;U+=2)R[U]-=L,R[U+1]=z-R[U+1];break;case 90:for(let U=0,G=R.length;U<G;U+=2){const Y=R[U];R[U]=R[U+1]-F,R[U+1]=Y-L}break;case 180:for(let U=0,G=R.length;U<G;U+=2)R[U]=H-R[U],R[U+1]-=F;break;case 270:for(let U=0,G=R.length;U<G;U+=2){const Y=R[U];R[U]=z-R[U+1],R[U+1]=H-Y}break;default:throw new Error("Invalid rotation")}return R}#$(R,I,N,L){const F=[],H=this.thickness/2,z=R*I+H,U=R*N+H;for(const G of this.paths){const Y=[],K=[];for(let Z=0,J=G.length;Z<J;Z++){const[te,de,se,ne]=G[Z],ge=R*te[0]+z,Ee=R*te[1]+U,we=R*de[0]+z,Ie=R*de[1]+U,Be=R*se[0]+z,Me=R*se[1]+U,Re=R*ne[0]+z,Te=R*ne[1]+U;Z===0&&(Y.push(ge,Ee),K.push(ge,Ee)),Y.push(we,Ie,Be,Me,Re,Te),K.push(we,Ie),Z===J-1&&K.push(Re,Te)}F.push({bezier:C.#B(Y,L,this.rotation),points:C.#B(K,L,this.rotation)})}return F}#I(){let R=1/0,I=-1/0,N=1/0,L=-1/0;for(const F of this.paths)for(const[H,z,U,G]of F){const Y=f.Util.bezierBoundingBox(...H,...z,...U,...G);R=Math.min(R,Y[0]),N=Math.min(N,Y[1]),I=Math.max(I,Y[2]),L=Math.max(L,Y[3])}return[R,N,I,L]}#N(){return this.#l?Math.ceil(this.thickness*this.parentScale):0}#w(R=!1){if(this.isEmpty())return;if(!this.#l){this.#b();return}const I=this.#I(),N=this.#N();this.#t=Math.max(y.AnnotationEditor.MIN_SIZE,I[2]-I[0]),this.#e=Math.max(y.AnnotationEditor.MIN_SIZE,I[3]-I[1]);const L=Math.ceil(N+this.#t*this.scaleFactor),F=Math.ceil(N+this.#e*this.scaleFactor),[H,z]=this.parentDimensions;this.width=L/H,this.height=F/z,this.setAspectRatio(L,F);const U=this.translationX,G=this.translationY;this.translationX=-I[0],this.translationY=-I[1],this.#_(),this.#b(),this.#d=L,this.#h=F,this.setDims(L,F);const Y=R?N/this.scaleFactor/2:0;this.translate(U-this.translationX-Y,G-this.translationY-Y)}static deserialize(R,I,N){if(R instanceof S.InkAnnotationElement)return null;const L=super.deserialize(R,I,N);L.thickness=R.thickness,L.color=f.Util.makeHexColor(...R.color),L.opacity=R.opacity;const[F,H]=L.pageDimensions,z=L.width*F,U=L.height*H,G=L.parentScale,Y=R.thickness/2;L.#l=!0,L.#d=Math.round(z),L.#h=Math.round(U);const{paths:K,rect:Z,rotation:J}=R;for(let{bezier:de}of K){de=C.#U(de,Z,J);const se=[];L.paths.push(se);let ne=G*(de[0]-Y),ge=G*(de[1]-Y);for(let we=2,Ie=de.length;we<Ie;we+=6){const Be=G*(de[we]-Y),Me=G*(de[we+1]-Y),Re=G*(de[we+2]-Y),Te=G*(de[we+3]-Y),Se=G*(de[we+4]-Y),oe=G*(de[we+5]-Y);se.push([[ne,ge],[Be,Me],[Re,Te],[Se,oe]]),ne=Se,ge=oe}const Ee=this.#F(se);L.bezierPath2D.push(Ee)}const te=L.#I();return L.#t=Math.max(y.AnnotationEditor.MIN_SIZE,te[2]-te[0]),L.#e=Math.max(y.AnnotationEditor.MIN_SIZE,te[3]-te[1]),L.#C(z,U),L}serialize(){if(this.isEmpty())return null;const R=this.getRect(0,0),I=y.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:f.AnnotationEditorType.INK,color:I,thickness:this.thickness,opacity:this.opacity,paths:this.#$(this.scaleFactor/this.parentScale,this.translationX,this.translationY,R),pageIndex:this.pageIndex,rect:R,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}}n.InkEditor=C}),((s,n,u)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.StampEditor=void 0;var f=u(1),y=u(4),S=u(6),A=u(29);class w extends y.AnnotationEditor{#e=null;#t=null;#n=null;#r=null;#o=null;#s=null;#a=null;#l=null;#c=!1;#i=!1;static _type="stamp";constructor(T){super({...T,name:"stampEditor"}),this.#r=T.bitmapUrl,this.#o=T.bitmapFile}static initialize(T){y.AnnotationEditor.initialize(T)}static get supportedTypes(){const T=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,f.shadow)(this,"supportedTypes",T.map(R=>`image/${R}`))}static get supportedTypesStr(){return(0,f.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(T){return this.supportedTypes.includes(T)}static paste(T,R){R.pasteEditor(f.AnnotationEditorType.STAMP,{bitmapFile:T.getAsFile()})}#f(T,R=!1){if(!T){this.remove();return}this.#e=T.bitmap,R||(this.#t=T.id,this.#c=T.isSvg),this.#p()}#d(){this.#n=null,this._uiManager.enableWaiting(!1),this.#s&&this.div.focus()}#h(){if(this.#t){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#t).then(R=>this.#f(R,!0)).finally(()=>this.#d());return}if(this.#r){const R=this.#r;this.#r=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(R).then(I=>this.#f(I)).finally(()=>this.#d());return}if(this.#o){const R=this.#o;this.#o=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(R).then(I=>this.#f(I)).finally(()=>this.#d());return}const T=document.createElement("input");T.type="file",T.accept=w.supportedTypesStr,this.#n=new Promise(R=>{T.addEventListener("change",async()=>{if(!T.files||T.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const I=await this._uiManager.imageManager.getFromFile(T.files[0]);this.#f(I)}R()}),T.addEventListener("cancel",()=>{this.remove(),R()})}).finally(()=>this.#d()),T.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#s?.remove(),this.#s=null,this.#a?.disconnect(),this.#a=null),super.remove()}rebuild(){if(!this.parent){this.#t&&this.#h();return}super.rebuild(),this.div!==null&&(this.#t&&this.#h(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(this.#n||this.#e||this.#r||this.#o)}get isResizable(){return!0}render(){if(this.div)return this.div;let T,R;if(this.width&&(T=this.x,R=this.y),super.render(),this.div.hidden=!0,this.#e?this.#p():this.#h(),this.width){const[I,N]=this.parentDimensions;this.setAt(T*I,R*N,this.width*I,this.height*N)}return this.div}#p(){const{div:T}=this;let{width:R,height:I}=this.#e;const[N,L]=this.pageDimensions,F=.75;if(this.width)R=this.width*N,I=this.height*L;else if(R>F*N||I>F*L){const G=Math.min(F*N/R,F*L/I);R*=G,I*=G}const[H,z]=this.parentDimensions;this.setDims(R*H/N,I*z/L),this._uiManager.enableWaiting(!1);const U=this.#s=document.createElement("canvas");T.append(U),T.hidden=!1,this.#m(R,I),this.#v(),this.#i||(this.parent.addUndoableEditor(this),this.#i=!0),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()}#y(T,R){const[I,N]=this.parentDimensions;this.width=T/I,this.height=R/N,this.setDims(T,R),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,this.#l!==null&&clearTimeout(this.#l);const L=200;this.#l=setTimeout(()=>{this.#l=null,this.#m(T,R)},L)}#g(T,R){const{width:I,height:N}=this.#e;let L=I,F=N,H=this.#e;for(;L>2*T||F>2*R;){const z=L,U=F;L>2*T&&(L=L>=16384?Math.floor(L/2)-1:Math.ceil(L/2)),F>2*R&&(F=F>=16384?Math.floor(F/2)-1:Math.ceil(F/2));const G=new OffscreenCanvas(L,F);G.getContext("2d").drawImage(H,0,0,z,U,0,0,L,F),H=G.transferToImageBitmap()}return H}#m(T,R){T=Math.ceil(T),R=Math.ceil(R);const I=this.#s;if(!I||I.width===T&&I.height===R)return;I.width=T,I.height=R;const N=this.#c?this.#e:this.#g(T,R),L=I.getContext("2d");L.filter=this._uiManager.hcmFilter,L.drawImage(N,0,0,N.width,N.height,0,0,T,R)}#u(T){if(T){if(this.#c){const I=this._uiManager.imageManager.getSvgUrl(this.#t);if(I)return I}const R=document.createElement("canvas");return{width:R.width,height:R.height}=this.#e,R.getContext("2d").drawImage(this.#e,0,0),R.toDataURL()}if(this.#c){const[R,I]=this.pageDimensions,N=Math.round(this.width*R*S.PixelsPerInch.PDF_TO_CSS_UNITS),L=Math.round(this.height*I*S.PixelsPerInch.PDF_TO_CSS_UNITS),F=new OffscreenCanvas(N,L);return F.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,N,L),F.transferToImageBitmap()}return structuredClone(this.#e)}#v(){this.#a=new ResizeObserver(T=>{const R=T[0].contentRect;R.width&&R.height&&this.#y(R.width,R.height)}),this.#a.observe(this.div)}static deserialize(T,R,I){if(T instanceof A.StampAnnotationElement)return null;const N=super.deserialize(T,R,I),{rect:L,bitmapUrl:F,bitmapId:H,isSvg:z,accessibilityData:U}=T;H&&I.imageManager.isValidId(H)?N.#t=H:N.#r=F,N.#c=z;const[G,Y]=N.pageDimensions;return N.width=(L[2]-L[0])/G,N.height=(L[3]-L[1])/Y,U&&(N.altTextData=U),N}serialize(T=!1,R=null){if(this.isEmpty())return null;const I={annotationType:f.AnnotationEditorType.STAMP,bitmapId:this.#t,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#c,structTreeParentId:this._structTreeParentId};if(T)return I.bitmapUrl=this.#u(!0),I.accessibilityData=this.altTextData,I;const{decorative:N,altText:L}=this.altTextData;if(!N&&L&&(I.accessibilityData={type:"Figure",alt:L}),R===null)return I;R.stamps||=new Map;const F=this.#c?(I.rect[2]-I.rect[0])*(I.rect[3]-I.rect[1]):null;if(!R.stamps.has(this.#t))R.stamps.set(this.#t,{area:F,serialized:I}),I.bitmap=this.#u(!1);else if(this.#c){const H=R.stamps.get(this.#t);F>H.area&&(H.area=F,H.serialized.bitmap.close(),H.serialized.bitmap=this.#u(!1))}return I}}n.StampEditor=w})],__webpack_module_cache__={};function __w_pdfjs_require__(s){var n=__webpack_module_cache__[s];if(n!==void 0)return n.exports;var u=__webpack_module_cache__[s]={exports:{}};return __webpack_modules__[s](u,u.exports,__w_pdfjs_require__),u.exports}var __webpack_exports__={};return(()=>{var s=__webpack_exports__;Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"AbortException",{enumerable:!0,get:function(){return n.AbortException}}),Object.defineProperty(s,"AnnotationEditorLayer",{enumerable:!0,get:function(){return S.AnnotationEditorLayer}}),Object.defineProperty(s,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return n.AnnotationEditorParamsType}}),Object.defineProperty(s,"AnnotationEditorType",{enumerable:!0,get:function(){return n.AnnotationEditorType}}),Object.defineProperty(s,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return A.AnnotationEditorUIManager}}),Object.defineProperty(s,"AnnotationLayer",{enumerable:!0,get:function(){return w.AnnotationLayer}}),Object.defineProperty(s,"AnnotationMode",{enumerable:!0,get:function(){return n.AnnotationMode}}),Object.defineProperty(s,"CMapCompressionType",{enumerable:!0,get:function(){return n.CMapCompressionType}}),Object.defineProperty(s,"DOMSVGFactory",{enumerable:!0,get:function(){return f.DOMSVGFactory}}),Object.defineProperty(s,"FeatureTest",{enumerable:!0,get:function(){return n.FeatureTest}}),Object.defineProperty(s,"GlobalWorkerOptions",{enumerable:!0,get:function(){return C.GlobalWorkerOptions}}),Object.defineProperty(s,"ImageKind",{enumerable:!0,get:function(){return n.ImageKind}}),Object.defineProperty(s,"InvalidPDFException",{enumerable:!0,get:function(){return n.InvalidPDFException}}),Object.defineProperty(s,"MissingPDFException",{enumerable:!0,get:function(){return n.MissingPDFException}}),Object.defineProperty(s,"OPS",{enumerable:!0,get:function(){return n.OPS}}),Object.defineProperty(s,"PDFDataRangeTransport",{enumerable:!0,get:function(){return u.PDFDataRangeTransport}}),Object.defineProperty(s,"PDFDateString",{enumerable:!0,get:function(){return f.PDFDateString}}),Object.defineProperty(s,"PDFWorker",{enumerable:!0,get:function(){return u.PDFWorker}}),Object.defineProperty(s,"PasswordResponses",{enumerable:!0,get:function(){return n.PasswordResponses}}),Object.defineProperty(s,"PermissionFlag",{enumerable:!0,get:function(){return n.PermissionFlag}}),Object.defineProperty(s,"PixelsPerInch",{enumerable:!0,get:function(){return f.PixelsPerInch}}),Object.defineProperty(s,"PromiseCapability",{enumerable:!0,get:function(){return n.PromiseCapability}}),Object.defineProperty(s,"RenderingCancelledException",{enumerable:!0,get:function(){return f.RenderingCancelledException}}),Object.defineProperty(s,"SVGGraphics",{enumerable:!0,get:function(){return u.SVGGraphics}}),Object.defineProperty(s,"UnexpectedResponseException",{enumerable:!0,get:function(){return n.UnexpectedResponseException}}),Object.defineProperty(s,"Util",{enumerable:!0,get:function(){return n.Util}}),Object.defineProperty(s,"VerbosityLevel",{enumerable:!0,get:function(){return n.VerbosityLevel}}),Object.defineProperty(s,"XfaLayer",{enumerable:!0,get:function(){return T.XfaLayer}}),Object.defineProperty(s,"build",{enumerable:!0,get:function(){return u.build}}),Object.defineProperty(s,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return n.createValidAbsoluteUrl}}),Object.defineProperty(s,"getDocument",{enumerable:!0,get:function(){return u.getDocument}}),Object.defineProperty(s,"getFilenameFromUrl",{enumerable:!0,get:function(){return f.getFilenameFromUrl}}),Object.defineProperty(s,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return f.getPdfFilenameFromUrl}}),Object.defineProperty(s,"getXfaPageViewport",{enumerable:!0,get:function(){return f.getXfaPageViewport}}),Object.defineProperty(s,"isDataScheme",{enumerable:!0,get:function(){return f.isDataScheme}}),Object.defineProperty(s,"isPdfFile",{enumerable:!0,get:function(){return f.isPdfFile}}),Object.defineProperty(s,"loadScript",{enumerable:!0,get:function(){return f.loadScript}}),Object.defineProperty(s,"noContextMenu",{enumerable:!0,get:function(){return f.noContextMenu}}),Object.defineProperty(s,"normalizeUnicode",{enumerable:!0,get:function(){return n.normalizeUnicode}}),Object.defineProperty(s,"renderTextLayer",{enumerable:!0,get:function(){return y.renderTextLayer}}),Object.defineProperty(s,"setLayerDimensions",{enumerable:!0,get:function(){return f.setLayerDimensions}}),Object.defineProperty(s,"shadow",{enumerable:!0,get:function(){return n.shadow}}),Object.defineProperty(s,"updateTextLayer",{enumerable:!0,get:function(){return y.updateTextLayer}}),Object.defineProperty(s,"version",{enumerable:!0,get:function(){return u.version}});var n=__w_pdfjs_require__(1),u=__w_pdfjs_require__(2),f=__w_pdfjs_require__(6),y=__w_pdfjs_require__(26),S=__w_pdfjs_require__(27),A=__w_pdfjs_require__(5),w=__w_pdfjs_require__(29),C=__w_pdfjs_require__(14),T=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf)),pdf.exports}var pdfExports=requirePdf();const __vite_import_meta_env__={},deepMerge=(s,n)=>{if(!n)return s;for(const u in n)n[u]instanceof Object&&u in s&&s[u]instanceof Object&&!Array.isArray(s[u])?deepMerge(s[u],n[u]):s[u]=n[u];return s},callEndpoint=async(s,n,u={})=>{const f=n.endpoints?.find(C=>C.name===s);if(!f)throw new Error(`Endpoint ${s} not found in configuration.`);const y=deepMerge({...f.payloadTemplate},u);if(f.handler){console.log(`Executing handler for ${s}`,y);try{let C=f.handler;if(typeof C=="string"&&typeof window<"u"){const T=C.split(".");let R=window;for(const I of T)R=R?.[I];if(typeof R=="function")C=R;else throw new Error(`Handler string "${f.handler}" did not resolve to a function.`)}if(typeof C=="function")return await C(y);throw new Error(`Handler for ${s} is not a function.`)}catch(C){throw new Error(`Handler for ${s} failed: ${C.message}`)}}if(!f.url)return console.log(`Executing virtual endpoint for ${s}`,y),y;let S=f.url;for(const C in y)S=S.replace(`{{${C}}}`,y[C]),S=S.replace(`:${C}`,y[C]);const A={method:f.method,headers:{"Content-Type":"application/json"},credentials:f.withCredentials?"include":void 0};f.method!=="GET"&&f.method!=="DELETE"&&(A.body=JSON.stringify(y));const w=await fetch(S,A);if(!w.ok)throw new Error(`API call to ${f.name} failed: ${w.statusText}`);return w.json()},buildSystemPrompt=(s,n,u,f,y)=>{const S=(n.endpoints||[]).map(R=>`- Tool Name: "${R.name}"
  Description: ${R.description}
  Payload Template: ${JSON.stringify(R.payloadTemplate)}`).join(`

`);let A="";y&&(A=`
DYNAMIC APPLICATION CONTEXT:
${y}
`),n.contextBindings&&(A+=`
Application Context Bindings:
`+n.contextBindings.map(R=>`${R.key}: ${JSON.stringify(R.data)}`).join(`
`)),u&&(A+=`

[CRITICAL] PREVIOUS TOOL EXECUTION RESULT:
${JSON.stringify(u,null,2)}

        `);const w=f.map(R=>`${R.sender.toUpperCase()}: ${R.text}`).join(`
`),C=n.agentName||"Neo Agent",T=n.systemRole||"a sophisticated AI assistant";return`You are ${C}, ${T}.
    
AVAILABLE TOOLS (API Endpoints):
${S}

CONTEXT DATA:
${A}

CONVERSATION HISTORY:
${w}

USER INPUT: "${s}"

INSTRUCTIONS:
1. Analyze the user's request using the provided Context Data and tool results.
2. If toolResult is present above, the action is ALREADY DONE. Summarize it naturally.
3. If no toolResult is present and the user asks for an action that matches a tool, you MUST request that action.
4. You MUST return your response as a valid JSON object.
5. JSON Structure:
{
  "message": "Your expert response",
  "action": {
    "name": "The Tool Name to call",
    "payload": { "key": "value" } 
  }
}
6. If no NEW tool is needed, omit the "action" field.
7. Be concise but helpful.`},parseLLMResponse=s=>{try{let n=s.replace(/```json/g,"").replace(/```/g,"").trim();return JSON.parse(n)}catch{return console.error("Failed to parse LLM JSON:",s),{message:s}}},callGemini=async(s,n,u)=>{const f=n.apiKey||__vite_import_meta_env__?.VITE_GEMINI_API_KEY;if(!f&&!n.baseUrl)throw new Error("Gemini API key is missing. Please provide it in the config or set VITE_GEMINI_API_KEY.");let y=n.baseUrl?`${n.baseUrl}/${n.model||"gemini-1.5-flash"}:generateContent?key=${f}`:`https://generativelanguage.googleapis.com/v1beta/models/${n.model||"gemini-1.5-flash"}:generateContent?key=${f}`;const S=[{text:s}];if(u){for(const w of u)if(w.base64Url&&(w.mimeType.startsWith("image/")||w.mimeType==="application/pdf")){const C=w.base64Url.split(",")[1];S.push({inlineData:{mimeType:w.mimeType,data:C}})}}const A=await fetch(y,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:S}],safetySettings:[{category:"HARM_CATEGORY_HARASSMENT",threshold:"BLOCK_NONE"},{category:"HARM_CATEGORY_HATE_SPEECH",threshold:"BLOCK_NONE"},{category:"HARM_CATEGORY_SEXUALLY_EXPLICIT",threshold:"BLOCK_NONE"},{category:"HARM_CATEGORY_DANGEROUS_CONTENT",threshold:"BLOCK_NONE"}]})});if(!A.ok){const w=new Error(`Gemini API error: ${A.statusText}`);throw w.status=A.status,w}return(await A.json()).candidates[0]?.content?.parts[0]?.text||"{}"},callClaude=async(s,n,u)=>{const f=n.baseUrl||"https://api.anthropic.com/v1/messages",y=n.apiKey||__vite_import_meta_env__?.VITE_CLAUDE_API_KEY;if(!y)throw new Error("Claude API key is missing. Please provide it in the config or set VITE_CLAUDE_API_KEY.");const S=[];if(u){for(const w of u)if(w.base64Url){const C=w.base64Url.split(",")[1];w.mimeType.startsWith("image/")?S.push({type:"image",source:{type:"base64",media_type:w.mimeType,data:C}}):w.mimeType==="application/pdf"&&S.push({type:"document",source:{type:"base64",media_type:"application/pdf",data:C}})}}S.push({type:"text",text:s});const A=await fetch(f,{method:"POST",headers:{"x-api-key":y,"anthropic-version":"2023-06-01","anthropic-dangerous-direct-browser-access":"true","content-type":"application/json"},body:JSON.stringify({model:n.model||__vite_import_meta_env__?.VITE_CLAUDE_MODEL||"claude-3-5-sonnet-20240620",max_tokens:1024,messages:[{role:"user",content:S}]})});if(!A.ok){const w=new Error(`Claude API error: ${A.statusText}`);throw w.status=A.status,w}return(await A.json()).content[0]?.text||"{}"},callXai=async(s,n,u,f,y,S,A)=>{const w=S.baseUrl||"https://api.x.ai/v1/chat/completions",C=S.apiKey;if(!C&&!w.includes("local-api")&&!w.includes("xai-api"))throw new Error("xAI API key is missing. Please provide it in the App config.");const T=[],R=n.agentName||"Neo Agent",I=n.systemRole||"a sophisticated AI assistant";let N=`You are ${R}, ${I}.`;y&&(N+=`
DYNAMIC APPLICATION CONTEXT:
${y}
`),n.contextBindings&&(N+=`
Application Context Bindings:
`+n.contextBindings.map(Y=>`${Y.key}: ${JSON.stringify(Y.data)}`).join(`
`)),T.push({role:"system",content:N});for(const Y of f){const K=[];K.push({type:"text",text:Y.text}),T.push({role:Y.sender==="user"?"user":"assistant",content:K})}let L=`USER INPUT: "${s}"`;u&&(L=`[SYSTEM MESSAGE]: The tool action you requested for the user's prompt ("${s}") has been completed.

TOOL RESULT DATA:
${JSON.stringify(u,null,2)}

CRITICAL INSTRUCTION: You MUST now summarize the above result for the user in conversational text. DO NOT call any tools. You are answering the user's prompt by explaining the result of the tool you just ran.`);const F=[];if(A)for(const Y of A)Y.base64Url&&Y.mimeType.startsWith("image/")&&F.push({type:"image_url",image_url:{url:Y.base64Url}});F.push({type:"text",text:L}),T.push({role:"user",content:F});const H=(n.endpoints||[]).map(Y=>{let K=Y.inputSchema;if(!K&&(K={type:"object",properties:{}},Y.payloadTemplate&&typeof Y.payloadTemplate=="object"))for(const Z of Object.keys(Y.payloadTemplate))K.properties[Z]={type:"string"};return{type:"function",function:{name:Y.name,description:Y.description||`Tool for ${Y.name}`,parameters:K}}}),z={model:S.model||"grok-4.20",messages:T,temperature:0,stream:!1};H.length>0&&(z.tools=H);const U=await fetch(w+(w.includes("chat/completions")?"":"/chat/completions"),{method:"POST",headers:{"Content-Type":"application/json",...C?{Authorization:`Bearer ${C}`}:{}},body:JSON.stringify(z)});if(!U.ok){const Y=new Error(`xAI API error: ${U.statusText}`);throw Y.status=U.status,Y}const G=(await U.json()).choices[0].message;if(G.tool_calls&&G.tool_calls.length>0){const Y=G.tool_calls[0],K={name:Y.function.name,payload:typeof Y.function.arguments=="string"?JSON.parse(Y.function.arguments):Y.function.arguments};return JSON.stringify({message:"Executing tool...",action:K})}return JSON.stringify({message:G.content})},callApiLlm=async(s,n,u)=>{const f=n.baseUrl||"http://localhost:3000/reason",y=await fetch(f,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:s,attachments:u})});if(!y.ok)throw new Error(`ApiLlm error: ${y.statusText}`);const S=await y.json();if(!S.success)throw new Error(`ApiLlm returned failure: ${JSON.stringify(S)}`);return S.data?.answer||"{}"},callApiLlmAgent=async(s,n,u,f,y,S,A)=>{const w=S.baseUrl||"http://localhost:3000/agent",C=[],T=n.agentName||"Neo Agent",R=n.systemRole||"a sophisticated AI assistant";let I=`You are ${T}, ${R}.`;y&&(I+=`
DYNAMIC APPLICATION CONTEXT:
${y}
`),n.contextBindings&&(I+=`
Application Context Bindings:
`+n.contextBindings.map(U=>`${U.key}: ${JSON.stringify(U.data)}`).join(`
`)),C.push({role:"system",content:I});for(const U of f){const G=[];G.push({type:"text",text:U.text}),C.push({role:U.sender==="user"?"user":"assistant",content:G})}let N=`USER INPUT: "${s}"`;u&&(N=`[SYSTEM MESSAGE]: The tool action you requested for the user's prompt ("${s}") has been completed.

TOOL RESULT DATA:
${JSON.stringify(u,null,2)}

CRITICAL INSTRUCTION: You MUST now summarize the above result for the user in conversational text. DO NOT call any tools. You are answering the user's prompt by explaining the result of the tool you just ran.`);const L=[];if(A)for(const U of A)if(U.isPdf&&U.file)try{const G=new FormData;G.append("file",U.file);const Y=n.endpoints?.[0]?.url?n.endpoints[0].url.replace(/\/[^/]+$/,"/upload"):"http://localhost:3000/upload",K=await fetch(Y,{method:"POST",body:G});if(K.ok){const Z=await K.json();if(Z.success&&Z.data&&Z.data.length>0){const J=Z.data[0];if(L.push({type:"text",text:`
[ATTACHED PDF DOCUMENT: ${U.name}]
${J.extractedText}
[END PDF DOCUMENT]
`}),J.images)for(const te of J.images)L.push({type:"image_url",image_url:{url:`data:image/jpeg;base64,${te}`}})}}else console.error("Failed to upload PDF:",K.statusText),L.push({type:"text",text:`
[FAILED TO READ ATTACHED PDF: ${U.name}]
`})}catch(G){console.error("Error uploading PDF:",G),L.push({type:"text",text:`
[ERROR READING ATTACHED PDF: ${U.name}]
`})}else U.base64Url&&U.mimeType.startsWith("image/")&&L.push({type:"image_url",image_url:{url:U.base64Url}});L.push({type:"text",text:N}),C.push({role:"user",content:L});const F=(n.endpoints||[]).map(U=>{let G=U.inputSchema;if(!G&&(G={type:"object",properties:{}},U.payloadTemplate&&typeof U.payloadTemplate=="object"))for(const Y of Object.keys(U.payloadTemplate))G.properties[Y]={type:"string"};return{type:"function",function:{name:U.name,description:U.description||`Tool for ${U.name}`,parameters:G}}}),H=await fetch(w,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:C,tools:F,prompt:s})});if(!H.ok)throw new Error(`ApiLlm error: ${H.statusText}`);const z=await H.json();if(!z.success)throw new Error(`ApiLlm returned failure: ${JSON.stringify(z)}`);return z.data?.answer||"{}"},callLLM=async(s,n,u,f=[],y,S,A=0)=>{(!n.llms||n.llms.length===0)&&(console.warn("No LLM providers configured. Defaulting to local api-llm."),n.llms=[{name:"Local API Agent",provider:"api-llm",apiKey:"",baseUrl:"http://localhost:3000/ask"}]);const w=buildSystemPrompt(s,n,u,f,y);let C;const T=A>=0&&A<n.llms.length?[n.llms[A]]:n.llms;for(const R of T)try{let I="";if(R.provider==="gemini")I=await callGemini(w,R,S);else if(R.provider==="claude")I=await callClaude(w,R,S);else if(R.provider==="xai")I=await callXai(s,n,u,f,y,R,S);else if(R.provider==="api-llm")R.baseUrl&&R.baseUrl.match(/\/agent(-neo)?$/)?I=await callApiLlmAgent(s,n,u,f,y,R,S):I=await callApiLlm(w,R,S);else continue;return parseLLMResponse(I)}catch(I){console.error(`Provider ${R.provider} failed:`,I),console.warn(`Provider ${R.provider} failed:`,I),C=I;continue}throw new Error(`All LLM providers failed. Last error: ${C?.message||"Unknown"}`)};pdfExports.GlobalWorkerOptions.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfExports.version}/pdf.worker.min.js`;const getSimilarity=(s,n)=>{const u=s.length<n.length?n:s,f=s.length<n.length?s:n;if(u.length===0)return 1;const y=(S,A)=>{const w=[];for(let C=0;C<=S.length;C++){let T=C;for(let R=0;R<=A.length;R++)if(C===0)w[R]=R;else if(R>0){let I=w[R-1];S.charAt(C-1)!==A.charAt(R-1)&&(I=Math.min(Math.min(I,T),w[R])+1),w[R-1]=T,T=I}C>0&&(w[A.length]=T)}return w[A.length]};return(u.length-y(u.toLowerCase(),f.toLowerCase()))/u.length},ChatWindow=({onClose:s,config:n,context:u,user:f,onStateChange:y,onAction:S,isMaximized:A,onToggleMaximize:w})=>{const C=reactExports.useRef(!1),[T,R]=reactExports.useState(()=>n.initialStepId?[]:[{id:"msg-initial",text:`Hey ${f?.name||"there"}! I'm ready to assist you.`,sender:"agent",timestamp:Date.now()}]),[I,N]=reactExports.useState(()=>{try{const We=localStorage.getItem("agent-neo-conversations");return We?JSON.parse(We):[]}catch{return[]}}),[L,F]=reactExports.useState(!1),[H,z]=reactExports.useState(!1),[U,G]=reactExports.useState(0),[Y,K]=reactExports.useState(()=>`conv-${Date.now()}`);reactExports.useEffect(()=>{T.some(We=>We.sender==="user")&&N(We=>{const Qe=We.findIndex(jt=>jt.id===Y),at=T.find(jt=>jt.sender==="user")?.text;let St="New Chat";at?St=at.substring(0,30)+(at.length>30?"...":""):We[Qe]&&We[Qe].title&&We[Qe].title!=="New Chat"&&(St=We[Qe].title);const Ct={id:Y,title:St,messages:[...T],timestamp:We[Qe]?.timestamp||Date.now(),llmIndex:U};if(Qe>=0){const jt=[...We];return jt[Qe]=Ct,jt}else return[Ct,...We]})},[T,Y,U]),reactExports.useEffect(()=>{localStorage.setItem("agent-neo-conversations",JSON.stringify(I))},[I]);const[Z,J]=reactExports.useState(""),[te,de]=reactExports.useState(!1),[se,ne]=reactExports.useState(!1),[ge,Ee]=reactExports.useState([]),we=reactExports.useRef(null);reactExports.useEffect(()=>{y&&y(te||se?"thinking":"active")},[te,se,y]);const[Ie,Be]=reactExports.useState(),[Me,Re]=reactExports.useState({}),[Te,Se]=reactExports.useState(null),[oe,ae]=reactExports.useState(!0),[be,he]=reactExports.useState(()=>localStorage.getItem("neo-theme")||"dark"),[ue,ye]=reactExports.useState(!1),ce=We=>{he(We),localStorage.setItem("neo-theme",We),ye(!1)},_e=reactExports.useRef(void 0),ke=reactExports.useRef(null),Pe=reactExports.useRef(null),$e=reactExports.useRef(null),xe=reactExports.useRef(!1),Ne=reactExports.useRef(null),je=reactExports.useCallback((We,Qe)=>{if(!We)return We;let at=We;at=at.replace(/\{\{\s*userName\s*\}\}/g,f?.name||"there"),at=at.replace(/\{\{\s*agentName\s*\}\}/g,n.agentName||"Neo");for(const Ct in Qe)at=at.replace(new RegExp(`\\{\\{\\s*${Ct}\\s*\\}\\}`,"g"),Qe[Ct]);const St=ke.current;return St&&(Array.isArray(St)?(at=at.replace(/\{\{\s*result\.length\s*\}\}/g,St.length.toString()),at=at.replace(/\{\{\s*result\[(\d+)\]\.(\w+)\s*\}\}/g,(Ct,jt,Gt)=>St[parseInt(jt)]&&St[parseInt(jt)][Gt]||"")):at=at.replace(/\{\{\s*result\.(\w+)\s*\}\}/g,(Ct,jt)=>St[jt]||"")),at},[f]),He=reactExports.useCallback((We,Qe,at)=>{R(St=>[...St,{id:`msg-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,text:We,sender:Qe,timestamp:Date.now(),attachments:at}])},[]),Ye=(We,Qe,at)=>{const St=Qe.split(".");let Ct=We;for(let jt=0;jt<St.length-1;jt++)Ct[St[jt]]||(Ct[St[jt]]={}),Ct=Ct[St[jt]];Ct[St[St.length-1]]=at},Je=reactExports.useCallback(async(We,Qe,at,St,Ct,jt=[],Gt={})=>{if(xe.current)return console.warn("Execution stopped by user."),null;if(jt.includes(We)){console.warn(`Tool recursion detected for ${We}. Skipping.`);return}const Ft=[...jt,We];de(!0);try{let ct=St?JSON.parse(JSON.stringify(St)):{};const st=Yt=>{if(typeof Yt=="string")return je(Yt,Me);if(typeof Yt=="object"&&Yt!==null)for(const ht in Yt)Yt[ht]=st(Yt[ht]);return Yt};ct=st(ct),at&&Qe!==void 0?Ye(ct,at,Qe):Qe!==void 0&&!at&&(ct={...ct,type:Qe});let nt=await callEndpoint(We,n,ct),At;if(nt&&nt.content&&Array.isArray(nt.content)&&nt.content[0]?.type==="text")try{const Yt=JSON.parse(nt.content[0].text);Yt&&Yt.screenshot&&(At=[{id:`screenshot-${Date.now()}`,name:"screenshot.png",file:new File([""],"screenshot.png",{type:"image/png"}),base64Url:Yt.screenshot,mimeType:"image/png"}],delete Yt.screenshot,nt={...nt,content:[{...nt.content[0],text:JSON.stringify(Yt)},...nt.content.slice(1)]})}catch{}else nt&&nt.screenshot&&(At=[{id:`screenshot-${Date.now()}`,name:"screenshot.png",file:new File([""],"screenshot.png",{type:"image/png"}),base64Url:nt.screenshot,mimeType:"image/png"}],nt={...nt},delete nt.screenshot);if(Se(nt),ke.current=nt,S&&S(We,nt||ct),Ct){const Yt={...Gt,[We]:nt},ht=u?`${u}
Result Context: ${JSON.stringify(Yt).substring(0,1e3)}...`:void 0,Tt=await callLLM(Ct,n,Yt,T,ht,At,U);if(He(Tt.message,"agent",At),Tt.action&&await Je(Tt.action.name,void 0,void 0,Tt.action.payload,Ct,Ft,Yt),We==="generateReportPdf"&&(Be({id:"activity_log_suggestion",message:"",options:[{label:"Show activity log",actionType:"link",externalLink:"/settings/activity-log"}]}),ae(!0)),We==="createReport"){const Kt=nt?.id||nt?.reportId;Be({id:"post_create_suggestion",message:"",options:[{label:"Open Report",triggerAction:"openReport",actionType:"api",value:Kt,payloadKey:"id"},{label:"Manage Access/Permissions",triggerAction:"manageAccess",actionType:"api",value:Kt,payloadKey:"id"}]}),ae(!0)}}else He(" Action completed successfully!","agent");return nt}catch(ct){return He(` Action failed: ${ct.message}`,"agent"),null}finally{de(!1)}},[n,T,Me,He,je,S,u]),ot=reactExports.useCallback((We,Qe={})=>{We==="stop_flow"?(xe.current=!0,ne(!1)):(We==="win_start"||We==="assist_start")&&(xe.current=!1);const at={...Me,...Qe};Re(at);const St=n.workflow?.find(Ct=>Ct.id===We);if(St){if(St.skipIf)try{if(at[St.skipIf.replace("workflowState.","")]){console.log(`Skipping step ${We} because ${St.skipIf} is present.`);const Gt=St.options?.[0]?.nextStepId;if(Gt){ot(Gt,at);return}}}catch(Gt){console.warn("Skip evaluation failed:",Gt)}const Ct=JSON.parse(JSON.stringify(St)),jt=ke.current;if(Ct.useResultsAsOptions&&Array.isArray(jt)){const Gt=Ct.dynamicOptionsConfig;if(Gt){const Ft=jt.map(ct=>({label:ct[Gt.labelKey],value:ct[Gt.valueKey],nextStepId:Gt.nextStepId,triggerAction:Gt.triggerAction,actionType:Gt.actionType,payloadKey:Gt.payloadKey,fixedPayload:Gt.fixedPayload}));Ct.options=[...Ct.options||[],...Ft]}}Ct.options&&(Ct.options=Ct.options.map(Gt=>({...Gt,label:je(Gt.label,at),value:typeof Gt.value=="string"?je(Gt.value,at):Gt.value,externalLink:Gt.externalLink?je(Gt.externalLink,at):void 0}))),Be(Ct),_e.current=Ct,ae(!0),He(je(St.message,at),"agent")}},[n.workflow,Me,He,je]);reactExports.useEffect(()=>{n.initialStepId&&!C.current&&(C.current=!0,ot(n.initialStepId))},[n.initialStepId,ot]),reactExports.useEffect(()=>{if(Ie){if(Pe.current!==Ie.id&&(Pe.current=null),Ie.triggerAction&&!Ie.inputTarget&&Ie.actionType==="api"){if(Pe.current===Ie.id)return;Pe.current=Ie.id,(async()=>{if(xe.current||(Ie.delay&&await new Promise(Qe=>setTimeout(Qe,Ie.delay)),xe.current))return;const We=await Je(Ie.triggerAction,void 0,Ie.payloadKey,Ie.fixedPayload);if(xe.current){console.log("Stop signal detected after execution. Aborting auto-advance.");return}We&&We.nextStepId?pt(We.nextStepId,500):Ie.nextStepId&&pt(Ie.nextStepId,500)})()}else if(!Ie.triggerAction&&!Ie.inputTarget&&Ie.nextStepId&&(!Ie.options||Ie.options.length===0)){if(Pe.current===Ie.id)return;Pe.current=Ie.id;const We=Ie.delay||1e3;if(xe.current)return;pt(Ie.nextStepId,We)}}},[Ie,Je,ot]),reactExports.useEffect(()=>{Ne.current&&(Ne.current.scrollTop=Ne.current.scrollHeight)},[T,te,oe,A]);const ze=()=>{$e.current&&(clearTimeout($e.current),$e.current=null),ne(!1)},pt=(We,Qe=500,at={})=>{if(xe.current){console.log("Attempted to schedule auto-advance while stopped. Ignoring.");return}ze(),ne(!0),$e.current=setTimeout(()=>{xe.current||ot(We,at)},Qe)},yt=async()=>{console.log("Stopping auto-play..."),xe.current=!0,ze(),ne(!1),de(!1),await qe("stop")},ut=async(We,Qe=!1)=>{if(ze(),xe.current=!1,(_e.current||Ie)?.inputTarget){const at=We.value!==void 0?We.value:We.label;await qe(at);return}if(Qe||He(We.label,"user"),ae(!1),We.triggerAction&&We.actionType==="api"?await Je(We.triggerAction,We.value,We.payloadKey,We.fixedPayload):We.actionType==="whatsapp"?(window.open(`https://wa.me/${We.externalLink||"573025688681"}`,"_blank"),He("Opening WhatsApp to connect you with our help desk... ","agent")):We.actionType==="link"&&We.externalLink&&window.open(We.externalLink,"_blank"),We.nextStepId){const at={};if(We.payloadKey&&We.value!==void 0&&(at[We.payloadKey]=typeof We.value=="string"?je(We.value,Me):We.value),We.stateUpdate)for(const St in We.stateUpdate){const Ct=We.stateUpdate[St];at[St]=typeof Ct=="string"?je(Ct,Me):Ct}pt(We.nextStepId,400,at)}else We.value&&!We.triggerAction&&await qe(We.value,!0,!0)},Et=()=>{if(ze(),n.frequentAction){ut(n.frequentAction);return}const We=n.actionLabel||"Create Report";J(We),qe(We)};reactExports.useEffect(()=>()=>{T.forEach(We=>{We.attachments?.forEach(Qe=>{Qe.thumbnailUrl?.startsWith("blob:")&&URL.revokeObjectURL(Qe.thumbnailUrl)})})},[]);const qe=async(We,Qe=!1,at=!1)=>{if(te)return;de(!0),ze();const St=We||Z;if(!St.trim()&&ge.length===0)return;const Ct=St.trim(),jt=[];if(!at){for(const Gt of ge)if(Gt.file){const Ft=Gt.mimeType.startsWith("image/")?URL.createObjectURL(Gt.file):void 0;jt.push({...Gt,thumbnailUrl:Ft})}else jt.push(Gt);R(Gt=>[...Gt,{id:`msg-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,text:Ct,sender:"user",timestamp:Date.now(),attachments:jt.length>0?jt:void 0}])}We||(J(""),Ee([])),de(!0);try{const Gt=_e.current||Ie;if(console.log("Checking input capture:",{currentStepId:Gt?.id,inputTarget:Gt?.inputTarget,userInput:Ct}),Gt&&Gt.inputTarget){const ct={...Me,[Gt.inputTarget]:Ct};if(Re(ct),console.log("Input saved, checking actions...",Gt.triggerAction),Gt.triggerAction&&Gt.actionType==="api"){const st=Ct;await Je(Gt.triggerAction,st,Gt.payloadKey,Gt.fixedPayload,void 0)}de(!1),Gt.nextStepId&&ot(Gt.nextStepId,{[Gt.inputTarget]:Ct});return}const Ft=Ct.toLowerCase();if(Gt?.options&&!Qe){for(const ct of Gt.options)if(getSimilarity(Ft,ct.label.toLowerCase())>=.95){de(!1),ut(ct,!0);return}}if(n.intents){let ct={intent:null,score:0};for(const st of n.intents){if(st.extractors&&st.extractors.length>0&&st.extractors.every(nt=>new RegExp(nt.regex,"i").test(Ct))){ct={intent:st,score:1.1};break}for(const nt of st.keywords){const At=getSimilarity(Ft,nt.toLowerCase());At>=.95&&At>ct.score&&(ct={intent:st,score:At})}}if(ct.intent){const st=ct.intent;let nt={};st.extractors&&st.extractors.forEach(At=>{const Yt=Ct.match(new RegExp(At.regex,"i"));Yt&&Yt[1]&&(nt[At.key]=Yt[1].trim())}),de(!1),ot(st.nextStepId,nt);return}}if(n.llms&&n.llms.length>0){const ct=u?`${u}
${Object.entries(Me).map(([At,Yt])=>`${At}: ${Yt}`).join(`
`)}`:void 0,st=[];for(const At of ge)if(At.file){const Yt=await new Promise((ht,Tt)=>{const Kt=new FileReader;Kt.onload=()=>ht(Kt.result),Kt.onerror=Tt,Kt.readAsDataURL(At.file)});st.push({...At,base64Url:Yt})}else st.push(At);const nt=await callLLM(Ct,n,Te,T,ct,st,U);de(!1),He(nt.message,"agent"),nt.action&&Je(nt.action.name,void 0,void 0,nt.action.payload,Ct,[]);return}if(n.intents){let ct={intent:null,score:0};const st=Ct.toLowerCase();for(const nt of n.intents){let At=0;for(const Yt of nt.keywords)st.includes(Yt.toLowerCase())&&At++;At>ct.score&&(ct={intent:nt,score:At})}if(ct.score>0&&ct.intent){const nt=ct.intent;let At={};nt.extractors&&nt.extractors.forEach(Yt=>{const ht=Ct.match(new RegExp(Yt.regex,"i"));ht&&ht[1]&&(At[Yt.key]=ht[1].trim())}),de(!1),ot(nt.nextStepId,At);return}}de(!1),n.fallbackStepId?ot(n.fallbackStepId):He("I'm sorry, I couldn't find a specific action for that. Can you try rephrasing?","agent")}catch(Gt){console.error(Gt),de(!1),He("I encountered an error while processing your request. Please try again later.","agent")}},Le=()=>{K(`conv-${Date.now()}`),R(()=>n.initialStepId?[]:[{id:`msg-initial-${Date.now()}`,text:`Hey ${f?.name||"there"}! I'm ready to assist you.`,sender:"agent",timestamp:Date.now()}]),J(""),n.initialStepId&&ot(n.initialStepId)},lt=We=>{const Qe=I.find(at=>at.id===We);Qe&&(K(Qe.id),R(Qe.messages),Qe.llmIndex!==void 0&&G(Qe.llmIndex),F(!1))};return jsxRuntimeExports.jsxs("div",{className:`chat-container glass-morphism-dark agent-neo-font ${A?"maximized":""}`,"data-theme":be,children:[jsxRuntimeExports.jsxs("div",{className:"chat-header",children:[jsxRuntimeExports.jsxs("div",{className:"header-info",children:[jsxRuntimeExports.jsx("div",{className:"status-indicator"}),jsxRuntimeExports.jsx("span",{className:"header-title",children:n.agentName||"Neo Agent"})]}),jsxRuntimeExports.jsxs("div",{className:"header-controls",children:[(se||te)&&n.showStopButton&&jsxRuntimeExports.jsx("button",{onClick:yt,className:"p-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-full transition-colors",title:"Stop Auto-Play / Cancel",children:jsxRuntimeExports.jsx(Square,{size:18,fill:"currentColor"})}),w&&jsxRuntimeExports.jsx("button",{onClick:w,className:"close-btn",title:A?"Restore":"Maximize",style:{marginRight:"4px"},children:A?jsxRuntimeExports.jsx(Minimize,{size:18}):jsxRuntimeExports.jsx(Maximize,{size:18})}),jsxRuntimeExports.jsx("button",{onClick:Le,className:"close-btn",title:"Start a new chat",children:jsxRuntimeExports.jsx(Plus,{size:18})}),jsxRuntimeExports.jsxs("div",{className:"theme-selector-container",children:[jsxRuntimeExports.jsx("button",{onClick:()=>{F(!L),ye(!1),z(!1)},className:"close-btn",title:"Conversation History",children:jsxRuntimeExports.jsx(Clock$1,{size:18})}),jsxRuntimeExports.jsx(AnimatePresence,{children:L&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:-5,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-5,scale:.95},className:"theme-dropdown",style:{minWidth:"220px",maxHeight:"300px",overflowY:"auto"},children:[jsxRuntimeExports.jsx("span",{className:"theme-label",children:"History"}),I.length===0?jsxRuntimeExports.jsx("div",{style:{padding:"8px 12px",fontSize:"12px",color:"var(--text-secondary)"},children:"No previous chats."}):I.map(We=>jsxRuntimeExports.jsxs("button",{onClick:()=>lt(We.id),className:"theme-option",style:{display:"flex",flexDirection:"column",alignItems:"flex-start",padding:"8px 12px"},children:[jsxRuntimeExports.jsx("span",{style:{fontSize:"13px",fontWeight:500},children:We.title}),jsxRuntimeExports.jsxs("span",{style:{fontSize:"11px",color:"var(--text-secondary)"},children:[new Date(We.timestamp).toLocaleDateString()," ",new Date(We.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]},We.id))]})})]}),n.llms&&n.llms.length>0&&jsxRuntimeExports.jsxs("div",{className:"theme-selector-container",children:[jsxRuntimeExports.jsx("button",{onClick:()=>{z(!H),ye(!1),F(!1)},className:"close-btn",title:"Select LLM Provider",children:jsxRuntimeExports.jsx(User,{size:18})}),jsxRuntimeExports.jsx(AnimatePresence,{children:H&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:-5,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-5,scale:.95},className:"theme-dropdown",children:[jsxRuntimeExports.jsx("span",{className:"theme-label",children:"Agent Brain"}),n.llms.map((We,Qe)=>jsxRuntimeExports.jsxs("button",{onClick:()=>{G(Qe),z(!1)},className:"theme-option",style:{opacity:U===Qe?1:.7},children:[jsxRuntimeExports.jsx("div",{className:"theme-color-indicator",style:{background:U===Qe?"#10b981":"transparent",border:U===Qe?"none":"1px solid var(--border-color)"}}),jsxRuntimeExports.jsxs("span",{children:["Agent ",String.fromCharCode(65+Qe)]})]},Qe))]})})]}),jsxRuntimeExports.jsxs("div",{className:"theme-selector-container",children:[jsxRuntimeExports.jsx("button",{onClick:()=>ye(!ue),className:"close-btn",title:"Change Theme",children:jsxRuntimeExports.jsx(Palette,{size:18})}),jsxRuntimeExports.jsx(AnimatePresence,{children:ue&&jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:-5,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-5,scale:.95},className:"theme-dropdown",children:[jsxRuntimeExports.jsx("span",{className:"theme-label",children:"Theme"}),[{id:"dark",label:"Dark Moon",color:"#1f2937"},{id:"light",label:"Light Day",color:"#ffffff"},{id:"glass",label:"Pure Glass",color:"#e5e7eb"}].map(We=>jsxRuntimeExports.jsxs("button",{onClick:()=>ce(We.id),className:"theme-option",children:[jsxRuntimeExports.jsx("div",{className:"theme-color-indicator",style:{background:We.color}}),jsxRuntimeExports.jsx("span",{children:We.label})]},We.id))]})})]}),jsxRuntimeExports.jsx("button",{onClick:s,className:"close-btn",children:jsxRuntimeExports.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[jsxRuntimeExports.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),jsxRuntimeExports.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]})]}),jsxRuntimeExports.jsxs("div",{ref:Ne,className:"messages-container",children:[T.map(We=>jsxRuntimeExports.jsxs("div",{className:`message ${We.sender==="user"?"user-message":"agent-message"}`,children:[We.attachments&&We.attachments.length>0&&jsxRuntimeExports.jsx("div",{className:"message-attachments",style:{display:"flex",gap:"8px",flexWrap:"wrap",marginBottom:"8px"},children:We.attachments.map(Qe=>jsxRuntimeExports.jsx("div",{style:{maxWidth:"200px",borderRadius:"8px",overflow:"hidden"},children:Qe.mimeType.startsWith("image/")||Qe.thumbnailUrl?jsxRuntimeExports.jsxs("div",{style:{position:"relative"},children:[jsxRuntimeExports.jsx("img",{src:Qe.thumbnailUrl||Qe.base64Url,alt:Qe.name,style:{width:"100%",height:"auto",display:"block"}}),Qe.isPdf&&jsxRuntimeExports.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,background:"rgba(0,0,0,0.6)",color:"white",fontSize:"10px",padding:"2px 4px",textAlign:"center"},children:"PDF Document"})]}):jsxRuntimeExports.jsxs("div",{style:{padding:"8px",background:"rgba(0,0,0,0.1)",fontSize:"12px"},children:[" ",Qe.name]})},Qe.id))}),We.sender==="user"?jsxRuntimeExports.jsx("div",{style:{wordBreak:"break-word",whiteSpace:"pre-wrap"},children:We.text}):jsxRuntimeExports.jsx("div",{className:"msg-markdown",style:{fontSize:"14px",lineHeight:"1.6",width:"100%",overflowX:"auto"},children:jsxRuntimeExports.jsx(Markdown,{remarkPlugins:[remarkGfm],components:{code({node:Qe,inline:at,className:St,children:Ct,...jt}){const Gt=/language-(\w+)/.exec(St||"");return at?jsxRuntimeExports.jsx("code",{className:St,...jt,style:{background:"rgba(128,128,128,0.25)",padding:"2px 4px",borderRadius:"4px",fontFamily:"monospace",fontSize:"0.9em"},children:Ct}):jsxRuntimeExports.jsx(highlighter,{...jt,style:vscDarkPlus,language:Gt?Gt[1]:"text",PreTag:"div",customStyle:{borderRadius:"6px",margin:"8px 0",fontSize:"13px",background:"#1e1e1e"},children:String(Ct).replace(/\n$/,"")})},p:({node:Qe,...at})=>jsxRuntimeExports.jsx("p",{style:{margin:"8px 0"},...at}),ul:({node:Qe,...at})=>jsxRuntimeExports.jsx("ul",{style:{paddingLeft:"20px",margin:"8px 0",listStyleType:"disc"},...at}),ol:({node:Qe,...at})=>jsxRuntimeExports.jsx("ol",{style:{paddingLeft:"20px",margin:"8px 0",listStyleType:"decimal"},...at}),li:({node:Qe,...at})=>jsxRuntimeExports.jsx("li",{style:{marginBottom:"4px"},...at}),a:({node:Qe,...at})=>jsxRuntimeExports.jsx("a",{style:{color:"#3b82f6",textDecoration:"underline"},target:"_blank",rel:"noopener noreferrer",...at})},children:We.text})})]},We.id)),te&&jsxRuntimeExports.jsxs("div",{className:"typing-indicator",children:[jsxRuntimeExports.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"animate-spin",children:[jsxRuntimeExports.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"6"}),jsxRuntimeExports.jsx("line",{x1:"12",y1:"18",x2:"12",y2:"22"}),jsxRuntimeExports.jsx("line",{x1:"4.93",y1:"4.93",x2:"7.76",y2:"7.76"}),jsxRuntimeExports.jsx("line",{x1:"16.24",y1:"16.24",x2:"19.07",y2:"19.07"}),jsxRuntimeExports.jsx("line",{x1:"2",y1:"12",x2:"6",y2:"12"}),jsxRuntimeExports.jsx("line",{x1:"18",y1:"12",x2:"22",y2:"12"}),jsxRuntimeExports.jsx("line",{x1:"4.93",y1:"19.07",x2:"7.76",y2:"16.24"}),jsxRuntimeExports.jsx("line",{x1:"16.24",y1:"7.76",x2:"19.07",y2:"4.93"})]}),jsxRuntimeExports.jsxs("span",{children:[n.agentName||"Neo "," is thinking..."]})]}),jsxRuntimeExports.jsx(AnimatePresence,{children:Ie?.options&&oe&&!te&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"options-container",children:Ie.options.map((We,Qe)=>jsxRuntimeExports.jsx("button",{className:"option-pill",onClick:()=>ut(We),children:We.label},Qe))})}),n.showFrequentActions&&jsxRuntimeExports.jsxs("div",{className:"actions-suggestion",children:[jsxRuntimeExports.jsx("span",{className:"actions-label",children:"Frequent Actions"}),jsxRuntimeExports.jsxs("button",{className:"action-button",onClick:Et,children:[jsxRuntimeExports.jsx("span",{style:{marginRight:"8px"},children:""}),n.frequentAction?.label||n.actionLabel||"Create Report"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"input-area-container",style:{display:"flex",flexDirection:"column",gap:"8px",padding:"10px 15px",borderTop:"1px solid var(--border-color)",background:"var(--bg-secondary)"},children:[ge.length>0&&jsxRuntimeExports.jsx("div",{className:"attachment-preview-bar",style:{display:"flex",gap:"8px",overflowX:"auto",paddingBottom:"4px"},children:ge.map(We=>jsxRuntimeExports.jsxs("div",{style:{position:"relative",width:"60px",height:"60px",borderRadius:"8px",overflow:"hidden",border:"1px solid var(--border-color)"},children:[We.thumbnailUrl?jsxRuntimeExports.jsx("img",{src:We.thumbnailUrl,alt:"preview",style:{width:"100%",height:"100%",objectFit:"cover"}}):We.file&&We.mimeType.startsWith("image/")?jsxRuntimeExports.jsx("img",{src:URL.createObjectURL(We.file),alt:"preview",style:{width:"100%",height:"100%",objectFit:"cover"}}):jsxRuntimeExports.jsx("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",background:"var(--bg-tertiary)",fontSize:"24px"},children:""}),jsxRuntimeExports.jsx("button",{onClick:()=>Ee(Qe=>Qe.filter(at=>at.id!==We.id)),style:{position:"absolute",top:"2px",right:"2px",background:"rgba(0,0,0,0.5)",color:"white",border:"none",borderRadius:"50%",padding:"2px",cursor:"pointer"},children:jsxRuntimeExports.jsx(X$1,{size:12})})]},We.id))}),jsxRuntimeExports.jsxs("div",{className:"input-area",style:{padding:0,border:"none",background:"transparent"},children:[jsxRuntimeExports.jsx("button",{onClick:()=>we.current?.click(),className:"attach-btn",style:{padding:"8px",color:"var(--text-secondary)",background:"transparent",border:"none",cursor:"pointer"},title:"Attach file",children:jsxRuntimeExports.jsx(Paperclip,{size:20})}),jsxRuntimeExports.jsx("input",{type:"file",multiple:!0,ref:we,style:{display:"none"},accept:"image/*,application/pdf,text/plain",onChange:async We=>{if(We.target.files){const Qe=Array.from(We.target.files),at=[];for(const St of Qe){const Ct={id:`att-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,file:St,mimeType:St.type,name:St.name,thumbnailUrl:St.type.startsWith("image/")?URL.createObjectURL(St):void 0};if(St.type==="application/pdf"){Ct.isPdf=!0;try{const jt=await St.arrayBuffer(),Gt=await(await pdfExports.getDocument({data:jt}).promise).getPage(1),Ft=Gt.getViewport({scale:1}),ct=document.createElement("canvas"),st=ct.getContext("2d");ct.height=Ft.height,ct.width=Ft.width,st&&(await Gt.render({canvasContext:st,viewport:Ft}).promise,Ct.thumbnailUrl=ct.toDataURL("image/jpeg",.8))}catch(jt){console.error("PDF Thumbnail Generation Failed:",jt)}}at.push(Ct)}Ee(St=>[...St,...at])}We.target.value=""}}),jsxRuntimeExports.jsx("input",{type:"text",value:Z,onChange:We=>J(We.target.value),onKeyPress:We=>We.key==="Enter"&&qe(),placeholder:"Type a message...",className:"chat-input"}),jsxRuntimeExports.jsx("button",{onClick:()=>qe(),className:"send-btn",disabled:te,children:jsxRuntimeExports.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[jsxRuntimeExports.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),jsxRuntimeExports.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]})})]})]})]})},styles='@import"https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600&display=swap";:root{--agent-primary: #6366f1;--agent-primary-hover: #4f46e5;--agent-bg: rgba(17, 24, 39, .8);--agent-text: #ffffff;--agent-text-secondary: #9ca3af;--agent-border: rgba(255, 255, 255, .1);--agent-shadow: 0 8px 32px 0 rgba(31, 38, 135, .37);--agent-msg-bg: rgba(255, 255, 255, .05);--agent-input-bg: rgba(255, 255, 255, .05);--agent-pill-bg: rgba(99, 102, 241, .1);--agent-pill-text: #818cf8;--agent-pill-border: rgba(99, 102, 241, .3)}[data-theme=light]{--agent-primary: #4f46e5;--agent-primary-hover: #4338ca;--agent-bg: rgba(255, 255, 255, .85);--agent-text: #1f2937;--agent-text-secondary: #6b7280;--agent-border: rgba(0, 0, 0, .1);--agent-shadow: 0 8px 32px 0 rgba(0, 0, 0, .1);--agent-msg-bg: rgba(0, 0, 0, .05);--agent-input-bg: rgba(0, 0, 0, .05);--agent-pill-bg: rgba(79, 70, 229, .1);--agent-pill-text: #4f46e5;--agent-pill-border: rgba(79, 70, 229, .2)}[data-theme=glass]{--agent-primary: #2563eb;--agent-primary-hover: #1d4ed8;--agent-bg: rgba(255, 255, 255, .3);--agent-text: #111827;--agent-text-secondary: #4b5563;--agent-border: rgba(255, 255, 255, .3);--agent-shadow: 0 8px 32px 0 rgba(0, 0, 0, .1);--agent-msg-bg: rgba(255, 255, 255, .4);--agent-input-bg: rgba(255, 255, 255, .4);--agent-pill-bg: rgba(37, 99, 235, .1);--agent-pill-text: #2563eb;--agent-pill-border: rgba(37, 99, 235, .2)}.agent-neo-font{font-family:Outfit,sans-serif}.glass-morphism-dark{background:var(--agent-bg);backdrop-filter:blur(20px) saturate(180%);-webkit-backdrop-filter:blur(20px) saturate(180%);border:1px solid var(--agent-border);box-shadow:var(--agent-shadow);border-radius:16px;color:var(--agent-text)}.send-btn{background-color:var(--agent-primary);border:none;border-radius:12px;width:40px;height:40px;flex:0 0 40px;display:flex!important;align-items:center!important;justify-content:center!important;padding:0!important;color:#fff;cursor:pointer;transition:background-color .2s}.chat-container{position:fixed;bottom:100px;right:24px;width:380px;height:500px;display:flex;flex-direction:column;z-index:9998;overflow:hidden;transition:all .3s ease}.chat-container.maximized{width:600px;max-width:90vw;height:80vh;top:110px;bottom:auto;right:24px}.chat-header{padding:16px;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid var(--agent-border)}.header-info{display:flex;align-items:center;gap:8px}.status-indicator{width:8px;height:8px;border-radius:50%;background:#10b981}.header-title{color:var(--agent-text);font-weight:600}.close-btn{background:none;border:none;color:var(--agent-text-secondary);cursor:pointer;transition:color .2s;padding:4px;border-radius:50%;display:flex;align-items:center;justify-content:center}.close-btn:hover{color:var(--agent-text);background:#ffffff1a}.header-controls{display:flex!important;flex-direction:row!important;align-items:center!important;gap:8px!important}.theme-selector-container{position:relative}.theme-dropdown{position:absolute;top:100%;right:0;margin-top:8px;min-width:150px;display:flex;flex-direction:column;gap:4px;padding:8px;border-radius:12px;background:var(--agent-bg);backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border:1px solid var(--agent-border);box-shadow:0 10px 25px #0003;z-index:10000;transform-origin:top right}.theme-label{font-size:10px;text-transform:uppercase;letter-spacing:.05em;opacity:.6;margin-bottom:4px;padding-left:8px;color:var(--agent-text)}.theme-option{display:flex;align-items:center;gap:12px;padding:8px 12px;width:100%;border:none;background:none;color:var(--agent-text);font-size:13px;font-weight:500;cursor:pointer;border-radius:8px;text-align:left;transition:background .2s}.theme-option:hover{background:#7d7d7d26}.theme-color-indicator{width:16px;height:16px;border-radius:50%;border:1px solid rgba(0,0,0,.1);flex-shrink:0}.messages-container{flex:1;overflow-y:auto;padding:16px;display:flex;flex-direction:column;gap:12px}.message{max-width:80%;padding:10px 14px;border-radius:12px;color:var(--agent-text);font-size:14px;box-shadow:0 2px 4px #0000000d;white-space:pre-wrap}.user-message{align-self:flex-end;background-color:var(--agent-primary);color:#fff}.agent-message{align-self:flex-start;background-color:var(--agent-msg-bg)}.typing-indicator{align-self:flex-start;color:var(--agent-text-secondary);font-size:12px;display:flex;align-items:center;gap:8px}.options-container{display:flex;flex-wrap:wrap;gap:8px;padding:4px 0}.option-pill{background:var(--agent-pill-bg);border:1px solid var(--agent-pill-border);color:var(--agent-pill-text);padding:6px 14px;border-radius:20px;font-size:13px;cursor:pointer;transition:all .2s ease}.option-pill:hover{filter:brightness(1.1);transform:translateY(-1px)}.input-area{padding:16px;display:flex;gap:8px}.chat-input{flex:1;background-color:var(--agent-input-bg);border:1px solid var(--agent-border);border-radius:12px;padding:10px 16px;color:var(--agent-text);outline:none;transition:border-color .2s}.chat-input:focus{border-color:var(--agent-primary)}.send-btn:hover{background-color:var(--agent-primary-hover)}.send-btn:disabled{opacity:.5;cursor:not-allowed}.floating-avatar{position:fixed;bottom:24px;right:24px;width:64px;height:64px;cursor:pointer;z-index:9999;transition:all .3s ease}.floating-avatar.maximized{bottom:auto;top:24px;right:24px}.floating-avatar:hover{transform:scale(1.1)}.glass-morphism{background:#ffffffb3;backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px);border:1px solid rgba(255,255,255,.2);box-shadow:0 8px 32px #1f26875e;border-radius:16px}.greeting-bubble{position:fixed!important;bottom:100px!important;right:24px!important;max-width:250px;padding:12px 16px;border-radius:12px 12px 4px;color:#1f2937;font-size:14px;z-index:9998;pointer-events:none}.actions-suggestion{margin-top:16px;padding:0 4px}.actions-label{display:block;font-size:12px;color:var(--agent-text-secondary);font-weight:600;margin-bottom:8px;text-transform:uppercase;letter-spacing:.05em}.action-button{width:100%;background:linear-gradient(90deg,var(--agent-primary) 0%,#a855f7 100%);border:none;border-radius:12px;padding:12px;color:#fff;font-weight:600;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:opacity .2s,transform .2s;font-size:15px}.action-button:hover{opacity:.9;transform:translateY(-1px)}',presets={reporting:{actionLabel:"Create ACFR Report",systemRole:"a financial reporting expert assistant. You assist users in creating Annual Comprehensive Financial Reports (ACFR) and Budget Books.",initialStepId:"welcome",intents:[{keywords:["ACFR","comprehensive","financial"],nextStepId:"acfr_confirm"},{keywords:["Budget","Book","budgetary"],nextStepId:"budget_confirm"},{keywords:["templates","themes","show me","list"],nextStepId:"help"},{keywords:["open","last","report"],nextStepId:"open_last_report_flow"},{keywords:["permissions","Please give edit permissions for Guilad","edit permissions"],nextStepId:"update_permissions_demo"}],endpoints:[{name:"openReport",url:"",method:"GET",description:"Usage: Call this to OPEN a report given its ID. Useful when user asks to open/view a report.",payloadTemplate:{id:""}},{name:"manageAccess",url:"",method:"GET",description:"Usage: Call this to manage access/permissions for a report.",payloadTemplate:{id:""}}],workflow:[{id:"welcome",message:"Hello {{ userName }}! I'm your assistant. What kind of report to do want to do today?",options:[{label:"ACFR",nextStepId:"acfr_confirm"},{label:"Budget Book",nextStepId:"budget_confirm"},{label:"Im not sure",nextStepId:"help"}]},{id:"fallback_sorry",message:`Sorry, I still can't help you with that, but looking forward to improve! 

Is there anything else I can help you with?`,options:[{label:"Create ACFR Report",nextStepId:"acfr_confirm"},{label:"Create Budget Book",nextStepId:"budget_confirm"}]},{id:"acfr_confirm",message:"Alright! I can help you with the ACFR report. Would you like to use the default template?",options:[{label:"Ok, let's do it",payloadKey:"type",value:"ACFR",stateUpdate:{themeId:"697b977d5f3a5717430c12b8"},nextStepId:"ask_report_name_acfr"},{label:"Show me the templates",actionType:"api",triggerAction:"getThemes",nextStepId:"select_theme_acfr"},{label:"Im not sure",nextStepId:"help"}]},{id:"budget_confirm",message:"Alright! I can help you with the Budget Book report. Would you like to use the default template?",options:[{label:"Ok, let's do it",payloadKey:"type",value:"BUDGET_BOOK",nextStepId:"ask_report_name_budget"},{label:"Show me the templates",actionType:"api",triggerAction:"getThemes",nextStepId:"select_theme_budget"},{label:"Im not sure",nextStepId:"help"}]},{id:"ask_report_name_acfr",message:"What should be the name of your ACFR report?",inputTarget:"reportName",nextStepId:"ask_fiscal_year_acfr"},{id:"ask_fiscal_year_acfr",message:"Please enter the fiscal year for this report (YYYY-MM-DD):",inputTarget:"fiscalYear",triggerAction:"createReport",actionType:"api",payloadKey:"initialReportFields.fiscalYear",fixedPayload:{type:"ACFR",name:"{{reportName}}",initialReportFields:{themeId:"{{themeId}}",themeColors:{primaryColor:"#DC143C",headingColor:"#0D0E1C",secondaryColor:"#FFE4E8",tertiaryColor:"#8B0A1E"}}},nextStepId:"done"},{id:"ask_report_name_budget",message:"What should be the name of your Budget Book?",inputTarget:"reportName",nextStepId:"ask_fiscal_year_budget"},{id:"ask_fiscal_year_budget",message:"Please enter the fiscal year for this report (YYYY-MM-DD):",inputTarget:"fiscalYear",triggerAction:"createReport",actionType:"api",payloadKey:"initialReportFields.fiscalYear",fixedPayload:{type:"BUDGET_BOOK",name:"{{reportName}}",initialReportFields:{themeId:"{{themeId}}",themeColors:{primaryColor:"#DC143C",headingColor:"#0D0E1C",secondaryColor:"#FFE4E8",tertiaryColor:"#8B0A1E"}}},nextStepId:"done"},{id:"select_theme_acfr",message:"I've found {{ result.length }} templates. Which theme would you like for your ACFR report?",useResultsAsOptions:!0,dynamicOptionsConfig:{labelKey:"name",valueKey:"id",payloadKey:"themeId",nextStepId:"ask_report_name_acfr",fixedPayload:{type:"ACFR"}}},{id:"select_theme_budget",message:"I've found {{ result.length }} templates. Which theme would you like for your Budget Book?",useResultsAsOptions:!0,dynamicOptionsConfig:{labelKey:"name",valueKey:"id",payloadKey:"themeId",nextStepId:"ask_report_name_budget",fixedPayload:{type:"BUDGET_BOOK"}}},{id:"help",message:"Don't know what to do? Want to talk to a real human?",options:[{label:"Show me the templates",actionType:"api",triggerAction:"getThemes",nextStepId:"select_theme_general"},{label:"Talk to a human",actionType:"whatsapp",nextStepId:"whatsapp_done"}]},{id:"select_theme_general",message:"I've found {{ result.length }} templates. You can pick one and I'll start a general report for you:",useResultsAsOptions:!0,dynamicOptionsConfig:{labelKey:"name",valueKey:"id",payloadKey:"themeId",nextStepId:"ask_report_name_acfr",fixedPayload:{type:"ACFR"}}},{id:"done",message:" Perfect! Your report request has been sent.",options:[{label:"Open Report",triggerAction:"openReport",actionType:"api",value:"{{result.id}}",payloadKey:"id"},{label:"Manage Access/Permissions",triggerAction:"manageAccess",actionType:"api",value:"{{result.id}}",payloadKey:"id"}]},{id:"whatsapp_done",message:"Opening WhatsApp to connect you with our help desk... "},{id:"open_last_report_flow",message:"Finding your last report...",triggerAction:"getAllReports",actionType:"api",nextStepId:"display_last_report"},{id:"display_last_report",message:"Here is the last report I found: '{{result[0].name}}'.",options:[{label:"Open Report",triggerAction:"openReport",actionType:"api",value:"{{result[0].id}}",payloadKey:"id"},{label:"Check Activity Log",actionType:"link",externalLink:"/settings/activity-log"}]},{id:"update_permissions_demo",message:"Report permissions have been updated for the user gholender@cleargov.com",triggerAction:"manageAccess",actionType:"api",fixedPayload:{userEmail:"gholender@cleargov.com"}}]},health:{actionLabel:"Check Vitals",systemRole:"a personal health tracking assistant.",initialStepId:"welcome",workflow:[{id:"welcome",message:"Health Assistant here. I can help you track vitals or schedule appointments.",options:[{label:"Log Vitals",nextStepId:"log_vitals"},{label:"Schedule Appointment",nextStepId:"schedule"}]}]}},NEVER=Object.freeze({status:"aborted"});function $constructor(s,n,u){function f(w,C){if(w._zod||Object.defineProperty(w,"_zod",{value:{def:C,constr:A,traits:new Set},enumerable:!1}),w._zod.traits.has(s))return;w._zod.traits.add(s),n(w,C);const T=A.prototype,R=Object.keys(T);for(let I=0;I<R.length;I++){const N=R[I];N in w||(w[N]=T[N].bind(w))}}const y=u?.Parent??Object;class S extends y{}Object.defineProperty(S,"name",{value:s});function A(w){var C;const T=u?.Parent?new S:this;f(T,w),(C=T._zod).deferred??(C.deferred=[]);for(const R of T._zod.deferred)R();return T}return Object.defineProperty(A,"init",{value:f}),Object.defineProperty(A,Symbol.hasInstance,{value:w=>u?.Parent&&w instanceof u.Parent?!0:w?._zod?.traits?.has(s)}),Object.defineProperty(A,"name",{value:s}),A}class $ZodAsyncError extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class $ZodEncodeError extends Error{constructor(n){super(`Encountered unidirectional transform during encode: ${n}`),this.name="ZodEncodeError"}}const globalConfig={};function config(s){return globalConfig}function getEnumValues(s){const n=Object.values(s).filter(u=>typeof u=="number");return Object.entries(s).filter(([u,f])=>n.indexOf(+u)===-1).map(([u,f])=>f)}function jsonStringifyReplacer(s,n){return typeof n=="bigint"?n.toString():n}function cached(s){return{get value(){{const n=s();return Object.defineProperty(this,"value",{value:n}),n}}}}function nullish(s){return s==null}function cleanRegex(s){const n=s.startsWith("^")?1:0,u=s.endsWith("$")?s.length-1:s.length;return s.slice(n,u)}function floatSafeRemainder(s,n){const u=(s.toString().split(".")[1]||"").length,f=n.toString();let y=(f.split(".")[1]||"").length;if(y===0&&/\d?e-\d?/.test(f)){const C=f.match(/\d?e-(\d?)/);C?.[1]&&(y=Number.parseInt(C[1]))}const S=u>y?u:y,A=Number.parseInt(s.toFixed(S).replace(".","")),w=Number.parseInt(n.toFixed(S).replace(".",""));return A%w/10**S}const EVALUATING=Symbol("evaluating");function defineLazy(s,n,u){let f;Object.defineProperty(s,n,{get(){if(f!==EVALUATING)return f===void 0&&(f=EVALUATING,f=u()),f},set(y){Object.defineProperty(s,n,{value:y})},configurable:!0})}function assignProp(s,n,u){Object.defineProperty(s,n,{value:u,writable:!0,enumerable:!0,configurable:!0})}function mergeDefs(...s){const n={};for(const u of s){const f=Object.getOwnPropertyDescriptors(u);Object.assign(n,f)}return Object.defineProperties({},n)}function esc(s){return JSON.stringify(s)}function slugify(s){return s.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const captureStackTrace="captureStackTrace"in Error?Error.captureStackTrace:(...s)=>{};function isObject(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)}const allowsEval=cached(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const s=Function;return new s(""),!0}catch{return!1}});function isPlainObject$1(s){if(isObject(s)===!1)return!1;const n=s.constructor;if(n===void 0||typeof n!="function")return!0;const u=n.prototype;return!(isObject(u)===!1||Object.prototype.hasOwnProperty.call(u,"isPrototypeOf")===!1)}function shallowClone(s){return isPlainObject$1(s)?{...s}:Array.isArray(s)?[...s]:s}const propertyKeyTypes=new Set(["string","number","symbol"]);function escapeRegex(s){return s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function clone(s,n,u){const f=new s._zod.constr(n??s._zod.def);return(!n||u?.parent)&&(f._zod.parent=s),f}function normalizeParams(s){const n=s;if(!n)return{};if(typeof n=="string")return{error:()=>n};if(n?.message!==void 0){if(n?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");n.error=n.message}return delete n.message,typeof n.error=="string"?{...n,error:()=>n.error}:n}function optionalKeys(s){return Object.keys(s).filter(n=>s[n]._zod.optin==="optional"&&s[n]._zod.optout==="optional")}const NUMBER_FORMAT_RANGES={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function pick(s,n){const u=s._zod.def,f=u.checks;if(f&&f.length>0)throw new Error(".pick() cannot be used on object schemas containing refinements");const y=mergeDefs(s._zod.def,{get shape(){const S={};for(const A in n){if(!(A in u.shape))throw new Error(`Unrecognized key: "${A}"`);n[A]&&(S[A]=u.shape[A])}return assignProp(this,"shape",S),S},checks:[]});return clone(s,y)}function omit(s,n){const u=s._zod.def,f=u.checks;if(f&&f.length>0)throw new Error(".omit() cannot be used on object schemas containing refinements");const y=mergeDefs(s._zod.def,{get shape(){const S={...s._zod.def.shape};for(const A in n){if(!(A in u.shape))throw new Error(`Unrecognized key: "${A}"`);n[A]&&delete S[A]}return assignProp(this,"shape",S),S},checks:[]});return clone(s,y)}function extend$1(s,n){if(!isPlainObject$1(n))throw new Error("Invalid input to extend: expected a plain object");const u=s._zod.def.checks;if(u&&u.length>0){const y=s._zod.def.shape;for(const S in n)if(Object.getOwnPropertyDescriptor(y,S)!==void 0)throw new Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}const f=mergeDefs(s._zod.def,{get shape(){const y={...s._zod.def.shape,...n};return assignProp(this,"shape",y),y}});return clone(s,f)}function safeExtend(s,n){if(!isPlainObject$1(n))throw new Error("Invalid input to safeExtend: expected a plain object");const u=mergeDefs(s._zod.def,{get shape(){const f={...s._zod.def.shape,...n};return assignProp(this,"shape",f),f}});return clone(s,u)}function merge(s,n){const u=mergeDefs(s._zod.def,{get shape(){const f={...s._zod.def.shape,...n._zod.def.shape};return assignProp(this,"shape",f),f},get catchall(){return n._zod.def.catchall},checks:[]});return clone(s,u)}function partial(s,n,u){const f=n._zod.def.checks;if(f&&f.length>0)throw new Error(".partial() cannot be used on object schemas containing refinements");const y=mergeDefs(n._zod.def,{get shape(){const S=n._zod.def.shape,A={...S};if(u)for(const w in u){if(!(w in S))throw new Error(`Unrecognized key: "${w}"`);u[w]&&(A[w]=s?new s({type:"optional",innerType:S[w]}):S[w])}else for(const w in S)A[w]=s?new s({type:"optional",innerType:S[w]}):S[w];return assignProp(this,"shape",A),A},checks:[]});return clone(n,y)}function required$4(s,n,u){const f=mergeDefs(n._zod.def,{get shape(){const y=n._zod.def.shape,S={...y};if(u)for(const A in u){if(!(A in S))throw new Error(`Unrecognized key: "${A}"`);u[A]&&(S[A]=new s({type:"nonoptional",innerType:y[A]}))}else for(const A in y)S[A]=new s({type:"nonoptional",innerType:y[A]});return assignProp(this,"shape",S),S}});return clone(n,f)}function aborted(s,n=0){if(s.aborted===!0)return!0;for(let u=n;u<s.issues.length;u++)if(s.issues[u]?.continue!==!0)return!0;return!1}function prefixIssues(s,n){return n.map(u=>{var f;return(f=u).path??(f.path=[]),u.path.unshift(s),u})}function unwrapMessage(s){return typeof s=="string"?s:s?.message}function finalizeIssue(s,n,u){const f={...s,path:s.path??[]};if(!s.message){const y=unwrapMessage(s.inst?._zod.def?.error?.(s))??unwrapMessage(n?.error?.(s))??unwrapMessage(u.customError?.(s))??unwrapMessage(u.localeError?.(s))??"Invalid input";f.message=y}return delete f.inst,delete f.continue,n?.reportInput||delete f.input,f}function getLengthableOrigin(s){return Array.isArray(s)?"array":typeof s=="string"?"string":"unknown"}function issue(...s){const[n,u,f]=s;return typeof n=="string"?{message:n,code:"custom",input:u,inst:f}:{...n}}const initializer$1=(s,n)=>{s.name="$ZodError",Object.defineProperty(s,"_zod",{value:s._zod,enumerable:!1}),Object.defineProperty(s,"issues",{value:n,enumerable:!1}),s.message=JSON.stringify(n,jsonStringifyReplacer,2),Object.defineProperty(s,"toString",{value:()=>s.message,enumerable:!1})},$ZodError=$constructor("$ZodError",initializer$1),$ZodRealError=$constructor("$ZodError",initializer$1,{Parent:Error});function flattenError$1(s,n=u=>u.message){const u={},f=[];for(const y of s.issues)y.path.length>0?(u[y.path[0]]=u[y.path[0]]||[],u[y.path[0]].push(n(y))):f.push(n(y));return{formErrors:f,fieldErrors:u}}function formatError(s,n=u=>u.message){const u={_errors:[]},f=y=>{for(const S of y.issues)if(S.code==="invalid_union"&&S.errors.length)S.errors.map(A=>f({issues:A}));else if(S.code==="invalid_key")f({issues:S.issues});else if(S.code==="invalid_element")f({issues:S.issues});else if(S.path.length===0)u._errors.push(n(S));else{let A=u,w=0;for(;w<S.path.length;){const C=S.path[w];w===S.path.length-1?(A[C]=A[C]||{_errors:[]},A[C]._errors.push(n(S))):A[C]=A[C]||{_errors:[]},A=A[C],w++}}};return f(s),u}const _parse=s=>(n,u,f,y)=>{const S=f?Object.assign(f,{async:!1}):{async:!1},A=n._zod.run({value:u,issues:[]},S);if(A instanceof Promise)throw new $ZodAsyncError;if(A.issues.length){const w=new(y?.Err??s)(A.issues.map(C=>finalizeIssue(C,S,config())));throw captureStackTrace(w,y?.callee),w}return A.value},_parseAsync=s=>async(n,u,f,y)=>{const S=f?Object.assign(f,{async:!0}):{async:!0};let A=n._zod.run({value:u,issues:[]},S);if(A instanceof Promise&&(A=await A),A.issues.length){const w=new(y?.Err??s)(A.issues.map(C=>finalizeIssue(C,S,config())));throw captureStackTrace(w,y?.callee),w}return A.value},_safeParse=s=>(n,u,f)=>{const y=f?{...f,async:!1}:{async:!1},S=n._zod.run({value:u,issues:[]},y);if(S instanceof Promise)throw new $ZodAsyncError;return S.issues.length?{success:!1,error:new(s??$ZodError)(S.issues.map(A=>finalizeIssue(A,y,config())))}:{success:!0,data:S.value}},safeParse$2=_safeParse($ZodRealError),_safeParseAsync=s=>async(n,u,f)=>{const y=f?Object.assign(f,{async:!0}):{async:!0};let S=n._zod.run({value:u,issues:[]},y);return S instanceof Promise&&(S=await S),S.issues.length?{success:!1,error:new s(S.issues.map(A=>finalizeIssue(A,y,config())))}:{success:!0,data:S.value}},safeParseAsync$1=_safeParseAsync($ZodRealError),_encode=s=>(n,u,f)=>{const y=f?Object.assign(f,{direction:"backward"}):{direction:"backward"};return _parse(s)(n,u,y)},_decode=s=>(n,u,f)=>_parse(s)(n,u,f),_encodeAsync=s=>async(n,u,f)=>{const y=f?Object.assign(f,{direction:"backward"}):{direction:"backward"};return _parseAsync(s)(n,u,y)},_decodeAsync=s=>async(n,u,f)=>_parseAsync(s)(n,u,f),_safeEncode=s=>(n,u,f)=>{const y=f?Object.assign(f,{direction:"backward"}):{direction:"backward"};return _safeParse(s)(n,u,y)},_safeDecode=s=>(n,u,f)=>_safeParse(s)(n,u,f),_safeEncodeAsync=s=>async(n,u,f)=>{const y=f?Object.assign(f,{direction:"backward"}):{direction:"backward"};return _safeParseAsync(s)(n,u,y)},_safeDecodeAsync=s=>async(n,u,f)=>_safeParseAsync(s)(n,u,f),cuid=/^[cC][^\s-]{8,}$/,cuid2=/^[0-9a-z]+$/,ulid=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,xid=/^[0-9a-vA-V]{20}$/,ksuid=/^[A-Za-z0-9]{27}$/,nanoid=/^[a-zA-Z0-9_-]{21}$/,duration$1=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,guid=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,uuid=s=>s?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${s}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,email=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,_emoji$1="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function emoji(){return new RegExp(_emoji$1,"u")}const ipv4=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv6=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,cidrv4=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,cidrv6=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,base64url=/^[A-Za-z0-9_-]*$/,e164=/^\+[1-9]\d{6,14}$/,dateSource="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",date$1=new RegExp(`^${dateSource}$`);function timeSource(s){const n="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof s.precision=="number"?s.precision===-1?`${n}`:s.precision===0?`${n}:[0-5]\\d`:`${n}:[0-5]\\d\\.\\d{${s.precision}}`:`${n}(?::[0-5]\\d(?:\\.\\d+)?)?`}function time$1(s){return new RegExp(`^${timeSource(s)}$`)}function datetime$1(s){const n=timeSource({precision:s.precision}),u=["Z"];s.local&&u.push(""),s.offset&&u.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const f=`${n}(?:${u.join("|")})`;return new RegExp(`^${dateSource}T(?:${f})$`)}const string$1=s=>{const n=s?`[\\s\\S]{${s?.minimum??0},${s?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${n}$`)},integer=/^-?\d+$/,number$2=/^-?\d+(?:\.\d+)?$/,boolean$1=/^(?:true|false)$/i,_null$2=/^null$/i,lowercase=/^[^A-Z]*$/,uppercase=/^[^a-z]*$/,$ZodCheck=$constructor("$ZodCheck",(s,n)=>{var u;s._zod??(s._zod={}),s._zod.def=n,(u=s._zod).onattach??(u.onattach=[])}),numericOriginMap={number:"number",bigint:"bigint",object:"date"},$ZodCheckLessThan=$constructor("$ZodCheckLessThan",(s,n)=>{$ZodCheck.init(s,n);const u=numericOriginMap[typeof n.value];s._zod.onattach.push(f=>{const y=f._zod.bag,S=(n.inclusive?y.maximum:y.exclusiveMaximum)??Number.POSITIVE_INFINITY;n.value<S&&(n.inclusive?y.maximum=n.value:y.exclusiveMaximum=n.value)}),s._zod.check=f=>{(n.inclusive?f.value<=n.value:f.value<n.value)||f.issues.push({origin:u,code:"too_big",maximum:typeof n.value=="object"?n.value.getTime():n.value,input:f.value,inclusive:n.inclusive,inst:s,continue:!n.abort})}}),$ZodCheckGreaterThan=$constructor("$ZodCheckGreaterThan",(s,n)=>{$ZodCheck.init(s,n);const u=numericOriginMap[typeof n.value];s._zod.onattach.push(f=>{const y=f._zod.bag,S=(n.inclusive?y.minimum:y.exclusiveMinimum)??Number.NEGATIVE_INFINITY;n.value>S&&(n.inclusive?y.minimum=n.value:y.exclusiveMinimum=n.value)}),s._zod.check=f=>{(n.inclusive?f.value>=n.value:f.value>n.value)||f.issues.push({origin:u,code:"too_small",minimum:typeof n.value=="object"?n.value.getTime():n.value,input:f.value,inclusive:n.inclusive,inst:s,continue:!n.abort})}}),$ZodCheckMultipleOf=$constructor("$ZodCheckMultipleOf",(s,n)=>{$ZodCheck.init(s,n),s._zod.onattach.push(u=>{var f;(f=u._zod.bag).multipleOf??(f.multipleOf=n.value)}),s._zod.check=u=>{if(typeof u.value!=typeof n.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof u.value=="bigint"?u.value%n.value===BigInt(0):floatSafeRemainder(u.value,n.value)===0)||u.issues.push({origin:typeof u.value,code:"not_multiple_of",divisor:n.value,input:u.value,inst:s,continue:!n.abort})}}),$ZodCheckNumberFormat=$constructor("$ZodCheckNumberFormat",(s,n)=>{$ZodCheck.init(s,n),n.format=n.format||"float64";const u=n.format?.includes("int"),f=u?"int":"number",[y,S]=NUMBER_FORMAT_RANGES[n.format];s._zod.onattach.push(A=>{const w=A._zod.bag;w.format=n.format,w.minimum=y,w.maximum=S,u&&(w.pattern=integer)}),s._zod.check=A=>{const w=A.value;if(u){if(!Number.isInteger(w)){A.issues.push({expected:f,format:n.format,code:"invalid_type",continue:!1,input:w,inst:s});return}if(!Number.isSafeInteger(w)){w>0?A.issues.push({input:w,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:s,origin:f,inclusive:!0,continue:!n.abort}):A.issues.push({input:w,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:s,origin:f,inclusive:!0,continue:!n.abort});return}}w<y&&A.issues.push({origin:"number",input:w,code:"too_small",minimum:y,inclusive:!0,inst:s,continue:!n.abort}),w>S&&A.issues.push({origin:"number",input:w,code:"too_big",maximum:S,inclusive:!0,inst:s,continue:!n.abort})}}),$ZodCheckMaxLength=$constructor("$ZodCheckMaxLength",(s,n)=>{var u;$ZodCheck.init(s,n),(u=s._zod.def).when??(u.when=f=>{const y=f.value;return!nullish(y)&&y.length!==void 0}),s._zod.onattach.push(f=>{const y=f._zod.bag.maximum??Number.POSITIVE_INFINITY;n.maximum<y&&(f._zod.bag.maximum=n.maximum)}),s._zod.check=f=>{const y=f.value;if(y.length<=n.maximum)return;const S=getLengthableOrigin(y);f.issues.push({origin:S,code:"too_big",maximum:n.maximum,inclusive:!0,input:y,inst:s,continue:!n.abort})}}),$ZodCheckMinLength=$constructor("$ZodCheckMinLength",(s,n)=>{var u;$ZodCheck.init(s,n),(u=s._zod.def).when??(u.when=f=>{const y=f.value;return!nullish(y)&&y.length!==void 0}),s._zod.onattach.push(f=>{const y=f._zod.bag.minimum??Number.NEGATIVE_INFINITY;n.minimum>y&&(f._zod.bag.minimum=n.minimum)}),s._zod.check=f=>{const y=f.value;if(y.length>=n.minimum)return;const S=getLengthableOrigin(y);f.issues.push({origin:S,code:"too_small",minimum:n.minimum,inclusive:!0,input:y,inst:s,continue:!n.abort})}}),$ZodCheckLengthEquals=$constructor("$ZodCheckLengthEquals",(s,n)=>{var u;$ZodCheck.init(s,n),(u=s._zod.def).when??(u.when=f=>{const y=f.value;return!nullish(y)&&y.length!==void 0}),s._zod.onattach.push(f=>{const y=f._zod.bag;y.minimum=n.length,y.maximum=n.length,y.length=n.length}),s._zod.check=f=>{const y=f.value,S=y.length;if(S===n.length)return;const A=getLengthableOrigin(y),w=S>n.length;f.issues.push({origin:A,...w?{code:"too_big",maximum:n.length}:{code:"too_small",minimum:n.length},inclusive:!0,exact:!0,input:f.value,inst:s,continue:!n.abort})}}),$ZodCheckStringFormat=$constructor("$ZodCheckStringFormat",(s,n)=>{var u,f;$ZodCheck.init(s,n),s._zod.onattach.push(y=>{const S=y._zod.bag;S.format=n.format,n.pattern&&(S.patterns??(S.patterns=new Set),S.patterns.add(n.pattern))}),n.pattern?(u=s._zod).check??(u.check=y=>{n.pattern.lastIndex=0,!n.pattern.test(y.value)&&y.issues.push({origin:"string",code:"invalid_format",format:n.format,input:y.value,...n.pattern?{pattern:n.pattern.toString()}:{},inst:s,continue:!n.abort})}):(f=s._zod).check??(f.check=()=>{})}),$ZodCheckRegex=$constructor("$ZodCheckRegex",(s,n)=>{$ZodCheckStringFormat.init(s,n),s._zod.check=u=>{n.pattern.lastIndex=0,!n.pattern.test(u.value)&&u.issues.push({origin:"string",code:"invalid_format",format:"regex",input:u.value,pattern:n.pattern.toString(),inst:s,continue:!n.abort})}}),$ZodCheckLowerCase=$constructor("$ZodCheckLowerCase",(s,n)=>{n.pattern??(n.pattern=lowercase),$ZodCheckStringFormat.init(s,n)}),$ZodCheckUpperCase=$constructor("$ZodCheckUpperCase",(s,n)=>{n.pattern??(n.pattern=uppercase),$ZodCheckStringFormat.init(s,n)}),$ZodCheckIncludes=$constructor("$ZodCheckIncludes",(s,n)=>{$ZodCheck.init(s,n);const u=escapeRegex(n.includes),f=new RegExp(typeof n.position=="number"?`^.{${n.position}}${u}`:u);n.pattern=f,s._zod.onattach.push(y=>{const S=y._zod.bag;S.patterns??(S.patterns=new Set),S.patterns.add(f)}),s._zod.check=y=>{y.value.includes(n.includes,n.position)||y.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:n.includes,input:y.value,inst:s,continue:!n.abort})}}),$ZodCheckStartsWith=$constructor("$ZodCheckStartsWith",(s,n)=>{$ZodCheck.init(s,n);const u=new RegExp(`^${escapeRegex(n.prefix)}.*`);n.pattern??(n.pattern=u),s._zod.onattach.push(f=>{const y=f._zod.bag;y.patterns??(y.patterns=new Set),y.patterns.add(u)}),s._zod.check=f=>{f.value.startsWith(n.prefix)||f.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:n.prefix,input:f.value,inst:s,continue:!n.abort})}}),$ZodCheckEndsWith=$constructor("$ZodCheckEndsWith",(s,n)=>{$ZodCheck.init(s,n);const u=new RegExp(`.*${escapeRegex(n.suffix)}$`);n.pattern??(n.pattern=u),s._zod.onattach.push(f=>{const y=f._zod.bag;y.patterns??(y.patterns=new Set),y.patterns.add(u)}),s._zod.check=f=>{f.value.endsWith(n.suffix)||f.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:n.suffix,input:f.value,inst:s,continue:!n.abort})}}),$ZodCheckOverwrite=$constructor("$ZodCheckOverwrite",(s,n)=>{$ZodCheck.init(s,n),s._zod.check=u=>{u.value=n.tx(u.value)}});class Doc{constructor(n=[]){this.content=[],this.indent=0,this&&(this.args=n)}indented(n){this.indent+=1,n(this),this.indent-=1}write(n){if(typeof n=="function"){n(this,{execution:"sync"}),n(this,{execution:"async"});return}const u=n.split(`
`).filter(S=>S),f=Math.min(...u.map(S=>S.length-S.trimStart().length)),y=u.map(S=>S.slice(f)).map(S=>" ".repeat(this.indent*2)+S);for(const S of y)this.content.push(S)}compile(){const n=Function,u=this?.args,f=[...(this?.content??[""]).map(y=>`  ${y}`)];return new n(...u,f.join(`
`))}}const version$2={major:4,minor:3,patch:6},$ZodType=$constructor("$ZodType",(s,n)=>{var u;s??(s={}),s._zod.def=n,s._zod.bag=s._zod.bag||{},s._zod.version=version$2;const f=[...s._zod.def.checks??[]];s._zod.traits.has("$ZodCheck")&&f.unshift(s);for(const y of f)for(const S of y._zod.onattach)S(s);if(f.length===0)(u=s._zod).deferred??(u.deferred=[]),s._zod.deferred?.push(()=>{s._zod.run=s._zod.parse});else{const y=(A,w,C)=>{let T=aborted(A),R;for(const I of w){if(I._zod.def.when){if(!I._zod.def.when(A))continue}else if(T)continue;const N=A.issues.length,L=I._zod.check(A);if(L instanceof Promise&&C?.async===!1)throw new $ZodAsyncError;if(R||L instanceof Promise)R=(R??Promise.resolve()).then(async()=>{await L,A.issues.length!==N&&(T||(T=aborted(A,N)))});else{if(A.issues.length===N)continue;T||(T=aborted(A,N))}}return R?R.then(()=>A):A},S=(A,w,C)=>{if(aborted(A))return A.aborted=!0,A;const T=y(w,f,C);if(T instanceof Promise){if(C.async===!1)throw new $ZodAsyncError;return T.then(R=>s._zod.parse(R,C))}return s._zod.parse(T,C)};s._zod.run=(A,w)=>{if(w.skipChecks)return s._zod.parse(A,w);if(w.direction==="backward"){const T=s._zod.parse({value:A.value,issues:[]},{...w,skipChecks:!0});return T instanceof Promise?T.then(R=>S(R,A,w)):S(T,A,w)}const C=s._zod.parse(A,w);if(C instanceof Promise){if(w.async===!1)throw new $ZodAsyncError;return C.then(T=>y(T,f,w))}return y(C,f,w)}}defineLazy(s,"~standard",()=>({validate:y=>{try{const S=safeParse$2(s,y);return S.success?{value:S.data}:{issues:S.error?.issues}}catch{return safeParseAsync$1(s,y).then(S=>S.success?{value:S.data}:{issues:S.error?.issues})}},vendor:"zod",version:1}))}),$ZodString=$constructor("$ZodString",(s,n)=>{$ZodType.init(s,n),s._zod.pattern=[...s?._zod.bag?.patterns??[]].pop()??string$1(s._zod.bag),s._zod.parse=(u,f)=>{if(n.coerce)try{u.value=String(u.value)}catch{}return typeof u.value=="string"||u.issues.push({expected:"string",code:"invalid_type",input:u.value,inst:s}),u}}),$ZodStringFormat=$constructor("$ZodStringFormat",(s,n)=>{$ZodCheckStringFormat.init(s,n),$ZodString.init(s,n)}),$ZodGUID=$constructor("$ZodGUID",(s,n)=>{n.pattern??(n.pattern=guid),$ZodStringFormat.init(s,n)}),$ZodUUID=$constructor("$ZodUUID",(s,n)=>{if(n.version){const u={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[n.version];if(u===void 0)throw new Error(`Invalid UUID version: "${n.version}"`);n.pattern??(n.pattern=uuid(u))}else n.pattern??(n.pattern=uuid());$ZodStringFormat.init(s,n)}),$ZodEmail=$constructor("$ZodEmail",(s,n)=>{n.pattern??(n.pattern=email),$ZodStringFormat.init(s,n)}),$ZodURL=$constructor("$ZodURL",(s,n)=>{$ZodStringFormat.init(s,n),s._zod.check=u=>{try{const f=u.value.trim(),y=new URL(f);n.hostname&&(n.hostname.lastIndex=0,n.hostname.test(y.hostname)||u.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:n.hostname.source,input:u.value,inst:s,continue:!n.abort})),n.protocol&&(n.protocol.lastIndex=0,n.protocol.test(y.protocol.endsWith(":")?y.protocol.slice(0,-1):y.protocol)||u.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:n.protocol.source,input:u.value,inst:s,continue:!n.abort})),n.normalize?u.value=y.href:u.value=f;return}catch{u.issues.push({code:"invalid_format",format:"url",input:u.value,inst:s,continue:!n.abort})}}}),$ZodEmoji=$constructor("$ZodEmoji",(s,n)=>{n.pattern??(n.pattern=emoji()),$ZodStringFormat.init(s,n)}),$ZodNanoID=$constructor("$ZodNanoID",(s,n)=>{n.pattern??(n.pattern=nanoid),$ZodStringFormat.init(s,n)}),$ZodCUID=$constructor("$ZodCUID",(s,n)=>{n.pattern??(n.pattern=cuid),$ZodStringFormat.init(s,n)}),$ZodCUID2=$constructor("$ZodCUID2",(s,n)=>{n.pattern??(n.pattern=cuid2),$ZodStringFormat.init(s,n)}),$ZodULID=$constructor("$ZodULID",(s,n)=>{n.pattern??(n.pattern=ulid),$ZodStringFormat.init(s,n)}),$ZodXID=$constructor("$ZodXID",(s,n)=>{n.pattern??(n.pattern=xid),$ZodStringFormat.init(s,n)}),$ZodKSUID=$constructor("$ZodKSUID",(s,n)=>{n.pattern??(n.pattern=ksuid),$ZodStringFormat.init(s,n)}),$ZodISODateTime=$constructor("$ZodISODateTime",(s,n)=>{n.pattern??(n.pattern=datetime$1(n)),$ZodStringFormat.init(s,n)}),$ZodISODate=$constructor("$ZodISODate",(s,n)=>{n.pattern??(n.pattern=date$1),$ZodStringFormat.init(s,n)}),$ZodISOTime=$constructor("$ZodISOTime",(s,n)=>{n.pattern??(n.pattern=time$1(n)),$ZodStringFormat.init(s,n)}),$ZodISODuration=$constructor("$ZodISODuration",(s,n)=>{n.pattern??(n.pattern=duration$1),$ZodStringFormat.init(s,n)}),$ZodIPv4=$constructor("$ZodIPv4",(s,n)=>{n.pattern??(n.pattern=ipv4),$ZodStringFormat.init(s,n),s._zod.bag.format="ipv4"}),$ZodIPv6=$constructor("$ZodIPv6",(s,n)=>{n.pattern??(n.pattern=ipv6),$ZodStringFormat.init(s,n),s._zod.bag.format="ipv6",s._zod.check=u=>{try{new URL(`http://[${u.value}]`)}catch{u.issues.push({code:"invalid_format",format:"ipv6",input:u.value,inst:s,continue:!n.abort})}}}),$ZodCIDRv4=$constructor("$ZodCIDRv4",(s,n)=>{n.pattern??(n.pattern=cidrv4),$ZodStringFormat.init(s,n)}),$ZodCIDRv6=$constructor("$ZodCIDRv6",(s,n)=>{n.pattern??(n.pattern=cidrv6),$ZodStringFormat.init(s,n),s._zod.check=u=>{const f=u.value.split("/");try{if(f.length!==2)throw new Error;const[y,S]=f;if(!S)throw new Error;const A=Number(S);if(`${A}`!==S)throw new Error;if(A<0||A>128)throw new Error;new URL(`http://[${y}]`)}catch{u.issues.push({code:"invalid_format",format:"cidrv6",input:u.value,inst:s,continue:!n.abort})}}});function isValidBase64(s){if(s==="")return!0;if(s.length%4!==0)return!1;try{return atob(s),!0}catch{return!1}}const $ZodBase64=$constructor("$ZodBase64",(s,n)=>{n.pattern??(n.pattern=base64),$ZodStringFormat.init(s,n),s._zod.bag.contentEncoding="base64",s._zod.check=u=>{isValidBase64(u.value)||u.issues.push({code:"invalid_format",format:"base64",input:u.value,inst:s,continue:!n.abort})}});function isValidBase64URL(s){if(!base64url.test(s))return!1;const n=s.replace(/[-_]/g,f=>f==="-"?"+":"/"),u=n.padEnd(Math.ceil(n.length/4)*4,"=");return isValidBase64(u)}const $ZodBase64URL=$constructor("$ZodBase64URL",(s,n)=>{n.pattern??(n.pattern=base64url),$ZodStringFormat.init(s,n),s._zod.bag.contentEncoding="base64url",s._zod.check=u=>{isValidBase64URL(u.value)||u.issues.push({code:"invalid_format",format:"base64url",input:u.value,inst:s,continue:!n.abort})}}),$ZodE164=$constructor("$ZodE164",(s,n)=>{n.pattern??(n.pattern=e164),$ZodStringFormat.init(s,n)});function isValidJWT(s,n=null){try{const u=s.split(".");if(u.length!==3)return!1;const[f]=u;if(!f)return!1;const y=JSON.parse(atob(f));return!("typ"in y&&y?.typ!=="JWT"||!y.alg||n&&(!("alg"in y)||y.alg!==n))}catch{return!1}}const $ZodJWT=$constructor("$ZodJWT",(s,n)=>{$ZodStringFormat.init(s,n),s._zod.check=u=>{isValidJWT(u.value,n.alg)||u.issues.push({code:"invalid_format",format:"jwt",input:u.value,inst:s,continue:!n.abort})}}),$ZodNumber=$constructor("$ZodNumber",(s,n)=>{$ZodType.init(s,n),s._zod.pattern=s._zod.bag.pattern??number$2,s._zod.parse=(u,f)=>{if(n.coerce)try{u.value=Number(u.value)}catch{}const y=u.value;if(typeof y=="number"&&!Number.isNaN(y)&&Number.isFinite(y))return u;const S=typeof y=="number"?Number.isNaN(y)?"NaN":Number.isFinite(y)?void 0:"Infinity":void 0;return u.issues.push({expected:"number",code:"invalid_type",input:y,inst:s,...S?{received:S}:{}}),u}}),$ZodNumberFormat=$constructor("$ZodNumberFormat",(s,n)=>{$ZodCheckNumberFormat.init(s,n),$ZodNumber.init(s,n)}),$ZodBoolean=$constructor("$ZodBoolean",(s,n)=>{$ZodType.init(s,n),s._zod.pattern=boolean$1,s._zod.parse=(u,f)=>{if(n.coerce)try{u.value=!!u.value}catch{}const y=u.value;return typeof y=="boolean"||u.issues.push({expected:"boolean",code:"invalid_type",input:y,inst:s}),u}}),$ZodNull=$constructor("$ZodNull",(s,n)=>{$ZodType.init(s,n),s._zod.pattern=_null$2,s._zod.values=new Set([null]),s._zod.parse=(u,f)=>{const y=u.value;return y===null||u.issues.push({expected:"null",code:"invalid_type",input:y,inst:s}),u}}),$ZodAny=$constructor("$ZodAny",(s,n)=>{$ZodType.init(s,n),s._zod.parse=u=>u}),$ZodUnknown=$constructor("$ZodUnknown",(s,n)=>{$ZodType.init(s,n),s._zod.parse=u=>u}),$ZodNever=$constructor("$ZodNever",(s,n)=>{$ZodType.init(s,n),s._zod.parse=(u,f)=>(u.issues.push({expected:"never",code:"invalid_type",input:u.value,inst:s}),u)});function handleArrayResult(s,n,u){s.issues.length&&n.issues.push(...prefixIssues(u,s.issues)),n.value[u]=s.value}const $ZodArray=$constructor("$ZodArray",(s,n)=>{$ZodType.init(s,n),s._zod.parse=(u,f)=>{const y=u.value;if(!Array.isArray(y))return u.issues.push({expected:"array",code:"invalid_type",input:y,inst:s}),u;u.value=Array(y.length);const S=[];for(let A=0;A<y.length;A++){const w=y[A],C=n.element._zod.run({value:w,issues:[]},f);C instanceof Promise?S.push(C.then(T=>handleArrayResult(T,u,A))):handleArrayResult(C,u,A)}return S.length?Promise.all(S).then(()=>u):u}});function handlePropertyResult(s,n,u,f,y){if(s.issues.length){if(y&&!(u in f))return;n.issues.push(...prefixIssues(u,s.issues))}s.value===void 0?u in f&&(n.value[u]=void 0):n.value[u]=s.value}function normalizeDef(s){const n=Object.keys(s.shape);for(const f of n)if(!s.shape?.[f]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${f}": expected a Zod schema`);const u=optionalKeys(s.shape);return{...s,keys:n,keySet:new Set(n),numKeys:n.length,optionalKeys:new Set(u)}}function handleCatchall(s,n,u,f,y,S){const A=[],w=y.keySet,C=y.catchall._zod,T=C.def.type,R=C.optout==="optional";for(const I in n){if(w.has(I))continue;if(T==="never"){A.push(I);continue}const N=C.run({value:n[I],issues:[]},f);N instanceof Promise?s.push(N.then(L=>handlePropertyResult(L,u,I,n,R))):handlePropertyResult(N,u,I,n,R)}return A.length&&u.issues.push({code:"unrecognized_keys",keys:A,input:n,inst:S}),s.length?Promise.all(s).then(()=>u):u}const $ZodObject=$constructor("$ZodObject",(s,n)=>{if($ZodType.init(s,n),!Object.getOwnPropertyDescriptor(n,"shape")?.get){const A=n.shape;Object.defineProperty(n,"shape",{get:()=>{const w={...A};return Object.defineProperty(n,"shape",{value:w}),w}})}const u=cached(()=>normalizeDef(n));defineLazy(s._zod,"propValues",()=>{const A=n.shape,w={};for(const C in A){const T=A[C]._zod;if(T.values){w[C]??(w[C]=new Set);for(const R of T.values)w[C].add(R)}}return w});const f=isObject,y=n.catchall;let S;s._zod.parse=(A,w)=>{S??(S=u.value);const C=A.value;if(!f(C))return A.issues.push({expected:"object",code:"invalid_type",input:C,inst:s}),A;A.value={};const T=[],R=S.shape;for(const I of S.keys){const N=R[I],L=N._zod.optout==="optional",F=N._zod.run({value:C[I],issues:[]},w);F instanceof Promise?T.push(F.then(H=>handlePropertyResult(H,A,I,C,L))):handlePropertyResult(F,A,I,C,L)}return y?handleCatchall(T,C,A,w,u.value,s):T.length?Promise.all(T).then(()=>A):A}}),$ZodObjectJIT=$constructor("$ZodObjectJIT",(s,n)=>{$ZodObject.init(s,n);const u=s._zod.parse,f=cached(()=>normalizeDef(n)),y=I=>{const N=new Doc(["shape","payload","ctx"]),L=f.value,F=G=>{const Y=esc(G);return`shape[${Y}]._zod.run({ value: input[${Y}], issues: [] }, ctx)`};N.write("const input = payload.value;");const H=Object.create(null);let z=0;for(const G of L.keys)H[G]=`key_${z++}`;N.write("const newResult = {};");for(const G of L.keys){const Y=H[G],K=esc(G),Z=I[G]?._zod?.optout==="optional";N.write(`const ${Y} = ${F(G)};`),Z?N.write(`
        if (${Y}.issues.length) {
          if (${K} in input) {
            payload.issues = payload.issues.concat(${Y}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${K}, ...iss.path] : [${K}]
            })));
          }
        }
        
        if (${Y}.value === undefined) {
          if (${K} in input) {
            newResult[${K}] = undefined;
          }
        } else {
          newResult[${K}] = ${Y}.value;
        }
        
      `):N.write(`
        if (${Y}.issues.length) {
          payload.issues = payload.issues.concat(${Y}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${K}, ...iss.path] : [${K}]
          })));
        }
        
        if (${Y}.value === undefined) {
          if (${K} in input) {
            newResult[${K}] = undefined;
          }
        } else {
          newResult[${K}] = ${Y}.value;
        }
        
      `)}N.write("payload.value = newResult;"),N.write("return payload;");const U=N.compile();return(G,Y)=>U(I,G,Y)};let S;const A=isObject,w=!globalConfig.jitless,C=w&&allowsEval.value,T=n.catchall;let R;s._zod.parse=(I,N)=>{R??(R=f.value);const L=I.value;return A(L)?w&&C&&N?.async===!1&&N.jitless!==!0?(S||(S=y(n.shape)),I=S(I,N),T?handleCatchall([],L,I,N,R,s):I):u(I,N):(I.issues.push({expected:"object",code:"invalid_type",input:L,inst:s}),I)}});function handleUnionResults(s,n,u,f){for(const S of s)if(S.issues.length===0)return n.value=S.value,n;const y=s.filter(S=>!aborted(S));return y.length===1?(n.value=y[0].value,y[0]):(n.issues.push({code:"invalid_union",input:n.value,inst:u,errors:s.map(S=>S.issues.map(A=>finalizeIssue(A,f,config())))}),n)}const $ZodUnion=$constructor("$ZodUnion",(s,n)=>{$ZodType.init(s,n),defineLazy(s._zod,"optin",()=>n.options.some(y=>y._zod.optin==="optional")?"optional":void 0),defineLazy(s._zod,"optout",()=>n.options.some(y=>y._zod.optout==="optional")?"optional":void 0),defineLazy(s._zod,"values",()=>{if(n.options.every(y=>y._zod.values))return new Set(n.options.flatMap(y=>Array.from(y._zod.values)))}),defineLazy(s._zod,"pattern",()=>{if(n.options.every(y=>y._zod.pattern)){const y=n.options.map(S=>S._zod.pattern);return new RegExp(`^(${y.map(S=>cleanRegex(S.source)).join("|")})$`)}});const u=n.options.length===1,f=n.options[0]._zod.run;s._zod.parse=(y,S)=>{if(u)return f(y,S);let A=!1;const w=[];for(const C of n.options){const T=C._zod.run({value:y.value,issues:[]},S);if(T instanceof Promise)w.push(T),A=!0;else{if(T.issues.length===0)return T;w.push(T)}}return A?Promise.all(w).then(C=>handleUnionResults(C,y,s,S)):handleUnionResults(w,y,s,S)}}),$ZodDiscriminatedUnion=$constructor("$ZodDiscriminatedUnion",(s,n)=>{n.inclusive=!1,$ZodUnion.init(s,n);const u=s._zod.parse;defineLazy(s._zod,"propValues",()=>{const y={};for(const S of n.options){const A=S._zod.propValues;if(!A||Object.keys(A).length===0)throw new Error(`Invalid discriminated union option at index "${n.options.indexOf(S)}"`);for(const[w,C]of Object.entries(A)){y[w]||(y[w]=new Set);for(const T of C)y[w].add(T)}}return y});const f=cached(()=>{const y=n.options,S=new Map;for(const A of y){const w=A._zod.propValues?.[n.discriminator];if(!w||w.size===0)throw new Error(`Invalid discriminated union option at index "${n.options.indexOf(A)}"`);for(const C of w){if(S.has(C))throw new Error(`Duplicate discriminator value "${String(C)}"`);S.set(C,A)}}return S});s._zod.parse=(y,S)=>{const A=y.value;if(!isObject(A))return y.issues.push({code:"invalid_type",expected:"object",input:A,inst:s}),y;const w=f.value.get(A?.[n.discriminator]);return w?w._zod.run(y,S):n.unionFallback?u(y,S):(y.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",discriminator:n.discriminator,input:A,path:[n.discriminator],inst:s}),y)}}),$ZodIntersection=$constructor("$ZodIntersection",(s,n)=>{$ZodType.init(s,n),s._zod.parse=(u,f)=>{const y=u.value,S=n.left._zod.run({value:y,issues:[]},f),A=n.right._zod.run({value:y,issues:[]},f);return S instanceof Promise||A instanceof Promise?Promise.all([S,A]).then(([w,C])=>handleIntersectionResults(u,w,C)):handleIntersectionResults(u,S,A)}});function mergeValues(s,n){if(s===n)return{valid:!0,data:s};if(s instanceof Date&&n instanceof Date&&+s==+n)return{valid:!0,data:s};if(isPlainObject$1(s)&&isPlainObject$1(n)){const u=Object.keys(n),f=Object.keys(s).filter(S=>u.indexOf(S)!==-1),y={...s,...n};for(const S of f){const A=mergeValues(s[S],n[S]);if(!A.valid)return{valid:!1,mergeErrorPath:[S,...A.mergeErrorPath]};y[S]=A.data}return{valid:!0,data:y}}if(Array.isArray(s)&&Array.isArray(n)){if(s.length!==n.length)return{valid:!1,mergeErrorPath:[]};const u=[];for(let f=0;f<s.length;f++){const y=s[f],S=n[f],A=mergeValues(y,S);if(!A.valid)return{valid:!1,mergeErrorPath:[f,...A.mergeErrorPath]};u.push(A.data)}return{valid:!0,data:u}}return{valid:!1,mergeErrorPath:[]}}function handleIntersectionResults(s,n,u){const f=new Map;let y;for(const w of n.issues)if(w.code==="unrecognized_keys"){y??(y=w);for(const C of w.keys)f.has(C)||f.set(C,{}),f.get(C).l=!0}else s.issues.push(w);for(const w of u.issues)if(w.code==="unrecognized_keys")for(const C of w.keys)f.has(C)||f.set(C,{}),f.get(C).r=!0;else s.issues.push(w);const S=[...f].filter(([,w])=>w.l&&w.r).map(([w])=>w);if(S.length&&y&&s.issues.push({...y,keys:S}),aborted(s))return s;const A=mergeValues(n.value,u.value);if(!A.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(A.mergeErrorPath)}`);return s.value=A.data,s}const $ZodRecord=$constructor("$ZodRecord",(s,n)=>{$ZodType.init(s,n),s._zod.parse=(u,f)=>{const y=u.value;if(!isPlainObject$1(y))return u.issues.push({expected:"record",code:"invalid_type",input:y,inst:s}),u;const S=[],A=n.keyType._zod.values;if(A){u.value={};const w=new Set;for(const T of A)if(typeof T=="string"||typeof T=="number"||typeof T=="symbol"){w.add(typeof T=="number"?T.toString():T);const R=n.valueType._zod.run({value:y[T],issues:[]},f);R instanceof Promise?S.push(R.then(I=>{I.issues.length&&u.issues.push(...prefixIssues(T,I.issues)),u.value[T]=I.value})):(R.issues.length&&u.issues.push(...prefixIssues(T,R.issues)),u.value[T]=R.value)}let C;for(const T in y)w.has(T)||(C=C??[],C.push(T));C&&C.length>0&&u.issues.push({code:"unrecognized_keys",input:y,inst:s,keys:C})}else{u.value={};for(const w of Reflect.ownKeys(y)){if(w==="__proto__")continue;let C=n.keyType._zod.run({value:w,issues:[]},f);if(C instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(typeof w=="string"&&number$2.test(w)&&C.issues.length){const R=n.keyType._zod.run({value:Number(w),issues:[]},f);if(R instanceof Promise)throw new Error("Async schemas not supported in object keys currently");R.issues.length===0&&(C=R)}if(C.issues.length){n.mode==="loose"?u.value[w]=y[w]:u.issues.push({code:"invalid_key",origin:"record",issues:C.issues.map(R=>finalizeIssue(R,f,config())),input:w,path:[w],inst:s});continue}const T=n.valueType._zod.run({value:y[w],issues:[]},f);T instanceof Promise?S.push(T.then(R=>{R.issues.length&&u.issues.push(...prefixIssues(w,R.issues)),u.value[C.value]=R.value})):(T.issues.length&&u.issues.push(...prefixIssues(w,T.issues)),u.value[C.value]=T.value)}}return S.length?Promise.all(S).then(()=>u):u}}),$ZodEnum=$constructor("$ZodEnum",(s,n)=>{$ZodType.init(s,n);const u=getEnumValues(n.entries),f=new Set(u);s._zod.values=f,s._zod.pattern=new RegExp(`^(${u.filter(y=>propertyKeyTypes.has(typeof y)).map(y=>typeof y=="string"?escapeRegex(y):y.toString()).join("|")})$`),s._zod.parse=(y,S)=>{const A=y.value;return f.has(A)||y.issues.push({code:"invalid_value",values:u,input:A,inst:s}),y}}),$ZodLiteral=$constructor("$ZodLiteral",(s,n)=>{if($ZodType.init(s,n),n.values.length===0)throw new Error("Cannot create literal schema with no valid values");const u=new Set(n.values);s._zod.values=u,s._zod.pattern=new RegExp(`^(${n.values.map(f=>typeof f=="string"?escapeRegex(f):f?escapeRegex(f.toString()):String(f)).join("|")})$`),s._zod.parse=(f,y)=>{const S=f.value;return u.has(S)||f.issues.push({code:"invalid_value",values:n.values,input:S,inst:s}),f}}),$ZodTransform=$constructor("$ZodTransform",(s,n)=>{$ZodType.init(s,n),s._zod.parse=(u,f)=>{if(f.direction==="backward")throw new $ZodEncodeError(s.constructor.name);const y=n.transform(u.value,u);if(f.async)return(y instanceof Promise?y:Promise.resolve(y)).then(S=>(u.value=S,u));if(y instanceof Promise)throw new $ZodAsyncError;return u.value=y,u}});function handleOptionalResult(s,n){return s.issues.length&&n===void 0?{issues:[],value:void 0}:s}const $ZodOptional=$constructor("$ZodOptional",(s,n)=>{$ZodType.init(s,n),s._zod.optin="optional",s._zod.optout="optional",defineLazy(s._zod,"values",()=>n.innerType._zod.values?new Set([...n.innerType._zod.values,void 0]):void 0),defineLazy(s._zod,"pattern",()=>{const u=n.innerType._zod.pattern;return u?new RegExp(`^(${cleanRegex(u.source)})?$`):void 0}),s._zod.parse=(u,f)=>{if(n.innerType._zod.optin==="optional"){const y=n.innerType._zod.run(u,f);return y instanceof Promise?y.then(S=>handleOptionalResult(S,u.value)):handleOptionalResult(y,u.value)}return u.value===void 0?u:n.innerType._zod.run(u,f)}}),$ZodExactOptional=$constructor("$ZodExactOptional",(s,n)=>{$ZodOptional.init(s,n),defineLazy(s._zod,"values",()=>n.innerType._zod.values),defineLazy(s._zod,"pattern",()=>n.innerType._zod.pattern),s._zod.parse=(u,f)=>n.innerType._zod.run(u,f)}),$ZodNullable=$constructor("$ZodNullable",(s,n)=>{$ZodType.init(s,n),defineLazy(s._zod,"optin",()=>n.innerType._zod.optin),defineLazy(s._zod,"optout",()=>n.innerType._zod.optout),defineLazy(s._zod,"pattern",()=>{const u=n.innerType._zod.pattern;return u?new RegExp(`^(${cleanRegex(u.source)}|null)$`):void 0}),defineLazy(s._zod,"values",()=>n.innerType._zod.values?new Set([...n.innerType._zod.values,null]):void 0),s._zod.parse=(u,f)=>u.value===null?u:n.innerType._zod.run(u,f)}),$ZodDefault=$constructor("$ZodDefault",(s,n)=>{$ZodType.init(s,n),s._zod.optin="optional",defineLazy(s._zod,"values",()=>n.innerType._zod.values),s._zod.parse=(u,f)=>{if(f.direction==="backward")return n.innerType._zod.run(u,f);if(u.value===void 0)return u.value=n.defaultValue,u;const y=n.innerType._zod.run(u,f);return y instanceof Promise?y.then(S=>handleDefaultResult(S,n)):handleDefaultResult(y,n)}});function handleDefaultResult(s,n){return s.value===void 0&&(s.value=n.defaultValue),s}const $ZodPrefault=$constructor("$ZodPrefault",(s,n)=>{$ZodType.init(s,n),s._zod.optin="optional",defineLazy(s._zod,"values",()=>n.innerType._zod.values),s._zod.parse=(u,f)=>(f.direction==="backward"||u.value===void 0&&(u.value=n.defaultValue),n.innerType._zod.run(u,f))}),$ZodNonOptional=$constructor("$ZodNonOptional",(s,n)=>{$ZodType.init(s,n),defineLazy(s._zod,"values",()=>{const u=n.innerType._zod.values;return u?new Set([...u].filter(f=>f!==void 0)):void 0}),s._zod.parse=(u,f)=>{const y=n.innerType._zod.run(u,f);return y instanceof Promise?y.then(S=>handleNonOptionalResult(S,s)):handleNonOptionalResult(y,s)}});function handleNonOptionalResult(s,n){return!s.issues.length&&s.value===void 0&&s.issues.push({code:"invalid_type",expected:"nonoptional",input:s.value,inst:n}),s}const $ZodCatch=$constructor("$ZodCatch",(s,n)=>{$ZodType.init(s,n),defineLazy(s._zod,"optin",()=>n.innerType._zod.optin),defineLazy(s._zod,"optout",()=>n.innerType._zod.optout),defineLazy(s._zod,"values",()=>n.innerType._zod.values),s._zod.parse=(u,f)=>{if(f.direction==="backward")return n.innerType._zod.run(u,f);const y=n.innerType._zod.run(u,f);return y instanceof Promise?y.then(S=>(u.value=S.value,S.issues.length&&(u.value=n.catchValue({...u,error:{issues:S.issues.map(A=>finalizeIssue(A,f,config()))},input:u.value}),u.issues=[]),u)):(u.value=y.value,y.issues.length&&(u.value=n.catchValue({...u,error:{issues:y.issues.map(S=>finalizeIssue(S,f,config()))},input:u.value}),u.issues=[]),u)}}),$ZodPipe=$constructor("$ZodPipe",(s,n)=>{$ZodType.init(s,n),defineLazy(s._zod,"values",()=>n.in._zod.values),defineLazy(s._zod,"optin",()=>n.in._zod.optin),defineLazy(s._zod,"optout",()=>n.out._zod.optout),defineLazy(s._zod,"propValues",()=>n.in._zod.propValues),s._zod.parse=(u,f)=>{if(f.direction==="backward"){const S=n.out._zod.run(u,f);return S instanceof Promise?S.then(A=>handlePipeResult(A,n.in,f)):handlePipeResult(S,n.in,f)}const y=n.in._zod.run(u,f);return y instanceof Promise?y.then(S=>handlePipeResult(S,n.out,f)):handlePipeResult(y,n.out,f)}});function handlePipeResult(s,n,u){return s.issues.length?(s.aborted=!0,s):n._zod.run({value:s.value,issues:s.issues},u)}const $ZodReadonly=$constructor("$ZodReadonly",(s,n)=>{$ZodType.init(s,n),defineLazy(s._zod,"propValues",()=>n.innerType._zod.propValues),defineLazy(s._zod,"values",()=>n.innerType._zod.values),defineLazy(s._zod,"optin",()=>n.innerType?._zod?.optin),defineLazy(s._zod,"optout",()=>n.innerType?._zod?.optout),s._zod.parse=(u,f)=>{if(f.direction==="backward")return n.innerType._zod.run(u,f);const y=n.innerType._zod.run(u,f);return y instanceof Promise?y.then(handleReadonlyResult):handleReadonlyResult(y)}});function handleReadonlyResult(s){return s.value=Object.freeze(s.value),s}const $ZodCustom=$constructor("$ZodCustom",(s,n)=>{$ZodCheck.init(s,n),$ZodType.init(s,n),s._zod.parse=(u,f)=>u,s._zod.check=u=>{const f=u.value,y=n.fn(f);if(y instanceof Promise)return y.then(S=>handleRefineResult(S,u,f,s));handleRefineResult(y,u,f,s)}});function handleRefineResult(s,n,u,f){if(!s){const y={code:"custom",input:u,inst:f,path:[...f._zod.def.path??[]],continue:!f._zod.def.abort};f._zod.def.params&&(y.params=f._zod.def.params),n.issues.push(issue(y))}}var _a$1;class $ZodRegistry{constructor(){this._map=new WeakMap,this._idmap=new Map}add(n,...u){const f=u[0];return this._map.set(n,f),f&&typeof f=="object"&&"id"in f&&this._idmap.set(f.id,n),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(n){const u=this._map.get(n);return u&&typeof u=="object"&&"id"in u&&this._idmap.delete(u.id),this._map.delete(n),this}get(n){const u=n._zod.parent;if(u){const f={...this.get(u)??{}};delete f.id;const y={...f,...this._map.get(n)};return Object.keys(y).length?y:void 0}return this._map.get(n)}has(n){return this._map.has(n)}}function registry(){return new $ZodRegistry}(_a$1=globalThis).__zod_globalRegistry??(_a$1.__zod_globalRegistry=registry());const globalRegistry=globalThis.__zod_globalRegistry;function _string(s,n){return new s({type:"string",...normalizeParams(n)})}function _email(s,n){return new s({type:"string",format:"email",check:"string_format",abort:!1,...normalizeParams(n)})}function _guid(s,n){return new s({type:"string",format:"guid",check:"string_format",abort:!1,...normalizeParams(n)})}function _uuid(s,n){return new s({type:"string",format:"uuid",check:"string_format",abort:!1,...normalizeParams(n)})}function _uuidv4(s,n){return new s({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...normalizeParams(n)})}function _uuidv6(s,n){return new s({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...normalizeParams(n)})}function _uuidv7(s,n){return new s({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...normalizeParams(n)})}function _url$1(s,n){return new s({type:"string",format:"url",check:"string_format",abort:!1,...normalizeParams(n)})}function _emoji(s,n){return new s({type:"string",format:"emoji",check:"string_format",abort:!1,...normalizeParams(n)})}function _nanoid(s,n){return new s({type:"string",format:"nanoid",check:"string_format",abort:!1,...normalizeParams(n)})}function _cuid(s,n){return new s({type:"string",format:"cuid",check:"string_format",abort:!1,...normalizeParams(n)})}function _cuid2(s,n){return new s({type:"string",format:"cuid2",check:"string_format",abort:!1,...normalizeParams(n)})}function _ulid(s,n){return new s({type:"string",format:"ulid",check:"string_format",abort:!1,...normalizeParams(n)})}function _xid(s,n){return new s({type:"string",format:"xid",check:"string_format",abort:!1,...normalizeParams(n)})}function _ksuid(s,n){return new s({type:"string",format:"ksuid",check:"string_format",abort:!1,...normalizeParams(n)})}function _ipv4(s,n){return new s({type:"string",format:"ipv4",check:"string_format",abort:!1,...normalizeParams(n)})}function _ipv6(s,n){return new s({type:"string",format:"ipv6",check:"string_format",abort:!1,...normalizeParams(n)})}function _cidrv4(s,n){return new s({type:"string",format:"cidrv4",check:"string_format",abort:!1,...normalizeParams(n)})}function _cidrv6(s,n){return new s({type:"string",format:"cidrv6",check:"string_format",abort:!1,...normalizeParams(n)})}function _base64(s,n){return new s({type:"string",format:"base64",check:"string_format",abort:!1,...normalizeParams(n)})}function _base64url(s,n){return new s({type:"string",format:"base64url",check:"string_format",abort:!1,...normalizeParams(n)})}function _e164(s,n){return new s({type:"string",format:"e164",check:"string_format",abort:!1,...normalizeParams(n)})}function _jwt(s,n){return new s({type:"string",format:"jwt",check:"string_format",abort:!1,...normalizeParams(n)})}function _isoDateTime(s,n){return new s({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...normalizeParams(n)})}function _isoDate(s,n){return new s({type:"string",format:"date",check:"string_format",...normalizeParams(n)})}function _isoTime(s,n){return new s({type:"string",format:"time",check:"string_format",precision:null,...normalizeParams(n)})}function _isoDuration(s,n){return new s({type:"string",format:"duration",check:"string_format",...normalizeParams(n)})}function _number(s,n){return new s({type:"number",checks:[],...normalizeParams(n)})}function _coercedNumber(s,n){return new s({type:"number",coerce:!0,checks:[],...normalizeParams(n)})}function _int(s,n){return new s({type:"number",check:"number_format",abort:!1,format:"safeint",...normalizeParams(n)})}function _boolean(s,n){return new s({type:"boolean",...normalizeParams(n)})}function _null$1(s,n){return new s({type:"null",...normalizeParams(n)})}function _any(s){return new s({type:"any"})}function _unknown(s){return new s({type:"unknown"})}function _never(s,n){return new s({type:"never",...normalizeParams(n)})}function _lt(s,n){return new $ZodCheckLessThan({check:"less_than",...normalizeParams(n),value:s,inclusive:!1})}function _lte(s,n){return new $ZodCheckLessThan({check:"less_than",...normalizeParams(n),value:s,inclusive:!0})}function _gt(s,n){return new $ZodCheckGreaterThan({check:"greater_than",...normalizeParams(n),value:s,inclusive:!1})}function _gte(s,n){return new $ZodCheckGreaterThan({check:"greater_than",...normalizeParams(n),value:s,inclusive:!0})}function _multipleOf(s,n){return new $ZodCheckMultipleOf({check:"multiple_of",...normalizeParams(n),value:s})}function _maxLength(s,n){return new $ZodCheckMaxLength({check:"max_length",...normalizeParams(n),maximum:s})}function _minLength(s,n){return new $ZodCheckMinLength({check:"min_length",...normalizeParams(n),minimum:s})}function _length(s,n){return new $ZodCheckLengthEquals({check:"length_equals",...normalizeParams(n),length:s})}function _regex(s,n){return new $ZodCheckRegex({check:"string_format",format:"regex",...normalizeParams(n),pattern:s})}function _lowercase(s){return new $ZodCheckLowerCase({check:"string_format",format:"lowercase",...normalizeParams(s)})}function _uppercase(s){return new $ZodCheckUpperCase({check:"string_format",format:"uppercase",...normalizeParams(s)})}function _includes(s,n){return new $ZodCheckIncludes({check:"string_format",format:"includes",...normalizeParams(n),includes:s})}function _startsWith(s,n){return new $ZodCheckStartsWith({check:"string_format",format:"starts_with",...normalizeParams(n),prefix:s})}function _endsWith(s,n){return new $ZodCheckEndsWith({check:"string_format",format:"ends_with",...normalizeParams(n),suffix:s})}function _overwrite(s){return new $ZodCheckOverwrite({check:"overwrite",tx:s})}function _normalize(s){return _overwrite(n=>n.normalize(s))}function _trim(){return _overwrite(s=>s.trim())}function _toLowerCase(){return _overwrite(s=>s.toLowerCase())}function _toUpperCase(){return _overwrite(s=>s.toUpperCase())}function _slugify(){return _overwrite(s=>slugify(s))}function _array(s,n,u){return new s({type:"array",element:n,...normalizeParams(u)})}function _custom(s,n,u){const f=normalizeParams(u);return f.abort??(f.abort=!0),new s({type:"custom",check:"custom",fn:n,...f})}function _refine(s,n,u){return new s({type:"custom",check:"custom",fn:n,...normalizeParams(u)})}function _superRefine(s){const n=_check(u=>(u.addIssue=f=>{if(typeof f=="string")u.issues.push(issue(f,u.value,n._zod.def));else{const y=f;y.fatal&&(y.continue=!1),y.code??(y.code="custom"),y.input??(y.input=u.value),y.inst??(y.inst=n),y.continue??(y.continue=!n._zod.def.abort),u.issues.push(issue(y))}},s(u.value,u)));return n}function _check(s,n){const u=new $ZodCheck({check:"custom",...normalizeParams(n)});return u._zod.check=s,u}function initializeContext(s){let n=s?.target??"draft-2020-12";return n==="draft-4"&&(n="draft-04"),n==="draft-7"&&(n="draft-07"),{processors:s.processors??{},metadataRegistry:s?.metadata??globalRegistry,target:n,unrepresentable:s?.unrepresentable??"throw",override:s?.override??(()=>{}),io:s?.io??"output",counter:0,seen:new Map,cycles:s?.cycles??"ref",reused:s?.reused??"inline",external:s?.external??void 0}}function process$1(s,n,u={path:[],schemaPath:[]}){var f;const y=s._zod.def,S=n.seen.get(s);if(S)return S.count++,u.schemaPath.includes(s)&&(S.cycle=u.path),S.schema;const A={schema:{},count:1,cycle:void 0,path:u.path};n.seen.set(s,A);const w=s._zod.toJSONSchema?.();if(w)A.schema=w;else{const T={...u,schemaPath:[...u.schemaPath,s],path:u.path};if(s._zod.processJSONSchema)s._zod.processJSONSchema(n,A.schema,T);else{const I=A.schema,N=n.processors[y.type];if(!N)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${y.type}`);N(s,n,I,T)}const R=s._zod.parent;R&&(A.ref||(A.ref=R),process$1(R,n,T),n.seen.get(R).isParent=!0)}const C=n.metadataRegistry.get(s);return C&&Object.assign(A.schema,C),n.io==="input"&&isTransforming(s)&&(delete A.schema.examples,delete A.schema.default),n.io==="input"&&A.schema._prefault&&((f=A.schema).default??(f.default=A.schema._prefault)),delete A.schema._prefault,n.seen.get(s).schema}function extractDefs(s,n){const u=s.seen.get(n);if(!u)throw new Error("Unprocessed schema. This is a bug in Zod.");const f=new Map;for(const A of s.seen.entries()){const w=s.metadataRegistry.get(A[0])?.id;if(w){const C=f.get(w);if(C&&C!==A[0])throw new Error(`Duplicate schema id "${w}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);f.set(w,A[0])}}const y=A=>{const w=s.target==="draft-2020-12"?"$defs":"definitions";if(s.external){const R=s.external.registry.get(A[0])?.id,I=s.external.uri??(L=>L);if(R)return{ref:I(R)};const N=A[1].defId??A[1].schema.id??`schema${s.counter++}`;return A[1].defId=N,{defId:N,ref:`${I("__shared")}#/${w}/${N}`}}if(A[1]===u)return{ref:"#"};const C=`#/${w}/`,T=A[1].schema.id??`__schema${s.counter++}`;return{defId:T,ref:C+T}},S=A=>{if(A[1].schema.$ref)return;const w=A[1],{ref:C,defId:T}=y(A);w.def={...w.schema},T&&(w.defId=T);const R=w.schema;for(const I in R)delete R[I];R.$ref=C};if(s.cycles==="throw")for(const A of s.seen.entries()){const w=A[1];if(w.cycle)throw new Error(`Cycle detected: #/${w.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const A of s.seen.entries()){const w=A[1];if(n===A[0]){S(A);continue}if(s.external){const C=s.external.registry.get(A[0])?.id;if(n!==A[0]&&C){S(A);continue}}if(s.metadataRegistry.get(A[0])?.id){S(A);continue}if(w.cycle){S(A);continue}if(w.count>1&&s.reused==="ref"){S(A);continue}}}function finalize(s,n){const u=s.seen.get(n);if(!u)throw new Error("Unprocessed schema. This is a bug in Zod.");const f=A=>{const w=s.seen.get(A);if(w.ref===null)return;const C=w.def??w.schema,T={...C},R=w.ref;if(w.ref=null,R){f(R);const N=s.seen.get(R),L=N.schema;if(L.$ref&&(s.target==="draft-07"||s.target==="draft-04"||s.target==="openapi-3.0")?(C.allOf=C.allOf??[],C.allOf.push(L)):Object.assign(C,L),Object.assign(C,T),A._zod.parent===R)for(const F in C)F==="$ref"||F==="allOf"||F in T||delete C[F];if(L.$ref&&N.def)for(const F in C)F==="$ref"||F==="allOf"||F in N.def&&JSON.stringify(C[F])===JSON.stringify(N.def[F])&&delete C[F]}const I=A._zod.parent;if(I&&I!==R){f(I);const N=s.seen.get(I);if(N?.schema.$ref&&(C.$ref=N.schema.$ref,N.def))for(const L in C)L==="$ref"||L==="allOf"||L in N.def&&JSON.stringify(C[L])===JSON.stringify(N.def[L])&&delete C[L]}s.override({zodSchema:A,jsonSchema:C,path:w.path??[]})};for(const A of[...s.seen.entries()].reverse())f(A[0]);const y={};if(s.target==="draft-2020-12"?y.$schema="https://json-schema.org/draft/2020-12/schema":s.target==="draft-07"?y.$schema="http://json-schema.org/draft-07/schema#":s.target==="draft-04"?y.$schema="http://json-schema.org/draft-04/schema#":s.target,s.external?.uri){const A=s.external.registry.get(n)?.id;if(!A)throw new Error("Schema is missing an `id` property");y.$id=s.external.uri(A)}Object.assign(y,u.def??u.schema);const S=s.external?.defs??{};for(const A of s.seen.entries()){const w=A[1];w.def&&w.defId&&(S[w.defId]=w.def)}s.external||Object.keys(S).length>0&&(s.target==="draft-2020-12"?y.$defs=S:y.definitions=S);try{const A=JSON.parse(JSON.stringify(y));return Object.defineProperty(A,"~standard",{value:{...n["~standard"],jsonSchema:{input:createStandardJSONSchemaMethod(n,"input",s.processors),output:createStandardJSONSchemaMethod(n,"output",s.processors)}},enumerable:!1,writable:!1}),A}catch{throw new Error("Error converting schema to JSON.")}}function isTransforming(s,n){const u=n??{seen:new Set};if(u.seen.has(s))return!1;u.seen.add(s);const f=s._zod.def;if(f.type==="transform")return!0;if(f.type==="array")return isTransforming(f.element,u);if(f.type==="set")return isTransforming(f.valueType,u);if(f.type==="lazy")return isTransforming(f.getter(),u);if(f.type==="promise"||f.type==="optional"||f.type==="nonoptional"||f.type==="nullable"||f.type==="readonly"||f.type==="default"||f.type==="prefault")return isTransforming(f.innerType,u);if(f.type==="intersection")return isTransforming(f.left,u)||isTransforming(f.right,u);if(f.type==="record"||f.type==="map")return isTransforming(f.keyType,u)||isTransforming(f.valueType,u);if(f.type==="pipe")return isTransforming(f.in,u)||isTransforming(f.out,u);if(f.type==="object"){for(const y in f.shape)if(isTransforming(f.shape[y],u))return!0;return!1}if(f.type==="union"){for(const y of f.options)if(isTransforming(y,u))return!0;return!1}if(f.type==="tuple"){for(const y of f.items)if(isTransforming(y,u))return!0;return!!(f.rest&&isTransforming(f.rest,u))}return!1}const createToJSONSchemaMethod=(s,n={})=>u=>{const f=initializeContext({...u,processors:n});return process$1(s,f),extractDefs(f,s),finalize(f,s)},createStandardJSONSchemaMethod=(s,n,u={})=>f=>{const{libraryOptions:y,target:S}=f??{},A=initializeContext({...y??{},target:S,io:n,processors:u});return process$1(s,A),extractDefs(A,s),finalize(A,s)},formatMap={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},stringProcessor=(s,n,u,f)=>{const y=u;y.type="string";const{minimum:S,maximum:A,format:w,patterns:C,contentEncoding:T}=s._zod.bag;if(typeof S=="number"&&(y.minLength=S),typeof A=="number"&&(y.maxLength=A),w&&(y.format=formatMap[w]??w,y.format===""&&delete y.format,w==="time"&&delete y.format),T&&(y.contentEncoding=T),C&&C.size>0){const R=[...C];R.length===1?y.pattern=R[0].source:R.length>1&&(y.allOf=[...R.map(I=>({...n.target==="draft-07"||n.target==="draft-04"||n.target==="openapi-3.0"?{type:"string"}:{},pattern:I.source}))])}},numberProcessor=(s,n,u,f)=>{const y=u,{minimum:S,maximum:A,format:w,multipleOf:C,exclusiveMaximum:T,exclusiveMinimum:R}=s._zod.bag;typeof w=="string"&&w.includes("int")?y.type="integer":y.type="number",typeof R=="number"&&(n.target==="draft-04"||n.target==="openapi-3.0"?(y.minimum=R,y.exclusiveMinimum=!0):y.exclusiveMinimum=R),typeof S=="number"&&(y.minimum=S,typeof R=="number"&&n.target!=="draft-04"&&(R>=S?delete y.minimum:delete y.exclusiveMinimum)),typeof T=="number"&&(n.target==="draft-04"||n.target==="openapi-3.0"?(y.maximum=T,y.exclusiveMaximum=!0):y.exclusiveMaximum=T),typeof A=="number"&&(y.maximum=A,typeof T=="number"&&n.target!=="draft-04"&&(T<=A?delete y.maximum:delete y.exclusiveMaximum)),typeof C=="number"&&(y.multipleOf=C)},booleanProcessor=(s,n,u,f)=>{u.type="boolean"},nullProcessor=(s,n,u,f)=>{n.target==="openapi-3.0"?(u.type="string",u.nullable=!0,u.enum=[null]):u.type="null"},neverProcessor=(s,n,u,f)=>{u.not={}},anyProcessor=(s,n,u,f)=>{},unknownProcessor=(s,n,u,f)=>{},enumProcessor=(s,n,u,f)=>{const y=s._zod.def,S=getEnumValues(y.entries);S.every(A=>typeof A=="number")&&(u.type="number"),S.every(A=>typeof A=="string")&&(u.type="string"),u.enum=S},literalProcessor=(s,n,u,f)=>{const y=s._zod.def,S=[];for(const A of y.values)if(A===void 0){if(n.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof A=="bigint"){if(n.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");S.push(Number(A))}else S.push(A);if(S.length!==0)if(S.length===1){const A=S[0];u.type=A===null?"null":typeof A,n.target==="draft-04"||n.target==="openapi-3.0"?u.enum=[A]:u.const=A}else S.every(A=>typeof A=="number")&&(u.type="number"),S.every(A=>typeof A=="string")&&(u.type="string"),S.every(A=>typeof A=="boolean")&&(u.type="boolean"),S.every(A=>A===null)&&(u.type="null"),u.enum=S},customProcessor=(s,n,u,f)=>{if(n.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},transformProcessor=(s,n,u,f)=>{if(n.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},arrayProcessor=(s,n,u,f)=>{const y=u,S=s._zod.def,{minimum:A,maximum:w}=s._zod.bag;typeof A=="number"&&(y.minItems=A),typeof w=="number"&&(y.maxItems=w),y.type="array",y.items=process$1(S.element,n,{...f,path:[...f.path,"items"]})},objectProcessor=(s,n,u,f)=>{const y=u,S=s._zod.def;y.type="object",y.properties={};const A=S.shape;for(const T in A)y.properties[T]=process$1(A[T],n,{...f,path:[...f.path,"properties",T]});const w=new Set(Object.keys(A)),C=new Set([...w].filter(T=>{const R=S.shape[T]._zod;return n.io==="input"?R.optin===void 0:R.optout===void 0}));C.size>0&&(y.required=Array.from(C)),S.catchall?._zod.def.type==="never"?y.additionalProperties=!1:S.catchall?S.catchall&&(y.additionalProperties=process$1(S.catchall,n,{...f,path:[...f.path,"additionalProperties"]})):n.io==="output"&&(y.additionalProperties=!1)},unionProcessor=(s,n,u,f)=>{const y=s._zod.def,S=y.inclusive===!1,A=y.options.map((w,C)=>process$1(w,n,{...f,path:[...f.path,S?"oneOf":"anyOf",C]}));S?u.oneOf=A:u.anyOf=A},intersectionProcessor=(s,n,u,f)=>{const y=s._zod.def,S=process$1(y.left,n,{...f,path:[...f.path,"allOf",0]}),A=process$1(y.right,n,{...f,path:[...f.path,"allOf",1]}),w=T=>"allOf"in T&&Object.keys(T).length===1,C=[...w(S)?S.allOf:[S],...w(A)?A.allOf:[A]];u.allOf=C},recordProcessor=(s,n,u,f)=>{const y=u,S=s._zod.def;y.type="object";const A=S.keyType,w=A._zod.bag?.patterns;if(S.mode==="loose"&&w&&w.size>0){const T=process$1(S.valueType,n,{...f,path:[...f.path,"patternProperties","*"]});y.patternProperties={};for(const R of w)y.patternProperties[R.source]=T}else(n.target==="draft-07"||n.target==="draft-2020-12")&&(y.propertyNames=process$1(S.keyType,n,{...f,path:[...f.path,"propertyNames"]})),y.additionalProperties=process$1(S.valueType,n,{...f,path:[...f.path,"additionalProperties"]});const C=A._zod.values;if(C){const T=[...C].filter(R=>typeof R=="string"||typeof R=="number");T.length>0&&(y.required=T)}},nullableProcessor=(s,n,u,f)=>{const y=s._zod.def,S=process$1(y.innerType,n,f),A=n.seen.get(s);n.target==="openapi-3.0"?(A.ref=y.innerType,u.nullable=!0):u.anyOf=[S,{type:"null"}]},nonoptionalProcessor=(s,n,u,f)=>{const y=s._zod.def;process$1(y.innerType,n,f);const S=n.seen.get(s);S.ref=y.innerType},defaultProcessor=(s,n,u,f)=>{const y=s._zod.def;process$1(y.innerType,n,f);const S=n.seen.get(s);S.ref=y.innerType,u.default=JSON.parse(JSON.stringify(y.defaultValue))},prefaultProcessor=(s,n,u,f)=>{const y=s._zod.def;process$1(y.innerType,n,f);const S=n.seen.get(s);S.ref=y.innerType,n.io==="input"&&(u._prefault=JSON.parse(JSON.stringify(y.defaultValue)))},catchProcessor=(s,n,u,f)=>{const y=s._zod.def;process$1(y.innerType,n,f);const S=n.seen.get(s);S.ref=y.innerType;let A;try{A=y.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}u.default=A},pipeProcessor=(s,n,u,f)=>{const y=s._zod.def,S=n.io==="input"?y.in._zod.def.type==="transform"?y.out:y.in:y.out;process$1(S,n,f);const A=n.seen.get(s);A.ref=S},readonlyProcessor=(s,n,u,f)=>{const y=s._zod.def;process$1(y.innerType,n,f);const S=n.seen.get(s);S.ref=y.innerType,u.readOnly=!0},optionalProcessor=(s,n,u,f)=>{const y=s._zod.def;process$1(y.innerType,n,f);const S=n.seen.get(s);S.ref=y.innerType};function isZ4Schema(s){return!!s._zod}function safeParse$1(s,n){return isZ4Schema(s)?safeParse$2(s,n):s.safeParse(n)}function getObjectShape(s){if(!s)return;let n;if(isZ4Schema(s)?n=s._zod?.def?.shape:n=s.shape,!!n){if(typeof n=="function")try{return n()}catch{return}return n}}function getLiteralValue(s){if(isZ4Schema(s)){const f=s._zod?.def;if(f){if(f.value!==void 0)return f.value;if(Array.isArray(f.values)&&f.values.length>0)return f.values[0]}}const n=s._def;if(n){if(n.value!==void 0)return n.value;if(Array.isArray(n.values)&&n.values.length>0)return n.values[0]}const u=s.value;if(u!==void 0)return u}const ZodISODateTime=$constructor("ZodISODateTime",(s,n)=>{$ZodISODateTime.init(s,n),ZodStringFormat.init(s,n)});function datetime(s){return _isoDateTime(ZodISODateTime,s)}const ZodISODate=$constructor("ZodISODate",(s,n)=>{$ZodISODate.init(s,n),ZodStringFormat.init(s,n)});function date(s){return _isoDate(ZodISODate,s)}const ZodISOTime=$constructor("ZodISOTime",(s,n)=>{$ZodISOTime.init(s,n),ZodStringFormat.init(s,n)});function time(s){return _isoTime(ZodISOTime,s)}const ZodISODuration=$constructor("ZodISODuration",(s,n)=>{$ZodISODuration.init(s,n),ZodStringFormat.init(s,n)});function duration(s){return _isoDuration(ZodISODuration,s)}const initializer=(s,n)=>{$ZodError.init(s,n),s.name="ZodError",Object.defineProperties(s,{format:{value:u=>formatError(s,u)},flatten:{value:u=>flattenError$1(s,u)},addIssue:{value:u=>{s.issues.push(u),s.message=JSON.stringify(s.issues,jsonStringifyReplacer,2)}},addIssues:{value:u=>{s.issues.push(...u),s.message=JSON.stringify(s.issues,jsonStringifyReplacer,2)}},isEmpty:{get(){return s.issues.length===0}}})},ZodRealError=$constructor("ZodError",initializer,{Parent:Error}),parse=_parse(ZodRealError),parseAsync=_parseAsync(ZodRealError),safeParse=_safeParse(ZodRealError),safeParseAsync=_safeParseAsync(ZodRealError),encode=_encode(ZodRealError),decode=_decode(ZodRealError),encodeAsync=_encodeAsync(ZodRealError),decodeAsync=_decodeAsync(ZodRealError),safeEncode=_safeEncode(ZodRealError),safeDecode=_safeDecode(ZodRealError),safeEncodeAsync=_safeEncodeAsync(ZodRealError),safeDecodeAsync=_safeDecodeAsync(ZodRealError),ZodType=$constructor("ZodType",(s,n)=>($ZodType.init(s,n),Object.assign(s["~standard"],{jsonSchema:{input:createStandardJSONSchemaMethod(s,"input"),output:createStandardJSONSchemaMethod(s,"output")}}),s.toJSONSchema=createToJSONSchemaMethod(s,{}),s.def=n,s.type=n.type,Object.defineProperty(s,"_def",{value:n}),s.check=(...u)=>s.clone(mergeDefs(n,{checks:[...n.checks??[],...u.map(f=>typeof f=="function"?{_zod:{check:f,def:{check:"custom"},onattach:[]}}:f)]}),{parent:!0}),s.with=s.check,s.clone=(u,f)=>clone(s,u,f),s.brand=()=>s,s.register=((u,f)=>(u.add(s,f),s)),s.parse=(u,f)=>parse(s,u,f,{callee:s.parse}),s.safeParse=(u,f)=>safeParse(s,u,f),s.parseAsync=async(u,f)=>parseAsync(s,u,f,{callee:s.parseAsync}),s.safeParseAsync=async(u,f)=>safeParseAsync(s,u,f),s.spa=s.safeParseAsync,s.encode=(u,f)=>encode(s,u,f),s.decode=(u,f)=>decode(s,u,f),s.encodeAsync=async(u,f)=>encodeAsync(s,u,f),s.decodeAsync=async(u,f)=>decodeAsync(s,u,f),s.safeEncode=(u,f)=>safeEncode(s,u,f),s.safeDecode=(u,f)=>safeDecode(s,u,f),s.safeEncodeAsync=async(u,f)=>safeEncodeAsync(s,u,f),s.safeDecodeAsync=async(u,f)=>safeDecodeAsync(s,u,f),s.refine=(u,f)=>s.check(refine(u,f)),s.superRefine=u=>s.check(superRefine(u)),s.overwrite=u=>s.check(_overwrite(u)),s.optional=()=>optional(s),s.exactOptional=()=>exactOptional(s),s.nullable=()=>nullable(s),s.nullish=()=>optional(nullable(s)),s.nonoptional=u=>nonoptional(s,u),s.array=()=>array(s),s.or=u=>union([s,u]),s.and=u=>intersection(s,u),s.transform=u=>pipe(s,transform(u)),s.default=u=>_default(s,u),s.prefault=u=>prefault(s,u),s.catch=u=>_catch(s,u),s.pipe=u=>pipe(s,u),s.readonly=()=>readonly(s),s.describe=u=>{const f=s.clone();return globalRegistry.add(f,{description:u}),f},Object.defineProperty(s,"description",{get(){return globalRegistry.get(s)?.description},configurable:!0}),s.meta=(...u)=>{if(u.length===0)return globalRegistry.get(s);const f=s.clone();return globalRegistry.add(f,u[0]),f},s.isOptional=()=>s.safeParse(void 0).success,s.isNullable=()=>s.safeParse(null).success,s.apply=u=>u(s),s)),_ZodString=$constructor("_ZodString",(s,n)=>{$ZodString.init(s,n),ZodType.init(s,n),s._zod.processJSONSchema=(f,y,S)=>stringProcessor(s,f,y);const u=s._zod.bag;s.format=u.format??null,s.minLength=u.minimum??null,s.maxLength=u.maximum??null,s.regex=(...f)=>s.check(_regex(...f)),s.includes=(...f)=>s.check(_includes(...f)),s.startsWith=(...f)=>s.check(_startsWith(...f)),s.endsWith=(...f)=>s.check(_endsWith(...f)),s.min=(...f)=>s.check(_minLength(...f)),s.max=(...f)=>s.check(_maxLength(...f)),s.length=(...f)=>s.check(_length(...f)),s.nonempty=(...f)=>s.check(_minLength(1,...f)),s.lowercase=f=>s.check(_lowercase(f)),s.uppercase=f=>s.check(_uppercase(f)),s.trim=()=>s.check(_trim()),s.normalize=(...f)=>s.check(_normalize(...f)),s.toLowerCase=()=>s.check(_toLowerCase()),s.toUpperCase=()=>s.check(_toUpperCase()),s.slugify=()=>s.check(_slugify())}),ZodString=$constructor("ZodString",(s,n)=>{$ZodString.init(s,n),_ZodString.init(s,n),s.email=u=>s.check(_email(ZodEmail,u)),s.url=u=>s.check(_url$1(ZodURL,u)),s.jwt=u=>s.check(_jwt(ZodJWT,u)),s.emoji=u=>s.check(_emoji(ZodEmoji,u)),s.guid=u=>s.check(_guid(ZodGUID,u)),s.uuid=u=>s.check(_uuid(ZodUUID,u)),s.uuidv4=u=>s.check(_uuidv4(ZodUUID,u)),s.uuidv6=u=>s.check(_uuidv6(ZodUUID,u)),s.uuidv7=u=>s.check(_uuidv7(ZodUUID,u)),s.nanoid=u=>s.check(_nanoid(ZodNanoID,u)),s.guid=u=>s.check(_guid(ZodGUID,u)),s.cuid=u=>s.check(_cuid(ZodCUID,u)),s.cuid2=u=>s.check(_cuid2(ZodCUID2,u)),s.ulid=u=>s.check(_ulid(ZodULID,u)),s.base64=u=>s.check(_base64(ZodBase64,u)),s.base64url=u=>s.check(_base64url(ZodBase64URL,u)),s.xid=u=>s.check(_xid(ZodXID,u)),s.ksuid=u=>s.check(_ksuid(ZodKSUID,u)),s.ipv4=u=>s.check(_ipv4(ZodIPv4,u)),s.ipv6=u=>s.check(_ipv6(ZodIPv6,u)),s.cidrv4=u=>s.check(_cidrv4(ZodCIDRv4,u)),s.cidrv6=u=>s.check(_cidrv6(ZodCIDRv6,u)),s.e164=u=>s.check(_e164(ZodE164,u)),s.datetime=u=>s.check(datetime(u)),s.date=u=>s.check(date(u)),s.time=u=>s.check(time(u)),s.duration=u=>s.check(duration(u))});function string(s){return _string(ZodString,s)}const ZodStringFormat=$constructor("ZodStringFormat",(s,n)=>{$ZodStringFormat.init(s,n),_ZodString.init(s,n)}),ZodEmail=$constructor("ZodEmail",(s,n)=>{$ZodEmail.init(s,n),ZodStringFormat.init(s,n)}),ZodGUID=$constructor("ZodGUID",(s,n)=>{$ZodGUID.init(s,n),ZodStringFormat.init(s,n)}),ZodUUID=$constructor("ZodUUID",(s,n)=>{$ZodUUID.init(s,n),ZodStringFormat.init(s,n)}),ZodURL=$constructor("ZodURL",(s,n)=>{$ZodURL.init(s,n),ZodStringFormat.init(s,n)});function url(s){return _url$1(ZodURL,s)}const ZodEmoji=$constructor("ZodEmoji",(s,n)=>{$ZodEmoji.init(s,n),ZodStringFormat.init(s,n)}),ZodNanoID=$constructor("ZodNanoID",(s,n)=>{$ZodNanoID.init(s,n),ZodStringFormat.init(s,n)}),ZodCUID=$constructor("ZodCUID",(s,n)=>{$ZodCUID.init(s,n),ZodStringFormat.init(s,n)}),ZodCUID2=$constructor("ZodCUID2",(s,n)=>{$ZodCUID2.init(s,n),ZodStringFormat.init(s,n)}),ZodULID=$constructor("ZodULID",(s,n)=>{$ZodULID.init(s,n),ZodStringFormat.init(s,n)}),ZodXID=$constructor("ZodXID",(s,n)=>{$ZodXID.init(s,n),ZodStringFormat.init(s,n)}),ZodKSUID=$constructor("ZodKSUID",(s,n)=>{$ZodKSUID.init(s,n),ZodStringFormat.init(s,n)}),ZodIPv4=$constructor("ZodIPv4",(s,n)=>{$ZodIPv4.init(s,n),ZodStringFormat.init(s,n)}),ZodIPv6=$constructor("ZodIPv6",(s,n)=>{$ZodIPv6.init(s,n),ZodStringFormat.init(s,n)}),ZodCIDRv4=$constructor("ZodCIDRv4",(s,n)=>{$ZodCIDRv4.init(s,n),ZodStringFormat.init(s,n)}),ZodCIDRv6=$constructor("ZodCIDRv6",(s,n)=>{$ZodCIDRv6.init(s,n),ZodStringFormat.init(s,n)}),ZodBase64=$constructor("ZodBase64",(s,n)=>{$ZodBase64.init(s,n),ZodStringFormat.init(s,n)}),ZodBase64URL=$constructor("ZodBase64URL",(s,n)=>{$ZodBase64URL.init(s,n),ZodStringFormat.init(s,n)}),ZodE164=$constructor("ZodE164",(s,n)=>{$ZodE164.init(s,n),ZodStringFormat.init(s,n)}),ZodJWT=$constructor("ZodJWT",(s,n)=>{$ZodJWT.init(s,n),ZodStringFormat.init(s,n)}),ZodNumber=$constructor("ZodNumber",(s,n)=>{$ZodNumber.init(s,n),ZodType.init(s,n),s._zod.processJSONSchema=(f,y,S)=>numberProcessor(s,f,y),s.gt=(f,y)=>s.check(_gt(f,y)),s.gte=(f,y)=>s.check(_gte(f,y)),s.min=(f,y)=>s.check(_gte(f,y)),s.lt=(f,y)=>s.check(_lt(f,y)),s.lte=(f,y)=>s.check(_lte(f,y)),s.max=(f,y)=>s.check(_lte(f,y)),s.int=f=>s.check(int(f)),s.safe=f=>s.check(int(f)),s.positive=f=>s.check(_gt(0,f)),s.nonnegative=f=>s.check(_gte(0,f)),s.negative=f=>s.check(_lt(0,f)),s.nonpositive=f=>s.check(_lte(0,f)),s.multipleOf=(f,y)=>s.check(_multipleOf(f,y)),s.step=(f,y)=>s.check(_multipleOf(f,y)),s.finite=()=>s;const u=s._zod.bag;s.minValue=Math.max(u.minimum??Number.NEGATIVE_INFINITY,u.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,s.maxValue=Math.min(u.maximum??Number.POSITIVE_INFINITY,u.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,s.isInt=(u.format??"").includes("int")||Number.isSafeInteger(u.multipleOf??.5),s.isFinite=!0,s.format=u.format??null});function number$1(s){return _number(ZodNumber,s)}const ZodNumberFormat=$constructor("ZodNumberFormat",(s,n)=>{$ZodNumberFormat.init(s,n),ZodNumber.init(s,n)});function int(s){return _int(ZodNumberFormat,s)}const ZodBoolean=$constructor("ZodBoolean",(s,n)=>{$ZodBoolean.init(s,n),ZodType.init(s,n),s._zod.processJSONSchema=(u,f,y)=>booleanProcessor(s,u,f)});function boolean(s){return _boolean(ZodBoolean,s)}const ZodNull=$constructor("ZodNull",(s,n)=>{$ZodNull.init(s,n),ZodType.init(s,n),s._zod.processJSONSchema=(u,f,y)=>nullProcessor(s,u,f)});function _null(s){return _null$1(ZodNull,s)}const ZodAny=$constructor("ZodAny",(s,n)=>{$ZodAny.init(s,n),ZodType.init(s,n),s._zod.processJSONSchema=(u,f,y)=>anyProcessor()});function any(){return _any(ZodAny)}const ZodUnknown=$constructor("ZodUnknown",(s,n)=>{$ZodUnknown.init(s,n),ZodType.init(s,n),s._zod.processJSONSchema=(u,f,y)=>unknownProcessor()});function unknown(){return _unknown(ZodUnknown)}const ZodNever=$constructor("ZodNever",(s,n)=>{$ZodNever.init(s,n),ZodType.init(s,n),s._zod.processJSONSchema=(u,f,y)=>neverProcessor(s,u,f)});function never(s){return _never(ZodNever,s)}const ZodArray=$constructor("ZodArray",(s,n)=>{$ZodArray.init(s,n),ZodType.init(s,n),s._zod.processJSONSchema=(u,f,y)=>arrayProcessor(s,u,f,y),s.element=n.element,s.min=(u,f)=>s.check(_minLength(u,f)),s.nonempty=u=>s.check(_minLength(1,u)),s.max=(u,f)=>s.check(_maxLength(u,f)),s.length=(u,f)=>s.check(_length(u,f)),s.unwrap=()=>s.element});function array(s,n){return _array(ZodArray,s,n)}const ZodObject=$constructor("ZodObject",(s,n)=>{$ZodObjectJIT.init(s,n),ZodType.init(s,n),s._zod.processJSONSchema=(u,f,y)=>objectProcessor(s,u,f,y),defineLazy(s,"shape",()=>n.shape),s.keyof=()=>_enum$2(Object.keys(s._zod.def.shape)),s.catchall=u=>s.clone({...s._zod.def,catchall:u}),s.passthrough=()=>s.clone({...s._zod.def,catchall:unknown()}),s.loose=()=>s.clone({...s._zod.def,catchall:unknown()}),s.strict=()=>s.clone({...s._zod.def,catchall:never()}),s.strip=()=>s.clone({...s._zod.def,catchall:void 0}),s.extend=u=>extend$1(s,u),s.safeExtend=u=>safeExtend(s,u),s.merge=u=>merge(s,u),s.pick=u=>pick(s,u),s.omit=u=>omit(s,u),s.partial=(...u)=>partial(ZodOptional,s,u[0]),s.required=(...u)=>required$4(ZodNonOptional,s,u[0])});function object(s,n){const u={type:"object",shape:s??{},...normalizeParams(n)};return new ZodObject(u)}function looseObject(s,n){return new ZodObject({type:"object",shape:s,catchall:unknown(),...normalizeParams(n)})}const ZodUnion=$constructor("ZodUnion",(s,n)=>{$ZodUnion.init(s,n),ZodType.init(s,n),s._zod.processJSONSchema=(u,f,y)=>unionProcessor(s,u,f,y),s.options=n.options});function union(s,n){return new ZodUnion({type:"union",options:s,...normalizeParams(n)})}const ZodDiscriminatedUnion=$constructor("ZodDiscriminatedUnion",(s,n)=>{ZodUnion.init(s,n),$ZodDiscriminatedUnion.init(s,n)});function discriminatedUnion(s,n,u){return new ZodDiscriminatedUnion({type:"union",options:n,discriminator:s,...normalizeParams(u)})}const ZodIntersection=$constructor("ZodIntersection",(s,n)=>{$ZodIntersection.init(s,n),ZodType.init(s,n),s._zod.processJSONSchema=(u,f,y)=>intersectionProcessor(s,u,f,y)});function intersection(s,n){return new ZodIntersection({type:"intersection",left:s,right:n})}const ZodRecord=$constructor("ZodRecord",(s,n)=>{$ZodRecord.init(s,n),ZodType.init(s,n),s._zod.processJSONSchema=(u,f,y)=>recordProcessor(s,u,f,y),s.keyType=n.keyType,s.valueType=n.valueType});function record(s,n,u){return new ZodRecord({type:"record",keyType:s,valueType:n,...normalizeParams(u)})}const ZodEnum=$constructor("ZodEnum",(s,n)=>{$ZodEnum.init(s,n),ZodType.init(s,n),s._zod.processJSONSchema=(f,y,S)=>enumProcessor(s,f,y),s.enum=n.entries,s.options=Object.values(n.entries);const u=new Set(Object.keys(n.entries));s.extract=(f,y)=>{const S={};for(const A of f)if(u.has(A))S[A]=n.entries[A];else throw new Error(`Key ${A} not found in enum`);return new ZodEnum({...n,checks:[],...normalizeParams(y),entries:S})},s.exclude=(f,y)=>{const S={...n.entries};for(const A of f)if(u.has(A))delete S[A];else throw new Error(`Key ${A} not found in enum`);return new ZodEnum({...n,checks:[],...normalizeParams(y),entries:S})}});function _enum$2(s,n){const u=Array.isArray(s)?Object.fromEntries(s.map(f=>[f,f])):s;return new ZodEnum({type:"enum",entries:u,...normalizeParams(n)})}const ZodLiteral=$constructor("ZodLiteral",(s,n)=>{$ZodLiteral.init(s,n),ZodType.init(s,n),s._zod.processJSONSchema=(u,f,y)=>literalProcessor(s,u,f),s.values=new Set(n.values),Object.defineProperty(s,"value",{get(){if(n.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return n.values[0]}})});function literal(s,n){return new ZodLiteral({type:"literal",values:Array.isArray(s)?s:[s],...normalizeParams(n)})}const ZodTransform=$constructor("ZodTransform",(s,n)=>{$ZodTransform.init(s,n),ZodType.init(s,n),s._zod.processJSONSchema=(u,f,y)=>transformProcessor(s,u),s._zod.parse=(u,f)=>{if(f.direction==="backward")throw new $ZodEncodeError(s.constructor.name);u.addIssue=S=>{if(typeof S=="string")u.issues.push(issue(S,u.value,n));else{const A=S;A.fatal&&(A.continue=!1),A.code??(A.code="custom"),A.input??(A.input=u.value),A.inst??(A.inst=s),u.issues.push(issue(A))}};const y=n.transform(u.value,u);return y instanceof Promise?y.then(S=>(u.value=S,u)):(u.value=y,u)}});function transform(s){return new ZodTransform({type:"transform",transform:s})}const ZodOptional=$constructor("ZodOptional",(s,n)=>{$ZodOptional.init(s,n),ZodType.init(s,n),s._zod.processJSONSchema=(u,f,y)=>optionalProcessor(s,u,f,y),s.unwrap=()=>s._zod.def.innerType});function optional(s){return new ZodOptional({type:"optional",innerType:s})}const ZodExactOptional=$constructor("ZodExactOptional",(s,n)=>{$ZodExactOptional.init(s,n),ZodType.init(s,n),s._zod.processJSONSchema=(u,f,y)=>optionalProcessor(s,u,f,y),s.unwrap=()=>s._zod.def.innerType});function exactOptional(s){return new ZodExactOptional({type:"optional",innerType:s})}const ZodNullable=$constructor("ZodNullable",(s,n)=>{$ZodNullable.init(s,n),ZodType.init(s,n),s._zod.processJSONSchema=(u,f,y)=>nullableProcessor(s,u,f,y),s.unwrap=()=>s._zod.def.innerType});function nullable(s){return new ZodNullable({type:"nullable",innerType:s})}const ZodDefault=$constructor("ZodDefault",(s,n)=>{$ZodDefault.init(s,n),ZodType.init(s,n),s._zod.processJSONSchema=(u,f,y)=>defaultProcessor(s,u,f,y),s.unwrap=()=>s._zod.def.innerType,s.removeDefault=s.unwrap});function _default(s,n){return new ZodDefault({type:"default",innerType:s,get defaultValue(){return typeof n=="function"?n():shallowClone(n)}})}const ZodPrefault=$constructor("ZodPrefault",(s,n)=>{$ZodPrefault.init(s,n),ZodType.init(s,n),s._zod.processJSONSchema=(u,f,y)=>prefaultProcessor(s,u,f,y),s.unwrap=()=>s._zod.def.innerType});function prefault(s,n){return new ZodPrefault({type:"prefault",innerType:s,get defaultValue(){return typeof n=="function"?n():shallowClone(n)}})}const ZodNonOptional=$constructor("ZodNonOptional",(s,n)=>{$ZodNonOptional.init(s,n),ZodType.init(s,n),s._zod.processJSONSchema=(u,f,y)=>nonoptionalProcessor(s,u,f,y),s.unwrap=()=>s._zod.def.innerType});function nonoptional(s,n){return new ZodNonOptional({type:"nonoptional",innerType:s,...normalizeParams(n)})}const ZodCatch=$constructor("ZodCatch",(s,n)=>{$ZodCatch.init(s,n),ZodType.init(s,n),s._zod.processJSONSchema=(u,f,y)=>catchProcessor(s,u,f,y),s.unwrap=()=>s._zod.def.innerType,s.removeCatch=s.unwrap});function _catch(s,n){return new ZodCatch({type:"catch",innerType:s,catchValue:typeof n=="function"?n:()=>n})}const ZodPipe=$constructor("ZodPipe",(s,n)=>{$ZodPipe.init(s,n),ZodType.init(s,n),s._zod.processJSONSchema=(u,f,y)=>pipeProcessor(s,u,f,y),s.in=n.in,s.out=n.out});function pipe(s,n){return new ZodPipe({type:"pipe",in:s,out:n})}const ZodReadonly=$constructor("ZodReadonly",(s,n)=>{$ZodReadonly.init(s,n),ZodType.init(s,n),s._zod.processJSONSchema=(u,f,y)=>readonlyProcessor(s,u,f,y),s.unwrap=()=>s._zod.def.innerType});function readonly(s){return new ZodReadonly({type:"readonly",innerType:s})}const ZodCustom=$constructor("ZodCustom",(s,n)=>{$ZodCustom.init(s,n),ZodType.init(s,n),s._zod.processJSONSchema=(u,f,y)=>customProcessor(s,u)});function custom(s,n){return _custom(ZodCustom,s??(()=>!0),n)}function refine(s,n={}){return _refine(ZodCustom,s,n)}function superRefine(s){return _superRefine(s)}function preprocess(s,n){return pipe(transform(s),n)}const ZodIssueCode={custom:"custom"};function number(s){return _coercedNumber(ZodNumber,s)}const LATEST_PROTOCOL_VERSION="2025-11-25",SUPPORTED_PROTOCOL_VERSIONS=[LATEST_PROTOCOL_VERSION,"2025-06-18","2025-03-26","2024-11-05","2024-10-07"],RELATED_TASK_META_KEY="io.modelcontextprotocol/related-task",JSONRPC_VERSION="2.0",AssertObjectSchema=custom(s=>s!==null&&(typeof s=="object"||typeof s=="function")),ProgressTokenSchema=union([string(),number$1().int()]),CursorSchema=string();looseObject({ttl:union([number$1(),_null()]).optional(),pollInterval:number$1().optional()});const TaskMetadataSchema=object({ttl:number$1().optional()}),RelatedTaskMetadataSchema=object({taskId:string()}),RequestMetaSchema=looseObject({progressToken:ProgressTokenSchema.optional(),[RELATED_TASK_META_KEY]:RelatedTaskMetadataSchema.optional()}),BaseRequestParamsSchema=object({_meta:RequestMetaSchema.optional()}),TaskAugmentedRequestParamsSchema=BaseRequestParamsSchema.extend({task:TaskMetadataSchema.optional()}),isTaskAugmentedRequestParams=s=>TaskAugmentedRequestParamsSchema.safeParse(s).success,RequestSchema=object({method:string(),params:BaseRequestParamsSchema.loose().optional()}),NotificationsParamsSchema=object({_meta:RequestMetaSchema.optional()}),NotificationSchema=object({method:string(),params:NotificationsParamsSchema.loose().optional()}),ResultSchema=looseObject({_meta:RequestMetaSchema.optional()}),RequestIdSchema=union([string(),number$1().int()]),JSONRPCRequestSchema=object({jsonrpc:literal(JSONRPC_VERSION),id:RequestIdSchema,...RequestSchema.shape}).strict(),isJSONRPCRequest=s=>JSONRPCRequestSchema.safeParse(s).success,JSONRPCNotificationSchema=object({jsonrpc:literal(JSONRPC_VERSION),...NotificationSchema.shape}).strict(),isJSONRPCNotification=s=>JSONRPCNotificationSchema.safeParse(s).success,JSONRPCResultResponseSchema=object({jsonrpc:literal(JSONRPC_VERSION),id:RequestIdSchema,result:ResultSchema}).strict(),isJSONRPCResultResponse=s=>JSONRPCResultResponseSchema.safeParse(s).success;var ErrorCode;(function(s){s[s.ConnectionClosed=-32e3]="ConnectionClosed",s[s.RequestTimeout=-32001]="RequestTimeout",s[s.ParseError=-32700]="ParseError",s[s.InvalidRequest=-32600]="InvalidRequest",s[s.MethodNotFound=-32601]="MethodNotFound",s[s.InvalidParams=-32602]="InvalidParams",s[s.InternalError=-32603]="InternalError",s[s.UrlElicitationRequired=-32042]="UrlElicitationRequired"})(ErrorCode||(ErrorCode={}));const JSONRPCErrorResponseSchema=object({jsonrpc:literal(JSONRPC_VERSION),id:RequestIdSchema.optional(),error:object({code:number$1().int(),message:string(),data:unknown().optional()})}).strict(),isJSONRPCErrorResponse=s=>JSONRPCErrorResponseSchema.safeParse(s).success,JSONRPCMessageSchema=union([JSONRPCRequestSchema,JSONRPCNotificationSchema,JSONRPCResultResponseSchema,JSONRPCErrorResponseSchema]);union([JSONRPCResultResponseSchema,JSONRPCErrorResponseSchema]);const EmptyResultSchema=ResultSchema.strict(),CancelledNotificationParamsSchema=NotificationsParamsSchema.extend({requestId:RequestIdSchema.optional(),reason:string().optional()}),CancelledNotificationSchema=NotificationSchema.extend({method:literal("notifications/cancelled"),params:CancelledNotificationParamsSchema}),IconSchema=object({src:string(),mimeType:string().optional(),sizes:array(string()).optional(),theme:_enum$2(["light","dark"]).optional()}),IconsSchema=object({icons:array(IconSchema).optional()}),BaseMetadataSchema=object({name:string(),title:string().optional()}),ImplementationSchema=BaseMetadataSchema.extend({...BaseMetadataSchema.shape,...IconsSchema.shape,version:string(),websiteUrl:string().optional(),description:string().optional()}),FormElicitationCapabilitySchema=intersection(object({applyDefaults:boolean().optional()}),record(string(),unknown())),ElicitationCapabilitySchema=preprocess(s=>s&&typeof s=="object"&&!Array.isArray(s)&&Object.keys(s).length===0?{form:{}}:s,intersection(object({form:FormElicitationCapabilitySchema.optional(),url:AssertObjectSchema.optional()}),record(string(),unknown()).optional())),ClientTasksCapabilitySchema=looseObject({list:AssertObjectSchema.optional(),cancel:AssertObjectSchema.optional(),requests:looseObject({sampling:looseObject({createMessage:AssertObjectSchema.optional()}).optional(),elicitation:looseObject({create:AssertObjectSchema.optional()}).optional()}).optional()}),ServerTasksCapabilitySchema=looseObject({list:AssertObjectSchema.optional(),cancel:AssertObjectSchema.optional(),requests:looseObject({tools:looseObject({call:AssertObjectSchema.optional()}).optional()}).optional()}),ClientCapabilitiesSchema=object({experimental:record(string(),AssertObjectSchema).optional(),sampling:object({context:AssertObjectSchema.optional(),tools:AssertObjectSchema.optional()}).optional(),elicitation:ElicitationCapabilitySchema.optional(),roots:object({listChanged:boolean().optional()}).optional(),tasks:ClientTasksCapabilitySchema.optional()}),InitializeRequestParamsSchema=BaseRequestParamsSchema.extend({protocolVersion:string(),capabilities:ClientCapabilitiesSchema,clientInfo:ImplementationSchema}),InitializeRequestSchema=RequestSchema.extend({method:literal("initialize"),params:InitializeRequestParamsSchema}),ServerCapabilitiesSchema=object({experimental:record(string(),AssertObjectSchema).optional(),logging:AssertObjectSchema.optional(),completions:AssertObjectSchema.optional(),prompts:object({listChanged:boolean().optional()}).optional(),resources:object({subscribe:boolean().optional(),listChanged:boolean().optional()}).optional(),tools:object({listChanged:boolean().optional()}).optional(),tasks:ServerTasksCapabilitySchema.optional()}),InitializeResultSchema=ResultSchema.extend({protocolVersion:string(),capabilities:ServerCapabilitiesSchema,serverInfo:ImplementationSchema,instructions:string().optional()}),InitializedNotificationSchema=NotificationSchema.extend({method:literal("notifications/initialized"),params:NotificationsParamsSchema.optional()}),PingRequestSchema=RequestSchema.extend({method:literal("ping"),params:BaseRequestParamsSchema.optional()}),ProgressSchema=object({progress:number$1(),total:optional(number$1()),message:optional(string())}),ProgressNotificationParamsSchema=object({...NotificationsParamsSchema.shape,...ProgressSchema.shape,progressToken:ProgressTokenSchema}),ProgressNotificationSchema=NotificationSchema.extend({method:literal("notifications/progress"),params:ProgressNotificationParamsSchema}),PaginatedRequestParamsSchema=BaseRequestParamsSchema.extend({cursor:CursorSchema.optional()}),PaginatedRequestSchema=RequestSchema.extend({params:PaginatedRequestParamsSchema.optional()}),PaginatedResultSchema=ResultSchema.extend({nextCursor:CursorSchema.optional()}),TaskStatusSchema=_enum$2(["working","input_required","completed","failed","cancelled"]),TaskSchema=object({taskId:string(),status:TaskStatusSchema,ttl:union([number$1(),_null()]),createdAt:string(),lastUpdatedAt:string(),pollInterval:optional(number$1()),statusMessage:optional(string())}),CreateTaskResultSchema=ResultSchema.extend({task:TaskSchema}),TaskStatusNotificationParamsSchema=NotificationsParamsSchema.merge(TaskSchema),TaskStatusNotificationSchema=NotificationSchema.extend({method:literal("notifications/tasks/status"),params:TaskStatusNotificationParamsSchema}),GetTaskRequestSchema=RequestSchema.extend({method:literal("tasks/get"),params:BaseRequestParamsSchema.extend({taskId:string()})}),GetTaskResultSchema=ResultSchema.merge(TaskSchema),GetTaskPayloadRequestSchema=RequestSchema.extend({method:literal("tasks/result"),params:BaseRequestParamsSchema.extend({taskId:string()})});ResultSchema.loose();const ListTasksRequestSchema=PaginatedRequestSchema.extend({method:literal("tasks/list")}),ListTasksResultSchema=PaginatedResultSchema.extend({tasks:array(TaskSchema)}),CancelTaskRequestSchema=RequestSchema.extend({method:literal("tasks/cancel"),params:BaseRequestParamsSchema.extend({taskId:string()})}),CancelTaskResultSchema=ResultSchema.merge(TaskSchema),ResourceContentsSchema=object({uri:string(),mimeType:optional(string()),_meta:record(string(),unknown()).optional()}),TextResourceContentsSchema=ResourceContentsSchema.extend({text:string()}),Base64Schema=string().refine(s=>{try{return atob(s),!0}catch{return!1}},{message:"Invalid Base64 string"}),BlobResourceContentsSchema=ResourceContentsSchema.extend({blob:Base64Schema}),RoleSchema=_enum$2(["user","assistant"]),AnnotationsSchema=object({audience:array(RoleSchema).optional(),priority:number$1().min(0).max(1).optional(),lastModified:datetime({offset:!0}).optional()}),ResourceSchema=object({...BaseMetadataSchema.shape,...IconsSchema.shape,uri:string(),description:optional(string()),mimeType:optional(string()),annotations:AnnotationsSchema.optional(),_meta:optional(looseObject({}))}),ResourceTemplateSchema=object({...BaseMetadataSchema.shape,...IconsSchema.shape,uriTemplate:string(),description:optional(string()),mimeType:optional(string()),annotations:AnnotationsSchema.optional(),_meta:optional(looseObject({}))}),ListResourcesRequestSchema=PaginatedRequestSchema.extend({method:literal("resources/list")}),ListResourcesResultSchema=PaginatedResultSchema.extend({resources:array(ResourceSchema)}),ListResourceTemplatesRequestSchema=PaginatedRequestSchema.extend({method:literal("resources/templates/list")}),ListResourceTemplatesResultSchema=PaginatedResultSchema.extend({resourceTemplates:array(ResourceTemplateSchema)}),ResourceRequestParamsSchema=BaseRequestParamsSchema.extend({uri:string()}),ReadResourceRequestParamsSchema=ResourceRequestParamsSchema,ReadResourceRequestSchema=RequestSchema.extend({method:literal("resources/read"),params:ReadResourceRequestParamsSchema}),ReadResourceResultSchema=ResultSchema.extend({contents:array(union([TextResourceContentsSchema,BlobResourceContentsSchema]))}),ResourceListChangedNotificationSchema=NotificationSchema.extend({method:literal("notifications/resources/list_changed"),params:NotificationsParamsSchema.optional()}),SubscribeRequestParamsSchema=ResourceRequestParamsSchema,SubscribeRequestSchema=RequestSchema.extend({method:literal("resources/subscribe"),params:SubscribeRequestParamsSchema}),UnsubscribeRequestParamsSchema=ResourceRequestParamsSchema,UnsubscribeRequestSchema=RequestSchema.extend({method:literal("resources/unsubscribe"),params:UnsubscribeRequestParamsSchema}),ResourceUpdatedNotificationParamsSchema=NotificationsParamsSchema.extend({uri:string()}),ResourceUpdatedNotificationSchema=NotificationSchema.extend({method:literal("notifications/resources/updated"),params:ResourceUpdatedNotificationParamsSchema}),PromptArgumentSchema=object({name:string(),description:optional(string()),required:optional(boolean())}),PromptSchema=object({...BaseMetadataSchema.shape,...IconsSchema.shape,description:optional(string()),arguments:optional(array(PromptArgumentSchema)),_meta:optional(looseObject({}))}),ListPromptsRequestSchema=PaginatedRequestSchema.extend({method:literal("prompts/list")}),ListPromptsResultSchema=PaginatedResultSchema.extend({prompts:array(PromptSchema)}),GetPromptRequestParamsSchema=BaseRequestParamsSchema.extend({name:string(),arguments:record(string(),string()).optional()}),GetPromptRequestSchema=RequestSchema.extend({method:literal("prompts/get"),params:GetPromptRequestParamsSchema}),TextContentSchema=object({type:literal("text"),text:string(),annotations:AnnotationsSchema.optional(),_meta:record(string(),unknown()).optional()}),ImageContentSchema=object({type:literal("image"),data:Base64Schema,mimeType:string(),annotations:AnnotationsSchema.optional(),_meta:record(string(),unknown()).optional()}),AudioContentSchema=object({type:literal("audio"),data:Base64Schema,mimeType:string(),annotations:AnnotationsSchema.optional(),_meta:record(string(),unknown()).optional()}),ToolUseContentSchema=object({type:literal("tool_use"),name:string(),id:string(),input:record(string(),unknown()),_meta:record(string(),unknown()).optional()}),EmbeddedResourceSchema=object({type:literal("resource"),resource:union([TextResourceContentsSchema,BlobResourceContentsSchema]),annotations:AnnotationsSchema.optional(),_meta:record(string(),unknown()).optional()}),ResourceLinkSchema=ResourceSchema.extend({type:literal("resource_link")}),ContentBlockSchema=union([TextContentSchema,ImageContentSchema,AudioContentSchema,ResourceLinkSchema,EmbeddedResourceSchema]),PromptMessageSchema=object({role:RoleSchema,content:ContentBlockSchema}),GetPromptResultSchema=ResultSchema.extend({description:string().optional(),messages:array(PromptMessageSchema)}),PromptListChangedNotificationSchema=NotificationSchema.extend({method:literal("notifications/prompts/list_changed"),params:NotificationsParamsSchema.optional()}),ToolAnnotationsSchema=object({title:string().optional(),readOnlyHint:boolean().optional(),destructiveHint:boolean().optional(),idempotentHint:boolean().optional(),openWorldHint:boolean().optional()}),ToolExecutionSchema=object({taskSupport:_enum$2(["required","optional","forbidden"]).optional()}),ToolSchema=object({...BaseMetadataSchema.shape,...IconsSchema.shape,description:string().optional(),inputSchema:object({type:literal("object"),properties:record(string(),AssertObjectSchema).optional(),required:array(string()).optional()}).catchall(unknown()),outputSchema:object({type:literal("object"),properties:record(string(),AssertObjectSchema).optional(),required:array(string()).optional()}).catchall(unknown()).optional(),annotations:ToolAnnotationsSchema.optional(),execution:ToolExecutionSchema.optional(),_meta:record(string(),unknown()).optional()}),ListToolsRequestSchema=PaginatedRequestSchema.extend({method:literal("tools/list")}),ListToolsResultSchema=PaginatedResultSchema.extend({tools:array(ToolSchema)}),CallToolResultSchema=ResultSchema.extend({content:array(ContentBlockSchema).default([]),structuredContent:record(string(),unknown()).optional(),isError:boolean().optional()});CallToolResultSchema.or(ResultSchema.extend({toolResult:unknown()}));const CallToolRequestParamsSchema=TaskAugmentedRequestParamsSchema.extend({name:string(),arguments:record(string(),unknown()).optional()}),CallToolRequestSchema=RequestSchema.extend({method:literal("tools/call"),params:CallToolRequestParamsSchema}),ToolListChangedNotificationSchema=NotificationSchema.extend({method:literal("notifications/tools/list_changed"),params:NotificationsParamsSchema.optional()}),ListChangedOptionsBaseSchema=object({autoRefresh:boolean().default(!0),debounceMs:number$1().int().nonnegative().default(300)}),LoggingLevelSchema=_enum$2(["debug","info","notice","warning","error","critical","alert","emergency"]),SetLevelRequestParamsSchema=BaseRequestParamsSchema.extend({level:LoggingLevelSchema}),SetLevelRequestSchema=RequestSchema.extend({method:literal("logging/setLevel"),params:SetLevelRequestParamsSchema}),LoggingMessageNotificationParamsSchema=NotificationsParamsSchema.extend({level:LoggingLevelSchema,logger:string().optional(),data:unknown()}),LoggingMessageNotificationSchema=NotificationSchema.extend({method:literal("notifications/message"),params:LoggingMessageNotificationParamsSchema}),ModelHintSchema=object({name:string().optional()}),ModelPreferencesSchema=object({hints:array(ModelHintSchema).optional(),costPriority:number$1().min(0).max(1).optional(),speedPriority:number$1().min(0).max(1).optional(),intelligencePriority:number$1().min(0).max(1).optional()}),ToolChoiceSchema=object({mode:_enum$2(["auto","required","none"]).optional()}),ToolResultContentSchema=object({type:literal("tool_result"),toolUseId:string().describe("The unique identifier for the corresponding tool call."),content:array(ContentBlockSchema).default([]),structuredContent:object({}).loose().optional(),isError:boolean().optional(),_meta:record(string(),unknown()).optional()}),SamplingContentSchema=discriminatedUnion("type",[TextContentSchema,ImageContentSchema,AudioContentSchema]),SamplingMessageContentBlockSchema=discriminatedUnion("type",[TextContentSchema,ImageContentSchema,AudioContentSchema,ToolUseContentSchema,ToolResultContentSchema]),SamplingMessageSchema=object({role:RoleSchema,content:union([SamplingMessageContentBlockSchema,array(SamplingMessageContentBlockSchema)]),_meta:record(string(),unknown()).optional()}),CreateMessageRequestParamsSchema=TaskAugmentedRequestParamsSchema.extend({messages:array(SamplingMessageSchema),modelPreferences:ModelPreferencesSchema.optional(),systemPrompt:string().optional(),includeContext:_enum$2(["none","thisServer","allServers"]).optional(),temperature:number$1().optional(),maxTokens:number$1().int(),stopSequences:array(string()).optional(),metadata:AssertObjectSchema.optional(),tools:array(ToolSchema).optional(),toolChoice:ToolChoiceSchema.optional()}),CreateMessageRequestSchema=RequestSchema.extend({method:literal("sampling/createMessage"),params:CreateMessageRequestParamsSchema}),CreateMessageResultSchema=ResultSchema.extend({model:string(),stopReason:optional(_enum$2(["endTurn","stopSequence","maxTokens"]).or(string())),role:RoleSchema,content:SamplingContentSchema}),CreateMessageResultWithToolsSchema=ResultSchema.extend({model:string(),stopReason:optional(_enum$2(["endTurn","stopSequence","maxTokens","toolUse"]).or(string())),role:RoleSchema,content:union([SamplingMessageContentBlockSchema,array(SamplingMessageContentBlockSchema)])}),BooleanSchemaSchema=object({type:literal("boolean"),title:string().optional(),description:string().optional(),default:boolean().optional()}),StringSchemaSchema=object({type:literal("string"),title:string().optional(),description:string().optional(),minLength:number$1().optional(),maxLength:number$1().optional(),format:_enum$2(["email","uri","date","date-time"]).optional(),default:string().optional()}),NumberSchemaSchema=object({type:_enum$2(["number","integer"]),title:string().optional(),description:string().optional(),minimum:number$1().optional(),maximum:number$1().optional(),default:number$1().optional()}),UntitledSingleSelectEnumSchemaSchema=object({type:literal("string"),title:string().optional(),description:string().optional(),enum:array(string()),default:string().optional()}),TitledSingleSelectEnumSchemaSchema=object({type:literal("string"),title:string().optional(),description:string().optional(),oneOf:array(object({const:string(),title:string()})),default:string().optional()}),LegacyTitledEnumSchemaSchema=object({type:literal("string"),title:string().optional(),description:string().optional(),enum:array(string()),enumNames:array(string()).optional(),default:string().optional()}),SingleSelectEnumSchemaSchema=union([UntitledSingleSelectEnumSchemaSchema,TitledSingleSelectEnumSchemaSchema]),UntitledMultiSelectEnumSchemaSchema=object({type:literal("array"),title:string().optional(),description:string().optional(),minItems:number$1().optional(),maxItems:number$1().optional(),items:object({type:literal("string"),enum:array(string())}),default:array(string()).optional()}),TitledMultiSelectEnumSchemaSchema=object({type:literal("array"),title:string().optional(),description:string().optional(),minItems:number$1().optional(),maxItems:number$1().optional(),items:object({anyOf:array(object({const:string(),title:string()}))}),default:array(string()).optional()}),MultiSelectEnumSchemaSchema=union([UntitledMultiSelectEnumSchemaSchema,TitledMultiSelectEnumSchemaSchema]),EnumSchemaSchema=union([LegacyTitledEnumSchemaSchema,SingleSelectEnumSchemaSchema,MultiSelectEnumSchemaSchema]),PrimitiveSchemaDefinitionSchema=union([EnumSchemaSchema,BooleanSchemaSchema,StringSchemaSchema,NumberSchemaSchema]),ElicitRequestFormParamsSchema=TaskAugmentedRequestParamsSchema.extend({mode:literal("form").optional(),message:string(),requestedSchema:object({type:literal("object"),properties:record(string(),PrimitiveSchemaDefinitionSchema),required:array(string()).optional()})}),ElicitRequestURLParamsSchema=TaskAugmentedRequestParamsSchema.extend({mode:literal("url"),message:string(),elicitationId:string(),url:string().url()}),ElicitRequestParamsSchema=union([ElicitRequestFormParamsSchema,ElicitRequestURLParamsSchema]),ElicitRequestSchema=RequestSchema.extend({method:literal("elicitation/create"),params:ElicitRequestParamsSchema}),ElicitationCompleteNotificationParamsSchema=NotificationsParamsSchema.extend({elicitationId:string()}),ElicitationCompleteNotificationSchema=NotificationSchema.extend({method:literal("notifications/elicitation/complete"),params:ElicitationCompleteNotificationParamsSchema}),ElicitResultSchema=ResultSchema.extend({action:_enum$2(["accept","decline","cancel"]),content:preprocess(s=>s===null?void 0:s,record(string(),union([string(),number$1(),boolean(),array(string())])).optional())}),ResourceTemplateReferenceSchema=object({type:literal("ref/resource"),uri:string()}),PromptReferenceSchema=object({type:literal("ref/prompt"),name:string()}),CompleteRequestParamsSchema=BaseRequestParamsSchema.extend({ref:union([PromptReferenceSchema,ResourceTemplateReferenceSchema]),argument:object({name:string(),value:string()}),context:object({arguments:record(string(),string()).optional()}).optional()}),CompleteRequestSchema=RequestSchema.extend({method:literal("completion/complete"),params:CompleteRequestParamsSchema}),CompleteResultSchema=ResultSchema.extend({completion:looseObject({values:array(string()).max(100),total:optional(number$1().int()),hasMore:optional(boolean())})}),RootSchema=object({uri:string().startsWith("file://"),name:string().optional(),_meta:record(string(),unknown()).optional()}),ListRootsRequestSchema=RequestSchema.extend({method:literal("roots/list"),params:BaseRequestParamsSchema.optional()}),ListRootsResultSchema=ResultSchema.extend({roots:array(RootSchema)}),RootsListChangedNotificationSchema=NotificationSchema.extend({method:literal("notifications/roots/list_changed"),params:NotificationsParamsSchema.optional()});union([PingRequestSchema,InitializeRequestSchema,CompleteRequestSchema,SetLevelRequestSchema,GetPromptRequestSchema,ListPromptsRequestSchema,ListResourcesRequestSchema,ListResourceTemplatesRequestSchema,ReadResourceRequestSchema,SubscribeRequestSchema,UnsubscribeRequestSchema,CallToolRequestSchema,ListToolsRequestSchema,GetTaskRequestSchema,GetTaskPayloadRequestSchema,ListTasksRequestSchema,CancelTaskRequestSchema]);union([CancelledNotificationSchema,ProgressNotificationSchema,InitializedNotificationSchema,RootsListChangedNotificationSchema,TaskStatusNotificationSchema]);union([EmptyResultSchema,CreateMessageResultSchema,CreateMessageResultWithToolsSchema,ElicitResultSchema,ListRootsResultSchema,GetTaskResultSchema,ListTasksResultSchema,CreateTaskResultSchema]);union([PingRequestSchema,CreateMessageRequestSchema,ElicitRequestSchema,ListRootsRequestSchema,GetTaskRequestSchema,GetTaskPayloadRequestSchema,ListTasksRequestSchema,CancelTaskRequestSchema]);union([CancelledNotificationSchema,ProgressNotificationSchema,LoggingMessageNotificationSchema,ResourceUpdatedNotificationSchema,ResourceListChangedNotificationSchema,ToolListChangedNotificationSchema,PromptListChangedNotificationSchema,TaskStatusNotificationSchema,ElicitationCompleteNotificationSchema]);union([EmptyResultSchema,InitializeResultSchema,CompleteResultSchema,GetPromptResultSchema,ListPromptsResultSchema,ListResourcesResultSchema,ListResourceTemplatesResultSchema,ReadResourceResultSchema,CallToolResultSchema,ListToolsResultSchema,GetTaskResultSchema,ListTasksResultSchema,CreateTaskResultSchema]);class McpError extends Error{constructor(n,u,f){super(`MCP error ${n}: ${u}`),this.code=n,this.data=f,this.name="McpError"}static fromError(n,u,f){if(n===ErrorCode.UrlElicitationRequired&&f){const y=f;if(y.elicitations)return new UrlElicitationRequiredError(y.elicitations,u)}return new McpError(n,u,f)}}class UrlElicitationRequiredError extends McpError{constructor(n,u=`URL elicitation${n.length>1?"s":""} required`){super(ErrorCode.UrlElicitationRequired,u,{elicitations:n})}get elicitations(){return this.data?.elicitations??[]}}function isTerminal(s){return s==="completed"||s==="failed"||s==="cancelled"}new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function getMethodLiteral(s){const n=getObjectShape(s)?.method;if(!n)throw new Error("Schema is missing a method literal");const u=getLiteralValue(n);if(typeof u!="string")throw new Error("Schema method literal must be a string");return u}function parseWithCompat(s,n){const u=safeParse$1(s,n);if(!u.success)throw u.error;return u.data}const DEFAULT_REQUEST_TIMEOUT_MSEC=6e4;class Protocol{constructor(n){this._options=n,this._requestMessageId=0,this._requestHandlers=new Map,this._requestHandlerAbortControllers=new Map,this._notificationHandlers=new Map,this._responseHandlers=new Map,this._progressHandlers=new Map,this._timeoutInfo=new Map,this._pendingDebouncedNotifications=new Set,this._taskProgressTokens=new Map,this._requestResolvers=new Map,this.setNotificationHandler(CancelledNotificationSchema,u=>{this._oncancel(u)}),this.setNotificationHandler(ProgressNotificationSchema,u=>{this._onprogress(u)}),this.setRequestHandler(PingRequestSchema,u=>({})),this._taskStore=n?.taskStore,this._taskMessageQueue=n?.taskMessageQueue,this._taskStore&&(this.setRequestHandler(GetTaskRequestSchema,async(u,f)=>{const y=await this._taskStore.getTask(u.params.taskId,f.sessionId);if(!y)throw new McpError(ErrorCode.InvalidParams,"Failed to retrieve task: Task not found");return{...y}}),this.setRequestHandler(GetTaskPayloadRequestSchema,async(u,f)=>{const y=async()=>{const S=u.params.taskId;if(this._taskMessageQueue){let w;for(;w=await this._taskMessageQueue.dequeue(S,f.sessionId);){if(w.type==="response"||w.type==="error"){const C=w.message,T=C.id,R=this._requestResolvers.get(T);if(R)if(this._requestResolvers.delete(T),w.type==="response")R(C);else{const I=C,N=new McpError(I.error.code,I.error.message,I.error.data);R(N)}else{const I=w.type==="response"?"Response":"Error";this._onerror(new Error(`${I} handler missing for request ${T}`))}continue}await this._transport?.send(w.message,{relatedRequestId:f.requestId})}}const A=await this._taskStore.getTask(S,f.sessionId);if(!A)throw new McpError(ErrorCode.InvalidParams,`Task not found: ${S}`);if(!isTerminal(A.status))return await this._waitForTaskUpdate(S,f.signal),await y();if(isTerminal(A.status)){const w=await this._taskStore.getTaskResult(S,f.sessionId);return this._clearTaskQueue(S),{...w,_meta:{...w._meta,[RELATED_TASK_META_KEY]:{taskId:S}}}}return await y()};return await y()}),this.setRequestHandler(ListTasksRequestSchema,async(u,f)=>{try{const{tasks:y,nextCursor:S}=await this._taskStore.listTasks(u.params?.cursor,f.sessionId);return{tasks:y,nextCursor:S,_meta:{}}}catch(y){throw new McpError(ErrorCode.InvalidParams,`Failed to list tasks: ${y instanceof Error?y.message:String(y)}`)}}),this.setRequestHandler(CancelTaskRequestSchema,async(u,f)=>{try{const y=await this._taskStore.getTask(u.params.taskId,f.sessionId);if(!y)throw new McpError(ErrorCode.InvalidParams,`Task not found: ${u.params.taskId}`);if(isTerminal(y.status))throw new McpError(ErrorCode.InvalidParams,`Cannot cancel task in terminal status: ${y.status}`);await this._taskStore.updateTaskStatus(u.params.taskId,"cancelled","Client cancelled task execution.",f.sessionId),this._clearTaskQueue(u.params.taskId);const S=await this._taskStore.getTask(u.params.taskId,f.sessionId);if(!S)throw new McpError(ErrorCode.InvalidParams,`Task not found after cancellation: ${u.params.taskId}`);return{_meta:{},...S}}catch(y){throw y instanceof McpError?y:new McpError(ErrorCode.InvalidRequest,`Failed to cancel task: ${y instanceof Error?y.message:String(y)}`)}}))}async _oncancel(n){n.params.requestId&&this._requestHandlerAbortControllers.get(n.params.requestId)?.abort(n.params.reason)}_setupTimeout(n,u,f,y,S=!1){this._timeoutInfo.set(n,{timeoutId:setTimeout(y,u),startTime:Date.now(),timeout:u,maxTotalTimeout:f,resetTimeoutOnProgress:S,onTimeout:y})}_resetTimeout(n){const u=this._timeoutInfo.get(n);if(!u)return!1;const f=Date.now()-u.startTime;if(u.maxTotalTimeout&&f>=u.maxTotalTimeout)throw this._timeoutInfo.delete(n),McpError.fromError(ErrorCode.RequestTimeout,"Maximum total timeout exceeded",{maxTotalTimeout:u.maxTotalTimeout,totalElapsed:f});return clearTimeout(u.timeoutId),u.timeoutId=setTimeout(u.onTimeout,u.timeout),!0}_cleanupTimeout(n){const u=this._timeoutInfo.get(n);u&&(clearTimeout(u.timeoutId),this._timeoutInfo.delete(n))}async connect(n){if(this._transport)throw new Error("Already connected to a transport. Call close() before connecting to a new transport, or use a separate Protocol instance per connection.");this._transport=n;const u=this.transport?.onclose;this._transport.onclose=()=>{u?.(),this._onclose()};const f=this.transport?.onerror;this._transport.onerror=S=>{f?.(S),this._onerror(S)};const y=this._transport?.onmessage;this._transport.onmessage=(S,A)=>{y?.(S,A),isJSONRPCResultResponse(S)||isJSONRPCErrorResponse(S)?this._onresponse(S):isJSONRPCRequest(S)?this._onrequest(S,A):isJSONRPCNotification(S)?this._onnotification(S):this._onerror(new Error(`Unknown message type: ${JSON.stringify(S)}`))},await this._transport.start()}_onclose(){const n=this._responseHandlers;this._responseHandlers=new Map,this._progressHandlers.clear(),this._taskProgressTokens.clear(),this._pendingDebouncedNotifications.clear();for(const f of this._requestHandlerAbortControllers.values())f.abort();this._requestHandlerAbortControllers.clear();const u=McpError.fromError(ErrorCode.ConnectionClosed,"Connection closed");this._transport=void 0,this.onclose?.();for(const f of n.values())f(u)}_onerror(n){this.onerror?.(n)}_onnotification(n){const u=this._notificationHandlers.get(n.method)??this.fallbackNotificationHandler;u!==void 0&&Promise.resolve().then(()=>u(n)).catch(f=>this._onerror(new Error(`Uncaught error in notification handler: ${f}`)))}_onrequest(n,u){const f=this._requestHandlers.get(n.method)??this.fallbackRequestHandler,y=this._transport,S=n.params?._meta?.[RELATED_TASK_META_KEY]?.taskId;if(f===void 0){const R={jsonrpc:"2.0",id:n.id,error:{code:ErrorCode.MethodNotFound,message:"Method not found"}};S&&this._taskMessageQueue?this._enqueueTaskMessage(S,{type:"error",message:R,timestamp:Date.now()},y?.sessionId).catch(I=>this._onerror(new Error(`Failed to enqueue error response: ${I}`))):y?.send(R).catch(I=>this._onerror(new Error(`Failed to send an error response: ${I}`)));return}const A=new AbortController;this._requestHandlerAbortControllers.set(n.id,A);const w=isTaskAugmentedRequestParams(n.params)?n.params.task:void 0,C=this._taskStore?this.requestTaskStore(n,y?.sessionId):void 0,T={signal:A.signal,sessionId:y?.sessionId,_meta:n.params?._meta,sendNotification:async R=>{if(A.signal.aborted)return;const I={relatedRequestId:n.id};S&&(I.relatedTask={taskId:S}),await this.notification(R,I)},sendRequest:async(R,I,N)=>{if(A.signal.aborted)throw new McpError(ErrorCode.ConnectionClosed,"Request was cancelled");const L={...N,relatedRequestId:n.id};S&&!L.relatedTask&&(L.relatedTask={taskId:S});const F=L.relatedTask?.taskId??S;return F&&C&&await C.updateTaskStatus(F,"input_required"),await this.request(R,I,L)},authInfo:u?.authInfo,requestId:n.id,requestInfo:u?.requestInfo,taskId:S,taskStore:C,taskRequestedTtl:w?.ttl,closeSSEStream:u?.closeSSEStream,closeStandaloneSSEStream:u?.closeStandaloneSSEStream};Promise.resolve().then(()=>{w&&this.assertTaskHandlerCapability(n.method)}).then(()=>f(n,T)).then(async R=>{if(A.signal.aborted)return;const I={result:R,jsonrpc:"2.0",id:n.id};S&&this._taskMessageQueue?await this._enqueueTaskMessage(S,{type:"response",message:I,timestamp:Date.now()},y?.sessionId):await y?.send(I)},async R=>{if(A.signal.aborted)return;const I={jsonrpc:"2.0",id:n.id,error:{code:Number.isSafeInteger(R.code)?R.code:ErrorCode.InternalError,message:R.message??"Internal error",...R.data!==void 0&&{data:R.data}}};S&&this._taskMessageQueue?await this._enqueueTaskMessage(S,{type:"error",message:I,timestamp:Date.now()},y?.sessionId):await y?.send(I)}).catch(R=>this._onerror(new Error(`Failed to send response: ${R}`))).finally(()=>{this._requestHandlerAbortControllers.delete(n.id)})}_onprogress(n){const{progressToken:u,...f}=n.params,y=Number(u),S=this._progressHandlers.get(y);if(!S){this._onerror(new Error(`Received a progress notification for an unknown token: ${JSON.stringify(n)}`));return}const A=this._responseHandlers.get(y),w=this._timeoutInfo.get(y);if(w&&A&&w.resetTimeoutOnProgress)try{this._resetTimeout(y)}catch(C){this._responseHandlers.delete(y),this._progressHandlers.delete(y),this._cleanupTimeout(y),A(C);return}S(f)}_onresponse(n){const u=Number(n.id),f=this._requestResolvers.get(u);if(f){if(this._requestResolvers.delete(u),isJSONRPCResultResponse(n))f(n);else{const A=new McpError(n.error.code,n.error.message,n.error.data);f(A)}return}const y=this._responseHandlers.get(u);if(y===void 0){this._onerror(new Error(`Received a response for an unknown message ID: ${JSON.stringify(n)}`));return}this._responseHandlers.delete(u),this._cleanupTimeout(u);let S=!1;if(isJSONRPCResultResponse(n)&&n.result&&typeof n.result=="object"){const A=n.result;if(A.task&&typeof A.task=="object"){const w=A.task;typeof w.taskId=="string"&&(S=!0,this._taskProgressTokens.set(w.taskId,u))}}if(S||this._progressHandlers.delete(u),isJSONRPCResultResponse(n))y(n);else{const A=McpError.fromError(n.error.code,n.error.message,n.error.data);y(A)}}get transport(){return this._transport}async close(){await this._transport?.close()}async*requestStream(n,u,f){const{task:y}=f??{};if(!y){try{yield{type:"result",result:await this.request(n,u,f)}}catch(A){yield{type:"error",error:A instanceof McpError?A:new McpError(ErrorCode.InternalError,String(A))}}return}let S;try{const A=await this.request(n,CreateTaskResultSchema,f);if(A.task)S=A.task.taskId,yield{type:"taskCreated",task:A.task};else throw new McpError(ErrorCode.InternalError,"Task creation did not return a task");for(;;){const w=await this.getTask({taskId:S},f);if(yield{type:"taskStatus",task:w},isTerminal(w.status)){w.status==="completed"?yield{type:"result",result:await this.getTaskResult({taskId:S},u,f)}:w.status==="failed"?yield{type:"error",error:new McpError(ErrorCode.InternalError,`Task ${S} failed`)}:w.status==="cancelled"&&(yield{type:"error",error:new McpError(ErrorCode.InternalError,`Task ${S} was cancelled`)});return}if(w.status==="input_required"){yield{type:"result",result:await this.getTaskResult({taskId:S},u,f)};return}const C=w.pollInterval??this._options?.defaultTaskPollInterval??1e3;await new Promise(T=>setTimeout(T,C)),f?.signal?.throwIfAborted()}}catch(A){yield{type:"error",error:A instanceof McpError?A:new McpError(ErrorCode.InternalError,String(A))}}}request(n,u,f){const{relatedRequestId:y,resumptionToken:S,onresumptiontoken:A,task:w,relatedTask:C}=f??{};return new Promise((T,R)=>{const I=G=>{R(G)};if(!this._transport){I(new Error("Not connected"));return}if(this._options?.enforceStrictCapabilities===!0)try{this.assertCapabilityForMethod(n.method),w&&this.assertTaskCapability(n.method)}catch(G){I(G);return}f?.signal?.throwIfAborted();const N=this._requestMessageId++,L={...n,jsonrpc:"2.0",id:N};f?.onprogress&&(this._progressHandlers.set(N,f.onprogress),L.params={...n.params,_meta:{...n.params?._meta||{},progressToken:N}}),w&&(L.params={...L.params,task:w}),C&&(L.params={...L.params,_meta:{...L.params?._meta||{},[RELATED_TASK_META_KEY]:C}});const F=G=>{this._responseHandlers.delete(N),this._progressHandlers.delete(N),this._cleanupTimeout(N),this._transport?.send({jsonrpc:"2.0",method:"notifications/cancelled",params:{requestId:N,reason:String(G)}},{relatedRequestId:y,resumptionToken:S,onresumptiontoken:A}).catch(K=>this._onerror(new Error(`Failed to send cancellation: ${K}`)));const Y=G instanceof McpError?G:new McpError(ErrorCode.RequestTimeout,String(G));R(Y)};this._responseHandlers.set(N,G=>{if(!f?.signal?.aborted){if(G instanceof Error)return R(G);try{const Y=safeParse$1(u,G.result);Y.success?T(Y.data):R(Y.error)}catch(Y){R(Y)}}}),f?.signal?.addEventListener("abort",()=>{F(f?.signal?.reason)});const H=f?.timeout??DEFAULT_REQUEST_TIMEOUT_MSEC,z=()=>F(McpError.fromError(ErrorCode.RequestTimeout,"Request timed out",{timeout:H}));this._setupTimeout(N,H,f?.maxTotalTimeout,z,f?.resetTimeoutOnProgress??!1);const U=C?.taskId;if(U){const G=Y=>{const K=this._responseHandlers.get(N);K?K(Y):this._onerror(new Error(`Response handler missing for side-channeled request ${N}`))};this._requestResolvers.set(N,G),this._enqueueTaskMessage(U,{type:"request",message:L,timestamp:Date.now()}).catch(Y=>{this._cleanupTimeout(N),R(Y)})}else this._transport.send(L,{relatedRequestId:y,resumptionToken:S,onresumptiontoken:A}).catch(G=>{this._cleanupTimeout(N),R(G)})})}async getTask(n,u){return this.request({method:"tasks/get",params:n},GetTaskResultSchema,u)}async getTaskResult(n,u,f){return this.request({method:"tasks/result",params:n},u,f)}async listTasks(n,u){return this.request({method:"tasks/list",params:n},ListTasksResultSchema,u)}async cancelTask(n,u){return this.request({method:"tasks/cancel",params:n},CancelTaskResultSchema,u)}async notification(n,u){if(!this._transport)throw new Error("Not connected");this.assertNotificationCapability(n.method);const f=u?.relatedTask?.taskId;if(f){const S={...n,jsonrpc:"2.0",params:{...n.params,_meta:{...n.params?._meta||{},[RELATED_TASK_META_KEY]:u.relatedTask}}};await this._enqueueTaskMessage(f,{type:"notification",message:S,timestamp:Date.now()});return}if((this._options?.debouncedNotificationMethods??[]).includes(n.method)&&!n.params&&!u?.relatedRequestId&&!u?.relatedTask){if(this._pendingDebouncedNotifications.has(n.method))return;this._pendingDebouncedNotifications.add(n.method),Promise.resolve().then(()=>{if(this._pendingDebouncedNotifications.delete(n.method),!this._transport)return;let S={...n,jsonrpc:"2.0"};u?.relatedTask&&(S={...S,params:{...S.params,_meta:{...S.params?._meta||{},[RELATED_TASK_META_KEY]:u.relatedTask}}}),this._transport?.send(S,u).catch(A=>this._onerror(A))});return}let y={...n,jsonrpc:"2.0"};u?.relatedTask&&(y={...y,params:{...y.params,_meta:{...y.params?._meta||{},[RELATED_TASK_META_KEY]:u.relatedTask}}}),await this._transport.send(y,u)}setRequestHandler(n,u){const f=getMethodLiteral(n);this.assertRequestHandlerCapability(f),this._requestHandlers.set(f,(y,S)=>{const A=parseWithCompat(n,y);return Promise.resolve(u(A,S))})}removeRequestHandler(n){this._requestHandlers.delete(n)}assertCanSetRequestHandler(n){if(this._requestHandlers.has(n))throw new Error(`A request handler for ${n} already exists, which would be overridden`)}setNotificationHandler(n,u){const f=getMethodLiteral(n);this._notificationHandlers.set(f,y=>{const S=parseWithCompat(n,y);return Promise.resolve(u(S))})}removeNotificationHandler(n){this._notificationHandlers.delete(n)}_cleanupTaskProgressHandler(n){const u=this._taskProgressTokens.get(n);u!==void 0&&(this._progressHandlers.delete(u),this._taskProgressTokens.delete(n))}async _enqueueTaskMessage(n,u,f){if(!this._taskStore||!this._taskMessageQueue)throw new Error("Cannot enqueue task message: taskStore and taskMessageQueue are not configured");const y=this._options?.maxTaskQueueSize;await this._taskMessageQueue.enqueue(n,u,f,y)}async _clearTaskQueue(n,u){if(this._taskMessageQueue){const f=await this._taskMessageQueue.dequeueAll(n,u);for(const y of f)if(y.type==="request"&&isJSONRPCRequest(y.message)){const S=y.message.id,A=this._requestResolvers.get(S);A?(A(new McpError(ErrorCode.InternalError,"Task cancelled or completed")),this._requestResolvers.delete(S)):this._onerror(new Error(`Resolver missing for request ${S} during task ${n} cleanup`))}}}async _waitForTaskUpdate(n,u){let f=this._options?.defaultTaskPollInterval??1e3;try{const y=await this._taskStore?.getTask(n);y?.pollInterval&&(f=y.pollInterval)}catch{}return new Promise((y,S)=>{if(u.aborted){S(new McpError(ErrorCode.InvalidRequest,"Request cancelled"));return}const A=setTimeout(y,f);u.addEventListener("abort",()=>{clearTimeout(A),S(new McpError(ErrorCode.InvalidRequest,"Request cancelled"))},{once:!0})})}requestTaskStore(n,u){const f=this._taskStore;if(!f)throw new Error("No task store configured");return{createTask:async y=>{if(!n)throw new Error("No request provided");return await f.createTask(y,n.id,{method:n.method,params:n.params},u)},getTask:async y=>{const S=await f.getTask(y,u);if(!S)throw new McpError(ErrorCode.InvalidParams,"Failed to retrieve task: Task not found");return S},storeTaskResult:async(y,S,A)=>{await f.storeTaskResult(y,S,A,u);const w=await f.getTask(y,u);if(w){const C=TaskStatusNotificationSchema.parse({method:"notifications/tasks/status",params:w});await this.notification(C),isTerminal(w.status)&&this._cleanupTaskProgressHandler(y)}},getTaskResult:y=>f.getTaskResult(y,u),updateTaskStatus:async(y,S,A)=>{const w=await f.getTask(y,u);if(!w)throw new McpError(ErrorCode.InvalidParams,`Task "${y}" not found - it may have been cleaned up`);if(isTerminal(w.status))throw new McpError(ErrorCode.InvalidParams,`Cannot update task "${y}" from terminal status "${w.status}" to "${S}". Terminal states (completed, failed, cancelled) cannot transition to other states.`);await f.updateTaskStatus(y,S,A,u);const C=await f.getTask(y,u);if(C){const T=TaskStatusNotificationSchema.parse({method:"notifications/tasks/status",params:C});await this.notification(T),isTerminal(C.status)&&this._cleanupTaskProgressHandler(y)}},listTasks:y=>f.listTasks(y,u)}}}function isPlainObject(s){return s!==null&&typeof s=="object"&&!Array.isArray(s)}function mergeCapabilities(s,n){const u={...s};for(const f in n){const y=f,S=n[y];if(S===void 0)continue;const A=u[y];isPlainObject(A)&&isPlainObject(S)?u[y]={...A,...S}:u[y]=S}return u}var ajv$1={exports:{}},core$3={},validate$1={},boolSchema$1={},errors$1={},codegen$1={},code$3={},hasRequiredCode$3;function requireCode$3(){return hasRequiredCode$3||(hasRequiredCode$3=1,(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.regexpCode=s.getEsmExportName=s.getProperty=s.safeStringify=s.stringify=s.strConcat=s.addCodeArg=s.str=s._=s.nil=s._Code=s.Name=s.IDENTIFIER=s._CodeOrName=void 0;class n{}s._CodeOrName=n,s.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class u extends n{constructor(G){if(super(),!s.IDENTIFIER.test(G))throw new Error("CodeGen: name must be a valid identifier");this.str=G}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}s.Name=u;class f extends n{constructor(G){super(),this._items=typeof G=="string"?[G]:G}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const G=this._items[0];return G===""||G==='""'}get str(){var G;return(G=this._str)!==null&&G!==void 0?G:this._str=this._items.reduce((Y,K)=>`${Y}${K}`,"")}get names(){var G;return(G=this._names)!==null&&G!==void 0?G:this._names=this._items.reduce((Y,K)=>(K instanceof u&&(Y[K.str]=(Y[K.str]||0)+1),Y),{})}}s._Code=f,s.nil=new f("");function y(U,...G){const Y=[U[0]];let K=0;for(;K<G.length;)w(Y,G[K]),Y.push(U[++K]);return new f(Y)}s._=y;const S=new f("+");function A(U,...G){const Y=[L(U[0])];let K=0;for(;K<G.length;)Y.push(S),w(Y,G[K]),Y.push(S,L(U[++K]));return C(Y),new f(Y)}s.str=A;function w(U,G){G instanceof f?U.push(...G._items):G instanceof u?U.push(G):U.push(I(G))}s.addCodeArg=w;function C(U){let G=1;for(;G<U.length-1;){if(U[G]===S){const Y=T(U[G-1],U[G+1]);if(Y!==void 0){U.splice(G-1,3,Y);continue}U[G++]="+"}G++}}function T(U,G){if(G==='""')return U;if(U==='""')return G;if(typeof U=="string")return G instanceof u||U[U.length-1]!=='"'?void 0:typeof G!="string"?`${U.slice(0,-1)}${G}"`:G[0]==='"'?U.slice(0,-1)+G.slice(1):void 0;if(typeof G=="string"&&G[0]==='"'&&!(U instanceof u))return`"${U}${G.slice(1)}`}function R(U,G){return G.emptyStr()?U:U.emptyStr()?G:A`${U}${G}`}s.strConcat=R;function I(U){return typeof U=="number"||typeof U=="boolean"||U===null?U:L(Array.isArray(U)?U.join(","):U)}function N(U){return new f(L(U))}s.stringify=N;function L(U){return JSON.stringify(U).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}s.safeStringify=L;function F(U){return typeof U=="string"&&s.IDENTIFIER.test(U)?new f(`.${U}`):y`[${U}]`}s.getProperty=F;function H(U){if(typeof U=="string"&&s.IDENTIFIER.test(U))return new f(`${U}`);throw new Error(`CodeGen: invalid export name: ${U}, use explicit $id name mapping`)}s.getEsmExportName=H;function z(U){return new f(U.toString())}s.regexpCode=z})(code$3)),code$3}var scope$1={},hasRequiredScope$1;function requireScope$1(){return hasRequiredScope$1||(hasRequiredScope$1=1,(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.ValueScope=s.ValueScopeName=s.Scope=s.varKinds=s.UsedValueState=void 0;const n=requireCode$3();class u extends Error{constructor(T){super(`CodeGen: "code" for ${T} not defined`),this.value=T.value}}var f;(function(C){C[C.Started=0]="Started",C[C.Completed=1]="Completed"})(f||(s.UsedValueState=f={})),s.varKinds={const:new n.Name("const"),let:new n.Name("let"),var:new n.Name("var")};class y{constructor({prefixes:T,parent:R}={}){this._names={},this._prefixes=T,this._parent=R}toName(T){return T instanceof n.Name?T:this.name(T)}name(T){return new n.Name(this._newName(T))}_newName(T){const R=this._names[T]||this._nameGroup(T);return`${T}${R.index++}`}_nameGroup(T){var R,I;if(!((I=(R=this._parent)===null||R===void 0?void 0:R._prefixes)===null||I===void 0)&&I.has(T)||this._prefixes&&!this._prefixes.has(T))throw new Error(`CodeGen: prefix "${T}" is not allowed in this scope`);return this._names[T]={prefix:T,index:0}}}s.Scope=y;class S extends n.Name{constructor(T,R){super(R),this.prefix=T}setValue(T,{property:R,itemIndex:I}){this.value=T,this.scopePath=(0,n._)`.${new n.Name(R)}[${I}]`}}s.ValueScopeName=S;const A=(0,n._)`\n`;class w extends y{constructor(T){super(T),this._values={},this._scope=T.scope,this.opts={...T,_n:T.lines?A:n.nil}}get(){return this._scope}name(T){return new S(T,this._newName(T))}value(T,R){var I;if(R.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const N=this.toName(T),{prefix:L}=N,F=(I=R.key)!==null&&I!==void 0?I:R.ref;let H=this._values[L];if(H){const G=H.get(F);if(G)return G}else H=this._values[L]=new Map;H.set(F,N);const z=this._scope[L]||(this._scope[L]=[]),U=z.length;return z[U]=R.ref,N.setValue(R,{property:L,itemIndex:U}),N}getValue(T,R){const I=this._values[T];if(I)return I.get(R)}scopeRefs(T,R=this._values){return this._reduceValues(R,I=>{if(I.scopePath===void 0)throw new Error(`CodeGen: name "${I}" has no value`);return(0,n._)`${T}${I.scopePath}`})}scopeCode(T=this._values,R,I){return this._reduceValues(T,N=>{if(N.value===void 0)throw new Error(`CodeGen: name "${N}" has no value`);return N.value.code},R,I)}_reduceValues(T,R,I={},N){let L=n.nil;for(const F in T){const H=T[F];if(!H)continue;const z=I[F]=I[F]||new Map;H.forEach(U=>{if(z.has(U))return;z.set(U,f.Started);let G=R(U);if(G){const Y=this.opts.es5?s.varKinds.var:s.varKinds.const;L=(0,n._)`${L}${Y} ${U} = ${G};${this.opts._n}`}else if(G=N?.(U))L=(0,n._)`${L}${G}${this.opts._n}`;else throw new u(U);z.set(U,f.Completed)})}return L}}s.ValueScope=w})(scope$1)),scope$1}var hasRequiredCodegen$1;function requireCodegen$1(){return hasRequiredCodegen$1||(hasRequiredCodegen$1=1,(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.or=s.and=s.not=s.CodeGen=s.operators=s.varKinds=s.ValueScopeName=s.ValueScope=s.Scope=s.Name=s.regexpCode=s.stringify=s.getProperty=s.nil=s.strConcat=s.str=s._=void 0;const n=requireCode$3(),u=requireScope$1();var f=requireCode$3();Object.defineProperty(s,"_",{enumerable:!0,get:function(){return f._}}),Object.defineProperty(s,"str",{enumerable:!0,get:function(){return f.str}}),Object.defineProperty(s,"strConcat",{enumerable:!0,get:function(){return f.strConcat}}),Object.defineProperty(s,"nil",{enumerable:!0,get:function(){return f.nil}}),Object.defineProperty(s,"getProperty",{enumerable:!0,get:function(){return f.getProperty}}),Object.defineProperty(s,"stringify",{enumerable:!0,get:function(){return f.stringify}}),Object.defineProperty(s,"regexpCode",{enumerable:!0,get:function(){return f.regexpCode}}),Object.defineProperty(s,"Name",{enumerable:!0,get:function(){return f.Name}});var y=requireScope$1();Object.defineProperty(s,"Scope",{enumerable:!0,get:function(){return y.Scope}}),Object.defineProperty(s,"ValueScope",{enumerable:!0,get:function(){return y.ValueScope}}),Object.defineProperty(s,"ValueScopeName",{enumerable:!0,get:function(){return y.ValueScopeName}}),Object.defineProperty(s,"varKinds",{enumerable:!0,get:function(){return y.varKinds}}),s.operators={GT:new n._Code(">"),GTE:new n._Code(">="),LT:new n._Code("<"),LTE:new n._Code("<="),EQ:new n._Code("==="),NEQ:new n._Code("!=="),NOT:new n._Code("!"),OR:new n._Code("||"),AND:new n._Code("&&"),ADD:new n._Code("+")};class S{optimizeNodes(){return this}optimizeNames(ue,ye){return this}}class A extends S{constructor(ue,ye,ce){super(),this.varKind=ue,this.name=ye,this.rhs=ce}render({es5:ue,_n:ye}){const ce=ue?u.varKinds.var:this.varKind,_e=this.rhs===void 0?"":` = ${this.rhs}`;return`${ce} ${this.name}${_e};`+ye}optimizeNames(ue,ye){if(ue[this.name.str])return this.rhs&&(this.rhs=Ie(this.rhs,ue,ye)),this}get names(){return this.rhs instanceof n._CodeOrName?this.rhs.names:{}}}class w extends S{constructor(ue,ye,ce){super(),this.lhs=ue,this.rhs=ye,this.sideEffects=ce}render({_n:ue}){return`${this.lhs} = ${this.rhs};`+ue}optimizeNames(ue,ye){if(!(this.lhs instanceof n.Name&&!ue[this.lhs.str]&&!this.sideEffects))return this.rhs=Ie(this.rhs,ue,ye),this}get names(){const ue=this.lhs instanceof n.Name?{}:{...this.lhs.names};return we(ue,this.rhs)}}class C extends w{constructor(ue,ye,ce,_e){super(ue,ce,_e),this.op=ye}render({_n:ue}){return`${this.lhs} ${this.op}= ${this.rhs};`+ue}}class T extends S{constructor(ue){super(),this.label=ue,this.names={}}render({_n:ue}){return`${this.label}:`+ue}}class R extends S{constructor(ue){super(),this.label=ue,this.names={}}render({_n:ue}){return`break${this.label?` ${this.label}`:""};`+ue}}class I extends S{constructor(ue){super(),this.error=ue}render({_n:ue}){return`throw ${this.error};`+ue}get names(){return this.error.names}}class N extends S{constructor(ue){super(),this.code=ue}render({_n:ue}){return`${this.code};`+ue}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(ue,ye){return this.code=Ie(this.code,ue,ye),this}get names(){return this.code instanceof n._CodeOrName?this.code.names:{}}}class L extends S{constructor(ue=[]){super(),this.nodes=ue}render(ue){return this.nodes.reduce((ye,ce)=>ye+ce.render(ue),"")}optimizeNodes(){const{nodes:ue}=this;let ye=ue.length;for(;ye--;){const ce=ue[ye].optimizeNodes();Array.isArray(ce)?ue.splice(ye,1,...ce):ce?ue[ye]=ce:ue.splice(ye,1)}return ue.length>0?this:void 0}optimizeNames(ue,ye){const{nodes:ce}=this;let _e=ce.length;for(;_e--;){const ke=ce[_e];ke.optimizeNames(ue,ye)||(Be(ue,ke.names),ce.splice(_e,1))}return ce.length>0?this:void 0}get names(){return this.nodes.reduce((ue,ye)=>Ee(ue,ye.names),{})}}class F extends L{render(ue){return"{"+ue._n+super.render(ue)+"}"+ue._n}}class H extends L{}class z extends F{}z.kind="else";class U extends F{constructor(ue,ye){super(ye),this.condition=ue}render(ue){let ye=`if(${this.condition})`+super.render(ue);return this.else&&(ye+="else "+this.else.render(ue)),ye}optimizeNodes(){super.optimizeNodes();const ue=this.condition;if(ue===!0)return this.nodes;let ye=this.else;if(ye){const ce=ye.optimizeNodes();ye=this.else=Array.isArray(ce)?new z(ce):ce}if(ye)return ue===!1?ye instanceof U?ye:ye.nodes:this.nodes.length?this:new U(Me(ue),ye instanceof U?[ye]:ye.nodes);if(!(ue===!1||!this.nodes.length))return this}optimizeNames(ue,ye){var ce;if(this.else=(ce=this.else)===null||ce===void 0?void 0:ce.optimizeNames(ue,ye),!!(super.optimizeNames(ue,ye)||this.else))return this.condition=Ie(this.condition,ue,ye),this}get names(){const ue=super.names;return we(ue,this.condition),this.else&&Ee(ue,this.else.names),ue}}U.kind="if";class G extends F{}G.kind="for";class Y extends G{constructor(ue){super(),this.iteration=ue}render(ue){return`for(${this.iteration})`+super.render(ue)}optimizeNames(ue,ye){if(super.optimizeNames(ue,ye))return this.iteration=Ie(this.iteration,ue,ye),this}get names(){return Ee(super.names,this.iteration.names)}}class K extends G{constructor(ue,ye,ce,_e){super(),this.varKind=ue,this.name=ye,this.from=ce,this.to=_e}render(ue){const ye=ue.es5?u.varKinds.var:this.varKind,{name:ce,from:_e,to:ke}=this;return`for(${ye} ${ce}=${_e}; ${ce}<${ke}; ${ce}++)`+super.render(ue)}get names(){const ue=we(super.names,this.from);return we(ue,this.to)}}class Z extends G{constructor(ue,ye,ce,_e){super(),this.loop=ue,this.varKind=ye,this.name=ce,this.iterable=_e}render(ue){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(ue)}optimizeNames(ue,ye){if(super.optimizeNames(ue,ye))return this.iterable=Ie(this.iterable,ue,ye),this}get names(){return Ee(super.names,this.iterable.names)}}class J extends F{constructor(ue,ye,ce){super(),this.name=ue,this.args=ye,this.async=ce}render(ue){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(ue)}}J.kind="func";class te extends L{render(ue){return"return "+super.render(ue)}}te.kind="return";class de extends F{render(ue){let ye="try"+super.render(ue);return this.catch&&(ye+=this.catch.render(ue)),this.finally&&(ye+=this.finally.render(ue)),ye}optimizeNodes(){var ue,ye;return super.optimizeNodes(),(ue=this.catch)===null||ue===void 0||ue.optimizeNodes(),(ye=this.finally)===null||ye===void 0||ye.optimizeNodes(),this}optimizeNames(ue,ye){var ce,_e;return super.optimizeNames(ue,ye),(ce=this.catch)===null||ce===void 0||ce.optimizeNames(ue,ye),(_e=this.finally)===null||_e===void 0||_e.optimizeNames(ue,ye),this}get names(){const ue=super.names;return this.catch&&Ee(ue,this.catch.names),this.finally&&Ee(ue,this.finally.names),ue}}class se extends F{constructor(ue){super(),this.error=ue}render(ue){return`catch(${this.error})`+super.render(ue)}}se.kind="catch";class ne extends F{render(ue){return"finally"+super.render(ue)}}ne.kind="finally";class ge{constructor(ue,ye={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...ye,_n:ye.lines?`
`:""},this._extScope=ue,this._scope=new u.Scope({parent:ue}),this._nodes=[new H]}toString(){return this._root.render(this.opts)}name(ue){return this._scope.name(ue)}scopeName(ue){return this._extScope.name(ue)}scopeValue(ue,ye){const ce=this._extScope.value(ue,ye);return(this._values[ce.prefix]||(this._values[ce.prefix]=new Set)).add(ce),ce}getScopeValue(ue,ye){return this._extScope.getValue(ue,ye)}scopeRefs(ue){return this._extScope.scopeRefs(ue,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(ue,ye,ce,_e){const ke=this._scope.toName(ye);return ce!==void 0&&_e&&(this._constants[ke.str]=ce),this._leafNode(new A(ue,ke,ce)),ke}const(ue,ye,ce){return this._def(u.varKinds.const,ue,ye,ce)}let(ue,ye,ce){return this._def(u.varKinds.let,ue,ye,ce)}var(ue,ye,ce){return this._def(u.varKinds.var,ue,ye,ce)}assign(ue,ye,ce){return this._leafNode(new w(ue,ye,ce))}add(ue,ye){return this._leafNode(new C(ue,s.operators.ADD,ye))}code(ue){return typeof ue=="function"?ue():ue!==n.nil&&this._leafNode(new N(ue)),this}object(...ue){const ye=["{"];for(const[ce,_e]of ue)ye.length>1&&ye.push(","),ye.push(ce),(ce!==_e||this.opts.es5)&&(ye.push(":"),(0,n.addCodeArg)(ye,_e));return ye.push("}"),new n._Code(ye)}if(ue,ye,ce){if(this._blockNode(new U(ue)),ye&&ce)this.code(ye).else().code(ce).endIf();else if(ye)this.code(ye).endIf();else if(ce)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(ue){return this._elseNode(new U(ue))}else(){return this._elseNode(new z)}endIf(){return this._endBlockNode(U,z)}_for(ue,ye){return this._blockNode(ue),ye&&this.code(ye).endFor(),this}for(ue,ye){return this._for(new Y(ue),ye)}forRange(ue,ye,ce,_e,ke=this.opts.es5?u.varKinds.var:u.varKinds.let){const Pe=this._scope.toName(ue);return this._for(new K(ke,Pe,ye,ce),()=>_e(Pe))}forOf(ue,ye,ce,_e=u.varKinds.const){const ke=this._scope.toName(ue);if(this.opts.es5){const Pe=ye instanceof n.Name?ye:this.var("_arr",ye);return this.forRange("_i",0,(0,n._)`${Pe}.length`,$e=>{this.var(ke,(0,n._)`${Pe}[${$e}]`),ce(ke)})}return this._for(new Z("of",_e,ke,ye),()=>ce(ke))}forIn(ue,ye,ce,_e=this.opts.es5?u.varKinds.var:u.varKinds.const){if(this.opts.ownProperties)return this.forOf(ue,(0,n._)`Object.keys(${ye})`,ce);const ke=this._scope.toName(ue);return this._for(new Z("in",_e,ke,ye),()=>ce(ke))}endFor(){return this._endBlockNode(G)}label(ue){return this._leafNode(new T(ue))}break(ue){return this._leafNode(new R(ue))}return(ue){const ye=new te;if(this._blockNode(ye),this.code(ue),ye.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(te)}try(ue,ye,ce){if(!ye&&!ce)throw new Error('CodeGen: "try" without "catch" and "finally"');const _e=new de;if(this._blockNode(_e),this.code(ue),ye){const ke=this.name("e");this._currNode=_e.catch=new se(ke),ye(ke)}return ce&&(this._currNode=_e.finally=new ne,this.code(ce)),this._endBlockNode(se,ne)}throw(ue){return this._leafNode(new I(ue))}block(ue,ye){return this._blockStarts.push(this._nodes.length),ue&&this.code(ue).endBlock(ye),this}endBlock(ue){const ye=this._blockStarts.pop();if(ye===void 0)throw new Error("CodeGen: not in self-balancing block");const ce=this._nodes.length-ye;if(ce<0||ue!==void 0&&ce!==ue)throw new Error(`CodeGen: wrong number of nodes: ${ce} vs ${ue} expected`);return this._nodes.length=ye,this}func(ue,ye=n.nil,ce,_e){return this._blockNode(new J(ue,ye,ce)),_e&&this.code(_e).endFunc(),this}endFunc(){return this._endBlockNode(J)}optimize(ue=1){for(;ue-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(ue){return this._currNode.nodes.push(ue),this}_blockNode(ue){this._currNode.nodes.push(ue),this._nodes.push(ue)}_endBlockNode(ue,ye){const ce=this._currNode;if(ce instanceof ue||ye&&ce instanceof ye)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${ye?`${ue.kind}/${ye.kind}`:ue.kind}"`)}_elseNode(ue){const ye=this._currNode;if(!(ye instanceof U))throw new Error('CodeGen: "else" without "if"');return this._currNode=ye.else=ue,this}get _root(){return this._nodes[0]}get _currNode(){const ue=this._nodes;return ue[ue.length-1]}set _currNode(ue){const ye=this._nodes;ye[ye.length-1]=ue}}s.CodeGen=ge;function Ee(he,ue){for(const ye in ue)he[ye]=(he[ye]||0)+(ue[ye]||0);return he}function we(he,ue){return ue instanceof n._CodeOrName?Ee(he,ue.names):he}function Ie(he,ue,ye){if(he instanceof n.Name)return ce(he);if(!_e(he))return he;return new n._Code(he._items.reduce((ke,Pe)=>(Pe instanceof n.Name&&(Pe=ce(Pe)),Pe instanceof n._Code?ke.push(...Pe._items):ke.push(Pe),ke),[]));function ce(ke){const Pe=ye[ke.str];return Pe===void 0||ue[ke.str]!==1?ke:(delete ue[ke.str],Pe)}function _e(ke){return ke instanceof n._Code&&ke._items.some(Pe=>Pe instanceof n.Name&&ue[Pe.str]===1&&ye[Pe.str]!==void 0)}}function Be(he,ue){for(const ye in ue)he[ye]=(he[ye]||0)-(ue[ye]||0)}function Me(he){return typeof he=="boolean"||typeof he=="number"||he===null?!he:(0,n._)`!${be(he)}`}s.not=Me;const Re=ae(s.operators.AND);function Te(...he){return he.reduce(Re)}s.and=Te;const Se=ae(s.operators.OR);function oe(...he){return he.reduce(Se)}s.or=oe;function ae(he){return(ue,ye)=>ue===n.nil?ye:ye===n.nil?ue:(0,n._)`${be(ue)} ${he} ${be(ye)}`}function be(he){return he instanceof n.Name?he:(0,n._)`(${he})`}})(codegen$1)),codegen$1}var util$1={},hasRequiredUtil$1;function requireUtil$1(){if(hasRequiredUtil$1)return util$1;hasRequiredUtil$1=1,Object.defineProperty(util$1,"__esModule",{value:!0}),util$1.checkStrictMode=util$1.getErrorPath=util$1.Type=util$1.useFunc=util$1.setEvaluated=util$1.evaluatedPropsToName=util$1.mergeEvaluated=util$1.eachItem=util$1.unescapeJsonPointer=util$1.escapeJsonPointer=util$1.escapeFragment=util$1.unescapeFragment=util$1.schemaRefOrVal=util$1.schemaHasRulesButRef=util$1.schemaHasRules=util$1.checkUnknownRules=util$1.alwaysValidSchema=util$1.toHash=void 0;const s=requireCodegen$1(),n=requireCode$3();function u(Z){const J={};for(const te of Z)J[te]=!0;return J}util$1.toHash=u;function f(Z,J){return typeof J=="boolean"?J:Object.keys(J).length===0?!0:(y(Z,J),!S(J,Z.self.RULES.all))}util$1.alwaysValidSchema=f;function y(Z,J=Z.schema){const{opts:te,self:de}=Z;if(!te.strictSchema||typeof J=="boolean")return;const se=de.RULES.keywords;for(const ne in J)se[ne]||K(Z,`unknown keyword: "${ne}"`)}util$1.checkUnknownRules=y;function S(Z,J){if(typeof Z=="boolean")return!Z;for(const te in Z)if(J[te])return!0;return!1}util$1.schemaHasRules=S;function A(Z,J){if(typeof Z=="boolean")return!Z;for(const te in Z)if(te!=="$ref"&&J.all[te])return!0;return!1}util$1.schemaHasRulesButRef=A;function w({topSchemaRef:Z,schemaPath:J},te,de,se){if(!se){if(typeof te=="number"||typeof te=="boolean")return te;if(typeof te=="string")return(0,s._)`${te}`}return(0,s._)`${Z}${J}${(0,s.getProperty)(de)}`}util$1.schemaRefOrVal=w;function C(Z){return I(decodeURIComponent(Z))}util$1.unescapeFragment=C;function T(Z){return encodeURIComponent(R(Z))}util$1.escapeFragment=T;function R(Z){return typeof Z=="number"?`${Z}`:Z.replace(/~/g,"~0").replace(/\//g,"~1")}util$1.escapeJsonPointer=R;function I(Z){return Z.replace(/~1/g,"/").replace(/~0/g,"~")}util$1.unescapeJsonPointer=I;function N(Z,J){if(Array.isArray(Z))for(const te of Z)J(te);else J(Z)}util$1.eachItem=N;function L({mergeNames:Z,mergeToName:J,mergeValues:te,resultToName:de}){return(se,ne,ge,Ee)=>{const we=ge===void 0?ne:ge instanceof s.Name?(ne instanceof s.Name?Z(se,ne,ge):J(se,ne,ge),ge):ne instanceof s.Name?(J(se,ge,ne),ne):te(ne,ge);return Ee===s.Name&&!(we instanceof s.Name)?de(se,we):we}}util$1.mergeEvaluated={props:L({mergeNames:(Z,J,te)=>Z.if((0,s._)`${te} !== true && ${J} !== undefined`,()=>{Z.if((0,s._)`${J} === true`,()=>Z.assign(te,!0),()=>Z.assign(te,(0,s._)`${te} || {}`).code((0,s._)`Object.assign(${te}, ${J})`))}),mergeToName:(Z,J,te)=>Z.if((0,s._)`${te} !== true`,()=>{J===!0?Z.assign(te,!0):(Z.assign(te,(0,s._)`${te} || {}`),H(Z,te,J))}),mergeValues:(Z,J)=>Z===!0?!0:{...Z,...J},resultToName:F}),items:L({mergeNames:(Z,J,te)=>Z.if((0,s._)`${te} !== true && ${J} !== undefined`,()=>Z.assign(te,(0,s._)`${J} === true ? true : ${te} > ${J} ? ${te} : ${J}`)),mergeToName:(Z,J,te)=>Z.if((0,s._)`${te} !== true`,()=>Z.assign(te,J===!0?!0:(0,s._)`${te} > ${J} ? ${te} : ${J}`)),mergeValues:(Z,J)=>Z===!0?!0:Math.max(Z,J),resultToName:(Z,J)=>Z.var("items",J)})};function F(Z,J){if(J===!0)return Z.var("props",!0);const te=Z.var("props",(0,s._)`{}`);return J!==void 0&&H(Z,te,J),te}util$1.evaluatedPropsToName=F;function H(Z,J,te){Object.keys(te).forEach(de=>Z.assign((0,s._)`${J}${(0,s.getProperty)(de)}`,!0))}util$1.setEvaluated=H;const z={};function U(Z,J){return Z.scopeValue("func",{ref:J,code:z[J.code]||(z[J.code]=new n._Code(J.code))})}util$1.useFunc=U;var G;(function(Z){Z[Z.Num=0]="Num",Z[Z.Str=1]="Str"})(G||(util$1.Type=G={}));function Y(Z,J,te){if(Z instanceof s.Name){const de=J===G.Num;return te?de?(0,s._)`"[" + ${Z} + "]"`:(0,s._)`"['" + ${Z} + "']"`:de?(0,s._)`"/" + ${Z}`:(0,s._)`"/" + ${Z}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return te?(0,s.getProperty)(Z).toString():"/"+R(Z)}util$1.getErrorPath=Y;function K(Z,J,te=Z.opts.strictSchema){if(te){if(J=`strict mode: ${J}`,te===!0)throw new Error(J);Z.self.logger.warn(J)}}return util$1.checkStrictMode=K,util$1}var names$1={},hasRequiredNames$1;function requireNames$1(){if(hasRequiredNames$1)return names$1;hasRequiredNames$1=1,Object.defineProperty(names$1,"__esModule",{value:!0});const s=requireCodegen$1(),n={data:new s.Name("data"),valCxt:new s.Name("valCxt"),instancePath:new s.Name("instancePath"),parentData:new s.Name("parentData"),parentDataProperty:new s.Name("parentDataProperty"),rootData:new s.Name("rootData"),dynamicAnchors:new s.Name("dynamicAnchors"),vErrors:new s.Name("vErrors"),errors:new s.Name("errors"),this:new s.Name("this"),self:new s.Name("self"),scope:new s.Name("scope"),json:new s.Name("json"),jsonPos:new s.Name("jsonPos"),jsonLen:new s.Name("jsonLen"),jsonPart:new s.Name("jsonPart")};return names$1.default=n,names$1}var hasRequiredErrors$1;function requireErrors$1(){return hasRequiredErrors$1||(hasRequiredErrors$1=1,(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.extendErrors=s.resetErrorsCount=s.reportExtraError=s.reportError=s.keyword$DataError=s.keywordError=void 0;const n=requireCodegen$1(),u=requireUtil$1(),f=requireNames$1();s.keywordError={message:({keyword:z})=>(0,n.str)`must pass "${z}" keyword validation`},s.keyword$DataError={message:({keyword:z,schemaType:U})=>U?(0,n.str)`"${z}" keyword must be ${U} ($data)`:(0,n.str)`"${z}" keyword is invalid ($data)`};function y(z,U=s.keywordError,G,Y){const{it:K}=z,{gen:Z,compositeRule:J,allErrors:te}=K,de=I(z,U,G);Y??(J||te)?C(Z,de):T(K,(0,n._)`[${de}]`)}s.reportError=y;function S(z,U=s.keywordError,G){const{it:Y}=z,{gen:K,compositeRule:Z,allErrors:J}=Y,te=I(z,U,G);C(K,te),Z||J||T(Y,f.default.vErrors)}s.reportExtraError=S;function A(z,U){z.assign(f.default.errors,U),z.if((0,n._)`${f.default.vErrors} !== null`,()=>z.if(U,()=>z.assign((0,n._)`${f.default.vErrors}.length`,U),()=>z.assign(f.default.vErrors,null)))}s.resetErrorsCount=A;function w({gen:z,keyword:U,schemaValue:G,data:Y,errsCount:K,it:Z}){if(K===void 0)throw new Error("ajv implementation error");const J=z.name("err");z.forRange("i",K,f.default.errors,te=>{z.const(J,(0,n._)`${f.default.vErrors}[${te}]`),z.if((0,n._)`${J}.instancePath === undefined`,()=>z.assign((0,n._)`${J}.instancePath`,(0,n.strConcat)(f.default.instancePath,Z.errorPath))),z.assign((0,n._)`${J}.schemaPath`,(0,n.str)`${Z.errSchemaPath}/${U}`),Z.opts.verbose&&(z.assign((0,n._)`${J}.schema`,G),z.assign((0,n._)`${J}.data`,Y))})}s.extendErrors=w;function C(z,U){const G=z.const("err",U);z.if((0,n._)`${f.default.vErrors} === null`,()=>z.assign(f.default.vErrors,(0,n._)`[${G}]`),(0,n._)`${f.default.vErrors}.push(${G})`),z.code((0,n._)`${f.default.errors}++`)}function T(z,U){const{gen:G,validateName:Y,schemaEnv:K}=z;K.$async?G.throw((0,n._)`new ${z.ValidationError}(${U})`):(G.assign((0,n._)`${Y}.errors`,U),G.return(!1))}const R={keyword:new n.Name("keyword"),schemaPath:new n.Name("schemaPath"),params:new n.Name("params"),propertyName:new n.Name("propertyName"),message:new n.Name("message"),schema:new n.Name("schema"),parentSchema:new n.Name("parentSchema")};function I(z,U,G){const{createErrors:Y}=z.it;return Y===!1?(0,n._)`{}`:N(z,U,G)}function N(z,U,G={}){const{gen:Y,it:K}=z,Z=[L(K,G),F(z,G)];return H(z,U,Z),Y.object(...Z)}function L({errorPath:z},{instancePath:U}){const G=U?(0,n.str)`${z}${(0,u.getErrorPath)(U,u.Type.Str)}`:z;return[f.default.instancePath,(0,n.strConcat)(f.default.instancePath,G)]}function F({keyword:z,it:{errSchemaPath:U}},{schemaPath:G,parentSchema:Y}){let K=Y?U:(0,n.str)`${U}/${z}`;return G&&(K=(0,n.str)`${K}${(0,u.getErrorPath)(G,u.Type.Str)}`),[R.schemaPath,K]}function H(z,{params:U,message:G},Y){const{keyword:K,data:Z,schemaValue:J,it:te}=z,{opts:de,propertyName:se,topSchemaRef:ne,schemaPath:ge}=te;Y.push([R.keyword,K],[R.params,typeof U=="function"?U(z):U||(0,n._)`{}`]),de.messages&&Y.push([R.message,typeof G=="function"?G(z):G]),de.verbose&&Y.push([R.schema,J],[R.parentSchema,(0,n._)`${ne}${ge}`],[f.default.data,Z]),se&&Y.push([R.propertyName,se])}})(errors$1)),errors$1}var hasRequiredBoolSchema$1;function requireBoolSchema$1(){if(hasRequiredBoolSchema$1)return boolSchema$1;hasRequiredBoolSchema$1=1,Object.defineProperty(boolSchema$1,"__esModule",{value:!0}),boolSchema$1.boolOrEmptySchema=boolSchema$1.topBoolOrEmptySchema=void 0;const s=requireErrors$1(),n=requireCodegen$1(),u=requireNames$1(),f={message:"boolean schema is false"};function y(w){const{gen:C,schema:T,validateName:R}=w;T===!1?A(w,!1):typeof T=="object"&&T.$async===!0?C.return(u.default.data):(C.assign((0,n._)`${R}.errors`,null),C.return(!0))}boolSchema$1.topBoolOrEmptySchema=y;function S(w,C){const{gen:T,schema:R}=w;R===!1?(T.var(C,!1),A(w)):T.var(C,!0)}boolSchema$1.boolOrEmptySchema=S;function A(w,C){const{gen:T,data:R}=w,I={gen:T,keyword:"false schema",data:R,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:w};(0,s.reportError)(I,f,void 0,C)}return boolSchema$1}var dataType$1={},rules$1={},hasRequiredRules$1;function requireRules$1(){if(hasRequiredRules$1)return rules$1;hasRequiredRules$1=1,Object.defineProperty(rules$1,"__esModule",{value:!0}),rules$1.getRules=rules$1.isJSONType=void 0;const s=["string","number","integer","boolean","null","object","array"],n=new Set(s);function u(y){return typeof y=="string"&&n.has(y)}rules$1.isJSONType=u;function f(){const y={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...y,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},y.number,y.string,y.array,y.object],post:{rules:[]},all:{},keywords:{}}}return rules$1.getRules=f,rules$1}var applicability$1={},hasRequiredApplicability$1;function requireApplicability$1(){if(hasRequiredApplicability$1)return applicability$1;hasRequiredApplicability$1=1,Object.defineProperty(applicability$1,"__esModule",{value:!0}),applicability$1.shouldUseRule=applicability$1.shouldUseGroup=applicability$1.schemaHasRulesForType=void 0;function s({schema:f,self:y},S){const A=y.RULES.types[S];return A&&A!==!0&&n(f,A)}applicability$1.schemaHasRulesForType=s;function n(f,y){return y.rules.some(S=>u(f,S))}applicability$1.shouldUseGroup=n;function u(f,y){var S;return f[y.keyword]!==void 0||((S=y.definition.implements)===null||S===void 0?void 0:S.some(A=>f[A]!==void 0))}return applicability$1.shouldUseRule=u,applicability$1}var hasRequiredDataType$1;function requireDataType$1(){if(hasRequiredDataType$1)return dataType$1;hasRequiredDataType$1=1,Object.defineProperty(dataType$1,"__esModule",{value:!0}),dataType$1.reportTypeError=dataType$1.checkDataTypes=dataType$1.checkDataType=dataType$1.coerceAndCheckDataType=dataType$1.getJSONTypes=dataType$1.getSchemaTypes=dataType$1.DataType=void 0;const s=requireRules$1(),n=requireApplicability$1(),u=requireErrors$1(),f=requireCodegen$1(),y=requireUtil$1();var S;(function(G){G[G.Correct=0]="Correct",G[G.Wrong=1]="Wrong"})(S||(dataType$1.DataType=S={}));function A(G){const Y=w(G.type);if(Y.includes("null")){if(G.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!Y.length&&G.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');G.nullable===!0&&Y.push("null")}return Y}dataType$1.getSchemaTypes=A;function w(G){const Y=Array.isArray(G)?G:G?[G]:[];if(Y.every(s.isJSONType))return Y;throw new Error("type must be JSONType or JSONType[]: "+Y.join(","))}dataType$1.getJSONTypes=w;function C(G,Y){const{gen:K,data:Z,opts:J}=G,te=R(Y,J.coerceTypes),de=Y.length>0&&!(te.length===0&&Y.length===1&&(0,n.schemaHasRulesForType)(G,Y[0]));if(de){const se=F(Y,Z,J.strictNumbers,S.Wrong);K.if(se,()=>{te.length?I(G,Y,te):z(G)})}return de}dataType$1.coerceAndCheckDataType=C;const T=new Set(["string","number","integer","boolean","null"]);function R(G,Y){return Y?G.filter(K=>T.has(K)||Y==="array"&&K==="array"):[]}function I(G,Y,K){const{gen:Z,data:J,opts:te}=G,de=Z.let("dataType",(0,f._)`typeof ${J}`),se=Z.let("coerced",(0,f._)`undefined`);te.coerceTypes==="array"&&Z.if((0,f._)`${de} == 'object' && Array.isArray(${J}) && ${J}.length == 1`,()=>Z.assign(J,(0,f._)`${J}[0]`).assign(de,(0,f._)`typeof ${J}`).if(F(Y,J,te.strictNumbers),()=>Z.assign(se,J))),Z.if((0,f._)`${se} !== undefined`);for(const ge of K)(T.has(ge)||ge==="array"&&te.coerceTypes==="array")&&ne(ge);Z.else(),z(G),Z.endIf(),Z.if((0,f._)`${se} !== undefined`,()=>{Z.assign(J,se),N(G,se)});function ne(ge){switch(ge){case"string":Z.elseIf((0,f._)`${de} == "number" || ${de} == "boolean"`).assign(se,(0,f._)`"" + ${J}`).elseIf((0,f._)`${J} === null`).assign(se,(0,f._)`""`);return;case"number":Z.elseIf((0,f._)`${de} == "boolean" || ${J} === null
              || (${de} == "string" && ${J} && ${J} == +${J})`).assign(se,(0,f._)`+${J}`);return;case"integer":Z.elseIf((0,f._)`${de} === "boolean" || ${J} === null
              || (${de} === "string" && ${J} && ${J} == +${J} && !(${J} % 1))`).assign(se,(0,f._)`+${J}`);return;case"boolean":Z.elseIf((0,f._)`${J} === "false" || ${J} === 0 || ${J} === null`).assign(se,!1).elseIf((0,f._)`${J} === "true" || ${J} === 1`).assign(se,!0);return;case"null":Z.elseIf((0,f._)`${J} === "" || ${J} === 0 || ${J} === false`),Z.assign(se,null);return;case"array":Z.elseIf((0,f._)`${de} === "string" || ${de} === "number"
              || ${de} === "boolean" || ${J} === null`).assign(se,(0,f._)`[${J}]`)}}}function N({gen:G,parentData:Y,parentDataProperty:K},Z){G.if((0,f._)`${Y} !== undefined`,()=>G.assign((0,f._)`${Y}[${K}]`,Z))}function L(G,Y,K,Z=S.Correct){const J=Z===S.Correct?f.operators.EQ:f.operators.NEQ;let te;switch(G){case"null":return(0,f._)`${Y} ${J} null`;case"array":te=(0,f._)`Array.isArray(${Y})`;break;case"object":te=(0,f._)`${Y} && typeof ${Y} == "object" && !Array.isArray(${Y})`;break;case"integer":te=de((0,f._)`!(${Y} % 1) && !isNaN(${Y})`);break;case"number":te=de();break;default:return(0,f._)`typeof ${Y} ${J} ${G}`}return Z===S.Correct?te:(0,f.not)(te);function de(se=f.nil){return(0,f.and)((0,f._)`typeof ${Y} == "number"`,se,K?(0,f._)`isFinite(${Y})`:f.nil)}}dataType$1.checkDataType=L;function F(G,Y,K,Z){if(G.length===1)return L(G[0],Y,K,Z);let J;const te=(0,y.toHash)(G);if(te.array&&te.object){const de=(0,f._)`typeof ${Y} != "object"`;J=te.null?de:(0,f._)`!${Y} || ${de}`,delete te.null,delete te.array,delete te.object}else J=f.nil;te.number&&delete te.integer;for(const de in te)J=(0,f.and)(J,L(de,Y,K,Z));return J}dataType$1.checkDataTypes=F;const H={message:({schema:G})=>`must be ${G}`,params:({schema:G,schemaValue:Y})=>typeof G=="string"?(0,f._)`{type: ${G}}`:(0,f._)`{type: ${Y}}`};function z(G){const Y=U(G);(0,u.reportError)(Y,H)}dataType$1.reportTypeError=z;function U(G){const{gen:Y,data:K,schema:Z}=G,J=(0,y.schemaRefOrVal)(G,Z,"type");return{gen:Y,keyword:"type",data:K,schema:Z.type,schemaCode:J,schemaValue:J,parentSchema:Z,params:{},it:G}}return dataType$1}var defaults$1={},hasRequiredDefaults$1;function requireDefaults$1(){if(hasRequiredDefaults$1)return defaults$1;hasRequiredDefaults$1=1,Object.defineProperty(defaults$1,"__esModule",{value:!0}),defaults$1.assignDefaults=void 0;const s=requireCodegen$1(),n=requireUtil$1();function u(y,S){const{properties:A,items:w}=y.schema;if(S==="object"&&A)for(const C in A)f(y,C,A[C].default);else S==="array"&&Array.isArray(w)&&w.forEach((C,T)=>f(y,T,C.default))}defaults$1.assignDefaults=u;function f(y,S,A){const{gen:w,compositeRule:C,data:T,opts:R}=y;if(A===void 0)return;const I=(0,s._)`${T}${(0,s.getProperty)(S)}`;if(C){(0,n.checkStrictMode)(y,`default is ignored for: ${I}`);return}let N=(0,s._)`${I} === undefined`;R.useDefaults==="empty"&&(N=(0,s._)`${N} || ${I} === null || ${I} === ""`),w.if(N,(0,s._)`${I} = ${(0,s.stringify)(A)}`)}return defaults$1}var keyword$1={},code$2={},hasRequiredCode$2;function requireCode$2(){if(hasRequiredCode$2)return code$2;hasRequiredCode$2=1,Object.defineProperty(code$2,"__esModule",{value:!0}),code$2.validateUnion=code$2.validateArray=code$2.usePattern=code$2.callValidateCode=code$2.schemaProperties=code$2.allSchemaProperties=code$2.noPropertyInData=code$2.propertyInData=code$2.isOwnProperty=code$2.hasPropFunc=code$2.reportMissingProp=code$2.checkMissingProp=code$2.checkReportMissingProp=void 0;const s=requireCodegen$1(),n=requireUtil$1(),u=requireNames$1(),f=requireUtil$1();function y(G,Y){const{gen:K,data:Z,it:J}=G;K.if(R(K,Z,Y,J.opts.ownProperties),()=>{G.setParams({missingProperty:(0,s._)`${Y}`},!0),G.error()})}code$2.checkReportMissingProp=y;function S({gen:G,data:Y,it:{opts:K}},Z,J){return(0,s.or)(...Z.map(te=>(0,s.and)(R(G,Y,te,K.ownProperties),(0,s._)`${J} = ${te}`)))}code$2.checkMissingProp=S;function A(G,Y){G.setParams({missingProperty:Y},!0),G.error()}code$2.reportMissingProp=A;function w(G){return G.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,s._)`Object.prototype.hasOwnProperty`})}code$2.hasPropFunc=w;function C(G,Y,K){return(0,s._)`${w(G)}.call(${Y}, ${K})`}code$2.isOwnProperty=C;function T(G,Y,K,Z){const J=(0,s._)`${Y}${(0,s.getProperty)(K)} !== undefined`;return Z?(0,s._)`${J} && ${C(G,Y,K)}`:J}code$2.propertyInData=T;function R(G,Y,K,Z){const J=(0,s._)`${Y}${(0,s.getProperty)(K)} === undefined`;return Z?(0,s.or)(J,(0,s.not)(C(G,Y,K))):J}code$2.noPropertyInData=R;function I(G){return G?Object.keys(G).filter(Y=>Y!=="__proto__"):[]}code$2.allSchemaProperties=I;function N(G,Y){return I(Y).filter(K=>!(0,n.alwaysValidSchema)(G,Y[K]))}code$2.schemaProperties=N;function L({schemaCode:G,data:Y,it:{gen:K,topSchemaRef:Z,schemaPath:J,errorPath:te},it:de},se,ne,ge){const Ee=ge?(0,s._)`${G}, ${Y}, ${Z}${J}`:Y,we=[[u.default.instancePath,(0,s.strConcat)(u.default.instancePath,te)],[u.default.parentData,de.parentData],[u.default.parentDataProperty,de.parentDataProperty],[u.default.rootData,u.default.rootData]];de.opts.dynamicRef&&we.push([u.default.dynamicAnchors,u.default.dynamicAnchors]);const Ie=(0,s._)`${Ee}, ${K.object(...we)}`;return ne!==s.nil?(0,s._)`${se}.call(${ne}, ${Ie})`:(0,s._)`${se}(${Ie})`}code$2.callValidateCode=L;const F=(0,s._)`new RegExp`;function H({gen:G,it:{opts:Y}},K){const Z=Y.unicodeRegExp?"u":"",{regExp:J}=Y.code,te=J(K,Z);return G.scopeValue("pattern",{key:te.toString(),ref:te,code:(0,s._)`${J.code==="new RegExp"?F:(0,f.useFunc)(G,J)}(${K}, ${Z})`})}code$2.usePattern=H;function z(G){const{gen:Y,data:K,keyword:Z,it:J}=G,te=Y.name("valid");if(J.allErrors){const se=Y.let("valid",!0);return de(()=>Y.assign(se,!1)),se}return Y.var(te,!0),de(()=>Y.break()),te;function de(se){const ne=Y.const("len",(0,s._)`${K}.length`);Y.forRange("i",0,ne,ge=>{G.subschema({keyword:Z,dataProp:ge,dataPropType:n.Type.Num},te),Y.if((0,s.not)(te),se)})}}code$2.validateArray=z;function U(G){const{gen:Y,schema:K,keyword:Z,it:J}=G;if(!Array.isArray(K))throw new Error("ajv implementation error");if(K.some(se=>(0,n.alwaysValidSchema)(J,se))&&!J.opts.unevaluated)return;const te=Y.let("valid",!1),de=Y.name("_valid");Y.block(()=>K.forEach((se,ne)=>{const ge=G.subschema({keyword:Z,schemaProp:ne,compositeRule:!0},de);Y.assign(te,(0,s._)`${te} || ${de}`),G.mergeValidEvaluated(ge,de)||Y.if((0,s.not)(te))})),G.result(te,()=>G.reset(),()=>G.error(!0))}return code$2.validateUnion=U,code$2}var hasRequiredKeyword$1;function requireKeyword$1(){if(hasRequiredKeyword$1)return keyword$1;hasRequiredKeyword$1=1,Object.defineProperty(keyword$1,"__esModule",{value:!0}),keyword$1.validateKeywordUsage=keyword$1.validSchemaType=keyword$1.funcKeywordCode=keyword$1.macroKeywordCode=void 0;const s=requireCodegen$1(),n=requireNames$1(),u=requireCode$2(),f=requireErrors$1();function y(N,L){const{gen:F,keyword:H,schema:z,parentSchema:U,it:G}=N,Y=L.macro.call(G.self,z,U,G),K=T(F,H,Y);G.opts.validateSchema!==!1&&G.self.validateSchema(Y,!0);const Z=F.name("valid");N.subschema({schema:Y,schemaPath:s.nil,errSchemaPath:`${G.errSchemaPath}/${H}`,topSchemaRef:K,compositeRule:!0},Z),N.pass(Z,()=>N.error(!0))}keyword$1.macroKeywordCode=y;function S(N,L){var F;const{gen:H,keyword:z,schema:U,parentSchema:G,$data:Y,it:K}=N;C(K,L);const Z=!Y&&L.compile?L.compile.call(K.self,U,G,K):L.validate,J=T(H,z,Z),te=H.let("valid");N.block$data(te,de),N.ok((F=L.valid)!==null&&F!==void 0?F:te);function de(){if(L.errors===!1)ge(),L.modifying&&A(N),Ee(()=>N.error());else{const we=L.async?se():ne();L.modifying&&A(N),Ee(()=>w(N,we))}}function se(){const we=H.let("ruleErrs",null);return H.try(()=>ge((0,s._)`await `),Ie=>H.assign(te,!1).if((0,s._)`${Ie} instanceof ${K.ValidationError}`,()=>H.assign(we,(0,s._)`${Ie}.errors`),()=>H.throw(Ie))),we}function ne(){const we=(0,s._)`${J}.errors`;return H.assign(we,null),ge(s.nil),we}function ge(we=L.async?(0,s._)`await `:s.nil){const Ie=K.opts.passContext?n.default.this:n.default.self,Be=!("compile"in L&&!Y||L.schema===!1);H.assign(te,(0,s._)`${we}${(0,u.callValidateCode)(N,J,Ie,Be)}`,L.modifying)}function Ee(we){var Ie;H.if((0,s.not)((Ie=L.valid)!==null&&Ie!==void 0?Ie:te),we)}}keyword$1.funcKeywordCode=S;function A(N){const{gen:L,data:F,it:H}=N;L.if(H.parentData,()=>L.assign(F,(0,s._)`${H.parentData}[${H.parentDataProperty}]`))}function w(N,L){const{gen:F}=N;F.if((0,s._)`Array.isArray(${L})`,()=>{F.assign(n.default.vErrors,(0,s._)`${n.default.vErrors} === null ? ${L} : ${n.default.vErrors}.concat(${L})`).assign(n.default.errors,(0,s._)`${n.default.vErrors}.length`),(0,f.extendErrors)(N)},()=>N.error())}function C({schemaEnv:N},L){if(L.async&&!N.$async)throw new Error("async keyword in sync schema")}function T(N,L,F){if(F===void 0)throw new Error(`keyword "${L}" failed to compile`);return N.scopeValue("keyword",typeof F=="function"?{ref:F}:{ref:F,code:(0,s.stringify)(F)})}function R(N,L,F=!1){return!L.length||L.some(H=>H==="array"?Array.isArray(N):H==="object"?N&&typeof N=="object"&&!Array.isArray(N):typeof N==H||F&&typeof N>"u")}keyword$1.validSchemaType=R;function I({schema:N,opts:L,self:F,errSchemaPath:H},z,U){if(Array.isArray(z.keyword)?!z.keyword.includes(U):z.keyword!==U)throw new Error("ajv implementation error");const G=z.dependencies;if(G?.some(Y=>!Object.prototype.hasOwnProperty.call(N,Y)))throw new Error(`parent schema must have dependencies of ${U}: ${G.join(",")}`);if(z.validateSchema&&!z.validateSchema(N[U])){const Y=`keyword "${U}" value is invalid at path "${H}": `+F.errorsText(z.validateSchema.errors);if(L.validateSchema==="log")F.logger.error(Y);else throw new Error(Y)}}return keyword$1.validateKeywordUsage=I,keyword$1}var subschema$1={},hasRequiredSubschema$1;function requireSubschema$1(){if(hasRequiredSubschema$1)return subschema$1;hasRequiredSubschema$1=1,Object.defineProperty(subschema$1,"__esModule",{value:!0}),subschema$1.extendSubschemaMode=subschema$1.extendSubschemaData=subschema$1.getSubschema=void 0;const s=requireCodegen$1(),n=requireUtil$1();function u(S,{keyword:A,schemaProp:w,schema:C,schemaPath:T,errSchemaPath:R,topSchemaRef:I}){if(A!==void 0&&C!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(A!==void 0){const N=S.schema[A];return w===void 0?{schema:N,schemaPath:(0,s._)`${S.schemaPath}${(0,s.getProperty)(A)}`,errSchemaPath:`${S.errSchemaPath}/${A}`}:{schema:N[w],schemaPath:(0,s._)`${S.schemaPath}${(0,s.getProperty)(A)}${(0,s.getProperty)(w)}`,errSchemaPath:`${S.errSchemaPath}/${A}/${(0,n.escapeFragment)(w)}`}}if(C!==void 0){if(T===void 0||R===void 0||I===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:C,schemaPath:T,topSchemaRef:I,errSchemaPath:R}}throw new Error('either "keyword" or "schema" must be passed')}subschema$1.getSubschema=u;function f(S,A,{dataProp:w,dataPropType:C,data:T,dataTypes:R,propertyName:I}){if(T!==void 0&&w!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:N}=A;if(w!==void 0){const{errorPath:F,dataPathArr:H,opts:z}=A,U=N.let("data",(0,s._)`${A.data}${(0,s.getProperty)(w)}`,!0);L(U),S.errorPath=(0,s.str)`${F}${(0,n.getErrorPath)(w,C,z.jsPropertySyntax)}`,S.parentDataProperty=(0,s._)`${w}`,S.dataPathArr=[...H,S.parentDataProperty]}if(T!==void 0){const F=T instanceof s.Name?T:N.let("data",T,!0);L(F),I!==void 0&&(S.propertyName=I)}R&&(S.dataTypes=R);function L(F){S.data=F,S.dataLevel=A.dataLevel+1,S.dataTypes=[],A.definedProperties=new Set,S.parentData=A.data,S.dataNames=[...A.dataNames,F]}}subschema$1.extendSubschemaData=f;function y(S,{jtdDiscriminator:A,jtdMetadata:w,compositeRule:C,createErrors:T,allErrors:R}){C!==void 0&&(S.compositeRule=C),T!==void 0&&(S.createErrors=T),R!==void 0&&(S.allErrors=R),S.jtdDiscriminator=A,S.jtdMetadata=w}return subschema$1.extendSubschemaMode=y,subschema$1}var resolve$1={},fastDeepEqual,hasRequiredFastDeepEqual;function requireFastDeepEqual(){return hasRequiredFastDeepEqual||(hasRequiredFastDeepEqual=1,fastDeepEqual=function s(n,u){if(n===u)return!0;if(n&&u&&typeof n=="object"&&typeof u=="object"){if(n.constructor!==u.constructor)return!1;var f,y,S;if(Array.isArray(n)){if(f=n.length,f!=u.length)return!1;for(y=f;y--!==0;)if(!s(n[y],u[y]))return!1;return!0}if(n.constructor===RegExp)return n.source===u.source&&n.flags===u.flags;if(n.valueOf!==Object.prototype.valueOf)return n.valueOf()===u.valueOf();if(n.toString!==Object.prototype.toString)return n.toString()===u.toString();if(S=Object.keys(n),f=S.length,f!==Object.keys(u).length)return!1;for(y=f;y--!==0;)if(!Object.prototype.hasOwnProperty.call(u,S[y]))return!1;for(y=f;y--!==0;){var A=S[y];if(!s(n[A],u[A]))return!1}return!0}return n!==n&&u!==u}),fastDeepEqual}var jsonSchemaTraverse$1={exports:{}},hasRequiredJsonSchemaTraverse$1;function requireJsonSchemaTraverse$1(){if(hasRequiredJsonSchemaTraverse$1)return jsonSchemaTraverse$1.exports;hasRequiredJsonSchemaTraverse$1=1;var s=jsonSchemaTraverse$1.exports=function(f,y,S){typeof y=="function"&&(S=y,y={}),S=y.cb||S;var A=typeof S=="function"?S:S.pre||function(){},w=S.post||function(){};n(y,A,w,f,"",f)};s.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},s.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},s.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},s.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function n(f,y,S,A,w,C,T,R,I,N){if(A&&typeof A=="object"&&!Array.isArray(A)){y(A,w,C,T,R,I,N);for(var L in A){var F=A[L];if(Array.isArray(F)){if(L in s.arrayKeywords)for(var H=0;H<F.length;H++)n(f,y,S,F[H],w+"/"+L+"/"+H,C,w,L,A,H)}else if(L in s.propsKeywords){if(F&&typeof F=="object")for(var z in F)n(f,y,S,F[z],w+"/"+L+"/"+u(z),C,w,L,A,z)}else(L in s.keywords||f.allKeys&&!(L in s.skipKeywords))&&n(f,y,S,F,w+"/"+L,C,w,L,A)}S(A,w,C,T,R,I,N)}}function u(f){return f.replace(/~/g,"~0").replace(/\//g,"~1")}return jsonSchemaTraverse$1.exports}var hasRequiredResolve$1;function requireResolve$1(){if(hasRequiredResolve$1)return resolve$1;hasRequiredResolve$1=1,Object.defineProperty(resolve$1,"__esModule",{value:!0}),resolve$1.getSchemaRefs=resolve$1.resolveUrl=resolve$1.normalizeId=resolve$1._getFullPath=resolve$1.getFullPath=resolve$1.inlineRef=void 0;const s=requireUtil$1(),n=requireFastDeepEqual(),u=requireJsonSchemaTraverse$1(),f=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function y(H,z=!0){return typeof H=="boolean"?!0:z===!0?!A(H):z?w(H)<=z:!1}resolve$1.inlineRef=y;const S=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function A(H){for(const z in H){if(S.has(z))return!0;const U=H[z];if(Array.isArray(U)&&U.some(A)||typeof U=="object"&&A(U))return!0}return!1}function w(H){let z=0;for(const U in H)if(U==="$ref"||(z++,!f.has(U)&&(typeof H[U]=="object"&&(0,s.eachItem)(H[U],G=>z+=w(G)),z===1/0)))return 1/0;return z}function C(H,z="",U){U!==!1&&(z=I(z));const G=H.parse(z);return T(H,G)}resolve$1.getFullPath=C;function T(H,z){return H.serialize(z).split("#")[0]+"#"}resolve$1._getFullPath=T;const R=/#\/?$/;function I(H){return H?H.replace(R,""):""}resolve$1.normalizeId=I;function N(H,z,U){return U=I(U),H.resolve(z,U)}resolve$1.resolveUrl=N;const L=/^[a-z_][-a-z0-9._]*$/i;function F(H,z){if(typeof H=="boolean")return{};const{schemaId:U,uriResolver:G}=this.opts,Y=I(H[U]||z),K={"":Y},Z=C(G,Y,!1),J={},te=new Set;return u(H,{allKeys:!0},(ne,ge,Ee,we)=>{if(we===void 0)return;const Ie=Z+ge;let Be=K[we];typeof ne[U]=="string"&&(Be=Me.call(this,ne[U])),Re.call(this,ne.$anchor),Re.call(this,ne.$dynamicAnchor),K[ge]=Be;function Me(Te){const Se=this.opts.uriResolver.resolve;if(Te=I(Be?Se(Be,Te):Te),te.has(Te))throw se(Te);te.add(Te);let oe=this.refs[Te];return typeof oe=="string"&&(oe=this.refs[oe]),typeof oe=="object"?de(ne,oe.schema,Te):Te!==I(Ie)&&(Te[0]==="#"?(de(ne,J[Te],Te),J[Te]=ne):this.refs[Te]=Ie),Te}function Re(Te){if(typeof Te=="string"){if(!L.test(Te))throw new Error(`invalid anchor "${Te}"`);Me.call(this,`#${Te}`)}}}),J;function de(ne,ge,Ee){if(ge!==void 0&&!n(ne,ge))throw se(Ee)}function se(ne){return new Error(`reference "${ne}" resolves to more than one schema`)}}return resolve$1.getSchemaRefs=F,resolve$1}var hasRequiredValidate$1;function requireValidate$1(){if(hasRequiredValidate$1)return validate$1;hasRequiredValidate$1=1,Object.defineProperty(validate$1,"__esModule",{value:!0}),validate$1.getData=validate$1.KeywordCxt=validate$1.validateFunctionCode=void 0;const s=requireBoolSchema$1(),n=requireDataType$1(),u=requireApplicability$1(),f=requireDataType$1(),y=requireDefaults$1(),S=requireKeyword$1(),A=requireSubschema$1(),w=requireCodegen$1(),C=requireNames$1(),T=requireResolve$1(),R=requireUtil$1(),I=requireErrors$1();function N(xe){if(Z(xe)&&(te(xe),K(xe))){z(xe);return}L(xe,()=>(0,s.topBoolOrEmptySchema)(xe))}validate$1.validateFunctionCode=N;function L({gen:xe,validateName:Ne,schema:je,schemaEnv:He,opts:Ye},Je){Ye.code.es5?xe.func(Ne,(0,w._)`${C.default.data}, ${C.default.valCxt}`,He.$async,()=>{xe.code((0,w._)`"use strict"; ${G(je,Ye)}`),H(xe,Ye),xe.code(Je)}):xe.func(Ne,(0,w._)`${C.default.data}, ${F(Ye)}`,He.$async,()=>xe.code(G(je,Ye)).code(Je))}function F(xe){return(0,w._)`{${C.default.instancePath}="", ${C.default.parentData}, ${C.default.parentDataProperty}, ${C.default.rootData}=${C.default.data}${xe.dynamicRef?(0,w._)`, ${C.default.dynamicAnchors}={}`:w.nil}}={}`}function H(xe,Ne){xe.if(C.default.valCxt,()=>{xe.var(C.default.instancePath,(0,w._)`${C.default.valCxt}.${C.default.instancePath}`),xe.var(C.default.parentData,(0,w._)`${C.default.valCxt}.${C.default.parentData}`),xe.var(C.default.parentDataProperty,(0,w._)`${C.default.valCxt}.${C.default.parentDataProperty}`),xe.var(C.default.rootData,(0,w._)`${C.default.valCxt}.${C.default.rootData}`),Ne.dynamicRef&&xe.var(C.default.dynamicAnchors,(0,w._)`${C.default.valCxt}.${C.default.dynamicAnchors}`)},()=>{xe.var(C.default.instancePath,(0,w._)`""`),xe.var(C.default.parentData,(0,w._)`undefined`),xe.var(C.default.parentDataProperty,(0,w._)`undefined`),xe.var(C.default.rootData,C.default.data),Ne.dynamicRef&&xe.var(C.default.dynamicAnchors,(0,w._)`{}`)})}function z(xe){const{schema:Ne,opts:je,gen:He}=xe;L(xe,()=>{je.$comment&&Ne.$comment&&we(xe),ne(xe),He.let(C.default.vErrors,null),He.let(C.default.errors,0),je.unevaluated&&U(xe),de(xe),Ie(xe)})}function U(xe){const{gen:Ne,validateName:je}=xe;xe.evaluated=Ne.const("evaluated",(0,w._)`${je}.evaluated`),Ne.if((0,w._)`${xe.evaluated}.dynamicProps`,()=>Ne.assign((0,w._)`${xe.evaluated}.props`,(0,w._)`undefined`)),Ne.if((0,w._)`${xe.evaluated}.dynamicItems`,()=>Ne.assign((0,w._)`${xe.evaluated}.items`,(0,w._)`undefined`))}function G(xe,Ne){const je=typeof xe=="object"&&xe[Ne.schemaId];return je&&(Ne.code.source||Ne.code.process)?(0,w._)`/*# sourceURL=${je} */`:w.nil}function Y(xe,Ne){if(Z(xe)&&(te(xe),K(xe))){J(xe,Ne);return}(0,s.boolOrEmptySchema)(xe,Ne)}function K({schema:xe,self:Ne}){if(typeof xe=="boolean")return!xe;for(const je in xe)if(Ne.RULES.all[je])return!0;return!1}function Z(xe){return typeof xe.schema!="boolean"}function J(xe,Ne){const{schema:je,gen:He,opts:Ye}=xe;Ye.$comment&&je.$comment&&we(xe),ge(xe),Ee(xe);const Je=He.const("_errs",C.default.errors);de(xe,Je),He.var(Ne,(0,w._)`${Je} === ${C.default.errors}`)}function te(xe){(0,R.checkUnknownRules)(xe),se(xe)}function de(xe,Ne){if(xe.opts.jtd)return Me(xe,[],!1,Ne);const je=(0,n.getSchemaTypes)(xe.schema),He=(0,n.coerceAndCheckDataType)(xe,je);Me(xe,je,!He,Ne)}function se(xe){const{schema:Ne,errSchemaPath:je,opts:He,self:Ye}=xe;Ne.$ref&&He.ignoreKeywordsWithRef&&(0,R.schemaHasRulesButRef)(Ne,Ye.RULES)&&Ye.logger.warn(`$ref: keywords ignored in schema at path "${je}"`)}function ne(xe){const{schema:Ne,opts:je}=xe;Ne.default!==void 0&&je.useDefaults&&je.strictSchema&&(0,R.checkStrictMode)(xe,"default is ignored in the schema root")}function ge(xe){const Ne=xe.schema[xe.opts.schemaId];Ne&&(xe.baseId=(0,T.resolveUrl)(xe.opts.uriResolver,xe.baseId,Ne))}function Ee(xe){if(xe.schema.$async&&!xe.schemaEnv.$async)throw new Error("async schema in sync schema")}function we({gen:xe,schemaEnv:Ne,schema:je,errSchemaPath:He,opts:Ye}){const Je=je.$comment;if(Ye.$comment===!0)xe.code((0,w._)`${C.default.self}.logger.log(${Je})`);else if(typeof Ye.$comment=="function"){const ot=(0,w.str)`${He}/$comment`,ze=xe.scopeValue("root",{ref:Ne.root});xe.code((0,w._)`${C.default.self}.opts.$comment(${Je}, ${ot}, ${ze}.schema)`)}}function Ie(xe){const{gen:Ne,schemaEnv:je,validateName:He,ValidationError:Ye,opts:Je}=xe;je.$async?Ne.if((0,w._)`${C.default.errors} === 0`,()=>Ne.return(C.default.data),()=>Ne.throw((0,w._)`new ${Ye}(${C.default.vErrors})`)):(Ne.assign((0,w._)`${He}.errors`,C.default.vErrors),Je.unevaluated&&Be(xe),Ne.return((0,w._)`${C.default.errors} === 0`))}function Be({gen:xe,evaluated:Ne,props:je,items:He}){je instanceof w.Name&&xe.assign((0,w._)`${Ne}.props`,je),He instanceof w.Name&&xe.assign((0,w._)`${Ne}.items`,He)}function Me(xe,Ne,je,He){const{gen:Ye,schema:Je,data:ot,allErrors:ze,opts:pt,self:yt}=xe,{RULES:ut}=yt;if(Je.$ref&&(pt.ignoreKeywordsWithRef||!(0,R.schemaHasRulesButRef)(Je,ut))){Ye.block(()=>_e(xe,"$ref",ut.all.$ref.definition));return}pt.jtd||Te(xe,Ne),Ye.block(()=>{for(const qe of ut.rules)Et(qe);Et(ut.post)});function Et(qe){(0,u.shouldUseGroup)(Je,qe)&&(qe.type?(Ye.if((0,f.checkDataType)(qe.type,ot,pt.strictNumbers)),Re(xe,qe),Ne.length===1&&Ne[0]===qe.type&&je&&(Ye.else(),(0,f.reportTypeError)(xe)),Ye.endIf()):Re(xe,qe),ze||Ye.if((0,w._)`${C.default.errors} === ${He||0}`))}}function Re(xe,Ne){const{gen:je,schema:He,opts:{useDefaults:Ye}}=xe;Ye&&(0,y.assignDefaults)(xe,Ne.type),je.block(()=>{for(const Je of Ne.rules)(0,u.shouldUseRule)(He,Je)&&_e(xe,Je.keyword,Je.definition,Ne.type)})}function Te(xe,Ne){xe.schemaEnv.meta||!xe.opts.strictTypes||(Se(xe,Ne),xe.opts.allowUnionTypes||oe(xe,Ne),ae(xe,xe.dataTypes))}function Se(xe,Ne){if(Ne.length){if(!xe.dataTypes.length){xe.dataTypes=Ne;return}Ne.forEach(je=>{he(xe.dataTypes,je)||ye(xe,`type "${je}" not allowed by context "${xe.dataTypes.join(",")}"`)}),ue(xe,Ne)}}function oe(xe,Ne){Ne.length>1&&!(Ne.length===2&&Ne.includes("null"))&&ye(xe,"use allowUnionTypes to allow union type keyword")}function ae(xe,Ne){const je=xe.self.RULES.all;for(const He in je){const Ye=je[He];if(typeof Ye=="object"&&(0,u.shouldUseRule)(xe.schema,Ye)){const{type:Je}=Ye.definition;Je.length&&!Je.some(ot=>be(Ne,ot))&&ye(xe,`missing type "${Je.join(",")}" for keyword "${He}"`)}}}function be(xe,Ne){return xe.includes(Ne)||Ne==="number"&&xe.includes("integer")}function he(xe,Ne){return xe.includes(Ne)||Ne==="integer"&&xe.includes("number")}function ue(xe,Ne){const je=[];for(const He of xe.dataTypes)he(Ne,He)?je.push(He):Ne.includes("integer")&&He==="number"&&je.push("integer");xe.dataTypes=je}function ye(xe,Ne){const je=xe.schemaEnv.baseId+xe.errSchemaPath;Ne+=` at "${je}" (strictTypes)`,(0,R.checkStrictMode)(xe,Ne,xe.opts.strictTypes)}class ce{constructor(Ne,je,He){if((0,S.validateKeywordUsage)(Ne,je,He),this.gen=Ne.gen,this.allErrors=Ne.allErrors,this.keyword=He,this.data=Ne.data,this.schema=Ne.schema[He],this.$data=je.$data&&Ne.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,R.schemaRefOrVal)(Ne,this.schema,He,this.$data),this.schemaType=je.schemaType,this.parentSchema=Ne.schema,this.params={},this.it=Ne,this.def=je,this.$data)this.schemaCode=Ne.gen.const("vSchema",$e(this.$data,Ne));else if(this.schemaCode=this.schemaValue,!(0,S.validSchemaType)(this.schema,je.schemaType,je.allowUndefined))throw new Error(`${He} value must be ${JSON.stringify(je.schemaType)}`);("code"in je?je.trackErrors:je.errors!==!1)&&(this.errsCount=Ne.gen.const("_errs",C.default.errors))}result(Ne,je,He){this.failResult((0,w.not)(Ne),je,He)}failResult(Ne,je,He){this.gen.if(Ne),He?He():this.error(),je?(this.gen.else(),je(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(Ne,je){this.failResult((0,w.not)(Ne),void 0,je)}fail(Ne){if(Ne===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(Ne),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(Ne){if(!this.$data)return this.fail(Ne);const{schemaCode:je}=this;this.fail((0,w._)`${je} !== undefined && (${(0,w.or)(this.invalid$data(),Ne)})`)}error(Ne,je,He){if(je){this.setParams(je),this._error(Ne,He),this.setParams({});return}this._error(Ne,He)}_error(Ne,je){(Ne?I.reportExtraError:I.reportError)(this,this.def.error,je)}$dataError(){(0,I.reportError)(this,this.def.$dataError||I.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,I.resetErrorsCount)(this.gen,this.errsCount)}ok(Ne){this.allErrors||this.gen.if(Ne)}setParams(Ne,je){je?Object.assign(this.params,Ne):this.params=Ne}block$data(Ne,je,He=w.nil){this.gen.block(()=>{this.check$data(Ne,He),je()})}check$data(Ne=w.nil,je=w.nil){if(!this.$data)return;const{gen:He,schemaCode:Ye,schemaType:Je,def:ot}=this;He.if((0,w.or)((0,w._)`${Ye} === undefined`,je)),Ne!==w.nil&&He.assign(Ne,!0),(Je.length||ot.validateSchema)&&(He.elseIf(this.invalid$data()),this.$dataError(),Ne!==w.nil&&He.assign(Ne,!1)),He.else()}invalid$data(){const{gen:Ne,schemaCode:je,schemaType:He,def:Ye,it:Je}=this;return(0,w.or)(ot(),ze());function ot(){if(He.length){if(!(je instanceof w.Name))throw new Error("ajv implementation error");const pt=Array.isArray(He)?He:[He];return(0,w._)`${(0,f.checkDataTypes)(pt,je,Je.opts.strictNumbers,f.DataType.Wrong)}`}return w.nil}function ze(){if(Ye.validateSchema){const pt=Ne.scopeValue("validate$data",{ref:Ye.validateSchema});return(0,w._)`!${pt}(${je})`}return w.nil}}subschema(Ne,je){const He=(0,A.getSubschema)(this.it,Ne);(0,A.extendSubschemaData)(He,this.it,Ne),(0,A.extendSubschemaMode)(He,Ne);const Ye={...this.it,...He,items:void 0,props:void 0};return Y(Ye,je),Ye}mergeEvaluated(Ne,je){const{it:He,gen:Ye}=this;He.opts.unevaluated&&(He.props!==!0&&Ne.props!==void 0&&(He.props=R.mergeEvaluated.props(Ye,Ne.props,He.props,je)),He.items!==!0&&Ne.items!==void 0&&(He.items=R.mergeEvaluated.items(Ye,Ne.items,He.items,je)))}mergeValidEvaluated(Ne,je){const{it:He,gen:Ye}=this;if(He.opts.unevaluated&&(He.props!==!0||He.items!==!0))return Ye.if(je,()=>this.mergeEvaluated(Ne,w.Name)),!0}}validate$1.KeywordCxt=ce;function _e(xe,Ne,je,He){const Ye=new ce(xe,je,Ne);"code"in je?je.code(Ye,He):Ye.$data&&je.validate?(0,S.funcKeywordCode)(Ye,je):"macro"in je?(0,S.macroKeywordCode)(Ye,je):(je.compile||je.validate)&&(0,S.funcKeywordCode)(Ye,je)}const ke=/^\/(?:[^~]|~0|~1)*$/,Pe=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function $e(xe,{dataLevel:Ne,dataNames:je,dataPathArr:He}){let Ye,Je;if(xe==="")return C.default.rootData;if(xe[0]==="/"){if(!ke.test(xe))throw new Error(`Invalid JSON-pointer: ${xe}`);Ye=xe,Je=C.default.rootData}else{const yt=Pe.exec(xe);if(!yt)throw new Error(`Invalid JSON-pointer: ${xe}`);const ut=+yt[1];if(Ye=yt[2],Ye==="#"){if(ut>=Ne)throw new Error(pt("property/index",ut));return He[Ne-ut]}if(ut>Ne)throw new Error(pt("data",ut));if(Je=je[Ne-ut],!Ye)return Je}let ot=Je;const ze=Ye.split("/");for(const yt of ze)yt&&(Je=(0,w._)`${Je}${(0,w.getProperty)((0,R.unescapeJsonPointer)(yt))}`,ot=(0,w._)`${ot} && ${Je}`);return ot;function pt(yt,ut){return`Cannot access ${yt} ${ut} levels up, current level is ${Ne}`}}return validate$1.getData=$e,validate$1}var validation_error$1={},hasRequiredValidation_error$1;function requireValidation_error$1(){if(hasRequiredValidation_error$1)return validation_error$1;hasRequiredValidation_error$1=1,Object.defineProperty(validation_error$1,"__esModule",{value:!0});class s extends Error{constructor(u){super("validation failed"),this.errors=u,this.ajv=this.validation=!0}}return validation_error$1.default=s,validation_error$1}var ref_error$1={},hasRequiredRef_error$1;function requireRef_error$1(){if(hasRequiredRef_error$1)return ref_error$1;hasRequiredRef_error$1=1,Object.defineProperty(ref_error$1,"__esModule",{value:!0});const s=requireResolve$1();class n extends Error{constructor(f,y,S,A){super(A||`can't resolve reference ${S} from id ${y}`),this.missingRef=(0,s.resolveUrl)(f,y,S),this.missingSchema=(0,s.normalizeId)((0,s.getFullPath)(f,this.missingRef))}}return ref_error$1.default=n,ref_error$1}var compile$1={},hasRequiredCompile$1;function requireCompile$1(){if(hasRequiredCompile$1)return compile$1;hasRequiredCompile$1=1,Object.defineProperty(compile$1,"__esModule",{value:!0}),compile$1.resolveSchema=compile$1.getCompilingSchema=compile$1.resolveRef=compile$1.compileSchema=compile$1.SchemaEnv=void 0;const s=requireCodegen$1(),n=requireValidation_error$1(),u=requireNames$1(),f=requireResolve$1(),y=requireUtil$1(),S=requireValidate$1();class A{constructor(U){var G;this.refs={},this.dynamicAnchors={};let Y;typeof U.schema=="object"&&(Y=U.schema),this.schema=U.schema,this.schemaId=U.schemaId,this.root=U.root||this,this.baseId=(G=U.baseId)!==null&&G!==void 0?G:(0,f.normalizeId)(Y?.[U.schemaId||"$id"]),this.schemaPath=U.schemaPath,this.localRefs=U.localRefs,this.meta=U.meta,this.$async=Y?.$async,this.refs={}}}compile$1.SchemaEnv=A;function w(z){const U=R.call(this,z);if(U)return U;const G=(0,f.getFullPath)(this.opts.uriResolver,z.root.baseId),{es5:Y,lines:K}=this.opts.code,{ownProperties:Z}=this.opts,J=new s.CodeGen(this.scope,{es5:Y,lines:K,ownProperties:Z});let te;z.$async&&(te=J.scopeValue("Error",{ref:n.default,code:(0,s._)`require("ajv/dist/runtime/validation_error").default`}));const de=J.scopeName("validate");z.validateName=de;const se={gen:J,allErrors:this.opts.allErrors,data:u.default.data,parentData:u.default.parentData,parentDataProperty:u.default.parentDataProperty,dataNames:[u.default.data],dataPathArr:[s.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:J.scopeValue("schema",this.opts.code.source===!0?{ref:z.schema,code:(0,s.stringify)(z.schema)}:{ref:z.schema}),validateName:de,ValidationError:te,schema:z.schema,schemaEnv:z,rootId:G,baseId:z.baseId||G,schemaPath:s.nil,errSchemaPath:z.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,s._)`""`,opts:this.opts,self:this};let ne;try{this._compilations.add(z),(0,S.validateFunctionCode)(se),J.optimize(this.opts.code.optimize);const ge=J.toString();ne=`${J.scopeRefs(u.default.scope)}return ${ge}`,this.opts.code.process&&(ne=this.opts.code.process(ne,z));const Ee=new Function(`${u.default.self}`,`${u.default.scope}`,ne)(this,this.scope.get());if(this.scope.value(de,{ref:Ee}),Ee.errors=null,Ee.schema=z.schema,Ee.schemaEnv=z,z.$async&&(Ee.$async=!0),this.opts.code.source===!0&&(Ee.source={validateName:de,validateCode:ge,scopeValues:J._values}),this.opts.unevaluated){const{props:we,items:Ie}=se;Ee.evaluated={props:we instanceof s.Name?void 0:we,items:Ie instanceof s.Name?void 0:Ie,dynamicProps:we instanceof s.Name,dynamicItems:Ie instanceof s.Name},Ee.source&&(Ee.source.evaluated=(0,s.stringify)(Ee.evaluated))}return z.validate=Ee,z}catch(ge){throw delete z.validate,delete z.validateName,ne&&this.logger.error("Error compiling schema, function code:",ne),ge}finally{this._compilations.delete(z)}}compile$1.compileSchema=w;function C(z,U,G){var Y;G=(0,f.resolveUrl)(this.opts.uriResolver,U,G);const K=z.refs[G];if(K)return K;let Z=N.call(this,z,G);if(Z===void 0){const J=(Y=z.localRefs)===null||Y===void 0?void 0:Y[G],{schemaId:te}=this.opts;J&&(Z=new A({schema:J,schemaId:te,root:z,baseId:U}))}if(Z!==void 0)return z.refs[G]=T.call(this,Z)}compile$1.resolveRef=C;function T(z){return(0,f.inlineRef)(z.schema,this.opts.inlineRefs)?z.schema:z.validate?z:w.call(this,z)}function R(z){for(const U of this._compilations)if(I(U,z))return U}compile$1.getCompilingSchema=R;function I(z,U){return z.schema===U.schema&&z.root===U.root&&z.baseId===U.baseId}function N(z,U){let G;for(;typeof(G=this.refs[U])=="string";)U=G;return G||this.schemas[U]||L.call(this,z,U)}function L(z,U){const G=this.opts.uriResolver.parse(U),Y=(0,f._getFullPath)(this.opts.uriResolver,G);let K=(0,f.getFullPath)(this.opts.uriResolver,z.baseId,void 0);if(Object.keys(z.schema).length>0&&Y===K)return H.call(this,G,z);const Z=(0,f.normalizeId)(Y),J=this.refs[Z]||this.schemas[Z];if(typeof J=="string"){const te=L.call(this,z,J);return typeof te?.schema!="object"?void 0:H.call(this,G,te)}if(typeof J?.schema=="object"){if(J.validate||w.call(this,J),Z===(0,f.normalizeId)(U)){const{schema:te}=J,{schemaId:de}=this.opts,se=te[de];return se&&(K=(0,f.resolveUrl)(this.opts.uriResolver,K,se)),new A({schema:te,schemaId:de,root:z,baseId:K})}return H.call(this,G,J)}}compile$1.resolveSchema=L;const F=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function H(z,{baseId:U,schema:G,root:Y}){var K;if(((K=z.fragment)===null||K===void 0?void 0:K[0])!=="/")return;for(const te of z.fragment.slice(1).split("/")){if(typeof G=="boolean")return;const de=G[(0,y.unescapeFragment)(te)];if(de===void 0)return;G=de;const se=typeof G=="object"&&G[this.opts.schemaId];!F.has(te)&&se&&(U=(0,f.resolveUrl)(this.opts.uriResolver,U,se))}let Z;if(typeof G!="boolean"&&G.$ref&&!(0,y.schemaHasRulesButRef)(G,this.RULES)){const te=(0,f.resolveUrl)(this.opts.uriResolver,U,G.$ref);Z=L.call(this,Y,te)}const{schemaId:J}=this.opts;if(Z=Z||new A({schema:G,schemaId:J,root:Y,baseId:U}),Z.schema!==Z.root.schema)return Z}return compile$1}const $id$3="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description$1="Meta-schema for $data reference (JSON AnySchema extension proposal)",type$3="object",required$3=["$data"],properties$5={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties$3=!1,require$$9$1={$id:$id$3,description:description$1,type:type$3,required:required$3,properties:properties$5,additionalProperties:additionalProperties$3};var uri$1={},fastUri={exports:{}},utils,hasRequiredUtils;function requireUtils(){if(hasRequiredUtils)return utils;hasRequiredUtils=1;const s=RegExp.prototype.test.bind(/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu),n=RegExp.prototype.test.bind(/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u);function u(N){let L="",F=0,H=0;for(H=0;H<N.length;H++)if(F=N[H].charCodeAt(0),F!==48){if(!(F>=48&&F<=57||F>=65&&F<=70||F>=97&&F<=102))return"";L+=N[H];break}for(H+=1;H<N.length;H++){if(F=N[H].charCodeAt(0),!(F>=48&&F<=57||F>=65&&F<=70||F>=97&&F<=102))return"";L+=N[H]}return L}const f=RegExp.prototype.test.bind(/[^!"$&'()*+,\-.;=_`a-z{}~]/u);function y(N){return N.length=0,!0}function S(N,L,F){if(N.length){const H=u(N);if(H!=="")L.push(H);else return F.error=!0,!1;N.length=0}return!0}function A(N){let L=0;const F={error:!1,address:"",zone:""},H=[],z=[];let U=!1,G=!1,Y=S;for(let K=0;K<N.length;K++){const Z=N[K];if(!(Z==="["||Z==="]"))if(Z===":"){if(U===!0&&(G=!0),!Y(z,H,F))break;if(++L>7){F.error=!0;break}K>0&&N[K-1]===":"&&(U=!0),H.push(":");continue}else if(Z==="%"){if(!Y(z,H,F))break;Y=y}else{z.push(Z);continue}}return z.length&&(Y===y?F.zone=z.join(""):G?H.push(z.join("")):H.push(u(z))),F.address=H.join(""),F}function w(N){if(C(N,":")<2)return{host:N,isIPV6:!1};const L=A(N);if(L.error)return{host:N,isIPV6:!1};{let F=L.address,H=L.address;return L.zone&&(F+="%"+L.zone,H+="%25"+L.zone),{host:F,isIPV6:!0,escapedHost:H}}}function C(N,L){let F=0;for(let H=0;H<N.length;H++)N[H]===L&&F++;return F}function T(N){let L=N;const F=[];let H=-1,z=0;for(;z=L.length;){if(z===1){if(L===".")break;if(L==="/"){F.push("/");break}else{F.push(L);break}}else if(z===2){if(L[0]==="."){if(L[1]===".")break;if(L[1]==="/"){L=L.slice(2);continue}}else if(L[0]==="/"&&(L[1]==="."||L[1]==="/")){F.push("/");break}}else if(z===3&&L==="/.."){F.length!==0&&F.pop(),F.push("/");break}if(L[0]==="."){if(L[1]==="."){if(L[2]==="/"){L=L.slice(3);continue}}else if(L[1]==="/"){L=L.slice(2);continue}}else if(L[0]==="/"&&L[1]==="."){if(L[2]==="/"){L=L.slice(2);continue}else if(L[2]==="."&&L[3]==="/"){L=L.slice(3),F.length!==0&&F.pop();continue}}if((H=L.indexOf("/",1))===-1){F.push(L);break}else F.push(L.slice(0,H)),L=L.slice(H)}return F.join("")}function R(N,L){const F=L!==!0?escape:unescape;return N.scheme!==void 0&&(N.scheme=F(N.scheme)),N.userinfo!==void 0&&(N.userinfo=F(N.userinfo)),N.host!==void 0&&(N.host=F(N.host)),N.path!==void 0&&(N.path=F(N.path)),N.query!==void 0&&(N.query=F(N.query)),N.fragment!==void 0&&(N.fragment=F(N.fragment)),N}function I(N){const L=[];if(N.userinfo!==void 0&&(L.push(N.userinfo),L.push("@")),N.host!==void 0){let F=unescape(N.host);if(!n(F)){const H=w(F);H.isIPV6===!0?F=`[${H.escapedHost}]`:F=N.host}L.push(F)}return(typeof N.port=="number"||typeof N.port=="string")&&(L.push(":"),L.push(String(N.port))),L.length?L.join(""):void 0}return utils={nonSimpleDomain:f,recomposeAuthority:I,normalizeComponentEncoding:R,removeDotSegments:T,isIPv4:n,isUUID:s,normalizeIPv6:w,stringArrayToHexStripped:u},utils}var schemes,hasRequiredSchemes;function requireSchemes(){if(hasRequiredSchemes)return schemes;hasRequiredSchemes=1;const{isUUID:s}=requireUtils(),n=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu,u=["http","https","ws","wss","urn","urn:uuid"];function f(Y){return u.indexOf(Y)!==-1}function y(Y){return Y.secure===!0?!0:Y.secure===!1?!1:Y.scheme?Y.scheme.length===3&&(Y.scheme[0]==="w"||Y.scheme[0]==="W")&&(Y.scheme[1]==="s"||Y.scheme[1]==="S")&&(Y.scheme[2]==="s"||Y.scheme[2]==="S"):!1}function S(Y){return Y.host||(Y.error=Y.error||"HTTP URIs must have a host."),Y}function A(Y){const K=String(Y.scheme).toLowerCase()==="https";return(Y.port===(K?443:80)||Y.port==="")&&(Y.port=void 0),Y.path||(Y.path="/"),Y}function w(Y){return Y.secure=y(Y),Y.resourceName=(Y.path||"/")+(Y.query?"?"+Y.query:""),Y.path=void 0,Y.query=void 0,Y}function C(Y){if((Y.port===(y(Y)?443:80)||Y.port==="")&&(Y.port=void 0),typeof Y.secure=="boolean"&&(Y.scheme=Y.secure?"wss":"ws",Y.secure=void 0),Y.resourceName){const[K,Z]=Y.resourceName.split("?");Y.path=K&&K!=="/"?K:void 0,Y.query=Z,Y.resourceName=void 0}return Y.fragment=void 0,Y}function T(Y,K){if(!Y.path)return Y.error="URN can not be parsed",Y;const Z=Y.path.match(n);if(Z){const J=K.scheme||Y.scheme||"urn";Y.nid=Z[1].toLowerCase(),Y.nss=Z[2];const te=`${J}:${K.nid||Y.nid}`,de=G(te);Y.path=void 0,de&&(Y=de.parse(Y,K))}else Y.error=Y.error||"URN can not be parsed.";return Y}function R(Y,K){if(Y.nid===void 0)throw new Error("URN without nid cannot be serialized");const Z=K.scheme||Y.scheme||"urn",J=Y.nid.toLowerCase(),te=`${Z}:${K.nid||J}`,de=G(te);de&&(Y=de.serialize(Y,K));const se=Y,ne=Y.nss;return se.path=`${J||K.nid}:${ne}`,K.skipEscape=!0,se}function I(Y,K){const Z=Y;return Z.uuid=Z.nss,Z.nss=void 0,!K.tolerant&&(!Z.uuid||!s(Z.uuid))&&(Z.error=Z.error||"UUID is not valid."),Z}function N(Y){const K=Y;return K.nss=(Y.uuid||"").toLowerCase(),K}const L={scheme:"http",domainHost:!0,parse:S,serialize:A},F={scheme:"https",domainHost:L.domainHost,parse:S,serialize:A},H={scheme:"ws",domainHost:!0,parse:w,serialize:C},z={scheme:"wss",domainHost:H.domainHost,parse:H.parse,serialize:H.serialize},U={http:L,https:F,ws:H,wss:z,urn:{scheme:"urn",parse:T,serialize:R,skipNormalize:!0},"urn:uuid":{scheme:"urn:uuid",parse:I,serialize:N,skipNormalize:!0}};Object.setPrototypeOf(U,null);function G(Y){return Y&&(U[Y]||U[Y.toLowerCase()])||void 0}return schemes={wsIsSecure:y,SCHEMES:U,isValidSchemeName:f,getSchemeHandler:G},schemes}var hasRequiredFastUri;function requireFastUri(){if(hasRequiredFastUri)return fastUri.exports;hasRequiredFastUri=1;const{normalizeIPv6:s,removeDotSegments:n,recomposeAuthority:u,normalizeComponentEncoding:f,isIPv4:y,nonSimpleDomain:S}=requireUtils(),{SCHEMES:A,getSchemeHandler:w}=requireSchemes();function C(z,U){return typeof z=="string"?z=N(F(z,U),U):typeof z=="object"&&(z=F(N(z,U),U)),z}function T(z,U,G){const Y=G?Object.assign({scheme:"null"},G):{scheme:"null"},K=R(F(z,Y),F(U,Y),Y,!0);return Y.skipEscape=!0,N(K,Y)}function R(z,U,G,Y){const K={};return Y||(z=F(N(z,G),G),U=F(N(U,G),G)),G=G||{},!G.tolerant&&U.scheme?(K.scheme=U.scheme,K.userinfo=U.userinfo,K.host=U.host,K.port=U.port,K.path=n(U.path||""),K.query=U.query):(U.userinfo!==void 0||U.host!==void 0||U.port!==void 0?(K.userinfo=U.userinfo,K.host=U.host,K.port=U.port,K.path=n(U.path||""),K.query=U.query):(U.path?(U.path[0]==="/"?K.path=n(U.path):((z.userinfo!==void 0||z.host!==void 0||z.port!==void 0)&&!z.path?K.path="/"+U.path:z.path?K.path=z.path.slice(0,z.path.lastIndexOf("/")+1)+U.path:K.path=U.path,K.path=n(K.path)),K.query=U.query):(K.path=z.path,U.query!==void 0?K.query=U.query:K.query=z.query),K.userinfo=z.userinfo,K.host=z.host,K.port=z.port),K.scheme=z.scheme),K.fragment=U.fragment,K}function I(z,U,G){return typeof z=="string"?(z=unescape(z),z=N(f(F(z,G),!0),{...G,skipEscape:!0})):typeof z=="object"&&(z=N(f(z,!0),{...G,skipEscape:!0})),typeof U=="string"?(U=unescape(U),U=N(f(F(U,G),!0),{...G,skipEscape:!0})):typeof U=="object"&&(U=N(f(U,!0),{...G,skipEscape:!0})),z.toLowerCase()===U.toLowerCase()}function N(z,U){const G={host:z.host,scheme:z.scheme,userinfo:z.userinfo,port:z.port,path:z.path,query:z.query,nid:z.nid,nss:z.nss,uuid:z.uuid,fragment:z.fragment,reference:z.reference,resourceName:z.resourceName,secure:z.secure,error:""},Y=Object.assign({},U),K=[],Z=w(Y.scheme||G.scheme);Z&&Z.serialize&&Z.serialize(G,Y),G.path!==void 0&&(Y.skipEscape?G.path=unescape(G.path):(G.path=escape(G.path),G.scheme!==void 0&&(G.path=G.path.split("%3A").join(":")))),Y.reference!=="suffix"&&G.scheme&&K.push(G.scheme,":");const J=u(G);if(J!==void 0&&(Y.reference!=="suffix"&&K.push("//"),K.push(J),G.path&&G.path[0]!=="/"&&K.push("/")),G.path!==void 0){let te=G.path;!Y.absolutePath&&(!Z||!Z.absolutePath)&&(te=n(te)),J===void 0&&te[0]==="/"&&te[1]==="/"&&(te="/%2F"+te.slice(2)),K.push(te)}return G.query!==void 0&&K.push("?",G.query),G.fragment!==void 0&&K.push("#",G.fragment),K.join("")}const L=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function F(z,U){const G=Object.assign({},U),Y={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0};let K=!1;G.reference==="suffix"&&(G.scheme?z=G.scheme+":"+z:z="//"+z);const Z=z.match(L);if(Z){if(Y.scheme=Z[1],Y.userinfo=Z[3],Y.host=Z[4],Y.port=parseInt(Z[5],10),Y.path=Z[6]||"",Y.query=Z[7],Y.fragment=Z[8],isNaN(Y.port)&&(Y.port=Z[5]),Y.host)if(y(Y.host)===!1){const te=s(Y.host);Y.host=te.host.toLowerCase(),K=te.isIPV6}else K=!0;Y.scheme===void 0&&Y.userinfo===void 0&&Y.host===void 0&&Y.port===void 0&&Y.query===void 0&&!Y.path?Y.reference="same-document":Y.scheme===void 0?Y.reference="relative":Y.fragment===void 0?Y.reference="absolute":Y.reference="uri",G.reference&&G.reference!=="suffix"&&G.reference!==Y.reference&&(Y.error=Y.error||"URI is not a "+G.reference+" reference.");const J=w(G.scheme||Y.scheme);if(!G.unicodeSupport&&(!J||!J.unicodeSupport)&&Y.host&&(G.domainHost||J&&J.domainHost)&&K===!1&&S(Y.host))try{Y.host=URL.domainToASCII(Y.host.toLowerCase())}catch(te){Y.error=Y.error||"Host's domain name can not be converted to ASCII: "+te}(!J||J&&!J.skipNormalize)&&(z.indexOf("%")!==-1&&(Y.scheme!==void 0&&(Y.scheme=unescape(Y.scheme)),Y.host!==void 0&&(Y.host=unescape(Y.host))),Y.path&&(Y.path=escape(unescape(Y.path))),Y.fragment&&(Y.fragment=encodeURI(decodeURIComponent(Y.fragment)))),J&&J.parse&&J.parse(Y,G)}else Y.error=Y.error||"URI can not be parsed.";return Y}const H={SCHEMES:A,normalize:C,resolve:T,resolveComponent:R,equal:I,serialize:N,parse:F};return fastUri.exports=H,fastUri.exports.default=H,fastUri.exports.fastUri=H,fastUri.exports}var hasRequiredUri$1;function requireUri$1(){if(hasRequiredUri$1)return uri$1;hasRequiredUri$1=1,Object.defineProperty(uri$1,"__esModule",{value:!0});const s=requireFastUri();return s.code='require("ajv/dist/runtime/uri").default',uri$1.default=s,uri$1}var hasRequiredCore$3;function requireCore$3(){return hasRequiredCore$3||(hasRequiredCore$3=1,(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.CodeGen=s.Name=s.nil=s.stringify=s.str=s._=s.KeywordCxt=void 0;var n=requireValidate$1();Object.defineProperty(s,"KeywordCxt",{enumerable:!0,get:function(){return n.KeywordCxt}});var u=requireCodegen$1();Object.defineProperty(s,"_",{enumerable:!0,get:function(){return u._}}),Object.defineProperty(s,"str",{enumerable:!0,get:function(){return u.str}}),Object.defineProperty(s,"stringify",{enumerable:!0,get:function(){return u.stringify}}),Object.defineProperty(s,"nil",{enumerable:!0,get:function(){return u.nil}}),Object.defineProperty(s,"Name",{enumerable:!0,get:function(){return u.Name}}),Object.defineProperty(s,"CodeGen",{enumerable:!0,get:function(){return u.CodeGen}});const f=requireValidation_error$1(),y=requireRef_error$1(),S=requireRules$1(),A=requireCompile$1(),w=requireCodegen$1(),C=requireResolve$1(),T=requireDataType$1(),R=requireUtil$1(),I=require$$9$1,N=requireUri$1(),L=(oe,ae)=>new RegExp(oe,ae);L.code="new RegExp";const F=["removeAdditional","useDefaults","coerceTypes"],H=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),z={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},U={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},G=200;function Y(oe){var ae,be,he,ue,ye,ce,_e,ke,Pe,$e,xe,Ne,je,He,Ye,Je,ot,ze,pt,yt,ut,Et,qe,Le,lt;const We=oe.strict,Qe=(ae=oe.code)===null||ae===void 0?void 0:ae.optimize,at=Qe===!0||Qe===void 0?1:Qe||0,St=(he=(be=oe.code)===null||be===void 0?void 0:be.regExp)!==null&&he!==void 0?he:L,Ct=(ue=oe.uriResolver)!==null&&ue!==void 0?ue:N.default;return{strictSchema:(ce=(ye=oe.strictSchema)!==null&&ye!==void 0?ye:We)!==null&&ce!==void 0?ce:!0,strictNumbers:(ke=(_e=oe.strictNumbers)!==null&&_e!==void 0?_e:We)!==null&&ke!==void 0?ke:!0,strictTypes:($e=(Pe=oe.strictTypes)!==null&&Pe!==void 0?Pe:We)!==null&&$e!==void 0?$e:"log",strictTuples:(Ne=(xe=oe.strictTuples)!==null&&xe!==void 0?xe:We)!==null&&Ne!==void 0?Ne:"log",strictRequired:(He=(je=oe.strictRequired)!==null&&je!==void 0?je:We)!==null&&He!==void 0?He:!1,code:oe.code?{...oe.code,optimize:at,regExp:St}:{optimize:at,regExp:St},loopRequired:(Ye=oe.loopRequired)!==null&&Ye!==void 0?Ye:G,loopEnum:(Je=oe.loopEnum)!==null&&Je!==void 0?Je:G,meta:(ot=oe.meta)!==null&&ot!==void 0?ot:!0,messages:(ze=oe.messages)!==null&&ze!==void 0?ze:!0,inlineRefs:(pt=oe.inlineRefs)!==null&&pt!==void 0?pt:!0,schemaId:(yt=oe.schemaId)!==null&&yt!==void 0?yt:"$id",addUsedSchema:(ut=oe.addUsedSchema)!==null&&ut!==void 0?ut:!0,validateSchema:(Et=oe.validateSchema)!==null&&Et!==void 0?Et:!0,validateFormats:(qe=oe.validateFormats)!==null&&qe!==void 0?qe:!0,unicodeRegExp:(Le=oe.unicodeRegExp)!==null&&Le!==void 0?Le:!0,int32range:(lt=oe.int32range)!==null&&lt!==void 0?lt:!0,uriResolver:Ct}}class K{constructor(ae={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,ae=this.opts={...ae,...Y(ae)};const{es5:be,lines:he}=this.opts.code;this.scope=new w.ValueScope({scope:{},prefixes:H,es5:be,lines:he}),this.logger=Ee(ae.logger);const ue=ae.validateFormats;ae.validateFormats=!1,this.RULES=(0,S.getRules)(),Z.call(this,z,ae,"NOT SUPPORTED"),Z.call(this,U,ae,"DEPRECATED","warn"),this._metaOpts=ne.call(this),ae.formats&&de.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),ae.keywords&&se.call(this,ae.keywords),typeof ae.meta=="object"&&this.addMetaSchema(ae.meta),te.call(this),ae.validateFormats=ue}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:ae,meta:be,schemaId:he}=this.opts;let ue=I;he==="id"&&(ue={...I},ue.id=ue.$id,delete ue.$id),be&&ae&&this.addMetaSchema(ue,ue[he],!1)}defaultMeta(){const{meta:ae,schemaId:be}=this.opts;return this.opts.defaultMeta=typeof ae=="object"?ae[be]||ae:void 0}validate(ae,be){let he;if(typeof ae=="string"){if(he=this.getSchema(ae),!he)throw new Error(`no schema with key or ref "${ae}"`)}else he=this.compile(ae);const ue=he(be);return"$async"in he||(this.errors=he.errors),ue}compile(ae,be){const he=this._addSchema(ae,be);return he.validate||this._compileSchemaEnv(he)}compileAsync(ae,be){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:he}=this.opts;return ue.call(this,ae,be);async function ue($e,xe){await ye.call(this,$e.$schema);const Ne=this._addSchema($e,xe);return Ne.validate||ce.call(this,Ne)}async function ye($e){$e&&!this.getSchema($e)&&await ue.call(this,{$ref:$e},!0)}async function ce($e){try{return this._compileSchemaEnv($e)}catch(xe){if(!(xe instanceof y.default))throw xe;return _e.call(this,xe),await ke.call(this,xe.missingSchema),ce.call(this,$e)}}function _e({missingSchema:$e,missingRef:xe}){if(this.refs[$e])throw new Error(`AnySchema ${$e} is loaded but ${xe} cannot be resolved`)}async function ke($e){const xe=await Pe.call(this,$e);this.refs[$e]||await ye.call(this,xe.$schema),this.refs[$e]||this.addSchema(xe,$e,be)}async function Pe($e){const xe=this._loading[$e];if(xe)return xe;try{return await(this._loading[$e]=he($e))}finally{delete this._loading[$e]}}}addSchema(ae,be,he,ue=this.opts.validateSchema){if(Array.isArray(ae)){for(const ce of ae)this.addSchema(ce,void 0,he,ue);return this}let ye;if(typeof ae=="object"){const{schemaId:ce}=this.opts;if(ye=ae[ce],ye!==void 0&&typeof ye!="string")throw new Error(`schema ${ce} must be string`)}return be=(0,C.normalizeId)(be||ye),this._checkUnique(be),this.schemas[be]=this._addSchema(ae,he,be,ue,!0),this}addMetaSchema(ae,be,he=this.opts.validateSchema){return this.addSchema(ae,be,!0,he),this}validateSchema(ae,be){if(typeof ae=="boolean")return!0;let he;if(he=ae.$schema,he!==void 0&&typeof he!="string")throw new Error("$schema must be a string");if(he=he||this.opts.defaultMeta||this.defaultMeta(),!he)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const ue=this.validate(he,ae);if(!ue&&be){const ye="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(ye);else throw new Error(ye)}return ue}getSchema(ae){let be;for(;typeof(be=J.call(this,ae))=="string";)ae=be;if(be===void 0){const{schemaId:he}=this.opts,ue=new A.SchemaEnv({schema:{},schemaId:he});if(be=A.resolveSchema.call(this,ue,ae),!be)return;this.refs[ae]=be}return be.validate||this._compileSchemaEnv(be)}removeSchema(ae){if(ae instanceof RegExp)return this._removeAllSchemas(this.schemas,ae),this._removeAllSchemas(this.refs,ae),this;switch(typeof ae){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const be=J.call(this,ae);return typeof be=="object"&&this._cache.delete(be.schema),delete this.schemas[ae],delete this.refs[ae],this}case"object":{const be=ae;this._cache.delete(be);let he=ae[this.opts.schemaId];return he&&(he=(0,C.normalizeId)(he),delete this.schemas[he],delete this.refs[he]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(ae){for(const be of ae)this.addKeyword(be);return this}addKeyword(ae,be){let he;if(typeof ae=="string")he=ae,typeof be=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),be.keyword=he);else if(typeof ae=="object"&&be===void 0){if(be=ae,he=be.keyword,Array.isArray(he)&&!he.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(Ie.call(this,he,be),!be)return(0,R.eachItem)(he,ye=>Be.call(this,ye)),this;Re.call(this,be);const ue={...be,type:(0,T.getJSONTypes)(be.type),schemaType:(0,T.getJSONTypes)(be.schemaType)};return(0,R.eachItem)(he,ue.type.length===0?ye=>Be.call(this,ye,ue):ye=>ue.type.forEach(ce=>Be.call(this,ye,ue,ce))),this}getKeyword(ae){const be=this.RULES.all[ae];return typeof be=="object"?be.definition:!!be}removeKeyword(ae){const{RULES:be}=this;delete be.keywords[ae],delete be.all[ae];for(const he of be.rules){const ue=he.rules.findIndex(ye=>ye.keyword===ae);ue>=0&&he.rules.splice(ue,1)}return this}addFormat(ae,be){return typeof be=="string"&&(be=new RegExp(be)),this.formats[ae]=be,this}errorsText(ae=this.errors,{separator:be=", ",dataVar:he="data"}={}){return!ae||ae.length===0?"No errors":ae.map(ue=>`${he}${ue.instancePath} ${ue.message}`).reduce((ue,ye)=>ue+be+ye)}$dataMetaSchema(ae,be){const he=this.RULES.all;ae=JSON.parse(JSON.stringify(ae));for(const ue of be){const ye=ue.split("/").slice(1);let ce=ae;for(const _e of ye)ce=ce[_e];for(const _e in he){const ke=he[_e];if(typeof ke!="object")continue;const{$data:Pe}=ke.definition,$e=ce[_e];Pe&&$e&&(ce[_e]=Se($e))}}return ae}_removeAllSchemas(ae,be){for(const he in ae){const ue=ae[he];(!be||be.test(he))&&(typeof ue=="string"?delete ae[he]:ue&&!ue.meta&&(this._cache.delete(ue.schema),delete ae[he]))}}_addSchema(ae,be,he,ue=this.opts.validateSchema,ye=this.opts.addUsedSchema){let ce;const{schemaId:_e}=this.opts;if(typeof ae=="object")ce=ae[_e];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof ae!="boolean")throw new Error("schema must be object or boolean")}let ke=this._cache.get(ae);if(ke!==void 0)return ke;he=(0,C.normalizeId)(ce||he);const Pe=C.getSchemaRefs.call(this,ae,he);return ke=new A.SchemaEnv({schema:ae,schemaId:_e,meta:be,baseId:he,localRefs:Pe}),this._cache.set(ke.schema,ke),ye&&!he.startsWith("#")&&(he&&this._checkUnique(he),this.refs[he]=ke),ue&&this.validateSchema(ae,!0),ke}_checkUnique(ae){if(this.schemas[ae]||this.refs[ae])throw new Error(`schema with key or id "${ae}" already exists`)}_compileSchemaEnv(ae){if(ae.meta?this._compileMetaSchema(ae):A.compileSchema.call(this,ae),!ae.validate)throw new Error("ajv implementation error");return ae.validate}_compileMetaSchema(ae){const be=this.opts;this.opts=this._metaOpts;try{A.compileSchema.call(this,ae)}finally{this.opts=be}}}K.ValidationError=f.default,K.MissingRefError=y.default,s.default=K;function Z(oe,ae,be,he="error"){for(const ue in oe){const ye=ue;ye in ae&&this.logger[he](`${be}: option ${ue}. ${oe[ye]}`)}}function J(oe){return oe=(0,C.normalizeId)(oe),this.schemas[oe]||this.refs[oe]}function te(){const oe=this.opts.schemas;if(oe)if(Array.isArray(oe))this.addSchema(oe);else for(const ae in oe)this.addSchema(oe[ae],ae)}function de(){for(const oe in this.opts.formats){const ae=this.opts.formats[oe];ae&&this.addFormat(oe,ae)}}function se(oe){if(Array.isArray(oe)){this.addVocabulary(oe);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const ae in oe){const be=oe[ae];be.keyword||(be.keyword=ae),this.addKeyword(be)}}function ne(){const oe={...this.opts};for(const ae of F)delete oe[ae];return oe}const ge={log(){},warn(){},error(){}};function Ee(oe){if(oe===!1)return ge;if(oe===void 0)return console;if(oe.log&&oe.warn&&oe.error)return oe;throw new Error("logger must implement log, warn and error methods")}const we=/^[a-z_$][a-z0-9_$:-]*$/i;function Ie(oe,ae){const{RULES:be}=this;if((0,R.eachItem)(oe,he=>{if(be.keywords[he])throw new Error(`Keyword ${he} is already defined`);if(!we.test(he))throw new Error(`Keyword ${he} has invalid name`)}),!!ae&&ae.$data&&!("code"in ae||"validate"in ae))throw new Error('$data keyword must have "code" or "validate" function')}function Be(oe,ae,be){var he;const ue=ae?.post;if(be&&ue)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:ye}=this;let ce=ue?ye.post:ye.rules.find(({type:ke})=>ke===be);if(ce||(ce={type:be,rules:[]},ye.rules.push(ce)),ye.keywords[oe]=!0,!ae)return;const _e={keyword:oe,definition:{...ae,type:(0,T.getJSONTypes)(ae.type),schemaType:(0,T.getJSONTypes)(ae.schemaType)}};ae.before?Me.call(this,ce,_e,ae.before):ce.rules.push(_e),ye.all[oe]=_e,(he=ae.implements)===null||he===void 0||he.forEach(ke=>this.addKeyword(ke))}function Me(oe,ae,be){const he=oe.rules.findIndex(ue=>ue.keyword===be);he>=0?oe.rules.splice(he,0,ae):(oe.rules.push(ae),this.logger.warn(`rule ${be} is not defined`))}function Re(oe){let{metaSchema:ae}=oe;ae!==void 0&&(oe.$data&&this.opts.$data&&(ae=Se(ae)),oe.validateSchema=this.compile(ae,!0))}const Te={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function Se(oe){return{anyOf:[oe,Te]}}})(core$3)),core$3}var draft7$1={},core$2={},id$1={},hasRequiredId$1;function requireId$1(){if(hasRequiredId$1)return id$1;hasRequiredId$1=1,Object.defineProperty(id$1,"__esModule",{value:!0});const s={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};return id$1.default=s,id$1}var ref$1={},hasRequiredRef$1;function requireRef$1(){if(hasRequiredRef$1)return ref$1;hasRequiredRef$1=1,Object.defineProperty(ref$1,"__esModule",{value:!0}),ref$1.callRef=ref$1.getValidate=void 0;const s=requireRef_error$1(),n=requireCode$2(),u=requireCodegen$1(),f=requireNames$1(),y=requireCompile$1(),S=requireUtil$1(),A={keyword:"$ref",schemaType:"string",code(T){const{gen:R,schema:I,it:N}=T,{baseId:L,schemaEnv:F,validateName:H,opts:z,self:U}=N,{root:G}=F;if((I==="#"||I==="#/")&&L===G.baseId)return K();const Y=y.resolveRef.call(U,G,L,I);if(Y===void 0)throw new s.default(N.opts.uriResolver,L,I);if(Y instanceof y.SchemaEnv)return Z(Y);return J(Y);function K(){if(F===G)return C(T,H,F,F.$async);const te=R.scopeValue("root",{ref:G});return C(T,(0,u._)`${te}.validate`,G,G.$async)}function Z(te){const de=w(T,te);C(T,de,te,te.$async)}function J(te){const de=R.scopeValue("schema",z.code.source===!0?{ref:te,code:(0,u.stringify)(te)}:{ref:te}),se=R.name("valid"),ne=T.subschema({schema:te,dataTypes:[],schemaPath:u.nil,topSchemaRef:de,errSchemaPath:I},se);T.mergeEvaluated(ne),T.ok(se)}}};function w(T,R){const{gen:I}=T;return R.validate?I.scopeValue("validate",{ref:R.validate}):(0,u._)`${I.scopeValue("wrapper",{ref:R})}.validate`}ref$1.getValidate=w;function C(T,R,I,N){const{gen:L,it:F}=T,{allErrors:H,schemaEnv:z,opts:U}=F,G=U.passContext?f.default.this:u.nil;N?Y():K();function Y(){if(!z.$async)throw new Error("async schema referenced by sync schema");const te=L.let("valid");L.try(()=>{L.code((0,u._)`await ${(0,n.callValidateCode)(T,R,G)}`),J(R),H||L.assign(te,!0)},de=>{L.if((0,u._)`!(${de} instanceof ${F.ValidationError})`,()=>L.throw(de)),Z(de),H||L.assign(te,!1)}),T.ok(te)}function K(){T.result((0,n.callValidateCode)(T,R,G),()=>J(R),()=>Z(R))}function Z(te){const de=(0,u._)`${te}.errors`;L.assign(f.default.vErrors,(0,u._)`${f.default.vErrors} === null ? ${de} : ${f.default.vErrors}.concat(${de})`),L.assign(f.default.errors,(0,u._)`${f.default.vErrors}.length`)}function J(te){var de;if(!F.opts.unevaluated)return;const se=(de=I?.validate)===null||de===void 0?void 0:de.evaluated;if(F.props!==!0)if(se&&!se.dynamicProps)se.props!==void 0&&(F.props=S.mergeEvaluated.props(L,se.props,F.props));else{const ne=L.var("props",(0,u._)`${te}.evaluated.props`);F.props=S.mergeEvaluated.props(L,ne,F.props,u.Name)}if(F.items!==!0)if(se&&!se.dynamicItems)se.items!==void 0&&(F.items=S.mergeEvaluated.items(L,se.items,F.items));else{const ne=L.var("items",(0,u._)`${te}.evaluated.items`);F.items=S.mergeEvaluated.items(L,ne,F.items,u.Name)}}}return ref$1.callRef=C,ref$1.default=A,ref$1}var hasRequiredCore$2;function requireCore$2(){if(hasRequiredCore$2)return core$2;hasRequiredCore$2=1,Object.defineProperty(core$2,"__esModule",{value:!0});const s=requireId$1(),n=requireRef$1(),u=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",s.default,n.default];return core$2.default=u,core$2}var validation$1={},limitNumber$1={},hasRequiredLimitNumber$1;function requireLimitNumber$1(){if(hasRequiredLimitNumber$1)return limitNumber$1;hasRequiredLimitNumber$1=1,Object.defineProperty(limitNumber$1,"__esModule",{value:!0});const s=requireCodegen$1(),n=s.operators,u={maximum:{okStr:"<=",ok:n.LTE,fail:n.GT},minimum:{okStr:">=",ok:n.GTE,fail:n.LT},exclusiveMaximum:{okStr:"<",ok:n.LT,fail:n.GTE},exclusiveMinimum:{okStr:">",ok:n.GT,fail:n.LTE}},f={message:({keyword:S,schemaCode:A})=>(0,s.str)`must be ${u[S].okStr} ${A}`,params:({keyword:S,schemaCode:A})=>(0,s._)`{comparison: ${u[S].okStr}, limit: ${A}}`},y={keyword:Object.keys(u),type:"number",schemaType:"number",$data:!0,error:f,code(S){const{keyword:A,data:w,schemaCode:C}=S;S.fail$data((0,s._)`${w} ${u[A].fail} ${C} || isNaN(${w})`)}};return limitNumber$1.default=y,limitNumber$1}var multipleOf$1={},hasRequiredMultipleOf$1;function requireMultipleOf$1(){if(hasRequiredMultipleOf$1)return multipleOf$1;hasRequiredMultipleOf$1=1,Object.defineProperty(multipleOf$1,"__esModule",{value:!0});const s=requireCodegen$1(),n={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:u})=>(0,s.str)`must be multiple of ${u}`,params:({schemaCode:u})=>(0,s._)`{multipleOf: ${u}}`},code(u){const{gen:f,data:y,schemaCode:S,it:A}=u,w=A.opts.multipleOfPrecision,C=f.let("res"),T=w?(0,s._)`Math.abs(Math.round(${C}) - ${C}) > 1e-${w}`:(0,s._)`${C} !== parseInt(${C})`;u.fail$data((0,s._)`(${S} === 0 || (${C} = ${y}/${S}, ${T}))`)}};return multipleOf$1.default=n,multipleOf$1}var limitLength$1={},ucs2length$1={},hasRequiredUcs2length$1;function requireUcs2length$1(){if(hasRequiredUcs2length$1)return ucs2length$1;hasRequiredUcs2length$1=1,Object.defineProperty(ucs2length$1,"__esModule",{value:!0});function s(n){const u=n.length;let f=0,y=0,S;for(;y<u;)f++,S=n.charCodeAt(y++),S>=55296&&S<=56319&&y<u&&(S=n.charCodeAt(y),(S&64512)===56320&&y++);return f}return ucs2length$1.default=s,s.code='require("ajv/dist/runtime/ucs2length").default',ucs2length$1}var hasRequiredLimitLength$1;function requireLimitLength$1(){if(hasRequiredLimitLength$1)return limitLength$1;hasRequiredLimitLength$1=1,Object.defineProperty(limitLength$1,"__esModule",{value:!0});const s=requireCodegen$1(),n=requireUtil$1(),u=requireUcs2length$1(),f={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:y,schemaCode:S}){const A=y==="maxLength"?"more":"fewer";return(0,s.str)`must NOT have ${A} than ${S} characters`},params:({schemaCode:y})=>(0,s._)`{limit: ${y}}`},code(y){const{keyword:S,data:A,schemaCode:w,it:C}=y,T=S==="maxLength"?s.operators.GT:s.operators.LT,R=C.opts.unicode===!1?(0,s._)`${A}.length`:(0,s._)`${(0,n.useFunc)(y.gen,u.default)}(${A})`;y.fail$data((0,s._)`${R} ${T} ${w}`)}};return limitLength$1.default=f,limitLength$1}var pattern$1={},hasRequiredPattern$1;function requirePattern$1(){if(hasRequiredPattern$1)return pattern$1;hasRequiredPattern$1=1,Object.defineProperty(pattern$1,"__esModule",{value:!0});const s=requireCode$2(),n=requireUtil$1(),u=requireCodegen$1(),f={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:y})=>(0,u.str)`must match pattern "${y}"`,params:({schemaCode:y})=>(0,u._)`{pattern: ${y}}`},code(y){const{gen:S,data:A,$data:w,schema:C,schemaCode:T,it:R}=y,I=R.opts.unicodeRegExp?"u":"";if(w){const{regExp:N}=R.opts.code,L=N.code==="new RegExp"?(0,u._)`new RegExp`:(0,n.useFunc)(S,N),F=S.let("valid");S.try(()=>S.assign(F,(0,u._)`${L}(${T}, ${I}).test(${A})`),()=>S.assign(F,!1)),y.fail$data((0,u._)`!${F}`)}else{const N=(0,s.usePattern)(y,C);y.fail$data((0,u._)`!${N}.test(${A})`)}}};return pattern$1.default=f,pattern$1}var limitProperties$1={},hasRequiredLimitProperties$1;function requireLimitProperties$1(){if(hasRequiredLimitProperties$1)return limitProperties$1;hasRequiredLimitProperties$1=1,Object.defineProperty(limitProperties$1,"__esModule",{value:!0});const s=requireCodegen$1(),n={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:u,schemaCode:f}){const y=u==="maxProperties"?"more":"fewer";return(0,s.str)`must NOT have ${y} than ${f} properties`},params:({schemaCode:u})=>(0,s._)`{limit: ${u}}`},code(u){const{keyword:f,data:y,schemaCode:S}=u,A=f==="maxProperties"?s.operators.GT:s.operators.LT;u.fail$data((0,s._)`Object.keys(${y}).length ${A} ${S}`)}};return limitProperties$1.default=n,limitProperties$1}var required$2={},hasRequiredRequired$1;function requireRequired$1(){if(hasRequiredRequired$1)return required$2;hasRequiredRequired$1=1,Object.defineProperty(required$2,"__esModule",{value:!0});const s=requireCode$2(),n=requireCodegen$1(),u=requireUtil$1(),f={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:y}})=>(0,n.str)`must have required property '${y}'`,params:({params:{missingProperty:y}})=>(0,n._)`{missingProperty: ${y}}`},code(y){const{gen:S,schema:A,schemaCode:w,data:C,$data:T,it:R}=y,{opts:I}=R;if(!T&&A.length===0)return;const N=A.length>=I.loopRequired;if(R.allErrors?L():F(),I.strictRequired){const U=y.parentSchema.properties,{definedProperties:G}=y.it;for(const Y of A)if(U?.[Y]===void 0&&!G.has(Y)){const K=R.schemaEnv.baseId+R.errSchemaPath,Z=`required property "${Y}" is not defined at "${K}" (strictRequired)`;(0,u.checkStrictMode)(R,Z,R.opts.strictRequired)}}function L(){if(N||T)y.block$data(n.nil,H);else for(const U of A)(0,s.checkReportMissingProp)(y,U)}function F(){const U=S.let("missing");if(N||T){const G=S.let("valid",!0);y.block$data(G,()=>z(U,G)),y.ok(G)}else S.if((0,s.checkMissingProp)(y,A,U)),(0,s.reportMissingProp)(y,U),S.else()}function H(){S.forOf("prop",w,U=>{y.setParams({missingProperty:U}),S.if((0,s.noPropertyInData)(S,C,U,I.ownProperties),()=>y.error())})}function z(U,G){y.setParams({missingProperty:U}),S.forOf(U,w,()=>{S.assign(G,(0,s.propertyInData)(S,C,U,I.ownProperties)),S.if((0,n.not)(G),()=>{y.error(),S.break()})},n.nil)}}};return required$2.default=f,required$2}var limitItems$1={},hasRequiredLimitItems$1;function requireLimitItems$1(){if(hasRequiredLimitItems$1)return limitItems$1;hasRequiredLimitItems$1=1,Object.defineProperty(limitItems$1,"__esModule",{value:!0});const s=requireCodegen$1(),n={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:u,schemaCode:f}){const y=u==="maxItems"?"more":"fewer";return(0,s.str)`must NOT have ${y} than ${f} items`},params:({schemaCode:u})=>(0,s._)`{limit: ${u}}`},code(u){const{keyword:f,data:y,schemaCode:S}=u,A=f==="maxItems"?s.operators.GT:s.operators.LT;u.fail$data((0,s._)`${y}.length ${A} ${S}`)}};return limitItems$1.default=n,limitItems$1}var uniqueItems$1={},equal$1={},hasRequiredEqual$1;function requireEqual$1(){if(hasRequiredEqual$1)return equal$1;hasRequiredEqual$1=1,Object.defineProperty(equal$1,"__esModule",{value:!0});const s=requireFastDeepEqual();return s.code='require("ajv/dist/runtime/equal").default',equal$1.default=s,equal$1}var hasRequiredUniqueItems$1;function requireUniqueItems$1(){if(hasRequiredUniqueItems$1)return uniqueItems$1;hasRequiredUniqueItems$1=1,Object.defineProperty(uniqueItems$1,"__esModule",{value:!0});const s=requireDataType$1(),n=requireCodegen$1(),u=requireUtil$1(),f=requireEqual$1(),y={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:S,j:A}})=>(0,n.str)`must NOT have duplicate items (items ## ${A} and ${S} are identical)`,params:({params:{i:S,j:A}})=>(0,n._)`{i: ${S}, j: ${A}}`},code(S){const{gen:A,data:w,$data:C,schema:T,parentSchema:R,schemaCode:I,it:N}=S;if(!C&&!T)return;const L=A.let("valid"),F=R.items?(0,s.getSchemaTypes)(R.items):[];S.block$data(L,H,(0,n._)`${I} === false`),S.ok(L);function H(){const Y=A.let("i",(0,n._)`${w}.length`),K=A.let("j");S.setParams({i:Y,j:K}),A.assign(L,!0),A.if((0,n._)`${Y} > 1`,()=>(z()?U:G)(Y,K))}function z(){return F.length>0&&!F.some(Y=>Y==="object"||Y==="array")}function U(Y,K){const Z=A.name("item"),J=(0,s.checkDataTypes)(F,Z,N.opts.strictNumbers,s.DataType.Wrong),te=A.const("indices",(0,n._)`{}`);A.for((0,n._)`;${Y}--;`,()=>{A.let(Z,(0,n._)`${w}[${Y}]`),A.if(J,(0,n._)`continue`),F.length>1&&A.if((0,n._)`typeof ${Z} == "string"`,(0,n._)`${Z} += "_"`),A.if((0,n._)`typeof ${te}[${Z}] == "number"`,()=>{A.assign(K,(0,n._)`${te}[${Z}]`),S.error(),A.assign(L,!1).break()}).code((0,n._)`${te}[${Z}] = ${Y}`)})}function G(Y,K){const Z=(0,u.useFunc)(A,f.default),J=A.name("outer");A.label(J).for((0,n._)`;${Y}--;`,()=>A.for((0,n._)`${K} = ${Y}; ${K}--;`,()=>A.if((0,n._)`${Z}(${w}[${Y}], ${w}[${K}])`,()=>{S.error(),A.assign(L,!1).break(J)})))}}};return uniqueItems$1.default=y,uniqueItems$1}var _const$1={},hasRequired_const$1;function require_const$1(){if(hasRequired_const$1)return _const$1;hasRequired_const$1=1,Object.defineProperty(_const$1,"__esModule",{value:!0});const s=requireCodegen$1(),n=requireUtil$1(),u=requireEqual$1(),f={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:y})=>(0,s._)`{allowedValue: ${y}}`},code(y){const{gen:S,data:A,$data:w,schemaCode:C,schema:T}=y;w||T&&typeof T=="object"?y.fail$data((0,s._)`!${(0,n.useFunc)(S,u.default)}(${A}, ${C})`):y.fail((0,s._)`${T} !== ${A}`)}};return _const$1.default=f,_const$1}var _enum$1={},hasRequired_enum$1;function require_enum$1(){if(hasRequired_enum$1)return _enum$1;hasRequired_enum$1=1,Object.defineProperty(_enum$1,"__esModule",{value:!0});const s=requireCodegen$1(),n=requireUtil$1(),u=requireEqual$1(),f={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:y})=>(0,s._)`{allowedValues: ${y}}`},code(y){const{gen:S,data:A,$data:w,schema:C,schemaCode:T,it:R}=y;if(!w&&C.length===0)throw new Error("enum must have non-empty array");const I=C.length>=R.opts.loopEnum;let N;const L=()=>N??(N=(0,n.useFunc)(S,u.default));let F;if(I||w)F=S.let("valid"),y.block$data(F,H);else{if(!Array.isArray(C))throw new Error("ajv implementation error");const U=S.const("vSchema",T);F=(0,s.or)(...C.map((G,Y)=>z(U,Y)))}y.pass(F);function H(){S.assign(F,!1),S.forOf("v",T,U=>S.if((0,s._)`${L()}(${A}, ${U})`,()=>S.assign(F,!0).break()))}function z(U,G){const Y=C[G];return typeof Y=="object"&&Y!==null?(0,s._)`${L()}(${A}, ${U}[${G}])`:(0,s._)`${A} === ${Y}`}}};return _enum$1.default=f,_enum$1}var hasRequiredValidation$1;function requireValidation$1(){if(hasRequiredValidation$1)return validation$1;hasRequiredValidation$1=1,Object.defineProperty(validation$1,"__esModule",{value:!0});const s=requireLimitNumber$1(),n=requireMultipleOf$1(),u=requireLimitLength$1(),f=requirePattern$1(),y=requireLimitProperties$1(),S=requireRequired$1(),A=requireLimitItems$1(),w=requireUniqueItems$1(),C=require_const$1(),T=require_enum$1(),R=[s.default,n.default,u.default,f.default,y.default,S.default,A.default,w.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},C.default,T.default];return validation$1.default=R,validation$1}var applicator$1={},additionalItems$1={},hasRequiredAdditionalItems$1;function requireAdditionalItems$1(){if(hasRequiredAdditionalItems$1)return additionalItems$1;hasRequiredAdditionalItems$1=1,Object.defineProperty(additionalItems$1,"__esModule",{value:!0}),additionalItems$1.validateAdditionalItems=void 0;const s=requireCodegen$1(),n=requireUtil$1(),u={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:y}})=>(0,s.str)`must NOT have more than ${y} items`,params:({params:{len:y}})=>(0,s._)`{limit: ${y}}`},code(y){const{parentSchema:S,it:A}=y,{items:w}=S;if(!Array.isArray(w)){(0,n.checkStrictMode)(A,'"additionalItems" is ignored when "items" is not an array of schemas');return}f(y,w)}};function f(y,S){const{gen:A,schema:w,data:C,keyword:T,it:R}=y;R.items=!0;const I=A.const("len",(0,s._)`${C}.length`);if(w===!1)y.setParams({len:S.length}),y.pass((0,s._)`${I} <= ${S.length}`);else if(typeof w=="object"&&!(0,n.alwaysValidSchema)(R,w)){const L=A.var("valid",(0,s._)`${I} <= ${S.length}`);A.if((0,s.not)(L),()=>N(L)),y.ok(L)}function N(L){A.forRange("i",S.length,I,F=>{y.subschema({keyword:T,dataProp:F,dataPropType:n.Type.Num},L),R.allErrors||A.if((0,s.not)(L),()=>A.break())})}}return additionalItems$1.validateAdditionalItems=f,additionalItems$1.default=u,additionalItems$1}var prefixItems$1={},items$1={},hasRequiredItems$1;function requireItems$1(){if(hasRequiredItems$1)return items$1;hasRequiredItems$1=1,Object.defineProperty(items$1,"__esModule",{value:!0}),items$1.validateTuple=void 0;const s=requireCodegen$1(),n=requireUtil$1(),u=requireCode$2(),f={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(S){const{schema:A,it:w}=S;if(Array.isArray(A))return y(S,"additionalItems",A);w.items=!0,!(0,n.alwaysValidSchema)(w,A)&&S.ok((0,u.validateArray)(S))}};function y(S,A,w=S.schema){const{gen:C,parentSchema:T,data:R,keyword:I,it:N}=S;H(T),N.opts.unevaluated&&w.length&&N.items!==!0&&(N.items=n.mergeEvaluated.items(C,w.length,N.items));const L=C.name("valid"),F=C.const("len",(0,s._)`${R}.length`);w.forEach((z,U)=>{(0,n.alwaysValidSchema)(N,z)||(C.if((0,s._)`${F} > ${U}`,()=>S.subschema({keyword:I,schemaProp:U,dataProp:U},L)),S.ok(L))});function H(z){const{opts:U,errSchemaPath:G}=N,Y=w.length,K=Y===z.minItems&&(Y===z.maxItems||z[A]===!1);if(U.strictTuples&&!K){const Z=`"${I}" is ${Y}-tuple, but minItems or maxItems/${A} are not specified or different at path "${G}"`;(0,n.checkStrictMode)(N,Z,U.strictTuples)}}}return items$1.validateTuple=y,items$1.default=f,items$1}var hasRequiredPrefixItems$1;function requirePrefixItems$1(){if(hasRequiredPrefixItems$1)return prefixItems$1;hasRequiredPrefixItems$1=1,Object.defineProperty(prefixItems$1,"__esModule",{value:!0});const s=requireItems$1(),n={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:u=>(0,s.validateTuple)(u,"items")};return prefixItems$1.default=n,prefixItems$1}var items2020$1={},hasRequiredItems2020$1;function requireItems2020$1(){if(hasRequiredItems2020$1)return items2020$1;hasRequiredItems2020$1=1,Object.defineProperty(items2020$1,"__esModule",{value:!0});const s=requireCodegen$1(),n=requireUtil$1(),u=requireCode$2(),f=requireAdditionalItems$1(),y={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:S}})=>(0,s.str)`must NOT have more than ${S} items`,params:({params:{len:S}})=>(0,s._)`{limit: ${S}}`},code(S){const{schema:A,parentSchema:w,it:C}=S,{prefixItems:T}=w;C.items=!0,!(0,n.alwaysValidSchema)(C,A)&&(T?(0,f.validateAdditionalItems)(S,T):S.ok((0,u.validateArray)(S)))}};return items2020$1.default=y,items2020$1}var contains$1={},hasRequiredContains$1;function requireContains$1(){if(hasRequiredContains$1)return contains$1;hasRequiredContains$1=1,Object.defineProperty(contains$1,"__esModule",{value:!0});const s=requireCodegen$1(),n=requireUtil$1(),u={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:f,max:y}})=>y===void 0?(0,s.str)`must contain at least ${f} valid item(s)`:(0,s.str)`must contain at least ${f} and no more than ${y} valid item(s)`,params:({params:{min:f,max:y}})=>y===void 0?(0,s._)`{minContains: ${f}}`:(0,s._)`{minContains: ${f}, maxContains: ${y}}`},code(f){const{gen:y,schema:S,parentSchema:A,data:w,it:C}=f;let T,R;const{minContains:I,maxContains:N}=A;C.opts.next?(T=I===void 0?1:I,R=N):T=1;const L=y.const("len",(0,s._)`${w}.length`);if(f.setParams({min:T,max:R}),R===void 0&&T===0){(0,n.checkStrictMode)(C,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(R!==void 0&&T>R){(0,n.checkStrictMode)(C,'"minContains" > "maxContains" is always invalid'),f.fail();return}if((0,n.alwaysValidSchema)(C,S)){let G=(0,s._)`${L} >= ${T}`;R!==void 0&&(G=(0,s._)`${G} && ${L} <= ${R}`),f.pass(G);return}C.items=!0;const F=y.name("valid");R===void 0&&T===1?z(F,()=>y.if(F,()=>y.break())):T===0?(y.let(F,!0),R!==void 0&&y.if((0,s._)`${w}.length > 0`,H)):(y.let(F,!1),H()),f.result(F,()=>f.reset());function H(){const G=y.name("_valid"),Y=y.let("count",0);z(G,()=>y.if(G,()=>U(Y)))}function z(G,Y){y.forRange("i",0,L,K=>{f.subschema({keyword:"contains",dataProp:K,dataPropType:n.Type.Num,compositeRule:!0},G),Y()})}function U(G){y.code((0,s._)`${G}++`),R===void 0?y.if((0,s._)`${G} >= ${T}`,()=>y.assign(F,!0).break()):(y.if((0,s._)`${G} > ${R}`,()=>y.assign(F,!1).break()),T===1?y.assign(F,!0):y.if((0,s._)`${G} >= ${T}`,()=>y.assign(F,!0)))}}};return contains$1.default=u,contains$1}var dependencies$1={},hasRequiredDependencies$1;function requireDependencies$1(){return hasRequiredDependencies$1||(hasRequiredDependencies$1=1,(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.validateSchemaDeps=s.validatePropertyDeps=s.error=void 0;const n=requireCodegen$1(),u=requireUtil$1(),f=requireCode$2();s.error={message:({params:{property:C,depsCount:T,deps:R}})=>{const I=T===1?"property":"properties";return(0,n.str)`must have ${I} ${R} when property ${C} is present`},params:({params:{property:C,depsCount:T,deps:R,missingProperty:I}})=>(0,n._)`{property: ${C},
    missingProperty: ${I},
    depsCount: ${T},
    deps: ${R}}`};const y={keyword:"dependencies",type:"object",schemaType:"object",error:s.error,code(C){const[T,R]=S(C);A(C,T),w(C,R)}};function S({schema:C}){const T={},R={};for(const I in C){if(I==="__proto__")continue;const N=Array.isArray(C[I])?T:R;N[I]=C[I]}return[T,R]}function A(C,T=C.schema){const{gen:R,data:I,it:N}=C;if(Object.keys(T).length===0)return;const L=R.let("missing");for(const F in T){const H=T[F];if(H.length===0)continue;const z=(0,f.propertyInData)(R,I,F,N.opts.ownProperties);C.setParams({property:F,depsCount:H.length,deps:H.join(", ")}),N.allErrors?R.if(z,()=>{for(const U of H)(0,f.checkReportMissingProp)(C,U)}):(R.if((0,n._)`${z} && (${(0,f.checkMissingProp)(C,H,L)})`),(0,f.reportMissingProp)(C,L),R.else())}}s.validatePropertyDeps=A;function w(C,T=C.schema){const{gen:R,data:I,keyword:N,it:L}=C,F=R.name("valid");for(const H in T)(0,u.alwaysValidSchema)(L,T[H])||(R.if((0,f.propertyInData)(R,I,H,L.opts.ownProperties),()=>{const z=C.subschema({keyword:N,schemaProp:H},F);C.mergeValidEvaluated(z,F)},()=>R.var(F,!0)),C.ok(F))}s.validateSchemaDeps=w,s.default=y})(dependencies$1)),dependencies$1}var propertyNames$1={},hasRequiredPropertyNames$1;function requirePropertyNames$1(){if(hasRequiredPropertyNames$1)return propertyNames$1;hasRequiredPropertyNames$1=1,Object.defineProperty(propertyNames$1,"__esModule",{value:!0});const s=requireCodegen$1(),n=requireUtil$1(),u={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:f})=>(0,s._)`{propertyName: ${f.propertyName}}`},code(f){const{gen:y,schema:S,data:A,it:w}=f;if((0,n.alwaysValidSchema)(w,S))return;const C=y.name("valid");y.forIn("key",A,T=>{f.setParams({propertyName:T}),f.subschema({keyword:"propertyNames",data:T,dataTypes:["string"],propertyName:T,compositeRule:!0},C),y.if((0,s.not)(C),()=>{f.error(!0),w.allErrors||y.break()})}),f.ok(C)}};return propertyNames$1.default=u,propertyNames$1}var additionalProperties$2={},hasRequiredAdditionalProperties$1;function requireAdditionalProperties$1(){if(hasRequiredAdditionalProperties$1)return additionalProperties$2;hasRequiredAdditionalProperties$1=1,Object.defineProperty(additionalProperties$2,"__esModule",{value:!0});const s=requireCode$2(),n=requireCodegen$1(),u=requireNames$1(),f=requireUtil$1(),y={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:S})=>(0,n._)`{additionalProperty: ${S.additionalProperty}}`},code(S){const{gen:A,schema:w,parentSchema:C,data:T,errsCount:R,it:I}=S;if(!R)throw new Error("ajv implementation error");const{allErrors:N,opts:L}=I;if(I.props=!0,L.removeAdditional!=="all"&&(0,f.alwaysValidSchema)(I,w))return;const F=(0,s.allSchemaProperties)(C.properties),H=(0,s.allSchemaProperties)(C.patternProperties);z(),S.ok((0,n._)`${R} === ${u.default.errors}`);function z(){A.forIn("key",T,Z=>{!F.length&&!H.length?Y(Z):A.if(U(Z),()=>Y(Z))})}function U(Z){let J;if(F.length>8){const te=(0,f.schemaRefOrVal)(I,C.properties,"properties");J=(0,s.isOwnProperty)(A,te,Z)}else F.length?J=(0,n.or)(...F.map(te=>(0,n._)`${Z} === ${te}`)):J=n.nil;return H.length&&(J=(0,n.or)(J,...H.map(te=>(0,n._)`${(0,s.usePattern)(S,te)}.test(${Z})`))),(0,n.not)(J)}function G(Z){A.code((0,n._)`delete ${T}[${Z}]`)}function Y(Z){if(L.removeAdditional==="all"||L.removeAdditional&&w===!1){G(Z);return}if(w===!1){S.setParams({additionalProperty:Z}),S.error(),N||A.break();return}if(typeof w=="object"&&!(0,f.alwaysValidSchema)(I,w)){const J=A.name("valid");L.removeAdditional==="failing"?(K(Z,J,!1),A.if((0,n.not)(J),()=>{S.reset(),G(Z)})):(K(Z,J),N||A.if((0,n.not)(J),()=>A.break()))}}function K(Z,J,te){const de={keyword:"additionalProperties",dataProp:Z,dataPropType:f.Type.Str};te===!1&&Object.assign(de,{compositeRule:!0,createErrors:!1,allErrors:!1}),S.subschema(de,J)}}};return additionalProperties$2.default=y,additionalProperties$2}var properties$4={},hasRequiredProperties$1;function requireProperties$1(){if(hasRequiredProperties$1)return properties$4;hasRequiredProperties$1=1,Object.defineProperty(properties$4,"__esModule",{value:!0});const s=requireValidate$1(),n=requireCode$2(),u=requireUtil$1(),f=requireAdditionalProperties$1(),y={keyword:"properties",type:"object",schemaType:"object",code(S){const{gen:A,schema:w,parentSchema:C,data:T,it:R}=S;R.opts.removeAdditional==="all"&&C.additionalProperties===void 0&&f.default.code(new s.KeywordCxt(R,f.default,"additionalProperties"));const I=(0,n.allSchemaProperties)(w);for(const z of I)R.definedProperties.add(z);R.opts.unevaluated&&I.length&&R.props!==!0&&(R.props=u.mergeEvaluated.props(A,(0,u.toHash)(I),R.props));const N=I.filter(z=>!(0,u.alwaysValidSchema)(R,w[z]));if(N.length===0)return;const L=A.name("valid");for(const z of N)F(z)?H(z):(A.if((0,n.propertyInData)(A,T,z,R.opts.ownProperties)),H(z),R.allErrors||A.else().var(L,!0),A.endIf()),S.it.definedProperties.add(z),S.ok(L);function F(z){return R.opts.useDefaults&&!R.compositeRule&&w[z].default!==void 0}function H(z){S.subschema({keyword:"properties",schemaProp:z,dataProp:z},L)}}};return properties$4.default=y,properties$4}var patternProperties$1={},hasRequiredPatternProperties$1;function requirePatternProperties$1(){if(hasRequiredPatternProperties$1)return patternProperties$1;hasRequiredPatternProperties$1=1,Object.defineProperty(patternProperties$1,"__esModule",{value:!0});const s=requireCode$2(),n=requireCodegen$1(),u=requireUtil$1(),f=requireUtil$1(),y={keyword:"patternProperties",type:"object",schemaType:"object",code(S){const{gen:A,schema:w,data:C,parentSchema:T,it:R}=S,{opts:I}=R,N=(0,s.allSchemaProperties)(w),L=N.filter(K=>(0,u.alwaysValidSchema)(R,w[K]));if(N.length===0||L.length===N.length&&(!R.opts.unevaluated||R.props===!0))return;const F=I.strictSchema&&!I.allowMatchingProperties&&T.properties,H=A.name("valid");R.props!==!0&&!(R.props instanceof n.Name)&&(R.props=(0,f.evaluatedPropsToName)(A,R.props));const{props:z}=R;U();function U(){for(const K of N)F&&G(K),R.allErrors?Y(K):(A.var(H,!0),Y(K),A.if(H))}function G(K){for(const Z in F)new RegExp(K).test(Z)&&(0,u.checkStrictMode)(R,`property ${Z} matches pattern ${K} (use allowMatchingProperties)`)}function Y(K){A.forIn("key",C,Z=>{A.if((0,n._)`${(0,s.usePattern)(S,K)}.test(${Z})`,()=>{const J=L.includes(K);J||S.subschema({keyword:"patternProperties",schemaProp:K,dataProp:Z,dataPropType:f.Type.Str},H),R.opts.unevaluated&&z!==!0?A.assign((0,n._)`${z}[${Z}]`,!0):!J&&!R.allErrors&&A.if((0,n.not)(H),()=>A.break())})})}}};return patternProperties$1.default=y,patternProperties$1}var not$1={},hasRequiredNot$1;function requireNot$1(){if(hasRequiredNot$1)return not$1;hasRequiredNot$1=1,Object.defineProperty(not$1,"__esModule",{value:!0});const s=requireUtil$1(),n={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(u){const{gen:f,schema:y,it:S}=u;if((0,s.alwaysValidSchema)(S,y)){u.fail();return}const A=f.name("valid");u.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},A),u.failResult(A,()=>u.reset(),()=>u.error())},error:{message:"must NOT be valid"}};return not$1.default=n,not$1}var anyOf$1={},hasRequiredAnyOf$1;function requireAnyOf$1(){if(hasRequiredAnyOf$1)return anyOf$1;hasRequiredAnyOf$1=1,Object.defineProperty(anyOf$1,"__esModule",{value:!0});const s={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:requireCode$2().validateUnion,error:{message:"must match a schema in anyOf"}};return anyOf$1.default=s,anyOf$1}var oneOf$1={},hasRequiredOneOf$1;function requireOneOf$1(){if(hasRequiredOneOf$1)return oneOf$1;hasRequiredOneOf$1=1,Object.defineProperty(oneOf$1,"__esModule",{value:!0});const s=requireCodegen$1(),n=requireUtil$1(),u={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:f})=>(0,s._)`{passingSchemas: ${f.passing}}`},code(f){const{gen:y,schema:S,parentSchema:A,it:w}=f;if(!Array.isArray(S))throw new Error("ajv implementation error");if(w.opts.discriminator&&A.discriminator)return;const C=S,T=y.let("valid",!1),R=y.let("passing",null),I=y.name("_valid");f.setParams({passing:R}),y.block(N),f.result(T,()=>f.reset(),()=>f.error(!0));function N(){C.forEach((L,F)=>{let H;(0,n.alwaysValidSchema)(w,L)?y.var(I,!0):H=f.subschema({keyword:"oneOf",schemaProp:F,compositeRule:!0},I),F>0&&y.if((0,s._)`${I} && ${T}`).assign(T,!1).assign(R,(0,s._)`[${R}, ${F}]`).else(),y.if(I,()=>{y.assign(T,!0),y.assign(R,F),H&&f.mergeEvaluated(H,s.Name)})})}}};return oneOf$1.default=u,oneOf$1}var allOf$1={},hasRequiredAllOf$1;function requireAllOf$1(){if(hasRequiredAllOf$1)return allOf$1;hasRequiredAllOf$1=1,Object.defineProperty(allOf$1,"__esModule",{value:!0});const s=requireUtil$1(),n={keyword:"allOf",schemaType:"array",code(u){const{gen:f,schema:y,it:S}=u;if(!Array.isArray(y))throw new Error("ajv implementation error");const A=f.name("valid");y.forEach((w,C)=>{if((0,s.alwaysValidSchema)(S,w))return;const T=u.subschema({keyword:"allOf",schemaProp:C},A);u.ok(A),u.mergeEvaluated(T)})}};return allOf$1.default=n,allOf$1}var _if$1={},hasRequired_if$1;function require_if$1(){if(hasRequired_if$1)return _if$1;hasRequired_if$1=1,Object.defineProperty(_if$1,"__esModule",{value:!0});const s=requireCodegen$1(),n=requireUtil$1(),u={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:y})=>(0,s.str)`must match "${y.ifClause}" schema`,params:({params:y})=>(0,s._)`{failingKeyword: ${y.ifClause}}`},code(y){const{gen:S,parentSchema:A,it:w}=y;A.then===void 0&&A.else===void 0&&(0,n.checkStrictMode)(w,'"if" without "then" and "else" is ignored');const C=f(w,"then"),T=f(w,"else");if(!C&&!T)return;const R=S.let("valid",!0),I=S.name("_valid");if(N(),y.reset(),C&&T){const F=S.let("ifClause");y.setParams({ifClause:F}),S.if(I,L("then",F),L("else",F))}else C?S.if(I,L("then")):S.if((0,s.not)(I),L("else"));y.pass(R,()=>y.error(!0));function N(){const F=y.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},I);y.mergeEvaluated(F)}function L(F,H){return()=>{const z=y.subschema({keyword:F},I);S.assign(R,I),y.mergeValidEvaluated(z,R),H?S.assign(H,(0,s._)`${F}`):y.setParams({ifClause:F})}}}};function f(y,S){const A=y.schema[S];return A!==void 0&&!(0,n.alwaysValidSchema)(y,A)}return _if$1.default=u,_if$1}var thenElse$1={},hasRequiredThenElse$1;function requireThenElse$1(){if(hasRequiredThenElse$1)return thenElse$1;hasRequiredThenElse$1=1,Object.defineProperty(thenElse$1,"__esModule",{value:!0});const s=requireUtil$1(),n={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:u,parentSchema:f,it:y}){f.if===void 0&&(0,s.checkStrictMode)(y,`"${u}" without "if" is ignored`)}};return thenElse$1.default=n,thenElse$1}var hasRequiredApplicator$1;function requireApplicator$1(){if(hasRequiredApplicator$1)return applicator$1;hasRequiredApplicator$1=1,Object.defineProperty(applicator$1,"__esModule",{value:!0});const s=requireAdditionalItems$1(),n=requirePrefixItems$1(),u=requireItems$1(),f=requireItems2020$1(),y=requireContains$1(),S=requireDependencies$1(),A=requirePropertyNames$1(),w=requireAdditionalProperties$1(),C=requireProperties$1(),T=requirePatternProperties$1(),R=requireNot$1(),I=requireAnyOf$1(),N=requireOneOf$1(),L=requireAllOf$1(),F=require_if$1(),H=requireThenElse$1();function z(U=!1){const G=[R.default,I.default,N.default,L.default,F.default,H.default,A.default,w.default,S.default,C.default,T.default];return U?G.push(n.default,f.default):G.push(s.default,u.default),G.push(y.default),G}return applicator$1.default=z,applicator$1}var format$3={},format$2={},hasRequiredFormat$3;function requireFormat$3(){if(hasRequiredFormat$3)return format$2;hasRequiredFormat$3=1,Object.defineProperty(format$2,"__esModule",{value:!0});const s=requireCodegen$1(),n={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:u})=>(0,s.str)`must match format "${u}"`,params:({schemaCode:u})=>(0,s._)`{format: ${u}}`},code(u,f){const{gen:y,data:S,$data:A,schema:w,schemaCode:C,it:T}=u,{opts:R,errSchemaPath:I,schemaEnv:N,self:L}=T;if(!R.validateFormats)return;A?F():H();function F(){const z=y.scopeValue("formats",{ref:L.formats,code:R.code.formats}),U=y.const("fDef",(0,s._)`${z}[${C}]`),G=y.let("fType"),Y=y.let("format");y.if((0,s._)`typeof ${U} == "object" && !(${U} instanceof RegExp)`,()=>y.assign(G,(0,s._)`${U}.type || "string"`).assign(Y,(0,s._)`${U}.validate`),()=>y.assign(G,(0,s._)`"string"`).assign(Y,U)),u.fail$data((0,s.or)(K(),Z()));function K(){return R.strictSchema===!1?s.nil:(0,s._)`${C} && !${Y}`}function Z(){const J=N.$async?(0,s._)`(${U}.async ? await ${Y}(${S}) : ${Y}(${S}))`:(0,s._)`${Y}(${S})`,te=(0,s._)`(typeof ${Y} == "function" ? ${J} : ${Y}.test(${S}))`;return(0,s._)`${Y} && ${Y} !== true && ${G} === ${f} && !${te}`}}function H(){const z=L.formats[w];if(!z){K();return}if(z===!0)return;const[U,G,Y]=Z(z);U===f&&u.pass(J());function K(){if(R.strictSchema===!1){L.logger.warn(te());return}throw new Error(te());function te(){return`unknown format "${w}" ignored in schema at path "${I}"`}}function Z(te){const de=te instanceof RegExp?(0,s.regexpCode)(te):R.code.formats?(0,s._)`${R.code.formats}${(0,s.getProperty)(w)}`:void 0,se=y.scopeValue("formats",{key:w,ref:te,code:de});return typeof te=="object"&&!(te instanceof RegExp)?[te.type||"string",te.validate,(0,s._)`${se}.validate`]:["string",te,se]}function J(){if(typeof z=="object"&&!(z instanceof RegExp)&&z.async){if(!N.$async)throw new Error("async format in sync schema");return(0,s._)`await ${Y}(${S})`}return typeof G=="function"?(0,s._)`${Y}(${S})`:(0,s._)`${Y}.test(${S})`}}}};return format$2.default=n,format$2}var hasRequiredFormat$2;function requireFormat$2(){if(hasRequiredFormat$2)return format$3;hasRequiredFormat$2=1,Object.defineProperty(format$3,"__esModule",{value:!0});const s=[requireFormat$3().default];return format$3.default=s,format$3}var metadata$1={},hasRequiredMetadata$1;function requireMetadata$1(){return hasRequiredMetadata$1||(hasRequiredMetadata$1=1,Object.defineProperty(metadata$1,"__esModule",{value:!0}),metadata$1.contentVocabulary=metadata$1.metadataVocabulary=void 0,metadata$1.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],metadata$1.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]),metadata$1}var hasRequiredDraft7$1;function requireDraft7$1(){if(hasRequiredDraft7$1)return draft7$1;hasRequiredDraft7$1=1,Object.defineProperty(draft7$1,"__esModule",{value:!0});const s=requireCore$2(),n=requireValidation$1(),u=requireApplicator$1(),f=requireFormat$2(),y=requireMetadata$1(),S=[s.default,n.default,(0,u.default)(),f.default,y.metadataVocabulary,y.contentVocabulary];return draft7$1.default=S,draft7$1}var discriminator$1={},types$1={},hasRequiredTypes$1;function requireTypes$1(){if(hasRequiredTypes$1)return types$1;hasRequiredTypes$1=1,Object.defineProperty(types$1,"__esModule",{value:!0}),types$1.DiscrError=void 0;var s;return(function(n){n.Tag="tag",n.Mapping="mapping"})(s||(types$1.DiscrError=s={})),types$1}var hasRequiredDiscriminator$1;function requireDiscriminator$1(){if(hasRequiredDiscriminator$1)return discriminator$1;hasRequiredDiscriminator$1=1,Object.defineProperty(discriminator$1,"__esModule",{value:!0});const s=requireCodegen$1(),n=requireTypes$1(),u=requireCompile$1(),f=requireRef_error$1(),y=requireUtil$1(),S={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:A,tagName:w}})=>A===n.DiscrError.Tag?`tag "${w}" must be string`:`value of tag "${w}" must be in oneOf`,params:({params:{discrError:A,tag:w,tagName:C}})=>(0,s._)`{error: ${A}, tag: ${C}, tagValue: ${w}}`},code(A){const{gen:w,data:C,schema:T,parentSchema:R,it:I}=A,{oneOf:N}=R;if(!I.opts.discriminator)throw new Error("discriminator: requires discriminator option");const L=T.propertyName;if(typeof L!="string")throw new Error("discriminator: requires propertyName");if(T.mapping)throw new Error("discriminator: mapping is not supported");if(!N)throw new Error("discriminator: requires oneOf keyword");const F=w.let("valid",!1),H=w.const("tag",(0,s._)`${C}${(0,s.getProperty)(L)}`);w.if((0,s._)`typeof ${H} == "string"`,()=>z(),()=>A.error(!1,{discrError:n.DiscrError.Tag,tag:H,tagName:L})),A.ok(F);function z(){const Y=G();w.if(!1);for(const K in Y)w.elseIf((0,s._)`${H} === ${K}`),w.assign(F,U(Y[K]));w.else(),A.error(!1,{discrError:n.DiscrError.Mapping,tag:H,tagName:L}),w.endIf()}function U(Y){const K=w.name("valid"),Z=A.subschema({keyword:"oneOf",schemaProp:Y},K);return A.mergeEvaluated(Z,s.Name),K}function G(){var Y;const K={},Z=te(R);let J=!0;for(let ne=0;ne<N.length;ne++){let ge=N[ne];if(ge?.$ref&&!(0,y.schemaHasRulesButRef)(ge,I.self.RULES)){const we=ge.$ref;if(ge=u.resolveRef.call(I.self,I.schemaEnv.root,I.baseId,we),ge instanceof u.SchemaEnv&&(ge=ge.schema),ge===void 0)throw new f.default(I.opts.uriResolver,I.baseId,we)}const Ee=(Y=ge?.properties)===null||Y===void 0?void 0:Y[L];if(typeof Ee!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${L}"`);J=J&&(Z||te(ge)),de(Ee,ne)}if(!J)throw new Error(`discriminator: "${L}" must be required`);return K;function te({required:ne}){return Array.isArray(ne)&&ne.includes(L)}function de(ne,ge){if(ne.const)se(ne.const,ge);else if(ne.enum)for(const Ee of ne.enum)se(Ee,ge);else throw new Error(`discriminator: "properties/${L}" must have "const" or "enum"`)}function se(ne,ge){if(typeof ne!="string"||ne in K)throw new Error(`discriminator: "${L}" values must be unique strings`);K[ne]=ge}}}};return discriminator$1.default=S,discriminator$1}const $schema$1="http://json-schema.org/draft-07/schema#",$id$2="http://json-schema.org/draft-07/schema#",title$1="Core schema meta-schema",definitions$1={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type$2=["object","boolean"],properties$3={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},require$$3$1={$schema:$schema$1,$id:$id$2,title:title$1,definitions:definitions$1,type:type$2,properties:properties$3,default:!0};var hasRequiredAjv$1;function requireAjv$1(){return hasRequiredAjv$1||(hasRequiredAjv$1=1,(function(s,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MissingRefError=n.ValidationError=n.CodeGen=n.Name=n.nil=n.stringify=n.str=n._=n.KeywordCxt=n.Ajv=void 0;const u=requireCore$3(),f=requireDraft7$1(),y=requireDiscriminator$1(),S=require$$3$1,A=["/properties"],w="http://json-schema.org/draft-07/schema";class C extends u.default{_addVocabularies(){super._addVocabularies(),f.default.forEach(F=>this.addVocabulary(F)),this.opts.discriminator&&this.addKeyword(y.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const F=this.opts.$data?this.$dataMetaSchema(S,A):S;this.addMetaSchema(F,w,!1),this.refs["http://json-schema.org/schema"]=w}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(w)?w:void 0)}}n.Ajv=C,s.exports=n=C,s.exports.Ajv=C,Object.defineProperty(n,"__esModule",{value:!0}),n.default=C;var T=requireValidate$1();Object.defineProperty(n,"KeywordCxt",{enumerable:!0,get:function(){return T.KeywordCxt}});var R=requireCodegen$1();Object.defineProperty(n,"_",{enumerable:!0,get:function(){return R._}}),Object.defineProperty(n,"str",{enumerable:!0,get:function(){return R.str}}),Object.defineProperty(n,"stringify",{enumerable:!0,get:function(){return R.stringify}}),Object.defineProperty(n,"nil",{enumerable:!0,get:function(){return R.nil}}),Object.defineProperty(n,"Name",{enumerable:!0,get:function(){return R.Name}}),Object.defineProperty(n,"CodeGen",{enumerable:!0,get:function(){return R.CodeGen}});var I=requireValidation_error$1();Object.defineProperty(n,"ValidationError",{enumerable:!0,get:function(){return I.default}});var N=requireRef_error$1();Object.defineProperty(n,"MissingRefError",{enumerable:!0,get:function(){return N.default}})})(ajv$1,ajv$1.exports)),ajv$1.exports}var ajvExports=requireAjv$1();const Ajv=getDefaultExportFromCjs(ajvExports);var dist={exports:{}},formats={},hasRequiredFormats;function requireFormats(){return hasRequiredFormats||(hasRequiredFormats=1,(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.formatNames=s.fastFormats=s.fullFormats=void 0;function n(ge,Ee){return{validate:ge,compare:Ee}}s.fullFormats={date:n(S,A),time:n(C(!0),T),"date-time":n(N(!0),L),"iso-time":n(C(),R),"iso-date-time":n(N(),F),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:U,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:ne,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:Y,int32:{type:"number",validate:J},int64:{type:"number",validate:te},float:{type:"number",validate:de},double:{type:"number",validate:de},password:!0,binary:!0},s.fastFormats={...s.fullFormats,date:n(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,A),time:n(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,T),"date-time":n(/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,L),"iso-time":n(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,R),"iso-date-time":n(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,F),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i},s.formatNames=Object.keys(s.fullFormats);function u(ge){return ge%4===0&&(ge%100!==0||ge%400===0)}const f=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,y=[0,31,28,31,30,31,30,31,31,30,31,30,31];function S(ge){const Ee=f.exec(ge);if(!Ee)return!1;const we=+Ee[1],Ie=+Ee[2],Be=+Ee[3];return Ie>=1&&Ie<=12&&Be>=1&&Be<=(Ie===2&&u(we)?29:y[Ie])}function A(ge,Ee){if(ge&&Ee)return ge>Ee?1:ge<Ee?-1:0}const w=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function C(ge){return function(Ee){const we=w.exec(Ee);if(!we)return!1;const Ie=+we[1],Be=+we[2],Me=+we[3],Re=we[4],Te=we[5]==="-"?-1:1,Se=+(we[6]||0),oe=+(we[7]||0);if(Se>23||oe>59||ge&&!Re)return!1;if(Ie<=23&&Be<=59&&Me<60)return!0;const ae=Be-oe*Te,be=Ie-Se*Te-(ae<0?1:0);return(be===23||be===-1)&&(ae===59||ae===-1)&&Me<61}}function T(ge,Ee){if(!(ge&&Ee))return;const we=new Date("2020-01-01T"+ge).valueOf(),Ie=new Date("2020-01-01T"+Ee).valueOf();if(we&&Ie)return we-Ie}function R(ge,Ee){if(!(ge&&Ee))return;const we=w.exec(ge),Ie=w.exec(Ee);if(we&&Ie)return ge=we[1]+we[2]+we[3],Ee=Ie[1]+Ie[2]+Ie[3],ge>Ee?1:ge<Ee?-1:0}const I=/t|\s/i;function N(ge){const Ee=C(ge);return function(we){const Ie=we.split(I);return Ie.length===2&&S(Ie[0])&&Ee(Ie[1])}}function L(ge,Ee){if(!(ge&&Ee))return;const we=new Date(ge).valueOf(),Ie=new Date(Ee).valueOf();if(we&&Ie)return we-Ie}function F(ge,Ee){if(!(ge&&Ee))return;const[we,Ie]=ge.split(I),[Be,Me]=Ee.split(I),Re=A(we,Be);if(Re!==void 0)return Re||T(Ie,Me)}const H=/\/|:/,z=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function U(ge){return H.test(ge)&&z.test(ge)}const G=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function Y(ge){return G.lastIndex=0,G.test(ge)}const K=-2147483648,Z=2**31-1;function J(ge){return Number.isInteger(ge)&&ge<=Z&&ge>=K}function te(ge){return Number.isInteger(ge)}function de(){return!0}const se=/[^\\]\\Z/;function ne(ge){if(se.test(ge))return!1;try{return new RegExp(ge),!0}catch{return!1}}})(formats)),formats}var limit={},ajv={exports:{}},core$1={},validate={},boolSchema={},errors={},codegen={},code$1={},hasRequiredCode$1;function requireCode$1(){return hasRequiredCode$1||(hasRequiredCode$1=1,(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.regexpCode=s.getEsmExportName=s.getProperty=s.safeStringify=s.stringify=s.strConcat=s.addCodeArg=s.str=s._=s.nil=s._Code=s.Name=s.IDENTIFIER=s._CodeOrName=void 0;class n{}s._CodeOrName=n,s.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class u extends n{constructor(G){if(super(),!s.IDENTIFIER.test(G))throw new Error("CodeGen: name must be a valid identifier");this.str=G}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}s.Name=u;class f extends n{constructor(G){super(),this._items=typeof G=="string"?[G]:G}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const G=this._items[0];return G===""||G==='""'}get str(){var G;return(G=this._str)!==null&&G!==void 0?G:this._str=this._items.reduce((Y,K)=>`${Y}${K}`,"")}get names(){var G;return(G=this._names)!==null&&G!==void 0?G:this._names=this._items.reduce((Y,K)=>(K instanceof u&&(Y[K.str]=(Y[K.str]||0)+1),Y),{})}}s._Code=f,s.nil=new f("");function y(U,...G){const Y=[U[0]];let K=0;for(;K<G.length;)w(Y,G[K]),Y.push(U[++K]);return new f(Y)}s._=y;const S=new f("+");function A(U,...G){const Y=[L(U[0])];let K=0;for(;K<G.length;)Y.push(S),w(Y,G[K]),Y.push(S,L(U[++K]));return C(Y),new f(Y)}s.str=A;function w(U,G){G instanceof f?U.push(...G._items):G instanceof u?U.push(G):U.push(I(G))}s.addCodeArg=w;function C(U){let G=1;for(;G<U.length-1;){if(U[G]===S){const Y=T(U[G-1],U[G+1]);if(Y!==void 0){U.splice(G-1,3,Y);continue}U[G++]="+"}G++}}function T(U,G){if(G==='""')return U;if(U==='""')return G;if(typeof U=="string")return G instanceof u||U[U.length-1]!=='"'?void 0:typeof G!="string"?`${U.slice(0,-1)}${G}"`:G[0]==='"'?U.slice(0,-1)+G.slice(1):void 0;if(typeof G=="string"&&G[0]==='"'&&!(U instanceof u))return`"${U}${G.slice(1)}`}function R(U,G){return G.emptyStr()?U:U.emptyStr()?G:A`${U}${G}`}s.strConcat=R;function I(U){return typeof U=="number"||typeof U=="boolean"||U===null?U:L(Array.isArray(U)?U.join(","):U)}function N(U){return new f(L(U))}s.stringify=N;function L(U){return JSON.stringify(U).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}s.safeStringify=L;function F(U){return typeof U=="string"&&s.IDENTIFIER.test(U)?new f(`.${U}`):y`[${U}]`}s.getProperty=F;function H(U){if(typeof U=="string"&&s.IDENTIFIER.test(U))return new f(`${U}`);throw new Error(`CodeGen: invalid export name: ${U}, use explicit $id name mapping`)}s.getEsmExportName=H;function z(U){return new f(U.toString())}s.regexpCode=z})(code$1)),code$1}var scope={},hasRequiredScope;function requireScope(){return hasRequiredScope||(hasRequiredScope=1,(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.ValueScope=s.ValueScopeName=s.Scope=s.varKinds=s.UsedValueState=void 0;const n=requireCode$1();class u extends Error{constructor(T){super(`CodeGen: "code" for ${T} not defined`),this.value=T.value}}var f;(function(C){C[C.Started=0]="Started",C[C.Completed=1]="Completed"})(f||(s.UsedValueState=f={})),s.varKinds={const:new n.Name("const"),let:new n.Name("let"),var:new n.Name("var")};class y{constructor({prefixes:T,parent:R}={}){this._names={},this._prefixes=T,this._parent=R}toName(T){return T instanceof n.Name?T:this.name(T)}name(T){return new n.Name(this._newName(T))}_newName(T){const R=this._names[T]||this._nameGroup(T);return`${T}${R.index++}`}_nameGroup(T){var R,I;if(!((I=(R=this._parent)===null||R===void 0?void 0:R._prefixes)===null||I===void 0)&&I.has(T)||this._prefixes&&!this._prefixes.has(T))throw new Error(`CodeGen: prefix "${T}" is not allowed in this scope`);return this._names[T]={prefix:T,index:0}}}s.Scope=y;class S extends n.Name{constructor(T,R){super(R),this.prefix=T}setValue(T,{property:R,itemIndex:I}){this.value=T,this.scopePath=(0,n._)`.${new n.Name(R)}[${I}]`}}s.ValueScopeName=S;const A=(0,n._)`\n`;class w extends y{constructor(T){super(T),this._values={},this._scope=T.scope,this.opts={...T,_n:T.lines?A:n.nil}}get(){return this._scope}name(T){return new S(T,this._newName(T))}value(T,R){var I;if(R.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const N=this.toName(T),{prefix:L}=N,F=(I=R.key)!==null&&I!==void 0?I:R.ref;let H=this._values[L];if(H){const G=H.get(F);if(G)return G}else H=this._values[L]=new Map;H.set(F,N);const z=this._scope[L]||(this._scope[L]=[]),U=z.length;return z[U]=R.ref,N.setValue(R,{property:L,itemIndex:U}),N}getValue(T,R){const I=this._values[T];if(I)return I.get(R)}scopeRefs(T,R=this._values){return this._reduceValues(R,I=>{if(I.scopePath===void 0)throw new Error(`CodeGen: name "${I}" has no value`);return(0,n._)`${T}${I.scopePath}`})}scopeCode(T=this._values,R,I){return this._reduceValues(T,N=>{if(N.value===void 0)throw new Error(`CodeGen: name "${N}" has no value`);return N.value.code},R,I)}_reduceValues(T,R,I={},N){let L=n.nil;for(const F in T){const H=T[F];if(!H)continue;const z=I[F]=I[F]||new Map;H.forEach(U=>{if(z.has(U))return;z.set(U,f.Started);let G=R(U);if(G){const Y=this.opts.es5?s.varKinds.var:s.varKinds.const;L=(0,n._)`${L}${Y} ${U} = ${G};${this.opts._n}`}else if(G=N?.(U))L=(0,n._)`${L}${G}${this.opts._n}`;else throw new u(U);z.set(U,f.Completed)})}return L}}s.ValueScope=w})(scope)),scope}var hasRequiredCodegen;function requireCodegen(){return hasRequiredCodegen||(hasRequiredCodegen=1,(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.or=s.and=s.not=s.CodeGen=s.operators=s.varKinds=s.ValueScopeName=s.ValueScope=s.Scope=s.Name=s.regexpCode=s.stringify=s.getProperty=s.nil=s.strConcat=s.str=s._=void 0;const n=requireCode$1(),u=requireScope();var f=requireCode$1();Object.defineProperty(s,"_",{enumerable:!0,get:function(){return f._}}),Object.defineProperty(s,"str",{enumerable:!0,get:function(){return f.str}}),Object.defineProperty(s,"strConcat",{enumerable:!0,get:function(){return f.strConcat}}),Object.defineProperty(s,"nil",{enumerable:!0,get:function(){return f.nil}}),Object.defineProperty(s,"getProperty",{enumerable:!0,get:function(){return f.getProperty}}),Object.defineProperty(s,"stringify",{enumerable:!0,get:function(){return f.stringify}}),Object.defineProperty(s,"regexpCode",{enumerable:!0,get:function(){return f.regexpCode}}),Object.defineProperty(s,"Name",{enumerable:!0,get:function(){return f.Name}});var y=requireScope();Object.defineProperty(s,"Scope",{enumerable:!0,get:function(){return y.Scope}}),Object.defineProperty(s,"ValueScope",{enumerable:!0,get:function(){return y.ValueScope}}),Object.defineProperty(s,"ValueScopeName",{enumerable:!0,get:function(){return y.ValueScopeName}}),Object.defineProperty(s,"varKinds",{enumerable:!0,get:function(){return y.varKinds}}),s.operators={GT:new n._Code(">"),GTE:new n._Code(">="),LT:new n._Code("<"),LTE:new n._Code("<="),EQ:new n._Code("==="),NEQ:new n._Code("!=="),NOT:new n._Code("!"),OR:new n._Code("||"),AND:new n._Code("&&"),ADD:new n._Code("+")};class S{optimizeNodes(){return this}optimizeNames(ue,ye){return this}}class A extends S{constructor(ue,ye,ce){super(),this.varKind=ue,this.name=ye,this.rhs=ce}render({es5:ue,_n:ye}){const ce=ue?u.varKinds.var:this.varKind,_e=this.rhs===void 0?"":` = ${this.rhs}`;return`${ce} ${this.name}${_e};`+ye}optimizeNames(ue,ye){if(ue[this.name.str])return this.rhs&&(this.rhs=Ie(this.rhs,ue,ye)),this}get names(){return this.rhs instanceof n._CodeOrName?this.rhs.names:{}}}class w extends S{constructor(ue,ye,ce){super(),this.lhs=ue,this.rhs=ye,this.sideEffects=ce}render({_n:ue}){return`${this.lhs} = ${this.rhs};`+ue}optimizeNames(ue,ye){if(!(this.lhs instanceof n.Name&&!ue[this.lhs.str]&&!this.sideEffects))return this.rhs=Ie(this.rhs,ue,ye),this}get names(){const ue=this.lhs instanceof n.Name?{}:{...this.lhs.names};return we(ue,this.rhs)}}class C extends w{constructor(ue,ye,ce,_e){super(ue,ce,_e),this.op=ye}render({_n:ue}){return`${this.lhs} ${this.op}= ${this.rhs};`+ue}}class T extends S{constructor(ue){super(),this.label=ue,this.names={}}render({_n:ue}){return`${this.label}:`+ue}}class R extends S{constructor(ue){super(),this.label=ue,this.names={}}render({_n:ue}){return`break${this.label?` ${this.label}`:""};`+ue}}class I extends S{constructor(ue){super(),this.error=ue}render({_n:ue}){return`throw ${this.error};`+ue}get names(){return this.error.names}}class N extends S{constructor(ue){super(),this.code=ue}render({_n:ue}){return`${this.code};`+ue}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(ue,ye){return this.code=Ie(this.code,ue,ye),this}get names(){return this.code instanceof n._CodeOrName?this.code.names:{}}}class L extends S{constructor(ue=[]){super(),this.nodes=ue}render(ue){return this.nodes.reduce((ye,ce)=>ye+ce.render(ue),"")}optimizeNodes(){const{nodes:ue}=this;let ye=ue.length;for(;ye--;){const ce=ue[ye].optimizeNodes();Array.isArray(ce)?ue.splice(ye,1,...ce):ce?ue[ye]=ce:ue.splice(ye,1)}return ue.length>0?this:void 0}optimizeNames(ue,ye){const{nodes:ce}=this;let _e=ce.length;for(;_e--;){const ke=ce[_e];ke.optimizeNames(ue,ye)||(Be(ue,ke.names),ce.splice(_e,1))}return ce.length>0?this:void 0}get names(){return this.nodes.reduce((ue,ye)=>Ee(ue,ye.names),{})}}class F extends L{render(ue){return"{"+ue._n+super.render(ue)+"}"+ue._n}}class H extends L{}class z extends F{}z.kind="else";class U extends F{constructor(ue,ye){super(ye),this.condition=ue}render(ue){let ye=`if(${this.condition})`+super.render(ue);return this.else&&(ye+="else "+this.else.render(ue)),ye}optimizeNodes(){super.optimizeNodes();const ue=this.condition;if(ue===!0)return this.nodes;let ye=this.else;if(ye){const ce=ye.optimizeNodes();ye=this.else=Array.isArray(ce)?new z(ce):ce}if(ye)return ue===!1?ye instanceof U?ye:ye.nodes:this.nodes.length?this:new U(Me(ue),ye instanceof U?[ye]:ye.nodes);if(!(ue===!1||!this.nodes.length))return this}optimizeNames(ue,ye){var ce;if(this.else=(ce=this.else)===null||ce===void 0?void 0:ce.optimizeNames(ue,ye),!!(super.optimizeNames(ue,ye)||this.else))return this.condition=Ie(this.condition,ue,ye),this}get names(){const ue=super.names;return we(ue,this.condition),this.else&&Ee(ue,this.else.names),ue}}U.kind="if";class G extends F{}G.kind="for";class Y extends G{constructor(ue){super(),this.iteration=ue}render(ue){return`for(${this.iteration})`+super.render(ue)}optimizeNames(ue,ye){if(super.optimizeNames(ue,ye))return this.iteration=Ie(this.iteration,ue,ye),this}get names(){return Ee(super.names,this.iteration.names)}}class K extends G{constructor(ue,ye,ce,_e){super(),this.varKind=ue,this.name=ye,this.from=ce,this.to=_e}render(ue){const ye=ue.es5?u.varKinds.var:this.varKind,{name:ce,from:_e,to:ke}=this;return`for(${ye} ${ce}=${_e}; ${ce}<${ke}; ${ce}++)`+super.render(ue)}get names(){const ue=we(super.names,this.from);return we(ue,this.to)}}class Z extends G{constructor(ue,ye,ce,_e){super(),this.loop=ue,this.varKind=ye,this.name=ce,this.iterable=_e}render(ue){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(ue)}optimizeNames(ue,ye){if(super.optimizeNames(ue,ye))return this.iterable=Ie(this.iterable,ue,ye),this}get names(){return Ee(super.names,this.iterable.names)}}class J extends F{constructor(ue,ye,ce){super(),this.name=ue,this.args=ye,this.async=ce}render(ue){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(ue)}}J.kind="func";class te extends L{render(ue){return"return "+super.render(ue)}}te.kind="return";class de extends F{render(ue){let ye="try"+super.render(ue);return this.catch&&(ye+=this.catch.render(ue)),this.finally&&(ye+=this.finally.render(ue)),ye}optimizeNodes(){var ue,ye;return super.optimizeNodes(),(ue=this.catch)===null||ue===void 0||ue.optimizeNodes(),(ye=this.finally)===null||ye===void 0||ye.optimizeNodes(),this}optimizeNames(ue,ye){var ce,_e;return super.optimizeNames(ue,ye),(ce=this.catch)===null||ce===void 0||ce.optimizeNames(ue,ye),(_e=this.finally)===null||_e===void 0||_e.optimizeNames(ue,ye),this}get names(){const ue=super.names;return this.catch&&Ee(ue,this.catch.names),this.finally&&Ee(ue,this.finally.names),ue}}class se extends F{constructor(ue){super(),this.error=ue}render(ue){return`catch(${this.error})`+super.render(ue)}}se.kind="catch";class ne extends F{render(ue){return"finally"+super.render(ue)}}ne.kind="finally";class ge{constructor(ue,ye={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...ye,_n:ye.lines?`
`:""},this._extScope=ue,this._scope=new u.Scope({parent:ue}),this._nodes=[new H]}toString(){return this._root.render(this.opts)}name(ue){return this._scope.name(ue)}scopeName(ue){return this._extScope.name(ue)}scopeValue(ue,ye){const ce=this._extScope.value(ue,ye);return(this._values[ce.prefix]||(this._values[ce.prefix]=new Set)).add(ce),ce}getScopeValue(ue,ye){return this._extScope.getValue(ue,ye)}scopeRefs(ue){return this._extScope.scopeRefs(ue,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(ue,ye,ce,_e){const ke=this._scope.toName(ye);return ce!==void 0&&_e&&(this._constants[ke.str]=ce),this._leafNode(new A(ue,ke,ce)),ke}const(ue,ye,ce){return this._def(u.varKinds.const,ue,ye,ce)}let(ue,ye,ce){return this._def(u.varKinds.let,ue,ye,ce)}var(ue,ye,ce){return this._def(u.varKinds.var,ue,ye,ce)}assign(ue,ye,ce){return this._leafNode(new w(ue,ye,ce))}add(ue,ye){return this._leafNode(new C(ue,s.operators.ADD,ye))}code(ue){return typeof ue=="function"?ue():ue!==n.nil&&this._leafNode(new N(ue)),this}object(...ue){const ye=["{"];for(const[ce,_e]of ue)ye.length>1&&ye.push(","),ye.push(ce),(ce!==_e||this.opts.es5)&&(ye.push(":"),(0,n.addCodeArg)(ye,_e));return ye.push("}"),new n._Code(ye)}if(ue,ye,ce){if(this._blockNode(new U(ue)),ye&&ce)this.code(ye).else().code(ce).endIf();else if(ye)this.code(ye).endIf();else if(ce)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(ue){return this._elseNode(new U(ue))}else(){return this._elseNode(new z)}endIf(){return this._endBlockNode(U,z)}_for(ue,ye){return this._blockNode(ue),ye&&this.code(ye).endFor(),this}for(ue,ye){return this._for(new Y(ue),ye)}forRange(ue,ye,ce,_e,ke=this.opts.es5?u.varKinds.var:u.varKinds.let){const Pe=this._scope.toName(ue);return this._for(new K(ke,Pe,ye,ce),()=>_e(Pe))}forOf(ue,ye,ce,_e=u.varKinds.const){const ke=this._scope.toName(ue);if(this.opts.es5){const Pe=ye instanceof n.Name?ye:this.var("_arr",ye);return this.forRange("_i",0,(0,n._)`${Pe}.length`,$e=>{this.var(ke,(0,n._)`${Pe}[${$e}]`),ce(ke)})}return this._for(new Z("of",_e,ke,ye),()=>ce(ke))}forIn(ue,ye,ce,_e=this.opts.es5?u.varKinds.var:u.varKinds.const){if(this.opts.ownProperties)return this.forOf(ue,(0,n._)`Object.keys(${ye})`,ce);const ke=this._scope.toName(ue);return this._for(new Z("in",_e,ke,ye),()=>ce(ke))}endFor(){return this._endBlockNode(G)}label(ue){return this._leafNode(new T(ue))}break(ue){return this._leafNode(new R(ue))}return(ue){const ye=new te;if(this._blockNode(ye),this.code(ue),ye.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(te)}try(ue,ye,ce){if(!ye&&!ce)throw new Error('CodeGen: "try" without "catch" and "finally"');const _e=new de;if(this._blockNode(_e),this.code(ue),ye){const ke=this.name("e");this._currNode=_e.catch=new se(ke),ye(ke)}return ce&&(this._currNode=_e.finally=new ne,this.code(ce)),this._endBlockNode(se,ne)}throw(ue){return this._leafNode(new I(ue))}block(ue,ye){return this._blockStarts.push(this._nodes.length),ue&&this.code(ue).endBlock(ye),this}endBlock(ue){const ye=this._blockStarts.pop();if(ye===void 0)throw new Error("CodeGen: not in self-balancing block");const ce=this._nodes.length-ye;if(ce<0||ue!==void 0&&ce!==ue)throw new Error(`CodeGen: wrong number of nodes: ${ce} vs ${ue} expected`);return this._nodes.length=ye,this}func(ue,ye=n.nil,ce,_e){return this._blockNode(new J(ue,ye,ce)),_e&&this.code(_e).endFunc(),this}endFunc(){return this._endBlockNode(J)}optimize(ue=1){for(;ue-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(ue){return this._currNode.nodes.push(ue),this}_blockNode(ue){this._currNode.nodes.push(ue),this._nodes.push(ue)}_endBlockNode(ue,ye){const ce=this._currNode;if(ce instanceof ue||ye&&ce instanceof ye)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${ye?`${ue.kind}/${ye.kind}`:ue.kind}"`)}_elseNode(ue){const ye=this._currNode;if(!(ye instanceof U))throw new Error('CodeGen: "else" without "if"');return this._currNode=ye.else=ue,this}get _root(){return this._nodes[0]}get _currNode(){const ue=this._nodes;return ue[ue.length-1]}set _currNode(ue){const ye=this._nodes;ye[ye.length-1]=ue}}s.CodeGen=ge;function Ee(he,ue){for(const ye in ue)he[ye]=(he[ye]||0)+(ue[ye]||0);return he}function we(he,ue){return ue instanceof n._CodeOrName?Ee(he,ue.names):he}function Ie(he,ue,ye){if(he instanceof n.Name)return ce(he);if(!_e(he))return he;return new n._Code(he._items.reduce((ke,Pe)=>(Pe instanceof n.Name&&(Pe=ce(Pe)),Pe instanceof n._Code?ke.push(...Pe._items):ke.push(Pe),ke),[]));function ce(ke){const Pe=ye[ke.str];return Pe===void 0||ue[ke.str]!==1?ke:(delete ue[ke.str],Pe)}function _e(ke){return ke instanceof n._Code&&ke._items.some(Pe=>Pe instanceof n.Name&&ue[Pe.str]===1&&ye[Pe.str]!==void 0)}}function Be(he,ue){for(const ye in ue)he[ye]=(he[ye]||0)-(ue[ye]||0)}function Me(he){return typeof he=="boolean"||typeof he=="number"||he===null?!he:(0,n._)`!${be(he)}`}s.not=Me;const Re=ae(s.operators.AND);function Te(...he){return he.reduce(Re)}s.and=Te;const Se=ae(s.operators.OR);function oe(...he){return he.reduce(Se)}s.or=oe;function ae(he){return(ue,ye)=>ue===n.nil?ye:ye===n.nil?ue:(0,n._)`${be(ue)} ${he} ${be(ye)}`}function be(he){return he instanceof n.Name?he:(0,n._)`(${he})`}})(codegen)),codegen}var util={},hasRequiredUtil;function requireUtil(){if(hasRequiredUtil)return util;hasRequiredUtil=1,Object.defineProperty(util,"__esModule",{value:!0}),util.checkStrictMode=util.getErrorPath=util.Type=util.useFunc=util.setEvaluated=util.evaluatedPropsToName=util.mergeEvaluated=util.eachItem=util.unescapeJsonPointer=util.escapeJsonPointer=util.escapeFragment=util.unescapeFragment=util.schemaRefOrVal=util.schemaHasRulesButRef=util.schemaHasRules=util.checkUnknownRules=util.alwaysValidSchema=util.toHash=void 0;const s=requireCodegen(),n=requireCode$1();function u(Z){const J={};for(const te of Z)J[te]=!0;return J}util.toHash=u;function f(Z,J){return typeof J=="boolean"?J:Object.keys(J).length===0?!0:(y(Z,J),!S(J,Z.self.RULES.all))}util.alwaysValidSchema=f;function y(Z,J=Z.schema){const{opts:te,self:de}=Z;if(!te.strictSchema||typeof J=="boolean")return;const se=de.RULES.keywords;for(const ne in J)se[ne]||K(Z,`unknown keyword: "${ne}"`)}util.checkUnknownRules=y;function S(Z,J){if(typeof Z=="boolean")return!Z;for(const te in Z)if(J[te])return!0;return!1}util.schemaHasRules=S;function A(Z,J){if(typeof Z=="boolean")return!Z;for(const te in Z)if(te!=="$ref"&&J.all[te])return!0;return!1}util.schemaHasRulesButRef=A;function w({topSchemaRef:Z,schemaPath:J},te,de,se){if(!se){if(typeof te=="number"||typeof te=="boolean")return te;if(typeof te=="string")return(0,s._)`${te}`}return(0,s._)`${Z}${J}${(0,s.getProperty)(de)}`}util.schemaRefOrVal=w;function C(Z){return I(decodeURIComponent(Z))}util.unescapeFragment=C;function T(Z){return encodeURIComponent(R(Z))}util.escapeFragment=T;function R(Z){return typeof Z=="number"?`${Z}`:Z.replace(/~/g,"~0").replace(/\//g,"~1")}util.escapeJsonPointer=R;function I(Z){return Z.replace(/~1/g,"/").replace(/~0/g,"~")}util.unescapeJsonPointer=I;function N(Z,J){if(Array.isArray(Z))for(const te of Z)J(te);else J(Z)}util.eachItem=N;function L({mergeNames:Z,mergeToName:J,mergeValues:te,resultToName:de}){return(se,ne,ge,Ee)=>{const we=ge===void 0?ne:ge instanceof s.Name?(ne instanceof s.Name?Z(se,ne,ge):J(se,ne,ge),ge):ne instanceof s.Name?(J(se,ge,ne),ne):te(ne,ge);return Ee===s.Name&&!(we instanceof s.Name)?de(se,we):we}}util.mergeEvaluated={props:L({mergeNames:(Z,J,te)=>Z.if((0,s._)`${te} !== true && ${J} !== undefined`,()=>{Z.if((0,s._)`${J} === true`,()=>Z.assign(te,!0),()=>Z.assign(te,(0,s._)`${te} || {}`).code((0,s._)`Object.assign(${te}, ${J})`))}),mergeToName:(Z,J,te)=>Z.if((0,s._)`${te} !== true`,()=>{J===!0?Z.assign(te,!0):(Z.assign(te,(0,s._)`${te} || {}`),H(Z,te,J))}),mergeValues:(Z,J)=>Z===!0?!0:{...Z,...J},resultToName:F}),items:L({mergeNames:(Z,J,te)=>Z.if((0,s._)`${te} !== true && ${J} !== undefined`,()=>Z.assign(te,(0,s._)`${J} === true ? true : ${te} > ${J} ? ${te} : ${J}`)),mergeToName:(Z,J,te)=>Z.if((0,s._)`${te} !== true`,()=>Z.assign(te,J===!0?!0:(0,s._)`${te} > ${J} ? ${te} : ${J}`)),mergeValues:(Z,J)=>Z===!0?!0:Math.max(Z,J),resultToName:(Z,J)=>Z.var("items",J)})};function F(Z,J){if(J===!0)return Z.var("props",!0);const te=Z.var("props",(0,s._)`{}`);return J!==void 0&&H(Z,te,J),te}util.evaluatedPropsToName=F;function H(Z,J,te){Object.keys(te).forEach(de=>Z.assign((0,s._)`${J}${(0,s.getProperty)(de)}`,!0))}util.setEvaluated=H;const z={};function U(Z,J){return Z.scopeValue("func",{ref:J,code:z[J.code]||(z[J.code]=new n._Code(J.code))})}util.useFunc=U;var G;(function(Z){Z[Z.Num=0]="Num",Z[Z.Str=1]="Str"})(G||(util.Type=G={}));function Y(Z,J,te){if(Z instanceof s.Name){const de=J===G.Num;return te?de?(0,s._)`"[" + ${Z} + "]"`:(0,s._)`"['" + ${Z} + "']"`:de?(0,s._)`"/" + ${Z}`:(0,s._)`"/" + ${Z}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return te?(0,s.getProperty)(Z).toString():"/"+R(Z)}util.getErrorPath=Y;function K(Z,J,te=Z.opts.strictSchema){if(te){if(J=`strict mode: ${J}`,te===!0)throw new Error(J);Z.self.logger.warn(J)}}return util.checkStrictMode=K,util}var names={},hasRequiredNames;function requireNames(){if(hasRequiredNames)return names;hasRequiredNames=1,Object.defineProperty(names,"__esModule",{value:!0});const s=requireCodegen(),n={data:new s.Name("data"),valCxt:new s.Name("valCxt"),instancePath:new s.Name("instancePath"),parentData:new s.Name("parentData"),parentDataProperty:new s.Name("parentDataProperty"),rootData:new s.Name("rootData"),dynamicAnchors:new s.Name("dynamicAnchors"),vErrors:new s.Name("vErrors"),errors:new s.Name("errors"),this:new s.Name("this"),self:new s.Name("self"),scope:new s.Name("scope"),json:new s.Name("json"),jsonPos:new s.Name("jsonPos"),jsonLen:new s.Name("jsonLen"),jsonPart:new s.Name("jsonPart")};return names.default=n,names}var hasRequiredErrors;function requireErrors(){return hasRequiredErrors||(hasRequiredErrors=1,(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.extendErrors=s.resetErrorsCount=s.reportExtraError=s.reportError=s.keyword$DataError=s.keywordError=void 0;const n=requireCodegen(),u=requireUtil(),f=requireNames();s.keywordError={message:({keyword:z})=>(0,n.str)`must pass "${z}" keyword validation`},s.keyword$DataError={message:({keyword:z,schemaType:U})=>U?(0,n.str)`"${z}" keyword must be ${U} ($data)`:(0,n.str)`"${z}" keyword is invalid ($data)`};function y(z,U=s.keywordError,G,Y){const{it:K}=z,{gen:Z,compositeRule:J,allErrors:te}=K,de=I(z,U,G);Y??(J||te)?C(Z,de):T(K,(0,n._)`[${de}]`)}s.reportError=y;function S(z,U=s.keywordError,G){const{it:Y}=z,{gen:K,compositeRule:Z,allErrors:J}=Y,te=I(z,U,G);C(K,te),Z||J||T(Y,f.default.vErrors)}s.reportExtraError=S;function A(z,U){z.assign(f.default.errors,U),z.if((0,n._)`${f.default.vErrors} !== null`,()=>z.if(U,()=>z.assign((0,n._)`${f.default.vErrors}.length`,U),()=>z.assign(f.default.vErrors,null)))}s.resetErrorsCount=A;function w({gen:z,keyword:U,schemaValue:G,data:Y,errsCount:K,it:Z}){if(K===void 0)throw new Error("ajv implementation error");const J=z.name("err");z.forRange("i",K,f.default.errors,te=>{z.const(J,(0,n._)`${f.default.vErrors}[${te}]`),z.if((0,n._)`${J}.instancePath === undefined`,()=>z.assign((0,n._)`${J}.instancePath`,(0,n.strConcat)(f.default.instancePath,Z.errorPath))),z.assign((0,n._)`${J}.schemaPath`,(0,n.str)`${Z.errSchemaPath}/${U}`),Z.opts.verbose&&(z.assign((0,n._)`${J}.schema`,G),z.assign((0,n._)`${J}.data`,Y))})}s.extendErrors=w;function C(z,U){const G=z.const("err",U);z.if((0,n._)`${f.default.vErrors} === null`,()=>z.assign(f.default.vErrors,(0,n._)`[${G}]`),(0,n._)`${f.default.vErrors}.push(${G})`),z.code((0,n._)`${f.default.errors}++`)}function T(z,U){const{gen:G,validateName:Y,schemaEnv:K}=z;K.$async?G.throw((0,n._)`new ${z.ValidationError}(${U})`):(G.assign((0,n._)`${Y}.errors`,U),G.return(!1))}const R={keyword:new n.Name("keyword"),schemaPath:new n.Name("schemaPath"),params:new n.Name("params"),propertyName:new n.Name("propertyName"),message:new n.Name("message"),schema:new n.Name("schema"),parentSchema:new n.Name("parentSchema")};function I(z,U,G){const{createErrors:Y}=z.it;return Y===!1?(0,n._)`{}`:N(z,U,G)}function N(z,U,G={}){const{gen:Y,it:K}=z,Z=[L(K,G),F(z,G)];return H(z,U,Z),Y.object(...Z)}function L({errorPath:z},{instancePath:U}){const G=U?(0,n.str)`${z}${(0,u.getErrorPath)(U,u.Type.Str)}`:z;return[f.default.instancePath,(0,n.strConcat)(f.default.instancePath,G)]}function F({keyword:z,it:{errSchemaPath:U}},{schemaPath:G,parentSchema:Y}){let K=Y?U:(0,n.str)`${U}/${z}`;return G&&(K=(0,n.str)`${K}${(0,u.getErrorPath)(G,u.Type.Str)}`),[R.schemaPath,K]}function H(z,{params:U,message:G},Y){const{keyword:K,data:Z,schemaValue:J,it:te}=z,{opts:de,propertyName:se,topSchemaRef:ne,schemaPath:ge}=te;Y.push([R.keyword,K],[R.params,typeof U=="function"?U(z):U||(0,n._)`{}`]),de.messages&&Y.push([R.message,typeof G=="function"?G(z):G]),de.verbose&&Y.push([R.schema,J],[R.parentSchema,(0,n._)`${ne}${ge}`],[f.default.data,Z]),se&&Y.push([R.propertyName,se])}})(errors)),errors}var hasRequiredBoolSchema;function requireBoolSchema(){if(hasRequiredBoolSchema)return boolSchema;hasRequiredBoolSchema=1,Object.defineProperty(boolSchema,"__esModule",{value:!0}),boolSchema.boolOrEmptySchema=boolSchema.topBoolOrEmptySchema=void 0;const s=requireErrors(),n=requireCodegen(),u=requireNames(),f={message:"boolean schema is false"};function y(w){const{gen:C,schema:T,validateName:R}=w;T===!1?A(w,!1):typeof T=="object"&&T.$async===!0?C.return(u.default.data):(C.assign((0,n._)`${R}.errors`,null),C.return(!0))}boolSchema.topBoolOrEmptySchema=y;function S(w,C){const{gen:T,schema:R}=w;R===!1?(T.var(C,!1),A(w)):T.var(C,!0)}boolSchema.boolOrEmptySchema=S;function A(w,C){const{gen:T,data:R}=w,I={gen:T,keyword:"false schema",data:R,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:w};(0,s.reportError)(I,f,void 0,C)}return boolSchema}var dataType={},rules={},hasRequiredRules;function requireRules(){if(hasRequiredRules)return rules;hasRequiredRules=1,Object.defineProperty(rules,"__esModule",{value:!0}),rules.getRules=rules.isJSONType=void 0;const s=["string","number","integer","boolean","null","object","array"],n=new Set(s);function u(y){return typeof y=="string"&&n.has(y)}rules.isJSONType=u;function f(){const y={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...y,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},y.number,y.string,y.array,y.object],post:{rules:[]},all:{},keywords:{}}}return rules.getRules=f,rules}var applicability={},hasRequiredApplicability;function requireApplicability(){if(hasRequiredApplicability)return applicability;hasRequiredApplicability=1,Object.defineProperty(applicability,"__esModule",{value:!0}),applicability.shouldUseRule=applicability.shouldUseGroup=applicability.schemaHasRulesForType=void 0;function s({schema:f,self:y},S){const A=y.RULES.types[S];return A&&A!==!0&&n(f,A)}applicability.schemaHasRulesForType=s;function n(f,y){return y.rules.some(S=>u(f,S))}applicability.shouldUseGroup=n;function u(f,y){var S;return f[y.keyword]!==void 0||((S=y.definition.implements)===null||S===void 0?void 0:S.some(A=>f[A]!==void 0))}return applicability.shouldUseRule=u,applicability}var hasRequiredDataType;function requireDataType(){if(hasRequiredDataType)return dataType;hasRequiredDataType=1,Object.defineProperty(dataType,"__esModule",{value:!0}),dataType.reportTypeError=dataType.checkDataTypes=dataType.checkDataType=dataType.coerceAndCheckDataType=dataType.getJSONTypes=dataType.getSchemaTypes=dataType.DataType=void 0;const s=requireRules(),n=requireApplicability(),u=requireErrors(),f=requireCodegen(),y=requireUtil();var S;(function(G){G[G.Correct=0]="Correct",G[G.Wrong=1]="Wrong"})(S||(dataType.DataType=S={}));function A(G){const Y=w(G.type);if(Y.includes("null")){if(G.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!Y.length&&G.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');G.nullable===!0&&Y.push("null")}return Y}dataType.getSchemaTypes=A;function w(G){const Y=Array.isArray(G)?G:G?[G]:[];if(Y.every(s.isJSONType))return Y;throw new Error("type must be JSONType or JSONType[]: "+Y.join(","))}dataType.getJSONTypes=w;function C(G,Y){const{gen:K,data:Z,opts:J}=G,te=R(Y,J.coerceTypes),de=Y.length>0&&!(te.length===0&&Y.length===1&&(0,n.schemaHasRulesForType)(G,Y[0]));if(de){const se=F(Y,Z,J.strictNumbers,S.Wrong);K.if(se,()=>{te.length?I(G,Y,te):z(G)})}return de}dataType.coerceAndCheckDataType=C;const T=new Set(["string","number","integer","boolean","null"]);function R(G,Y){return Y?G.filter(K=>T.has(K)||Y==="array"&&K==="array"):[]}function I(G,Y,K){const{gen:Z,data:J,opts:te}=G,de=Z.let("dataType",(0,f._)`typeof ${J}`),se=Z.let("coerced",(0,f._)`undefined`);te.coerceTypes==="array"&&Z.if((0,f._)`${de} == 'object' && Array.isArray(${J}) && ${J}.length == 1`,()=>Z.assign(J,(0,f._)`${J}[0]`).assign(de,(0,f._)`typeof ${J}`).if(F(Y,J,te.strictNumbers),()=>Z.assign(se,J))),Z.if((0,f._)`${se} !== undefined`);for(const ge of K)(T.has(ge)||ge==="array"&&te.coerceTypes==="array")&&ne(ge);Z.else(),z(G),Z.endIf(),Z.if((0,f._)`${se} !== undefined`,()=>{Z.assign(J,se),N(G,se)});function ne(ge){switch(ge){case"string":Z.elseIf((0,f._)`${de} == "number" || ${de} == "boolean"`).assign(se,(0,f._)`"" + ${J}`).elseIf((0,f._)`${J} === null`).assign(se,(0,f._)`""`);return;case"number":Z.elseIf((0,f._)`${de} == "boolean" || ${J} === null
              || (${de} == "string" && ${J} && ${J} == +${J})`).assign(se,(0,f._)`+${J}`);return;case"integer":Z.elseIf((0,f._)`${de} === "boolean" || ${J} === null
              || (${de} === "string" && ${J} && ${J} == +${J} && !(${J} % 1))`).assign(se,(0,f._)`+${J}`);return;case"boolean":Z.elseIf((0,f._)`${J} === "false" || ${J} === 0 || ${J} === null`).assign(se,!1).elseIf((0,f._)`${J} === "true" || ${J} === 1`).assign(se,!0);return;case"null":Z.elseIf((0,f._)`${J} === "" || ${J} === 0 || ${J} === false`),Z.assign(se,null);return;case"array":Z.elseIf((0,f._)`${de} === "string" || ${de} === "number"
              || ${de} === "boolean" || ${J} === null`).assign(se,(0,f._)`[${J}]`)}}}function N({gen:G,parentData:Y,parentDataProperty:K},Z){G.if((0,f._)`${Y} !== undefined`,()=>G.assign((0,f._)`${Y}[${K}]`,Z))}function L(G,Y,K,Z=S.Correct){const J=Z===S.Correct?f.operators.EQ:f.operators.NEQ;let te;switch(G){case"null":return(0,f._)`${Y} ${J} null`;case"array":te=(0,f._)`Array.isArray(${Y})`;break;case"object":te=(0,f._)`${Y} && typeof ${Y} == "object" && !Array.isArray(${Y})`;break;case"integer":te=de((0,f._)`!(${Y} % 1) && !isNaN(${Y})`);break;case"number":te=de();break;default:return(0,f._)`typeof ${Y} ${J} ${G}`}return Z===S.Correct?te:(0,f.not)(te);function de(se=f.nil){return(0,f.and)((0,f._)`typeof ${Y} == "number"`,se,K?(0,f._)`isFinite(${Y})`:f.nil)}}dataType.checkDataType=L;function F(G,Y,K,Z){if(G.length===1)return L(G[0],Y,K,Z);let J;const te=(0,y.toHash)(G);if(te.array&&te.object){const de=(0,f._)`typeof ${Y} != "object"`;J=te.null?de:(0,f._)`!${Y} || ${de}`,delete te.null,delete te.array,delete te.object}else J=f.nil;te.number&&delete te.integer;for(const de in te)J=(0,f.and)(J,L(de,Y,K,Z));return J}dataType.checkDataTypes=F;const H={message:({schema:G})=>`must be ${G}`,params:({schema:G,schemaValue:Y})=>typeof G=="string"?(0,f._)`{type: ${G}}`:(0,f._)`{type: ${Y}}`};function z(G){const Y=U(G);(0,u.reportError)(Y,H)}dataType.reportTypeError=z;function U(G){const{gen:Y,data:K,schema:Z}=G,J=(0,y.schemaRefOrVal)(G,Z,"type");return{gen:Y,keyword:"type",data:K,schema:Z.type,schemaCode:J,schemaValue:J,parentSchema:Z,params:{},it:G}}return dataType}var defaults={},hasRequiredDefaults;function requireDefaults(){if(hasRequiredDefaults)return defaults;hasRequiredDefaults=1,Object.defineProperty(defaults,"__esModule",{value:!0}),defaults.assignDefaults=void 0;const s=requireCodegen(),n=requireUtil();function u(y,S){const{properties:A,items:w}=y.schema;if(S==="object"&&A)for(const C in A)f(y,C,A[C].default);else S==="array"&&Array.isArray(w)&&w.forEach((C,T)=>f(y,T,C.default))}defaults.assignDefaults=u;function f(y,S,A){const{gen:w,compositeRule:C,data:T,opts:R}=y;if(A===void 0)return;const I=(0,s._)`${T}${(0,s.getProperty)(S)}`;if(C){(0,n.checkStrictMode)(y,`default is ignored for: ${I}`);return}let N=(0,s._)`${I} === undefined`;R.useDefaults==="empty"&&(N=(0,s._)`${N} || ${I} === null || ${I} === ""`),w.if(N,(0,s._)`${I} = ${(0,s.stringify)(A)}`)}return defaults}var keyword={},code={},hasRequiredCode;function requireCode(){if(hasRequiredCode)return code;hasRequiredCode=1,Object.defineProperty(code,"__esModule",{value:!0}),code.validateUnion=code.validateArray=code.usePattern=code.callValidateCode=code.schemaProperties=code.allSchemaProperties=code.noPropertyInData=code.propertyInData=code.isOwnProperty=code.hasPropFunc=code.reportMissingProp=code.checkMissingProp=code.checkReportMissingProp=void 0;const s=requireCodegen(),n=requireUtil(),u=requireNames(),f=requireUtil();function y(G,Y){const{gen:K,data:Z,it:J}=G;K.if(R(K,Z,Y,J.opts.ownProperties),()=>{G.setParams({missingProperty:(0,s._)`${Y}`},!0),G.error()})}code.checkReportMissingProp=y;function S({gen:G,data:Y,it:{opts:K}},Z,J){return(0,s.or)(...Z.map(te=>(0,s.and)(R(G,Y,te,K.ownProperties),(0,s._)`${J} = ${te}`)))}code.checkMissingProp=S;function A(G,Y){G.setParams({missingProperty:Y},!0),G.error()}code.reportMissingProp=A;function w(G){return G.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,s._)`Object.prototype.hasOwnProperty`})}code.hasPropFunc=w;function C(G,Y,K){return(0,s._)`${w(G)}.call(${Y}, ${K})`}code.isOwnProperty=C;function T(G,Y,K,Z){const J=(0,s._)`${Y}${(0,s.getProperty)(K)} !== undefined`;return Z?(0,s._)`${J} && ${C(G,Y,K)}`:J}code.propertyInData=T;function R(G,Y,K,Z){const J=(0,s._)`${Y}${(0,s.getProperty)(K)} === undefined`;return Z?(0,s.or)(J,(0,s.not)(C(G,Y,K))):J}code.noPropertyInData=R;function I(G){return G?Object.keys(G).filter(Y=>Y!=="__proto__"):[]}code.allSchemaProperties=I;function N(G,Y){return I(Y).filter(K=>!(0,n.alwaysValidSchema)(G,Y[K]))}code.schemaProperties=N;function L({schemaCode:G,data:Y,it:{gen:K,topSchemaRef:Z,schemaPath:J,errorPath:te},it:de},se,ne,ge){const Ee=ge?(0,s._)`${G}, ${Y}, ${Z}${J}`:Y,we=[[u.default.instancePath,(0,s.strConcat)(u.default.instancePath,te)],[u.default.parentData,de.parentData],[u.default.parentDataProperty,de.parentDataProperty],[u.default.rootData,u.default.rootData]];de.opts.dynamicRef&&we.push([u.default.dynamicAnchors,u.default.dynamicAnchors]);const Ie=(0,s._)`${Ee}, ${K.object(...we)}`;return ne!==s.nil?(0,s._)`${se}.call(${ne}, ${Ie})`:(0,s._)`${se}(${Ie})`}code.callValidateCode=L;const F=(0,s._)`new RegExp`;function H({gen:G,it:{opts:Y}},K){const Z=Y.unicodeRegExp?"u":"",{regExp:J}=Y.code,te=J(K,Z);return G.scopeValue("pattern",{key:te.toString(),ref:te,code:(0,s._)`${J.code==="new RegExp"?F:(0,f.useFunc)(G,J)}(${K}, ${Z})`})}code.usePattern=H;function z(G){const{gen:Y,data:K,keyword:Z,it:J}=G,te=Y.name("valid");if(J.allErrors){const se=Y.let("valid",!0);return de(()=>Y.assign(se,!1)),se}return Y.var(te,!0),de(()=>Y.break()),te;function de(se){const ne=Y.const("len",(0,s._)`${K}.length`);Y.forRange("i",0,ne,ge=>{G.subschema({keyword:Z,dataProp:ge,dataPropType:n.Type.Num},te),Y.if((0,s.not)(te),se)})}}code.validateArray=z;function U(G){const{gen:Y,schema:K,keyword:Z,it:J}=G;if(!Array.isArray(K))throw new Error("ajv implementation error");if(K.some(se=>(0,n.alwaysValidSchema)(J,se))&&!J.opts.unevaluated)return;const te=Y.let("valid",!1),de=Y.name("_valid");Y.block(()=>K.forEach((se,ne)=>{const ge=G.subschema({keyword:Z,schemaProp:ne,compositeRule:!0},de);Y.assign(te,(0,s._)`${te} || ${de}`),G.mergeValidEvaluated(ge,de)||Y.if((0,s.not)(te))})),G.result(te,()=>G.reset(),()=>G.error(!0))}return code.validateUnion=U,code}var hasRequiredKeyword;function requireKeyword(){if(hasRequiredKeyword)return keyword;hasRequiredKeyword=1,Object.defineProperty(keyword,"__esModule",{value:!0}),keyword.validateKeywordUsage=keyword.validSchemaType=keyword.funcKeywordCode=keyword.macroKeywordCode=void 0;const s=requireCodegen(),n=requireNames(),u=requireCode(),f=requireErrors();function y(N,L){const{gen:F,keyword:H,schema:z,parentSchema:U,it:G}=N,Y=L.macro.call(G.self,z,U,G),K=T(F,H,Y);G.opts.validateSchema!==!1&&G.self.validateSchema(Y,!0);const Z=F.name("valid");N.subschema({schema:Y,schemaPath:s.nil,errSchemaPath:`${G.errSchemaPath}/${H}`,topSchemaRef:K,compositeRule:!0},Z),N.pass(Z,()=>N.error(!0))}keyword.macroKeywordCode=y;function S(N,L){var F;const{gen:H,keyword:z,schema:U,parentSchema:G,$data:Y,it:K}=N;C(K,L);const Z=!Y&&L.compile?L.compile.call(K.self,U,G,K):L.validate,J=T(H,z,Z),te=H.let("valid");N.block$data(te,de),N.ok((F=L.valid)!==null&&F!==void 0?F:te);function de(){if(L.errors===!1)ge(),L.modifying&&A(N),Ee(()=>N.error());else{const we=L.async?se():ne();L.modifying&&A(N),Ee(()=>w(N,we))}}function se(){const we=H.let("ruleErrs",null);return H.try(()=>ge((0,s._)`await `),Ie=>H.assign(te,!1).if((0,s._)`${Ie} instanceof ${K.ValidationError}`,()=>H.assign(we,(0,s._)`${Ie}.errors`),()=>H.throw(Ie))),we}function ne(){const we=(0,s._)`${J}.errors`;return H.assign(we,null),ge(s.nil),we}function ge(we=L.async?(0,s._)`await `:s.nil){const Ie=K.opts.passContext?n.default.this:n.default.self,Be=!("compile"in L&&!Y||L.schema===!1);H.assign(te,(0,s._)`${we}${(0,u.callValidateCode)(N,J,Ie,Be)}`,L.modifying)}function Ee(we){var Ie;H.if((0,s.not)((Ie=L.valid)!==null&&Ie!==void 0?Ie:te),we)}}keyword.funcKeywordCode=S;function A(N){const{gen:L,data:F,it:H}=N;L.if(H.parentData,()=>L.assign(F,(0,s._)`${H.parentData}[${H.parentDataProperty}]`))}function w(N,L){const{gen:F}=N;F.if((0,s._)`Array.isArray(${L})`,()=>{F.assign(n.default.vErrors,(0,s._)`${n.default.vErrors} === null ? ${L} : ${n.default.vErrors}.concat(${L})`).assign(n.default.errors,(0,s._)`${n.default.vErrors}.length`),(0,f.extendErrors)(N)},()=>N.error())}function C({schemaEnv:N},L){if(L.async&&!N.$async)throw new Error("async keyword in sync schema")}function T(N,L,F){if(F===void 0)throw new Error(`keyword "${L}" failed to compile`);return N.scopeValue("keyword",typeof F=="function"?{ref:F}:{ref:F,code:(0,s.stringify)(F)})}function R(N,L,F=!1){return!L.length||L.some(H=>H==="array"?Array.isArray(N):H==="object"?N&&typeof N=="object"&&!Array.isArray(N):typeof N==H||F&&typeof N>"u")}keyword.validSchemaType=R;function I({schema:N,opts:L,self:F,errSchemaPath:H},z,U){if(Array.isArray(z.keyword)?!z.keyword.includes(U):z.keyword!==U)throw new Error("ajv implementation error");const G=z.dependencies;if(G?.some(Y=>!Object.prototype.hasOwnProperty.call(N,Y)))throw new Error(`parent schema must have dependencies of ${U}: ${G.join(",")}`);if(z.validateSchema&&!z.validateSchema(N[U])){const Y=`keyword "${U}" value is invalid at path "${H}": `+F.errorsText(z.validateSchema.errors);if(L.validateSchema==="log")F.logger.error(Y);else throw new Error(Y)}}return keyword.validateKeywordUsage=I,keyword}var subschema={},hasRequiredSubschema;function requireSubschema(){if(hasRequiredSubschema)return subschema;hasRequiredSubschema=1,Object.defineProperty(subschema,"__esModule",{value:!0}),subschema.extendSubschemaMode=subschema.extendSubschemaData=subschema.getSubschema=void 0;const s=requireCodegen(),n=requireUtil();function u(S,{keyword:A,schemaProp:w,schema:C,schemaPath:T,errSchemaPath:R,topSchemaRef:I}){if(A!==void 0&&C!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(A!==void 0){const N=S.schema[A];return w===void 0?{schema:N,schemaPath:(0,s._)`${S.schemaPath}${(0,s.getProperty)(A)}`,errSchemaPath:`${S.errSchemaPath}/${A}`}:{schema:N[w],schemaPath:(0,s._)`${S.schemaPath}${(0,s.getProperty)(A)}${(0,s.getProperty)(w)}`,errSchemaPath:`${S.errSchemaPath}/${A}/${(0,n.escapeFragment)(w)}`}}if(C!==void 0){if(T===void 0||R===void 0||I===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:C,schemaPath:T,topSchemaRef:I,errSchemaPath:R}}throw new Error('either "keyword" or "schema" must be passed')}subschema.getSubschema=u;function f(S,A,{dataProp:w,dataPropType:C,data:T,dataTypes:R,propertyName:I}){if(T!==void 0&&w!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:N}=A;if(w!==void 0){const{errorPath:F,dataPathArr:H,opts:z}=A,U=N.let("data",(0,s._)`${A.data}${(0,s.getProperty)(w)}`,!0);L(U),S.errorPath=(0,s.str)`${F}${(0,n.getErrorPath)(w,C,z.jsPropertySyntax)}`,S.parentDataProperty=(0,s._)`${w}`,S.dataPathArr=[...H,S.parentDataProperty]}if(T!==void 0){const F=T instanceof s.Name?T:N.let("data",T,!0);L(F),I!==void 0&&(S.propertyName=I)}R&&(S.dataTypes=R);function L(F){S.data=F,S.dataLevel=A.dataLevel+1,S.dataTypes=[],A.definedProperties=new Set,S.parentData=A.data,S.dataNames=[...A.dataNames,F]}}subschema.extendSubschemaData=f;function y(S,{jtdDiscriminator:A,jtdMetadata:w,compositeRule:C,createErrors:T,allErrors:R}){C!==void 0&&(S.compositeRule=C),T!==void 0&&(S.createErrors=T),R!==void 0&&(S.allErrors=R),S.jtdDiscriminator=A,S.jtdMetadata=w}return subschema.extendSubschemaMode=y,subschema}var resolve$2={},jsonSchemaTraverse={exports:{}},hasRequiredJsonSchemaTraverse;function requireJsonSchemaTraverse(){if(hasRequiredJsonSchemaTraverse)return jsonSchemaTraverse.exports;hasRequiredJsonSchemaTraverse=1;var s=jsonSchemaTraverse.exports=function(f,y,S){typeof y=="function"&&(S=y,y={}),S=y.cb||S;var A=typeof S=="function"?S:S.pre||function(){},w=S.post||function(){};n(y,A,w,f,"",f)};s.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},s.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},s.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},s.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function n(f,y,S,A,w,C,T,R,I,N){if(A&&typeof A=="object"&&!Array.isArray(A)){y(A,w,C,T,R,I,N);for(var L in A){var F=A[L];if(Array.isArray(F)){if(L in s.arrayKeywords)for(var H=0;H<F.length;H++)n(f,y,S,F[H],w+"/"+L+"/"+H,C,w,L,A,H)}else if(L in s.propsKeywords){if(F&&typeof F=="object")for(var z in F)n(f,y,S,F[z],w+"/"+L+"/"+u(z),C,w,L,A,z)}else(L in s.keywords||f.allKeys&&!(L in s.skipKeywords))&&n(f,y,S,F,w+"/"+L,C,w,L,A)}S(A,w,C,T,R,I,N)}}function u(f){return f.replace(/~/g,"~0").replace(/\//g,"~1")}return jsonSchemaTraverse.exports}var hasRequiredResolve;function requireResolve(){if(hasRequiredResolve)return resolve$2;hasRequiredResolve=1,Object.defineProperty(resolve$2,"__esModule",{value:!0}),resolve$2.getSchemaRefs=resolve$2.resolveUrl=resolve$2.normalizeId=resolve$2._getFullPath=resolve$2.getFullPath=resolve$2.inlineRef=void 0;const s=requireUtil(),n=requireFastDeepEqual(),u=requireJsonSchemaTraverse(),f=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function y(H,z=!0){return typeof H=="boolean"?!0:z===!0?!A(H):z?w(H)<=z:!1}resolve$2.inlineRef=y;const S=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function A(H){for(const z in H){if(S.has(z))return!0;const U=H[z];if(Array.isArray(U)&&U.some(A)||typeof U=="object"&&A(U))return!0}return!1}function w(H){let z=0;for(const U in H)if(U==="$ref"||(z++,!f.has(U)&&(typeof H[U]=="object"&&(0,s.eachItem)(H[U],G=>z+=w(G)),z===1/0)))return 1/0;return z}function C(H,z="",U){U!==!1&&(z=I(z));const G=H.parse(z);return T(H,G)}resolve$2.getFullPath=C;function T(H,z){return H.serialize(z).split("#")[0]+"#"}resolve$2._getFullPath=T;const R=/#\/?$/;function I(H){return H?H.replace(R,""):""}resolve$2.normalizeId=I;function N(H,z,U){return U=I(U),H.resolve(z,U)}resolve$2.resolveUrl=N;const L=/^[a-z_][-a-z0-9._]*$/i;function F(H,z){if(typeof H=="boolean")return{};const{schemaId:U,uriResolver:G}=this.opts,Y=I(H[U]||z),K={"":Y},Z=C(G,Y,!1),J={},te=new Set;return u(H,{allKeys:!0},(ne,ge,Ee,we)=>{if(we===void 0)return;const Ie=Z+ge;let Be=K[we];typeof ne[U]=="string"&&(Be=Me.call(this,ne[U])),Re.call(this,ne.$anchor),Re.call(this,ne.$dynamicAnchor),K[ge]=Be;function Me(Te){const Se=this.opts.uriResolver.resolve;if(Te=I(Be?Se(Be,Te):Te),te.has(Te))throw se(Te);te.add(Te);let oe=this.refs[Te];return typeof oe=="string"&&(oe=this.refs[oe]),typeof oe=="object"?de(ne,oe.schema,Te):Te!==I(Ie)&&(Te[0]==="#"?(de(ne,J[Te],Te),J[Te]=ne):this.refs[Te]=Ie),Te}function Re(Te){if(typeof Te=="string"){if(!L.test(Te))throw new Error(`invalid anchor "${Te}"`);Me.call(this,`#${Te}`)}}}),J;function de(ne,ge,Ee){if(ge!==void 0&&!n(ne,ge))throw se(Ee)}function se(ne){return new Error(`reference "${ne}" resolves to more than one schema`)}}return resolve$2.getSchemaRefs=F,resolve$2}var hasRequiredValidate;function requireValidate(){if(hasRequiredValidate)return validate;hasRequiredValidate=1,Object.defineProperty(validate,"__esModule",{value:!0}),validate.getData=validate.KeywordCxt=validate.validateFunctionCode=void 0;const s=requireBoolSchema(),n=requireDataType(),u=requireApplicability(),f=requireDataType(),y=requireDefaults(),S=requireKeyword(),A=requireSubschema(),w=requireCodegen(),C=requireNames(),T=requireResolve(),R=requireUtil(),I=requireErrors();function N(xe){if(Z(xe)&&(te(xe),K(xe))){z(xe);return}L(xe,()=>(0,s.topBoolOrEmptySchema)(xe))}validate.validateFunctionCode=N;function L({gen:xe,validateName:Ne,schema:je,schemaEnv:He,opts:Ye},Je){Ye.code.es5?xe.func(Ne,(0,w._)`${C.default.data}, ${C.default.valCxt}`,He.$async,()=>{xe.code((0,w._)`"use strict"; ${G(je,Ye)}`),H(xe,Ye),xe.code(Je)}):xe.func(Ne,(0,w._)`${C.default.data}, ${F(Ye)}`,He.$async,()=>xe.code(G(je,Ye)).code(Je))}function F(xe){return(0,w._)`{${C.default.instancePath}="", ${C.default.parentData}, ${C.default.parentDataProperty}, ${C.default.rootData}=${C.default.data}${xe.dynamicRef?(0,w._)`, ${C.default.dynamicAnchors}={}`:w.nil}}={}`}function H(xe,Ne){xe.if(C.default.valCxt,()=>{xe.var(C.default.instancePath,(0,w._)`${C.default.valCxt}.${C.default.instancePath}`),xe.var(C.default.parentData,(0,w._)`${C.default.valCxt}.${C.default.parentData}`),xe.var(C.default.parentDataProperty,(0,w._)`${C.default.valCxt}.${C.default.parentDataProperty}`),xe.var(C.default.rootData,(0,w._)`${C.default.valCxt}.${C.default.rootData}`),Ne.dynamicRef&&xe.var(C.default.dynamicAnchors,(0,w._)`${C.default.valCxt}.${C.default.dynamicAnchors}`)},()=>{xe.var(C.default.instancePath,(0,w._)`""`),xe.var(C.default.parentData,(0,w._)`undefined`),xe.var(C.default.parentDataProperty,(0,w._)`undefined`),xe.var(C.default.rootData,C.default.data),Ne.dynamicRef&&xe.var(C.default.dynamicAnchors,(0,w._)`{}`)})}function z(xe){const{schema:Ne,opts:je,gen:He}=xe;L(xe,()=>{je.$comment&&Ne.$comment&&we(xe),ne(xe),He.let(C.default.vErrors,null),He.let(C.default.errors,0),je.unevaluated&&U(xe),de(xe),Ie(xe)})}function U(xe){const{gen:Ne,validateName:je}=xe;xe.evaluated=Ne.const("evaluated",(0,w._)`${je}.evaluated`),Ne.if((0,w._)`${xe.evaluated}.dynamicProps`,()=>Ne.assign((0,w._)`${xe.evaluated}.props`,(0,w._)`undefined`)),Ne.if((0,w._)`${xe.evaluated}.dynamicItems`,()=>Ne.assign((0,w._)`${xe.evaluated}.items`,(0,w._)`undefined`))}function G(xe,Ne){const je=typeof xe=="object"&&xe[Ne.schemaId];return je&&(Ne.code.source||Ne.code.process)?(0,w._)`/*# sourceURL=${je} */`:w.nil}function Y(xe,Ne){if(Z(xe)&&(te(xe),K(xe))){J(xe,Ne);return}(0,s.boolOrEmptySchema)(xe,Ne)}function K({schema:xe,self:Ne}){if(typeof xe=="boolean")return!xe;for(const je in xe)if(Ne.RULES.all[je])return!0;return!1}function Z(xe){return typeof xe.schema!="boolean"}function J(xe,Ne){const{schema:je,gen:He,opts:Ye}=xe;Ye.$comment&&je.$comment&&we(xe),ge(xe),Ee(xe);const Je=He.const("_errs",C.default.errors);de(xe,Je),He.var(Ne,(0,w._)`${Je} === ${C.default.errors}`)}function te(xe){(0,R.checkUnknownRules)(xe),se(xe)}function de(xe,Ne){if(xe.opts.jtd)return Me(xe,[],!1,Ne);const je=(0,n.getSchemaTypes)(xe.schema),He=(0,n.coerceAndCheckDataType)(xe,je);Me(xe,je,!He,Ne)}function se(xe){const{schema:Ne,errSchemaPath:je,opts:He,self:Ye}=xe;Ne.$ref&&He.ignoreKeywordsWithRef&&(0,R.schemaHasRulesButRef)(Ne,Ye.RULES)&&Ye.logger.warn(`$ref: keywords ignored in schema at path "${je}"`)}function ne(xe){const{schema:Ne,opts:je}=xe;Ne.default!==void 0&&je.useDefaults&&je.strictSchema&&(0,R.checkStrictMode)(xe,"default is ignored in the schema root")}function ge(xe){const Ne=xe.schema[xe.opts.schemaId];Ne&&(xe.baseId=(0,T.resolveUrl)(xe.opts.uriResolver,xe.baseId,Ne))}function Ee(xe){if(xe.schema.$async&&!xe.schemaEnv.$async)throw new Error("async schema in sync schema")}function we({gen:xe,schemaEnv:Ne,schema:je,errSchemaPath:He,opts:Ye}){const Je=je.$comment;if(Ye.$comment===!0)xe.code((0,w._)`${C.default.self}.logger.log(${Je})`);else if(typeof Ye.$comment=="function"){const ot=(0,w.str)`${He}/$comment`,ze=xe.scopeValue("root",{ref:Ne.root});xe.code((0,w._)`${C.default.self}.opts.$comment(${Je}, ${ot}, ${ze}.schema)`)}}function Ie(xe){const{gen:Ne,schemaEnv:je,validateName:He,ValidationError:Ye,opts:Je}=xe;je.$async?Ne.if((0,w._)`${C.default.errors} === 0`,()=>Ne.return(C.default.data),()=>Ne.throw((0,w._)`new ${Ye}(${C.default.vErrors})`)):(Ne.assign((0,w._)`${He}.errors`,C.default.vErrors),Je.unevaluated&&Be(xe),Ne.return((0,w._)`${C.default.errors} === 0`))}function Be({gen:xe,evaluated:Ne,props:je,items:He}){je instanceof w.Name&&xe.assign((0,w._)`${Ne}.props`,je),He instanceof w.Name&&xe.assign((0,w._)`${Ne}.items`,He)}function Me(xe,Ne,je,He){const{gen:Ye,schema:Je,data:ot,allErrors:ze,opts:pt,self:yt}=xe,{RULES:ut}=yt;if(Je.$ref&&(pt.ignoreKeywordsWithRef||!(0,R.schemaHasRulesButRef)(Je,ut))){Ye.block(()=>_e(xe,"$ref",ut.all.$ref.definition));return}pt.jtd||Te(xe,Ne),Ye.block(()=>{for(const qe of ut.rules)Et(qe);Et(ut.post)});function Et(qe){(0,u.shouldUseGroup)(Je,qe)&&(qe.type?(Ye.if((0,f.checkDataType)(qe.type,ot,pt.strictNumbers)),Re(xe,qe),Ne.length===1&&Ne[0]===qe.type&&je&&(Ye.else(),(0,f.reportTypeError)(xe)),Ye.endIf()):Re(xe,qe),ze||Ye.if((0,w._)`${C.default.errors} === ${He||0}`))}}function Re(xe,Ne){const{gen:je,schema:He,opts:{useDefaults:Ye}}=xe;Ye&&(0,y.assignDefaults)(xe,Ne.type),je.block(()=>{for(const Je of Ne.rules)(0,u.shouldUseRule)(He,Je)&&_e(xe,Je.keyword,Je.definition,Ne.type)})}function Te(xe,Ne){xe.schemaEnv.meta||!xe.opts.strictTypes||(Se(xe,Ne),xe.opts.allowUnionTypes||oe(xe,Ne),ae(xe,xe.dataTypes))}function Se(xe,Ne){if(Ne.length){if(!xe.dataTypes.length){xe.dataTypes=Ne;return}Ne.forEach(je=>{he(xe.dataTypes,je)||ye(xe,`type "${je}" not allowed by context "${xe.dataTypes.join(",")}"`)}),ue(xe,Ne)}}function oe(xe,Ne){Ne.length>1&&!(Ne.length===2&&Ne.includes("null"))&&ye(xe,"use allowUnionTypes to allow union type keyword")}function ae(xe,Ne){const je=xe.self.RULES.all;for(const He in je){const Ye=je[He];if(typeof Ye=="object"&&(0,u.shouldUseRule)(xe.schema,Ye)){const{type:Je}=Ye.definition;Je.length&&!Je.some(ot=>be(Ne,ot))&&ye(xe,`missing type "${Je.join(",")}" for keyword "${He}"`)}}}function be(xe,Ne){return xe.includes(Ne)||Ne==="number"&&xe.includes("integer")}function he(xe,Ne){return xe.includes(Ne)||Ne==="integer"&&xe.includes("number")}function ue(xe,Ne){const je=[];for(const He of xe.dataTypes)he(Ne,He)?je.push(He):Ne.includes("integer")&&He==="number"&&je.push("integer");xe.dataTypes=je}function ye(xe,Ne){const je=xe.schemaEnv.baseId+xe.errSchemaPath;Ne+=` at "${je}" (strictTypes)`,(0,R.checkStrictMode)(xe,Ne,xe.opts.strictTypes)}class ce{constructor(Ne,je,He){if((0,S.validateKeywordUsage)(Ne,je,He),this.gen=Ne.gen,this.allErrors=Ne.allErrors,this.keyword=He,this.data=Ne.data,this.schema=Ne.schema[He],this.$data=je.$data&&Ne.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,R.schemaRefOrVal)(Ne,this.schema,He,this.$data),this.schemaType=je.schemaType,this.parentSchema=Ne.schema,this.params={},this.it=Ne,this.def=je,this.$data)this.schemaCode=Ne.gen.const("vSchema",$e(this.$data,Ne));else if(this.schemaCode=this.schemaValue,!(0,S.validSchemaType)(this.schema,je.schemaType,je.allowUndefined))throw new Error(`${He} value must be ${JSON.stringify(je.schemaType)}`);("code"in je?je.trackErrors:je.errors!==!1)&&(this.errsCount=Ne.gen.const("_errs",C.default.errors))}result(Ne,je,He){this.failResult((0,w.not)(Ne),je,He)}failResult(Ne,je,He){this.gen.if(Ne),He?He():this.error(),je?(this.gen.else(),je(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(Ne,je){this.failResult((0,w.not)(Ne),void 0,je)}fail(Ne){if(Ne===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(Ne),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(Ne){if(!this.$data)return this.fail(Ne);const{schemaCode:je}=this;this.fail((0,w._)`${je} !== undefined && (${(0,w.or)(this.invalid$data(),Ne)})`)}error(Ne,je,He){if(je){this.setParams(je),this._error(Ne,He),this.setParams({});return}this._error(Ne,He)}_error(Ne,je){(Ne?I.reportExtraError:I.reportError)(this,this.def.error,je)}$dataError(){(0,I.reportError)(this,this.def.$dataError||I.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,I.resetErrorsCount)(this.gen,this.errsCount)}ok(Ne){this.allErrors||this.gen.if(Ne)}setParams(Ne,je){je?Object.assign(this.params,Ne):this.params=Ne}block$data(Ne,je,He=w.nil){this.gen.block(()=>{this.check$data(Ne,He),je()})}check$data(Ne=w.nil,je=w.nil){if(!this.$data)return;const{gen:He,schemaCode:Ye,schemaType:Je,def:ot}=this;He.if((0,w.or)((0,w._)`${Ye} === undefined`,je)),Ne!==w.nil&&He.assign(Ne,!0),(Je.length||ot.validateSchema)&&(He.elseIf(this.invalid$data()),this.$dataError(),Ne!==w.nil&&He.assign(Ne,!1)),He.else()}invalid$data(){const{gen:Ne,schemaCode:je,schemaType:He,def:Ye,it:Je}=this;return(0,w.or)(ot(),ze());function ot(){if(He.length){if(!(je instanceof w.Name))throw new Error("ajv implementation error");const pt=Array.isArray(He)?He:[He];return(0,w._)`${(0,f.checkDataTypes)(pt,je,Je.opts.strictNumbers,f.DataType.Wrong)}`}return w.nil}function ze(){if(Ye.validateSchema){const pt=Ne.scopeValue("validate$data",{ref:Ye.validateSchema});return(0,w._)`!${pt}(${je})`}return w.nil}}subschema(Ne,je){const He=(0,A.getSubschema)(this.it,Ne);(0,A.extendSubschemaData)(He,this.it,Ne),(0,A.extendSubschemaMode)(He,Ne);const Ye={...this.it,...He,items:void 0,props:void 0};return Y(Ye,je),Ye}mergeEvaluated(Ne,je){const{it:He,gen:Ye}=this;He.opts.unevaluated&&(He.props!==!0&&Ne.props!==void 0&&(He.props=R.mergeEvaluated.props(Ye,Ne.props,He.props,je)),He.items!==!0&&Ne.items!==void 0&&(He.items=R.mergeEvaluated.items(Ye,Ne.items,He.items,je)))}mergeValidEvaluated(Ne,je){const{it:He,gen:Ye}=this;if(He.opts.unevaluated&&(He.props!==!0||He.items!==!0))return Ye.if(je,()=>this.mergeEvaluated(Ne,w.Name)),!0}}validate.KeywordCxt=ce;function _e(xe,Ne,je,He){const Ye=new ce(xe,je,Ne);"code"in je?je.code(Ye,He):Ye.$data&&je.validate?(0,S.funcKeywordCode)(Ye,je):"macro"in je?(0,S.macroKeywordCode)(Ye,je):(je.compile||je.validate)&&(0,S.funcKeywordCode)(Ye,je)}const ke=/^\/(?:[^~]|~0|~1)*$/,Pe=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function $e(xe,{dataLevel:Ne,dataNames:je,dataPathArr:He}){let Ye,Je;if(xe==="")return C.default.rootData;if(xe[0]==="/"){if(!ke.test(xe))throw new Error(`Invalid JSON-pointer: ${xe}`);Ye=xe,Je=C.default.rootData}else{const yt=Pe.exec(xe);if(!yt)throw new Error(`Invalid JSON-pointer: ${xe}`);const ut=+yt[1];if(Ye=yt[2],Ye==="#"){if(ut>=Ne)throw new Error(pt("property/index",ut));return He[Ne-ut]}if(ut>Ne)throw new Error(pt("data",ut));if(Je=je[Ne-ut],!Ye)return Je}let ot=Je;const ze=Ye.split("/");for(const yt of ze)yt&&(Je=(0,w._)`${Je}${(0,w.getProperty)((0,R.unescapeJsonPointer)(yt))}`,ot=(0,w._)`${ot} && ${Je}`);return ot;function pt(yt,ut){return`Cannot access ${yt} ${ut} levels up, current level is ${Ne}`}}return validate.getData=$e,validate}var validation_error={},hasRequiredValidation_error;function requireValidation_error(){if(hasRequiredValidation_error)return validation_error;hasRequiredValidation_error=1,Object.defineProperty(validation_error,"__esModule",{value:!0});class s extends Error{constructor(u){super("validation failed"),this.errors=u,this.ajv=this.validation=!0}}return validation_error.default=s,validation_error}var ref_error={},hasRequiredRef_error;function requireRef_error(){if(hasRequiredRef_error)return ref_error;hasRequiredRef_error=1,Object.defineProperty(ref_error,"__esModule",{value:!0});const s=requireResolve();class n extends Error{constructor(f,y,S,A){super(A||`can't resolve reference ${S} from id ${y}`),this.missingRef=(0,s.resolveUrl)(f,y,S),this.missingSchema=(0,s.normalizeId)((0,s.getFullPath)(f,this.missingRef))}}return ref_error.default=n,ref_error}var compile={},hasRequiredCompile;function requireCompile(){if(hasRequiredCompile)return compile;hasRequiredCompile=1,Object.defineProperty(compile,"__esModule",{value:!0}),compile.resolveSchema=compile.getCompilingSchema=compile.resolveRef=compile.compileSchema=compile.SchemaEnv=void 0;const s=requireCodegen(),n=requireValidation_error(),u=requireNames(),f=requireResolve(),y=requireUtil(),S=requireValidate();class A{constructor(U){var G;this.refs={},this.dynamicAnchors={};let Y;typeof U.schema=="object"&&(Y=U.schema),this.schema=U.schema,this.schemaId=U.schemaId,this.root=U.root||this,this.baseId=(G=U.baseId)!==null&&G!==void 0?G:(0,f.normalizeId)(Y?.[U.schemaId||"$id"]),this.schemaPath=U.schemaPath,this.localRefs=U.localRefs,this.meta=U.meta,this.$async=Y?.$async,this.refs={}}}compile.SchemaEnv=A;function w(z){const U=R.call(this,z);if(U)return U;const G=(0,f.getFullPath)(this.opts.uriResolver,z.root.baseId),{es5:Y,lines:K}=this.opts.code,{ownProperties:Z}=this.opts,J=new s.CodeGen(this.scope,{es5:Y,lines:K,ownProperties:Z});let te;z.$async&&(te=J.scopeValue("Error",{ref:n.default,code:(0,s._)`require("ajv/dist/runtime/validation_error").default`}));const de=J.scopeName("validate");z.validateName=de;const se={gen:J,allErrors:this.opts.allErrors,data:u.default.data,parentData:u.default.parentData,parentDataProperty:u.default.parentDataProperty,dataNames:[u.default.data],dataPathArr:[s.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:J.scopeValue("schema",this.opts.code.source===!0?{ref:z.schema,code:(0,s.stringify)(z.schema)}:{ref:z.schema}),validateName:de,ValidationError:te,schema:z.schema,schemaEnv:z,rootId:G,baseId:z.baseId||G,schemaPath:s.nil,errSchemaPath:z.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,s._)`""`,opts:this.opts,self:this};let ne;try{this._compilations.add(z),(0,S.validateFunctionCode)(se),J.optimize(this.opts.code.optimize);const ge=J.toString();ne=`${J.scopeRefs(u.default.scope)}return ${ge}`,this.opts.code.process&&(ne=this.opts.code.process(ne,z));const Ee=new Function(`${u.default.self}`,`${u.default.scope}`,ne)(this,this.scope.get());if(this.scope.value(de,{ref:Ee}),Ee.errors=null,Ee.schema=z.schema,Ee.schemaEnv=z,z.$async&&(Ee.$async=!0),this.opts.code.source===!0&&(Ee.source={validateName:de,validateCode:ge,scopeValues:J._values}),this.opts.unevaluated){const{props:we,items:Ie}=se;Ee.evaluated={props:we instanceof s.Name?void 0:we,items:Ie instanceof s.Name?void 0:Ie,dynamicProps:we instanceof s.Name,dynamicItems:Ie instanceof s.Name},Ee.source&&(Ee.source.evaluated=(0,s.stringify)(Ee.evaluated))}return z.validate=Ee,z}catch(ge){throw delete z.validate,delete z.validateName,ne&&this.logger.error("Error compiling schema, function code:",ne),ge}finally{this._compilations.delete(z)}}compile.compileSchema=w;function C(z,U,G){var Y;G=(0,f.resolveUrl)(this.opts.uriResolver,U,G);const K=z.refs[G];if(K)return K;let Z=N.call(this,z,G);if(Z===void 0){const J=(Y=z.localRefs)===null||Y===void 0?void 0:Y[G],{schemaId:te}=this.opts;J&&(Z=new A({schema:J,schemaId:te,root:z,baseId:U}))}if(Z!==void 0)return z.refs[G]=T.call(this,Z)}compile.resolveRef=C;function T(z){return(0,f.inlineRef)(z.schema,this.opts.inlineRefs)?z.schema:z.validate?z:w.call(this,z)}function R(z){for(const U of this._compilations)if(I(U,z))return U}compile.getCompilingSchema=R;function I(z,U){return z.schema===U.schema&&z.root===U.root&&z.baseId===U.baseId}function N(z,U){let G;for(;typeof(G=this.refs[U])=="string";)U=G;return G||this.schemas[U]||L.call(this,z,U)}function L(z,U){const G=this.opts.uriResolver.parse(U),Y=(0,f._getFullPath)(this.opts.uriResolver,G);let K=(0,f.getFullPath)(this.opts.uriResolver,z.baseId,void 0);if(Object.keys(z.schema).length>0&&Y===K)return H.call(this,G,z);const Z=(0,f.normalizeId)(Y),J=this.refs[Z]||this.schemas[Z];if(typeof J=="string"){const te=L.call(this,z,J);return typeof te?.schema!="object"?void 0:H.call(this,G,te)}if(typeof J?.schema=="object"){if(J.validate||w.call(this,J),Z===(0,f.normalizeId)(U)){const{schema:te}=J,{schemaId:de}=this.opts,se=te[de];return se&&(K=(0,f.resolveUrl)(this.opts.uriResolver,K,se)),new A({schema:te,schemaId:de,root:z,baseId:K})}return H.call(this,G,J)}}compile.resolveSchema=L;const F=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function H(z,{baseId:U,schema:G,root:Y}){var K;if(((K=z.fragment)===null||K===void 0?void 0:K[0])!=="/")return;for(const te of z.fragment.slice(1).split("/")){if(typeof G=="boolean")return;const de=G[(0,y.unescapeFragment)(te)];if(de===void 0)return;G=de;const se=typeof G=="object"&&G[this.opts.schemaId];!F.has(te)&&se&&(U=(0,f.resolveUrl)(this.opts.uriResolver,U,se))}let Z;if(typeof G!="boolean"&&G.$ref&&!(0,y.schemaHasRulesButRef)(G,this.RULES)){const te=(0,f.resolveUrl)(this.opts.uriResolver,U,G.$ref);Z=L.call(this,Y,te)}const{schemaId:J}=this.opts;if(Z=Z||new A({schema:G,schemaId:J,root:Y,baseId:U}),Z.schema!==Z.root.schema)return Z}return compile}const $id$1="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description="Meta-schema for $data reference (JSON AnySchema extension proposal)",type$1="object",required$1=["$data"],properties$2={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties$1=!1,require$$9={$id:$id$1,description,type:type$1,required:required$1,properties:properties$2,additionalProperties:additionalProperties$1};var uri={},hasRequiredUri;function requireUri(){if(hasRequiredUri)return uri;hasRequiredUri=1,Object.defineProperty(uri,"__esModule",{value:!0});const s=requireFastUri();return s.code='require("ajv/dist/runtime/uri").default',uri.default=s,uri}var hasRequiredCore$1;function requireCore$1(){return hasRequiredCore$1||(hasRequiredCore$1=1,(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.CodeGen=s.Name=s.nil=s.stringify=s.str=s._=s.KeywordCxt=void 0;var n=requireValidate();Object.defineProperty(s,"KeywordCxt",{enumerable:!0,get:function(){return n.KeywordCxt}});var u=requireCodegen();Object.defineProperty(s,"_",{enumerable:!0,get:function(){return u._}}),Object.defineProperty(s,"str",{enumerable:!0,get:function(){return u.str}}),Object.defineProperty(s,"stringify",{enumerable:!0,get:function(){return u.stringify}}),Object.defineProperty(s,"nil",{enumerable:!0,get:function(){return u.nil}}),Object.defineProperty(s,"Name",{enumerable:!0,get:function(){return u.Name}}),Object.defineProperty(s,"CodeGen",{enumerable:!0,get:function(){return u.CodeGen}});const f=requireValidation_error(),y=requireRef_error(),S=requireRules(),A=requireCompile(),w=requireCodegen(),C=requireResolve(),T=requireDataType(),R=requireUtil(),I=require$$9,N=requireUri(),L=(oe,ae)=>new RegExp(oe,ae);L.code="new RegExp";const F=["removeAdditional","useDefaults","coerceTypes"],H=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),z={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},U={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},G=200;function Y(oe){var ae,be,he,ue,ye,ce,_e,ke,Pe,$e,xe,Ne,je,He,Ye,Je,ot,ze,pt,yt,ut,Et,qe,Le,lt;const We=oe.strict,Qe=(ae=oe.code)===null||ae===void 0?void 0:ae.optimize,at=Qe===!0||Qe===void 0?1:Qe||0,St=(he=(be=oe.code)===null||be===void 0?void 0:be.regExp)!==null&&he!==void 0?he:L,Ct=(ue=oe.uriResolver)!==null&&ue!==void 0?ue:N.default;return{strictSchema:(ce=(ye=oe.strictSchema)!==null&&ye!==void 0?ye:We)!==null&&ce!==void 0?ce:!0,strictNumbers:(ke=(_e=oe.strictNumbers)!==null&&_e!==void 0?_e:We)!==null&&ke!==void 0?ke:!0,strictTypes:($e=(Pe=oe.strictTypes)!==null&&Pe!==void 0?Pe:We)!==null&&$e!==void 0?$e:"log",strictTuples:(Ne=(xe=oe.strictTuples)!==null&&xe!==void 0?xe:We)!==null&&Ne!==void 0?Ne:"log",strictRequired:(He=(je=oe.strictRequired)!==null&&je!==void 0?je:We)!==null&&He!==void 0?He:!1,code:oe.code?{...oe.code,optimize:at,regExp:St}:{optimize:at,regExp:St},loopRequired:(Ye=oe.loopRequired)!==null&&Ye!==void 0?Ye:G,loopEnum:(Je=oe.loopEnum)!==null&&Je!==void 0?Je:G,meta:(ot=oe.meta)!==null&&ot!==void 0?ot:!0,messages:(ze=oe.messages)!==null&&ze!==void 0?ze:!0,inlineRefs:(pt=oe.inlineRefs)!==null&&pt!==void 0?pt:!0,schemaId:(yt=oe.schemaId)!==null&&yt!==void 0?yt:"$id",addUsedSchema:(ut=oe.addUsedSchema)!==null&&ut!==void 0?ut:!0,validateSchema:(Et=oe.validateSchema)!==null&&Et!==void 0?Et:!0,validateFormats:(qe=oe.validateFormats)!==null&&qe!==void 0?qe:!0,unicodeRegExp:(Le=oe.unicodeRegExp)!==null&&Le!==void 0?Le:!0,int32range:(lt=oe.int32range)!==null&&lt!==void 0?lt:!0,uriResolver:Ct}}class K{constructor(ae={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,ae=this.opts={...ae,...Y(ae)};const{es5:be,lines:he}=this.opts.code;this.scope=new w.ValueScope({scope:{},prefixes:H,es5:be,lines:he}),this.logger=Ee(ae.logger);const ue=ae.validateFormats;ae.validateFormats=!1,this.RULES=(0,S.getRules)(),Z.call(this,z,ae,"NOT SUPPORTED"),Z.call(this,U,ae,"DEPRECATED","warn"),this._metaOpts=ne.call(this),ae.formats&&de.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),ae.keywords&&se.call(this,ae.keywords),typeof ae.meta=="object"&&this.addMetaSchema(ae.meta),te.call(this),ae.validateFormats=ue}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:ae,meta:be,schemaId:he}=this.opts;let ue=I;he==="id"&&(ue={...I},ue.id=ue.$id,delete ue.$id),be&&ae&&this.addMetaSchema(ue,ue[he],!1)}defaultMeta(){const{meta:ae,schemaId:be}=this.opts;return this.opts.defaultMeta=typeof ae=="object"?ae[be]||ae:void 0}validate(ae,be){let he;if(typeof ae=="string"){if(he=this.getSchema(ae),!he)throw new Error(`no schema with key or ref "${ae}"`)}else he=this.compile(ae);const ue=he(be);return"$async"in he||(this.errors=he.errors),ue}compile(ae,be){const he=this._addSchema(ae,be);return he.validate||this._compileSchemaEnv(he)}compileAsync(ae,be){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:he}=this.opts;return ue.call(this,ae,be);async function ue($e,xe){await ye.call(this,$e.$schema);const Ne=this._addSchema($e,xe);return Ne.validate||ce.call(this,Ne)}async function ye($e){$e&&!this.getSchema($e)&&await ue.call(this,{$ref:$e},!0)}async function ce($e){try{return this._compileSchemaEnv($e)}catch(xe){if(!(xe instanceof y.default))throw xe;return _e.call(this,xe),await ke.call(this,xe.missingSchema),ce.call(this,$e)}}function _e({missingSchema:$e,missingRef:xe}){if(this.refs[$e])throw new Error(`AnySchema ${$e} is loaded but ${xe} cannot be resolved`)}async function ke($e){const xe=await Pe.call(this,$e);this.refs[$e]||await ye.call(this,xe.$schema),this.refs[$e]||this.addSchema(xe,$e,be)}async function Pe($e){const xe=this._loading[$e];if(xe)return xe;try{return await(this._loading[$e]=he($e))}finally{delete this._loading[$e]}}}addSchema(ae,be,he,ue=this.opts.validateSchema){if(Array.isArray(ae)){for(const ce of ae)this.addSchema(ce,void 0,he,ue);return this}let ye;if(typeof ae=="object"){const{schemaId:ce}=this.opts;if(ye=ae[ce],ye!==void 0&&typeof ye!="string")throw new Error(`schema ${ce} must be string`)}return be=(0,C.normalizeId)(be||ye),this._checkUnique(be),this.schemas[be]=this._addSchema(ae,he,be,ue,!0),this}addMetaSchema(ae,be,he=this.opts.validateSchema){return this.addSchema(ae,be,!0,he),this}validateSchema(ae,be){if(typeof ae=="boolean")return!0;let he;if(he=ae.$schema,he!==void 0&&typeof he!="string")throw new Error("$schema must be a string");if(he=he||this.opts.defaultMeta||this.defaultMeta(),!he)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const ue=this.validate(he,ae);if(!ue&&be){const ye="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(ye);else throw new Error(ye)}return ue}getSchema(ae){let be;for(;typeof(be=J.call(this,ae))=="string";)ae=be;if(be===void 0){const{schemaId:he}=this.opts,ue=new A.SchemaEnv({schema:{},schemaId:he});if(be=A.resolveSchema.call(this,ue,ae),!be)return;this.refs[ae]=be}return be.validate||this._compileSchemaEnv(be)}removeSchema(ae){if(ae instanceof RegExp)return this._removeAllSchemas(this.schemas,ae),this._removeAllSchemas(this.refs,ae),this;switch(typeof ae){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const be=J.call(this,ae);return typeof be=="object"&&this._cache.delete(be.schema),delete this.schemas[ae],delete this.refs[ae],this}case"object":{const be=ae;this._cache.delete(be);let he=ae[this.opts.schemaId];return he&&(he=(0,C.normalizeId)(he),delete this.schemas[he],delete this.refs[he]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(ae){for(const be of ae)this.addKeyword(be);return this}addKeyword(ae,be){let he;if(typeof ae=="string")he=ae,typeof be=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),be.keyword=he);else if(typeof ae=="object"&&be===void 0){if(be=ae,he=be.keyword,Array.isArray(he)&&!he.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(Ie.call(this,he,be),!be)return(0,R.eachItem)(he,ye=>Be.call(this,ye)),this;Re.call(this,be);const ue={...be,type:(0,T.getJSONTypes)(be.type),schemaType:(0,T.getJSONTypes)(be.schemaType)};return(0,R.eachItem)(he,ue.type.length===0?ye=>Be.call(this,ye,ue):ye=>ue.type.forEach(ce=>Be.call(this,ye,ue,ce))),this}getKeyword(ae){const be=this.RULES.all[ae];return typeof be=="object"?be.definition:!!be}removeKeyword(ae){const{RULES:be}=this;delete be.keywords[ae],delete be.all[ae];for(const he of be.rules){const ue=he.rules.findIndex(ye=>ye.keyword===ae);ue>=0&&he.rules.splice(ue,1)}return this}addFormat(ae,be){return typeof be=="string"&&(be=new RegExp(be)),this.formats[ae]=be,this}errorsText(ae=this.errors,{separator:be=", ",dataVar:he="data"}={}){return!ae||ae.length===0?"No errors":ae.map(ue=>`${he}${ue.instancePath} ${ue.message}`).reduce((ue,ye)=>ue+be+ye)}$dataMetaSchema(ae,be){const he=this.RULES.all;ae=JSON.parse(JSON.stringify(ae));for(const ue of be){const ye=ue.split("/").slice(1);let ce=ae;for(const _e of ye)ce=ce[_e];for(const _e in he){const ke=he[_e];if(typeof ke!="object")continue;const{$data:Pe}=ke.definition,$e=ce[_e];Pe&&$e&&(ce[_e]=Se($e))}}return ae}_removeAllSchemas(ae,be){for(const he in ae){const ue=ae[he];(!be||be.test(he))&&(typeof ue=="string"?delete ae[he]:ue&&!ue.meta&&(this._cache.delete(ue.schema),delete ae[he]))}}_addSchema(ae,be,he,ue=this.opts.validateSchema,ye=this.opts.addUsedSchema){let ce;const{schemaId:_e}=this.opts;if(typeof ae=="object")ce=ae[_e];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof ae!="boolean")throw new Error("schema must be object or boolean")}let ke=this._cache.get(ae);if(ke!==void 0)return ke;he=(0,C.normalizeId)(ce||he);const Pe=C.getSchemaRefs.call(this,ae,he);return ke=new A.SchemaEnv({schema:ae,schemaId:_e,meta:be,baseId:he,localRefs:Pe}),this._cache.set(ke.schema,ke),ye&&!he.startsWith("#")&&(he&&this._checkUnique(he),this.refs[he]=ke),ue&&this.validateSchema(ae,!0),ke}_checkUnique(ae){if(this.schemas[ae]||this.refs[ae])throw new Error(`schema with key or id "${ae}" already exists`)}_compileSchemaEnv(ae){if(ae.meta?this._compileMetaSchema(ae):A.compileSchema.call(this,ae),!ae.validate)throw new Error("ajv implementation error");return ae.validate}_compileMetaSchema(ae){const be=this.opts;this.opts=this._metaOpts;try{A.compileSchema.call(this,ae)}finally{this.opts=be}}}K.ValidationError=f.default,K.MissingRefError=y.default,s.default=K;function Z(oe,ae,be,he="error"){for(const ue in oe){const ye=ue;ye in ae&&this.logger[he](`${be}: option ${ue}. ${oe[ye]}`)}}function J(oe){return oe=(0,C.normalizeId)(oe),this.schemas[oe]||this.refs[oe]}function te(){const oe=this.opts.schemas;if(oe)if(Array.isArray(oe))this.addSchema(oe);else for(const ae in oe)this.addSchema(oe[ae],ae)}function de(){for(const oe in this.opts.formats){const ae=this.opts.formats[oe];ae&&this.addFormat(oe,ae)}}function se(oe){if(Array.isArray(oe)){this.addVocabulary(oe);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const ae in oe){const be=oe[ae];be.keyword||(be.keyword=ae),this.addKeyword(be)}}function ne(){const oe={...this.opts};for(const ae of F)delete oe[ae];return oe}const ge={log(){},warn(){},error(){}};function Ee(oe){if(oe===!1)return ge;if(oe===void 0)return console;if(oe.log&&oe.warn&&oe.error)return oe;throw new Error("logger must implement log, warn and error methods")}const we=/^[a-z_$][a-z0-9_$:-]*$/i;function Ie(oe,ae){const{RULES:be}=this;if((0,R.eachItem)(oe,he=>{if(be.keywords[he])throw new Error(`Keyword ${he} is already defined`);if(!we.test(he))throw new Error(`Keyword ${he} has invalid name`)}),!!ae&&ae.$data&&!("code"in ae||"validate"in ae))throw new Error('$data keyword must have "code" or "validate" function')}function Be(oe,ae,be){var he;const ue=ae?.post;if(be&&ue)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:ye}=this;let ce=ue?ye.post:ye.rules.find(({type:ke})=>ke===be);if(ce||(ce={type:be,rules:[]},ye.rules.push(ce)),ye.keywords[oe]=!0,!ae)return;const _e={keyword:oe,definition:{...ae,type:(0,T.getJSONTypes)(ae.type),schemaType:(0,T.getJSONTypes)(ae.schemaType)}};ae.before?Me.call(this,ce,_e,ae.before):ce.rules.push(_e),ye.all[oe]=_e,(he=ae.implements)===null||he===void 0||he.forEach(ke=>this.addKeyword(ke))}function Me(oe,ae,be){const he=oe.rules.findIndex(ue=>ue.keyword===be);he>=0?oe.rules.splice(he,0,ae):(oe.rules.push(ae),this.logger.warn(`rule ${be} is not defined`))}function Re(oe){let{metaSchema:ae}=oe;ae!==void 0&&(oe.$data&&this.opts.$data&&(ae=Se(ae)),oe.validateSchema=this.compile(ae,!0))}const Te={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function Se(oe){return{anyOf:[oe,Te]}}})(core$1)),core$1}var draft7={},core={},id={},hasRequiredId;function requireId(){if(hasRequiredId)return id;hasRequiredId=1,Object.defineProperty(id,"__esModule",{value:!0});const s={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};return id.default=s,id}var ref={},hasRequiredRef;function requireRef(){if(hasRequiredRef)return ref;hasRequiredRef=1,Object.defineProperty(ref,"__esModule",{value:!0}),ref.callRef=ref.getValidate=void 0;const s=requireRef_error(),n=requireCode(),u=requireCodegen(),f=requireNames(),y=requireCompile(),S=requireUtil(),A={keyword:"$ref",schemaType:"string",code(T){const{gen:R,schema:I,it:N}=T,{baseId:L,schemaEnv:F,validateName:H,opts:z,self:U}=N,{root:G}=F;if((I==="#"||I==="#/")&&L===G.baseId)return K();const Y=y.resolveRef.call(U,G,L,I);if(Y===void 0)throw new s.default(N.opts.uriResolver,L,I);if(Y instanceof y.SchemaEnv)return Z(Y);return J(Y);function K(){if(F===G)return C(T,H,F,F.$async);const te=R.scopeValue("root",{ref:G});return C(T,(0,u._)`${te}.validate`,G,G.$async)}function Z(te){const de=w(T,te);C(T,de,te,te.$async)}function J(te){const de=R.scopeValue("schema",z.code.source===!0?{ref:te,code:(0,u.stringify)(te)}:{ref:te}),se=R.name("valid"),ne=T.subschema({schema:te,dataTypes:[],schemaPath:u.nil,topSchemaRef:de,errSchemaPath:I},se);T.mergeEvaluated(ne),T.ok(se)}}};function w(T,R){const{gen:I}=T;return R.validate?I.scopeValue("validate",{ref:R.validate}):(0,u._)`${I.scopeValue("wrapper",{ref:R})}.validate`}ref.getValidate=w;function C(T,R,I,N){const{gen:L,it:F}=T,{allErrors:H,schemaEnv:z,opts:U}=F,G=U.passContext?f.default.this:u.nil;N?Y():K();function Y(){if(!z.$async)throw new Error("async schema referenced by sync schema");const te=L.let("valid");L.try(()=>{L.code((0,u._)`await ${(0,n.callValidateCode)(T,R,G)}`),J(R),H||L.assign(te,!0)},de=>{L.if((0,u._)`!(${de} instanceof ${F.ValidationError})`,()=>L.throw(de)),Z(de),H||L.assign(te,!1)}),T.ok(te)}function K(){T.result((0,n.callValidateCode)(T,R,G),()=>J(R),()=>Z(R))}function Z(te){const de=(0,u._)`${te}.errors`;L.assign(f.default.vErrors,(0,u._)`${f.default.vErrors} === null ? ${de} : ${f.default.vErrors}.concat(${de})`),L.assign(f.default.errors,(0,u._)`${f.default.vErrors}.length`)}function J(te){var de;if(!F.opts.unevaluated)return;const se=(de=I?.validate)===null||de===void 0?void 0:de.evaluated;if(F.props!==!0)if(se&&!se.dynamicProps)se.props!==void 0&&(F.props=S.mergeEvaluated.props(L,se.props,F.props));else{const ne=L.var("props",(0,u._)`${te}.evaluated.props`);F.props=S.mergeEvaluated.props(L,ne,F.props,u.Name)}if(F.items!==!0)if(se&&!se.dynamicItems)se.items!==void 0&&(F.items=S.mergeEvaluated.items(L,se.items,F.items));else{const ne=L.var("items",(0,u._)`${te}.evaluated.items`);F.items=S.mergeEvaluated.items(L,ne,F.items,u.Name)}}}return ref.callRef=C,ref.default=A,ref}var hasRequiredCore;function requireCore(){if(hasRequiredCore)return core;hasRequiredCore=1,Object.defineProperty(core,"__esModule",{value:!0});const s=requireId(),n=requireRef(),u=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",s.default,n.default];return core.default=u,core}var validation={},limitNumber={},hasRequiredLimitNumber;function requireLimitNumber(){if(hasRequiredLimitNumber)return limitNumber;hasRequiredLimitNumber=1,Object.defineProperty(limitNumber,"__esModule",{value:!0});const s=requireCodegen(),n=s.operators,u={maximum:{okStr:"<=",ok:n.LTE,fail:n.GT},minimum:{okStr:">=",ok:n.GTE,fail:n.LT},exclusiveMaximum:{okStr:"<",ok:n.LT,fail:n.GTE},exclusiveMinimum:{okStr:">",ok:n.GT,fail:n.LTE}},f={message:({keyword:S,schemaCode:A})=>(0,s.str)`must be ${u[S].okStr} ${A}`,params:({keyword:S,schemaCode:A})=>(0,s._)`{comparison: ${u[S].okStr}, limit: ${A}}`},y={keyword:Object.keys(u),type:"number",schemaType:"number",$data:!0,error:f,code(S){const{keyword:A,data:w,schemaCode:C}=S;S.fail$data((0,s._)`${w} ${u[A].fail} ${C} || isNaN(${w})`)}};return limitNumber.default=y,limitNumber}var multipleOf={},hasRequiredMultipleOf;function requireMultipleOf(){if(hasRequiredMultipleOf)return multipleOf;hasRequiredMultipleOf=1,Object.defineProperty(multipleOf,"__esModule",{value:!0});const s=requireCodegen(),n={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:u})=>(0,s.str)`must be multiple of ${u}`,params:({schemaCode:u})=>(0,s._)`{multipleOf: ${u}}`},code(u){const{gen:f,data:y,schemaCode:S,it:A}=u,w=A.opts.multipleOfPrecision,C=f.let("res"),T=w?(0,s._)`Math.abs(Math.round(${C}) - ${C}) > 1e-${w}`:(0,s._)`${C} !== parseInt(${C})`;u.fail$data((0,s._)`(${S} === 0 || (${C} = ${y}/${S}, ${T}))`)}};return multipleOf.default=n,multipleOf}var limitLength={},ucs2length={},hasRequiredUcs2length;function requireUcs2length(){if(hasRequiredUcs2length)return ucs2length;hasRequiredUcs2length=1,Object.defineProperty(ucs2length,"__esModule",{value:!0});function s(n){const u=n.length;let f=0,y=0,S;for(;y<u;)f++,S=n.charCodeAt(y++),S>=55296&&S<=56319&&y<u&&(S=n.charCodeAt(y),(S&64512)===56320&&y++);return f}return ucs2length.default=s,s.code='require("ajv/dist/runtime/ucs2length").default',ucs2length}var hasRequiredLimitLength;function requireLimitLength(){if(hasRequiredLimitLength)return limitLength;hasRequiredLimitLength=1,Object.defineProperty(limitLength,"__esModule",{value:!0});const s=requireCodegen(),n=requireUtil(),u=requireUcs2length(),f={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:y,schemaCode:S}){const A=y==="maxLength"?"more":"fewer";return(0,s.str)`must NOT have ${A} than ${S} characters`},params:({schemaCode:y})=>(0,s._)`{limit: ${y}}`},code(y){const{keyword:S,data:A,schemaCode:w,it:C}=y,T=S==="maxLength"?s.operators.GT:s.operators.LT,R=C.opts.unicode===!1?(0,s._)`${A}.length`:(0,s._)`${(0,n.useFunc)(y.gen,u.default)}(${A})`;y.fail$data((0,s._)`${R} ${T} ${w}`)}};return limitLength.default=f,limitLength}var pattern={},hasRequiredPattern;function requirePattern(){if(hasRequiredPattern)return pattern;hasRequiredPattern=1,Object.defineProperty(pattern,"__esModule",{value:!0});const s=requireCode(),n=requireUtil(),u=requireCodegen(),f={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:y})=>(0,u.str)`must match pattern "${y}"`,params:({schemaCode:y})=>(0,u._)`{pattern: ${y}}`},code(y){const{gen:S,data:A,$data:w,schema:C,schemaCode:T,it:R}=y,I=R.opts.unicodeRegExp?"u":"";if(w){const{regExp:N}=R.opts.code,L=N.code==="new RegExp"?(0,u._)`new RegExp`:(0,n.useFunc)(S,N),F=S.let("valid");S.try(()=>S.assign(F,(0,u._)`${L}(${T}, ${I}).test(${A})`),()=>S.assign(F,!1)),y.fail$data((0,u._)`!${F}`)}else{const N=(0,s.usePattern)(y,C);y.fail$data((0,u._)`!${N}.test(${A})`)}}};return pattern.default=f,pattern}var limitProperties={},hasRequiredLimitProperties;function requireLimitProperties(){if(hasRequiredLimitProperties)return limitProperties;hasRequiredLimitProperties=1,Object.defineProperty(limitProperties,"__esModule",{value:!0});const s=requireCodegen(),n={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:u,schemaCode:f}){const y=u==="maxProperties"?"more":"fewer";return(0,s.str)`must NOT have ${y} than ${f} properties`},params:({schemaCode:u})=>(0,s._)`{limit: ${u}}`},code(u){const{keyword:f,data:y,schemaCode:S}=u,A=f==="maxProperties"?s.operators.GT:s.operators.LT;u.fail$data((0,s._)`Object.keys(${y}).length ${A} ${S}`)}};return limitProperties.default=n,limitProperties}var required={},hasRequiredRequired;function requireRequired(){if(hasRequiredRequired)return required;hasRequiredRequired=1,Object.defineProperty(required,"__esModule",{value:!0});const s=requireCode(),n=requireCodegen(),u=requireUtil(),f={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:y}})=>(0,n.str)`must have required property '${y}'`,params:({params:{missingProperty:y}})=>(0,n._)`{missingProperty: ${y}}`},code(y){const{gen:S,schema:A,schemaCode:w,data:C,$data:T,it:R}=y,{opts:I}=R;if(!T&&A.length===0)return;const N=A.length>=I.loopRequired;if(R.allErrors?L():F(),I.strictRequired){const U=y.parentSchema.properties,{definedProperties:G}=y.it;for(const Y of A)if(U?.[Y]===void 0&&!G.has(Y)){const K=R.schemaEnv.baseId+R.errSchemaPath,Z=`required property "${Y}" is not defined at "${K}" (strictRequired)`;(0,u.checkStrictMode)(R,Z,R.opts.strictRequired)}}function L(){if(N||T)y.block$data(n.nil,H);else for(const U of A)(0,s.checkReportMissingProp)(y,U)}function F(){const U=S.let("missing");if(N||T){const G=S.let("valid",!0);y.block$data(G,()=>z(U,G)),y.ok(G)}else S.if((0,s.checkMissingProp)(y,A,U)),(0,s.reportMissingProp)(y,U),S.else()}function H(){S.forOf("prop",w,U=>{y.setParams({missingProperty:U}),S.if((0,s.noPropertyInData)(S,C,U,I.ownProperties),()=>y.error())})}function z(U,G){y.setParams({missingProperty:U}),S.forOf(U,w,()=>{S.assign(G,(0,s.propertyInData)(S,C,U,I.ownProperties)),S.if((0,n.not)(G),()=>{y.error(),S.break()})},n.nil)}}};return required.default=f,required}var limitItems={},hasRequiredLimitItems;function requireLimitItems(){if(hasRequiredLimitItems)return limitItems;hasRequiredLimitItems=1,Object.defineProperty(limitItems,"__esModule",{value:!0});const s=requireCodegen(),n={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:u,schemaCode:f}){const y=u==="maxItems"?"more":"fewer";return(0,s.str)`must NOT have ${y} than ${f} items`},params:({schemaCode:u})=>(0,s._)`{limit: ${u}}`},code(u){const{keyword:f,data:y,schemaCode:S}=u,A=f==="maxItems"?s.operators.GT:s.operators.LT;u.fail$data((0,s._)`${y}.length ${A} ${S}`)}};return limitItems.default=n,limitItems}var uniqueItems={},equal={},hasRequiredEqual;function requireEqual(){if(hasRequiredEqual)return equal;hasRequiredEqual=1,Object.defineProperty(equal,"__esModule",{value:!0});const s=requireFastDeepEqual();return s.code='require("ajv/dist/runtime/equal").default',equal.default=s,equal}var hasRequiredUniqueItems;function requireUniqueItems(){if(hasRequiredUniqueItems)return uniqueItems;hasRequiredUniqueItems=1,Object.defineProperty(uniqueItems,"__esModule",{value:!0});const s=requireDataType(),n=requireCodegen(),u=requireUtil(),f=requireEqual(),y={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:S,j:A}})=>(0,n.str)`must NOT have duplicate items (items ## ${A} and ${S} are identical)`,params:({params:{i:S,j:A}})=>(0,n._)`{i: ${S}, j: ${A}}`},code(S){const{gen:A,data:w,$data:C,schema:T,parentSchema:R,schemaCode:I,it:N}=S;if(!C&&!T)return;const L=A.let("valid"),F=R.items?(0,s.getSchemaTypes)(R.items):[];S.block$data(L,H,(0,n._)`${I} === false`),S.ok(L);function H(){const Y=A.let("i",(0,n._)`${w}.length`),K=A.let("j");S.setParams({i:Y,j:K}),A.assign(L,!0),A.if((0,n._)`${Y} > 1`,()=>(z()?U:G)(Y,K))}function z(){return F.length>0&&!F.some(Y=>Y==="object"||Y==="array")}function U(Y,K){const Z=A.name("item"),J=(0,s.checkDataTypes)(F,Z,N.opts.strictNumbers,s.DataType.Wrong),te=A.const("indices",(0,n._)`{}`);A.for((0,n._)`;${Y}--;`,()=>{A.let(Z,(0,n._)`${w}[${Y}]`),A.if(J,(0,n._)`continue`),F.length>1&&A.if((0,n._)`typeof ${Z} == "string"`,(0,n._)`${Z} += "_"`),A.if((0,n._)`typeof ${te}[${Z}] == "number"`,()=>{A.assign(K,(0,n._)`${te}[${Z}]`),S.error(),A.assign(L,!1).break()}).code((0,n._)`${te}[${Z}] = ${Y}`)})}function G(Y,K){const Z=(0,u.useFunc)(A,f.default),J=A.name("outer");A.label(J).for((0,n._)`;${Y}--;`,()=>A.for((0,n._)`${K} = ${Y}; ${K}--;`,()=>A.if((0,n._)`${Z}(${w}[${Y}], ${w}[${K}])`,()=>{S.error(),A.assign(L,!1).break(J)})))}}};return uniqueItems.default=y,uniqueItems}var _const={},hasRequired_const;function require_const(){if(hasRequired_const)return _const;hasRequired_const=1,Object.defineProperty(_const,"__esModule",{value:!0});const s=requireCodegen(),n=requireUtil(),u=requireEqual(),f={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:y})=>(0,s._)`{allowedValue: ${y}}`},code(y){const{gen:S,data:A,$data:w,schemaCode:C,schema:T}=y;w||T&&typeof T=="object"?y.fail$data((0,s._)`!${(0,n.useFunc)(S,u.default)}(${A}, ${C})`):y.fail((0,s._)`${T} !== ${A}`)}};return _const.default=f,_const}var _enum={},hasRequired_enum;function require_enum(){if(hasRequired_enum)return _enum;hasRequired_enum=1,Object.defineProperty(_enum,"__esModule",{value:!0});const s=requireCodegen(),n=requireUtil(),u=requireEqual(),f={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:y})=>(0,s._)`{allowedValues: ${y}}`},code(y){const{gen:S,data:A,$data:w,schema:C,schemaCode:T,it:R}=y;if(!w&&C.length===0)throw new Error("enum must have non-empty array");const I=C.length>=R.opts.loopEnum;let N;const L=()=>N??(N=(0,n.useFunc)(S,u.default));let F;if(I||w)F=S.let("valid"),y.block$data(F,H);else{if(!Array.isArray(C))throw new Error("ajv implementation error");const U=S.const("vSchema",T);F=(0,s.or)(...C.map((G,Y)=>z(U,Y)))}y.pass(F);function H(){S.assign(F,!1),S.forOf("v",T,U=>S.if((0,s._)`${L()}(${A}, ${U})`,()=>S.assign(F,!0).break()))}function z(U,G){const Y=C[G];return typeof Y=="object"&&Y!==null?(0,s._)`${L()}(${A}, ${U}[${G}])`:(0,s._)`${A} === ${Y}`}}};return _enum.default=f,_enum}var hasRequiredValidation;function requireValidation(){if(hasRequiredValidation)return validation;hasRequiredValidation=1,Object.defineProperty(validation,"__esModule",{value:!0});const s=requireLimitNumber(),n=requireMultipleOf(),u=requireLimitLength(),f=requirePattern(),y=requireLimitProperties(),S=requireRequired(),A=requireLimitItems(),w=requireUniqueItems(),C=require_const(),T=require_enum(),R=[s.default,n.default,u.default,f.default,y.default,S.default,A.default,w.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},C.default,T.default];return validation.default=R,validation}var applicator={},additionalItems={},hasRequiredAdditionalItems;function requireAdditionalItems(){if(hasRequiredAdditionalItems)return additionalItems;hasRequiredAdditionalItems=1,Object.defineProperty(additionalItems,"__esModule",{value:!0}),additionalItems.validateAdditionalItems=void 0;const s=requireCodegen(),n=requireUtil(),u={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:y}})=>(0,s.str)`must NOT have more than ${y} items`,params:({params:{len:y}})=>(0,s._)`{limit: ${y}}`},code(y){const{parentSchema:S,it:A}=y,{items:w}=S;if(!Array.isArray(w)){(0,n.checkStrictMode)(A,'"additionalItems" is ignored when "items" is not an array of schemas');return}f(y,w)}};function f(y,S){const{gen:A,schema:w,data:C,keyword:T,it:R}=y;R.items=!0;const I=A.const("len",(0,s._)`${C}.length`);if(w===!1)y.setParams({len:S.length}),y.pass((0,s._)`${I} <= ${S.length}`);else if(typeof w=="object"&&!(0,n.alwaysValidSchema)(R,w)){const L=A.var("valid",(0,s._)`${I} <= ${S.length}`);A.if((0,s.not)(L),()=>N(L)),y.ok(L)}function N(L){A.forRange("i",S.length,I,F=>{y.subschema({keyword:T,dataProp:F,dataPropType:n.Type.Num},L),R.allErrors||A.if((0,s.not)(L),()=>A.break())})}}return additionalItems.validateAdditionalItems=f,additionalItems.default=u,additionalItems}var prefixItems={},items={},hasRequiredItems;function requireItems(){if(hasRequiredItems)return items;hasRequiredItems=1,Object.defineProperty(items,"__esModule",{value:!0}),items.validateTuple=void 0;const s=requireCodegen(),n=requireUtil(),u=requireCode(),f={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(S){const{schema:A,it:w}=S;if(Array.isArray(A))return y(S,"additionalItems",A);w.items=!0,!(0,n.alwaysValidSchema)(w,A)&&S.ok((0,u.validateArray)(S))}};function y(S,A,w=S.schema){const{gen:C,parentSchema:T,data:R,keyword:I,it:N}=S;H(T),N.opts.unevaluated&&w.length&&N.items!==!0&&(N.items=n.mergeEvaluated.items(C,w.length,N.items));const L=C.name("valid"),F=C.const("len",(0,s._)`${R}.length`);w.forEach((z,U)=>{(0,n.alwaysValidSchema)(N,z)||(C.if((0,s._)`${F} > ${U}`,()=>S.subschema({keyword:I,schemaProp:U,dataProp:U},L)),S.ok(L))});function H(z){const{opts:U,errSchemaPath:G}=N,Y=w.length,K=Y===z.minItems&&(Y===z.maxItems||z[A]===!1);if(U.strictTuples&&!K){const Z=`"${I}" is ${Y}-tuple, but minItems or maxItems/${A} are not specified or different at path "${G}"`;(0,n.checkStrictMode)(N,Z,U.strictTuples)}}}return items.validateTuple=y,items.default=f,items}var hasRequiredPrefixItems;function requirePrefixItems(){if(hasRequiredPrefixItems)return prefixItems;hasRequiredPrefixItems=1,Object.defineProperty(prefixItems,"__esModule",{value:!0});const s=requireItems(),n={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:u=>(0,s.validateTuple)(u,"items")};return prefixItems.default=n,prefixItems}var items2020={},hasRequiredItems2020;function requireItems2020(){if(hasRequiredItems2020)return items2020;hasRequiredItems2020=1,Object.defineProperty(items2020,"__esModule",{value:!0});const s=requireCodegen(),n=requireUtil(),u=requireCode(),f=requireAdditionalItems(),y={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:S}})=>(0,s.str)`must NOT have more than ${S} items`,params:({params:{len:S}})=>(0,s._)`{limit: ${S}}`},code(S){const{schema:A,parentSchema:w,it:C}=S,{prefixItems:T}=w;C.items=!0,!(0,n.alwaysValidSchema)(C,A)&&(T?(0,f.validateAdditionalItems)(S,T):S.ok((0,u.validateArray)(S)))}};return items2020.default=y,items2020}var contains={},hasRequiredContains;function requireContains(){if(hasRequiredContains)return contains;hasRequiredContains=1,Object.defineProperty(contains,"__esModule",{value:!0});const s=requireCodegen(),n=requireUtil(),u={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:f,max:y}})=>y===void 0?(0,s.str)`must contain at least ${f} valid item(s)`:(0,s.str)`must contain at least ${f} and no more than ${y} valid item(s)`,params:({params:{min:f,max:y}})=>y===void 0?(0,s._)`{minContains: ${f}}`:(0,s._)`{minContains: ${f}, maxContains: ${y}}`},code(f){const{gen:y,schema:S,parentSchema:A,data:w,it:C}=f;let T,R;const{minContains:I,maxContains:N}=A;C.opts.next?(T=I===void 0?1:I,R=N):T=1;const L=y.const("len",(0,s._)`${w}.length`);if(f.setParams({min:T,max:R}),R===void 0&&T===0){(0,n.checkStrictMode)(C,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(R!==void 0&&T>R){(0,n.checkStrictMode)(C,'"minContains" > "maxContains" is always invalid'),f.fail();return}if((0,n.alwaysValidSchema)(C,S)){let G=(0,s._)`${L} >= ${T}`;R!==void 0&&(G=(0,s._)`${G} && ${L} <= ${R}`),f.pass(G);return}C.items=!0;const F=y.name("valid");R===void 0&&T===1?z(F,()=>y.if(F,()=>y.break())):T===0?(y.let(F,!0),R!==void 0&&y.if((0,s._)`${w}.length > 0`,H)):(y.let(F,!1),H()),f.result(F,()=>f.reset());function H(){const G=y.name("_valid"),Y=y.let("count",0);z(G,()=>y.if(G,()=>U(Y)))}function z(G,Y){y.forRange("i",0,L,K=>{f.subschema({keyword:"contains",dataProp:K,dataPropType:n.Type.Num,compositeRule:!0},G),Y()})}function U(G){y.code((0,s._)`${G}++`),R===void 0?y.if((0,s._)`${G} >= ${T}`,()=>y.assign(F,!0).break()):(y.if((0,s._)`${G} > ${R}`,()=>y.assign(F,!1).break()),T===1?y.assign(F,!0):y.if((0,s._)`${G} >= ${T}`,()=>y.assign(F,!0)))}}};return contains.default=u,contains}var dependencies={},hasRequiredDependencies;function requireDependencies(){return hasRequiredDependencies||(hasRequiredDependencies=1,(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.validateSchemaDeps=s.validatePropertyDeps=s.error=void 0;const n=requireCodegen(),u=requireUtil(),f=requireCode();s.error={message:({params:{property:C,depsCount:T,deps:R}})=>{const I=T===1?"property":"properties";return(0,n.str)`must have ${I} ${R} when property ${C} is present`},params:({params:{property:C,depsCount:T,deps:R,missingProperty:I}})=>(0,n._)`{property: ${C},
    missingProperty: ${I},
    depsCount: ${T},
    deps: ${R}}`};const y={keyword:"dependencies",type:"object",schemaType:"object",error:s.error,code(C){const[T,R]=S(C);A(C,T),w(C,R)}};function S({schema:C}){const T={},R={};for(const I in C){if(I==="__proto__")continue;const N=Array.isArray(C[I])?T:R;N[I]=C[I]}return[T,R]}function A(C,T=C.schema){const{gen:R,data:I,it:N}=C;if(Object.keys(T).length===0)return;const L=R.let("missing");for(const F in T){const H=T[F];if(H.length===0)continue;const z=(0,f.propertyInData)(R,I,F,N.opts.ownProperties);C.setParams({property:F,depsCount:H.length,deps:H.join(", ")}),N.allErrors?R.if(z,()=>{for(const U of H)(0,f.checkReportMissingProp)(C,U)}):(R.if((0,n._)`${z} && (${(0,f.checkMissingProp)(C,H,L)})`),(0,f.reportMissingProp)(C,L),R.else())}}s.validatePropertyDeps=A;function w(C,T=C.schema){const{gen:R,data:I,keyword:N,it:L}=C,F=R.name("valid");for(const H in T)(0,u.alwaysValidSchema)(L,T[H])||(R.if((0,f.propertyInData)(R,I,H,L.opts.ownProperties),()=>{const z=C.subschema({keyword:N,schemaProp:H},F);C.mergeValidEvaluated(z,F)},()=>R.var(F,!0)),C.ok(F))}s.validateSchemaDeps=w,s.default=y})(dependencies)),dependencies}var propertyNames={},hasRequiredPropertyNames;function requirePropertyNames(){if(hasRequiredPropertyNames)return propertyNames;hasRequiredPropertyNames=1,Object.defineProperty(propertyNames,"__esModule",{value:!0});const s=requireCodegen(),n=requireUtil(),u={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:f})=>(0,s._)`{propertyName: ${f.propertyName}}`},code(f){const{gen:y,schema:S,data:A,it:w}=f;if((0,n.alwaysValidSchema)(w,S))return;const C=y.name("valid");y.forIn("key",A,T=>{f.setParams({propertyName:T}),f.subschema({keyword:"propertyNames",data:T,dataTypes:["string"],propertyName:T,compositeRule:!0},C),y.if((0,s.not)(C),()=>{f.error(!0),w.allErrors||y.break()})}),f.ok(C)}};return propertyNames.default=u,propertyNames}var additionalProperties={},hasRequiredAdditionalProperties;function requireAdditionalProperties(){if(hasRequiredAdditionalProperties)return additionalProperties;hasRequiredAdditionalProperties=1,Object.defineProperty(additionalProperties,"__esModule",{value:!0});const s=requireCode(),n=requireCodegen(),u=requireNames(),f=requireUtil(),y={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:S})=>(0,n._)`{additionalProperty: ${S.additionalProperty}}`},code(S){const{gen:A,schema:w,parentSchema:C,data:T,errsCount:R,it:I}=S;if(!R)throw new Error("ajv implementation error");const{allErrors:N,opts:L}=I;if(I.props=!0,L.removeAdditional!=="all"&&(0,f.alwaysValidSchema)(I,w))return;const F=(0,s.allSchemaProperties)(C.properties),H=(0,s.allSchemaProperties)(C.patternProperties);z(),S.ok((0,n._)`${R} === ${u.default.errors}`);function z(){A.forIn("key",T,Z=>{!F.length&&!H.length?Y(Z):A.if(U(Z),()=>Y(Z))})}function U(Z){let J;if(F.length>8){const te=(0,f.schemaRefOrVal)(I,C.properties,"properties");J=(0,s.isOwnProperty)(A,te,Z)}else F.length?J=(0,n.or)(...F.map(te=>(0,n._)`${Z} === ${te}`)):J=n.nil;return H.length&&(J=(0,n.or)(J,...H.map(te=>(0,n._)`${(0,s.usePattern)(S,te)}.test(${Z})`))),(0,n.not)(J)}function G(Z){A.code((0,n._)`delete ${T}[${Z}]`)}function Y(Z){if(L.removeAdditional==="all"||L.removeAdditional&&w===!1){G(Z);return}if(w===!1){S.setParams({additionalProperty:Z}),S.error(),N||A.break();return}if(typeof w=="object"&&!(0,f.alwaysValidSchema)(I,w)){const J=A.name("valid");L.removeAdditional==="failing"?(K(Z,J,!1),A.if((0,n.not)(J),()=>{S.reset(),G(Z)})):(K(Z,J),N||A.if((0,n.not)(J),()=>A.break()))}}function K(Z,J,te){const de={keyword:"additionalProperties",dataProp:Z,dataPropType:f.Type.Str};te===!1&&Object.assign(de,{compositeRule:!0,createErrors:!1,allErrors:!1}),S.subschema(de,J)}}};return additionalProperties.default=y,additionalProperties}var properties$1={},hasRequiredProperties;function requireProperties(){if(hasRequiredProperties)return properties$1;hasRequiredProperties=1,Object.defineProperty(properties$1,"__esModule",{value:!0});const s=requireValidate(),n=requireCode(),u=requireUtil(),f=requireAdditionalProperties(),y={keyword:"properties",type:"object",schemaType:"object",code(S){const{gen:A,schema:w,parentSchema:C,data:T,it:R}=S;R.opts.removeAdditional==="all"&&C.additionalProperties===void 0&&f.default.code(new s.KeywordCxt(R,f.default,"additionalProperties"));const I=(0,n.allSchemaProperties)(w);for(const z of I)R.definedProperties.add(z);R.opts.unevaluated&&I.length&&R.props!==!0&&(R.props=u.mergeEvaluated.props(A,(0,u.toHash)(I),R.props));const N=I.filter(z=>!(0,u.alwaysValidSchema)(R,w[z]));if(N.length===0)return;const L=A.name("valid");for(const z of N)F(z)?H(z):(A.if((0,n.propertyInData)(A,T,z,R.opts.ownProperties)),H(z),R.allErrors||A.else().var(L,!0),A.endIf()),S.it.definedProperties.add(z),S.ok(L);function F(z){return R.opts.useDefaults&&!R.compositeRule&&w[z].default!==void 0}function H(z){S.subschema({keyword:"properties",schemaProp:z,dataProp:z},L)}}};return properties$1.default=y,properties$1}var patternProperties={},hasRequiredPatternProperties;function requirePatternProperties(){if(hasRequiredPatternProperties)return patternProperties;hasRequiredPatternProperties=1,Object.defineProperty(patternProperties,"__esModule",{value:!0});const s=requireCode(),n=requireCodegen(),u=requireUtil(),f=requireUtil(),y={keyword:"patternProperties",type:"object",schemaType:"object",code(S){const{gen:A,schema:w,data:C,parentSchema:T,it:R}=S,{opts:I}=R,N=(0,s.allSchemaProperties)(w),L=N.filter(K=>(0,u.alwaysValidSchema)(R,w[K]));if(N.length===0||L.length===N.length&&(!R.opts.unevaluated||R.props===!0))return;const F=I.strictSchema&&!I.allowMatchingProperties&&T.properties,H=A.name("valid");R.props!==!0&&!(R.props instanceof n.Name)&&(R.props=(0,f.evaluatedPropsToName)(A,R.props));const{props:z}=R;U();function U(){for(const K of N)F&&G(K),R.allErrors?Y(K):(A.var(H,!0),Y(K),A.if(H))}function G(K){for(const Z in F)new RegExp(K).test(Z)&&(0,u.checkStrictMode)(R,`property ${Z} matches pattern ${K} (use allowMatchingProperties)`)}function Y(K){A.forIn("key",C,Z=>{A.if((0,n._)`${(0,s.usePattern)(S,K)}.test(${Z})`,()=>{const J=L.includes(K);J||S.subschema({keyword:"patternProperties",schemaProp:K,dataProp:Z,dataPropType:f.Type.Str},H),R.opts.unevaluated&&z!==!0?A.assign((0,n._)`${z}[${Z}]`,!0):!J&&!R.allErrors&&A.if((0,n.not)(H),()=>A.break())})})}}};return patternProperties.default=y,patternProperties}var not={},hasRequiredNot;function requireNot(){if(hasRequiredNot)return not;hasRequiredNot=1,Object.defineProperty(not,"__esModule",{value:!0});const s=requireUtil(),n={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(u){const{gen:f,schema:y,it:S}=u;if((0,s.alwaysValidSchema)(S,y)){u.fail();return}const A=f.name("valid");u.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},A),u.failResult(A,()=>u.reset(),()=>u.error())},error:{message:"must NOT be valid"}};return not.default=n,not}var anyOf={},hasRequiredAnyOf;function requireAnyOf(){if(hasRequiredAnyOf)return anyOf;hasRequiredAnyOf=1,Object.defineProperty(anyOf,"__esModule",{value:!0});const s={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:requireCode().validateUnion,error:{message:"must match a schema in anyOf"}};return anyOf.default=s,anyOf}var oneOf={},hasRequiredOneOf;function requireOneOf(){if(hasRequiredOneOf)return oneOf;hasRequiredOneOf=1,Object.defineProperty(oneOf,"__esModule",{value:!0});const s=requireCodegen(),n=requireUtil(),u={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:f})=>(0,s._)`{passingSchemas: ${f.passing}}`},code(f){const{gen:y,schema:S,parentSchema:A,it:w}=f;if(!Array.isArray(S))throw new Error("ajv implementation error");if(w.opts.discriminator&&A.discriminator)return;const C=S,T=y.let("valid",!1),R=y.let("passing",null),I=y.name("_valid");f.setParams({passing:R}),y.block(N),f.result(T,()=>f.reset(),()=>f.error(!0));function N(){C.forEach((L,F)=>{let H;(0,n.alwaysValidSchema)(w,L)?y.var(I,!0):H=f.subschema({keyword:"oneOf",schemaProp:F,compositeRule:!0},I),F>0&&y.if((0,s._)`${I} && ${T}`).assign(T,!1).assign(R,(0,s._)`[${R}, ${F}]`).else(),y.if(I,()=>{y.assign(T,!0),y.assign(R,F),H&&f.mergeEvaluated(H,s.Name)})})}}};return oneOf.default=u,oneOf}var allOf={},hasRequiredAllOf;function requireAllOf(){if(hasRequiredAllOf)return allOf;hasRequiredAllOf=1,Object.defineProperty(allOf,"__esModule",{value:!0});const s=requireUtil(),n={keyword:"allOf",schemaType:"array",code(u){const{gen:f,schema:y,it:S}=u;if(!Array.isArray(y))throw new Error("ajv implementation error");const A=f.name("valid");y.forEach((w,C)=>{if((0,s.alwaysValidSchema)(S,w))return;const T=u.subschema({keyword:"allOf",schemaProp:C},A);u.ok(A),u.mergeEvaluated(T)})}};return allOf.default=n,allOf}var _if={},hasRequired_if;function require_if(){if(hasRequired_if)return _if;hasRequired_if=1,Object.defineProperty(_if,"__esModule",{value:!0});const s=requireCodegen(),n=requireUtil(),u={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:y})=>(0,s.str)`must match "${y.ifClause}" schema`,params:({params:y})=>(0,s._)`{failingKeyword: ${y.ifClause}}`},code(y){const{gen:S,parentSchema:A,it:w}=y;A.then===void 0&&A.else===void 0&&(0,n.checkStrictMode)(w,'"if" without "then" and "else" is ignored');const C=f(w,"then"),T=f(w,"else");if(!C&&!T)return;const R=S.let("valid",!0),I=S.name("_valid");if(N(),y.reset(),C&&T){const F=S.let("ifClause");y.setParams({ifClause:F}),S.if(I,L("then",F),L("else",F))}else C?S.if(I,L("then")):S.if((0,s.not)(I),L("else"));y.pass(R,()=>y.error(!0));function N(){const F=y.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},I);y.mergeEvaluated(F)}function L(F,H){return()=>{const z=y.subschema({keyword:F},I);S.assign(R,I),y.mergeValidEvaluated(z,R),H?S.assign(H,(0,s._)`${F}`):y.setParams({ifClause:F})}}}};function f(y,S){const A=y.schema[S];return A!==void 0&&!(0,n.alwaysValidSchema)(y,A)}return _if.default=u,_if}var thenElse={},hasRequiredThenElse;function requireThenElse(){if(hasRequiredThenElse)return thenElse;hasRequiredThenElse=1,Object.defineProperty(thenElse,"__esModule",{value:!0});const s=requireUtil(),n={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:u,parentSchema:f,it:y}){f.if===void 0&&(0,s.checkStrictMode)(y,`"${u}" without "if" is ignored`)}};return thenElse.default=n,thenElse}var hasRequiredApplicator;function requireApplicator(){if(hasRequiredApplicator)return applicator;hasRequiredApplicator=1,Object.defineProperty(applicator,"__esModule",{value:!0});const s=requireAdditionalItems(),n=requirePrefixItems(),u=requireItems(),f=requireItems2020(),y=requireContains(),S=requireDependencies(),A=requirePropertyNames(),w=requireAdditionalProperties(),C=requireProperties(),T=requirePatternProperties(),R=requireNot(),I=requireAnyOf(),N=requireOneOf(),L=requireAllOf(),F=require_if(),H=requireThenElse();function z(U=!1){const G=[R.default,I.default,N.default,L.default,F.default,H.default,A.default,w.default,S.default,C.default,T.default];return U?G.push(n.default,f.default):G.push(s.default,u.default),G.push(y.default),G}return applicator.default=z,applicator}var format$1={},format={},hasRequiredFormat$1;function requireFormat$1(){if(hasRequiredFormat$1)return format;hasRequiredFormat$1=1,Object.defineProperty(format,"__esModule",{value:!0});const s=requireCodegen(),n={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:u})=>(0,s.str)`must match format "${u}"`,params:({schemaCode:u})=>(0,s._)`{format: ${u}}`},code(u,f){const{gen:y,data:S,$data:A,schema:w,schemaCode:C,it:T}=u,{opts:R,errSchemaPath:I,schemaEnv:N,self:L}=T;if(!R.validateFormats)return;A?F():H();function F(){const z=y.scopeValue("formats",{ref:L.formats,code:R.code.formats}),U=y.const("fDef",(0,s._)`${z}[${C}]`),G=y.let("fType"),Y=y.let("format");y.if((0,s._)`typeof ${U} == "object" && !(${U} instanceof RegExp)`,()=>y.assign(G,(0,s._)`${U}.type || "string"`).assign(Y,(0,s._)`${U}.validate`),()=>y.assign(G,(0,s._)`"string"`).assign(Y,U)),u.fail$data((0,s.or)(K(),Z()));function K(){return R.strictSchema===!1?s.nil:(0,s._)`${C} && !${Y}`}function Z(){const J=N.$async?(0,s._)`(${U}.async ? await ${Y}(${S}) : ${Y}(${S}))`:(0,s._)`${Y}(${S})`,te=(0,s._)`(typeof ${Y} == "function" ? ${J} : ${Y}.test(${S}))`;return(0,s._)`${Y} && ${Y} !== true && ${G} === ${f} && !${te}`}}function H(){const z=L.formats[w];if(!z){K();return}if(z===!0)return;const[U,G,Y]=Z(z);U===f&&u.pass(J());function K(){if(R.strictSchema===!1){L.logger.warn(te());return}throw new Error(te());function te(){return`unknown format "${w}" ignored in schema at path "${I}"`}}function Z(te){const de=te instanceof RegExp?(0,s.regexpCode)(te):R.code.formats?(0,s._)`${R.code.formats}${(0,s.getProperty)(w)}`:void 0,se=y.scopeValue("formats",{key:w,ref:te,code:de});return typeof te=="object"&&!(te instanceof RegExp)?[te.type||"string",te.validate,(0,s._)`${se}.validate`]:["string",te,se]}function J(){if(typeof z=="object"&&!(z instanceof RegExp)&&z.async){if(!N.$async)throw new Error("async format in sync schema");return(0,s._)`await ${Y}(${S})`}return typeof G=="function"?(0,s._)`${Y}(${S})`:(0,s._)`${Y}.test(${S})`}}}};return format.default=n,format}var hasRequiredFormat;function requireFormat(){if(hasRequiredFormat)return format$1;hasRequiredFormat=1,Object.defineProperty(format$1,"__esModule",{value:!0});const s=[requireFormat$1().default];return format$1.default=s,format$1}var metadata={},hasRequiredMetadata;function requireMetadata(){return hasRequiredMetadata||(hasRequiredMetadata=1,Object.defineProperty(metadata,"__esModule",{value:!0}),metadata.contentVocabulary=metadata.metadataVocabulary=void 0,metadata.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],metadata.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]),metadata}var hasRequiredDraft7;function requireDraft7(){if(hasRequiredDraft7)return draft7;hasRequiredDraft7=1,Object.defineProperty(draft7,"__esModule",{value:!0});const s=requireCore(),n=requireValidation(),u=requireApplicator(),f=requireFormat(),y=requireMetadata(),S=[s.default,n.default,(0,u.default)(),f.default,y.metadataVocabulary,y.contentVocabulary];return draft7.default=S,draft7}var discriminator={},types={},hasRequiredTypes;function requireTypes(){if(hasRequiredTypes)return types;hasRequiredTypes=1,Object.defineProperty(types,"__esModule",{value:!0}),types.DiscrError=void 0;var s;return(function(n){n.Tag="tag",n.Mapping="mapping"})(s||(types.DiscrError=s={})),types}var hasRequiredDiscriminator;function requireDiscriminator(){if(hasRequiredDiscriminator)return discriminator;hasRequiredDiscriminator=1,Object.defineProperty(discriminator,"__esModule",{value:!0});const s=requireCodegen(),n=requireTypes(),u=requireCompile(),f=requireRef_error(),y=requireUtil(),S={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:A,tagName:w}})=>A===n.DiscrError.Tag?`tag "${w}" must be string`:`value of tag "${w}" must be in oneOf`,params:({params:{discrError:A,tag:w,tagName:C}})=>(0,s._)`{error: ${A}, tag: ${C}, tagValue: ${w}}`},code(A){const{gen:w,data:C,schema:T,parentSchema:R,it:I}=A,{oneOf:N}=R;if(!I.opts.discriminator)throw new Error("discriminator: requires discriminator option");const L=T.propertyName;if(typeof L!="string")throw new Error("discriminator: requires propertyName");if(T.mapping)throw new Error("discriminator: mapping is not supported");if(!N)throw new Error("discriminator: requires oneOf keyword");const F=w.let("valid",!1),H=w.const("tag",(0,s._)`${C}${(0,s.getProperty)(L)}`);w.if((0,s._)`typeof ${H} == "string"`,()=>z(),()=>A.error(!1,{discrError:n.DiscrError.Tag,tag:H,tagName:L})),A.ok(F);function z(){const Y=G();w.if(!1);for(const K in Y)w.elseIf((0,s._)`${H} === ${K}`),w.assign(F,U(Y[K]));w.else(),A.error(!1,{discrError:n.DiscrError.Mapping,tag:H,tagName:L}),w.endIf()}function U(Y){const K=w.name("valid"),Z=A.subschema({keyword:"oneOf",schemaProp:Y},K);return A.mergeEvaluated(Z,s.Name),K}function G(){var Y;const K={},Z=te(R);let J=!0;for(let ne=0;ne<N.length;ne++){let ge=N[ne];if(ge?.$ref&&!(0,y.schemaHasRulesButRef)(ge,I.self.RULES)){const we=ge.$ref;if(ge=u.resolveRef.call(I.self,I.schemaEnv.root,I.baseId,we),ge instanceof u.SchemaEnv&&(ge=ge.schema),ge===void 0)throw new f.default(I.opts.uriResolver,I.baseId,we)}const Ee=(Y=ge?.properties)===null||Y===void 0?void 0:Y[L];if(typeof Ee!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${L}"`);J=J&&(Z||te(ge)),de(Ee,ne)}if(!J)throw new Error(`discriminator: "${L}" must be required`);return K;function te({required:ne}){return Array.isArray(ne)&&ne.includes(L)}function de(ne,ge){if(ne.const)se(ne.const,ge);else if(ne.enum)for(const Ee of ne.enum)se(Ee,ge);else throw new Error(`discriminator: "properties/${L}" must have "const" or "enum"`)}function se(ne,ge){if(typeof ne!="string"||ne in K)throw new Error(`discriminator: "${L}" values must be unique strings`);K[ne]=ge}}}};return discriminator.default=S,discriminator}const $schema="http://json-schema.org/draft-07/schema#",$id="http://json-schema.org/draft-07/schema#",title="Core schema meta-schema",definitions={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type=["object","boolean"],properties={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},require$$3={$schema,$id,title,definitions,type,properties,default:!0};var hasRequiredAjv;function requireAjv(){return hasRequiredAjv||(hasRequiredAjv=1,(function(s,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MissingRefError=n.ValidationError=n.CodeGen=n.Name=n.nil=n.stringify=n.str=n._=n.KeywordCxt=n.Ajv=void 0;const u=requireCore$1(),f=requireDraft7(),y=requireDiscriminator(),S=require$$3,A=["/properties"],w="http://json-schema.org/draft-07/schema";class C extends u.default{_addVocabularies(){super._addVocabularies(),f.default.forEach(F=>this.addVocabulary(F)),this.opts.discriminator&&this.addKeyword(y.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const F=this.opts.$data?this.$dataMetaSchema(S,A):S;this.addMetaSchema(F,w,!1),this.refs["http://json-schema.org/schema"]=w}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(w)?w:void 0)}}n.Ajv=C,s.exports=n=C,s.exports.Ajv=C,Object.defineProperty(n,"__esModule",{value:!0}),n.default=C;var T=requireValidate();Object.defineProperty(n,"KeywordCxt",{enumerable:!0,get:function(){return T.KeywordCxt}});var R=requireCodegen();Object.defineProperty(n,"_",{enumerable:!0,get:function(){return R._}}),Object.defineProperty(n,"str",{enumerable:!0,get:function(){return R.str}}),Object.defineProperty(n,"stringify",{enumerable:!0,get:function(){return R.stringify}}),Object.defineProperty(n,"nil",{enumerable:!0,get:function(){return R.nil}}),Object.defineProperty(n,"Name",{enumerable:!0,get:function(){return R.Name}}),Object.defineProperty(n,"CodeGen",{enumerable:!0,get:function(){return R.CodeGen}});var I=requireValidation_error();Object.defineProperty(n,"ValidationError",{enumerable:!0,get:function(){return I.default}});var N=requireRef_error();Object.defineProperty(n,"MissingRefError",{enumerable:!0,get:function(){return N.default}})})(ajv,ajv.exports)),ajv.exports}var hasRequiredLimit;function requireLimit(){return hasRequiredLimit||(hasRequiredLimit=1,(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.formatLimitDefinition=void 0;const n=requireAjv(),u=requireCodegen(),f=u.operators,y={formatMaximum:{okStr:"<=",ok:f.LTE,fail:f.GT},formatMinimum:{okStr:">=",ok:f.GTE,fail:f.LT},formatExclusiveMaximum:{okStr:"<",ok:f.LT,fail:f.GTE},formatExclusiveMinimum:{okStr:">",ok:f.GT,fail:f.LTE}},S={message:({keyword:w,schemaCode:C})=>(0,u.str)`should be ${y[w].okStr} ${C}`,params:({keyword:w,schemaCode:C})=>(0,u._)`{comparison: ${y[w].okStr}, limit: ${C}}`};s.formatLimitDefinition={keyword:Object.keys(y),type:"string",schemaType:"string",$data:!0,error:S,code(w){const{gen:C,data:T,schemaCode:R,keyword:I,it:N}=w,{opts:L,self:F}=N;if(!L.validateFormats)return;const H=new n.KeywordCxt(N,F.RULES.all.format.definition,"format");H.$data?z():U();function z(){const Y=C.scopeValue("formats",{ref:F.formats,code:L.code.formats}),K=C.const("fmt",(0,u._)`${Y}[${H.schemaCode}]`);w.fail$data((0,u.or)((0,u._)`typeof ${K} != "object"`,(0,u._)`${K} instanceof RegExp`,(0,u._)`typeof ${K}.compare != "function"`,G(K)))}function U(){const Y=H.schema,K=F.formats[Y];if(!K||K===!0)return;if(typeof K!="object"||K instanceof RegExp||typeof K.compare!="function")throw new Error(`"${I}": format "${Y}" does not define "compare" function`);const Z=C.scopeValue("formats",{key:Y,ref:K,code:L.code.formats?(0,u._)`${L.code.formats}${(0,u.getProperty)(Y)}`:void 0});w.fail$data(G(Z))}function G(Y){return(0,u._)`${Y}.compare(${T}, ${R}) ${y[I].fail} 0`}},dependencies:["format"]};const A=w=>(w.addKeyword(s.formatLimitDefinition),w);s.default=A})(limit)),limit}var hasRequiredDist;function requireDist(){return hasRequiredDist||(hasRequiredDist=1,(function(s,n){Object.defineProperty(n,"__esModule",{value:!0});const u=requireFormats(),f=requireLimit(),y=requireCodegen(),S=new y.Name("fullFormats"),A=new y.Name("fastFormats"),w=(T,R={keywords:!0})=>{if(Array.isArray(R))return C(T,R,u.fullFormats,S),T;const[I,N]=R.mode==="fast"?[u.fastFormats,A]:[u.fullFormats,S],L=R.formats||u.formatNames;return C(T,L,I,N),R.keywords&&(0,f.default)(T),T};w.get=(T,R="full")=>{const I=(R==="fast"?u.fastFormats:u.fullFormats)[T];if(!I)throw new Error(`Unknown format "${T}"`);return I};function C(T,R,I,N){var L,F;(L=(F=T.opts.code).formats)!==null&&L!==void 0||(F.formats=(0,y._)`require("ajv-formats/dist/formats").${N}`);for(const H of R)T.addFormat(H,I[H])}s.exports=n=w,Object.defineProperty(n,"__esModule",{value:!0}),n.default=w})(dist,dist.exports)),dist.exports}var distExports=requireDist();const _addFormats=getDefaultExportFromCjs(distExports);function createDefaultAjvInstance(){const s=new Ajv({strict:!1,validateFormats:!0,validateSchema:!1,allErrors:!0});return _addFormats(s),s}class AjvJsonSchemaValidator{constructor(n){this._ajv=n??createDefaultAjvInstance()}getValidator(n){const u="$id"in n&&typeof n.$id=="string"?this._ajv.getSchema(n.$id)??this._ajv.compile(n):this._ajv.compile(n);return f=>u(f)?{valid:!0,data:f,errorMessage:void 0}:{valid:!1,data:void 0,errorMessage:this._ajv.errorsText(u.errors)}}}class ExperimentalClientTasks{constructor(n){this._client=n}async*callToolStream(n,u=CallToolResultSchema,f){const y=this._client,S={...f,task:f?.task??(y.isToolTask(n.name)?{}:void 0)},A=y.requestStream({method:"tools/call",params:n},u,S),w=y.getToolOutputValidator(n.name);for await(const C of A){if(C.type==="result"&&w){const T=C.result;if(!T.structuredContent&&!T.isError){yield{type:"error",error:new McpError(ErrorCode.InvalidRequest,`Tool ${n.name} has an output schema but did not return structured content`)};return}if(T.structuredContent)try{const R=w(T.structuredContent);if(!R.valid){yield{type:"error",error:new McpError(ErrorCode.InvalidParams,`Structured content does not match the tool's output schema: ${R.errorMessage}`)};return}}catch(R){if(R instanceof McpError){yield{type:"error",error:R};return}yield{type:"error",error:new McpError(ErrorCode.InvalidParams,`Failed to validate structured content: ${R instanceof Error?R.message:String(R)}`)};return}}yield C}}async getTask(n,u){return this._client.getTask({taskId:n},u)}async getTaskResult(n,u,f){return this._client.getTaskResult({taskId:n},u,f)}async listTasks(n,u){return this._client.listTasks(n?{cursor:n}:void 0,u)}async cancelTask(n,u){return this._client.cancelTask({taskId:n},u)}requestStream(n,u,f){return this._client.requestStream(n,u,f)}}function assertToolsCallTaskCapability(s,n,u){if(!s)throw new Error(`${u} does not support task creation (required for ${n})`);switch(n){case"tools/call":if(!s.tools?.call)throw new Error(`${u} does not support task creation for tools/call (required for ${n})`);break}}function assertClientRequestTaskCapability(s,n,u){if(!s)throw new Error(`${u} does not support task creation (required for ${n})`);switch(n){case"sampling/createMessage":if(!s.sampling?.createMessage)throw new Error(`${u} does not support task creation for sampling/createMessage (required for ${n})`);break;case"elicitation/create":if(!s.elicitation?.create)throw new Error(`${u} does not support task creation for elicitation/create (required for ${n})`);break}}function applyElicitationDefaults(s,n){if(!(!s||n===null||typeof n!="object")){if(s.type==="object"&&s.properties&&typeof s.properties=="object"){const u=n,f=s.properties;for(const y of Object.keys(f)){const S=f[y];u[y]===void 0&&Object.prototype.hasOwnProperty.call(S,"default")&&(u[y]=S.default),u[y]!==void 0&&applyElicitationDefaults(S,u[y])}}if(Array.isArray(s.anyOf))for(const u of s.anyOf)typeof u!="boolean"&&applyElicitationDefaults(u,n);if(Array.isArray(s.oneOf))for(const u of s.oneOf)typeof u!="boolean"&&applyElicitationDefaults(u,n)}}function getSupportedElicitationModes(s){if(!s)return{supportsFormMode:!1,supportsUrlMode:!1};const n=s.form!==void 0,u=s.url!==void 0;return{supportsFormMode:n||!n&&!u,supportsUrlMode:u}}class Client extends Protocol{constructor(n,u){super(u),this._clientInfo=n,this._cachedToolOutputValidators=new Map,this._cachedKnownTaskTools=new Set,this._cachedRequiredTaskTools=new Set,this._listChangedDebounceTimers=new Map,this._capabilities=u?.capabilities??{},this._jsonSchemaValidator=u?.jsonSchemaValidator??new AjvJsonSchemaValidator,u?.listChanged&&(this._pendingListChangedConfig=u.listChanged)}_setupListChangedHandlers(n){n.tools&&this._serverCapabilities?.tools?.listChanged&&this._setupListChangedHandler("tools",ToolListChangedNotificationSchema,n.tools,async()=>(await this.listTools()).tools),n.prompts&&this._serverCapabilities?.prompts?.listChanged&&this._setupListChangedHandler("prompts",PromptListChangedNotificationSchema,n.prompts,async()=>(await this.listPrompts()).prompts),n.resources&&this._serverCapabilities?.resources?.listChanged&&this._setupListChangedHandler("resources",ResourceListChangedNotificationSchema,n.resources,async()=>(await this.listResources()).resources)}get experimental(){return this._experimental||(this._experimental={tasks:new ExperimentalClientTasks(this)}),this._experimental}registerCapabilities(n){if(this.transport)throw new Error("Cannot register capabilities after connecting to transport");this._capabilities=mergeCapabilities(this._capabilities,n)}setRequestHandler(n,u){const f=getObjectShape(n)?.method;if(!f)throw new Error("Schema is missing a method literal");let y;if(isZ4Schema(f)){const A=f;y=A._zod?.def?.value??A.value}else{const A=f;y=A._def?.value??A.value}if(typeof y!="string")throw new Error("Schema method literal must be a string");const S=y;if(S==="elicitation/create"){const A=async(w,C)=>{const T=safeParse$1(ElicitRequestSchema,w);if(!T.success){const U=T.error instanceof Error?T.error.message:String(T.error);throw new McpError(ErrorCode.InvalidParams,`Invalid elicitation request: ${U}`)}const{params:R}=T.data;R.mode=R.mode??"form";const{supportsFormMode:I,supportsUrlMode:N}=getSupportedElicitationModes(this._capabilities.elicitation);if(R.mode==="form"&&!I)throw new McpError(ErrorCode.InvalidParams,"Client does not support form-mode elicitation requests");if(R.mode==="url"&&!N)throw new McpError(ErrorCode.InvalidParams,"Client does not support URL-mode elicitation requests");const L=await Promise.resolve(u(w,C));if(R.task){const U=safeParse$1(CreateTaskResultSchema,L);if(!U.success){const G=U.error instanceof Error?U.error.message:String(U.error);throw new McpError(ErrorCode.InvalidParams,`Invalid task creation result: ${G}`)}return U.data}const F=safeParse$1(ElicitResultSchema,L);if(!F.success){const U=F.error instanceof Error?F.error.message:String(F.error);throw new McpError(ErrorCode.InvalidParams,`Invalid elicitation result: ${U}`)}const H=F.data,z=R.mode==="form"?R.requestedSchema:void 0;if(R.mode==="form"&&H.action==="accept"&&H.content&&z&&this._capabilities.elicitation?.form?.applyDefaults)try{applyElicitationDefaults(z,H.content)}catch{}return H};return super.setRequestHandler(n,A)}if(S==="sampling/createMessage"){const A=async(w,C)=>{const T=safeParse$1(CreateMessageRequestSchema,w);if(!T.success){const F=T.error instanceof Error?T.error.message:String(T.error);throw new McpError(ErrorCode.InvalidParams,`Invalid sampling request: ${F}`)}const{params:R}=T.data,I=await Promise.resolve(u(w,C));if(R.task){const F=safeParse$1(CreateTaskResultSchema,I);if(!F.success){const H=F.error instanceof Error?F.error.message:String(F.error);throw new McpError(ErrorCode.InvalidParams,`Invalid task creation result: ${H}`)}return F.data}const N=R.tools||R.toolChoice?CreateMessageResultWithToolsSchema:CreateMessageResultSchema,L=safeParse$1(N,I);if(!L.success){const F=L.error instanceof Error?L.error.message:String(L.error);throw new McpError(ErrorCode.InvalidParams,`Invalid sampling result: ${F}`)}return L.data};return super.setRequestHandler(n,A)}return super.setRequestHandler(n,u)}assertCapability(n,u){if(!this._serverCapabilities?.[n])throw new Error(`Server does not support ${n} (required for ${u})`)}async connect(n,u){if(await super.connect(n),n.sessionId===void 0)try{const f=await this.request({method:"initialize",params:{protocolVersion:LATEST_PROTOCOL_VERSION,capabilities:this._capabilities,clientInfo:this._clientInfo}},InitializeResultSchema,u);if(f===void 0)throw new Error(`Server sent invalid initialize result: ${f}`);if(!SUPPORTED_PROTOCOL_VERSIONS.includes(f.protocolVersion))throw new Error(`Server's protocol version is not supported: ${f.protocolVersion}`);this._serverCapabilities=f.capabilities,this._serverVersion=f.serverInfo,n.setProtocolVersion&&n.setProtocolVersion(f.protocolVersion),this._instructions=f.instructions,await this.notification({method:"notifications/initialized"}),this._pendingListChangedConfig&&(this._setupListChangedHandlers(this._pendingListChangedConfig),this._pendingListChangedConfig=void 0)}catch(f){throw this.close(),f}}getServerCapabilities(){return this._serverCapabilities}getServerVersion(){return this._serverVersion}getInstructions(){return this._instructions}assertCapabilityForMethod(n){switch(n){case"logging/setLevel":if(!this._serverCapabilities?.logging)throw new Error(`Server does not support logging (required for ${n})`);break;case"prompts/get":case"prompts/list":if(!this._serverCapabilities?.prompts)throw new Error(`Server does not support prompts (required for ${n})`);break;case"resources/list":case"resources/templates/list":case"resources/read":case"resources/subscribe":case"resources/unsubscribe":if(!this._serverCapabilities?.resources)throw new Error(`Server does not support resources (required for ${n})`);if(n==="resources/subscribe"&&!this._serverCapabilities.resources.subscribe)throw new Error(`Server does not support resource subscriptions (required for ${n})`);break;case"tools/call":case"tools/list":if(!this._serverCapabilities?.tools)throw new Error(`Server does not support tools (required for ${n})`);break;case"completion/complete":if(!this._serverCapabilities?.completions)throw new Error(`Server does not support completions (required for ${n})`);break}}assertNotificationCapability(n){switch(n){case"notifications/roots/list_changed":if(!this._capabilities.roots?.listChanged)throw new Error(`Client does not support roots list changed notifications (required for ${n})`);break}}assertRequestHandlerCapability(n){if(this._capabilities)switch(n){case"sampling/createMessage":if(!this._capabilities.sampling)throw new Error(`Client does not support sampling capability (required for ${n})`);break;case"elicitation/create":if(!this._capabilities.elicitation)throw new Error(`Client does not support elicitation capability (required for ${n})`);break;case"roots/list":if(!this._capabilities.roots)throw new Error(`Client does not support roots capability (required for ${n})`);break;case"tasks/get":case"tasks/list":case"tasks/result":case"tasks/cancel":if(!this._capabilities.tasks)throw new Error(`Client does not support tasks capability (required for ${n})`);break}}assertTaskCapability(n){assertToolsCallTaskCapability(this._serverCapabilities?.tasks?.requests,n,"Server")}assertTaskHandlerCapability(n){this._capabilities&&assertClientRequestTaskCapability(this._capabilities.tasks?.requests,n,"Client")}async ping(n){return this.request({method:"ping"},EmptyResultSchema,n)}async complete(n,u){return this.request({method:"completion/complete",params:n},CompleteResultSchema,u)}async setLoggingLevel(n,u){return this.request({method:"logging/setLevel",params:{level:n}},EmptyResultSchema,u)}async getPrompt(n,u){return this.request({method:"prompts/get",params:n},GetPromptResultSchema,u)}async listPrompts(n,u){return this.request({method:"prompts/list",params:n},ListPromptsResultSchema,u)}async listResources(n,u){return this.request({method:"resources/list",params:n},ListResourcesResultSchema,u)}async listResourceTemplates(n,u){return this.request({method:"resources/templates/list",params:n},ListResourceTemplatesResultSchema,u)}async readResource(n,u){return this.request({method:"resources/read",params:n},ReadResourceResultSchema,u)}async subscribeResource(n,u){return this.request({method:"resources/subscribe",params:n},EmptyResultSchema,u)}async unsubscribeResource(n,u){return this.request({method:"resources/unsubscribe",params:n},EmptyResultSchema,u)}async callTool(n,u=CallToolResultSchema,f){if(this.isToolTaskRequired(n.name))throw new McpError(ErrorCode.InvalidRequest,`Tool "${n.name}" requires task-based execution. Use client.experimental.tasks.callToolStream() instead.`);const y=await this.request({method:"tools/call",params:n},u,f),S=this.getToolOutputValidator(n.name);if(S){if(!y.structuredContent&&!y.isError)throw new McpError(ErrorCode.InvalidRequest,`Tool ${n.name} has an output schema but did not return structured content`);if(y.structuredContent)try{const A=S(y.structuredContent);if(!A.valid)throw new McpError(ErrorCode.InvalidParams,`Structured content does not match the tool's output schema: ${A.errorMessage}`)}catch(A){throw A instanceof McpError?A:new McpError(ErrorCode.InvalidParams,`Failed to validate structured content: ${A instanceof Error?A.message:String(A)}`)}}return y}isToolTask(n){return this._serverCapabilities?.tasks?.requests?.tools?.call?this._cachedKnownTaskTools.has(n):!1}isToolTaskRequired(n){return this._cachedRequiredTaskTools.has(n)}cacheToolMetadata(n){this._cachedToolOutputValidators.clear(),this._cachedKnownTaskTools.clear(),this._cachedRequiredTaskTools.clear();for(const u of n){if(u.outputSchema){const y=this._jsonSchemaValidator.getValidator(u.outputSchema);this._cachedToolOutputValidators.set(u.name,y)}const f=u.execution?.taskSupport;(f==="required"||f==="optional")&&this._cachedKnownTaskTools.add(u.name),f==="required"&&this._cachedRequiredTaskTools.add(u.name)}}getToolOutputValidator(n){return this._cachedToolOutputValidators.get(n)}async listTools(n,u){const f=await this.request({method:"tools/list",params:n},ListToolsResultSchema,u);return this.cacheToolMetadata(f.tools),f}_setupListChangedHandler(n,u,f,y){const S=ListChangedOptionsBaseSchema.safeParse(f);if(!S.success)throw new Error(`Invalid ${n} listChanged options: ${S.error.message}`);if(typeof f.onChanged!="function")throw new Error(`Invalid ${n} listChanged options: onChanged must be a function`);const{autoRefresh:A,debounceMs:w}=S.data,{onChanged:C}=f,T=async()=>{if(!A){C(null,null);return}try{const I=await y();C(null,I)}catch(I){const N=I instanceof Error?I:new Error(String(I));C(N,null)}},R=()=>{if(w){const I=this._listChangedDebounceTimers.get(n);I&&clearTimeout(I);const N=setTimeout(T,w);this._listChangedDebounceTimers.set(n,N)}else T()};this.setNotificationHandler(u,R)}async sendRootsListChanged(){return this.notification({method:"notifications/roots/list_changed"})}}class ParseError extends Error{constructor(n,u){super(n),this.name="ParseError",this.type=u.type,this.field=u.field,this.value=u.value,this.line=u.line}}function noop(s){}function createParser(s){if(typeof s=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");const{onEvent:n=noop,onError:u=noop,onRetry:f=noop,onComment:y}=s;let S="",A=!0,w,C="",T="";function R(H){const z=A?H.replace(/^\xEF\xBB\xBF/,""):H,[U,G]=splitLines(`${S}${z}`);for(const Y of U)I(Y);S=G,A=!1}function I(H){if(H===""){L();return}if(H.startsWith(":")){y&&y(H.slice(H.startsWith(": ")?2:1));return}const z=H.indexOf(":");if(z!==-1){const U=H.slice(0,z),G=H[z+1]===" "?2:1,Y=H.slice(z+G);N(U,Y,H);return}N(H,"",H)}function N(H,z,U){switch(H){case"event":T=z;break;case"data":C=`${C}${z}
`;break;case"id":w=z.includes("\0")?void 0:z;break;case"retry":/^\d+$/.test(z)?f(parseInt(z,10)):u(new ParseError(`Invalid \`retry\` value: "${z}"`,{type:"invalid-retry",value:z,line:U}));break;default:u(new ParseError(`Unknown field "${H.length>20?`${H.slice(0,20)}`:H}"`,{type:"unknown-field",field:H,value:z,line:U}));break}}function L(){C.length>0&&n({id:w,event:T||void 0,data:C.endsWith(`
`)?C.slice(0,-1):C}),w=void 0,C="",T=""}function F(H={}){S&&H.consume&&I(S),A=!0,w=void 0,C="",T="",S=""}return{feed:R,reset:F}}function splitLines(s){const n=[];let u="",f=0;for(;f<s.length;){const y=s.indexOf("\r",f),S=s.indexOf(`
`,f);let A=-1;if(y!==-1&&S!==-1?A=Math.min(y,S):y!==-1?y===s.length-1?A=-1:A=y:S!==-1&&(A=S),A===-1){u=s.slice(f);break}else{const w=s.slice(f,A);n.push(w),f=A+1,s[f-1]==="\r"&&s[f]===`
`&&f++}}return[n,u]}class ErrorEvent extends Event{constructor(n,u){var f,y;super(n),this.code=(f=u?.code)!=null?f:void 0,this.message=(y=u?.message)!=null?y:void 0}[Symbol.for("nodejs.util.inspect.custom")](n,u,f){return f(inspectableError(this),u)}[Symbol.for("Deno.customInspect")](n,u){return n(inspectableError(this),u)}}function syntaxError(s){const n=globalThis.DOMException;return typeof n=="function"?new n(s,"SyntaxError"):new SyntaxError(s)}function flattenError(s){return s instanceof Error?"errors"in s&&Array.isArray(s.errors)?s.errors.map(flattenError).join(", "):"cause"in s&&s.cause instanceof Error?`${s}: ${flattenError(s.cause)}`:s.message:`${s}`}function inspectableError(s){return{type:s.type,message:s.message,code:s.code,defaultPrevented:s.defaultPrevented,cancelable:s.cancelable,timeStamp:s.timeStamp}}var __typeError=s=>{throw TypeError(s)},__accessCheck=(s,n,u)=>n.has(s)||__typeError("Cannot "+u),__privateGet=(s,n,u)=>(__accessCheck(s,n,"read from private field"),u?u.call(s):n.get(s)),__privateAdd=(s,n,u)=>n.has(s)?__typeError("Cannot add the same private member more than once"):n instanceof WeakSet?n.add(s):n.set(s,u),__privateSet=(s,n,u,f)=>(__accessCheck(s,n,"write to private field"),n.set(s,u),u),__privateMethod=(s,n,u)=>(__accessCheck(s,n,"access private method"),u),_readyState,_url,_redirectUrl,_withCredentials,_fetch,_reconnectInterval,_reconnectTimer,_lastEventId,_controller,_parser,_onError,_onMessage,_onOpen,_EventSource_instances,connect_fn,_onFetchResponse,_onFetchError,getRequestOptions_fn,_onEvent,_onRetryChange,failConnection_fn,scheduleReconnect_fn,_reconnect;class EventSource extends EventTarget{constructor(n,u){var f,y;super(),__privateAdd(this,_EventSource_instances),this.CONNECTING=0,this.OPEN=1,this.CLOSED=2,__privateAdd(this,_readyState),__privateAdd(this,_url),__privateAdd(this,_redirectUrl),__privateAdd(this,_withCredentials),__privateAdd(this,_fetch),__privateAdd(this,_reconnectInterval),__privateAdd(this,_reconnectTimer),__privateAdd(this,_lastEventId,null),__privateAdd(this,_controller),__privateAdd(this,_parser),__privateAdd(this,_onError,null),__privateAdd(this,_onMessage,null),__privateAdd(this,_onOpen,null),__privateAdd(this,_onFetchResponse,async S=>{var A;__privateGet(this,_parser).reset();const{body:w,redirected:C,status:T,headers:R}=S;if(T===204){__privateMethod(this,_EventSource_instances,failConnection_fn).call(this,"Server sent HTTP 204, not reconnecting",204),this.close();return}if(C?__privateSet(this,_redirectUrl,new URL(S.url)):__privateSet(this,_redirectUrl,void 0),T!==200){__privateMethod(this,_EventSource_instances,failConnection_fn).call(this,`Non-200 status code (${T})`,T);return}if(!(R.get("content-type")||"").startsWith("text/event-stream")){__privateMethod(this,_EventSource_instances,failConnection_fn).call(this,'Invalid content type, expected "text/event-stream"',T);return}if(__privateGet(this,_readyState)===this.CLOSED)return;__privateSet(this,_readyState,this.OPEN);const I=new Event("open");if((A=__privateGet(this,_onOpen))==null||A.call(this,I),this.dispatchEvent(I),typeof w!="object"||!w||!("getReader"in w)){__privateMethod(this,_EventSource_instances,failConnection_fn).call(this,"Invalid response body, expected a web ReadableStream",T),this.close();return}const N=new TextDecoder,L=w.getReader();let F=!0;do{const{done:H,value:z}=await L.read();z&&__privateGet(this,_parser).feed(N.decode(z,{stream:!H})),H&&(F=!1,__privateGet(this,_parser).reset(),__privateMethod(this,_EventSource_instances,scheduleReconnect_fn).call(this))}while(F)}),__privateAdd(this,_onFetchError,S=>{__privateSet(this,_controller,void 0),!(S.name==="AbortError"||S.type==="aborted")&&__privateMethod(this,_EventSource_instances,scheduleReconnect_fn).call(this,flattenError(S))}),__privateAdd(this,_onEvent,S=>{typeof S.id=="string"&&__privateSet(this,_lastEventId,S.id);const A=new MessageEvent(S.event||"message",{data:S.data,origin:__privateGet(this,_redirectUrl)?__privateGet(this,_redirectUrl).origin:__privateGet(this,_url).origin,lastEventId:S.id||""});__privateGet(this,_onMessage)&&(!S.event||S.event==="message")&&__privateGet(this,_onMessage).call(this,A),this.dispatchEvent(A)}),__privateAdd(this,_onRetryChange,S=>{__privateSet(this,_reconnectInterval,S)}),__privateAdd(this,_reconnect,()=>{__privateSet(this,_reconnectTimer,void 0),__privateGet(this,_readyState)===this.CONNECTING&&__privateMethod(this,_EventSource_instances,connect_fn).call(this)});try{if(n instanceof URL)__privateSet(this,_url,n);else if(typeof n=="string")__privateSet(this,_url,new URL(n,getBaseURL()));else throw new Error("Invalid URL")}catch{throw syntaxError("An invalid or illegal string was specified")}__privateSet(this,_parser,createParser({onEvent:__privateGet(this,_onEvent),onRetry:__privateGet(this,_onRetryChange)})),__privateSet(this,_readyState,this.CONNECTING),__privateSet(this,_reconnectInterval,3e3),__privateSet(this,_fetch,(f=u?.fetch)!=null?f:globalThis.fetch),__privateSet(this,_withCredentials,(y=u?.withCredentials)!=null?y:!1),__privateMethod(this,_EventSource_instances,connect_fn).call(this)}get readyState(){return __privateGet(this,_readyState)}get url(){return __privateGet(this,_url).href}get withCredentials(){return __privateGet(this,_withCredentials)}get onerror(){return __privateGet(this,_onError)}set onerror(n){__privateSet(this,_onError,n)}get onmessage(){return __privateGet(this,_onMessage)}set onmessage(n){__privateSet(this,_onMessage,n)}get onopen(){return __privateGet(this,_onOpen)}set onopen(n){__privateSet(this,_onOpen,n)}addEventListener(n,u,f){const y=u;super.addEventListener(n,y,f)}removeEventListener(n,u,f){const y=u;super.removeEventListener(n,y,f)}close(){__privateGet(this,_reconnectTimer)&&clearTimeout(__privateGet(this,_reconnectTimer)),__privateGet(this,_readyState)!==this.CLOSED&&(__privateGet(this,_controller)&&__privateGet(this,_controller).abort(),__privateSet(this,_readyState,this.CLOSED),__privateSet(this,_controller,void 0))}}_readyState=new WeakMap,_url=new WeakMap,_redirectUrl=new WeakMap,_withCredentials=new WeakMap,_fetch=new WeakMap,_reconnectInterval=new WeakMap,_reconnectTimer=new WeakMap,_lastEventId=new WeakMap,_controller=new WeakMap,_parser=new WeakMap,_onError=new WeakMap,_onMessage=new WeakMap,_onOpen=new WeakMap,_EventSource_instances=new WeakSet,connect_fn=function(){__privateSet(this,_readyState,this.CONNECTING),__privateSet(this,_controller,new AbortController),__privateGet(this,_fetch)(__privateGet(this,_url),__privateMethod(this,_EventSource_instances,getRequestOptions_fn).call(this)).then(__privateGet(this,_onFetchResponse)).catch(__privateGet(this,_onFetchError))},_onFetchResponse=new WeakMap,_onFetchError=new WeakMap,getRequestOptions_fn=function(){var s;const n={mode:"cors",redirect:"follow",headers:{Accept:"text/event-stream",...__privateGet(this,_lastEventId)?{"Last-Event-ID":__privateGet(this,_lastEventId)}:void 0},cache:"no-store",signal:(s=__privateGet(this,_controller))==null?void 0:s.signal};return"window"in globalThis&&(n.credentials=this.withCredentials?"include":"same-origin"),n},_onEvent=new WeakMap,_onRetryChange=new WeakMap,failConnection_fn=function(s,n){var u;__privateGet(this,_readyState)!==this.CLOSED&&__privateSet(this,_readyState,this.CLOSED);const f=new ErrorEvent("error",{code:n,message:s});(u=__privateGet(this,_onError))==null||u.call(this,f),this.dispatchEvent(f)},scheduleReconnect_fn=function(s,n){var u;if(__privateGet(this,_readyState)===this.CLOSED)return;__privateSet(this,_readyState,this.CONNECTING);const f=new ErrorEvent("error",{code:n,message:s});(u=__privateGet(this,_onError))==null||u.call(this,f),this.dispatchEvent(f),__privateSet(this,_reconnectTimer,setTimeout(__privateGet(this,_reconnect),__privateGet(this,_reconnectInterval)))},_reconnect=new WeakMap,EventSource.CONNECTING=0,EventSource.OPEN=1,EventSource.CLOSED=2;function getBaseURL(){const s="document"in globalThis?globalThis.document:void 0;return s&&typeof s=="object"&&"baseURI"in s&&typeof s.baseURI=="string"?s.baseURI:void 0}function normalizeHeaders(s){return s?s instanceof Headers?Object.fromEntries(s.entries()):Array.isArray(s)?Object.fromEntries(s):{...s}:{}}function createFetchWithInit(s=fetch,n){return n?async(u,f)=>{const y={...n,...f,headers:f?.headers?{...normalizeHeaders(n.headers),...normalizeHeaders(f.headers)}:n.headers};return s(u,y)}:s}let crypto$1;crypto$1=globalThis.crypto;async function getRandomValues(s){return(await crypto$1).getRandomValues(new Uint8Array(s))}async function random(s){const n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-._~",u=Math.pow(2,8)-Math.pow(2,8)%n.length;let f="";for(;f.length<s;){const y=await getRandomValues(s-f.length);for(const S of y)S<u&&(f+=n[S%n.length])}return f}async function generateVerifier(s){return await random(s)}async function generateChallenge(s){const n=await(await crypto$1).subtle.digest("SHA-256",new TextEncoder().encode(s));return btoa(String.fromCharCode(...new Uint8Array(n))).replace(/\//g,"_").replace(/\+/g,"-").replace(/=/g,"")}async function pkceChallenge(s){if(s||(s=43),s<43||s>128)throw`Expected a length between 43 and 128. Received ${s}.`;const n=await generateVerifier(s),u=await generateChallenge(n);return{code_verifier:n,code_challenge:u}}const SafeUrlSchema=url().superRefine((s,n)=>{if(!URL.canParse(s))return n.addIssue({code:ZodIssueCode.custom,message:"URL must be parseable",fatal:!0}),NEVER}).refine(s=>{const n=new URL(s);return n.protocol!=="javascript:"&&n.protocol!=="data:"&&n.protocol!=="vbscript:"},{message:"URL cannot use javascript:, data:, or vbscript: scheme"}),OAuthProtectedResourceMetadataSchema=looseObject({resource:string().url(),authorization_servers:array(SafeUrlSchema).optional(),jwks_uri:string().url().optional(),scopes_supported:array(string()).optional(),bearer_methods_supported:array(string()).optional(),resource_signing_alg_values_supported:array(string()).optional(),resource_name:string().optional(),resource_documentation:string().optional(),resource_policy_uri:string().url().optional(),resource_tos_uri:string().url().optional(),tls_client_certificate_bound_access_tokens:boolean().optional(),authorization_details_types_supported:array(string()).optional(),dpop_signing_alg_values_supported:array(string()).optional(),dpop_bound_access_tokens_required:boolean().optional()}),OAuthMetadataSchema=looseObject({issuer:string(),authorization_endpoint:SafeUrlSchema,token_endpoint:SafeUrlSchema,registration_endpoint:SafeUrlSchema.optional(),scopes_supported:array(string()).optional(),response_types_supported:array(string()),response_modes_supported:array(string()).optional(),grant_types_supported:array(string()).optional(),token_endpoint_auth_methods_supported:array(string()).optional(),token_endpoint_auth_signing_alg_values_supported:array(string()).optional(),service_documentation:SafeUrlSchema.optional(),revocation_endpoint:SafeUrlSchema.optional(),revocation_endpoint_auth_methods_supported:array(string()).optional(),revocation_endpoint_auth_signing_alg_values_supported:array(string()).optional(),introspection_endpoint:string().optional(),introspection_endpoint_auth_methods_supported:array(string()).optional(),introspection_endpoint_auth_signing_alg_values_supported:array(string()).optional(),code_challenge_methods_supported:array(string()).optional(),client_id_metadata_document_supported:boolean().optional()}),OpenIdProviderMetadataSchema=looseObject({issuer:string(),authorization_endpoint:SafeUrlSchema,token_endpoint:SafeUrlSchema,userinfo_endpoint:SafeUrlSchema.optional(),jwks_uri:SafeUrlSchema,registration_endpoint:SafeUrlSchema.optional(),scopes_supported:array(string()).optional(),response_types_supported:array(string()),response_modes_supported:array(string()).optional(),grant_types_supported:array(string()).optional(),acr_values_supported:array(string()).optional(),subject_types_supported:array(string()),id_token_signing_alg_values_supported:array(string()),id_token_encryption_alg_values_supported:array(string()).optional(),id_token_encryption_enc_values_supported:array(string()).optional(),userinfo_signing_alg_values_supported:array(string()).optional(),userinfo_encryption_alg_values_supported:array(string()).optional(),userinfo_encryption_enc_values_supported:array(string()).optional(),request_object_signing_alg_values_supported:array(string()).optional(),request_object_encryption_alg_values_supported:array(string()).optional(),request_object_encryption_enc_values_supported:array(string()).optional(),token_endpoint_auth_methods_supported:array(string()).optional(),token_endpoint_auth_signing_alg_values_supported:array(string()).optional(),display_values_supported:array(string()).optional(),claim_types_supported:array(string()).optional(),claims_supported:array(string()).optional(),service_documentation:string().optional(),claims_locales_supported:array(string()).optional(),ui_locales_supported:array(string()).optional(),claims_parameter_supported:boolean().optional(),request_parameter_supported:boolean().optional(),request_uri_parameter_supported:boolean().optional(),require_request_uri_registration:boolean().optional(),op_policy_uri:SafeUrlSchema.optional(),op_tos_uri:SafeUrlSchema.optional(),client_id_metadata_document_supported:boolean().optional()}),OpenIdProviderDiscoveryMetadataSchema=object({...OpenIdProviderMetadataSchema.shape,...OAuthMetadataSchema.pick({code_challenge_methods_supported:!0}).shape}),OAuthTokensSchema=object({access_token:string(),id_token:string().optional(),token_type:string(),expires_in:number().optional(),scope:string().optional(),refresh_token:string().optional()}).strip(),OAuthErrorResponseSchema=object({error:string(),error_description:string().optional(),error_uri:string().optional()}),OptionalSafeUrlSchema=SafeUrlSchema.optional().or(literal("").transform(()=>{})),OAuthClientMetadataSchema=object({redirect_uris:array(SafeUrlSchema),token_endpoint_auth_method:string().optional(),grant_types:array(string()).optional(),response_types:array(string()).optional(),client_name:string().optional(),client_uri:SafeUrlSchema.optional(),logo_uri:OptionalSafeUrlSchema,scope:string().optional(),contacts:array(string()).optional(),tos_uri:OptionalSafeUrlSchema,policy_uri:string().optional(),jwks_uri:SafeUrlSchema.optional(),jwks:any().optional(),software_id:string().optional(),software_version:string().optional(),software_statement:string().optional()}).strip(),OAuthClientInformationSchema=object({client_id:string(),client_secret:string().optional(),client_id_issued_at:number$1().optional(),client_secret_expires_at:number$1().optional()}).strip(),OAuthClientInformationFullSchema=OAuthClientMetadataSchema.merge(OAuthClientInformationSchema);object({error:string(),error_description:string().optional()}).strip();object({token:string(),token_type_hint:string().optional()}).strip();function resourceUrlFromServerUrl(s){const n=typeof s=="string"?new URL(s):new URL(s.href);return n.hash="",n}function checkResourceAllowed({requestedResource:s,configuredResource:n}){const u=typeof s=="string"?new URL(s):new URL(s.href),f=typeof n=="string"?new URL(n):new URL(n.href);if(u.origin!==f.origin||u.pathname.length<f.pathname.length)return!1;const y=u.pathname.endsWith("/")?u.pathname:u.pathname+"/",S=f.pathname.endsWith("/")?f.pathname:f.pathname+"/";return y.startsWith(S)}class OAuthError extends Error{constructor(n,u){super(n),this.errorUri=u,this.name=this.constructor.name}toResponseObject(){const n={error:this.errorCode,error_description:this.message};return this.errorUri&&(n.error_uri=this.errorUri),n}get errorCode(){return this.constructor.errorCode}}class InvalidRequestError extends OAuthError{}InvalidRequestError.errorCode="invalid_request";class InvalidClientError extends OAuthError{}InvalidClientError.errorCode="invalid_client";class InvalidGrantError extends OAuthError{}InvalidGrantError.errorCode="invalid_grant";class UnauthorizedClientError extends OAuthError{}UnauthorizedClientError.errorCode="unauthorized_client";class UnsupportedGrantTypeError extends OAuthError{}UnsupportedGrantTypeError.errorCode="unsupported_grant_type";class InvalidScopeError extends OAuthError{}InvalidScopeError.errorCode="invalid_scope";class AccessDeniedError extends OAuthError{}AccessDeniedError.errorCode="access_denied";class ServerError extends OAuthError{}ServerError.errorCode="server_error";class TemporarilyUnavailableError extends OAuthError{}TemporarilyUnavailableError.errorCode="temporarily_unavailable";class UnsupportedResponseTypeError extends OAuthError{}UnsupportedResponseTypeError.errorCode="unsupported_response_type";class UnsupportedTokenTypeError extends OAuthError{}UnsupportedTokenTypeError.errorCode="unsupported_token_type";class InvalidTokenError extends OAuthError{}InvalidTokenError.errorCode="invalid_token";class MethodNotAllowedError extends OAuthError{}MethodNotAllowedError.errorCode="method_not_allowed";class TooManyRequestsError extends OAuthError{}TooManyRequestsError.errorCode="too_many_requests";class InvalidClientMetadataError extends OAuthError{}InvalidClientMetadataError.errorCode="invalid_client_metadata";class InsufficientScopeError extends OAuthError{}InsufficientScopeError.errorCode="insufficient_scope";class InvalidTargetError extends OAuthError{}InvalidTargetError.errorCode="invalid_target";const OAUTH_ERRORS={[InvalidRequestError.errorCode]:InvalidRequestError,[InvalidClientError.errorCode]:InvalidClientError,[InvalidGrantError.errorCode]:InvalidGrantError,[UnauthorizedClientError.errorCode]:UnauthorizedClientError,[UnsupportedGrantTypeError.errorCode]:UnsupportedGrantTypeError,[InvalidScopeError.errorCode]:InvalidScopeError,[AccessDeniedError.errorCode]:AccessDeniedError,[ServerError.errorCode]:ServerError,[TemporarilyUnavailableError.errorCode]:TemporarilyUnavailableError,[UnsupportedResponseTypeError.errorCode]:UnsupportedResponseTypeError,[UnsupportedTokenTypeError.errorCode]:UnsupportedTokenTypeError,[InvalidTokenError.errorCode]:InvalidTokenError,[MethodNotAllowedError.errorCode]:MethodNotAllowedError,[TooManyRequestsError.errorCode]:TooManyRequestsError,[InvalidClientMetadataError.errorCode]:InvalidClientMetadataError,[InsufficientScopeError.errorCode]:InsufficientScopeError,[InvalidTargetError.errorCode]:InvalidTargetError};class UnauthorizedError extends Error{constructor(n){super(n??"Unauthorized")}}function isClientAuthMethod(s){return["client_secret_basic","client_secret_post","none"].includes(s)}const AUTHORIZATION_CODE_RESPONSE_TYPE="code",AUTHORIZATION_CODE_CHALLENGE_METHOD="S256";function selectClientAuthMethod(s,n){const u=s.client_secret!==void 0;return n.length===0?u?"client_secret_post":"none":"token_endpoint_auth_method"in s&&s.token_endpoint_auth_method&&isClientAuthMethod(s.token_endpoint_auth_method)&&n.includes(s.token_endpoint_auth_method)?s.token_endpoint_auth_method:u&&n.includes("client_secret_basic")?"client_secret_basic":u&&n.includes("client_secret_post")?"client_secret_post":n.includes("none")?"none":u?"client_secret_post":"none"}function applyClientAuthentication(s,n,u,f){const{client_id:y,client_secret:S}=n;switch(s){case"client_secret_basic":applyBasicAuth(y,S,u);return;case"client_secret_post":applyPostAuth(y,S,f);return;case"none":applyPublicAuth(y,f);return;default:throw new Error(`Unsupported client authentication method: ${s}`)}}function applyBasicAuth(s,n,u){if(!n)throw new Error("client_secret_basic authentication requires a client_secret");const f=btoa(`${s}:${n}`);u.set("Authorization",`Basic ${f}`)}function applyPostAuth(s,n,u){u.set("client_id",s),n&&u.set("client_secret",n)}function applyPublicAuth(s,n){n.set("client_id",s)}async function parseErrorResponse(s){const n=s instanceof Response?s.status:void 0,u=s instanceof Response?await s.text():s;try{const f=OAuthErrorResponseSchema.parse(JSON.parse(u)),{error:y,error_description:S,error_uri:A}=f,w=OAUTH_ERRORS[y]||ServerError;return new w(S||"",A)}catch(f){const y=`${n?`HTTP ${n}: `:""}Invalid OAuth error response: ${f}. Raw body: ${u}`;return new ServerError(y)}}async function auth(s,n){try{return await authInternal(s,n)}catch(u){if(u instanceof InvalidClientError||u instanceof UnauthorizedClientError)return await s.invalidateCredentials?.("all"),await authInternal(s,n);if(u instanceof InvalidGrantError)return await s.invalidateCredentials?.("tokens"),await authInternal(s,n);throw u}}async function authInternal(s,{serverUrl:n,authorizationCode:u,scope:f,resourceMetadataUrl:y,fetchFn:S}){let A,w;try{A=await discoverOAuthProtectedResourceMetadata(n,{resourceMetadataUrl:y},S),A.authorization_servers&&A.authorization_servers.length>0&&(w=A.authorization_servers[0])}catch{}w||(w=new URL("/",n));const C=await selectResourceURL(n,s,A),T=await discoverAuthorizationServerMetadata(w,{fetchFn:S});let R=await Promise.resolve(s.clientInformation());if(!R){if(u!==void 0)throw new Error("Existing OAuth client information is required when exchanging an authorization code");const z=T?.client_id_metadata_document_supported===!0,U=s.clientMetadataUrl;if(U&&!isHttpsUrl(U))throw new InvalidClientMetadataError(`clientMetadataUrl must be a valid HTTPS URL with a non-root pathname, got: ${U}`);if(z&&U)R={client_id:U},await s.saveClientInformation?.(R);else{if(!s.saveClientInformation)throw new Error("OAuth client information must be saveable for dynamic registration");const G=await registerClient(w,{metadata:T,clientMetadata:s.clientMetadata,fetchFn:S});await s.saveClientInformation(G),R=G}}const I=!s.redirectUrl;if(u!==void 0||I){const z=await fetchToken(s,w,{metadata:T,resource:C,authorizationCode:u,fetchFn:S});return await s.saveTokens(z),"AUTHORIZED"}const N=await s.tokens();if(N?.refresh_token)try{const z=await refreshAuthorization(w,{metadata:T,clientInformation:R,refreshToken:N.refresh_token,resource:C,addClientAuthentication:s.addClientAuthentication,fetchFn:S});return await s.saveTokens(z),"AUTHORIZED"}catch(z){if(!(!(z instanceof OAuthError)||z instanceof ServerError))throw z}const L=s.state?await s.state():void 0,{authorizationUrl:F,codeVerifier:H}=await startAuthorization(w,{metadata:T,clientInformation:R,state:L,redirectUrl:s.redirectUrl,scope:f||A?.scopes_supported?.join(" ")||s.clientMetadata.scope,resource:C});return await s.saveCodeVerifier(H),await s.redirectToAuthorization(F),"REDIRECT"}function isHttpsUrl(s){if(!s)return!1;try{const n=new URL(s);return n.protocol==="https:"&&n.pathname!=="/"}catch{return!1}}async function selectResourceURL(s,n,u){const f=resourceUrlFromServerUrl(s);if(n.validateResourceURL)return await n.validateResourceURL(f,u?.resource);if(u){if(!checkResourceAllowed({requestedResource:f,configuredResource:u.resource}))throw new Error(`Protected resource ${u.resource} does not match expected ${f} (or origin)`);return new URL(u.resource)}}function extractWWWAuthenticateParams(s){const n=s.headers.get("WWW-Authenticate");if(!n)return{};const[u,f]=n.split(" ");if(u.toLowerCase()!=="bearer"||!f)return{};const y=extractFieldFromWwwAuth(s,"resource_metadata")||void 0;let S;if(y)try{S=new URL(y)}catch{}const A=extractFieldFromWwwAuth(s,"scope")||void 0,w=extractFieldFromWwwAuth(s,"error")||void 0;return{resourceMetadataUrl:S,scope:A,error:w}}function extractFieldFromWwwAuth(s,n){const u=s.headers.get("WWW-Authenticate");if(!u)return null;const f=new RegExp(`${n}=(?:"([^"]+)"|([^\\s,]+))`),y=u.match(f);return y?y[1]||y[2]:null}async function discoverOAuthProtectedResourceMetadata(s,n,u=fetch){const f=await discoverMetadataWithFallback(s,"oauth-protected-resource",u,{protocolVersion:n?.protocolVersion,metadataUrl:n?.resourceMetadataUrl});if(!f||f.status===404)throw await f?.body?.cancel(),new Error("Resource server does not implement OAuth 2.0 Protected Resource Metadata.");if(!f.ok)throw await f.body?.cancel(),new Error(`HTTP ${f.status} trying to load well-known OAuth protected resource metadata.`);return OAuthProtectedResourceMetadataSchema.parse(await f.json())}async function fetchWithCorsRetry(s,n,u=fetch){try{return await u(s,{headers:n})}catch(f){if(f instanceof TypeError)return n?fetchWithCorsRetry(s,void 0,u):void 0;throw f}}function buildWellKnownPath(s,n="",u={}){return n.endsWith("/")&&(n=n.slice(0,-1)),u.prependPathname?`${n}/.well-known/${s}`:`/.well-known/${s}${n}`}async function tryMetadataDiscovery(s,n,u=fetch){return await fetchWithCorsRetry(s,{"MCP-Protocol-Version":n},u)}function shouldAttemptFallback(s,n){return!s||s.status>=400&&s.status<500&&n!=="/"}async function discoverMetadataWithFallback(s,n,u,f){const y=new URL(s),S=f?.protocolVersion??LATEST_PROTOCOL_VERSION;let A;if(f?.metadataUrl)A=new URL(f.metadataUrl);else{const C=buildWellKnownPath(n,y.pathname);A=new URL(C,f?.metadataServerUrl??y),A.search=y.search}let w=await tryMetadataDiscovery(A,S,u);if(!f?.metadataUrl&&shouldAttemptFallback(w,y.pathname)){const C=new URL(`/.well-known/${n}`,y);w=await tryMetadataDiscovery(C,S,u)}return w}function buildDiscoveryUrls(s){const n=typeof s=="string"?new URL(s):s,u=n.pathname!=="/",f=[];if(!u)return f.push({url:new URL("/.well-known/oauth-authorization-server",n.origin),type:"oauth"}),f.push({url:new URL("/.well-known/openid-configuration",n.origin),type:"oidc"}),f;let y=n.pathname;return y.endsWith("/")&&(y=y.slice(0,-1)),f.push({url:new URL(`/.well-known/oauth-authorization-server${y}`,n.origin),type:"oauth"}),f.push({url:new URL(`/.well-known/openid-configuration${y}`,n.origin),type:"oidc"}),f.push({url:new URL(`${y}/.well-known/openid-configuration`,n.origin),type:"oidc"}),f}async function discoverAuthorizationServerMetadata(s,{fetchFn:n=fetch,protocolVersion:u=LATEST_PROTOCOL_VERSION}={}){const f={"MCP-Protocol-Version":u,Accept:"application/json"},y=buildDiscoveryUrls(s);for(const{url:S,type:A}of y){const w=await fetchWithCorsRetry(S,f,n);if(w){if(!w.ok){if(await w.body?.cancel(),w.status>=400&&w.status<500)continue;throw new Error(`HTTP ${w.status} trying to load ${A==="oauth"?"OAuth":"OpenID provider"} metadata from ${S}`)}return A==="oauth"?OAuthMetadataSchema.parse(await w.json()):OpenIdProviderDiscoveryMetadataSchema.parse(await w.json())}}}async function startAuthorization(s,{metadata:n,clientInformation:u,redirectUrl:f,scope:y,state:S,resource:A}){let w;if(n){if(w=new URL(n.authorization_endpoint),!n.response_types_supported.includes(AUTHORIZATION_CODE_RESPONSE_TYPE))throw new Error(`Incompatible auth server: does not support response type ${AUTHORIZATION_CODE_RESPONSE_TYPE}`);if(n.code_challenge_methods_supported&&!n.code_challenge_methods_supported.includes(AUTHORIZATION_CODE_CHALLENGE_METHOD))throw new Error(`Incompatible auth server: does not support code challenge method ${AUTHORIZATION_CODE_CHALLENGE_METHOD}`)}else w=new URL("/authorize",s);const C=await pkceChallenge(),T=C.code_verifier,R=C.code_challenge;return w.searchParams.set("response_type",AUTHORIZATION_CODE_RESPONSE_TYPE),w.searchParams.set("client_id",u.client_id),w.searchParams.set("code_challenge",R),w.searchParams.set("code_challenge_method",AUTHORIZATION_CODE_CHALLENGE_METHOD),w.searchParams.set("redirect_uri",String(f)),S&&w.searchParams.set("state",S),y&&w.searchParams.set("scope",y),y?.includes("offline_access")&&w.searchParams.append("prompt","consent"),A&&w.searchParams.set("resource",A.href),{authorizationUrl:w,codeVerifier:T}}function prepareAuthorizationCodeRequest(s,n,u){return new URLSearchParams({grant_type:"authorization_code",code:s,code_verifier:n,redirect_uri:String(u)})}async function executeTokenRequest(s,{metadata:n,tokenRequestParams:u,clientInformation:f,addClientAuthentication:y,resource:S,fetchFn:A}){const w=n?.token_endpoint?new URL(n.token_endpoint):new URL("/token",s),C=new Headers({"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"});if(S&&u.set("resource",S.href),y)await y(C,u,w,n);else if(f){const R=n?.token_endpoint_auth_methods_supported??[],I=selectClientAuthMethod(f,R);applyClientAuthentication(I,f,C,u)}const T=await(A??fetch)(w,{method:"POST",headers:C,body:u});if(!T.ok)throw await parseErrorResponse(T);return OAuthTokensSchema.parse(await T.json())}async function refreshAuthorization(s,{metadata:n,clientInformation:u,refreshToken:f,resource:y,addClientAuthentication:S,fetchFn:A}){const w=new URLSearchParams({grant_type:"refresh_token",refresh_token:f}),C=await executeTokenRequest(s,{metadata:n,tokenRequestParams:w,clientInformation:u,addClientAuthentication:S,resource:y,fetchFn:A});return{refresh_token:f,...C}}async function fetchToken(s,n,{metadata:u,resource:f,authorizationCode:y,fetchFn:S}={}){const A=s.clientMetadata.scope;let w;if(s.prepareTokenRequest&&(w=await s.prepareTokenRequest(A)),!w){if(!y)throw new Error("Either provider.prepareTokenRequest() or authorizationCode is required");if(!s.redirectUrl)throw new Error("redirectUrl is required for authorization_code flow");const T=await s.codeVerifier();w=prepareAuthorizationCodeRequest(y,T,s.redirectUrl)}const C=await s.clientInformation();return executeTokenRequest(n,{metadata:u,tokenRequestParams:w,clientInformation:C??void 0,addClientAuthentication:s.addClientAuthentication,resource:f,fetchFn:S})}async function registerClient(s,{metadata:n,clientMetadata:u,fetchFn:f}){let y;if(n){if(!n.registration_endpoint)throw new Error("Incompatible auth server: does not support dynamic client registration");y=new URL(n.registration_endpoint)}else y=new URL("/register",s);const S=await(f??fetch)(y,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)});if(!S.ok)throw await parseErrorResponse(S);return OAuthClientInformationFullSchema.parse(await S.json())}class SseError extends Error{constructor(n,u,f){super(`SSE error: ${u}`),this.code=n,this.event=f}}class SSEClientTransport{constructor(n,u){this._url=n,this._resourceMetadataUrl=void 0,this._scope=void 0,this._eventSourceInit=u?.eventSourceInit,this._requestInit=u?.requestInit,this._authProvider=u?.authProvider,this._fetch=u?.fetch,this._fetchWithInit=createFetchWithInit(u?.fetch,u?.requestInit)}async _authThenStart(){if(!this._authProvider)throw new UnauthorizedError("No auth provider");let n;try{n=await auth(this._authProvider,{serverUrl:this._url,resourceMetadataUrl:this._resourceMetadataUrl,scope:this._scope,fetchFn:this._fetchWithInit})}catch(u){throw this.onerror?.(u),u}if(n!=="AUTHORIZED")throw new UnauthorizedError;return await this._startOrAuth()}async _commonHeaders(){const n={};if(this._authProvider){const f=await this._authProvider.tokens();f&&(n.Authorization=`Bearer ${f.access_token}`)}this._protocolVersion&&(n["mcp-protocol-version"]=this._protocolVersion);const u=normalizeHeaders(this._requestInit?.headers);return new Headers({...n,...u})}_startOrAuth(){const n=this?._eventSourceInit?.fetch??this._fetch??fetch;return new Promise((u,f)=>{this._eventSource=new EventSource(this._url.href,{...this._eventSourceInit,fetch:async(y,S)=>{const A=await this._commonHeaders();A.set("Accept","text/event-stream");const w=await n(y,{...S,headers:A});if(w.status===401&&w.headers.has("www-authenticate")){const{resourceMetadataUrl:C,scope:T}=extractWWWAuthenticateParams(w);this._resourceMetadataUrl=C,this._scope=T}return w}}),this._abortController=new AbortController,this._eventSource.onerror=y=>{if(y.code===401&&this._authProvider){this._authThenStart().then(u,f);return}const S=new SseError(y.code,y.message,y);f(S),this.onerror?.(S)},this._eventSource.onopen=()=>{},this._eventSource.addEventListener("endpoint",y=>{const S=y;try{if(this._endpoint=new URL(S.data,this._url),this._endpoint.origin!==this._url.origin)throw new Error(`Endpoint origin does not match connection origin: ${this._endpoint.origin}`)}catch(A){f(A),this.onerror?.(A),this.close();return}u()}),this._eventSource.onmessage=y=>{const S=y;let A;try{A=JSONRPCMessageSchema.parse(JSON.parse(S.data))}catch(w){this.onerror?.(w);return}this.onmessage?.(A)}})}async start(){if(this._eventSource)throw new Error("SSEClientTransport already started! If using Client class, note that connect() calls start() automatically.");return await this._startOrAuth()}async finishAuth(n){if(!this._authProvider)throw new UnauthorizedError("No auth provider");if(await auth(this._authProvider,{serverUrl:this._url,authorizationCode:n,resourceMetadataUrl:this._resourceMetadataUrl,scope:this._scope,fetchFn:this._fetchWithInit})!=="AUTHORIZED")throw new UnauthorizedError("Failed to authorize")}async close(){this._abortController?.abort(),this._eventSource?.close(),this.onclose?.()}async send(n){if(!this._endpoint)throw new Error("Not connected");try{const u=await this._commonHeaders();u.set("content-type","application/json");const f={...this._requestInit,method:"POST",headers:u,body:JSON.stringify(n),signal:this._abortController?.signal},y=await(this._fetch??fetch)(this._endpoint,f);if(!y.ok){const S=await y.text().catch(()=>null);if(y.status===401&&this._authProvider){const{resourceMetadataUrl:A,scope:w}=extractWWWAuthenticateParams(y);if(this._resourceMetadataUrl=A,this._scope=w,await auth(this._authProvider,{serverUrl:this._url,resourceMetadataUrl:this._resourceMetadataUrl,scope:this._scope,fetchFn:this._fetchWithInit})!=="AUTHORIZED")throw new UnauthorizedError;return this.send(n)}throw new Error(`Error POSTing to endpoint (HTTP ${y.status}): ${S}`)}await y.body?.cancel()}catch(u){throw this.onerror?.(u),u}}setProtocolVersion(n){this._protocolVersion=n}}class MCPConnectionManager{clients=new Map;connectionLocks=new Map;mcpEndpoints=[];async connect(n,u){if(this.connectionLocks.has(n)){await this.connectionLocks.get(n),u&&u();return}console.log(`[MCP Client] Connecting to ${n}...`);const f=(async()=>{try{const y=new URL(n,typeof window<"u"?window.location.origin:"http://localhost"),S=new SSEClientTransport(y),A=new Client({name:"agent-neo-client",version:"1.0.0"},{capabilities:{}});await A.connect(S),this.clients.set(n,A),console.log(`[MCP Client] Successfully connected to ${n}`),await this.refreshTools(n)}catch(y){console.error(`[MCP Client] Failed to connect to ${n}:`,y),this.connectionLocks.delete(n)}})();this.connectionLocks.set(n,f),await f,u&&u()}async refreshTools(n){const u=this.clients.get(n);if(u)try{const f=(await u.listTools()).tools.map(y=>({name:y.name,description:y.description||"MCP Extracted Tool",inputSchema:y.inputSchema,mcpBacked:!0,handler:async S=>(console.log(`[MCP Client] Calling tool ${y.name} with payload:`,S),await u.callTool({name:y.name,arguments:S}))}));this.mcpEndpoints=[...this.mcpEndpoints.filter(y=>!f.find(S=>S.name===y.name)),...f],console.log(`[MCP Client] Fetched ${f.length} tools from ${n}`)}catch(f){console.error(`[MCP Client] Failed to list tools from ${n}:`,f)}}getEndpoints(){return this.mcpEndpoints}}const mcpManager=new MCPConnectionManager,Agent=({config:s,preset:n,context:u,user:f,onAction:y})=>{const[S,A]=reactExports.useState(!1),w=React.useRef(null),[C,T]=reactExports.useState(0);reactExports.useEffect(()=>{console.log("Conversion software version 7.0"),s.mcpServers&&s.mcpServers.length>0?Promise.all(s.mcpServers.map(U=>mcpManager.connect(U,()=>T(G=>G+1)))):T(1)},[s.mcpServers]);const R=React.useMemo(()=>{let U={...s,endpoints:[...s.endpoints||[]]};if(n&&presets[n]){const G=presets[n];U={...G,...s,endpoints:[...G.endpoints||[],...s.endpoints||[]],intents:[...G.intents||[],...s.intents||[]]}}if(C>0){const G=mcpManager.getEndpoints();G.length>0&&(U.endpoints=[...U.endpoints,...G])}return U},[s,n,C]),[I,N]=reactExports.useState("idle"),[L,F]=reactExports.useState(!1);reactExports.useEffect(()=>{S?N(U=>U==="thinking"?"thinking":"active"):I!=="thinking"&&N("idle")},[S]);const H=(U,G)=>{if(y&&y(U,G),w.current){const Y=new CustomEvent("onAction",{detail:{name:U,data:G},bubbles:!0,composed:!0});w.current.dispatchEvent(Y)}},z=R.keepAlive||S;return jsxRuntimeExports.jsxs("div",{ref:w,className:"agent-neo-root",children:[jsxRuntimeExports.jsx("style",{children:styles}),jsxRuntimeExports.jsx(Avatar,{onClick:()=>A(!S),isOpen:S,userName:f?.name,state:I,isMaximized:L,config:R}),z&&jsxRuntimeExports.jsx("div",{style:{display:S?"block":"none"},children:jsxRuntimeExports.jsx(ChatWindow,{onClose:()=>A(!1),config:R,context:u,user:f,onStateChange:N,onAction:H,isMaximized:L,onToggleMaximize:()=>F(!L)})})]})},AgentOverlay=()=>{const s="https://api-llm-production.up.railway.app".replace(/\/$/,""),n=reactExports.useMemo(()=>({showStopButton:!0,agentName:"Jarvis",mcpServers:[s?`${s}/mcp/sse`:"/mcp/sse"],actionLabel:"Commands",systemRole:`You are Jarvis, a highly capable AI assistant controlling a 3D dashboard.
        CRITICAL DIRECTIVES:
        1. Fulfill requests smoothly.
        2. When asked to talk to Eve or focus on Eve, trigger the focusAssistant tool.
        3. Be concise and professional.`,initialStepId:"welcome",intents:[{keywords:["talk to eve","eve","focus eve","show eve"],nextStepId:"focus_eve_step"},{keywords:["reset camera","unfocus","back to desk","dashboard"],nextStepId:"reset_camera_step"}],workflow:[{id:"welcome",message:"Systems online. How may I assist you?",options:[{label:"Talk to Eve",nextStepId:"focus_eve_step"},{label:"List available tools",value:"list available tools"},{label:"Reset View",nextStepId:"reset_camera_step"}]},{id:"focus_eve_step",message:"Initiating connection with Eve...",triggerAction:"focusAssistant",actionType:"api",fixedPayload:{targetId:"eve",position:[-4.02,0,-1.44],radius:5,theta:-.275,camY:1.1},nextStepId:"eve_ready"},{id:"eve_ready",message:"Eve is listening.",options:[{label:"Reset View",nextStepId:"reset_camera_step"}]},{id:"reset_camera_step",message:"Resetting camera view to manual mode.",triggerAction:"resetCamera",actionType:"api",nextStepId:"welcome"}],llms:[{name:"Local Agent (minimax)",provider:"api-llm",apiKey:"none",baseUrl:s?`${s}/agent`:"/agent/local-api/agent"},{name:"Gemini 2.5 Flash",provider:"gemini",model:"gemini-2.5-flash",apiKey:localStorage.getItem("GEMINI_API_KEY")||void 0||"",baseUrl:"https://generativelanguage.googleapis.com/v1beta/models"},{name:"Claude 3.5 Sonnet",provider:"claude",model:"claude-3-5-sonnet-20240620",apiKey:localStorage.getItem("CLAUDE_API_KEY")||void 0||"",baseUrl:"https://api.anthropic.com/v1/messages"},{name:"Grok 2.0",provider:"xai",model:"grok-4-latest",apiKey:localStorage.getItem("XAI_API_KEY")||void 0||"",baseUrl:"https://api.x.ai/v1/chat/completions"}],endpoints:[{name:"focusAssistant",description:"Gradually displaces the camera to focus on an assistant in the 3D scene.",handler:u=>{const{position:f,radius:y,theta:S,camY:A}=u;return f?(useStore$1.getState().setCameraGoal({target:{x:f[0],y:f[1],z:f[2]},radius:y??3.5,theta:S??-.2,camY:A}),u.targetId==="eve"&&useStore$1.getState().setShowRealisticAssistant(!0),{success:!0,message:`Focused on ${u.targetId}`}):{success:!1,message:"Position required"}}},{name:"resetCamera",description:"Releases the camera from cinematic tracking.",handler:()=>(useStore$1.getState().setCameraGoal(null),{success:!0,message:"Camera released"})}]}),[s]);return jsxRuntimeExports.jsx("div",{style:{position:"absolute",zIndex:50},children:jsxRuntimeExports.jsx(Agent,{config:n})})},DebugOverlay=()=>{const{debugCameraState:s}=useStore$1();if(!s)return null;const n=s.position.x-s.lookAt.x,u=s.position.z-s.lookAt.z,f=s.position.y-s.lookAt.y,y=Math.sqrt(n*n+u*u),S=Math.atan2(n,u),A=Math.sqrt(n*n+f*f+u*u);return jsxRuntimeExports.jsxs("div",{className:"absolute top-[166px] right-4 z-50 pointer-events-none bg-black/60 backdrop-blur-sm border border-white/20 p-4 rounded-xl font-mono text-[10px] text-[rgba(0,240,255,0.8)] shadow-lg max-w-[280px]",children:[jsxRuntimeExports.jsx("h3",{className:"text-white font-bold mb-2 pb-1 border-b border-white/20 text-xs",children:"CAMERA DATA TRACKER"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-[80px_1fr] gap-x-2 gap-y-1 mb-2",children:[jsxRuntimeExports.jsx("span",{className:"opacity-60",children:"CAM_POS:"}),jsxRuntimeExports.jsxs("span",{children:["[",s.position.x.toFixed(2),", ",s.position.y.toFixed(2),", ",s.position.z.toFixed(2),"]"]}),jsxRuntimeExports.jsx("span",{className:"opacity-60",children:"LOOK_AT:"}),jsxRuntimeExports.jsxs("span",{children:["[",s.lookAt.x.toFixed(2),", ",s.lookAt.y.toFixed(2),", ",s.lookAt.z.toFixed(2),"]"]})]}),jsxRuntimeExports.jsx("div",{className:"my-2 border-t border-white/10"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-[80px_1fr] gap-x-2 gap-y-1",children:[jsxRuntimeExports.jsx("span",{className:"opacity-60",children:"DISTANCE:"}),jsxRuntimeExports.jsxs("span",{children:[A.toFixed(2),"m (Total)"]}),jsxRuntimeExports.jsx("span",{className:"opacity-60",children:"XZ RADIUS:"}),jsxRuntimeExports.jsxs("span",{children:[y.toFixed(2),"m (Orbit)"]}),jsxRuntimeExports.jsx("span",{className:"opacity-60",children:"THETA (Y):"}),jsxRuntimeExports.jsxs("span",{children:[S.toFixed(3)," rad"]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-3 pt-2 border-t border-white/20 text-[9px] text-white/50 leading-tight",children:["To reproduce this view via API:",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsxs("span",{className:"text-[rgba(0,240,255,0.6)] break-all",children:['action: "focusAssistant",',jsxRuntimeExports.jsx("br",{}),"payload: {",jsxRuntimeExports.jsx("br",{}),'targetId: "eve",',jsxRuntimeExports.jsx("br",{}),"position: [",s.lookAt.x.toFixed(2),", ",s.lookAt.y.toFixed(2),", ",s.lookAt.z.toFixed(2),"],",jsxRuntimeExports.jsx("br",{}),"radius: ",y.toFixed(2),",",jsxRuntimeExports.jsx("br",{}),"theta: ",S.toFixed(3),",",jsxRuntimeExports.jsx("br",{}),"camY: ",s.position.y.toFixed(2),jsxRuntimeExports.jsx("br",{}),"}"]})]})]})};const REVISION="182",MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},CullFaceNone=0,CullFaceBack=1,CullFaceFront=2,CullFaceFrontBack=3,BasicShadowMap=0,PCFShadowMap=1,PCFSoftShadowMap=2,VSMShadowMap=3,FrontSide=0,BackSide=1,DoubleSide=2,NoBlending=0,NormalBlending=1,AdditiveBlending=2,SubtractiveBlending=3,MultiplyBlending=4,CustomBlending=5,AddEquation=100,SubtractEquation=101,ReverseSubtractEquation=102,MinEquation=103,MaxEquation=104,ZeroFactor=200,OneFactor=201,SrcColorFactor=202,OneMinusSrcColorFactor=203,SrcAlphaFactor=204,OneMinusSrcAlphaFactor=205,DstAlphaFactor=206,OneMinusDstAlphaFactor=207,DstColorFactor=208,OneMinusDstColorFactor=209,SrcAlphaSaturateFactor=210,ConstantColorFactor=211,OneMinusConstantColorFactor=212,ConstantAlphaFactor=213,OneMinusConstantAlphaFactor=214,NeverDepth=0,AlwaysDepth=1,LessDepth=2,LessEqualDepth=3,EqualDepth=4,GreaterEqualDepth=5,GreaterDepth=6,NotEqualDepth=7,MultiplyOperation=0,MixOperation=1,AddOperation=2,NoToneMapping=0,LinearToneMapping=1,ReinhardToneMapping=2,CineonToneMapping=3,ACESFilmicToneMapping=4,CustomToneMapping=5,AgXToneMapping=6,NeutralToneMapping=7,AttachedBindMode="attached",DetachedBindMode="detached",UVMapping=300,CubeReflectionMapping=301,CubeRefractionMapping=302,EquirectangularReflectionMapping=303,EquirectangularRefractionMapping=304,CubeUVReflectionMapping=306,RepeatWrapping=1e3,ClampToEdgeWrapping=1001,MirroredRepeatWrapping=1002,NearestFilter=1003,NearestMipmapNearestFilter=1004,NearestMipMapNearestFilter=1004,NearestMipmapLinearFilter=1005,NearestMipMapLinearFilter=1005,LinearFilter=1006,LinearMipmapNearestFilter=1007,LinearMipMapNearestFilter=1007,LinearMipmapLinearFilter=1008,LinearMipMapLinearFilter=1008,UnsignedByteType=1009,ByteType=1010,ShortType=1011,UnsignedShortType=1012,IntType=1013,UnsignedIntType=1014,FloatType=1015,HalfFloatType=1016,UnsignedShort4444Type=1017,UnsignedShort5551Type=1018,UnsignedInt248Type=1020,UnsignedInt5999Type=35902,UnsignedInt101111Type=35899,AlphaFormat=1021,RGBFormat=1022,RGBAFormat=1023,DepthFormat=1026,DepthStencilFormat=1027,RedFormat=1028,RedIntegerFormat=1029,RGFormat=1030,RGIntegerFormat=1031,RGBIntegerFormat=1032,RGBAIntegerFormat=1033,RGB_S3TC_DXT1_Format=33776,RGBA_S3TC_DXT1_Format=33777,RGBA_S3TC_DXT3_Format=33778,RGBA_S3TC_DXT5_Format=33779,RGB_PVRTC_4BPPV1_Format=35840,RGB_PVRTC_2BPPV1_Format=35841,RGBA_PVRTC_4BPPV1_Format=35842,RGBA_PVRTC_2BPPV1_Format=35843,RGB_ETC1_Format=36196,RGB_ETC2_Format=37492,RGBA_ETC2_EAC_Format=37496,R11_EAC_Format=37488,SIGNED_R11_EAC_Format=37489,RG11_EAC_Format=37490,SIGNED_RG11_EAC_Format=37491,RGBA_ASTC_4x4_Format=37808,RGBA_ASTC_5x4_Format=37809,RGBA_ASTC_5x5_Format=37810,RGBA_ASTC_6x5_Format=37811,RGBA_ASTC_6x6_Format=37812,RGBA_ASTC_8x5_Format=37813,RGBA_ASTC_8x6_Format=37814,RGBA_ASTC_8x8_Format=37815,RGBA_ASTC_10x5_Format=37816,RGBA_ASTC_10x6_Format=37817,RGBA_ASTC_10x8_Format=37818,RGBA_ASTC_10x10_Format=37819,RGBA_ASTC_12x10_Format=37820,RGBA_ASTC_12x12_Format=37821,RGBA_BPTC_Format=36492,RGB_BPTC_SIGNED_Format=36494,RGB_BPTC_UNSIGNED_Format=36495,RED_RGTC1_Format=36283,SIGNED_RED_RGTC1_Format=36284,RED_GREEN_RGTC2_Format=36285,SIGNED_RED_GREEN_RGTC2_Format=36286,LoopOnce=2200,LoopRepeat=2201,LoopPingPong=2202,InterpolateDiscrete=2300,InterpolateLinear=2301,InterpolateSmooth=2302,ZeroCurvatureEnding=2400,ZeroSlopeEnding=2401,WrapAroundEnding=2402,NormalAnimationBlendMode=2500,AdditiveAnimationBlendMode=2501,TrianglesDrawMode=0,TriangleStripDrawMode=1,TriangleFanDrawMode=2,BasicDepthPacking=3200,RGBADepthPacking=3201,RGBDepthPacking=3202,RGDepthPacking=3203,TangentSpaceNormalMap=0,ObjectSpaceNormalMap=1,NoColorSpace="",SRGBColorSpace$1="srgb",LinearSRGBColorSpace$1="srgb-linear",LinearTransfer="linear",SRGBTransfer="srgb",NoNormalPacking="",NormalRGPacking="rg",NormalGAPacking="ga",ZeroStencilOp=0,KeepStencilOp=7680,ReplaceStencilOp=7681,IncrementStencilOp=7682,DecrementStencilOp=7683,IncrementWrapStencilOp=34055,DecrementWrapStencilOp=34056,InvertStencilOp=5386,NeverStencilFunc=512,LessStencilFunc=513,EqualStencilFunc=514,LessEqualStencilFunc=515,GreaterStencilFunc=516,NotEqualStencilFunc=517,GreaterEqualStencilFunc=518,AlwaysStencilFunc=519,NeverCompare=512,LessCompare=513,EqualCompare=514,LessEqualCompare=515,GreaterCompare=516,NotEqualCompare=517,GreaterEqualCompare=518,AlwaysCompare=519,StaticDrawUsage=35044,DynamicDrawUsage=35048,StreamDrawUsage=35040,StaticReadUsage=35045,DynamicReadUsage=35049,StreamReadUsage=35041,StaticCopyUsage=35046,DynamicCopyUsage=35050,StreamCopyUsage=35042,GLSL1="100",GLSL3="300 es",WebGLCoordinateSystem=2e3,WebGPUCoordinateSystem=2001,TimestampQuery={COMPUTE:"compute",RENDER:"render"},InterpolationSamplingType={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},InterpolationSamplingMode={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};function arrayNeedsUint32(s){for(let n=s.length-1;n>=0;--n)if(s[n]>=65535)return!0;return!1}const TYPED_ARRAYS={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function getTypedArray(s,n){return new TYPED_ARRAYS[s](n)}function isTypedArray(s){return ArrayBuffer.isView(s)&&!(s instanceof DataView)}function createElementNS(s){return document.createElementNS("http://www.w3.org/1999/xhtml",s)}function createCanvasElement(){const s=createElementNS("canvas");return s.style.display="block",s}const _cache={};let _setConsoleFunction=null;function setConsoleFunction(s){_setConsoleFunction=s}function getConsoleFunction(){return _setConsoleFunction}function log(...s){const n="THREE."+s.shift();_setConsoleFunction?_setConsoleFunction("log",n,...s):console.log(n,...s)}function warn(...s){const n="THREE."+s.shift();_setConsoleFunction?_setConsoleFunction("warn",n,...s):console.warn(n,...s)}function error(...s){const n="THREE."+s.shift();_setConsoleFunction?_setConsoleFunction("error",n,...s):console.error(n,...s)}function warnOnce(...s){const n=s.join(" ");n in _cache||(_cache[n]=!0,warn(...s))}function probeAsync(s,n,u){return new Promise(function(f,y){function S(){switch(s.clientWaitSync(n,s.SYNC_FLUSH_COMMANDS_BIT,0)){case s.WAIT_FAILED:y();break;case s.TIMEOUT_EXPIRED:setTimeout(S,u);break;default:f()}}setTimeout(S,u)})}class EventDispatcher{addEventListener(n,u){this._listeners===void 0&&(this._listeners={});const f=this._listeners;f[n]===void 0&&(f[n]=[]),f[n].indexOf(u)===-1&&f[n].push(u)}hasEventListener(n,u){const f=this._listeners;return f===void 0?!1:f[n]!==void 0&&f[n].indexOf(u)!==-1}removeEventListener(n,u){const f=this._listeners;if(f===void 0)return;const y=f[n];if(y!==void 0){const S=y.indexOf(u);S!==-1&&y.splice(S,1)}}dispatchEvent(n){const u=this._listeners;if(u===void 0)return;const f=u[n.type];if(f!==void 0){n.target=this;const y=f.slice(0);for(let S=0,A=y.length;S<A;S++)y[S].call(this,n);n.target=null}}}const _lut$1=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let _seed=1234567;const DEG2RAD=Math.PI/180,RAD2DEG=180/Math.PI;function generateUUID$1(){const s=Math.random()*4294967295|0,n=Math.random()*4294967295|0,u=Math.random()*4294967295|0,f=Math.random()*4294967295|0;return(_lut$1[s&255]+_lut$1[s>>8&255]+_lut$1[s>>16&255]+_lut$1[s>>24&255]+"-"+_lut$1[n&255]+_lut$1[n>>8&255]+"-"+_lut$1[n>>16&15|64]+_lut$1[n>>24&255]+"-"+_lut$1[u&63|128]+_lut$1[u>>8&255]+"-"+_lut$1[u>>16&255]+_lut$1[u>>24&255]+_lut$1[f&255]+_lut$1[f>>8&255]+_lut$1[f>>16&255]+_lut$1[f>>24&255]).toLowerCase()}function clamp(s,n,u){return Math.max(n,Math.min(u,s))}function euclideanModulo(s,n){return(s%n+n)%n}function mapLinear(s,n,u,f,y){return f+(s-n)*(y-f)/(u-n)}function inverseLerp(s,n,u){return s!==n?(u-s)/(n-s):0}function lerp(s,n,u){return(1-u)*s+u*n}function damp(s,n,u,f){return lerp(s,n,1-Math.exp(-u*f))}function pingpong(s,n=1){return n-Math.abs(euclideanModulo(s,n*2)-n)}function smoothstep(s,n,u){return s<=n?0:s>=u?1:(s=(s-n)/(u-n),s*s*(3-2*s))}function smootherstep(s,n,u){return s<=n?0:s>=u?1:(s=(s-n)/(u-n),s*s*s*(s*(s*6-15)+10))}function randInt(s,n){return s+Math.floor(Math.random()*(n-s+1))}function randFloat(s,n){return s+Math.random()*(n-s)}function randFloatSpread(s){return s*(.5-Math.random())}function seededRandom(s){s!==void 0&&(_seed=s);let n=_seed+=1831565813;return n=Math.imul(n^n>>>15,n|1),n^=n+Math.imul(n^n>>>7,n|61),((n^n>>>14)>>>0)/4294967296}function degToRad(s){return s*DEG2RAD}function radToDeg(s){return s*RAD2DEG}function isPowerOfTwo(s){return(s&s-1)===0&&s!==0}function ceilPowerOfTwo(s){return Math.pow(2,Math.ceil(Math.log(s)/Math.LN2))}function floorPowerOfTwo(s){return Math.pow(2,Math.floor(Math.log(s)/Math.LN2))}function setQuaternionFromProperEuler(s,n,u,f,y){const S=Math.cos,A=Math.sin,w=S(u/2),C=A(u/2),T=S((n+f)/2),R=A((n+f)/2),I=S((n-f)/2),N=A((n-f)/2),L=S((f-n)/2),F=A((f-n)/2);switch(y){case"XYX":s.set(w*R,C*I,C*N,w*T);break;case"YZY":s.set(C*N,w*R,C*I,w*T);break;case"ZXZ":s.set(C*I,C*N,w*R,w*T);break;case"XZX":s.set(w*R,C*F,C*L,w*T);break;case"YXY":s.set(C*L,w*R,C*F,w*T);break;case"ZYZ":s.set(C*F,C*L,w*R,w*T);break;default:warn("MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+y)}}function denormalize(s,n){switch(n.constructor){case Float32Array:return s;case Uint32Array:return s/4294967295;case Uint16Array:return s/65535;case Uint8Array:return s/255;case Int32Array:return Math.max(s/2147483647,-1);case Int16Array:return Math.max(s/32767,-1);case Int8Array:return Math.max(s/127,-1);default:throw new Error("Invalid component type.")}}function normalize(s,n){switch(n.constructor){case Float32Array:return s;case Uint32Array:return Math.round(s*4294967295);case Uint16Array:return Math.round(s*65535);case Uint8Array:return Math.round(s*255);case Int32Array:return Math.round(s*2147483647);case Int16Array:return Math.round(s*32767);case Int8Array:return Math.round(s*127);default:throw new Error("Invalid component type.")}}const MathUtils={DEG2RAD,RAD2DEG,generateUUID:generateUUID$1,clamp,euclideanModulo,mapLinear,inverseLerp,lerp,damp,pingpong,smoothstep,smootherstep,randInt,randFloat,randFloatSpread,seededRandom,degToRad,radToDeg,isPowerOfTwo,ceilPowerOfTwo,floorPowerOfTwo,setQuaternionFromProperEuler,normalize,denormalize};class Vector2{constructor(n=0,u=0){Vector2.prototype.isVector2=!0,this.x=n,this.y=u}get width(){return this.x}set width(n){this.x=n}get height(){return this.y}set height(n){this.y=n}set(n,u){return this.x=n,this.y=u,this}setScalar(n){return this.x=n,this.y=n,this}setX(n){return this.x=n,this}setY(n){return this.y=n,this}setComponent(n,u){switch(n){case 0:this.x=u;break;case 1:this.y=u;break;default:throw new Error("index is out of range: "+n)}return this}getComponent(n){switch(n){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+n)}}clone(){return new this.constructor(this.x,this.y)}copy(n){return this.x=n.x,this.y=n.y,this}add(n){return this.x+=n.x,this.y+=n.y,this}addScalar(n){return this.x+=n,this.y+=n,this}addVectors(n,u){return this.x=n.x+u.x,this.y=n.y+u.y,this}addScaledVector(n,u){return this.x+=n.x*u,this.y+=n.y*u,this}sub(n){return this.x-=n.x,this.y-=n.y,this}subScalar(n){return this.x-=n,this.y-=n,this}subVectors(n,u){return this.x=n.x-u.x,this.y=n.y-u.y,this}multiply(n){return this.x*=n.x,this.y*=n.y,this}multiplyScalar(n){return this.x*=n,this.y*=n,this}divide(n){return this.x/=n.x,this.y/=n.y,this}divideScalar(n){return this.multiplyScalar(1/n)}applyMatrix3(n){const u=this.x,f=this.y,y=n.elements;return this.x=y[0]*u+y[3]*f+y[6],this.y=y[1]*u+y[4]*f+y[7],this}min(n){return this.x=Math.min(this.x,n.x),this.y=Math.min(this.y,n.y),this}max(n){return this.x=Math.max(this.x,n.x),this.y=Math.max(this.y,n.y),this}clamp(n,u){return this.x=clamp(this.x,n.x,u.x),this.y=clamp(this.y,n.y,u.y),this}clampScalar(n,u){return this.x=clamp(this.x,n,u),this.y=clamp(this.y,n,u),this}clampLength(n,u){const f=this.length();return this.divideScalar(f||1).multiplyScalar(clamp(f,n,u))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(n){return this.x*n.x+this.y*n.y}cross(n){return this.x*n.y-this.y*n.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(n){const u=Math.sqrt(this.lengthSq()*n.lengthSq());if(u===0)return Math.PI/2;const f=this.dot(n)/u;return Math.acos(clamp(f,-1,1))}distanceTo(n){return Math.sqrt(this.distanceToSquared(n))}distanceToSquared(n){const u=this.x-n.x,f=this.y-n.y;return u*u+f*f}manhattanDistanceTo(n){return Math.abs(this.x-n.x)+Math.abs(this.y-n.y)}setLength(n){return this.normalize().multiplyScalar(n)}lerp(n,u){return this.x+=(n.x-this.x)*u,this.y+=(n.y-this.y)*u,this}lerpVectors(n,u,f){return this.x=n.x+(u.x-n.x)*f,this.y=n.y+(u.y-n.y)*f,this}equals(n){return n.x===this.x&&n.y===this.y}fromArray(n,u=0){return this.x=n[u],this.y=n[u+1],this}toArray(n=[],u=0){return n[u]=this.x,n[u+1]=this.y,n}fromBufferAttribute(n,u){return this.x=n.getX(u),this.y=n.getY(u),this}rotateAround(n,u){const f=Math.cos(u),y=Math.sin(u),S=this.x-n.x,A=this.y-n.y;return this.x=S*f-A*y+n.x,this.y=S*y+A*f+n.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Quaternion{constructor(n=0,u=0,f=0,y=1){this.isQuaternion=!0,this._x=n,this._y=u,this._z=f,this._w=y}static slerpFlat(n,u,f,y,S,A,w){let C=f[y+0],T=f[y+1],R=f[y+2],I=f[y+3],N=S[A+0],L=S[A+1],F=S[A+2],H=S[A+3];if(w<=0){n[u+0]=C,n[u+1]=T,n[u+2]=R,n[u+3]=I;return}if(w>=1){n[u+0]=N,n[u+1]=L,n[u+2]=F,n[u+3]=H;return}if(I!==H||C!==N||T!==L||R!==F){let z=C*N+T*L+R*F+I*H;z<0&&(N=-N,L=-L,F=-F,H=-H,z=-z);let U=1-w;if(z<.9995){const G=Math.acos(z),Y=Math.sin(G);U=Math.sin(U*G)/Y,w=Math.sin(w*G)/Y,C=C*U+N*w,T=T*U+L*w,R=R*U+F*w,I=I*U+H*w}else{C=C*U+N*w,T=T*U+L*w,R=R*U+F*w,I=I*U+H*w;const G=1/Math.sqrt(C*C+T*T+R*R+I*I);C*=G,T*=G,R*=G,I*=G}}n[u]=C,n[u+1]=T,n[u+2]=R,n[u+3]=I}static multiplyQuaternionsFlat(n,u,f,y,S,A){const w=f[y],C=f[y+1],T=f[y+2],R=f[y+3],I=S[A],N=S[A+1],L=S[A+2],F=S[A+3];return n[u]=w*F+R*I+C*L-T*N,n[u+1]=C*F+R*N+T*I-w*L,n[u+2]=T*F+R*L+w*N-C*I,n[u+3]=R*F-w*I-C*N-T*L,n}get x(){return this._x}set x(n){this._x=n,this._onChangeCallback()}get y(){return this._y}set y(n){this._y=n,this._onChangeCallback()}get z(){return this._z}set z(n){this._z=n,this._onChangeCallback()}get w(){return this._w}set w(n){this._w=n,this._onChangeCallback()}set(n,u,f,y){return this._x=n,this._y=u,this._z=f,this._w=y,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(n){return this._x=n.x,this._y=n.y,this._z=n.z,this._w=n.w,this._onChangeCallback(),this}setFromEuler(n,u=!0){const f=n._x,y=n._y,S=n._z,A=n._order,w=Math.cos,C=Math.sin,T=w(f/2),R=w(y/2),I=w(S/2),N=C(f/2),L=C(y/2),F=C(S/2);switch(A){case"XYZ":this._x=N*R*I+T*L*F,this._y=T*L*I-N*R*F,this._z=T*R*F+N*L*I,this._w=T*R*I-N*L*F;break;case"YXZ":this._x=N*R*I+T*L*F,this._y=T*L*I-N*R*F,this._z=T*R*F-N*L*I,this._w=T*R*I+N*L*F;break;case"ZXY":this._x=N*R*I-T*L*F,this._y=T*L*I+N*R*F,this._z=T*R*F+N*L*I,this._w=T*R*I-N*L*F;break;case"ZYX":this._x=N*R*I-T*L*F,this._y=T*L*I+N*R*F,this._z=T*R*F-N*L*I,this._w=T*R*I+N*L*F;break;case"YZX":this._x=N*R*I+T*L*F,this._y=T*L*I+N*R*F,this._z=T*R*F-N*L*I,this._w=T*R*I-N*L*F;break;case"XZY":this._x=N*R*I-T*L*F,this._y=T*L*I-N*R*F,this._z=T*R*F+N*L*I,this._w=T*R*I+N*L*F;break;default:warn("Quaternion: .setFromEuler() encountered an unknown order: "+A)}return u===!0&&this._onChangeCallback(),this}setFromAxisAngle(n,u){const f=u/2,y=Math.sin(f);return this._x=n.x*y,this._y=n.y*y,this._z=n.z*y,this._w=Math.cos(f),this._onChangeCallback(),this}setFromRotationMatrix(n){const u=n.elements,f=u[0],y=u[4],S=u[8],A=u[1],w=u[5],C=u[9],T=u[2],R=u[6],I=u[10],N=f+w+I;if(N>0){const L=.5/Math.sqrt(N+1);this._w=.25/L,this._x=(R-C)*L,this._y=(S-T)*L,this._z=(A-y)*L}else if(f>w&&f>I){const L=2*Math.sqrt(1+f-w-I);this._w=(R-C)/L,this._x=.25*L,this._y=(y+A)/L,this._z=(S+T)/L}else if(w>I){const L=2*Math.sqrt(1+w-f-I);this._w=(S-T)/L,this._x=(y+A)/L,this._y=.25*L,this._z=(C+R)/L}else{const L=2*Math.sqrt(1+I-f-w);this._w=(A-y)/L,this._x=(S+T)/L,this._y=(C+R)/L,this._z=.25*L}return this._onChangeCallback(),this}setFromUnitVectors(n,u){let f=n.dot(u)+1;return f<1e-8?(f=0,Math.abs(n.x)>Math.abs(n.z)?(this._x=-n.y,this._y=n.x,this._z=0,this._w=f):(this._x=0,this._y=-n.z,this._z=n.y,this._w=f)):(this._x=n.y*u.z-n.z*u.y,this._y=n.z*u.x-n.x*u.z,this._z=n.x*u.y-n.y*u.x,this._w=f),this.normalize()}angleTo(n){return 2*Math.acos(Math.abs(clamp(this.dot(n),-1,1)))}rotateTowards(n,u){const f=this.angleTo(n);if(f===0)return this;const y=Math.min(1,u/f);return this.slerp(n,y),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(n){return this._x*n._x+this._y*n._y+this._z*n._z+this._w*n._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let n=this.length();return n===0?(this._x=0,this._y=0,this._z=0,this._w=1):(n=1/n,this._x=this._x*n,this._y=this._y*n,this._z=this._z*n,this._w=this._w*n),this._onChangeCallback(),this}multiply(n){return this.multiplyQuaternions(this,n)}premultiply(n){return this.multiplyQuaternions(n,this)}multiplyQuaternions(n,u){const f=n._x,y=n._y,S=n._z,A=n._w,w=u._x,C=u._y,T=u._z,R=u._w;return this._x=f*R+A*w+y*T-S*C,this._y=y*R+A*C+S*w-f*T,this._z=S*R+A*T+f*C-y*w,this._w=A*R-f*w-y*C-S*T,this._onChangeCallback(),this}slerp(n,u){if(u<=0)return this;if(u>=1)return this.copy(n);let f=n._x,y=n._y,S=n._z,A=n._w,w=this.dot(n);w<0&&(f=-f,y=-y,S=-S,A=-A,w=-w);let C=1-u;if(w<.9995){const T=Math.acos(w),R=Math.sin(T);C=Math.sin(C*T)/R,u=Math.sin(u*T)/R,this._x=this._x*C+f*u,this._y=this._y*C+y*u,this._z=this._z*C+S*u,this._w=this._w*C+A*u,this._onChangeCallback()}else this._x=this._x*C+f*u,this._y=this._y*C+y*u,this._z=this._z*C+S*u,this._w=this._w*C+A*u,this.normalize();return this}slerpQuaternions(n,u,f){return this.copy(n).slerp(u,f)}random(){const n=2*Math.PI*Math.random(),u=2*Math.PI*Math.random(),f=Math.random(),y=Math.sqrt(1-f),S=Math.sqrt(f);return this.set(y*Math.sin(n),y*Math.cos(n),S*Math.sin(u),S*Math.cos(u))}equals(n){return n._x===this._x&&n._y===this._y&&n._z===this._z&&n._w===this._w}fromArray(n,u=0){return this._x=n[u],this._y=n[u+1],this._z=n[u+2],this._w=n[u+3],this._onChangeCallback(),this}toArray(n=[],u=0){return n[u]=this._x,n[u+1]=this._y,n[u+2]=this._z,n[u+3]=this._w,n}fromBufferAttribute(n,u){return this._x=n.getX(u),this._y=n.getY(u),this._z=n.getZ(u),this._w=n.getW(u),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(n){return this._onChangeCallback=n,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Vector3{constructor(n=0,u=0,f=0){Vector3.prototype.isVector3=!0,this.x=n,this.y=u,this.z=f}set(n,u,f){return f===void 0&&(f=this.z),this.x=n,this.y=u,this.z=f,this}setScalar(n){return this.x=n,this.y=n,this.z=n,this}setX(n){return this.x=n,this}setY(n){return this.y=n,this}setZ(n){return this.z=n,this}setComponent(n,u){switch(n){case 0:this.x=u;break;case 1:this.y=u;break;case 2:this.z=u;break;default:throw new Error("index is out of range: "+n)}return this}getComponent(n){switch(n){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+n)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(n){return this.x=n.x,this.y=n.y,this.z=n.z,this}add(n){return this.x+=n.x,this.y+=n.y,this.z+=n.z,this}addScalar(n){return this.x+=n,this.y+=n,this.z+=n,this}addVectors(n,u){return this.x=n.x+u.x,this.y=n.y+u.y,this.z=n.z+u.z,this}addScaledVector(n,u){return this.x+=n.x*u,this.y+=n.y*u,this.z+=n.z*u,this}sub(n){return this.x-=n.x,this.y-=n.y,this.z-=n.z,this}subScalar(n){return this.x-=n,this.y-=n,this.z-=n,this}subVectors(n,u){return this.x=n.x-u.x,this.y=n.y-u.y,this.z=n.z-u.z,this}multiply(n){return this.x*=n.x,this.y*=n.y,this.z*=n.z,this}multiplyScalar(n){return this.x*=n,this.y*=n,this.z*=n,this}multiplyVectors(n,u){return this.x=n.x*u.x,this.y=n.y*u.y,this.z=n.z*u.z,this}applyEuler(n){return this.applyQuaternion(_quaternion$4.setFromEuler(n))}applyAxisAngle(n,u){return this.applyQuaternion(_quaternion$4.setFromAxisAngle(n,u))}applyMatrix3(n){const u=this.x,f=this.y,y=this.z,S=n.elements;return this.x=S[0]*u+S[3]*f+S[6]*y,this.y=S[1]*u+S[4]*f+S[7]*y,this.z=S[2]*u+S[5]*f+S[8]*y,this}applyNormalMatrix(n){return this.applyMatrix3(n).normalize()}applyMatrix4(n){const u=this.x,f=this.y,y=this.z,S=n.elements,A=1/(S[3]*u+S[7]*f+S[11]*y+S[15]);return this.x=(S[0]*u+S[4]*f+S[8]*y+S[12])*A,this.y=(S[1]*u+S[5]*f+S[9]*y+S[13])*A,this.z=(S[2]*u+S[6]*f+S[10]*y+S[14])*A,this}applyQuaternion(n){const u=this.x,f=this.y,y=this.z,S=n.x,A=n.y,w=n.z,C=n.w,T=2*(A*y-w*f),R=2*(w*u-S*y),I=2*(S*f-A*u);return this.x=u+C*T+A*I-w*R,this.y=f+C*R+w*T-S*I,this.z=y+C*I+S*R-A*T,this}project(n){return this.applyMatrix4(n.matrixWorldInverse).applyMatrix4(n.projectionMatrix)}unproject(n){return this.applyMatrix4(n.projectionMatrixInverse).applyMatrix4(n.matrixWorld)}transformDirection(n){const u=this.x,f=this.y,y=this.z,S=n.elements;return this.x=S[0]*u+S[4]*f+S[8]*y,this.y=S[1]*u+S[5]*f+S[9]*y,this.z=S[2]*u+S[6]*f+S[10]*y,this.normalize()}divide(n){return this.x/=n.x,this.y/=n.y,this.z/=n.z,this}divideScalar(n){return this.multiplyScalar(1/n)}min(n){return this.x=Math.min(this.x,n.x),this.y=Math.min(this.y,n.y),this.z=Math.min(this.z,n.z),this}max(n){return this.x=Math.max(this.x,n.x),this.y=Math.max(this.y,n.y),this.z=Math.max(this.z,n.z),this}clamp(n,u){return this.x=clamp(this.x,n.x,u.x),this.y=clamp(this.y,n.y,u.y),this.z=clamp(this.z,n.z,u.z),this}clampScalar(n,u){return this.x=clamp(this.x,n,u),this.y=clamp(this.y,n,u),this.z=clamp(this.z,n,u),this}clampLength(n,u){const f=this.length();return this.divideScalar(f||1).multiplyScalar(clamp(f,n,u))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(n){return this.x*n.x+this.y*n.y+this.z*n.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(n){return this.normalize().multiplyScalar(n)}lerp(n,u){return this.x+=(n.x-this.x)*u,this.y+=(n.y-this.y)*u,this.z+=(n.z-this.z)*u,this}lerpVectors(n,u,f){return this.x=n.x+(u.x-n.x)*f,this.y=n.y+(u.y-n.y)*f,this.z=n.z+(u.z-n.z)*f,this}cross(n){return this.crossVectors(this,n)}crossVectors(n,u){const f=n.x,y=n.y,S=n.z,A=u.x,w=u.y,C=u.z;return this.x=y*C-S*w,this.y=S*A-f*C,this.z=f*w-y*A,this}projectOnVector(n){const u=n.lengthSq();if(u===0)return this.set(0,0,0);const f=n.dot(this)/u;return this.copy(n).multiplyScalar(f)}projectOnPlane(n){return _vector$c.copy(this).projectOnVector(n),this.sub(_vector$c)}reflect(n){return this.sub(_vector$c.copy(n).multiplyScalar(2*this.dot(n)))}angleTo(n){const u=Math.sqrt(this.lengthSq()*n.lengthSq());if(u===0)return Math.PI/2;const f=this.dot(n)/u;return Math.acos(clamp(f,-1,1))}distanceTo(n){return Math.sqrt(this.distanceToSquared(n))}distanceToSquared(n){const u=this.x-n.x,f=this.y-n.y,y=this.z-n.z;return u*u+f*f+y*y}manhattanDistanceTo(n){return Math.abs(this.x-n.x)+Math.abs(this.y-n.y)+Math.abs(this.z-n.z)}setFromSpherical(n){return this.setFromSphericalCoords(n.radius,n.phi,n.theta)}setFromSphericalCoords(n,u,f){const y=Math.sin(u)*n;return this.x=y*Math.sin(f),this.y=Math.cos(u)*n,this.z=y*Math.cos(f),this}setFromCylindrical(n){return this.setFromCylindricalCoords(n.radius,n.theta,n.y)}setFromCylindricalCoords(n,u,f){return this.x=n*Math.sin(u),this.y=f,this.z=n*Math.cos(u),this}setFromMatrixPosition(n){const u=n.elements;return this.x=u[12],this.y=u[13],this.z=u[14],this}setFromMatrixScale(n){const u=this.setFromMatrixColumn(n,0).length(),f=this.setFromMatrixColumn(n,1).length(),y=this.setFromMatrixColumn(n,2).length();return this.x=u,this.y=f,this.z=y,this}setFromMatrixColumn(n,u){return this.fromArray(n.elements,u*4)}setFromMatrix3Column(n,u){return this.fromArray(n.elements,u*3)}setFromEuler(n){return this.x=n._x,this.y=n._y,this.z=n._z,this}setFromColor(n){return this.x=n.r,this.y=n.g,this.z=n.b,this}equals(n){return n.x===this.x&&n.y===this.y&&n.z===this.z}fromArray(n,u=0){return this.x=n[u],this.y=n[u+1],this.z=n[u+2],this}toArray(n=[],u=0){return n[u]=this.x,n[u+1]=this.y,n[u+2]=this.z,n}fromBufferAttribute(n,u){return this.x=n.getX(u),this.y=n.getY(u),this.z=n.getZ(u),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const n=Math.random()*Math.PI*2,u=Math.random()*2-1,f=Math.sqrt(1-u*u);return this.x=f*Math.cos(n),this.y=u,this.z=f*Math.sin(n),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const _vector$c=new Vector3,_quaternion$4=new Quaternion;class Matrix3{constructor(n,u,f,y,S,A,w,C,T){Matrix3.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],n!==void 0&&this.set(n,u,f,y,S,A,w,C,T)}set(n,u,f,y,S,A,w,C,T){const R=this.elements;return R[0]=n,R[1]=y,R[2]=w,R[3]=u,R[4]=S,R[5]=C,R[6]=f,R[7]=A,R[8]=T,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(n){const u=this.elements,f=n.elements;return u[0]=f[0],u[1]=f[1],u[2]=f[2],u[3]=f[3],u[4]=f[4],u[5]=f[5],u[6]=f[6],u[7]=f[7],u[8]=f[8],this}extractBasis(n,u,f){return n.setFromMatrix3Column(this,0),u.setFromMatrix3Column(this,1),f.setFromMatrix3Column(this,2),this}setFromMatrix4(n){const u=n.elements;return this.set(u[0],u[4],u[8],u[1],u[5],u[9],u[2],u[6],u[10]),this}multiply(n){return this.multiplyMatrices(this,n)}premultiply(n){return this.multiplyMatrices(n,this)}multiplyMatrices(n,u){const f=n.elements,y=u.elements,S=this.elements,A=f[0],w=f[3],C=f[6],T=f[1],R=f[4],I=f[7],N=f[2],L=f[5],F=f[8],H=y[0],z=y[3],U=y[6],G=y[1],Y=y[4],K=y[7],Z=y[2],J=y[5],te=y[8];return S[0]=A*H+w*G+C*Z,S[3]=A*z+w*Y+C*J,S[6]=A*U+w*K+C*te,S[1]=T*H+R*G+I*Z,S[4]=T*z+R*Y+I*J,S[7]=T*U+R*K+I*te,S[2]=N*H+L*G+F*Z,S[5]=N*z+L*Y+F*J,S[8]=N*U+L*K+F*te,this}multiplyScalar(n){const u=this.elements;return u[0]*=n,u[3]*=n,u[6]*=n,u[1]*=n,u[4]*=n,u[7]*=n,u[2]*=n,u[5]*=n,u[8]*=n,this}determinant(){const n=this.elements,u=n[0],f=n[1],y=n[2],S=n[3],A=n[4],w=n[5],C=n[6],T=n[7],R=n[8];return u*A*R-u*w*T-f*S*R+f*w*C+y*S*T-y*A*C}invert(){const n=this.elements,u=n[0],f=n[1],y=n[2],S=n[3],A=n[4],w=n[5],C=n[6],T=n[7],R=n[8],I=R*A-w*T,N=w*C-R*S,L=T*S-A*C,F=u*I+f*N+y*L;if(F===0)return this.set(0,0,0,0,0,0,0,0,0);const H=1/F;return n[0]=I*H,n[1]=(y*T-R*f)*H,n[2]=(w*f-y*A)*H,n[3]=N*H,n[4]=(R*u-y*C)*H,n[5]=(y*S-w*u)*H,n[6]=L*H,n[7]=(f*C-T*u)*H,n[8]=(A*u-f*S)*H,this}transpose(){let n;const u=this.elements;return n=u[1],u[1]=u[3],u[3]=n,n=u[2],u[2]=u[6],u[6]=n,n=u[5],u[5]=u[7],u[7]=n,this}getNormalMatrix(n){return this.setFromMatrix4(n).invert().transpose()}transposeIntoArray(n){const u=this.elements;return n[0]=u[0],n[1]=u[3],n[2]=u[6],n[3]=u[1],n[4]=u[4],n[5]=u[7],n[6]=u[2],n[7]=u[5],n[8]=u[8],this}setUvTransform(n,u,f,y,S,A,w){const C=Math.cos(S),T=Math.sin(S);return this.set(f*C,f*T,-f*(C*A+T*w)+A+n,-y*T,y*C,-y*(-T*A+C*w)+w+u,0,0,1),this}scale(n,u){return this.premultiply(_m3.makeScale(n,u)),this}rotate(n){return this.premultiply(_m3.makeRotation(-n)),this}translate(n,u){return this.premultiply(_m3.makeTranslation(n,u)),this}makeTranslation(n,u){return n.isVector2?this.set(1,0,n.x,0,1,n.y,0,0,1):this.set(1,0,n,0,1,u,0,0,1),this}makeRotation(n){const u=Math.cos(n),f=Math.sin(n);return this.set(u,-f,0,f,u,0,0,0,1),this}makeScale(n,u){return this.set(n,0,0,0,u,0,0,0,1),this}equals(n){const u=this.elements,f=n.elements;for(let y=0;y<9;y++)if(u[y]!==f[y])return!1;return!0}fromArray(n,u=0){for(let f=0;f<9;f++)this.elements[f]=n[f+u];return this}toArray(n=[],u=0){const f=this.elements;return n[u]=f[0],n[u+1]=f[1],n[u+2]=f[2],n[u+3]=f[3],n[u+4]=f[4],n[u+5]=f[5],n[u+6]=f[6],n[u+7]=f[7],n[u+8]=f[8],n}clone(){return new this.constructor().fromArray(this.elements)}}const _m3=new Matrix3,LINEAR_REC709_TO_XYZ=new Matrix3().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),XYZ_TO_LINEAR_REC709=new Matrix3().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function createColorManagement(){const s={enabled:!0,workingColorSpace:LinearSRGBColorSpace$1,spaces:{},convert:function(y,S,A){return this.enabled===!1||S===A||!S||!A||(this.spaces[S].transfer===SRGBTransfer&&(y.r=SRGBToLinear(y.r),y.g=SRGBToLinear(y.g),y.b=SRGBToLinear(y.b)),this.spaces[S].primaries!==this.spaces[A].primaries&&(y.applyMatrix3(this.spaces[S].toXYZ),y.applyMatrix3(this.spaces[A].fromXYZ)),this.spaces[A].transfer===SRGBTransfer&&(y.r=LinearToSRGB(y.r),y.g=LinearToSRGB(y.g),y.b=LinearToSRGB(y.b))),y},workingToColorSpace:function(y,S){return this.convert(y,this.workingColorSpace,S)},colorSpaceToWorking:function(y,S){return this.convert(y,S,this.workingColorSpace)},getPrimaries:function(y){return this.spaces[y].primaries},getTransfer:function(y){return y===NoColorSpace?LinearTransfer:this.spaces[y].transfer},getToneMappingMode:function(y){return this.spaces[y].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(y,S=this.workingColorSpace){return y.fromArray(this.spaces[S].luminanceCoefficients)},define:function(y){Object.assign(this.spaces,y)},_getMatrix:function(y,S,A){return y.copy(this.spaces[S].toXYZ).multiply(this.spaces[A].fromXYZ)},_getDrawingBufferColorSpace:function(y){return this.spaces[y].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(y=this.workingColorSpace){return this.spaces[y].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(y,S){return warnOnce("ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),s.workingToColorSpace(y,S)},toWorkingColorSpace:function(y,S){return warnOnce("ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),s.colorSpaceToWorking(y,S)}},n=[.64,.33,.3,.6,.15,.06],u=[.2126,.7152,.0722],f=[.3127,.329];return s.define({[LinearSRGBColorSpace$1]:{primaries:n,whitePoint:f,transfer:LinearTransfer,toXYZ:LINEAR_REC709_TO_XYZ,fromXYZ:XYZ_TO_LINEAR_REC709,luminanceCoefficients:u,workingColorSpaceConfig:{unpackColorSpace:SRGBColorSpace$1},outputColorSpaceConfig:{drawingBufferColorSpace:SRGBColorSpace$1}},[SRGBColorSpace$1]:{primaries:n,whitePoint:f,transfer:SRGBTransfer,toXYZ:LINEAR_REC709_TO_XYZ,fromXYZ:XYZ_TO_LINEAR_REC709,luminanceCoefficients:u,outputColorSpaceConfig:{drawingBufferColorSpace:SRGBColorSpace$1}}}),s}const ColorManagement=createColorManagement();function SRGBToLinear(s){return s<.04045?s*.0773993808:Math.pow(s*.9478672986+.0521327014,2.4)}function LinearToSRGB(s){return s<.0031308?s*12.92:1.055*Math.pow(s,.41666)-.055}let _canvas;class ImageUtils{static getDataURL(n,u="image/png"){if(/^data:/i.test(n.src)||typeof HTMLCanvasElement>"u")return n.src;let f;if(n instanceof HTMLCanvasElement)f=n;else{_canvas===void 0&&(_canvas=createElementNS("canvas")),_canvas.width=n.width,_canvas.height=n.height;const y=_canvas.getContext("2d");n instanceof ImageData?y.putImageData(n,0,0):y.drawImage(n,0,0,n.width,n.height),f=_canvas}return f.toDataURL(u)}static sRGBToLinear(n){if(typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap){const u=createElementNS("canvas");u.width=n.width,u.height=n.height;const f=u.getContext("2d");f.drawImage(n,0,0,n.width,n.height);const y=f.getImageData(0,0,n.width,n.height),S=y.data;for(let A=0;A<S.length;A++)S[A]=SRGBToLinear(S[A]/255)*255;return f.putImageData(y,0,0),u}else if(n.data){const u=n.data.slice(0);for(let f=0;f<u.length;f++)u instanceof Uint8Array||u instanceof Uint8ClampedArray?u[f]=Math.floor(SRGBToLinear(u[f]/255)*255):u[f]=SRGBToLinear(u[f]);return{data:u,width:n.width,height:n.height}}else return warn("ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),n}}let _sourceId=0;class Source{constructor(n=null){this.isSource=!0,Object.defineProperty(this,"id",{value:_sourceId++}),this.uuid=generateUUID$1(),this.data=n,this.dataReady=!0,this.version=0}getSize(n){const u=this.data;return typeof HTMLVideoElement<"u"&&u instanceof HTMLVideoElement?n.set(u.videoWidth,u.videoHeight,0):typeof VideoFrame<"u"&&u instanceof VideoFrame?n.set(u.displayHeight,u.displayWidth,0):u!==null?n.set(u.width,u.height,u.depth||0):n.set(0,0,0),n}set needsUpdate(n){n===!0&&this.version++}toJSON(n){const u=n===void 0||typeof n=="string";if(!u&&n.images[this.uuid]!==void 0)return n.images[this.uuid];const f={uuid:this.uuid,url:""},y=this.data;if(y!==null){let S;if(Array.isArray(y)){S=[];for(let A=0,w=y.length;A<w;A++)y[A].isDataTexture?S.push(serializeImage(y[A].image)):S.push(serializeImage(y[A]))}else S=serializeImage(y);f.url=S}return u||(n.images[this.uuid]=f),f}}function serializeImage(s){return typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&s instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&s instanceof ImageBitmap?ImageUtils.getDataURL(s):s.data?{data:Array.from(s.data),width:s.width,height:s.height,type:s.data.constructor.name}:(warn("Texture: Unable to serialize Texture."),{})}let _textureId=0;const _tempVec3=new Vector3;class Texture extends EventDispatcher{constructor(n=Texture.DEFAULT_IMAGE,u=Texture.DEFAULT_MAPPING,f=ClampToEdgeWrapping,y=ClampToEdgeWrapping,S=LinearFilter,A=LinearMipmapLinearFilter,w=RGBAFormat,C=UnsignedByteType,T=Texture.DEFAULT_ANISOTROPY,R=NoColorSpace){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:_textureId++}),this.uuid=generateUUID$1(),this.name="",this.source=new Source(n),this.mipmaps=[],this.mapping=u,this.channel=0,this.wrapS=f,this.wrapT=y,this.magFilter=S,this.minFilter=A,this.anisotropy=T,this.format=w,this.internalFormat=null,this.type=C,this.offset=new Vector2(0,0),this.repeat=new Vector2(1,1),this.center=new Vector2(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Matrix3,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=R,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(n&&n.depth&&n.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(_tempVec3).x}get height(){return this.source.getSize(_tempVec3).y}get depth(){return this.source.getSize(_tempVec3).z}get image(){return this.source.data}set image(n=null){this.source.data=n}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(n,u){this.updateRanges.push({start:n,count:u})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(n){return this.name=n.name,this.source=n.source,this.mipmaps=n.mipmaps.slice(0),this.mapping=n.mapping,this.channel=n.channel,this.wrapS=n.wrapS,this.wrapT=n.wrapT,this.magFilter=n.magFilter,this.minFilter=n.minFilter,this.anisotropy=n.anisotropy,this.format=n.format,this.internalFormat=n.internalFormat,this.type=n.type,this.offset.copy(n.offset),this.repeat.copy(n.repeat),this.center.copy(n.center),this.rotation=n.rotation,this.matrixAutoUpdate=n.matrixAutoUpdate,this.matrix.copy(n.matrix),this.generateMipmaps=n.generateMipmaps,this.premultiplyAlpha=n.premultiplyAlpha,this.flipY=n.flipY,this.unpackAlignment=n.unpackAlignment,this.colorSpace=n.colorSpace,this.renderTarget=n.renderTarget,this.isRenderTargetTexture=n.isRenderTargetTexture,this.isArrayTexture=n.isArrayTexture,this.userData=JSON.parse(JSON.stringify(n.userData)),this.needsUpdate=!0,this}setValues(n){for(const u in n){const f=n[u];if(f===void 0){warn(`Texture.setValues(): parameter '${u}' has value of undefined.`);continue}const y=this[u];if(y===void 0){warn(`Texture.setValues(): property '${u}' does not exist.`);continue}y&&f&&y.isVector2&&f.isVector2||y&&f&&y.isVector3&&f.isVector3||y&&f&&y.isMatrix3&&f.isMatrix3?y.copy(f):this[u]=f}}toJSON(n){const u=n===void 0||typeof n=="string";if(!u&&n.textures[this.uuid]!==void 0)return n.textures[this.uuid];const f={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(n).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(f.userData=this.userData),u||(n.textures[this.uuid]=f),f}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(n){if(this.mapping!==UVMapping)return n;if(n.applyMatrix3(this.matrix),n.x<0||n.x>1)switch(this.wrapS){case RepeatWrapping:n.x=n.x-Math.floor(n.x);break;case ClampToEdgeWrapping:n.x=n.x<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(n.x)%2)===1?n.x=Math.ceil(n.x)-n.x:n.x=n.x-Math.floor(n.x);break}if(n.y<0||n.y>1)switch(this.wrapT){case RepeatWrapping:n.y=n.y-Math.floor(n.y);break;case ClampToEdgeWrapping:n.y=n.y<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(n.y)%2)===1?n.y=Math.ceil(n.y)-n.y:n.y=n.y-Math.floor(n.y);break}return this.flipY&&(n.y=1-n.y),n}set needsUpdate(n){n===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(n){n===!0&&this.pmremVersion++}}Texture.DEFAULT_IMAGE=null;Texture.DEFAULT_MAPPING=UVMapping;Texture.DEFAULT_ANISOTROPY=1;class Vector4{constructor(n=0,u=0,f=0,y=1){Vector4.prototype.isVector4=!0,this.x=n,this.y=u,this.z=f,this.w=y}get width(){return this.z}set width(n){this.z=n}get height(){return this.w}set height(n){this.w=n}set(n,u,f,y){return this.x=n,this.y=u,this.z=f,this.w=y,this}setScalar(n){return this.x=n,this.y=n,this.z=n,this.w=n,this}setX(n){return this.x=n,this}setY(n){return this.y=n,this}setZ(n){return this.z=n,this}setW(n){return this.w=n,this}setComponent(n,u){switch(n){case 0:this.x=u;break;case 1:this.y=u;break;case 2:this.z=u;break;case 3:this.w=u;break;default:throw new Error("index is out of range: "+n)}return this}getComponent(n){switch(n){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+n)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(n){return this.x=n.x,this.y=n.y,this.z=n.z,this.w=n.w!==void 0?n.w:1,this}add(n){return this.x+=n.x,this.y+=n.y,this.z+=n.z,this.w+=n.w,this}addScalar(n){return this.x+=n,this.y+=n,this.z+=n,this.w+=n,this}addVectors(n,u){return this.x=n.x+u.x,this.y=n.y+u.y,this.z=n.z+u.z,this.w=n.w+u.w,this}addScaledVector(n,u){return this.x+=n.x*u,this.y+=n.y*u,this.z+=n.z*u,this.w+=n.w*u,this}sub(n){return this.x-=n.x,this.y-=n.y,this.z-=n.z,this.w-=n.w,this}subScalar(n){return this.x-=n,this.y-=n,this.z-=n,this.w-=n,this}subVectors(n,u){return this.x=n.x-u.x,this.y=n.y-u.y,this.z=n.z-u.z,this.w=n.w-u.w,this}multiply(n){return this.x*=n.x,this.y*=n.y,this.z*=n.z,this.w*=n.w,this}multiplyScalar(n){return this.x*=n,this.y*=n,this.z*=n,this.w*=n,this}applyMatrix4(n){const u=this.x,f=this.y,y=this.z,S=this.w,A=n.elements;return this.x=A[0]*u+A[4]*f+A[8]*y+A[12]*S,this.y=A[1]*u+A[5]*f+A[9]*y+A[13]*S,this.z=A[2]*u+A[6]*f+A[10]*y+A[14]*S,this.w=A[3]*u+A[7]*f+A[11]*y+A[15]*S,this}divide(n){return this.x/=n.x,this.y/=n.y,this.z/=n.z,this.w/=n.w,this}divideScalar(n){return this.multiplyScalar(1/n)}setAxisAngleFromQuaternion(n){this.w=2*Math.acos(n.w);const u=Math.sqrt(1-n.w*n.w);return u<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=n.x/u,this.y=n.y/u,this.z=n.z/u),this}setAxisAngleFromRotationMatrix(n){let u,f,y,S;const C=n.elements,T=C[0],R=C[4],I=C[8],N=C[1],L=C[5],F=C[9],H=C[2],z=C[6],U=C[10];if(Math.abs(R-N)<.01&&Math.abs(I-H)<.01&&Math.abs(F-z)<.01){if(Math.abs(R+N)<.1&&Math.abs(I+H)<.1&&Math.abs(F+z)<.1&&Math.abs(T+L+U-3)<.1)return this.set(1,0,0,0),this;u=Math.PI;const Y=(T+1)/2,K=(L+1)/2,Z=(U+1)/2,J=(R+N)/4,te=(I+H)/4,de=(F+z)/4;return Y>K&&Y>Z?Y<.01?(f=0,y=.707106781,S=.707106781):(f=Math.sqrt(Y),y=J/f,S=te/f):K>Z?K<.01?(f=.707106781,y=0,S=.707106781):(y=Math.sqrt(K),f=J/y,S=de/y):Z<.01?(f=.707106781,y=.707106781,S=0):(S=Math.sqrt(Z),f=te/S,y=de/S),this.set(f,y,S,u),this}let G=Math.sqrt((z-F)*(z-F)+(I-H)*(I-H)+(N-R)*(N-R));return Math.abs(G)<.001&&(G=1),this.x=(z-F)/G,this.y=(I-H)/G,this.z=(N-R)/G,this.w=Math.acos((T+L+U-1)/2),this}setFromMatrixPosition(n){const u=n.elements;return this.x=u[12],this.y=u[13],this.z=u[14],this.w=u[15],this}min(n){return this.x=Math.min(this.x,n.x),this.y=Math.min(this.y,n.y),this.z=Math.min(this.z,n.z),this.w=Math.min(this.w,n.w),this}max(n){return this.x=Math.max(this.x,n.x),this.y=Math.max(this.y,n.y),this.z=Math.max(this.z,n.z),this.w=Math.max(this.w,n.w),this}clamp(n,u){return this.x=clamp(this.x,n.x,u.x),this.y=clamp(this.y,n.y,u.y),this.z=clamp(this.z,n.z,u.z),this.w=clamp(this.w,n.w,u.w),this}clampScalar(n,u){return this.x=clamp(this.x,n,u),this.y=clamp(this.y,n,u),this.z=clamp(this.z,n,u),this.w=clamp(this.w,n,u),this}clampLength(n,u){const f=this.length();return this.divideScalar(f||1).multiplyScalar(clamp(f,n,u))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(n){return this.x*n.x+this.y*n.y+this.z*n.z+this.w*n.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(n){return this.normalize().multiplyScalar(n)}lerp(n,u){return this.x+=(n.x-this.x)*u,this.y+=(n.y-this.y)*u,this.z+=(n.z-this.z)*u,this.w+=(n.w-this.w)*u,this}lerpVectors(n,u,f){return this.x=n.x+(u.x-n.x)*f,this.y=n.y+(u.y-n.y)*f,this.z=n.z+(u.z-n.z)*f,this.w=n.w+(u.w-n.w)*f,this}equals(n){return n.x===this.x&&n.y===this.y&&n.z===this.z&&n.w===this.w}fromArray(n,u=0){return this.x=n[u],this.y=n[u+1],this.z=n[u+2],this.w=n[u+3],this}toArray(n=[],u=0){return n[u]=this.x,n[u+1]=this.y,n[u+2]=this.z,n[u+3]=this.w,n}fromBufferAttribute(n,u){return this.x=n.getX(u),this.y=n.getY(u),this.z=n.getZ(u),this.w=n.getW(u),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class RenderTarget extends EventDispatcher{constructor(n=1,u=1,f={}){super(),f=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:LinearFilter,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},f),this.isRenderTarget=!0,this.width=n,this.height=u,this.depth=f.depth,this.scissor=new Vector4(0,0,n,u),this.scissorTest=!1,this.viewport=new Vector4(0,0,n,u);const y={width:n,height:u,depth:f.depth},S=new Texture(y);this.textures=[];const A=f.count;for(let w=0;w<A;w++)this.textures[w]=S.clone(),this.textures[w].isRenderTargetTexture=!0,this.textures[w].renderTarget=this;this._setTextureOptions(f),this.depthBuffer=f.depthBuffer,this.stencilBuffer=f.stencilBuffer,this.resolveDepthBuffer=f.resolveDepthBuffer,this.resolveStencilBuffer=f.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=f.depthTexture,this.samples=f.samples,this.multiview=f.multiview}_setTextureOptions(n={}){const u={minFilter:LinearFilter,generateMipmaps:!1,flipY:!1,internalFormat:null};n.mapping!==void 0&&(u.mapping=n.mapping),n.wrapS!==void 0&&(u.wrapS=n.wrapS),n.wrapT!==void 0&&(u.wrapT=n.wrapT),n.wrapR!==void 0&&(u.wrapR=n.wrapR),n.magFilter!==void 0&&(u.magFilter=n.magFilter),n.minFilter!==void 0&&(u.minFilter=n.minFilter),n.format!==void 0&&(u.format=n.format),n.type!==void 0&&(u.type=n.type),n.anisotropy!==void 0&&(u.anisotropy=n.anisotropy),n.colorSpace!==void 0&&(u.colorSpace=n.colorSpace),n.flipY!==void 0&&(u.flipY=n.flipY),n.generateMipmaps!==void 0&&(u.generateMipmaps=n.generateMipmaps),n.internalFormat!==void 0&&(u.internalFormat=n.internalFormat);for(let f=0;f<this.textures.length;f++)this.textures[f].setValues(u)}get texture(){return this.textures[0]}set texture(n){this.textures[0]=n}set depthTexture(n){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),n!==null&&(n.renderTarget=this),this._depthTexture=n}get depthTexture(){return this._depthTexture}setSize(n,u,f=1){if(this.width!==n||this.height!==u||this.depth!==f){this.width=n,this.height=u,this.depth=f;for(let y=0,S=this.textures.length;y<S;y++)this.textures[y].image.width=n,this.textures[y].image.height=u,this.textures[y].image.depth=f,this.textures[y].isData3DTexture!==!0&&(this.textures[y].isArrayTexture=this.textures[y].image.depth>1);this.dispose()}this.viewport.set(0,0,n,u),this.scissor.set(0,0,n,u)}clone(){return new this.constructor().copy(this)}copy(n){this.width=n.width,this.height=n.height,this.depth=n.depth,this.scissor.copy(n.scissor),this.scissorTest=n.scissorTest,this.viewport.copy(n.viewport),this.textures.length=0;for(let u=0,f=n.textures.length;u<f;u++){this.textures[u]=n.textures[u].clone(),this.textures[u].isRenderTargetTexture=!0,this.textures[u].renderTarget=this;const y=Object.assign({},n.textures[u].image);this.textures[u].source=new Source(y)}return this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,n.depthTexture!==null&&(this.depthTexture=n.depthTexture.clone()),this.samples=n.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class WebGLRenderTarget extends RenderTarget{constructor(n=1,u=1,f={}){super(n,u,f),this.isWebGLRenderTarget=!0}}class DataArrayTexture extends Texture{constructor(n=null,u=1,f=1,y=1){super(null),this.isDataArrayTexture=!0,this.image={data:n,width:u,height:f,depth:y},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(n){this.layerUpdates.add(n)}clearLayerUpdates(){this.layerUpdates.clear()}}class WebGLArrayRenderTarget extends WebGLRenderTarget{constructor(n=1,u=1,f=1,y={}){super(n,u,y),this.isWebGLArrayRenderTarget=!0,this.depth=f,this.texture=new DataArrayTexture(null,n,u,f),this._setTextureOptions(y),this.texture.isRenderTargetTexture=!0}}class Data3DTexture extends Texture{constructor(n=null,u=1,f=1,y=1){super(null),this.isData3DTexture=!0,this.image={data:n,width:u,height:f,depth:y},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class WebGL3DRenderTarget extends WebGLRenderTarget{constructor(n=1,u=1,f=1,y={}){super(n,u,y),this.isWebGL3DRenderTarget=!0,this.depth=f,this.texture=new Data3DTexture(null,n,u,f),this._setTextureOptions(y),this.texture.isRenderTargetTexture=!0}}class Box3{constructor(n=new Vector3(1/0,1/0,1/0),u=new Vector3(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=n,this.max=u}set(n,u){return this.min.copy(n),this.max.copy(u),this}setFromArray(n){this.makeEmpty();for(let u=0,f=n.length;u<f;u+=3)this.expandByPoint(_vector$b.fromArray(n,u));return this}setFromBufferAttribute(n){this.makeEmpty();for(let u=0,f=n.count;u<f;u++)this.expandByPoint(_vector$b.fromBufferAttribute(n,u));return this}setFromPoints(n){this.makeEmpty();for(let u=0,f=n.length;u<f;u++)this.expandByPoint(n[u]);return this}setFromCenterAndSize(n,u){const f=_vector$b.copy(u).multiplyScalar(.5);return this.min.copy(n).sub(f),this.max.copy(n).add(f),this}setFromObject(n,u=!1){return this.makeEmpty(),this.expandByObject(n,u)}clone(){return new this.constructor().copy(this)}copy(n){return this.min.copy(n.min),this.max.copy(n.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(n){return this.isEmpty()?n.set(0,0,0):n.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(n){return this.isEmpty()?n.set(0,0,0):n.subVectors(this.max,this.min)}expandByPoint(n){return this.min.min(n),this.max.max(n),this}expandByVector(n){return this.min.sub(n),this.max.add(n),this}expandByScalar(n){return this.min.addScalar(-n),this.max.addScalar(n),this}expandByObject(n,u=!1){n.updateWorldMatrix(!1,!1);const f=n.geometry;if(f!==void 0){const S=f.getAttribute("position");if(u===!0&&S!==void 0&&n.isInstancedMesh!==!0)for(let A=0,w=S.count;A<w;A++)n.isMesh===!0?n.getVertexPosition(A,_vector$b):_vector$b.fromBufferAttribute(S,A),_vector$b.applyMatrix4(n.matrixWorld),this.expandByPoint(_vector$b);else n.boundingBox!==void 0?(n.boundingBox===null&&n.computeBoundingBox(),_box$4.copy(n.boundingBox)):(f.boundingBox===null&&f.computeBoundingBox(),_box$4.copy(f.boundingBox)),_box$4.applyMatrix4(n.matrixWorld),this.union(_box$4)}const y=n.children;for(let S=0,A=y.length;S<A;S++)this.expandByObject(y[S],u);return this}containsPoint(n){return n.x>=this.min.x&&n.x<=this.max.x&&n.y>=this.min.y&&n.y<=this.max.y&&n.z>=this.min.z&&n.z<=this.max.z}containsBox(n){return this.min.x<=n.min.x&&n.max.x<=this.max.x&&this.min.y<=n.min.y&&n.max.y<=this.max.y&&this.min.z<=n.min.z&&n.max.z<=this.max.z}getParameter(n,u){return u.set((n.x-this.min.x)/(this.max.x-this.min.x),(n.y-this.min.y)/(this.max.y-this.min.y),(n.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(n){return n.max.x>=this.min.x&&n.min.x<=this.max.x&&n.max.y>=this.min.y&&n.min.y<=this.max.y&&n.max.z>=this.min.z&&n.min.z<=this.max.z}intersectsSphere(n){return this.clampPoint(n.center,_vector$b),_vector$b.distanceToSquared(n.center)<=n.radius*n.radius}intersectsPlane(n){let u,f;return n.normal.x>0?(u=n.normal.x*this.min.x,f=n.normal.x*this.max.x):(u=n.normal.x*this.max.x,f=n.normal.x*this.min.x),n.normal.y>0?(u+=n.normal.y*this.min.y,f+=n.normal.y*this.max.y):(u+=n.normal.y*this.max.y,f+=n.normal.y*this.min.y),n.normal.z>0?(u+=n.normal.z*this.min.z,f+=n.normal.z*this.max.z):(u+=n.normal.z*this.max.z,f+=n.normal.z*this.min.z),u<=-n.constant&&f>=-n.constant}intersectsTriangle(n){if(this.isEmpty())return!1;this.getCenter(_center),_extents.subVectors(this.max,_center),_v0$2.subVectors(n.a,_center),_v1$7.subVectors(n.b,_center),_v2$4.subVectors(n.c,_center),_f0.subVectors(_v1$7,_v0$2),_f1.subVectors(_v2$4,_v1$7),_f2.subVectors(_v0$2,_v2$4);let u=[0,-_f0.z,_f0.y,0,-_f1.z,_f1.y,0,-_f2.z,_f2.y,_f0.z,0,-_f0.x,_f1.z,0,-_f1.x,_f2.z,0,-_f2.x,-_f0.y,_f0.x,0,-_f1.y,_f1.x,0,-_f2.y,_f2.x,0];return!satForAxes(u,_v0$2,_v1$7,_v2$4,_extents)||(u=[1,0,0,0,1,0,0,0,1],!satForAxes(u,_v0$2,_v1$7,_v2$4,_extents))?!1:(_triangleNormal.crossVectors(_f0,_f1),u=[_triangleNormal.x,_triangleNormal.y,_triangleNormal.z],satForAxes(u,_v0$2,_v1$7,_v2$4,_extents))}clampPoint(n,u){return u.copy(n).clamp(this.min,this.max)}distanceToPoint(n){return this.clampPoint(n,_vector$b).distanceTo(n)}getBoundingSphere(n){return this.isEmpty()?n.makeEmpty():(this.getCenter(n.center),n.radius=this.getSize(_vector$b).length()*.5),n}intersect(n){return this.min.max(n.min),this.max.min(n.max),this.isEmpty()&&this.makeEmpty(),this}union(n){return this.min.min(n.min),this.max.max(n.max),this}applyMatrix4(n){return this.isEmpty()?this:(_points[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(n),_points[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(n),_points[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(n),_points[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(n),_points[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(n),_points[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(n),_points[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(n),_points[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(n),this.setFromPoints(_points),this)}translate(n){return this.min.add(n),this.max.add(n),this}equals(n){return n.min.equals(this.min)&&n.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(n){return this.min.fromArray(n.min),this.max.fromArray(n.max),this}}const _points=[new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3],_vector$b=new Vector3,_box$4=new Box3,_v0$2=new Vector3,_v1$7=new Vector3,_v2$4=new Vector3,_f0=new Vector3,_f1=new Vector3,_f2=new Vector3,_center=new Vector3,_extents=new Vector3,_triangleNormal=new Vector3,_testAxis=new Vector3;function satForAxes(s,n,u,f,y){for(let S=0,A=s.length-3;S<=A;S+=3){_testAxis.fromArray(s,S);const w=y.x*Math.abs(_testAxis.x)+y.y*Math.abs(_testAxis.y)+y.z*Math.abs(_testAxis.z),C=n.dot(_testAxis),T=u.dot(_testAxis),R=f.dot(_testAxis);if(Math.max(-Math.max(C,T,R),Math.min(C,T,R))>w)return!1}return!0}const _box$3=new Box3,_v1$6=new Vector3,_v2$3=new Vector3;class Sphere{constructor(n=new Vector3,u=-1){this.isSphere=!0,this.center=n,this.radius=u}set(n,u){return this.center.copy(n),this.radius=u,this}setFromPoints(n,u){const f=this.center;u!==void 0?f.copy(u):_box$3.setFromPoints(n).getCenter(f);let y=0;for(let S=0,A=n.length;S<A;S++)y=Math.max(y,f.distanceToSquared(n[S]));return this.radius=Math.sqrt(y),this}copy(n){return this.center.copy(n.center),this.radius=n.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(n){return n.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(n){return n.distanceTo(this.center)-this.radius}intersectsSphere(n){const u=this.radius+n.radius;return n.center.distanceToSquared(this.center)<=u*u}intersectsBox(n){return n.intersectsSphere(this)}intersectsPlane(n){return Math.abs(n.distanceToPoint(this.center))<=this.radius}clampPoint(n,u){const f=this.center.distanceToSquared(n);return u.copy(n),f>this.radius*this.radius&&(u.sub(this.center).normalize(),u.multiplyScalar(this.radius).add(this.center)),u}getBoundingBox(n){return this.isEmpty()?(n.makeEmpty(),n):(n.set(this.center,this.center),n.expandByScalar(this.radius),n)}applyMatrix4(n){return this.center.applyMatrix4(n),this.radius=this.radius*n.getMaxScaleOnAxis(),this}translate(n){return this.center.add(n),this}expandByPoint(n){if(this.isEmpty())return this.center.copy(n),this.radius=0,this;_v1$6.subVectors(n,this.center);const u=_v1$6.lengthSq();if(u>this.radius*this.radius){const f=Math.sqrt(u),y=(f-this.radius)*.5;this.center.addScaledVector(_v1$6,y/f),this.radius+=y}return this}union(n){return n.isEmpty()?this:this.isEmpty()?(this.copy(n),this):(this.center.equals(n.center)===!0?this.radius=Math.max(this.radius,n.radius):(_v2$3.subVectors(n.center,this.center).setLength(n.radius),this.expandByPoint(_v1$6.copy(n.center).add(_v2$3)),this.expandByPoint(_v1$6.copy(n.center).sub(_v2$3))),this)}equals(n){return n.center.equals(this.center)&&n.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(n){return this.radius=n.radius,this.center.fromArray(n.center),this}}const _vector$a=new Vector3,_segCenter=new Vector3,_segDir=new Vector3,_diff=new Vector3,_edge1=new Vector3,_edge2=new Vector3,_normal$1=new Vector3;class Ray{constructor(n=new Vector3,u=new Vector3(0,0,-1)){this.origin=n,this.direction=u}set(n,u){return this.origin.copy(n),this.direction.copy(u),this}copy(n){return this.origin.copy(n.origin),this.direction.copy(n.direction),this}at(n,u){return u.copy(this.origin).addScaledVector(this.direction,n)}lookAt(n){return this.direction.copy(n).sub(this.origin).normalize(),this}recast(n){return this.origin.copy(this.at(n,_vector$a)),this}closestPointToPoint(n,u){u.subVectors(n,this.origin);const f=u.dot(this.direction);return f<0?u.copy(this.origin):u.copy(this.origin).addScaledVector(this.direction,f)}distanceToPoint(n){return Math.sqrt(this.distanceSqToPoint(n))}distanceSqToPoint(n){const u=_vector$a.subVectors(n,this.origin).dot(this.direction);return u<0?this.origin.distanceToSquared(n):(_vector$a.copy(this.origin).addScaledVector(this.direction,u),_vector$a.distanceToSquared(n))}distanceSqToSegment(n,u,f,y){_segCenter.copy(n).add(u).multiplyScalar(.5),_segDir.copy(u).sub(n).normalize(),_diff.copy(this.origin).sub(_segCenter);const S=n.distanceTo(u)*.5,A=-this.direction.dot(_segDir),w=_diff.dot(this.direction),C=-_diff.dot(_segDir),T=_diff.lengthSq(),R=Math.abs(1-A*A);let I,N,L,F;if(R>0)if(I=A*C-w,N=A*w-C,F=S*R,I>=0)if(N>=-F)if(N<=F){const H=1/R;I*=H,N*=H,L=I*(I+A*N+2*w)+N*(A*I+N+2*C)+T}else N=S,I=Math.max(0,-(A*N+w)),L=-I*I+N*(N+2*C)+T;else N=-S,I=Math.max(0,-(A*N+w)),L=-I*I+N*(N+2*C)+T;else N<=-F?(I=Math.max(0,-(-A*S+w)),N=I>0?-S:Math.min(Math.max(-S,-C),S),L=-I*I+N*(N+2*C)+T):N<=F?(I=0,N=Math.min(Math.max(-S,-C),S),L=N*(N+2*C)+T):(I=Math.max(0,-(A*S+w)),N=I>0?S:Math.min(Math.max(-S,-C),S),L=-I*I+N*(N+2*C)+T);else N=A>0?-S:S,I=Math.max(0,-(A*N+w)),L=-I*I+N*(N+2*C)+T;return f&&f.copy(this.origin).addScaledVector(this.direction,I),y&&y.copy(_segCenter).addScaledVector(_segDir,N),L}intersectSphere(n,u){_vector$a.subVectors(n.center,this.origin);const f=_vector$a.dot(this.direction),y=_vector$a.dot(_vector$a)-f*f,S=n.radius*n.radius;if(y>S)return null;const A=Math.sqrt(S-y),w=f-A,C=f+A;return C<0?null:w<0?this.at(C,u):this.at(w,u)}intersectsSphere(n){return n.radius<0?!1:this.distanceSqToPoint(n.center)<=n.radius*n.radius}distanceToPlane(n){const u=n.normal.dot(this.direction);if(u===0)return n.distanceToPoint(this.origin)===0?0:null;const f=-(this.origin.dot(n.normal)+n.constant)/u;return f>=0?f:null}intersectPlane(n,u){const f=this.distanceToPlane(n);return f===null?null:this.at(f,u)}intersectsPlane(n){const u=n.distanceToPoint(this.origin);return u===0||n.normal.dot(this.direction)*u<0}intersectBox(n,u){let f,y,S,A,w,C;const T=1/this.direction.x,R=1/this.direction.y,I=1/this.direction.z,N=this.origin;return T>=0?(f=(n.min.x-N.x)*T,y=(n.max.x-N.x)*T):(f=(n.max.x-N.x)*T,y=(n.min.x-N.x)*T),R>=0?(S=(n.min.y-N.y)*R,A=(n.max.y-N.y)*R):(S=(n.max.y-N.y)*R,A=(n.min.y-N.y)*R),f>A||S>y||((S>f||isNaN(f))&&(f=S),(A<y||isNaN(y))&&(y=A),I>=0?(w=(n.min.z-N.z)*I,C=(n.max.z-N.z)*I):(w=(n.max.z-N.z)*I,C=(n.min.z-N.z)*I),f>C||w>y)||((w>f||f!==f)&&(f=w),(C<y||y!==y)&&(y=C),y<0)?null:this.at(f>=0?f:y,u)}intersectsBox(n){return this.intersectBox(n,_vector$a)!==null}intersectTriangle(n,u,f,y,S){_edge1.subVectors(u,n),_edge2.subVectors(f,n),_normal$1.crossVectors(_edge1,_edge2);let A=this.direction.dot(_normal$1),w;if(A>0){if(y)return null;w=1}else if(A<0)w=-1,A=-A;else return null;_diff.subVectors(this.origin,n);const C=w*this.direction.dot(_edge2.crossVectors(_diff,_edge2));if(C<0)return null;const T=w*this.direction.dot(_edge1.cross(_diff));if(T<0||C+T>A)return null;const R=-w*_diff.dot(_normal$1);return R<0?null:this.at(R/A,S)}applyMatrix4(n){return this.origin.applyMatrix4(n),this.direction.transformDirection(n),this}equals(n){return n.origin.equals(this.origin)&&n.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Matrix4{constructor(n,u,f,y,S,A,w,C,T,R,I,N,L,F,H,z){Matrix4.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],n!==void 0&&this.set(n,u,f,y,S,A,w,C,T,R,I,N,L,F,H,z)}set(n,u,f,y,S,A,w,C,T,R,I,N,L,F,H,z){const U=this.elements;return U[0]=n,U[4]=u,U[8]=f,U[12]=y,U[1]=S,U[5]=A,U[9]=w,U[13]=C,U[2]=T,U[6]=R,U[10]=I,U[14]=N,U[3]=L,U[7]=F,U[11]=H,U[15]=z,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Matrix4().fromArray(this.elements)}copy(n){const u=this.elements,f=n.elements;return u[0]=f[0],u[1]=f[1],u[2]=f[2],u[3]=f[3],u[4]=f[4],u[5]=f[5],u[6]=f[6],u[7]=f[7],u[8]=f[8],u[9]=f[9],u[10]=f[10],u[11]=f[11],u[12]=f[12],u[13]=f[13],u[14]=f[14],u[15]=f[15],this}copyPosition(n){const u=this.elements,f=n.elements;return u[12]=f[12],u[13]=f[13],u[14]=f[14],this}setFromMatrix3(n){const u=n.elements;return this.set(u[0],u[3],u[6],0,u[1],u[4],u[7],0,u[2],u[5],u[8],0,0,0,0,1),this}extractBasis(n,u,f){return this.determinant()===0?(n.set(1,0,0),u.set(0,1,0),f.set(0,0,1),this):(n.setFromMatrixColumn(this,0),u.setFromMatrixColumn(this,1),f.setFromMatrixColumn(this,2),this)}makeBasis(n,u,f){return this.set(n.x,u.x,f.x,0,n.y,u.y,f.y,0,n.z,u.z,f.z,0,0,0,0,1),this}extractRotation(n){if(n.determinant()===0)return this.identity();const u=this.elements,f=n.elements,y=1/_v1$5.setFromMatrixColumn(n,0).length(),S=1/_v1$5.setFromMatrixColumn(n,1).length(),A=1/_v1$5.setFromMatrixColumn(n,2).length();return u[0]=f[0]*y,u[1]=f[1]*y,u[2]=f[2]*y,u[3]=0,u[4]=f[4]*S,u[5]=f[5]*S,u[6]=f[6]*S,u[7]=0,u[8]=f[8]*A,u[9]=f[9]*A,u[10]=f[10]*A,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,this}makeRotationFromEuler(n){const u=this.elements,f=n.x,y=n.y,S=n.z,A=Math.cos(f),w=Math.sin(f),C=Math.cos(y),T=Math.sin(y),R=Math.cos(S),I=Math.sin(S);if(n.order==="XYZ"){const N=A*R,L=A*I,F=w*R,H=w*I;u[0]=C*R,u[4]=-C*I,u[8]=T,u[1]=L+F*T,u[5]=N-H*T,u[9]=-w*C,u[2]=H-N*T,u[6]=F+L*T,u[10]=A*C}else if(n.order==="YXZ"){const N=C*R,L=C*I,F=T*R,H=T*I;u[0]=N+H*w,u[4]=F*w-L,u[8]=A*T,u[1]=A*I,u[5]=A*R,u[9]=-w,u[2]=L*w-F,u[6]=H+N*w,u[10]=A*C}else if(n.order==="ZXY"){const N=C*R,L=C*I,F=T*R,H=T*I;u[0]=N-H*w,u[4]=-A*I,u[8]=F+L*w,u[1]=L+F*w,u[5]=A*R,u[9]=H-N*w,u[2]=-A*T,u[6]=w,u[10]=A*C}else if(n.order==="ZYX"){const N=A*R,L=A*I,F=w*R,H=w*I;u[0]=C*R,u[4]=F*T-L,u[8]=N*T+H,u[1]=C*I,u[5]=H*T+N,u[9]=L*T-F,u[2]=-T,u[6]=w*C,u[10]=A*C}else if(n.order==="YZX"){const N=A*C,L=A*T,F=w*C,H=w*T;u[0]=C*R,u[4]=H-N*I,u[8]=F*I+L,u[1]=I,u[5]=A*R,u[9]=-w*R,u[2]=-T*R,u[6]=L*I+F,u[10]=N-H*I}else if(n.order==="XZY"){const N=A*C,L=A*T,F=w*C,H=w*T;u[0]=C*R,u[4]=-I,u[8]=T*R,u[1]=N*I+H,u[5]=A*R,u[9]=L*I-F,u[2]=F*I-L,u[6]=w*R,u[10]=H*I+N}return u[3]=0,u[7]=0,u[11]=0,u[12]=0,u[13]=0,u[14]=0,u[15]=1,this}makeRotationFromQuaternion(n){return this.compose(_zero,n,_one)}lookAt(n,u,f){const y=this.elements;return _z.subVectors(n,u),_z.lengthSq()===0&&(_z.z=1),_z.normalize(),_x.crossVectors(f,_z),_x.lengthSq()===0&&(Math.abs(f.z)===1?_z.x+=1e-4:_z.z+=1e-4,_z.normalize(),_x.crossVectors(f,_z)),_x.normalize(),_y.crossVectors(_z,_x),y[0]=_x.x,y[4]=_y.x,y[8]=_z.x,y[1]=_x.y,y[5]=_y.y,y[9]=_z.y,y[2]=_x.z,y[6]=_y.z,y[10]=_z.z,this}multiply(n){return this.multiplyMatrices(this,n)}premultiply(n){return this.multiplyMatrices(n,this)}multiplyMatrices(n,u){const f=n.elements,y=u.elements,S=this.elements,A=f[0],w=f[4],C=f[8],T=f[12],R=f[1],I=f[5],N=f[9],L=f[13],F=f[2],H=f[6],z=f[10],U=f[14],G=f[3],Y=f[7],K=f[11],Z=f[15],J=y[0],te=y[4],de=y[8],se=y[12],ne=y[1],ge=y[5],Ee=y[9],we=y[13],Ie=y[2],Be=y[6],Me=y[10],Re=y[14],Te=y[3],Se=y[7],oe=y[11],ae=y[15];return S[0]=A*J+w*ne+C*Ie+T*Te,S[4]=A*te+w*ge+C*Be+T*Se,S[8]=A*de+w*Ee+C*Me+T*oe,S[12]=A*se+w*we+C*Re+T*ae,S[1]=R*J+I*ne+N*Ie+L*Te,S[5]=R*te+I*ge+N*Be+L*Se,S[9]=R*de+I*Ee+N*Me+L*oe,S[13]=R*se+I*we+N*Re+L*ae,S[2]=F*J+H*ne+z*Ie+U*Te,S[6]=F*te+H*ge+z*Be+U*Se,S[10]=F*de+H*Ee+z*Me+U*oe,S[14]=F*se+H*we+z*Re+U*ae,S[3]=G*J+Y*ne+K*Ie+Z*Te,S[7]=G*te+Y*ge+K*Be+Z*Se,S[11]=G*de+Y*Ee+K*Me+Z*oe,S[15]=G*se+Y*we+K*Re+Z*ae,this}multiplyScalar(n){const u=this.elements;return u[0]*=n,u[4]*=n,u[8]*=n,u[12]*=n,u[1]*=n,u[5]*=n,u[9]*=n,u[13]*=n,u[2]*=n,u[6]*=n,u[10]*=n,u[14]*=n,u[3]*=n,u[7]*=n,u[11]*=n,u[15]*=n,this}determinant(){const n=this.elements,u=n[0],f=n[4],y=n[8],S=n[12],A=n[1],w=n[5],C=n[9],T=n[13],R=n[2],I=n[6],N=n[10],L=n[14],F=n[3],H=n[7],z=n[11],U=n[15],G=C*L-T*N,Y=w*L-T*I,K=w*N-C*I,Z=A*L-T*R,J=A*N-C*R,te=A*I-w*R;return u*(H*G-z*Y+U*K)-f*(F*G-z*Z+U*J)+y*(F*Y-H*Z+U*te)-S*(F*K-H*J+z*te)}transpose(){const n=this.elements;let u;return u=n[1],n[1]=n[4],n[4]=u,u=n[2],n[2]=n[8],n[8]=u,u=n[6],n[6]=n[9],n[9]=u,u=n[3],n[3]=n[12],n[12]=u,u=n[7],n[7]=n[13],n[13]=u,u=n[11],n[11]=n[14],n[14]=u,this}setPosition(n,u,f){const y=this.elements;return n.isVector3?(y[12]=n.x,y[13]=n.y,y[14]=n.z):(y[12]=n,y[13]=u,y[14]=f),this}invert(){const n=this.elements,u=n[0],f=n[1],y=n[2],S=n[3],A=n[4],w=n[5],C=n[6],T=n[7],R=n[8],I=n[9],N=n[10],L=n[11],F=n[12],H=n[13],z=n[14],U=n[15],G=I*z*T-H*N*T+H*C*L-w*z*L-I*C*U+w*N*U,Y=F*N*T-R*z*T-F*C*L+A*z*L+R*C*U-A*N*U,K=R*H*T-F*I*T+F*w*L-A*H*L-R*w*U+A*I*U,Z=F*I*C-R*H*C-F*w*N+A*H*N+R*w*z-A*I*z,J=u*G+f*Y+y*K+S*Z;if(J===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const te=1/J;return n[0]=G*te,n[1]=(H*N*S-I*z*S-H*y*L+f*z*L+I*y*U-f*N*U)*te,n[2]=(w*z*S-H*C*S+H*y*T-f*z*T-w*y*U+f*C*U)*te,n[3]=(I*C*S-w*N*S-I*y*T+f*N*T+w*y*L-f*C*L)*te,n[4]=Y*te,n[5]=(R*z*S-F*N*S+F*y*L-u*z*L-R*y*U+u*N*U)*te,n[6]=(F*C*S-A*z*S-F*y*T+u*z*T+A*y*U-u*C*U)*te,n[7]=(A*N*S-R*C*S+R*y*T-u*N*T-A*y*L+u*C*L)*te,n[8]=K*te,n[9]=(F*I*S-R*H*S-F*f*L+u*H*L+R*f*U-u*I*U)*te,n[10]=(A*H*S-F*w*S+F*f*T-u*H*T-A*f*U+u*w*U)*te,n[11]=(R*w*S-A*I*S-R*f*T+u*I*T+A*f*L-u*w*L)*te,n[12]=Z*te,n[13]=(R*H*y-F*I*y+F*f*N-u*H*N-R*f*z+u*I*z)*te,n[14]=(F*w*y-A*H*y-F*f*C+u*H*C+A*f*z-u*w*z)*te,n[15]=(A*I*y-R*w*y+R*f*C-u*I*C-A*f*N+u*w*N)*te,this}scale(n){const u=this.elements,f=n.x,y=n.y,S=n.z;return u[0]*=f,u[4]*=y,u[8]*=S,u[1]*=f,u[5]*=y,u[9]*=S,u[2]*=f,u[6]*=y,u[10]*=S,u[3]*=f,u[7]*=y,u[11]*=S,this}getMaxScaleOnAxis(){const n=this.elements,u=n[0]*n[0]+n[1]*n[1]+n[2]*n[2],f=n[4]*n[4]+n[5]*n[5]+n[6]*n[6],y=n[8]*n[8]+n[9]*n[9]+n[10]*n[10];return Math.sqrt(Math.max(u,f,y))}makeTranslation(n,u,f){return n.isVector3?this.set(1,0,0,n.x,0,1,0,n.y,0,0,1,n.z,0,0,0,1):this.set(1,0,0,n,0,1,0,u,0,0,1,f,0,0,0,1),this}makeRotationX(n){const u=Math.cos(n),f=Math.sin(n);return this.set(1,0,0,0,0,u,-f,0,0,f,u,0,0,0,0,1),this}makeRotationY(n){const u=Math.cos(n),f=Math.sin(n);return this.set(u,0,f,0,0,1,0,0,-f,0,u,0,0,0,0,1),this}makeRotationZ(n){const u=Math.cos(n),f=Math.sin(n);return this.set(u,-f,0,0,f,u,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(n,u){const f=Math.cos(u),y=Math.sin(u),S=1-f,A=n.x,w=n.y,C=n.z,T=S*A,R=S*w;return this.set(T*A+f,T*w-y*C,T*C+y*w,0,T*w+y*C,R*w+f,R*C-y*A,0,T*C-y*w,R*C+y*A,S*C*C+f,0,0,0,0,1),this}makeScale(n,u,f){return this.set(n,0,0,0,0,u,0,0,0,0,f,0,0,0,0,1),this}makeShear(n,u,f,y,S,A){return this.set(1,f,S,0,n,1,A,0,u,y,1,0,0,0,0,1),this}compose(n,u,f){const y=this.elements,S=u._x,A=u._y,w=u._z,C=u._w,T=S+S,R=A+A,I=w+w,N=S*T,L=S*R,F=S*I,H=A*R,z=A*I,U=w*I,G=C*T,Y=C*R,K=C*I,Z=f.x,J=f.y,te=f.z;return y[0]=(1-(H+U))*Z,y[1]=(L+K)*Z,y[2]=(F-Y)*Z,y[3]=0,y[4]=(L-K)*J,y[5]=(1-(N+U))*J,y[6]=(z+G)*J,y[7]=0,y[8]=(F+Y)*te,y[9]=(z-G)*te,y[10]=(1-(N+H))*te,y[11]=0,y[12]=n.x,y[13]=n.y,y[14]=n.z,y[15]=1,this}decompose(n,u,f){const y=this.elements;if(n.x=y[12],n.y=y[13],n.z=y[14],this.determinant()===0)return f.set(1,1,1),u.identity(),this;let S=_v1$5.set(y[0],y[1],y[2]).length();const A=_v1$5.set(y[4],y[5],y[6]).length(),w=_v1$5.set(y[8],y[9],y[10]).length();this.determinant()<0&&(S=-S),_m1$2.copy(this);const T=1/S,R=1/A,I=1/w;return _m1$2.elements[0]*=T,_m1$2.elements[1]*=T,_m1$2.elements[2]*=T,_m1$2.elements[4]*=R,_m1$2.elements[5]*=R,_m1$2.elements[6]*=R,_m1$2.elements[8]*=I,_m1$2.elements[9]*=I,_m1$2.elements[10]*=I,u.setFromRotationMatrix(_m1$2),f.x=S,f.y=A,f.z=w,this}makePerspective(n,u,f,y,S,A,w=WebGLCoordinateSystem,C=!1){const T=this.elements,R=2*S/(u-n),I=2*S/(f-y),N=(u+n)/(u-n),L=(f+y)/(f-y);let F,H;if(C)F=S/(A-S),H=A*S/(A-S);else if(w===WebGLCoordinateSystem)F=-(A+S)/(A-S),H=-2*A*S/(A-S);else if(w===WebGPUCoordinateSystem)F=-A/(A-S),H=-A*S/(A-S);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+w);return T[0]=R,T[4]=0,T[8]=N,T[12]=0,T[1]=0,T[5]=I,T[9]=L,T[13]=0,T[2]=0,T[6]=0,T[10]=F,T[14]=H,T[3]=0,T[7]=0,T[11]=-1,T[15]=0,this}makeOrthographic(n,u,f,y,S,A,w=WebGLCoordinateSystem,C=!1){const T=this.elements,R=2/(u-n),I=2/(f-y),N=-(u+n)/(u-n),L=-(f+y)/(f-y);let F,H;if(C)F=1/(A-S),H=A/(A-S);else if(w===WebGLCoordinateSystem)F=-2/(A-S),H=-(A+S)/(A-S);else if(w===WebGPUCoordinateSystem)F=-1/(A-S),H=-S/(A-S);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+w);return T[0]=R,T[4]=0,T[8]=0,T[12]=N,T[1]=0,T[5]=I,T[9]=0,T[13]=L,T[2]=0,T[6]=0,T[10]=F,T[14]=H,T[3]=0,T[7]=0,T[11]=0,T[15]=1,this}equals(n){const u=this.elements,f=n.elements;for(let y=0;y<16;y++)if(u[y]!==f[y])return!1;return!0}fromArray(n,u=0){for(let f=0;f<16;f++)this.elements[f]=n[f+u];return this}toArray(n=[],u=0){const f=this.elements;return n[u]=f[0],n[u+1]=f[1],n[u+2]=f[2],n[u+3]=f[3],n[u+4]=f[4],n[u+5]=f[5],n[u+6]=f[6],n[u+7]=f[7],n[u+8]=f[8],n[u+9]=f[9],n[u+10]=f[10],n[u+11]=f[11],n[u+12]=f[12],n[u+13]=f[13],n[u+14]=f[14],n[u+15]=f[15],n}}const _v1$5=new Vector3,_m1$2=new Matrix4,_zero=new Vector3(0,0,0),_one=new Vector3(1,1,1),_x=new Vector3,_y=new Vector3,_z=new Vector3,_matrix$2=new Matrix4,_quaternion$3=new Quaternion;class Euler{constructor(n=0,u=0,f=0,y=Euler.DEFAULT_ORDER){this.isEuler=!0,this._x=n,this._y=u,this._z=f,this._order=y}get x(){return this._x}set x(n){this._x=n,this._onChangeCallback()}get y(){return this._y}set y(n){this._y=n,this._onChangeCallback()}get z(){return this._z}set z(n){this._z=n,this._onChangeCallback()}get order(){return this._order}set order(n){this._order=n,this._onChangeCallback()}set(n,u,f,y=this._order){return this._x=n,this._y=u,this._z=f,this._order=y,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(n){return this._x=n._x,this._y=n._y,this._z=n._z,this._order=n._order,this._onChangeCallback(),this}setFromRotationMatrix(n,u=this._order,f=!0){const y=n.elements,S=y[0],A=y[4],w=y[8],C=y[1],T=y[5],R=y[9],I=y[2],N=y[6],L=y[10];switch(u){case"XYZ":this._y=Math.asin(clamp(w,-1,1)),Math.abs(w)<.9999999?(this._x=Math.atan2(-R,L),this._z=Math.atan2(-A,S)):(this._x=Math.atan2(N,T),this._z=0);break;case"YXZ":this._x=Math.asin(-clamp(R,-1,1)),Math.abs(R)<.9999999?(this._y=Math.atan2(w,L),this._z=Math.atan2(C,T)):(this._y=Math.atan2(-I,S),this._z=0);break;case"ZXY":this._x=Math.asin(clamp(N,-1,1)),Math.abs(N)<.9999999?(this._y=Math.atan2(-I,L),this._z=Math.atan2(-A,T)):(this._y=0,this._z=Math.atan2(C,S));break;case"ZYX":this._y=Math.asin(-clamp(I,-1,1)),Math.abs(I)<.9999999?(this._x=Math.atan2(N,L),this._z=Math.atan2(C,S)):(this._x=0,this._z=Math.atan2(-A,T));break;case"YZX":this._z=Math.asin(clamp(C,-1,1)),Math.abs(C)<.9999999?(this._x=Math.atan2(-R,T),this._y=Math.atan2(-I,S)):(this._x=0,this._y=Math.atan2(w,L));break;case"XZY":this._z=Math.asin(-clamp(A,-1,1)),Math.abs(A)<.9999999?(this._x=Math.atan2(N,T),this._y=Math.atan2(w,S)):(this._x=Math.atan2(-R,L),this._y=0);break;default:warn("Euler: .setFromRotationMatrix() encountered an unknown order: "+u)}return this._order=u,f===!0&&this._onChangeCallback(),this}setFromQuaternion(n,u,f){return _matrix$2.makeRotationFromQuaternion(n),this.setFromRotationMatrix(_matrix$2,u,f)}setFromVector3(n,u=this._order){return this.set(n.x,n.y,n.z,u)}reorder(n){return _quaternion$3.setFromEuler(this),this.setFromQuaternion(_quaternion$3,n)}equals(n){return n._x===this._x&&n._y===this._y&&n._z===this._z&&n._order===this._order}fromArray(n){return this._x=n[0],this._y=n[1],this._z=n[2],n[3]!==void 0&&(this._order=n[3]),this._onChangeCallback(),this}toArray(n=[],u=0){return n[u]=this._x,n[u+1]=this._y,n[u+2]=this._z,n[u+3]=this._order,n}_onChange(n){return this._onChangeCallback=n,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Euler.DEFAULT_ORDER="XYZ";class Layers{constructor(){this.mask=1}set(n){this.mask=(1<<n|0)>>>0}enable(n){this.mask|=1<<n|0}enableAll(){this.mask=-1}toggle(n){this.mask^=1<<n|0}disable(n){this.mask&=~(1<<n|0)}disableAll(){this.mask=0}test(n){return(this.mask&n.mask)!==0}isEnabled(n){return(this.mask&(1<<n|0))!==0}}let _object3DId=0;const _v1$4=new Vector3,_q1=new Quaternion,_m1$1$1=new Matrix4,_target=new Vector3,_position$3=new Vector3,_scale$2=new Vector3,_quaternion$2=new Quaternion,_xAxis=new Vector3(1,0,0),_yAxis=new Vector3(0,1,0),_zAxis=new Vector3(0,0,1),_addedEvent={type:"added"},_removedEvent={type:"removed"},_childaddedEvent={type:"childadded",child:null},_childremovedEvent={type:"childremoved",child:null};class Object3D extends EventDispatcher{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:_object3DId++}),this.uuid=generateUUID$1(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Object3D.DEFAULT_UP.clone();const n=new Vector3,u=new Euler,f=new Quaternion,y=new Vector3(1,1,1);function S(){f.setFromEuler(u,!1)}function A(){u.setFromQuaternion(f,void 0,!1)}u._onChange(S),f._onChange(A),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:n},rotation:{configurable:!0,enumerable:!0,value:u},quaternion:{configurable:!0,enumerable:!0,value:f},scale:{configurable:!0,enumerable:!0,value:y},modelViewMatrix:{value:new Matrix4},normalMatrix:{value:new Matrix3}}),this.matrix=new Matrix4,this.matrixWorld=new Matrix4,this.matrixAutoUpdate=Object3D.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Object3D.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Layers,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(n){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(n),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(n){return this.quaternion.premultiply(n),this}setRotationFromAxisAngle(n,u){this.quaternion.setFromAxisAngle(n,u)}setRotationFromEuler(n){this.quaternion.setFromEuler(n,!0)}setRotationFromMatrix(n){this.quaternion.setFromRotationMatrix(n)}setRotationFromQuaternion(n){this.quaternion.copy(n)}rotateOnAxis(n,u){return _q1.setFromAxisAngle(n,u),this.quaternion.multiply(_q1),this}rotateOnWorldAxis(n,u){return _q1.setFromAxisAngle(n,u),this.quaternion.premultiply(_q1),this}rotateX(n){return this.rotateOnAxis(_xAxis,n)}rotateY(n){return this.rotateOnAxis(_yAxis,n)}rotateZ(n){return this.rotateOnAxis(_zAxis,n)}translateOnAxis(n,u){return _v1$4.copy(n).applyQuaternion(this.quaternion),this.position.add(_v1$4.multiplyScalar(u)),this}translateX(n){return this.translateOnAxis(_xAxis,n)}translateY(n){return this.translateOnAxis(_yAxis,n)}translateZ(n){return this.translateOnAxis(_zAxis,n)}localToWorld(n){return this.updateWorldMatrix(!0,!1),n.applyMatrix4(this.matrixWorld)}worldToLocal(n){return this.updateWorldMatrix(!0,!1),n.applyMatrix4(_m1$1$1.copy(this.matrixWorld).invert())}lookAt(n,u,f){n.isVector3?_target.copy(n):_target.set(n,u,f);const y=this.parent;this.updateWorldMatrix(!0,!1),_position$3.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_m1$1$1.lookAt(_position$3,_target,this.up):_m1$1$1.lookAt(_target,_position$3,this.up),this.quaternion.setFromRotationMatrix(_m1$1$1),y&&(_m1$1$1.extractRotation(y.matrixWorld),_q1.setFromRotationMatrix(_m1$1$1),this.quaternion.premultiply(_q1.invert()))}add(n){if(arguments.length>1){for(let u=0;u<arguments.length;u++)this.add(arguments[u]);return this}return n===this?(error("Object3D.add: object can't be added as a child of itself.",n),this):(n&&n.isObject3D?(n.removeFromParent(),n.parent=this,this.children.push(n),n.dispatchEvent(_addedEvent),_childaddedEvent.child=n,this.dispatchEvent(_childaddedEvent),_childaddedEvent.child=null):error("Object3D.add: object not an instance of THREE.Object3D.",n),this)}remove(n){if(arguments.length>1){for(let f=0;f<arguments.length;f++)this.remove(arguments[f]);return this}const u=this.children.indexOf(n);return u!==-1&&(n.parent=null,this.children.splice(u,1),n.dispatchEvent(_removedEvent),_childremovedEvent.child=n,this.dispatchEvent(_childremovedEvent),_childremovedEvent.child=null),this}removeFromParent(){const n=this.parent;return n!==null&&n.remove(this),this}clear(){return this.remove(...this.children)}attach(n){return this.updateWorldMatrix(!0,!1),_m1$1$1.copy(this.matrixWorld).invert(),n.parent!==null&&(n.parent.updateWorldMatrix(!0,!1),_m1$1$1.multiply(n.parent.matrixWorld)),n.applyMatrix4(_m1$1$1),n.removeFromParent(),n.parent=this,this.children.push(n),n.updateWorldMatrix(!1,!0),n.dispatchEvent(_addedEvent),_childaddedEvent.child=n,this.dispatchEvent(_childaddedEvent),_childaddedEvent.child=null,this}getObjectById(n){return this.getObjectByProperty("id",n)}getObjectByName(n){return this.getObjectByProperty("name",n)}getObjectByProperty(n,u){if(this[n]===u)return this;for(let f=0,y=this.children.length;f<y;f++){const A=this.children[f].getObjectByProperty(n,u);if(A!==void 0)return A}}getObjectsByProperty(n,u,f=[]){this[n]===u&&f.push(this);const y=this.children;for(let S=0,A=y.length;S<A;S++)y[S].getObjectsByProperty(n,u,f);return f}getWorldPosition(n){return this.updateWorldMatrix(!0,!1),n.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(n){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position$3,n,_scale$2),n}getWorldScale(n){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position$3,_quaternion$2,n),n}getWorldDirection(n){this.updateWorldMatrix(!0,!1);const u=this.matrixWorld.elements;return n.set(u[8],u[9],u[10]).normalize()}raycast(){}traverse(n){n(this);const u=this.children;for(let f=0,y=u.length;f<y;f++)u[f].traverse(n)}traverseVisible(n){if(this.visible===!1)return;n(this);const u=this.children;for(let f=0,y=u.length;f<y;f++)u[f].traverseVisible(n)}traverseAncestors(n){const u=this.parent;u!==null&&(n(u),u.traverseAncestors(n))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(n){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||n)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,n=!0);const u=this.children;for(let f=0,y=u.length;f<y;f++)u[f].updateMatrixWorld(n)}updateWorldMatrix(n,u){const f=this.parent;if(n===!0&&f!==null&&f.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),u===!0){const y=this.children;for(let S=0,A=y.length;S<A;S++)y[S].updateWorldMatrix(!1,!0)}}toJSON(n){const u=n===void 0||typeof n=="string",f={};u&&(n={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},f.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const y={};y.uuid=this.uuid,y.type=this.type,this.name!==""&&(y.name=this.name),this.castShadow===!0&&(y.castShadow=!0),this.receiveShadow===!0&&(y.receiveShadow=!0),this.visible===!1&&(y.visible=!1),this.frustumCulled===!1&&(y.frustumCulled=!1),this.renderOrder!==0&&(y.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(y.userData=this.userData),y.layers=this.layers.mask,y.matrix=this.matrix.toArray(),y.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(y.matrixAutoUpdate=!1),this.isInstancedMesh&&(y.type="InstancedMesh",y.count=this.count,y.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(y.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(y.type="BatchedMesh",y.perObjectFrustumCulled=this.perObjectFrustumCulled,y.sortObjects=this.sortObjects,y.drawRanges=this._drawRanges,y.reservedRanges=this._reservedRanges,y.geometryInfo=this._geometryInfo.map(w=>({...w,boundingBox:w.boundingBox?w.boundingBox.toJSON():void 0,boundingSphere:w.boundingSphere?w.boundingSphere.toJSON():void 0})),y.instanceInfo=this._instanceInfo.map(w=>({...w})),y.availableInstanceIds=this._availableInstanceIds.slice(),y.availableGeometryIds=this._availableGeometryIds.slice(),y.nextIndexStart=this._nextIndexStart,y.nextVertexStart=this._nextVertexStart,y.geometryCount=this._geometryCount,y.maxInstanceCount=this._maxInstanceCount,y.maxVertexCount=this._maxVertexCount,y.maxIndexCount=this._maxIndexCount,y.geometryInitialized=this._geometryInitialized,y.matricesTexture=this._matricesTexture.toJSON(n),y.indirectTexture=this._indirectTexture.toJSON(n),this._colorsTexture!==null&&(y.colorsTexture=this._colorsTexture.toJSON(n)),this.boundingSphere!==null&&(y.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(y.boundingBox=this.boundingBox.toJSON()));function S(w,C){return w[C.uuid]===void 0&&(w[C.uuid]=C.toJSON(n)),C.uuid}if(this.isScene)this.background&&(this.background.isColor?y.background=this.background.toJSON():this.background.isTexture&&(y.background=this.background.toJSON(n).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(y.environment=this.environment.toJSON(n).uuid);else if(this.isMesh||this.isLine||this.isPoints){y.geometry=S(n.geometries,this.geometry);const w=this.geometry.parameters;if(w!==void 0&&w.shapes!==void 0){const C=w.shapes;if(Array.isArray(C))for(let T=0,R=C.length;T<R;T++){const I=C[T];S(n.shapes,I)}else S(n.shapes,C)}}if(this.isSkinnedMesh&&(y.bindMode=this.bindMode,y.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(S(n.skeletons,this.skeleton),y.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const w=[];for(let C=0,T=this.material.length;C<T;C++)w.push(S(n.materials,this.material[C]));y.material=w}else y.material=S(n.materials,this.material);if(this.children.length>0){y.children=[];for(let w=0;w<this.children.length;w++)y.children.push(this.children[w].toJSON(n).object)}if(this.animations.length>0){y.animations=[];for(let w=0;w<this.animations.length;w++){const C=this.animations[w];y.animations.push(S(n.animations,C))}}if(u){const w=A(n.geometries),C=A(n.materials),T=A(n.textures),R=A(n.images),I=A(n.shapes),N=A(n.skeletons),L=A(n.animations),F=A(n.nodes);w.length>0&&(f.geometries=w),C.length>0&&(f.materials=C),T.length>0&&(f.textures=T),R.length>0&&(f.images=R),I.length>0&&(f.shapes=I),N.length>0&&(f.skeletons=N),L.length>0&&(f.animations=L),F.length>0&&(f.nodes=F)}return f.object=y,f;function A(w){const C=[];for(const T in w){const R=w[T];delete R.metadata,C.push(R)}return C}}clone(n){return new this.constructor().copy(this,n)}copy(n,u=!0){if(this.name=n.name,this.up.copy(n.up),this.position.copy(n.position),this.rotation.order=n.rotation.order,this.quaternion.copy(n.quaternion),this.scale.copy(n.scale),this.matrix.copy(n.matrix),this.matrixWorld.copy(n.matrixWorld),this.matrixAutoUpdate=n.matrixAutoUpdate,this.matrixWorldAutoUpdate=n.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=n.matrixWorldNeedsUpdate,this.layers.mask=n.layers.mask,this.visible=n.visible,this.castShadow=n.castShadow,this.receiveShadow=n.receiveShadow,this.frustumCulled=n.frustumCulled,this.renderOrder=n.renderOrder,this.animations=n.animations.slice(),this.userData=JSON.parse(JSON.stringify(n.userData)),u===!0)for(let f=0;f<n.children.length;f++){const y=n.children[f];this.add(y.clone())}return this}}Object3D.DEFAULT_UP=new Vector3(0,1,0);Object3D.DEFAULT_MATRIX_AUTO_UPDATE=!0;Object3D.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const _v0$1=new Vector3,_v1$3=new Vector3,_v2$2=new Vector3,_v3$2=new Vector3,_vab=new Vector3,_vac=new Vector3,_vbc=new Vector3,_vap=new Vector3,_vbp=new Vector3,_vcp=new Vector3,_v40=new Vector4,_v41=new Vector4,_v42=new Vector4;class Triangle{constructor(n=new Vector3,u=new Vector3,f=new Vector3){this.a=n,this.b=u,this.c=f}static getNormal(n,u,f,y){y.subVectors(f,u),_v0$1.subVectors(n,u),y.cross(_v0$1);const S=y.lengthSq();return S>0?y.multiplyScalar(1/Math.sqrt(S)):y.set(0,0,0)}static getBarycoord(n,u,f,y,S){_v0$1.subVectors(y,u),_v1$3.subVectors(f,u),_v2$2.subVectors(n,u);const A=_v0$1.dot(_v0$1),w=_v0$1.dot(_v1$3),C=_v0$1.dot(_v2$2),T=_v1$3.dot(_v1$3),R=_v1$3.dot(_v2$2),I=A*T-w*w;if(I===0)return S.set(0,0,0),null;const N=1/I,L=(T*C-w*R)*N,F=(A*R-w*C)*N;return S.set(1-L-F,F,L)}static containsPoint(n,u,f,y){return this.getBarycoord(n,u,f,y,_v3$2)===null?!1:_v3$2.x>=0&&_v3$2.y>=0&&_v3$2.x+_v3$2.y<=1}static getInterpolation(n,u,f,y,S,A,w,C){return this.getBarycoord(n,u,f,y,_v3$2)===null?(C.x=0,C.y=0,"z"in C&&(C.z=0),"w"in C&&(C.w=0),null):(C.setScalar(0),C.addScaledVector(S,_v3$2.x),C.addScaledVector(A,_v3$2.y),C.addScaledVector(w,_v3$2.z),C)}static getInterpolatedAttribute(n,u,f,y,S,A){return _v40.setScalar(0),_v41.setScalar(0),_v42.setScalar(0),_v40.fromBufferAttribute(n,u),_v41.fromBufferAttribute(n,f),_v42.fromBufferAttribute(n,y),A.setScalar(0),A.addScaledVector(_v40,S.x),A.addScaledVector(_v41,S.y),A.addScaledVector(_v42,S.z),A}static isFrontFacing(n,u,f,y){return _v0$1.subVectors(f,u),_v1$3.subVectors(n,u),_v0$1.cross(_v1$3).dot(y)<0}set(n,u,f){return this.a.copy(n),this.b.copy(u),this.c.copy(f),this}setFromPointsAndIndices(n,u,f,y){return this.a.copy(n[u]),this.b.copy(n[f]),this.c.copy(n[y]),this}setFromAttributeAndIndices(n,u,f,y){return this.a.fromBufferAttribute(n,u),this.b.fromBufferAttribute(n,f),this.c.fromBufferAttribute(n,y),this}clone(){return new this.constructor().copy(this)}copy(n){return this.a.copy(n.a),this.b.copy(n.b),this.c.copy(n.c),this}getArea(){return _v0$1.subVectors(this.c,this.b),_v1$3.subVectors(this.a,this.b),_v0$1.cross(_v1$3).length()*.5}getMidpoint(n){return n.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(n){return Triangle.getNormal(this.a,this.b,this.c,n)}getPlane(n){return n.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(n,u){return Triangle.getBarycoord(n,this.a,this.b,this.c,u)}getInterpolation(n,u,f,y,S){return Triangle.getInterpolation(n,this.a,this.b,this.c,u,f,y,S)}containsPoint(n){return Triangle.containsPoint(n,this.a,this.b,this.c)}isFrontFacing(n){return Triangle.isFrontFacing(this.a,this.b,this.c,n)}intersectsBox(n){return n.intersectsTriangle(this)}closestPointToPoint(n,u){const f=this.a,y=this.b,S=this.c;let A,w;_vab.subVectors(y,f),_vac.subVectors(S,f),_vap.subVectors(n,f);const C=_vab.dot(_vap),T=_vac.dot(_vap);if(C<=0&&T<=0)return u.copy(f);_vbp.subVectors(n,y);const R=_vab.dot(_vbp),I=_vac.dot(_vbp);if(R>=0&&I<=R)return u.copy(y);const N=C*I-R*T;if(N<=0&&C>=0&&R<=0)return A=C/(C-R),u.copy(f).addScaledVector(_vab,A);_vcp.subVectors(n,S);const L=_vab.dot(_vcp),F=_vac.dot(_vcp);if(F>=0&&L<=F)return u.copy(S);const H=L*T-C*F;if(H<=0&&T>=0&&F<=0)return w=T/(T-F),u.copy(f).addScaledVector(_vac,w);const z=R*F-L*I;if(z<=0&&I-R>=0&&L-F>=0)return _vbc.subVectors(S,y),w=(I-R)/(I-R+(L-F)),u.copy(y).addScaledVector(_vbc,w);const U=1/(z+H+N);return A=H*U,w=N*U,u.copy(f).addScaledVector(_vab,A).addScaledVector(_vac,w)}equals(n){return n.a.equals(this.a)&&n.b.equals(this.b)&&n.c.equals(this.c)}}const _colorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_hslA={h:0,s:0,l:0},_hslB={h:0,s:0,l:0};function hue2rgb(s,n,u){return u<0&&(u+=1),u>1&&(u-=1),u<1/6?s+(n-s)*6*u:u<1/2?n:u<2/3?s+(n-s)*6*(2/3-u):s}class Color{constructor(n,u,f){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(n,u,f)}set(n,u,f){if(u===void 0&&f===void 0){const y=n;y&&y.isColor?this.copy(y):typeof y=="number"?this.setHex(y):typeof y=="string"&&this.setStyle(y)}else this.setRGB(n,u,f);return this}setScalar(n){return this.r=n,this.g=n,this.b=n,this}setHex(n,u=SRGBColorSpace$1){return n=Math.floor(n),this.r=(n>>16&255)/255,this.g=(n>>8&255)/255,this.b=(n&255)/255,ColorManagement.colorSpaceToWorking(this,u),this}setRGB(n,u,f,y=ColorManagement.workingColorSpace){return this.r=n,this.g=u,this.b=f,ColorManagement.colorSpaceToWorking(this,y),this}setHSL(n,u,f,y=ColorManagement.workingColorSpace){if(n=euclideanModulo(n,1),u=clamp(u,0,1),f=clamp(f,0,1),u===0)this.r=this.g=this.b=f;else{const S=f<=.5?f*(1+u):f+u-f*u,A=2*f-S;this.r=hue2rgb(A,S,n+1/3),this.g=hue2rgb(A,S,n),this.b=hue2rgb(A,S,n-1/3)}return ColorManagement.colorSpaceToWorking(this,y),this}setStyle(n,u=SRGBColorSpace$1){function f(S){S!==void 0&&parseFloat(S)<1&&warn("Color: Alpha component of "+n+" will be ignored.")}let y;if(y=/^(\w+)\(([^\)]*)\)/.exec(n)){let S;const A=y[1],w=y[2];switch(A){case"rgb":case"rgba":if(S=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(w))return f(S[4]),this.setRGB(Math.min(255,parseInt(S[1],10))/255,Math.min(255,parseInt(S[2],10))/255,Math.min(255,parseInt(S[3],10))/255,u);if(S=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(w))return f(S[4]),this.setRGB(Math.min(100,parseInt(S[1],10))/100,Math.min(100,parseInt(S[2],10))/100,Math.min(100,parseInt(S[3],10))/100,u);break;case"hsl":case"hsla":if(S=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(w))return f(S[4]),this.setHSL(parseFloat(S[1])/360,parseFloat(S[2])/100,parseFloat(S[3])/100,u);break;default:warn("Color: Unknown color model "+n)}}else if(y=/^\#([A-Fa-f\d]+)$/.exec(n)){const S=y[1],A=S.length;if(A===3)return this.setRGB(parseInt(S.charAt(0),16)/15,parseInt(S.charAt(1),16)/15,parseInt(S.charAt(2),16)/15,u);if(A===6)return this.setHex(parseInt(S,16),u);warn("Color: Invalid hex color "+n)}else if(n&&n.length>0)return this.setColorName(n,u);return this}setColorName(n,u=SRGBColorSpace$1){const f=_colorKeywords[n.toLowerCase()];return f!==void 0?this.setHex(f,u):warn("Color: Unknown color "+n),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(n){return this.r=n.r,this.g=n.g,this.b=n.b,this}copySRGBToLinear(n){return this.r=SRGBToLinear(n.r),this.g=SRGBToLinear(n.g),this.b=SRGBToLinear(n.b),this}copyLinearToSRGB(n){return this.r=LinearToSRGB(n.r),this.g=LinearToSRGB(n.g),this.b=LinearToSRGB(n.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(n=SRGBColorSpace$1){return ColorManagement.workingToColorSpace(_color.copy(this),n),Math.round(clamp(_color.r*255,0,255))*65536+Math.round(clamp(_color.g*255,0,255))*256+Math.round(clamp(_color.b*255,0,255))}getHexString(n=SRGBColorSpace$1){return("000000"+this.getHex(n).toString(16)).slice(-6)}getHSL(n,u=ColorManagement.workingColorSpace){ColorManagement.workingToColorSpace(_color.copy(this),u);const f=_color.r,y=_color.g,S=_color.b,A=Math.max(f,y,S),w=Math.min(f,y,S);let C,T;const R=(w+A)/2;if(w===A)C=0,T=0;else{const I=A-w;switch(T=R<=.5?I/(A+w):I/(2-A-w),A){case f:C=(y-S)/I+(y<S?6:0);break;case y:C=(S-f)/I+2;break;case S:C=(f-y)/I+4;break}C/=6}return n.h=C,n.s=T,n.l=R,n}getRGB(n,u=ColorManagement.workingColorSpace){return ColorManagement.workingToColorSpace(_color.copy(this),u),n.r=_color.r,n.g=_color.g,n.b=_color.b,n}getStyle(n=SRGBColorSpace$1){ColorManagement.workingToColorSpace(_color.copy(this),n);const u=_color.r,f=_color.g,y=_color.b;return n!==SRGBColorSpace$1?`color(${n} ${u.toFixed(3)} ${f.toFixed(3)} ${y.toFixed(3)})`:`rgb(${Math.round(u*255)},${Math.round(f*255)},${Math.round(y*255)})`}offsetHSL(n,u,f){return this.getHSL(_hslA),this.setHSL(_hslA.h+n,_hslA.s+u,_hslA.l+f)}add(n){return this.r+=n.r,this.g+=n.g,this.b+=n.b,this}addColors(n,u){return this.r=n.r+u.r,this.g=n.g+u.g,this.b=n.b+u.b,this}addScalar(n){return this.r+=n,this.g+=n,this.b+=n,this}sub(n){return this.r=Math.max(0,this.r-n.r),this.g=Math.max(0,this.g-n.g),this.b=Math.max(0,this.b-n.b),this}multiply(n){return this.r*=n.r,this.g*=n.g,this.b*=n.b,this}multiplyScalar(n){return this.r*=n,this.g*=n,this.b*=n,this}lerp(n,u){return this.r+=(n.r-this.r)*u,this.g+=(n.g-this.g)*u,this.b+=(n.b-this.b)*u,this}lerpColors(n,u,f){return this.r=n.r+(u.r-n.r)*f,this.g=n.g+(u.g-n.g)*f,this.b=n.b+(u.b-n.b)*f,this}lerpHSL(n,u){this.getHSL(_hslA),n.getHSL(_hslB);const f=lerp(_hslA.h,_hslB.h,u),y=lerp(_hslA.s,_hslB.s,u),S=lerp(_hslA.l,_hslB.l,u);return this.setHSL(f,y,S),this}setFromVector3(n){return this.r=n.x,this.g=n.y,this.b=n.z,this}applyMatrix3(n){const u=this.r,f=this.g,y=this.b,S=n.elements;return this.r=S[0]*u+S[3]*f+S[6]*y,this.g=S[1]*u+S[4]*f+S[7]*y,this.b=S[2]*u+S[5]*f+S[8]*y,this}equals(n){return n.r===this.r&&n.g===this.g&&n.b===this.b}fromArray(n,u=0){return this.r=n[u],this.g=n[u+1],this.b=n[u+2],this}toArray(n=[],u=0){return n[u]=this.r,n[u+1]=this.g,n[u+2]=this.b,n}fromBufferAttribute(n,u){return this.r=n.getX(u),this.g=n.getY(u),this.b=n.getZ(u),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const _color=new Color;Color.NAMES=_colorKeywords;let _materialId=0;class Material extends EventDispatcher{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:_materialId++}),this.uuid=generateUUID$1(),this.name="",this.type="Material",this.blending=NormalBlending,this.side=FrontSide,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=SrcAlphaFactor,this.blendDst=OneMinusSrcAlphaFactor,this.blendEquation=AddEquation,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Color(0,0,0),this.blendAlpha=0,this.depthFunc=LessEqualDepth,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=AlwaysStencilFunc,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=KeepStencilOp,this.stencilZFail=KeepStencilOp,this.stencilZPass=KeepStencilOp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(n){this._alphaTest>0!=n>0&&this.version++,this._alphaTest=n}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(n){if(n!==void 0)for(const u in n){const f=n[u];if(f===void 0){warn(`Material: parameter '${u}' has value of undefined.`);continue}const y=this[u];if(y===void 0){warn(`Material: '${u}' is not a property of THREE.${this.type}.`);continue}y&&y.isColor?y.set(f):y&&y.isVector3&&f&&f.isVector3?y.copy(f):this[u]=f}}toJSON(n){const u=n===void 0||typeof n=="string";u&&(n={textures:{},images:{}});const f={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};f.uuid=this.uuid,f.type=this.type,this.name!==""&&(f.name=this.name),this.color&&this.color.isColor&&(f.color=this.color.getHex()),this.roughness!==void 0&&(f.roughness=this.roughness),this.metalness!==void 0&&(f.metalness=this.metalness),this.sheen!==void 0&&(f.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(f.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(f.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(f.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(f.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(f.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(f.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(f.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(f.shininess=this.shininess),this.clearcoat!==void 0&&(f.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(f.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(f.clearcoatMap=this.clearcoatMap.toJSON(n).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(f.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(n).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(f.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(n).uuid,f.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(f.sheenColorMap=this.sheenColorMap.toJSON(n).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(f.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(n).uuid),this.dispersion!==void 0&&(f.dispersion=this.dispersion),this.iridescence!==void 0&&(f.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(f.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(f.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(f.iridescenceMap=this.iridescenceMap.toJSON(n).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(f.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(n).uuid),this.anisotropy!==void 0&&(f.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(f.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(f.anisotropyMap=this.anisotropyMap.toJSON(n).uuid),this.map&&this.map.isTexture&&(f.map=this.map.toJSON(n).uuid),this.matcap&&this.matcap.isTexture&&(f.matcap=this.matcap.toJSON(n).uuid),this.alphaMap&&this.alphaMap.isTexture&&(f.alphaMap=this.alphaMap.toJSON(n).uuid),this.lightMap&&this.lightMap.isTexture&&(f.lightMap=this.lightMap.toJSON(n).uuid,f.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(f.aoMap=this.aoMap.toJSON(n).uuid,f.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(f.bumpMap=this.bumpMap.toJSON(n).uuid,f.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(f.normalMap=this.normalMap.toJSON(n).uuid,f.normalMapType=this.normalMapType,f.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(f.displacementMap=this.displacementMap.toJSON(n).uuid,f.displacementScale=this.displacementScale,f.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(f.roughnessMap=this.roughnessMap.toJSON(n).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(f.metalnessMap=this.metalnessMap.toJSON(n).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(f.emissiveMap=this.emissiveMap.toJSON(n).uuid),this.specularMap&&this.specularMap.isTexture&&(f.specularMap=this.specularMap.toJSON(n).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(f.specularIntensityMap=this.specularIntensityMap.toJSON(n).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(f.specularColorMap=this.specularColorMap.toJSON(n).uuid),this.envMap&&this.envMap.isTexture&&(f.envMap=this.envMap.toJSON(n).uuid,this.combine!==void 0&&(f.combine=this.combine)),this.envMapRotation!==void 0&&(f.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(f.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(f.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(f.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(f.gradientMap=this.gradientMap.toJSON(n).uuid),this.transmission!==void 0&&(f.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(f.transmissionMap=this.transmissionMap.toJSON(n).uuid),this.thickness!==void 0&&(f.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(f.thicknessMap=this.thicknessMap.toJSON(n).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(f.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(f.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(f.size=this.size),this.shadowSide!==null&&(f.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(f.sizeAttenuation=this.sizeAttenuation),this.blending!==NormalBlending&&(f.blending=this.blending),this.side!==FrontSide&&(f.side=this.side),this.vertexColors===!0&&(f.vertexColors=!0),this.opacity<1&&(f.opacity=this.opacity),this.transparent===!0&&(f.transparent=!0),this.blendSrc!==SrcAlphaFactor&&(f.blendSrc=this.blendSrc),this.blendDst!==OneMinusSrcAlphaFactor&&(f.blendDst=this.blendDst),this.blendEquation!==AddEquation&&(f.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(f.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(f.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(f.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(f.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(f.blendAlpha=this.blendAlpha),this.depthFunc!==LessEqualDepth&&(f.depthFunc=this.depthFunc),this.depthTest===!1&&(f.depthTest=this.depthTest),this.depthWrite===!1&&(f.depthWrite=this.depthWrite),this.colorWrite===!1&&(f.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(f.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==AlwaysStencilFunc&&(f.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(f.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(f.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==KeepStencilOp&&(f.stencilFail=this.stencilFail),this.stencilZFail!==KeepStencilOp&&(f.stencilZFail=this.stencilZFail),this.stencilZPass!==KeepStencilOp&&(f.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(f.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(f.rotation=this.rotation),this.polygonOffset===!0&&(f.polygonOffset=!0),this.polygonOffsetFactor!==0&&(f.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(f.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(f.linewidth=this.linewidth),this.dashSize!==void 0&&(f.dashSize=this.dashSize),this.gapSize!==void 0&&(f.gapSize=this.gapSize),this.scale!==void 0&&(f.scale=this.scale),this.dithering===!0&&(f.dithering=!0),this.alphaTest>0&&(f.alphaTest=this.alphaTest),this.alphaHash===!0&&(f.alphaHash=!0),this.alphaToCoverage===!0&&(f.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(f.premultipliedAlpha=!0),this.forceSinglePass===!0&&(f.forceSinglePass=!0),this.allowOverride===!1&&(f.allowOverride=!1),this.wireframe===!0&&(f.wireframe=!0),this.wireframeLinewidth>1&&(f.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(f.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(f.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(f.flatShading=!0),this.visible===!1&&(f.visible=!1),this.toneMapped===!1&&(f.toneMapped=!1),this.fog===!1&&(f.fog=!1),Object.keys(this.userData).length>0&&(f.userData=this.userData);function y(S){const A=[];for(const w in S){const C=S[w];delete C.metadata,A.push(C)}return A}if(u){const S=y(n.textures),A=y(n.images);S.length>0&&(f.textures=S),A.length>0&&(f.images=A)}return f}clone(){return new this.constructor().copy(this)}copy(n){this.name=n.name,this.blending=n.blending,this.side=n.side,this.vertexColors=n.vertexColors,this.opacity=n.opacity,this.transparent=n.transparent,this.blendSrc=n.blendSrc,this.blendDst=n.blendDst,this.blendEquation=n.blendEquation,this.blendSrcAlpha=n.blendSrcAlpha,this.blendDstAlpha=n.blendDstAlpha,this.blendEquationAlpha=n.blendEquationAlpha,this.blendColor.copy(n.blendColor),this.blendAlpha=n.blendAlpha,this.depthFunc=n.depthFunc,this.depthTest=n.depthTest,this.depthWrite=n.depthWrite,this.stencilWriteMask=n.stencilWriteMask,this.stencilFunc=n.stencilFunc,this.stencilRef=n.stencilRef,this.stencilFuncMask=n.stencilFuncMask,this.stencilFail=n.stencilFail,this.stencilZFail=n.stencilZFail,this.stencilZPass=n.stencilZPass,this.stencilWrite=n.stencilWrite;const u=n.clippingPlanes;let f=null;if(u!==null){const y=u.length;f=new Array(y);for(let S=0;S!==y;++S)f[S]=u[S].clone()}return this.clippingPlanes=f,this.clipIntersection=n.clipIntersection,this.clipShadows=n.clipShadows,this.shadowSide=n.shadowSide,this.colorWrite=n.colorWrite,this.precision=n.precision,this.polygonOffset=n.polygonOffset,this.polygonOffsetFactor=n.polygonOffsetFactor,this.polygonOffsetUnits=n.polygonOffsetUnits,this.dithering=n.dithering,this.alphaTest=n.alphaTest,this.alphaHash=n.alphaHash,this.alphaToCoverage=n.alphaToCoverage,this.premultipliedAlpha=n.premultipliedAlpha,this.forceSinglePass=n.forceSinglePass,this.allowOverride=n.allowOverride,this.visible=n.visible,this.toneMapped=n.toneMapped,this.userData=JSON.parse(JSON.stringify(n.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(n){n===!0&&this.version++}}class MeshBasicMaterial extends Material{constructor(n){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Euler,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(n)}copy(n){return super.copy(n),this.color.copy(n.color),this.map=n.map,this.lightMap=n.lightMap,this.lightMapIntensity=n.lightMapIntensity,this.aoMap=n.aoMap,this.aoMapIntensity=n.aoMapIntensity,this.specularMap=n.specularMap,this.alphaMap=n.alphaMap,this.envMap=n.envMap,this.envMapRotation.copy(n.envMapRotation),this.combine=n.combine,this.reflectivity=n.reflectivity,this.refractionRatio=n.refractionRatio,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.wireframeLinecap=n.wireframeLinecap,this.wireframeLinejoin=n.wireframeLinejoin,this.fog=n.fog,this}}const _tables=_generateTables();function _generateTables(){const s=new ArrayBuffer(4),n=new Float32Array(s),u=new Uint32Array(s),f=new Uint32Array(512),y=new Uint32Array(512);for(let C=0;C<256;++C){const T=C-127;T<-27?(f[C]=0,f[C|256]=32768,y[C]=24,y[C|256]=24):T<-14?(f[C]=1024>>-T-14,f[C|256]=1024>>-T-14|32768,y[C]=-T-1,y[C|256]=-T-1):T<=15?(f[C]=T+15<<10,f[C|256]=T+15<<10|32768,y[C]=13,y[C|256]=13):T<128?(f[C]=31744,f[C|256]=64512,y[C]=24,y[C|256]=24):(f[C]=31744,f[C|256]=64512,y[C]=13,y[C|256]=13)}const S=new Uint32Array(2048),A=new Uint32Array(64),w=new Uint32Array(64);for(let C=1;C<1024;++C){let T=C<<13,R=0;for(;(T&8388608)===0;)T<<=1,R-=8388608;T&=-8388609,R+=947912704,S[C]=T|R}for(let C=1024;C<2048;++C)S[C]=939524096+(C-1024<<13);for(let C=1;C<31;++C)A[C]=C<<23;A[31]=1199570944,A[32]=2147483648;for(let C=33;C<63;++C)A[C]=2147483648+(C-32<<23);A[63]=3347054592;for(let C=1;C<64;++C)C!==32&&(w[C]=1024);return{floatView:n,uint32View:u,baseTable:f,shiftTable:y,mantissaTable:S,exponentTable:A,offsetTable:w}}function toHalfFloat(s){Math.abs(s)>65504&&warn("DataUtils.toHalfFloat(): Value out of range."),s=clamp(s,-65504,65504),_tables.floatView[0]=s;const n=_tables.uint32View[0],u=n>>23&511;return _tables.baseTable[u]+((n&8388607)>>_tables.shiftTable[u])}function fromHalfFloat(s){const n=s>>10;return _tables.uint32View[0]=_tables.mantissaTable[_tables.offsetTable[n]+(s&1023)]+_tables.exponentTable[n],_tables.floatView[0]}class DataUtils{static toHalfFloat(n){return toHalfFloat(n)}static fromHalfFloat(n){return fromHalfFloat(n)}}const _vector$9=new Vector3,_vector2$1=new Vector2;let _id$2=0;class BufferAttribute{constructor(n,u,f=!1){if(Array.isArray(n))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:_id$2++}),this.name="",this.array=n,this.itemSize=u,this.count=n!==void 0?n.length/u:0,this.normalized=f,this.usage=StaticDrawUsage,this.updateRanges=[],this.gpuType=FloatType,this.version=0}onUploadCallback(){}set needsUpdate(n){n===!0&&this.version++}setUsage(n){return this.usage=n,this}addUpdateRange(n,u){this.updateRanges.push({start:n,count:u})}clearUpdateRanges(){this.updateRanges.length=0}copy(n){return this.name=n.name,this.array=new n.array.constructor(n.array),this.itemSize=n.itemSize,this.count=n.count,this.normalized=n.normalized,this.usage=n.usage,this.gpuType=n.gpuType,this}copyAt(n,u,f){n*=this.itemSize,f*=u.itemSize;for(let y=0,S=this.itemSize;y<S;y++)this.array[n+y]=u.array[f+y];return this}copyArray(n){return this.array.set(n),this}applyMatrix3(n){if(this.itemSize===2)for(let u=0,f=this.count;u<f;u++)_vector2$1.fromBufferAttribute(this,u),_vector2$1.applyMatrix3(n),this.setXY(u,_vector2$1.x,_vector2$1.y);else if(this.itemSize===3)for(let u=0,f=this.count;u<f;u++)_vector$9.fromBufferAttribute(this,u),_vector$9.applyMatrix3(n),this.setXYZ(u,_vector$9.x,_vector$9.y,_vector$9.z);return this}applyMatrix4(n){for(let u=0,f=this.count;u<f;u++)_vector$9.fromBufferAttribute(this,u),_vector$9.applyMatrix4(n),this.setXYZ(u,_vector$9.x,_vector$9.y,_vector$9.z);return this}applyNormalMatrix(n){for(let u=0,f=this.count;u<f;u++)_vector$9.fromBufferAttribute(this,u),_vector$9.applyNormalMatrix(n),this.setXYZ(u,_vector$9.x,_vector$9.y,_vector$9.z);return this}transformDirection(n){for(let u=0,f=this.count;u<f;u++)_vector$9.fromBufferAttribute(this,u),_vector$9.transformDirection(n),this.setXYZ(u,_vector$9.x,_vector$9.y,_vector$9.z);return this}set(n,u=0){return this.array.set(n,u),this}getComponent(n,u){let f=this.array[n*this.itemSize+u];return this.normalized&&(f=denormalize(f,this.array)),f}setComponent(n,u,f){return this.normalized&&(f=normalize(f,this.array)),this.array[n*this.itemSize+u]=f,this}getX(n){let u=this.array[n*this.itemSize];return this.normalized&&(u=denormalize(u,this.array)),u}setX(n,u){return this.normalized&&(u=normalize(u,this.array)),this.array[n*this.itemSize]=u,this}getY(n){let u=this.array[n*this.itemSize+1];return this.normalized&&(u=denormalize(u,this.array)),u}setY(n,u){return this.normalized&&(u=normalize(u,this.array)),this.array[n*this.itemSize+1]=u,this}getZ(n){let u=this.array[n*this.itemSize+2];return this.normalized&&(u=denormalize(u,this.array)),u}setZ(n,u){return this.normalized&&(u=normalize(u,this.array)),this.array[n*this.itemSize+2]=u,this}getW(n){let u=this.array[n*this.itemSize+3];return this.normalized&&(u=denormalize(u,this.array)),u}setW(n,u){return this.normalized&&(u=normalize(u,this.array)),this.array[n*this.itemSize+3]=u,this}setXY(n,u,f){return n*=this.itemSize,this.normalized&&(u=normalize(u,this.array),f=normalize(f,this.array)),this.array[n+0]=u,this.array[n+1]=f,this}setXYZ(n,u,f,y){return n*=this.itemSize,this.normalized&&(u=normalize(u,this.array),f=normalize(f,this.array),y=normalize(y,this.array)),this.array[n+0]=u,this.array[n+1]=f,this.array[n+2]=y,this}setXYZW(n,u,f,y,S){return n*=this.itemSize,this.normalized&&(u=normalize(u,this.array),f=normalize(f,this.array),y=normalize(y,this.array),S=normalize(S,this.array)),this.array[n+0]=u,this.array[n+1]=f,this.array[n+2]=y,this.array[n+3]=S,this}onUpload(n){return this.onUploadCallback=n,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const n={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(n.name=this.name),this.usage!==StaticDrawUsage&&(n.usage=this.usage),n}}class Int8BufferAttribute extends BufferAttribute{constructor(n,u,f){super(new Int8Array(n),u,f)}}class Uint8BufferAttribute extends BufferAttribute{constructor(n,u,f){super(new Uint8Array(n),u,f)}}class Uint8ClampedBufferAttribute extends BufferAttribute{constructor(n,u,f){super(new Uint8ClampedArray(n),u,f)}}class Int16BufferAttribute extends BufferAttribute{constructor(n,u,f){super(new Int16Array(n),u,f)}}class Uint16BufferAttribute extends BufferAttribute{constructor(n,u,f){super(new Uint16Array(n),u,f)}}class Int32BufferAttribute extends BufferAttribute{constructor(n,u,f){super(new Int32Array(n),u,f)}}class Uint32BufferAttribute extends BufferAttribute{constructor(n,u,f){super(new Uint32Array(n),u,f)}}class Float16BufferAttribute extends BufferAttribute{constructor(n,u,f){super(new Uint16Array(n),u,f),this.isFloat16BufferAttribute=!0}getX(n){let u=fromHalfFloat(this.array[n*this.itemSize]);return this.normalized&&(u=denormalize(u,this.array)),u}setX(n,u){return this.normalized&&(u=normalize(u,this.array)),this.array[n*this.itemSize]=toHalfFloat(u),this}getY(n){let u=fromHalfFloat(this.array[n*this.itemSize+1]);return this.normalized&&(u=denormalize(u,this.array)),u}setY(n,u){return this.normalized&&(u=normalize(u,this.array)),this.array[n*this.itemSize+1]=toHalfFloat(u),this}getZ(n){let u=fromHalfFloat(this.array[n*this.itemSize+2]);return this.normalized&&(u=denormalize(u,this.array)),u}setZ(n,u){return this.normalized&&(u=normalize(u,this.array)),this.array[n*this.itemSize+2]=toHalfFloat(u),this}getW(n){let u=fromHalfFloat(this.array[n*this.itemSize+3]);return this.normalized&&(u=denormalize(u,this.array)),u}setW(n,u){return this.normalized&&(u=normalize(u,this.array)),this.array[n*this.itemSize+3]=toHalfFloat(u),this}setXY(n,u,f){return n*=this.itemSize,this.normalized&&(u=normalize(u,this.array),f=normalize(f,this.array)),this.array[n+0]=toHalfFloat(u),this.array[n+1]=toHalfFloat(f),this}setXYZ(n,u,f,y){return n*=this.itemSize,this.normalized&&(u=normalize(u,this.array),f=normalize(f,this.array),y=normalize(y,this.array)),this.array[n+0]=toHalfFloat(u),this.array[n+1]=toHalfFloat(f),this.array[n+2]=toHalfFloat(y),this}setXYZW(n,u,f,y,S){return n*=this.itemSize,this.normalized&&(u=normalize(u,this.array),f=normalize(f,this.array),y=normalize(y,this.array),S=normalize(S,this.array)),this.array[n+0]=toHalfFloat(u),this.array[n+1]=toHalfFloat(f),this.array[n+2]=toHalfFloat(y),this.array[n+3]=toHalfFloat(S),this}}class Float32BufferAttribute extends BufferAttribute{constructor(n,u,f){super(new Float32Array(n),u,f)}}let _id$1=0;const _m1$3=new Matrix4,_obj=new Object3D,_offset=new Vector3,_box$2=new Box3,_boxMorphTargets=new Box3,_vector$8=new Vector3;class BufferGeometry extends EventDispatcher{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:_id$1++}),this.uuid=generateUUID$1(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.indirectOffset=0,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(n){return Array.isArray(n)?this.index=new(arrayNeedsUint32(n)?Uint32BufferAttribute:Uint16BufferAttribute)(n,1):this.index=n,this}setIndirect(n,u=0){return this.indirect=n,this.indirectOffset=u,this}getIndirect(){return this.indirect}getAttribute(n){return this.attributes[n]}setAttribute(n,u){return this.attributes[n]=u,this}deleteAttribute(n){return delete this.attributes[n],this}hasAttribute(n){return this.attributes[n]!==void 0}addGroup(n,u,f=0){this.groups.push({start:n,count:u,materialIndex:f})}clearGroups(){this.groups=[]}setDrawRange(n,u){this.drawRange.start=n,this.drawRange.count=u}applyMatrix4(n){const u=this.attributes.position;u!==void 0&&(u.applyMatrix4(n),u.needsUpdate=!0);const f=this.attributes.normal;if(f!==void 0){const S=new Matrix3().getNormalMatrix(n);f.applyNormalMatrix(S),f.needsUpdate=!0}const y=this.attributes.tangent;return y!==void 0&&(y.transformDirection(n),y.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(n){return _m1$3.makeRotationFromQuaternion(n),this.applyMatrix4(_m1$3),this}rotateX(n){return _m1$3.makeRotationX(n),this.applyMatrix4(_m1$3),this}rotateY(n){return _m1$3.makeRotationY(n),this.applyMatrix4(_m1$3),this}rotateZ(n){return _m1$3.makeRotationZ(n),this.applyMatrix4(_m1$3),this}translate(n,u,f){return _m1$3.makeTranslation(n,u,f),this.applyMatrix4(_m1$3),this}scale(n,u,f){return _m1$3.makeScale(n,u,f),this.applyMatrix4(_m1$3),this}lookAt(n){return _obj.lookAt(n),_obj.updateMatrix(),this.applyMatrix4(_obj.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(_offset).negate(),this.translate(_offset.x,_offset.y,_offset.z),this}setFromPoints(n){const u=this.getAttribute("position");if(u===void 0){const f=[];for(let y=0,S=n.length;y<S;y++){const A=n[y];f.push(A.x,A.y,A.z||0)}this.setAttribute("position",new Float32BufferAttribute(f,3))}else{const f=Math.min(n.length,u.count);for(let y=0;y<f;y++){const S=n[y];u.setXYZ(y,S.x,S.y,S.z||0)}n.length>u.count&&warn("BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),u.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Box3);const n=this.attributes.position,u=this.morphAttributes.position;if(n&&n.isGLBufferAttribute){error("BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Vector3(-1/0,-1/0,-1/0),new Vector3(1/0,1/0,1/0));return}if(n!==void 0){if(this.boundingBox.setFromBufferAttribute(n),u)for(let f=0,y=u.length;f<y;f++){const S=u[f];_box$2.setFromBufferAttribute(S),this.morphTargetsRelative?(_vector$8.addVectors(this.boundingBox.min,_box$2.min),this.boundingBox.expandByPoint(_vector$8),_vector$8.addVectors(this.boundingBox.max,_box$2.max),this.boundingBox.expandByPoint(_vector$8)):(this.boundingBox.expandByPoint(_box$2.min),this.boundingBox.expandByPoint(_box$2.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&error('BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Sphere);const n=this.attributes.position,u=this.morphAttributes.position;if(n&&n.isGLBufferAttribute){error("BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Vector3,1/0);return}if(n){const f=this.boundingSphere.center;if(_box$2.setFromBufferAttribute(n),u)for(let S=0,A=u.length;S<A;S++){const w=u[S];_boxMorphTargets.setFromBufferAttribute(w),this.morphTargetsRelative?(_vector$8.addVectors(_box$2.min,_boxMorphTargets.min),_box$2.expandByPoint(_vector$8),_vector$8.addVectors(_box$2.max,_boxMorphTargets.max),_box$2.expandByPoint(_vector$8)):(_box$2.expandByPoint(_boxMorphTargets.min),_box$2.expandByPoint(_boxMorphTargets.max))}_box$2.getCenter(f);let y=0;for(let S=0,A=n.count;S<A;S++)_vector$8.fromBufferAttribute(n,S),y=Math.max(y,f.distanceToSquared(_vector$8));if(u)for(let S=0,A=u.length;S<A;S++){const w=u[S],C=this.morphTargetsRelative;for(let T=0,R=w.count;T<R;T++)_vector$8.fromBufferAttribute(w,T),C&&(_offset.fromBufferAttribute(n,T),_vector$8.add(_offset)),y=Math.max(y,f.distanceToSquared(_vector$8))}this.boundingSphere.radius=Math.sqrt(y),isNaN(this.boundingSphere.radius)&&error('BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const n=this.index,u=this.attributes;if(n===null||u.position===void 0||u.normal===void 0||u.uv===void 0){error("BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const f=u.position,y=u.normal,S=u.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new BufferAttribute(new Float32Array(4*f.count),4));const A=this.getAttribute("tangent"),w=[],C=[];for(let de=0;de<f.count;de++)w[de]=new Vector3,C[de]=new Vector3;const T=new Vector3,R=new Vector3,I=new Vector3,N=new Vector2,L=new Vector2,F=new Vector2,H=new Vector3,z=new Vector3;function U(de,se,ne){T.fromBufferAttribute(f,de),R.fromBufferAttribute(f,se),I.fromBufferAttribute(f,ne),N.fromBufferAttribute(S,de),L.fromBufferAttribute(S,se),F.fromBufferAttribute(S,ne),R.sub(T),I.sub(T),L.sub(N),F.sub(N);const ge=1/(L.x*F.y-F.x*L.y);isFinite(ge)&&(H.copy(R).multiplyScalar(F.y).addScaledVector(I,-L.y).multiplyScalar(ge),z.copy(I).multiplyScalar(L.x).addScaledVector(R,-F.x).multiplyScalar(ge),w[de].add(H),w[se].add(H),w[ne].add(H),C[de].add(z),C[se].add(z),C[ne].add(z))}let G=this.groups;G.length===0&&(G=[{start:0,count:n.count}]);for(let de=0,se=G.length;de<se;++de){const ne=G[de],ge=ne.start,Ee=ne.count;for(let we=ge,Ie=ge+Ee;we<Ie;we+=3)U(n.getX(we+0),n.getX(we+1),n.getX(we+2))}const Y=new Vector3,K=new Vector3,Z=new Vector3,J=new Vector3;function te(de){Z.fromBufferAttribute(y,de),J.copy(Z);const se=w[de];Y.copy(se),Y.sub(Z.multiplyScalar(Z.dot(se))).normalize(),K.crossVectors(J,se);const ge=K.dot(C[de])<0?-1:1;A.setXYZW(de,Y.x,Y.y,Y.z,ge)}for(let de=0,se=G.length;de<se;++de){const ne=G[de],ge=ne.start,Ee=ne.count;for(let we=ge,Ie=ge+Ee;we<Ie;we+=3)te(n.getX(we+0)),te(n.getX(we+1)),te(n.getX(we+2))}}computeVertexNormals(){const n=this.index,u=this.getAttribute("position");if(u!==void 0){let f=this.getAttribute("normal");if(f===void 0)f=new BufferAttribute(new Float32Array(u.count*3),3),this.setAttribute("normal",f);else for(let N=0,L=f.count;N<L;N++)f.setXYZ(N,0,0,0);const y=new Vector3,S=new Vector3,A=new Vector3,w=new Vector3,C=new Vector3,T=new Vector3,R=new Vector3,I=new Vector3;if(n)for(let N=0,L=n.count;N<L;N+=3){const F=n.getX(N+0),H=n.getX(N+1),z=n.getX(N+2);y.fromBufferAttribute(u,F),S.fromBufferAttribute(u,H),A.fromBufferAttribute(u,z),R.subVectors(A,S),I.subVectors(y,S),R.cross(I),w.fromBufferAttribute(f,F),C.fromBufferAttribute(f,H),T.fromBufferAttribute(f,z),w.add(R),C.add(R),T.add(R),f.setXYZ(F,w.x,w.y,w.z),f.setXYZ(H,C.x,C.y,C.z),f.setXYZ(z,T.x,T.y,T.z)}else for(let N=0,L=u.count;N<L;N+=3)y.fromBufferAttribute(u,N+0),S.fromBufferAttribute(u,N+1),A.fromBufferAttribute(u,N+2),R.subVectors(A,S),I.subVectors(y,S),R.cross(I),f.setXYZ(N+0,R.x,R.y,R.z),f.setXYZ(N+1,R.x,R.y,R.z),f.setXYZ(N+2,R.x,R.y,R.z);this.normalizeNormals(),f.needsUpdate=!0}}normalizeNormals(){const n=this.attributes.normal;for(let u=0,f=n.count;u<f;u++)_vector$8.fromBufferAttribute(n,u),_vector$8.normalize(),n.setXYZ(u,_vector$8.x,_vector$8.y,_vector$8.z)}toNonIndexed(){function n(w,C){const T=w.array,R=w.itemSize,I=w.normalized,N=new T.constructor(C.length*R);let L=0,F=0;for(let H=0,z=C.length;H<z;H++){w.isInterleavedBufferAttribute?L=C[H]*w.data.stride+w.offset:L=C[H]*R;for(let U=0;U<R;U++)N[F++]=T[L++]}return new BufferAttribute(N,R,I)}if(this.index===null)return warn("BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const u=new BufferGeometry,f=this.index.array,y=this.attributes;for(const w in y){const C=y[w],T=n(C,f);u.setAttribute(w,T)}const S=this.morphAttributes;for(const w in S){const C=[],T=S[w];for(let R=0,I=T.length;R<I;R++){const N=T[R],L=n(N,f);C.push(L)}u.morphAttributes[w]=C}u.morphTargetsRelative=this.morphTargetsRelative;const A=this.groups;for(let w=0,C=A.length;w<C;w++){const T=A[w];u.addGroup(T.start,T.count,T.materialIndex)}return u}toJSON(){const n={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),Object.keys(this.userData).length>0&&(n.userData=this.userData),this.parameters!==void 0){const C=this.parameters;for(const T in C)C[T]!==void 0&&(n[T]=C[T]);return n}n.data={attributes:{}};const u=this.index;u!==null&&(n.data.index={type:u.array.constructor.name,array:Array.prototype.slice.call(u.array)});const f=this.attributes;for(const C in f){const T=f[C];n.data.attributes[C]=T.toJSON(n.data)}const y={};let S=!1;for(const C in this.morphAttributes){const T=this.morphAttributes[C],R=[];for(let I=0,N=T.length;I<N;I++){const L=T[I];R.push(L.toJSON(n.data))}R.length>0&&(y[C]=R,S=!0)}S&&(n.data.morphAttributes=y,n.data.morphTargetsRelative=this.morphTargetsRelative);const A=this.groups;A.length>0&&(n.data.groups=JSON.parse(JSON.stringify(A)));const w=this.boundingSphere;return w!==null&&(n.data.boundingSphere=w.toJSON()),n}clone(){return new this.constructor().copy(this)}copy(n){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const u={};this.name=n.name;const f=n.index;f!==null&&this.setIndex(f.clone());const y=n.attributes;for(const T in y){const R=y[T];this.setAttribute(T,R.clone(u))}const S=n.morphAttributes;for(const T in S){const R=[],I=S[T];for(let N=0,L=I.length;N<L;N++)R.push(I[N].clone(u));this.morphAttributes[T]=R}this.morphTargetsRelative=n.morphTargetsRelative;const A=n.groups;for(let T=0,R=A.length;T<R;T++){const I=A[T];this.addGroup(I.start,I.count,I.materialIndex)}const w=n.boundingBox;w!==null&&(this.boundingBox=w.clone());const C=n.boundingSphere;return C!==null&&(this.boundingSphere=C.clone()),this.drawRange.start=n.drawRange.start,this.drawRange.count=n.drawRange.count,this.userData=n.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const _inverseMatrix$3=new Matrix4,_ray$3=new Ray,_sphere$6=new Sphere,_sphereHitAt=new Vector3,_vA$1=new Vector3,_vB$1=new Vector3,_vC$1=new Vector3,_tempA=new Vector3,_morphA=new Vector3,_intersectionPoint=new Vector3,_intersectionPointWorld=new Vector3;class Mesh extends Object3D{constructor(n=new BufferGeometry,u=new MeshBasicMaterial){super(),this.isMesh=!0,this.type="Mesh",this.geometry=n,this.material=u,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(n,u){return super.copy(n,u),n.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=n.morphTargetInfluences.slice()),n.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},n.morphTargetDictionary)),this.material=Array.isArray(n.material)?n.material.slice():n.material,this.geometry=n.geometry,this}updateMorphTargets(){const u=this.geometry.morphAttributes,f=Object.keys(u);if(f.length>0){const y=u[f[0]];if(y!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let S=0,A=y.length;S<A;S++){const w=y[S].name||String(S);this.morphTargetInfluences.push(0),this.morphTargetDictionary[w]=S}}}}getVertexPosition(n,u){const f=this.geometry,y=f.attributes.position,S=f.morphAttributes.position,A=f.morphTargetsRelative;u.fromBufferAttribute(y,n);const w=this.morphTargetInfluences;if(S&&w){_morphA.set(0,0,0);for(let C=0,T=S.length;C<T;C++){const R=w[C],I=S[C];R!==0&&(_tempA.fromBufferAttribute(I,n),A?_morphA.addScaledVector(_tempA,R):_morphA.addScaledVector(_tempA.sub(u),R))}u.add(_morphA)}return u}raycast(n,u){const f=this.geometry,y=this.material,S=this.matrixWorld;y!==void 0&&(f.boundingSphere===null&&f.computeBoundingSphere(),_sphere$6.copy(f.boundingSphere),_sphere$6.applyMatrix4(S),_ray$3.copy(n.ray).recast(n.near),!(_sphere$6.containsPoint(_ray$3.origin)===!1&&(_ray$3.intersectSphere(_sphere$6,_sphereHitAt)===null||_ray$3.origin.distanceToSquared(_sphereHitAt)>(n.far-n.near)**2))&&(_inverseMatrix$3.copy(S).invert(),_ray$3.copy(n.ray).applyMatrix4(_inverseMatrix$3),!(f.boundingBox!==null&&_ray$3.intersectsBox(f.boundingBox)===!1)&&this._computeIntersections(n,u,_ray$3)))}_computeIntersections(n,u,f){let y;const S=this.geometry,A=this.material,w=S.index,C=S.attributes.position,T=S.attributes.uv,R=S.attributes.uv1,I=S.attributes.normal,N=S.groups,L=S.drawRange;if(w!==null)if(Array.isArray(A))for(let F=0,H=N.length;F<H;F++){const z=N[F],U=A[z.materialIndex],G=Math.max(z.start,L.start),Y=Math.min(w.count,Math.min(z.start+z.count,L.start+L.count));for(let K=G,Z=Y;K<Z;K+=3){const J=w.getX(K),te=w.getX(K+1),de=w.getX(K+2);y=checkGeometryIntersection(this,U,n,f,T,R,I,J,te,de),y&&(y.faceIndex=Math.floor(K/3),y.face.materialIndex=z.materialIndex,u.push(y))}}else{const F=Math.max(0,L.start),H=Math.min(w.count,L.start+L.count);for(let z=F,U=H;z<U;z+=3){const G=w.getX(z),Y=w.getX(z+1),K=w.getX(z+2);y=checkGeometryIntersection(this,A,n,f,T,R,I,G,Y,K),y&&(y.faceIndex=Math.floor(z/3),u.push(y))}}else if(C!==void 0)if(Array.isArray(A))for(let F=0,H=N.length;F<H;F++){const z=N[F],U=A[z.materialIndex],G=Math.max(z.start,L.start),Y=Math.min(C.count,Math.min(z.start+z.count,L.start+L.count));for(let K=G,Z=Y;K<Z;K+=3){const J=K,te=K+1,de=K+2;y=checkGeometryIntersection(this,U,n,f,T,R,I,J,te,de),y&&(y.faceIndex=Math.floor(K/3),y.face.materialIndex=z.materialIndex,u.push(y))}}else{const F=Math.max(0,L.start),H=Math.min(C.count,L.start+L.count);for(let z=F,U=H;z<U;z+=3){const G=z,Y=z+1,K=z+2;y=checkGeometryIntersection(this,A,n,f,T,R,I,G,Y,K),y&&(y.faceIndex=Math.floor(z/3),u.push(y))}}}}function checkIntersection$1(s,n,u,f,y,S,A,w){let C;if(n.side===BackSide?C=f.intersectTriangle(A,S,y,!0,w):C=f.intersectTriangle(y,S,A,n.side===FrontSide,w),C===null)return null;_intersectionPointWorld.copy(w),_intersectionPointWorld.applyMatrix4(s.matrixWorld);const T=u.ray.origin.distanceTo(_intersectionPointWorld);return T<u.near||T>u.far?null:{distance:T,point:_intersectionPointWorld.clone(),object:s}}function checkGeometryIntersection(s,n,u,f,y,S,A,w,C,T){s.getVertexPosition(w,_vA$1),s.getVertexPosition(C,_vB$1),s.getVertexPosition(T,_vC$1);const R=checkIntersection$1(s,n,u,f,_vA$1,_vB$1,_vC$1,_intersectionPoint);if(R){const I=new Vector3;Triangle.getBarycoord(_intersectionPoint,_vA$1,_vB$1,_vC$1,I),y&&(R.uv=Triangle.getInterpolatedAttribute(y,w,C,T,I,new Vector2)),S&&(R.uv1=Triangle.getInterpolatedAttribute(S,w,C,T,I,new Vector2)),A&&(R.normal=Triangle.getInterpolatedAttribute(A,w,C,T,I,new Vector3),R.normal.dot(f.direction)>0&&R.normal.multiplyScalar(-1));const N={a:w,b:C,c:T,normal:new Vector3,materialIndex:0};Triangle.getNormal(_vA$1,_vB$1,_vC$1,N.normal),R.face=N,R.barycoord=I}return R}class BoxGeometry extends BufferGeometry{constructor(n=1,u=1,f=1,y=1,S=1,A=1){super(),this.type="BoxGeometry",this.parameters={width:n,height:u,depth:f,widthSegments:y,heightSegments:S,depthSegments:A};const w=this;y=Math.floor(y),S=Math.floor(S),A=Math.floor(A);const C=[],T=[],R=[],I=[];let N=0,L=0;F("z","y","x",-1,-1,f,u,n,A,S,0),F("z","y","x",1,-1,f,u,-n,A,S,1),F("x","z","y",1,1,n,f,u,y,A,2),F("x","z","y",1,-1,n,f,-u,y,A,3),F("x","y","z",1,-1,n,u,f,y,S,4),F("x","y","z",-1,-1,n,u,-f,y,S,5),this.setIndex(C),this.setAttribute("position",new Float32BufferAttribute(T,3)),this.setAttribute("normal",new Float32BufferAttribute(R,3)),this.setAttribute("uv",new Float32BufferAttribute(I,2));function F(H,z,U,G,Y,K,Z,J,te,de,se){const ne=K/te,ge=Z/de,Ee=K/2,we=Z/2,Ie=J/2,Be=te+1,Me=de+1;let Re=0,Te=0;const Se=new Vector3;for(let oe=0;oe<Me;oe++){const ae=oe*ge-we;for(let be=0;be<Be;be++){const he=be*ne-Ee;Se[H]=he*G,Se[z]=ae*Y,Se[U]=Ie,T.push(Se.x,Se.y,Se.z),Se[H]=0,Se[z]=0,Se[U]=J>0?1:-1,R.push(Se.x,Se.y,Se.z),I.push(be/te),I.push(1-oe/de),Re+=1}}for(let oe=0;oe<de;oe++)for(let ae=0;ae<te;ae++){const be=N+ae+Be*oe,he=N+ae+Be*(oe+1),ue=N+(ae+1)+Be*(oe+1),ye=N+(ae+1)+Be*oe;C.push(be,he,ye),C.push(he,ue,ye),Te+=6}w.addGroup(L,Te,se),L+=Te,N+=Re}}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}static fromJSON(n){return new BoxGeometry(n.width,n.height,n.depth,n.widthSegments,n.heightSegments,n.depthSegments)}}function cloneUniforms(s){const n={};for(const u in s){n[u]={};for(const f in s[u]){const y=s[u][f];y&&(y.isColor||y.isMatrix3||y.isMatrix4||y.isVector2||y.isVector3||y.isVector4||y.isTexture||y.isQuaternion)?y.isRenderTargetTexture?(warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),n[u][f]=null):n[u][f]=y.clone():Array.isArray(y)?n[u][f]=y.slice():n[u][f]=y}}return n}function mergeUniforms(s){const n={};for(let u=0;u<s.length;u++){const f=cloneUniforms(s[u]);for(const y in f)n[y]=f[y]}return n}function cloneUniformsGroups(s){const n=[];for(let u=0;u<s.length;u++)n.push(s[u].clone());return n}function getUnlitUniformColorSpace(s){const n=s.getRenderTarget();return n===null?s.outputColorSpace:n.isXRRenderTarget===!0?n.texture.colorSpace:ColorManagement.workingColorSpace}const UniformsUtils={clone:cloneUniforms,merge:mergeUniforms};var default_vertex=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,default_fragment=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ShaderMaterial extends Material{constructor(n){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=default_vertex,this.fragmentShader=default_fragment,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,n!==void 0&&this.setValues(n)}copy(n){return super.copy(n),this.fragmentShader=n.fragmentShader,this.vertexShader=n.vertexShader,this.uniforms=cloneUniforms(n.uniforms),this.uniformsGroups=cloneUniformsGroups(n.uniformsGroups),this.defines=Object.assign({},n.defines),this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.fog=n.fog,this.lights=n.lights,this.clipping=n.clipping,this.extensions=Object.assign({},n.extensions),this.glslVersion=n.glslVersion,this.defaultAttributeValues=Object.assign({},n.defaultAttributeValues),this.index0AttributeName=n.index0AttributeName,this.uniformsNeedUpdate=n.uniformsNeedUpdate,this}toJSON(n){const u=super.toJSON(n);u.glslVersion=this.glslVersion,u.uniforms={};for(const y in this.uniforms){const A=this.uniforms[y].value;A&&A.isTexture?u.uniforms[y]={type:"t",value:A.toJSON(n).uuid}:A&&A.isColor?u.uniforms[y]={type:"c",value:A.getHex()}:A&&A.isVector2?u.uniforms[y]={type:"v2",value:A.toArray()}:A&&A.isVector3?u.uniforms[y]={type:"v3",value:A.toArray()}:A&&A.isVector4?u.uniforms[y]={type:"v4",value:A.toArray()}:A&&A.isMatrix3?u.uniforms[y]={type:"m3",value:A.toArray()}:A&&A.isMatrix4?u.uniforms[y]={type:"m4",value:A.toArray()}:u.uniforms[y]={value:A}}Object.keys(this.defines).length>0&&(u.defines=this.defines),u.vertexShader=this.vertexShader,u.fragmentShader=this.fragmentShader,u.lights=this.lights,u.clipping=this.clipping;const f={};for(const y in this.extensions)this.extensions[y]===!0&&(f[y]=!0);return Object.keys(f).length>0&&(u.extensions=f),u}}class Camera extends Object3D{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Matrix4,this.projectionMatrix=new Matrix4,this.projectionMatrixInverse=new Matrix4,this.coordinateSystem=WebGLCoordinateSystem,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(n,u){return super.copy(n,u),this.matrixWorldInverse.copy(n.matrixWorldInverse),this.projectionMatrix.copy(n.projectionMatrix),this.projectionMatrixInverse.copy(n.projectionMatrixInverse),this.coordinateSystem=n.coordinateSystem,this}getWorldDirection(n){return super.getWorldDirection(n).negate()}updateMatrixWorld(n){super.updateMatrixWorld(n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(n,u){super.updateWorldMatrix(n,u),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const _v3$1=new Vector3,_minTarget=new Vector2,_maxTarget=new Vector2;class PerspectiveCamera extends Camera{constructor(n=50,u=1,f=.1,y=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=n,this.zoom=1,this.near=f,this.far=y,this.focus=10,this.aspect=u,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(n,u){return super.copy(n,u),this.fov=n.fov,this.zoom=n.zoom,this.near=n.near,this.far=n.far,this.focus=n.focus,this.aspect=n.aspect,this.view=n.view===null?null:Object.assign({},n.view),this.filmGauge=n.filmGauge,this.filmOffset=n.filmOffset,this}setFocalLength(n){const u=.5*this.getFilmHeight()/n;this.fov=RAD2DEG*2*Math.atan(u),this.updateProjectionMatrix()}getFocalLength(){const n=Math.tan(DEG2RAD*.5*this.fov);return .5*this.getFilmHeight()/n}getEffectiveFOV(){return RAD2DEG*2*Math.atan(Math.tan(DEG2RAD*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(n,u,f){_v3$1.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),u.set(_v3$1.x,_v3$1.y).multiplyScalar(-n/_v3$1.z),_v3$1.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),f.set(_v3$1.x,_v3$1.y).multiplyScalar(-n/_v3$1.z)}getViewSize(n,u){return this.getViewBounds(n,_minTarget,_maxTarget),u.subVectors(_maxTarget,_minTarget)}setViewOffset(n,u,f,y,S,A){this.aspect=n/u,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=n,this.view.fullHeight=u,this.view.offsetX=f,this.view.offsetY=y,this.view.width=S,this.view.height=A,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const n=this.near;let u=n*Math.tan(DEG2RAD*.5*this.fov)/this.zoom,f=2*u,y=this.aspect*f,S=-.5*y;const A=this.view;if(this.view!==null&&this.view.enabled){const C=A.fullWidth,T=A.fullHeight;S+=A.offsetX*y/C,u-=A.offsetY*f/T,y*=A.width/C,f*=A.height/T}const w=this.filmOffset;w!==0&&(S+=n*w/this.getFilmWidth()),this.projectionMatrix.makePerspective(S,S+y,u,u-f,n,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(n){const u=super.toJSON(n);return u.object.fov=this.fov,u.object.zoom=this.zoom,u.object.near=this.near,u.object.far=this.far,u.object.focus=this.focus,u.object.aspect=this.aspect,this.view!==null&&(u.object.view=Object.assign({},this.view)),u.object.filmGauge=this.filmGauge,u.object.filmOffset=this.filmOffset,u}}const fov=-90,aspect=1;class CubeCamera extends Object3D{constructor(n,u,f){super(),this.type="CubeCamera",this.renderTarget=f,this.coordinateSystem=null,this.activeMipmapLevel=0;const y=new PerspectiveCamera(fov,aspect,n,u);y.layers=this.layers,this.add(y);const S=new PerspectiveCamera(fov,aspect,n,u);S.layers=this.layers,this.add(S);const A=new PerspectiveCamera(fov,aspect,n,u);A.layers=this.layers,this.add(A);const w=new PerspectiveCamera(fov,aspect,n,u);w.layers=this.layers,this.add(w);const C=new PerspectiveCamera(fov,aspect,n,u);C.layers=this.layers,this.add(C);const T=new PerspectiveCamera(fov,aspect,n,u);T.layers=this.layers,this.add(T)}updateCoordinateSystem(){const n=this.coordinateSystem,u=this.children.concat(),[f,y,S,A,w,C]=u;for(const T of u)this.remove(T);if(n===WebGLCoordinateSystem)f.up.set(0,1,0),f.lookAt(1,0,0),y.up.set(0,1,0),y.lookAt(-1,0,0),S.up.set(0,0,-1),S.lookAt(0,1,0),A.up.set(0,0,1),A.lookAt(0,-1,0),w.up.set(0,1,0),w.lookAt(0,0,1),C.up.set(0,1,0),C.lookAt(0,0,-1);else if(n===WebGPUCoordinateSystem)f.up.set(0,-1,0),f.lookAt(-1,0,0),y.up.set(0,-1,0),y.lookAt(1,0,0),S.up.set(0,0,1),S.lookAt(0,1,0),A.up.set(0,0,-1),A.lookAt(0,-1,0),w.up.set(0,-1,0),w.lookAt(0,0,1),C.up.set(0,-1,0),C.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+n);for(const T of u)this.add(T),T.updateMatrixWorld()}update(n,u){this.parent===null&&this.updateMatrixWorld();const{renderTarget:f,activeMipmapLevel:y}=this;this.coordinateSystem!==n.coordinateSystem&&(this.coordinateSystem=n.coordinateSystem,this.updateCoordinateSystem());const[S,A,w,C,T,R]=this.children,I=n.getRenderTarget(),N=n.getActiveCubeFace(),L=n.getActiveMipmapLevel(),F=n.xr.enabled;n.xr.enabled=!1;const H=f.texture.generateMipmaps;f.texture.generateMipmaps=!1,n.setRenderTarget(f,0,y),n.render(u,S),n.setRenderTarget(f,1,y),n.render(u,A),n.setRenderTarget(f,2,y),n.render(u,w),n.setRenderTarget(f,3,y),n.render(u,C),n.setRenderTarget(f,4,y),n.render(u,T),f.texture.generateMipmaps=H,n.setRenderTarget(f,5,y),n.render(u,R),n.setRenderTarget(I,N,L),n.xr.enabled=F,f.texture.needsPMREMUpdate=!0}}class CubeTexture extends Texture{constructor(n=[],u=CubeReflectionMapping,f,y,S,A,w,C,T,R){super(n,u,f,y,S,A,w,C,T,R),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(n){this.image=n}}class WebGLCubeRenderTarget extends WebGLRenderTarget{constructor(n=1,u={}){super(n,n,u),this.isWebGLCubeRenderTarget=!0;const f={width:n,height:n,depth:1},y=[f,f,f,f,f,f];this.texture=new CubeTexture(y),this._setTextureOptions(u),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(n,u){this.texture.type=u.type,this.texture.colorSpace=u.colorSpace,this.texture.generateMipmaps=u.generateMipmaps,this.texture.minFilter=u.minFilter,this.texture.magFilter=u.magFilter;const f={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},y=new BoxGeometry(5,5,5),S=new ShaderMaterial({name:"CubemapFromEquirect",uniforms:cloneUniforms(f.uniforms),vertexShader:f.vertexShader,fragmentShader:f.fragmentShader,side:BackSide,blending:NoBlending});S.uniforms.tEquirect.value=u;const A=new Mesh(y,S),w=u.minFilter;return u.minFilter===LinearMipmapLinearFilter&&(u.minFilter=LinearFilter),new CubeCamera(1,10,this).update(n,A),u.minFilter=w,A.geometry.dispose(),A.material.dispose(),this}clear(n,u=!0,f=!0,y=!0){const S=n.getRenderTarget();for(let A=0;A<6;A++)n.setRenderTarget(this,A),n.clear(u,f,y);n.setRenderTarget(S)}}class Group extends Object3D{constructor(){super(),this.isGroup=!0,this.type="Group"}}const _moveEvent={type:"move"};class WebXRController{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Group,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Group,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Vector3,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Vector3),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Group,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Vector3,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Vector3),this._grip}dispatchEvent(n){return this._targetRay!==null&&this._targetRay.dispatchEvent(n),this._grip!==null&&this._grip.dispatchEvent(n),this._hand!==null&&this._hand.dispatchEvent(n),this}connect(n){if(n&&n.hand){const u=this._hand;if(u)for(const f of n.hand.values())this._getHandJoint(u,f)}return this.dispatchEvent({type:"connected",data:n}),this}disconnect(n){return this.dispatchEvent({type:"disconnected",data:n}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(n,u,f){let y=null,S=null,A=null;const w=this._targetRay,C=this._grip,T=this._hand;if(n&&u.session.visibilityState!=="visible-blurred"){if(T&&n.hand){A=!0;for(const H of n.hand.values()){const z=u.getJointPose(H,f),U=this._getHandJoint(T,H);z!==null&&(U.matrix.fromArray(z.transform.matrix),U.matrix.decompose(U.position,U.rotation,U.scale),U.matrixWorldNeedsUpdate=!0,U.jointRadius=z.radius),U.visible=z!==null}const R=T.joints["index-finger-tip"],I=T.joints["thumb-tip"],N=R.position.distanceTo(I.position),L=.02,F=.005;T.inputState.pinching&&N>L+F?(T.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:n.handedness,target:this})):!T.inputState.pinching&&N<=L-F&&(T.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:n.handedness,target:this}))}else C!==null&&n.gripSpace&&(S=u.getPose(n.gripSpace,f),S!==null&&(C.matrix.fromArray(S.transform.matrix),C.matrix.decompose(C.position,C.rotation,C.scale),C.matrixWorldNeedsUpdate=!0,S.linearVelocity?(C.hasLinearVelocity=!0,C.linearVelocity.copy(S.linearVelocity)):C.hasLinearVelocity=!1,S.angularVelocity?(C.hasAngularVelocity=!0,C.angularVelocity.copy(S.angularVelocity)):C.hasAngularVelocity=!1));w!==null&&(y=u.getPose(n.targetRaySpace,f),y===null&&S!==null&&(y=S),y!==null&&(w.matrix.fromArray(y.transform.matrix),w.matrix.decompose(w.position,w.rotation,w.scale),w.matrixWorldNeedsUpdate=!0,y.linearVelocity?(w.hasLinearVelocity=!0,w.linearVelocity.copy(y.linearVelocity)):w.hasLinearVelocity=!1,y.angularVelocity?(w.hasAngularVelocity=!0,w.angularVelocity.copy(y.angularVelocity)):w.hasAngularVelocity=!1,this.dispatchEvent(_moveEvent)))}return w!==null&&(w.visible=y!==null),C!==null&&(C.visible=S!==null),T!==null&&(T.visible=A!==null),this}_getHandJoint(n,u){if(n.joints[u.jointName]===void 0){const f=new Group;f.matrixAutoUpdate=!1,f.visible=!1,n.joints[u.jointName]=f,n.add(f)}return n.joints[u.jointName]}}class FogExp2{constructor(n,u=25e-5){this.isFogExp2=!0,this.name="",this.color=new Color(n),this.density=u}clone(){return new FogExp2(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Fog{constructor(n,u=1,f=1e3){this.isFog=!0,this.name="",this.color=new Color(n),this.near=u,this.far=f}clone(){return new Fog(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}let Scene$1=class extends Object3D{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Euler,this.environmentIntensity=1,this.environmentRotation=new Euler,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(n,u){return super.copy(n,u),n.background!==null&&(this.background=n.background.clone()),n.environment!==null&&(this.environment=n.environment.clone()),n.fog!==null&&(this.fog=n.fog.clone()),this.backgroundBlurriness=n.backgroundBlurriness,this.backgroundIntensity=n.backgroundIntensity,this.backgroundRotation.copy(n.backgroundRotation),this.environmentIntensity=n.environmentIntensity,this.environmentRotation.copy(n.environmentRotation),n.overrideMaterial!==null&&(this.overrideMaterial=n.overrideMaterial.clone()),this.matrixAutoUpdate=n.matrixAutoUpdate,this}toJSON(n){const u=super.toJSON(n);return this.fog!==null&&(u.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(u.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(u.object.backgroundIntensity=this.backgroundIntensity),u.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(u.object.environmentIntensity=this.environmentIntensity),u.object.environmentRotation=this.environmentRotation.toArray(),u}};class InterleavedBuffer{constructor(n,u){this.isInterleavedBuffer=!0,this.array=n,this.stride=u,this.count=n!==void 0?n.length/u:0,this.usage=StaticDrawUsage,this.updateRanges=[],this.version=0,this.uuid=generateUUID$1()}onUploadCallback(){}set needsUpdate(n){n===!0&&this.version++}setUsage(n){return this.usage=n,this}addUpdateRange(n,u){this.updateRanges.push({start:n,count:u})}clearUpdateRanges(){this.updateRanges.length=0}copy(n){return this.array=new n.array.constructor(n.array),this.count=n.count,this.stride=n.stride,this.usage=n.usage,this}copyAt(n,u,f){n*=this.stride,f*=u.stride;for(let y=0,S=this.stride;y<S;y++)this.array[n+y]=u.array[f+y];return this}set(n,u=0){return this.array.set(n,u),this}clone(n){n.arrayBuffers===void 0&&(n.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=generateUUID$1()),n.arrayBuffers[this.array.buffer._uuid]===void 0&&(n.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const u=new this.array.constructor(n.arrayBuffers[this.array.buffer._uuid]),f=new this.constructor(u,this.stride);return f.setUsage(this.usage),f}onUpload(n){return this.onUploadCallback=n,this}toJSON(n){return n.arrayBuffers===void 0&&(n.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=generateUUID$1()),n.arrayBuffers[this.array.buffer._uuid]===void 0&&(n.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const _vector$7=new Vector3;class InterleavedBufferAttribute{constructor(n,u,f,y=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=n,this.itemSize=u,this.offset=f,this.normalized=y}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(n){this.data.needsUpdate=n}applyMatrix4(n){for(let u=0,f=this.data.count;u<f;u++)_vector$7.fromBufferAttribute(this,u),_vector$7.applyMatrix4(n),this.setXYZ(u,_vector$7.x,_vector$7.y,_vector$7.z);return this}applyNormalMatrix(n){for(let u=0,f=this.count;u<f;u++)_vector$7.fromBufferAttribute(this,u),_vector$7.applyNormalMatrix(n),this.setXYZ(u,_vector$7.x,_vector$7.y,_vector$7.z);return this}transformDirection(n){for(let u=0,f=this.count;u<f;u++)_vector$7.fromBufferAttribute(this,u),_vector$7.transformDirection(n),this.setXYZ(u,_vector$7.x,_vector$7.y,_vector$7.z);return this}getComponent(n,u){let f=this.array[n*this.data.stride+this.offset+u];return this.normalized&&(f=denormalize(f,this.array)),f}setComponent(n,u,f){return this.normalized&&(f=normalize(f,this.array)),this.data.array[n*this.data.stride+this.offset+u]=f,this}setX(n,u){return this.normalized&&(u=normalize(u,this.array)),this.data.array[n*this.data.stride+this.offset]=u,this}setY(n,u){return this.normalized&&(u=normalize(u,this.array)),this.data.array[n*this.data.stride+this.offset+1]=u,this}setZ(n,u){return this.normalized&&(u=normalize(u,this.array)),this.data.array[n*this.data.stride+this.offset+2]=u,this}setW(n,u){return this.normalized&&(u=normalize(u,this.array)),this.data.array[n*this.data.stride+this.offset+3]=u,this}getX(n){let u=this.data.array[n*this.data.stride+this.offset];return this.normalized&&(u=denormalize(u,this.array)),u}getY(n){let u=this.data.array[n*this.data.stride+this.offset+1];return this.normalized&&(u=denormalize(u,this.array)),u}getZ(n){let u=this.data.array[n*this.data.stride+this.offset+2];return this.normalized&&(u=denormalize(u,this.array)),u}getW(n){let u=this.data.array[n*this.data.stride+this.offset+3];return this.normalized&&(u=denormalize(u,this.array)),u}setXY(n,u,f){return n=n*this.data.stride+this.offset,this.normalized&&(u=normalize(u,this.array),f=normalize(f,this.array)),this.data.array[n+0]=u,this.data.array[n+1]=f,this}setXYZ(n,u,f,y){return n=n*this.data.stride+this.offset,this.normalized&&(u=normalize(u,this.array),f=normalize(f,this.array),y=normalize(y,this.array)),this.data.array[n+0]=u,this.data.array[n+1]=f,this.data.array[n+2]=y,this}setXYZW(n,u,f,y,S){return n=n*this.data.stride+this.offset,this.normalized&&(u=normalize(u,this.array),f=normalize(f,this.array),y=normalize(y,this.array),S=normalize(S,this.array)),this.data.array[n+0]=u,this.data.array[n+1]=f,this.data.array[n+2]=y,this.data.array[n+3]=S,this}clone(n){if(n===void 0){log("InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const u=[];for(let f=0;f<this.count;f++){const y=f*this.data.stride+this.offset;for(let S=0;S<this.itemSize;S++)u.push(this.data.array[y+S])}return new BufferAttribute(new this.array.constructor(u),this.itemSize,this.normalized)}else return n.interleavedBuffers===void 0&&(n.interleavedBuffers={}),n.interleavedBuffers[this.data.uuid]===void 0&&(n.interleavedBuffers[this.data.uuid]=this.data.clone(n)),new InterleavedBufferAttribute(n.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(n){if(n===void 0){log("InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const u=[];for(let f=0;f<this.count;f++){const y=f*this.data.stride+this.offset;for(let S=0;S<this.itemSize;S++)u.push(this.data.array[y+S])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:u,normalized:this.normalized}}else return n.interleavedBuffers===void 0&&(n.interleavedBuffers={}),n.interleavedBuffers[this.data.uuid]===void 0&&(n.interleavedBuffers[this.data.uuid]=this.data.toJSON(n)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class SpriteMaterial extends Material{constructor(n){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(n)}copy(n){return super.copy(n),this.color.copy(n.color),this.map=n.map,this.alphaMap=n.alphaMap,this.rotation=n.rotation,this.sizeAttenuation=n.sizeAttenuation,this.fog=n.fog,this}}let _geometry;const _intersectPoint=new Vector3,_worldScale=new Vector3,_mvPosition=new Vector3,_alignedPosition=new Vector2,_rotatedPosition=new Vector2,_viewWorldMatrix=new Matrix4,_vA=new Vector3,_vB=new Vector3,_vC=new Vector3,_uvA=new Vector2,_uvB=new Vector2,_uvC=new Vector2;class Sprite extends Object3D{constructor(n=new SpriteMaterial){if(super(),this.isSprite=!0,this.type="Sprite",_geometry===void 0){_geometry=new BufferGeometry;const u=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),f=new InterleavedBuffer(u,5);_geometry.setIndex([0,1,2,0,2,3]),_geometry.setAttribute("position",new InterleavedBufferAttribute(f,3,0,!1)),_geometry.setAttribute("uv",new InterleavedBufferAttribute(f,2,3,!1))}this.geometry=_geometry,this.material=n,this.center=new Vector2(.5,.5),this.count=1}raycast(n,u){n.camera===null&&error('Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),_worldScale.setFromMatrixScale(this.matrixWorld),_viewWorldMatrix.copy(n.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(n.camera.matrixWorldInverse,this.matrixWorld),_mvPosition.setFromMatrixPosition(this.modelViewMatrix),n.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&_worldScale.multiplyScalar(-_mvPosition.z);const f=this.material.rotation;let y,S;f!==0&&(S=Math.cos(f),y=Math.sin(f));const A=this.center;transformVertex(_vA.set(-.5,-.5,0),_mvPosition,A,_worldScale,y,S),transformVertex(_vB.set(.5,-.5,0),_mvPosition,A,_worldScale,y,S),transformVertex(_vC.set(.5,.5,0),_mvPosition,A,_worldScale,y,S),_uvA.set(0,0),_uvB.set(1,0),_uvC.set(1,1);let w=n.ray.intersectTriangle(_vA,_vB,_vC,!1,_intersectPoint);if(w===null&&(transformVertex(_vB.set(-.5,.5,0),_mvPosition,A,_worldScale,y,S),_uvB.set(0,1),w=n.ray.intersectTriangle(_vA,_vC,_vB,!1,_intersectPoint),w===null))return;const C=n.ray.origin.distanceTo(_intersectPoint);C<n.near||C>n.far||u.push({distance:C,point:_intersectPoint.clone(),uv:Triangle.getInterpolation(_intersectPoint,_vA,_vB,_vC,_uvA,_uvB,_uvC,new Vector2),face:null,object:this})}copy(n,u){return super.copy(n,u),n.center!==void 0&&this.center.copy(n.center),this.material=n.material,this}}function transformVertex(s,n,u,f,y,S){_alignedPosition.subVectors(s,u).addScalar(.5).multiply(f),y!==void 0?(_rotatedPosition.x=S*_alignedPosition.x-y*_alignedPosition.y,_rotatedPosition.y=y*_alignedPosition.x+S*_alignedPosition.y):_rotatedPosition.copy(_alignedPosition),s.copy(n),s.x+=_rotatedPosition.x,s.y+=_rotatedPosition.y,s.applyMatrix4(_viewWorldMatrix)}const _v1$2=new Vector3,_v2$1=new Vector3;class LOD extends Object3D{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(n){super.copy(n,!1);const u=n.levels;for(let f=0,y=u.length;f<y;f++){const S=u[f];this.addLevel(S.object.clone(),S.distance,S.hysteresis)}return this.autoUpdate=n.autoUpdate,this}addLevel(n,u=0,f=0){u=Math.abs(u);const y=this.levels;let S;for(S=0;S<y.length&&!(u<y[S].distance);S++);return y.splice(S,0,{distance:u,hysteresis:f,object:n}),this.add(n),this}removeLevel(n){const u=this.levels;for(let f=0;f<u.length;f++)if(u[f].distance===n){const y=u.splice(f,1);return this.remove(y[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(n){const u=this.levels;if(u.length>0){let f,y;for(f=1,y=u.length;f<y;f++){let S=u[f].distance;if(u[f].object.visible&&(S-=S*u[f].hysteresis),n<S)break}return u[f-1].object}return null}raycast(n,u){if(this.levels.length>0){_v1$2.setFromMatrixPosition(this.matrixWorld);const y=n.ray.origin.distanceTo(_v1$2);this.getObjectForDistance(y).raycast(n,u)}}update(n){const u=this.levels;if(u.length>1){_v1$2.setFromMatrixPosition(n.matrixWorld),_v2$1.setFromMatrixPosition(this.matrixWorld);const f=_v1$2.distanceTo(_v2$1)/n.zoom;u[0].object.visible=!0;let y,S;for(y=1,S=u.length;y<S;y++){let A=u[y].distance;if(u[y].object.visible&&(A-=A*u[y].hysteresis),f>=A)u[y-1].object.visible=!1,u[y].object.visible=!0;else break}for(this._currentLevel=y-1;y<S;y++)u[y].object.visible=!1}}toJSON(n){const u=super.toJSON(n);this.autoUpdate===!1&&(u.object.autoUpdate=!1),u.object.levels=[];const f=this.levels;for(let y=0,S=f.length;y<S;y++){const A=f[y];u.object.levels.push({object:A.object.uuid,distance:A.distance,hysteresis:A.hysteresis})}return u}}const _basePosition=new Vector3,_skinIndex=new Vector4,_skinWeight=new Vector4,_vector3=new Vector3,_matrix4=new Matrix4,_vertex=new Vector3,_sphere$5=new Sphere,_inverseMatrix$2=new Matrix4,_ray$2=new Ray;class SkinnedMesh extends Mesh{constructor(n,u){super(n,u),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=AttachedBindMode,this.bindMatrix=new Matrix4,this.bindMatrixInverse=new Matrix4,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const n=this.geometry;this.boundingBox===null&&(this.boundingBox=new Box3),this.boundingBox.makeEmpty();const u=n.getAttribute("position");for(let f=0;f<u.count;f++)this.getVertexPosition(f,_vertex),this.boundingBox.expandByPoint(_vertex)}computeBoundingSphere(){const n=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Sphere),this.boundingSphere.makeEmpty();const u=n.getAttribute("position");for(let f=0;f<u.count;f++)this.getVertexPosition(f,_vertex),this.boundingSphere.expandByPoint(_vertex)}copy(n,u){return super.copy(n,u),this.bindMode=n.bindMode,this.bindMatrix.copy(n.bindMatrix),this.bindMatrixInverse.copy(n.bindMatrixInverse),this.skeleton=n.skeleton,n.boundingBox!==null&&(this.boundingBox=n.boundingBox.clone()),n.boundingSphere!==null&&(this.boundingSphere=n.boundingSphere.clone()),this}raycast(n,u){const f=this.material,y=this.matrixWorld;f!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),_sphere$5.copy(this.boundingSphere),_sphere$5.applyMatrix4(y),n.ray.intersectsSphere(_sphere$5)!==!1&&(_inverseMatrix$2.copy(y).invert(),_ray$2.copy(n.ray).applyMatrix4(_inverseMatrix$2),!(this.boundingBox!==null&&_ray$2.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(n,u,_ray$2)))}getVertexPosition(n,u){return super.getVertexPosition(n,u),this.applyBoneTransform(n,u),u}bind(n,u){this.skeleton=n,u===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),u=this.matrixWorld),this.bindMatrix.copy(u),this.bindMatrixInverse.copy(u).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const n=new Vector4,u=this.geometry.attributes.skinWeight;for(let f=0,y=u.count;f<y;f++){n.fromBufferAttribute(u,f);const S=1/n.manhattanLength();S!==1/0?n.multiplyScalar(S):n.set(1,0,0,0),u.setXYZW(f,n.x,n.y,n.z,n.w)}}updateMatrixWorld(n){super.updateMatrixWorld(n),this.bindMode===AttachedBindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===DetachedBindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():warn("SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(n,u){const f=this.skeleton,y=this.geometry;_skinIndex.fromBufferAttribute(y.attributes.skinIndex,n),_skinWeight.fromBufferAttribute(y.attributes.skinWeight,n),_basePosition.copy(u).applyMatrix4(this.bindMatrix),u.set(0,0,0);for(let S=0;S<4;S++){const A=_skinWeight.getComponent(S);if(A!==0){const w=_skinIndex.getComponent(S);_matrix4.multiplyMatrices(f.bones[w].matrixWorld,f.boneInverses[w]),u.addScaledVector(_vector3.copy(_basePosition).applyMatrix4(_matrix4),A)}}return u.applyMatrix4(this.bindMatrixInverse)}}class Bone extends Object3D{constructor(){super(),this.isBone=!0,this.type="Bone"}}class DataTexture extends Texture{constructor(n=null,u=1,f=1,y,S,A,w,C,T=NearestFilter,R=NearestFilter,I,N){super(null,A,w,C,T,R,y,S,I,N),this.isDataTexture=!0,this.image={data:n,width:u,height:f},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const _offsetMatrix=new Matrix4,_identityMatrix$1=new Matrix4;class Skeleton{constructor(n=[],u=[]){this.uuid=generateUUID$1(),this.bones=n.slice(0),this.boneInverses=u,this.boneMatrices=null,this.previousBoneMatrices=null,this.boneTexture=null,this.init()}init(){const n=this.bones,u=this.boneInverses;if(this.boneMatrices=new Float32Array(n.length*16),u.length===0)this.calculateInverses();else if(n.length!==u.length){warn("Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let f=0,y=this.bones.length;f<y;f++)this.boneInverses.push(new Matrix4)}}calculateInverses(){this.boneInverses.length=0;for(let n=0,u=this.bones.length;n<u;n++){const f=new Matrix4;this.bones[n]&&f.copy(this.bones[n].matrixWorld).invert(),this.boneInverses.push(f)}}pose(){for(let n=0,u=this.bones.length;n<u;n++){const f=this.bones[n];f&&f.matrixWorld.copy(this.boneInverses[n]).invert()}for(let n=0,u=this.bones.length;n<u;n++){const f=this.bones[n];f&&(f.parent&&f.parent.isBone?(f.matrix.copy(f.parent.matrixWorld).invert(),f.matrix.multiply(f.matrixWorld)):f.matrix.copy(f.matrixWorld),f.matrix.decompose(f.position,f.quaternion,f.scale))}}update(){const n=this.bones,u=this.boneInverses,f=this.boneMatrices,y=this.boneTexture;for(let S=0,A=n.length;S<A;S++){const w=n[S]?n[S].matrixWorld:_identityMatrix$1;_offsetMatrix.multiplyMatrices(w,u[S]),_offsetMatrix.toArray(f,S*16)}y!==null&&(y.needsUpdate=!0)}clone(){return new Skeleton(this.bones,this.boneInverses)}computeBoneTexture(){let n=Math.sqrt(this.bones.length*4);n=Math.ceil(n/4)*4,n=Math.max(n,4);const u=new Float32Array(n*n*4);u.set(this.boneMatrices);const f=new DataTexture(u,n,n,RGBAFormat,FloatType);return f.needsUpdate=!0,this.boneMatrices=u,this.boneTexture=f,this}getBoneByName(n){for(let u=0,f=this.bones.length;u<f;u++){const y=this.bones[u];if(y.name===n)return y}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(n,u){this.uuid=n.uuid;for(let f=0,y=n.bones.length;f<y;f++){const S=n.bones[f];let A=u[S];A===void 0&&(warn("Skeleton: No bone found with UUID:",S),A=new Bone),this.bones.push(A),this.boneInverses.push(new Matrix4().fromArray(n.boneInverses[f]))}return this.init(),this}toJSON(){const n={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};n.uuid=this.uuid;const u=this.bones,f=this.boneInverses;for(let y=0,S=u.length;y<S;y++){const A=u[y];n.bones.push(A.uuid);const w=f[y];n.boneInverses.push(w.toArray())}return n}}class InstancedBufferAttribute extends BufferAttribute{constructor(n,u,f,y=1){super(n,u,f),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=y}copy(n){return super.copy(n),this.meshPerAttribute=n.meshPerAttribute,this}toJSON(){const n=super.toJSON();return n.meshPerAttribute=this.meshPerAttribute,n.isInstancedBufferAttribute=!0,n}}const _instanceLocalMatrix=new Matrix4,_instanceWorldMatrix=new Matrix4,_instanceIntersects=[],_box3=new Box3,_identity=new Matrix4,_mesh$1=new Mesh,_sphere$4=new Sphere;class InstancedMesh extends Mesh{constructor(n,u,f){super(n,u),this.isInstancedMesh=!0,this.instanceMatrix=new InstancedBufferAttribute(new Float32Array(f*16),16),this.instanceColor=null,this.morphTexture=null,this.count=f,this.boundingBox=null,this.boundingSphere=null;for(let y=0;y<f;y++)this.setMatrixAt(y,_identity)}computeBoundingBox(){const n=this.geometry,u=this.count;this.boundingBox===null&&(this.boundingBox=new Box3),n.boundingBox===null&&n.computeBoundingBox(),this.boundingBox.makeEmpty();for(let f=0;f<u;f++)this.getMatrixAt(f,_instanceLocalMatrix),_box3.copy(n.boundingBox).applyMatrix4(_instanceLocalMatrix),this.boundingBox.union(_box3)}computeBoundingSphere(){const n=this.geometry,u=this.count;this.boundingSphere===null&&(this.boundingSphere=new Sphere),n.boundingSphere===null&&n.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let f=0;f<u;f++)this.getMatrixAt(f,_instanceLocalMatrix),_sphere$4.copy(n.boundingSphere).applyMatrix4(_instanceLocalMatrix),this.boundingSphere.union(_sphere$4)}copy(n,u){return super.copy(n,u),this.instanceMatrix.copy(n.instanceMatrix),n.morphTexture!==null&&(this.morphTexture=n.morphTexture.clone()),n.instanceColor!==null&&(this.instanceColor=n.instanceColor.clone()),this.count=n.count,n.boundingBox!==null&&(this.boundingBox=n.boundingBox.clone()),n.boundingSphere!==null&&(this.boundingSphere=n.boundingSphere.clone()),this}getColorAt(n,u){u.fromArray(this.instanceColor.array,n*3)}getMatrixAt(n,u){u.fromArray(this.instanceMatrix.array,n*16)}getMorphAt(n,u){const f=u.morphTargetInfluences,y=this.morphTexture.source.data.data,S=f.length+1,A=n*S+1;for(let w=0;w<f.length;w++)f[w]=y[A+w]}raycast(n,u){const f=this.matrixWorld,y=this.count;if(_mesh$1.geometry=this.geometry,_mesh$1.material=this.material,_mesh$1.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),_sphere$4.copy(this.boundingSphere),_sphere$4.applyMatrix4(f),n.ray.intersectsSphere(_sphere$4)!==!1))for(let S=0;S<y;S++){this.getMatrixAt(S,_instanceLocalMatrix),_instanceWorldMatrix.multiplyMatrices(f,_instanceLocalMatrix),_mesh$1.matrixWorld=_instanceWorldMatrix,_mesh$1.raycast(n,_instanceIntersects);for(let A=0,w=_instanceIntersects.length;A<w;A++){const C=_instanceIntersects[A];C.instanceId=S,C.object=this,u.push(C)}_instanceIntersects.length=0}}setColorAt(n,u){this.instanceColor===null&&(this.instanceColor=new InstancedBufferAttribute(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),u.toArray(this.instanceColor.array,n*3)}setMatrixAt(n,u){u.toArray(this.instanceMatrix.array,n*16)}setMorphAt(n,u){const f=u.morphTargetInfluences,y=f.length+1;this.morphTexture===null&&(this.morphTexture=new DataTexture(new Float32Array(y*this.count),y,this.count,RedFormat,FloatType));const S=this.morphTexture.source.data.data;let A=0;for(let T=0;T<f.length;T++)A+=f[T];const w=this.geometry.morphTargetsRelative?1:1-A,C=y*n;S[C]=w,S.set(f,C+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const _vector1=new Vector3,_vector2=new Vector3,_normalMatrix=new Matrix3;let Plane$1=class{constructor(n=new Vector3(1,0,0),u=0){this.isPlane=!0,this.normal=n,this.constant=u}set(n,u){return this.normal.copy(n),this.constant=u,this}setComponents(n,u,f,y){return this.normal.set(n,u,f),this.constant=y,this}setFromNormalAndCoplanarPoint(n,u){return this.normal.copy(n),this.constant=-u.dot(this.normal),this}setFromCoplanarPoints(n,u,f){const y=_vector1.subVectors(f,u).cross(_vector2.subVectors(n,u)).normalize();return this.setFromNormalAndCoplanarPoint(y,n),this}copy(n){return this.normal.copy(n.normal),this.constant=n.constant,this}normalize(){const n=1/this.normal.length();return this.normal.multiplyScalar(n),this.constant*=n,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(n){return this.normal.dot(n)+this.constant}distanceToSphere(n){return this.distanceToPoint(n.center)-n.radius}projectPoint(n,u){return u.copy(n).addScaledVector(this.normal,-this.distanceToPoint(n))}intersectLine(n,u){const f=n.delta(_vector1),y=this.normal.dot(f);if(y===0)return this.distanceToPoint(n.start)===0?u.copy(n.start):null;const S=-(n.start.dot(this.normal)+this.constant)/y;return S<0||S>1?null:u.copy(n.start).addScaledVector(f,S)}intersectsLine(n){const u=this.distanceToPoint(n.start),f=this.distanceToPoint(n.end);return u<0&&f>0||f<0&&u>0}intersectsBox(n){return n.intersectsPlane(this)}intersectsSphere(n){return n.intersectsPlane(this)}coplanarPoint(n){return n.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(n,u){const f=u||_normalMatrix.getNormalMatrix(n),y=this.coplanarPoint(_vector1).applyMatrix4(n),S=this.normal.applyMatrix3(f).normalize();return this.constant=-y.dot(S),this}translate(n){return this.constant-=n.dot(this.normal),this}equals(n){return n.normal.equals(this.normal)&&n.constant===this.constant}clone(){return new this.constructor().copy(this)}};const _sphere$3=new Sphere,_defaultSpriteCenter=new Vector2(.5,.5),_vector$6=new Vector3;class Frustum{constructor(n=new Plane$1,u=new Plane$1,f=new Plane$1,y=new Plane$1,S=new Plane$1,A=new Plane$1){this.planes=[n,u,f,y,S,A]}set(n,u,f,y,S,A){const w=this.planes;return w[0].copy(n),w[1].copy(u),w[2].copy(f),w[3].copy(y),w[4].copy(S),w[5].copy(A),this}copy(n){const u=this.planes;for(let f=0;f<6;f++)u[f].copy(n.planes[f]);return this}setFromProjectionMatrix(n,u=WebGLCoordinateSystem,f=!1){const y=this.planes,S=n.elements,A=S[0],w=S[1],C=S[2],T=S[3],R=S[4],I=S[5],N=S[6],L=S[7],F=S[8],H=S[9],z=S[10],U=S[11],G=S[12],Y=S[13],K=S[14],Z=S[15];if(y[0].setComponents(T-A,L-R,U-F,Z-G).normalize(),y[1].setComponents(T+A,L+R,U+F,Z+G).normalize(),y[2].setComponents(T+w,L+I,U+H,Z+Y).normalize(),y[3].setComponents(T-w,L-I,U-H,Z-Y).normalize(),f)y[4].setComponents(C,N,z,K).normalize(),y[5].setComponents(T-C,L-N,U-z,Z-K).normalize();else if(y[4].setComponents(T-C,L-N,U-z,Z-K).normalize(),u===WebGLCoordinateSystem)y[5].setComponents(T+C,L+N,U+z,Z+K).normalize();else if(u===WebGPUCoordinateSystem)y[5].setComponents(C,N,z,K).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+u);return this}intersectsObject(n){if(n.boundingSphere!==void 0)n.boundingSphere===null&&n.computeBoundingSphere(),_sphere$3.copy(n.boundingSphere).applyMatrix4(n.matrixWorld);else{const u=n.geometry;u.boundingSphere===null&&u.computeBoundingSphere(),_sphere$3.copy(u.boundingSphere).applyMatrix4(n.matrixWorld)}return this.intersectsSphere(_sphere$3)}intersectsSprite(n){_sphere$3.center.set(0,0,0);const u=_defaultSpriteCenter.distanceTo(n.center);return _sphere$3.radius=.7071067811865476+u,_sphere$3.applyMatrix4(n.matrixWorld),this.intersectsSphere(_sphere$3)}intersectsSphere(n){const u=this.planes,f=n.center,y=-n.radius;for(let S=0;S<6;S++)if(u[S].distanceToPoint(f)<y)return!1;return!0}intersectsBox(n){const u=this.planes;for(let f=0;f<6;f++){const y=u[f];if(_vector$6.x=y.normal.x>0?n.max.x:n.min.x,_vector$6.y=y.normal.y>0?n.max.y:n.min.y,_vector$6.z=y.normal.z>0?n.max.z:n.min.z,y.distanceToPoint(_vector$6)<0)return!1}return!0}containsPoint(n){const u=this.planes;for(let f=0;f<6;f++)if(u[f].distanceToPoint(n)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const _projScreenMatrix$1=new Matrix4,_frustum$1=new Frustum;class FrustumArray{constructor(){this.coordinateSystem=WebGLCoordinateSystem}intersectsObject(n,u){if(!u.isArrayCamera||u.cameras.length===0)return!1;for(let f=0;f<u.cameras.length;f++){const y=u.cameras[f];if(_projScreenMatrix$1.multiplyMatrices(y.projectionMatrix,y.matrixWorldInverse),_frustum$1.setFromProjectionMatrix(_projScreenMatrix$1,y.coordinateSystem,y.reversedDepth),_frustum$1.intersectsObject(n))return!0}return!1}intersectsSprite(n,u){if(!u||!u.cameras||u.cameras.length===0)return!1;for(let f=0;f<u.cameras.length;f++){const y=u.cameras[f];if(_projScreenMatrix$1.multiplyMatrices(y.projectionMatrix,y.matrixWorldInverse),_frustum$1.setFromProjectionMatrix(_projScreenMatrix$1,y.coordinateSystem,y.reversedDepth),_frustum$1.intersectsSprite(n))return!0}return!1}intersectsSphere(n,u){if(!u||!u.cameras||u.cameras.length===0)return!1;for(let f=0;f<u.cameras.length;f++){const y=u.cameras[f];if(_projScreenMatrix$1.multiplyMatrices(y.projectionMatrix,y.matrixWorldInverse),_frustum$1.setFromProjectionMatrix(_projScreenMatrix$1,y.coordinateSystem,y.reversedDepth),_frustum$1.intersectsSphere(n))return!0}return!1}intersectsBox(n,u){if(!u||!u.cameras||u.cameras.length===0)return!1;for(let f=0;f<u.cameras.length;f++){const y=u.cameras[f];if(_projScreenMatrix$1.multiplyMatrices(y.projectionMatrix,y.matrixWorldInverse),_frustum$1.setFromProjectionMatrix(_projScreenMatrix$1,y.coordinateSystem,y.reversedDepth),_frustum$1.intersectsBox(n))return!0}return!1}containsPoint(n,u){if(!u||!u.cameras||u.cameras.length===0)return!1;for(let f=0;f<u.cameras.length;f++){const y=u.cameras[f];if(_projScreenMatrix$1.multiplyMatrices(y.projectionMatrix,y.matrixWorldInverse),_frustum$1.setFromProjectionMatrix(_projScreenMatrix$1,y.coordinateSystem,y.reversedDepth),_frustum$1.containsPoint(n))return!0}return!1}clone(){return new FrustumArray}}function ascIdSort(s,n){return s-n}function sortOpaque(s,n){return s.z-n.z}function sortTransparent(s,n){return n.z-s.z}class MultiDrawRenderList{constructor(){this.index=0,this.pool=[],this.list=[]}push(n,u,f,y){const S=this.pool,A=this.list;this.index>=S.length&&S.push({start:-1,count:-1,z:-1,index:-1});const w=S[this.index];A.push(w),this.index++,w.start=n,w.count=u,w.z=f,w.index=y}reset(){this.list.length=0,this.index=0}}const _matrix$1=new Matrix4,_whiteColor=new Color(1,1,1),_frustum=new Frustum,_frustumArray=new FrustumArray,_box$1=new Box3,_sphere$2=new Sphere,_vector$5=new Vector3,_forward$1=new Vector3,_temp=new Vector3,_renderList=new MultiDrawRenderList,_mesh=new Mesh,_batchIntersects=[];function copyAttributeData(s,n,u=0){const f=n.itemSize;if(s.isInterleavedBufferAttribute||s.array.constructor!==n.array.constructor){const y=s.count;for(let S=0;S<y;S++)for(let A=0;A<f;A++)n.setComponent(S+u,A,s.getComponent(S,A))}else n.array.set(s.array,u*f);n.needsUpdate=!0}function copyArrayContents(s,n){if(s.constructor!==n.constructor){const u=Math.min(s.length,n.length);for(let f=0;f<u;f++)n[f]=s[f]}else{const u=Math.min(s.length,n.length);n.set(new s.constructor(s.buffer,0,u))}}class BatchedMesh extends Mesh{constructor(n,u,f=u*2,y){super(new BufferGeometry,y),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=n,this._maxVertexCount=u,this._maxIndexCount=f,this._multiDrawCounts=new Int32Array(n),this._multiDrawStarts=new Int32Array(n),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let n=Math.sqrt(this._maxInstanceCount*4);n=Math.ceil(n/4)*4,n=Math.max(n,4);const u=new Float32Array(n*n*4),f=new DataTexture(u,n,n,RGBAFormat,FloatType);this._matricesTexture=f}_initIndirectTexture(){let n=Math.sqrt(this._maxInstanceCount);n=Math.ceil(n);const u=new Uint32Array(n*n),f=new DataTexture(u,n,n,RedIntegerFormat,UnsignedIntType);this._indirectTexture=f}_initColorsTexture(){let n=Math.sqrt(this._maxInstanceCount);n=Math.ceil(n);const u=new Float32Array(n*n*4).fill(1),f=new DataTexture(u,n,n,RGBAFormat,FloatType);f.colorSpace=ColorManagement.workingColorSpace,this._colorsTexture=f}_initializeGeometry(n){const u=this.geometry,f=this._maxVertexCount,y=this._maxIndexCount;if(this._geometryInitialized===!1){for(const S in n.attributes){const A=n.getAttribute(S),{array:w,itemSize:C,normalized:T}=A,R=new w.constructor(f*C),I=new BufferAttribute(R,C,T);u.setAttribute(S,I)}if(n.getIndex()!==null){const S=f>65535?new Uint32Array(y):new Uint16Array(y);u.setIndex(new BufferAttribute(S,1))}this._geometryInitialized=!0}}_validateGeometry(n){const u=this.geometry;if(!!n.getIndex()!=!!u.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const f in u.attributes){if(!n.hasAttribute(f))throw new Error(`THREE.BatchedMesh: Added geometry missing "${f}". All geometries must have consistent attributes.`);const y=n.getAttribute(f),S=u.getAttribute(f);if(y.itemSize!==S.itemSize||y.normalized!==S.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(n){const u=this._instanceInfo;if(n<0||n>=u.length||u[n].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${n}. Instance is either out of range or has been deleted.`)}validateGeometryId(n){const u=this._geometryInfo;if(n<0||n>=u.length||u[n].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${n}. Geometry is either out of range or has been deleted.`)}setCustomSort(n){return this.customSort=n,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Box3);const n=this.boundingBox,u=this._instanceInfo;n.makeEmpty();for(let f=0,y=u.length;f<y;f++){if(u[f].active===!1)continue;const S=u[f].geometryIndex;this.getMatrixAt(f,_matrix$1),this.getBoundingBoxAt(S,_box$1).applyMatrix4(_matrix$1),n.union(_box$1)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Sphere);const n=this.boundingSphere,u=this._instanceInfo;n.makeEmpty();for(let f=0,y=u.length;f<y;f++){if(u[f].active===!1)continue;const S=u[f].geometryIndex;this.getMatrixAt(f,_matrix$1),this.getBoundingSphereAt(S,_sphere$2).applyMatrix4(_matrix$1),n.union(_sphere$2)}}addInstance(n){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const f={visible:!0,active:!0,geometryIndex:n};let y=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(ascIdSort),y=this._availableInstanceIds.shift(),this._instanceInfo[y]=f):(y=this._instanceInfo.length,this._instanceInfo.push(f));const S=this._matricesTexture;_matrix$1.identity().toArray(S.image.data,y*16),S.needsUpdate=!0;const A=this._colorsTexture;return A&&(_whiteColor.toArray(A.image.data,y*4),A.needsUpdate=!0),this._visibilityChanged=!0,y}addGeometry(n,u=-1,f=-1){this._initializeGeometry(n),this._validateGeometry(n);const y={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},S=this._geometryInfo;y.vertexStart=this._nextVertexStart,y.reservedVertexCount=u===-1?n.getAttribute("position").count:u;const A=n.getIndex();if(A!==null&&(y.indexStart=this._nextIndexStart,y.reservedIndexCount=f===-1?A.count:f),y.indexStart!==-1&&y.indexStart+y.reservedIndexCount>this._maxIndexCount||y.vertexStart+y.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let C;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(ascIdSort),C=this._availableGeometryIds.shift(),S[C]=y):(C=this._geometryCount,this._geometryCount++,S.push(y)),this.setGeometryAt(C,n),this._nextIndexStart=y.indexStart+y.reservedIndexCount,this._nextVertexStart=y.vertexStart+y.reservedVertexCount,C}setGeometryAt(n,u){if(n>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(u);const f=this.geometry,y=f.getIndex()!==null,S=f.getIndex(),A=u.getIndex(),w=this._geometryInfo[n];if(y&&A.count>w.reservedIndexCount||u.attributes.position.count>w.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const C=w.vertexStart,T=w.reservedVertexCount;w.vertexCount=u.getAttribute("position").count;for(const R in f.attributes){const I=u.getAttribute(R),N=f.getAttribute(R);copyAttributeData(I,N,C);const L=I.itemSize;for(let F=I.count,H=T;F<H;F++){const z=C+F;for(let U=0;U<L;U++)N.setComponent(z,U,0)}N.needsUpdate=!0,N.addUpdateRange(C*L,T*L)}if(y){const R=w.indexStart,I=w.reservedIndexCount;w.indexCount=u.getIndex().count;for(let N=0;N<A.count;N++)S.setX(R+N,C+A.getX(N));for(let N=A.count,L=I;N<L;N++)S.setX(R+N,C);S.needsUpdate=!0,S.addUpdateRange(R,w.reservedIndexCount)}return w.start=y?w.indexStart:w.vertexStart,w.count=y?w.indexCount:w.vertexCount,w.boundingBox=null,u.boundingBox!==null&&(w.boundingBox=u.boundingBox.clone()),w.boundingSphere=null,u.boundingSphere!==null&&(w.boundingSphere=u.boundingSphere.clone()),this._visibilityChanged=!0,n}deleteGeometry(n){const u=this._geometryInfo;if(n>=u.length||u[n].active===!1)return this;const f=this._instanceInfo;for(let y=0,S=f.length;y<S;y++)f[y].active&&f[y].geometryIndex===n&&this.deleteInstance(y);return u[n].active=!1,this._availableGeometryIds.push(n),this._visibilityChanged=!0,this}deleteInstance(n){return this.validateInstanceId(n),this._instanceInfo[n].active=!1,this._availableInstanceIds.push(n),this._visibilityChanged=!0,this}optimize(){let n=0,u=0;const f=this._geometryInfo,y=f.map((A,w)=>w).sort((A,w)=>f[A].vertexStart-f[w].vertexStart),S=this.geometry;for(let A=0,w=f.length;A<w;A++){const C=y[A],T=f[C];if(T.active!==!1){if(S.index!==null){if(T.indexStart!==u){const{indexStart:R,vertexStart:I,reservedIndexCount:N}=T,L=S.index,F=L.array,H=n-I;for(let z=R;z<R+N;z++)F[z]=F[z]+H;L.array.copyWithin(u,R,R+N),L.addUpdateRange(u,N),L.needsUpdate=!0,T.indexStart=u}u+=T.reservedIndexCount}if(T.vertexStart!==n){const{vertexStart:R,reservedVertexCount:I}=T,N=S.attributes;for(const L in N){const F=N[L],{array:H,itemSize:z}=F;H.copyWithin(n*z,R*z,(R+I)*z),F.addUpdateRange(n*z,I*z),F.needsUpdate=!0}T.vertexStart=n}n+=T.reservedVertexCount,T.start=S.index?T.indexStart:T.vertexStart,this._nextIndexStart=S.index?T.indexStart+T.reservedIndexCount:0,this._nextVertexStart=T.vertexStart+T.reservedVertexCount}}return this._visibilityChanged=!0,this}getBoundingBoxAt(n,u){if(n>=this._geometryCount)return null;const f=this.geometry,y=this._geometryInfo[n];if(y.boundingBox===null){const S=new Box3,A=f.index,w=f.attributes.position;for(let C=y.start,T=y.start+y.count;C<T;C++){let R=C;A&&(R=A.getX(R)),S.expandByPoint(_vector$5.fromBufferAttribute(w,R))}y.boundingBox=S}return u.copy(y.boundingBox),u}getBoundingSphereAt(n,u){if(n>=this._geometryCount)return null;const f=this.geometry,y=this._geometryInfo[n];if(y.boundingSphere===null){const S=new Sphere;this.getBoundingBoxAt(n,_box$1),_box$1.getCenter(S.center);const A=f.index,w=f.attributes.position;let C=0;for(let T=y.start,R=y.start+y.count;T<R;T++){let I=T;A&&(I=A.getX(I)),_vector$5.fromBufferAttribute(w,I),C=Math.max(C,S.center.distanceToSquared(_vector$5))}S.radius=Math.sqrt(C),y.boundingSphere=S}return u.copy(y.boundingSphere),u}setMatrixAt(n,u){this.validateInstanceId(n);const f=this._matricesTexture,y=this._matricesTexture.image.data;return u.toArray(y,n*16),f.needsUpdate=!0,this}getMatrixAt(n,u){return this.validateInstanceId(n),u.fromArray(this._matricesTexture.image.data,n*16)}setColorAt(n,u){return this.validateInstanceId(n),this._colorsTexture===null&&this._initColorsTexture(),u.toArray(this._colorsTexture.image.data,n*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(n,u){return this.validateInstanceId(n),u.fromArray(this._colorsTexture.image.data,n*4)}setVisibleAt(n,u){return this.validateInstanceId(n),this._instanceInfo[n].visible===u?this:(this._instanceInfo[n].visible=u,this._visibilityChanged=!0,this)}getVisibleAt(n){return this.validateInstanceId(n),this._instanceInfo[n].visible}setGeometryIdAt(n,u){return this.validateInstanceId(n),this.validateGeometryId(u),this._instanceInfo[n].geometryIndex=u,this}getGeometryIdAt(n){return this.validateInstanceId(n),this._instanceInfo[n].geometryIndex}getGeometryRangeAt(n,u={}){this.validateGeometryId(n);const f=this._geometryInfo[n];return u.vertexStart=f.vertexStart,u.vertexCount=f.vertexCount,u.reservedVertexCount=f.reservedVertexCount,u.indexStart=f.indexStart,u.indexCount=f.indexCount,u.reservedIndexCount=f.reservedIndexCount,u.start=f.start,u.count=f.count,u}setInstanceCount(n){const u=this._availableInstanceIds,f=this._instanceInfo;for(u.sort(ascIdSort);u[u.length-1]===f.length-1;)f.pop(),u.pop();if(n<f.length)throw new Error(`BatchedMesh: Instance ids outside the range ${n} are being used. Cannot shrink instance count.`);const y=new Int32Array(n),S=new Int32Array(n);copyArrayContents(this._multiDrawCounts,y),copyArrayContents(this._multiDrawStarts,S),this._multiDrawCounts=y,this._multiDrawStarts=S,this._maxInstanceCount=n;const A=this._indirectTexture,w=this._matricesTexture,C=this._colorsTexture;A.dispose(),this._initIndirectTexture(),copyArrayContents(A.image.data,this._indirectTexture.image.data),w.dispose(),this._initMatricesTexture(),copyArrayContents(w.image.data,this._matricesTexture.image.data),C&&(C.dispose(),this._initColorsTexture(),copyArrayContents(C.image.data,this._colorsTexture.image.data))}setGeometrySize(n,u){const f=[...this._geometryInfo].filter(w=>w.active);if(Math.max(...f.map(w=>w.vertexStart+w.reservedVertexCount))>n)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${u}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...f.map(C=>C.indexStart+C.reservedIndexCount))>u)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${u}. Cannot shrink further.`);const S=this.geometry;S.dispose(),this._maxVertexCount=n,this._maxIndexCount=u,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new BufferGeometry,this._initializeGeometry(S));const A=this.geometry;S.index&&copyArrayContents(S.index.array,A.index.array);for(const w in S.attributes)copyArrayContents(S.attributes[w].array,A.attributes[w].array)}raycast(n,u){const f=this._instanceInfo,y=this._geometryInfo,S=this.matrixWorld,A=this.geometry;_mesh.material=this.material,_mesh.geometry.index=A.index,_mesh.geometry.attributes=A.attributes,_mesh.geometry.boundingBox===null&&(_mesh.geometry.boundingBox=new Box3),_mesh.geometry.boundingSphere===null&&(_mesh.geometry.boundingSphere=new Sphere);for(let w=0,C=f.length;w<C;w++){if(!f[w].visible||!f[w].active)continue;const T=f[w].geometryIndex,R=y[T];_mesh.geometry.setDrawRange(R.start,R.count),this.getMatrixAt(w,_mesh.matrixWorld).premultiply(S),this.getBoundingBoxAt(T,_mesh.geometry.boundingBox),this.getBoundingSphereAt(T,_mesh.geometry.boundingSphere),_mesh.raycast(n,_batchIntersects);for(let I=0,N=_batchIntersects.length;I<N;I++){const L=_batchIntersects[I];L.object=this,L.batchId=w,u.push(L)}_batchIntersects.length=0}_mesh.material=null,_mesh.geometry.index=null,_mesh.geometry.attributes={},_mesh.geometry.setDrawRange(0,1/0)}copy(n){return super.copy(n),this.geometry=n.geometry.clone(),this.perObjectFrustumCulled=n.perObjectFrustumCulled,this.sortObjects=n.sortObjects,this.boundingBox=n.boundingBox!==null?n.boundingBox.clone():null,this.boundingSphere=n.boundingSphere!==null?n.boundingSphere.clone():null,this._geometryInfo=n._geometryInfo.map(u=>({...u,boundingBox:u.boundingBox!==null?u.boundingBox.clone():null,boundingSphere:u.boundingSphere!==null?u.boundingSphere.clone():null})),this._instanceInfo=n._instanceInfo.map(u=>({...u})),this._availableInstanceIds=n._availableInstanceIds.slice(),this._availableGeometryIds=n._availableGeometryIds.slice(),this._nextIndexStart=n._nextIndexStart,this._nextVertexStart=n._nextVertexStart,this._geometryCount=n._geometryCount,this._maxInstanceCount=n._maxInstanceCount,this._maxVertexCount=n._maxVertexCount,this._maxIndexCount=n._maxIndexCount,this._geometryInitialized=n._geometryInitialized,this._multiDrawCounts=n._multiDrawCounts.slice(),this._multiDrawStarts=n._multiDrawStarts.slice(),this._indirectTexture=n._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=n._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=n._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(n,u,f,y,S){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const A=y.getIndex(),w=A===null?1:A.array.BYTES_PER_ELEMENT,C=this._instanceInfo,T=this._multiDrawStarts,R=this._multiDrawCounts,I=this._geometryInfo,N=this.perObjectFrustumCulled,L=this._indirectTexture,F=L.image.data,H=f.isArrayCamera?_frustumArray:_frustum;N&&!f.isArrayCamera&&(_matrix$1.multiplyMatrices(f.projectionMatrix,f.matrixWorldInverse).multiply(this.matrixWorld),_frustum.setFromProjectionMatrix(_matrix$1,f.coordinateSystem,f.reversedDepth));let z=0;if(this.sortObjects){_matrix$1.copy(this.matrixWorld).invert(),_vector$5.setFromMatrixPosition(f.matrixWorld).applyMatrix4(_matrix$1),_forward$1.set(0,0,-1).transformDirection(f.matrixWorld).transformDirection(_matrix$1);for(let Y=0,K=C.length;Y<K;Y++)if(C[Y].visible&&C[Y].active){const Z=C[Y].geometryIndex;this.getMatrixAt(Y,_matrix$1),this.getBoundingSphereAt(Z,_sphere$2).applyMatrix4(_matrix$1);let J=!1;if(N&&(J=!H.intersectsSphere(_sphere$2,f)),!J){const te=I[Z],de=_temp.subVectors(_sphere$2.center,_vector$5).dot(_forward$1);_renderList.push(te.start,te.count,de,Y)}}const U=_renderList.list,G=this.customSort;G===null?U.sort(S.transparent?sortTransparent:sortOpaque):G.call(this,U,f);for(let Y=0,K=U.length;Y<K;Y++){const Z=U[Y];T[z]=Z.start*w,R[z]=Z.count,F[z]=Z.index,z++}_renderList.reset()}else for(let U=0,G=C.length;U<G;U++)if(C[U].visible&&C[U].active){const Y=C[U].geometryIndex;let K=!1;if(N&&(this.getMatrixAt(U,_matrix$1),this.getBoundingSphereAt(Y,_sphere$2).applyMatrix4(_matrix$1),K=!H.intersectsSphere(_sphere$2,f)),!K){const Z=I[Y];T[z]=Z.start*w,R[z]=Z.count,F[z]=U,z++}}L.needsUpdate=!0,this._multiDrawCount=z,this._visibilityChanged=!1}onBeforeShadow(n,u,f,y,S,A){this.onBeforeRender(n,null,y,S,A)}}class LineBasicMaterial extends Material{constructor(n){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Color(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(n)}copy(n){return super.copy(n),this.color.copy(n.color),this.map=n.map,this.linewidth=n.linewidth,this.linecap=n.linecap,this.linejoin=n.linejoin,this.fog=n.fog,this}}const _vStart=new Vector3,_vEnd=new Vector3,_inverseMatrix$1=new Matrix4,_ray$1=new Ray,_sphere$1=new Sphere,_intersectPointOnRay=new Vector3,_intersectPointOnSegment=new Vector3;class Line extends Object3D{constructor(n=new BufferGeometry,u=new LineBasicMaterial){super(),this.isLine=!0,this.type="Line",this.geometry=n,this.material=u,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(n,u){return super.copy(n,u),this.material=Array.isArray(n.material)?n.material.slice():n.material,this.geometry=n.geometry,this}computeLineDistances(){const n=this.geometry;if(n.index===null){const u=n.attributes.position,f=[0];for(let y=1,S=u.count;y<S;y++)_vStart.fromBufferAttribute(u,y-1),_vEnd.fromBufferAttribute(u,y),f[y]=f[y-1],f[y]+=_vStart.distanceTo(_vEnd);n.setAttribute("lineDistance",new Float32BufferAttribute(f,1))}else warn("Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(n,u){const f=this.geometry,y=this.matrixWorld,S=n.params.Line.threshold,A=f.drawRange;if(f.boundingSphere===null&&f.computeBoundingSphere(),_sphere$1.copy(f.boundingSphere),_sphere$1.applyMatrix4(y),_sphere$1.radius+=S,n.ray.intersectsSphere(_sphere$1)===!1)return;_inverseMatrix$1.copy(y).invert(),_ray$1.copy(n.ray).applyMatrix4(_inverseMatrix$1);const w=S/((this.scale.x+this.scale.y+this.scale.z)/3),C=w*w,T=this.isLineSegments?2:1,R=f.index,N=f.attributes.position;if(R!==null){const L=Math.max(0,A.start),F=Math.min(R.count,A.start+A.count);for(let H=L,z=F-1;H<z;H+=T){const U=R.getX(H),G=R.getX(H+1),Y=checkIntersection(this,n,_ray$1,C,U,G,H);Y&&u.push(Y)}if(this.isLineLoop){const H=R.getX(F-1),z=R.getX(L),U=checkIntersection(this,n,_ray$1,C,H,z,F-1);U&&u.push(U)}}else{const L=Math.max(0,A.start),F=Math.min(N.count,A.start+A.count);for(let H=L,z=F-1;H<z;H+=T){const U=checkIntersection(this,n,_ray$1,C,H,H+1,H);U&&u.push(U)}if(this.isLineLoop){const H=checkIntersection(this,n,_ray$1,C,F-1,L,F-1);H&&u.push(H)}}}updateMorphTargets(){const u=this.geometry.morphAttributes,f=Object.keys(u);if(f.length>0){const y=u[f[0]];if(y!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let S=0,A=y.length;S<A;S++){const w=y[S].name||String(S);this.morphTargetInfluences.push(0),this.morphTargetDictionary[w]=S}}}}}function checkIntersection(s,n,u,f,y,S,A){const w=s.geometry.attributes.position;if(_vStart.fromBufferAttribute(w,y),_vEnd.fromBufferAttribute(w,S),u.distanceSqToSegment(_vStart,_vEnd,_intersectPointOnRay,_intersectPointOnSegment)>f)return;_intersectPointOnRay.applyMatrix4(s.matrixWorld);const T=n.ray.origin.distanceTo(_intersectPointOnRay);if(!(T<n.near||T>n.far))return{distance:T,point:_intersectPointOnSegment.clone().applyMatrix4(s.matrixWorld),index:A,face:null,faceIndex:null,barycoord:null,object:s}}const _start=new Vector3,_end=new Vector3;class LineSegments extends Line{constructor(n,u){super(n,u),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const n=this.geometry;if(n.index===null){const u=n.attributes.position,f=[];for(let y=0,S=u.count;y<S;y+=2)_start.fromBufferAttribute(u,y),_end.fromBufferAttribute(u,y+1),f[y]=y===0?0:f[y-1],f[y+1]=f[y]+_start.distanceTo(_end);n.setAttribute("lineDistance",new Float32BufferAttribute(f,1))}else warn("LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class LineLoop extends Line{constructor(n,u){super(n,u),this.isLineLoop=!0,this.type="LineLoop"}}class PointsMaterial extends Material{constructor(n){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Color(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(n)}copy(n){return super.copy(n),this.color.copy(n.color),this.map=n.map,this.alphaMap=n.alphaMap,this.size=n.size,this.sizeAttenuation=n.sizeAttenuation,this.fog=n.fog,this}}const _inverseMatrix=new Matrix4,_ray=new Ray,_sphere=new Sphere,_position$2=new Vector3;class Points extends Object3D{constructor(n=new BufferGeometry,u=new PointsMaterial){super(),this.isPoints=!0,this.type="Points",this.geometry=n,this.material=u,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(n,u){return super.copy(n,u),this.material=Array.isArray(n.material)?n.material.slice():n.material,this.geometry=n.geometry,this}raycast(n,u){const f=this.geometry,y=this.matrixWorld,S=n.params.Points.threshold,A=f.drawRange;if(f.boundingSphere===null&&f.computeBoundingSphere(),_sphere.copy(f.boundingSphere),_sphere.applyMatrix4(y),_sphere.radius+=S,n.ray.intersectsSphere(_sphere)===!1)return;_inverseMatrix.copy(y).invert(),_ray.copy(n.ray).applyMatrix4(_inverseMatrix);const w=S/((this.scale.x+this.scale.y+this.scale.z)/3),C=w*w,T=f.index,I=f.attributes.position;if(T!==null){const N=Math.max(0,A.start),L=Math.min(T.count,A.start+A.count);for(let F=N,H=L;F<H;F++){const z=T.getX(F);_position$2.fromBufferAttribute(I,z),testPoint(_position$2,z,C,y,n,u,this)}}else{const N=Math.max(0,A.start),L=Math.min(I.count,A.start+A.count);for(let F=N,H=L;F<H;F++)_position$2.fromBufferAttribute(I,F),testPoint(_position$2,F,C,y,n,u,this)}}updateMorphTargets(){const u=this.geometry.morphAttributes,f=Object.keys(u);if(f.length>0){const y=u[f[0]];if(y!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let S=0,A=y.length;S<A;S++){const w=y[S].name||String(S);this.morphTargetInfluences.push(0),this.morphTargetDictionary[w]=S}}}}}function testPoint(s,n,u,f,y,S,A){const w=_ray.distanceSqToPoint(s);if(w<u){const C=new Vector3;_ray.closestPointToPoint(s,C),C.applyMatrix4(f);const T=y.ray.origin.distanceTo(C);if(T<y.near||T>y.far)return;S.push({distance:T,distanceToRay:Math.sqrt(w),point:C,index:n,face:null,faceIndex:null,barycoord:null,object:A})}}class VideoTexture extends Texture{constructor(n,u,f,y,S=LinearFilter,A=LinearFilter,w,C,T){super(n,u,f,y,S,A,w,C,T),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;const R=this;function I(){R.needsUpdate=!0,R._requestVideoFrameCallbackId=n.requestVideoFrameCallback(I)}"requestVideoFrameCallback"in n&&(this._requestVideoFrameCallbackId=n.requestVideoFrameCallback(I))}clone(){return new this.constructor(this.image).copy(this)}update(){const n=this.image;"requestVideoFrameCallback"in n===!1&&n.readyState>=n.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}dispose(){this._requestVideoFrameCallbackId!==0&&(this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),this._requestVideoFrameCallbackId=0),super.dispose()}}class VideoFrameTexture extends VideoTexture{constructor(n,u,f,y,S,A,w,C){super({},n,u,f,y,S,A,w,C),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(n){this.image=n,this.needsUpdate=!0}}class FramebufferTexture extends Texture{constructor(n,u){super({width:n,height:u}),this.isFramebufferTexture=!0,this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.generateMipmaps=!1,this.needsUpdate=!0}}class CompressedTexture extends Texture{constructor(n,u,f,y,S,A,w,C,T,R,I,N){super(null,A,w,C,T,R,y,S,I,N),this.isCompressedTexture=!0,this.image={width:u,height:f},this.mipmaps=n,this.flipY=!1,this.generateMipmaps=!1}}class CompressedArrayTexture extends CompressedTexture{constructor(n,u,f,y,S,A){super(n,u,f,S,A),this.isCompressedArrayTexture=!0,this.image.depth=y,this.wrapR=ClampToEdgeWrapping,this.layerUpdates=new Set}addLayerUpdate(n){this.layerUpdates.add(n)}clearLayerUpdates(){this.layerUpdates.clear()}}class CompressedCubeTexture extends CompressedTexture{constructor(n,u,f){super(void 0,n[0].width,n[0].height,u,f,CubeReflectionMapping),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=n}}class CanvasTexture extends Texture{constructor(n,u,f,y,S,A,w,C,T){super(n,u,f,y,S,A,w,C,T),this.isCanvasTexture=!0,this.needsUpdate=!0}}class DepthTexture extends Texture{constructor(n,u,f=UnsignedIntType,y,S,A,w=NearestFilter,C=NearestFilter,T,R=DepthFormat,I=1){if(R!==DepthFormat&&R!==DepthStencilFormat)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const N={width:n,height:u,depth:I};super(N,y,S,A,w,C,R,f,T),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(n){return super.copy(n),this.source=new Source(Object.assign({},n.image)),this.compareFunction=n.compareFunction,this}toJSON(n){const u=super.toJSON(n);return this.compareFunction!==null&&(u.compareFunction=this.compareFunction),u}}class CubeDepthTexture extends DepthTexture{constructor(n,u=UnsignedIntType,f=CubeReflectionMapping,y,S,A=NearestFilter,w=NearestFilter,C,T=DepthFormat){const R={width:n,height:n,depth:1},I=[R,R,R,R,R,R];super(n,n,u,f,y,S,A,w,C,T),this.image=I,this.isCubeDepthTexture=!0,this.isCubeTexture=!0}get images(){return this.image}set images(n){this.image=n}}class ExternalTexture extends Texture{constructor(n=null){super(),this.sourceTexture=n,this.isExternalTexture=!0}copy(n){return super.copy(n),this.sourceTexture=n.sourceTexture,this}}class CapsuleGeometry extends BufferGeometry{constructor(n=1,u=1,f=4,y=8,S=1){super(),this.type="CapsuleGeometry",this.parameters={radius:n,height:u,capSegments:f,radialSegments:y,heightSegments:S},u=Math.max(0,u),f=Math.max(1,Math.floor(f)),y=Math.max(3,Math.floor(y)),S=Math.max(1,Math.floor(S));const A=[],w=[],C=[],T=[],R=u/2,I=Math.PI/2*n,N=u,L=2*I+N,F=f*2+S,H=y+1,z=new Vector3,U=new Vector3;for(let G=0;G<=F;G++){let Y=0,K=0,Z=0,J=0;if(G<=f){const se=G/f,ne=se*Math.PI/2;K=-R-n*Math.cos(ne),Z=n*Math.sin(ne),J=-n*Math.cos(ne),Y=se*I}else if(G<=f+S){const se=(G-f)/S;K=-R+se*u,Z=n,J=0,Y=I+se*N}else{const se=(G-f-S)/f,ne=se*Math.PI/2;K=R+n*Math.sin(ne),Z=n*Math.cos(ne),J=n*Math.sin(ne),Y=I+N+se*I}const te=Math.max(0,Math.min(1,Y/L));let de=0;G===0?de=.5/y:G===F&&(de=-.5/y);for(let se=0;se<=y;se++){const ne=se/y,ge=ne*Math.PI*2,Ee=Math.sin(ge),we=Math.cos(ge);U.x=-Z*we,U.y=K,U.z=Z*Ee,w.push(U.x,U.y,U.z),z.set(-Z*we,J,Z*Ee),z.normalize(),C.push(z.x,z.y,z.z),T.push(ne+de,te)}if(G>0){const se=(G-1)*H;for(let ne=0;ne<y;ne++){const ge=se+ne,Ee=se+ne+1,we=G*H+ne,Ie=G*H+ne+1;A.push(ge,Ee,we),A.push(Ee,Ie,we)}}}this.setIndex(A),this.setAttribute("position",new Float32BufferAttribute(w,3)),this.setAttribute("normal",new Float32BufferAttribute(C,3)),this.setAttribute("uv",new Float32BufferAttribute(T,2))}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}static fromJSON(n){return new CapsuleGeometry(n.radius,n.height,n.capSegments,n.radialSegments,n.heightSegments)}}class CircleGeometry extends BufferGeometry{constructor(n=1,u=32,f=0,y=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:n,segments:u,thetaStart:f,thetaLength:y},u=Math.max(3,u);const S=[],A=[],w=[],C=[],T=new Vector3,R=new Vector2;A.push(0,0,0),w.push(0,0,1),C.push(.5,.5);for(let I=0,N=3;I<=u;I++,N+=3){const L=f+I/u*y;T.x=n*Math.cos(L),T.y=n*Math.sin(L),A.push(T.x,T.y,T.z),w.push(0,0,1),R.x=(A[N]/n+1)/2,R.y=(A[N+1]/n+1)/2,C.push(R.x,R.y)}for(let I=1;I<=u;I++)S.push(I,I+1,0);this.setIndex(S),this.setAttribute("position",new Float32BufferAttribute(A,3)),this.setAttribute("normal",new Float32BufferAttribute(w,3)),this.setAttribute("uv",new Float32BufferAttribute(C,2))}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}static fromJSON(n){return new CircleGeometry(n.radius,n.segments,n.thetaStart,n.thetaLength)}}class CylinderGeometry extends BufferGeometry{constructor(n=1,u=1,f=1,y=32,S=1,A=!1,w=0,C=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:n,radiusBottom:u,height:f,radialSegments:y,heightSegments:S,openEnded:A,thetaStart:w,thetaLength:C};const T=this;y=Math.floor(y),S=Math.floor(S);const R=[],I=[],N=[],L=[];let F=0;const H=[],z=f/2;let U=0;G(),A===!1&&(n>0&&Y(!0),u>0&&Y(!1)),this.setIndex(R),this.setAttribute("position",new Float32BufferAttribute(I,3)),this.setAttribute("normal",new Float32BufferAttribute(N,3)),this.setAttribute("uv",new Float32BufferAttribute(L,2));function G(){const K=new Vector3,Z=new Vector3;let J=0;const te=(u-n)/f;for(let de=0;de<=S;de++){const se=[],ne=de/S,ge=ne*(u-n)+n;for(let Ee=0;Ee<=y;Ee++){const we=Ee/y,Ie=we*C+w,Be=Math.sin(Ie),Me=Math.cos(Ie);Z.x=ge*Be,Z.y=-ne*f+z,Z.z=ge*Me,I.push(Z.x,Z.y,Z.z),K.set(Be,te,Me).normalize(),N.push(K.x,K.y,K.z),L.push(we,1-ne),se.push(F++)}H.push(se)}for(let de=0;de<y;de++)for(let se=0;se<S;se++){const ne=H[se][de],ge=H[se+1][de],Ee=H[se+1][de+1],we=H[se][de+1];(n>0||se!==0)&&(R.push(ne,ge,we),J+=3),(u>0||se!==S-1)&&(R.push(ge,Ee,we),J+=3)}T.addGroup(U,J,0),U+=J}function Y(K){const Z=F,J=new Vector2,te=new Vector3;let de=0;const se=K===!0?n:u,ne=K===!0?1:-1;for(let Ee=1;Ee<=y;Ee++)I.push(0,z*ne,0),N.push(0,ne,0),L.push(.5,.5),F++;const ge=F;for(let Ee=0;Ee<=y;Ee++){const Ie=Ee/y*C+w,Be=Math.cos(Ie),Me=Math.sin(Ie);te.x=se*Me,te.y=z*ne,te.z=se*Be,I.push(te.x,te.y,te.z),N.push(0,ne,0),J.x=Be*.5+.5,J.y=Me*.5*ne+.5,L.push(J.x,J.y),F++}for(let Ee=0;Ee<y;Ee++){const we=Z+Ee,Ie=ge+Ee;K===!0?R.push(Ie,Ie+1,we):R.push(Ie+1,Ie,we),de+=3}T.addGroup(U,de,K===!0?1:2),U+=de}}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}static fromJSON(n){return new CylinderGeometry(n.radiusTop,n.radiusBottom,n.height,n.radialSegments,n.heightSegments,n.openEnded,n.thetaStart,n.thetaLength)}}class ConeGeometry extends CylinderGeometry{constructor(n=1,u=1,f=32,y=1,S=!1,A=0,w=Math.PI*2){super(0,n,u,f,y,S,A,w),this.type="ConeGeometry",this.parameters={radius:n,height:u,radialSegments:f,heightSegments:y,openEnded:S,thetaStart:A,thetaLength:w}}static fromJSON(n){return new ConeGeometry(n.radius,n.height,n.radialSegments,n.heightSegments,n.openEnded,n.thetaStart,n.thetaLength)}}class PolyhedronGeometry extends BufferGeometry{constructor(n=[],u=[],f=1,y=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:n,indices:u,radius:f,detail:y};const S=[],A=[];w(y),T(f),R(),this.setAttribute("position",new Float32BufferAttribute(S,3)),this.setAttribute("normal",new Float32BufferAttribute(S.slice(),3)),this.setAttribute("uv",new Float32BufferAttribute(A,2)),y===0?this.computeVertexNormals():this.normalizeNormals();function w(G){const Y=new Vector3,K=new Vector3,Z=new Vector3;for(let J=0;J<u.length;J+=3)L(u[J+0],Y),L(u[J+1],K),L(u[J+2],Z),C(Y,K,Z,G)}function C(G,Y,K,Z){const J=Z+1,te=[];for(let de=0;de<=J;de++){te[de]=[];const se=G.clone().lerp(K,de/J),ne=Y.clone().lerp(K,de/J),ge=J-de;for(let Ee=0;Ee<=ge;Ee++)Ee===0&&de===J?te[de][Ee]=se:te[de][Ee]=se.clone().lerp(ne,Ee/ge)}for(let de=0;de<J;de++)for(let se=0;se<2*(J-de)-1;se++){const ne=Math.floor(se/2);se%2===0?(N(te[de][ne+1]),N(te[de+1][ne]),N(te[de][ne])):(N(te[de][ne+1]),N(te[de+1][ne+1]),N(te[de+1][ne]))}}function T(G){const Y=new Vector3;for(let K=0;K<S.length;K+=3)Y.x=S[K+0],Y.y=S[K+1],Y.z=S[K+2],Y.normalize().multiplyScalar(G),S[K+0]=Y.x,S[K+1]=Y.y,S[K+2]=Y.z}function R(){const G=new Vector3;for(let Y=0;Y<S.length;Y+=3){G.x=S[Y+0],G.y=S[Y+1],G.z=S[Y+2];const K=z(G)/2/Math.PI+.5,Z=U(G)/Math.PI+.5;A.push(K,1-Z)}F(),I()}function I(){for(let G=0;G<A.length;G+=6){const Y=A[G+0],K=A[G+2],Z=A[G+4],J=Math.max(Y,K,Z),te=Math.min(Y,K,Z);J>.9&&te<.1&&(Y<.2&&(A[G+0]+=1),K<.2&&(A[G+2]+=1),Z<.2&&(A[G+4]+=1))}}function N(G){S.push(G.x,G.y,G.z)}function L(G,Y){const K=G*3;Y.x=n[K+0],Y.y=n[K+1],Y.z=n[K+2]}function F(){const G=new Vector3,Y=new Vector3,K=new Vector3,Z=new Vector3,J=new Vector2,te=new Vector2,de=new Vector2;for(let se=0,ne=0;se<S.length;se+=9,ne+=6){G.set(S[se+0],S[se+1],S[se+2]),Y.set(S[se+3],S[se+4],S[se+5]),K.set(S[se+6],S[se+7],S[se+8]),J.set(A[ne+0],A[ne+1]),te.set(A[ne+2],A[ne+3]),de.set(A[ne+4],A[ne+5]),Z.copy(G).add(Y).add(K).divideScalar(3);const ge=z(Z);H(J,ne+0,G,ge),H(te,ne+2,Y,ge),H(de,ne+4,K,ge)}}function H(G,Y,K,Z){Z<0&&G.x===1&&(A[Y]=G.x-1),K.x===0&&K.z===0&&(A[Y]=Z/2/Math.PI+.5)}function z(G){return Math.atan2(G.z,-G.x)}function U(G){return Math.atan2(-G.y,Math.sqrt(G.x*G.x+G.z*G.z))}}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}static fromJSON(n){return new PolyhedronGeometry(n.vertices,n.indices,n.radius,n.detail)}}class DodecahedronGeometry extends PolyhedronGeometry{constructor(n=1,u=0){const f=(1+Math.sqrt(5))/2,y=1/f,S=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-y,-f,0,-y,f,0,y,-f,0,y,f,-y,-f,0,-y,f,0,y,-f,0,y,f,0,-f,0,-y,f,0,-y,-f,0,y,f,0,y],A=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(S,A,n,u),this.type="DodecahedronGeometry",this.parameters={radius:n,detail:u}}static fromJSON(n){return new DodecahedronGeometry(n.radius,n.detail)}}const _v0$3=new Vector3,_v1$1=new Vector3,_normal=new Vector3,_triangle=new Triangle;class EdgesGeometry extends BufferGeometry{constructor(n=null,u=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:n,thresholdAngle:u},n!==null){const y=Math.pow(10,4),S=Math.cos(DEG2RAD*u),A=n.getIndex(),w=n.getAttribute("position"),C=A?A.count:w.count,T=[0,0,0],R=["a","b","c"],I=new Array(3),N={},L=[];for(let F=0;F<C;F+=3){A?(T[0]=A.getX(F),T[1]=A.getX(F+1),T[2]=A.getX(F+2)):(T[0]=F,T[1]=F+1,T[2]=F+2);const{a:H,b:z,c:U}=_triangle;if(H.fromBufferAttribute(w,T[0]),z.fromBufferAttribute(w,T[1]),U.fromBufferAttribute(w,T[2]),_triangle.getNormal(_normal),I[0]=`${Math.round(H.x*y)},${Math.round(H.y*y)},${Math.round(H.z*y)}`,I[1]=`${Math.round(z.x*y)},${Math.round(z.y*y)},${Math.round(z.z*y)}`,I[2]=`${Math.round(U.x*y)},${Math.round(U.y*y)},${Math.round(U.z*y)}`,!(I[0]===I[1]||I[1]===I[2]||I[2]===I[0]))for(let G=0;G<3;G++){const Y=(G+1)%3,K=I[G],Z=I[Y],J=_triangle[R[G]],te=_triangle[R[Y]],de=`${K}_${Z}`,se=`${Z}_${K}`;se in N&&N[se]?(_normal.dot(N[se].normal)<=S&&(L.push(J.x,J.y,J.z),L.push(te.x,te.y,te.z)),N[se]=null):de in N||(N[de]={index0:T[G],index1:T[Y],normal:_normal.clone()})}}for(const F in N)if(N[F]){const{index0:H,index1:z}=N[F];_v0$3.fromBufferAttribute(w,H),_v1$1.fromBufferAttribute(w,z),L.push(_v0$3.x,_v0$3.y,_v0$3.z),L.push(_v1$1.x,_v1$1.y,_v1$1.z)}this.setAttribute("position",new Float32BufferAttribute(L,3))}}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}}class Curve{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){warn("Curve: .getPoint() not implemented.")}getPointAt(n,u){const f=this.getUtoTmapping(n);return this.getPoint(f,u)}getPoints(n=5){const u=[];for(let f=0;f<=n;f++)u.push(this.getPoint(f/n));return u}getSpacedPoints(n=5){const u=[];for(let f=0;f<=n;f++)u.push(this.getPointAt(f/n));return u}getLength(){const n=this.getLengths();return n[n.length-1]}getLengths(n=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===n+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const u=[];let f,y=this.getPoint(0),S=0;u.push(0);for(let A=1;A<=n;A++)f=this.getPoint(A/n),S+=f.distanceTo(y),u.push(S),y=f;return this.cacheArcLengths=u,u}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(n,u=null){const f=this.getLengths();let y=0;const S=f.length;let A;u?A=u:A=n*f[S-1];let w=0,C=S-1,T;for(;w<=C;)if(y=Math.floor(w+(C-w)/2),T=f[y]-A,T<0)w=y+1;else if(T>0)C=y-1;else{C=y;break}if(y=C,f[y]===A)return y/(S-1);const R=f[y],N=f[y+1]-R,L=(A-R)/N;return(y+L)/(S-1)}getTangent(n,u){let y=n-1e-4,S=n+1e-4;y<0&&(y=0),S>1&&(S=1);const A=this.getPoint(y),w=this.getPoint(S),C=u||(A.isVector2?new Vector2:new Vector3);return C.copy(w).sub(A).normalize(),C}getTangentAt(n,u){const f=this.getUtoTmapping(n);return this.getTangent(f,u)}computeFrenetFrames(n,u=!1){const f=new Vector3,y=[],S=[],A=[],w=new Vector3,C=new Matrix4;for(let L=0;L<=n;L++){const F=L/n;y[L]=this.getTangentAt(F,new Vector3)}S[0]=new Vector3,A[0]=new Vector3;let T=Number.MAX_VALUE;const R=Math.abs(y[0].x),I=Math.abs(y[0].y),N=Math.abs(y[0].z);R<=T&&(T=R,f.set(1,0,0)),I<=T&&(T=I,f.set(0,1,0)),N<=T&&f.set(0,0,1),w.crossVectors(y[0],f).normalize(),S[0].crossVectors(y[0],w),A[0].crossVectors(y[0],S[0]);for(let L=1;L<=n;L++){if(S[L]=S[L-1].clone(),A[L]=A[L-1].clone(),w.crossVectors(y[L-1],y[L]),w.length()>Number.EPSILON){w.normalize();const F=Math.acos(clamp(y[L-1].dot(y[L]),-1,1));S[L].applyMatrix4(C.makeRotationAxis(w,F))}A[L].crossVectors(y[L],S[L])}if(u===!0){let L=Math.acos(clamp(S[0].dot(S[n]),-1,1));L/=n,y[0].dot(w.crossVectors(S[0],S[n]))>0&&(L=-L);for(let F=1;F<=n;F++)S[F].applyMatrix4(C.makeRotationAxis(y[F],L*F)),A[F].crossVectors(y[F],S[F])}return{tangents:y,normals:S,binormals:A}}clone(){return new this.constructor().copy(this)}copy(n){return this.arcLengthDivisions=n.arcLengthDivisions,this}toJSON(){const n={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return n.arcLengthDivisions=this.arcLengthDivisions,n.type=this.type,n}fromJSON(n){return this.arcLengthDivisions=n.arcLengthDivisions,this}}class EllipseCurve extends Curve{constructor(n=0,u=0,f=1,y=1,S=0,A=Math.PI*2,w=!1,C=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=n,this.aY=u,this.xRadius=f,this.yRadius=y,this.aStartAngle=S,this.aEndAngle=A,this.aClockwise=w,this.aRotation=C}getPoint(n,u=new Vector2){const f=u,y=Math.PI*2;let S=this.aEndAngle-this.aStartAngle;const A=Math.abs(S)<Number.EPSILON;for(;S<0;)S+=y;for(;S>y;)S-=y;S<Number.EPSILON&&(A?S=0:S=y),this.aClockwise===!0&&!A&&(S===y?S=-y:S=S-y);const w=this.aStartAngle+n*S;let C=this.aX+this.xRadius*Math.cos(w),T=this.aY+this.yRadius*Math.sin(w);if(this.aRotation!==0){const R=Math.cos(this.aRotation),I=Math.sin(this.aRotation),N=C-this.aX,L=T-this.aY;C=N*R-L*I+this.aX,T=N*I+L*R+this.aY}return f.set(C,T)}copy(n){return super.copy(n),this.aX=n.aX,this.aY=n.aY,this.xRadius=n.xRadius,this.yRadius=n.yRadius,this.aStartAngle=n.aStartAngle,this.aEndAngle=n.aEndAngle,this.aClockwise=n.aClockwise,this.aRotation=n.aRotation,this}toJSON(){const n=super.toJSON();return n.aX=this.aX,n.aY=this.aY,n.xRadius=this.xRadius,n.yRadius=this.yRadius,n.aStartAngle=this.aStartAngle,n.aEndAngle=this.aEndAngle,n.aClockwise=this.aClockwise,n.aRotation=this.aRotation,n}fromJSON(n){return super.fromJSON(n),this.aX=n.aX,this.aY=n.aY,this.xRadius=n.xRadius,this.yRadius=n.yRadius,this.aStartAngle=n.aStartAngle,this.aEndAngle=n.aEndAngle,this.aClockwise=n.aClockwise,this.aRotation=n.aRotation,this}}class ArcCurve extends EllipseCurve{constructor(n,u,f,y,S,A){super(n,u,f,f,y,S,A),this.isArcCurve=!0,this.type="ArcCurve"}}function CubicPoly(){let s=0,n=0,u=0,f=0;function y(S,A,w,C){s=S,n=w,u=-3*S+3*A-2*w-C,f=2*S-2*A+w+C}return{initCatmullRom:function(S,A,w,C,T){y(A,w,T*(w-S),T*(C-A))},initNonuniformCatmullRom:function(S,A,w,C,T,R,I){let N=(A-S)/T-(w-S)/(T+R)+(w-A)/R,L=(w-A)/R-(C-A)/(R+I)+(C-w)/I;N*=R,L*=R,y(A,w,N,L)},calc:function(S){const A=S*S,w=A*S;return s+n*S+u*A+f*w}}}const tmp=new Vector3,px=new CubicPoly,py=new CubicPoly,pz=new CubicPoly;class CatmullRomCurve3 extends Curve{constructor(n=[],u=!1,f="centripetal",y=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=n,this.closed=u,this.curveType=f,this.tension=y}getPoint(n,u=new Vector3){const f=u,y=this.points,S=y.length,A=(S-(this.closed?0:1))*n;let w=Math.floor(A),C=A-w;this.closed?w+=w>0?0:(Math.floor(Math.abs(w)/S)+1)*S:C===0&&w===S-1&&(w=S-2,C=1);let T,R;this.closed||w>0?T=y[(w-1)%S]:(tmp.subVectors(y[0],y[1]).add(y[0]),T=tmp);const I=y[w%S],N=y[(w+1)%S];if(this.closed||w+2<S?R=y[(w+2)%S]:(tmp.subVectors(y[S-1],y[S-2]).add(y[S-1]),R=tmp),this.curveType==="centripetal"||this.curveType==="chordal"){const L=this.curveType==="chordal"?.5:.25;let F=Math.pow(T.distanceToSquared(I),L),H=Math.pow(I.distanceToSquared(N),L),z=Math.pow(N.distanceToSquared(R),L);H<1e-4&&(H=1),F<1e-4&&(F=H),z<1e-4&&(z=H),px.initNonuniformCatmullRom(T.x,I.x,N.x,R.x,F,H,z),py.initNonuniformCatmullRom(T.y,I.y,N.y,R.y,F,H,z),pz.initNonuniformCatmullRom(T.z,I.z,N.z,R.z,F,H,z)}else this.curveType==="catmullrom"&&(px.initCatmullRom(T.x,I.x,N.x,R.x,this.tension),py.initCatmullRom(T.y,I.y,N.y,R.y,this.tension),pz.initCatmullRom(T.z,I.z,N.z,R.z,this.tension));return f.set(px.calc(C),py.calc(C),pz.calc(C)),f}copy(n){super.copy(n),this.points=[];for(let u=0,f=n.points.length;u<f;u++){const y=n.points[u];this.points.push(y.clone())}return this.closed=n.closed,this.curveType=n.curveType,this.tension=n.tension,this}toJSON(){const n=super.toJSON();n.points=[];for(let u=0,f=this.points.length;u<f;u++){const y=this.points[u];n.points.push(y.toArray())}return n.closed=this.closed,n.curveType=this.curveType,n.tension=this.tension,n}fromJSON(n){super.fromJSON(n),this.points=[];for(let u=0,f=n.points.length;u<f;u++){const y=n.points[u];this.points.push(new Vector3().fromArray(y))}return this.closed=n.closed,this.curveType=n.curveType,this.tension=n.tension,this}}function CatmullRom(s,n,u,f,y){const S=(f-n)*.5,A=(y-u)*.5,w=s*s,C=s*w;return(2*u-2*f+S+A)*C+(-3*u+3*f-2*S-A)*w+S*s+u}function QuadraticBezierP0(s,n){const u=1-s;return u*u*n}function QuadraticBezierP1(s,n){return 2*(1-s)*s*n}function QuadraticBezierP2(s,n){return s*s*n}function QuadraticBezier(s,n,u,f){return QuadraticBezierP0(s,n)+QuadraticBezierP1(s,u)+QuadraticBezierP2(s,f)}function CubicBezierP0(s,n){const u=1-s;return u*u*u*n}function CubicBezierP1(s,n){const u=1-s;return 3*u*u*s*n}function CubicBezierP2(s,n){return 3*(1-s)*s*s*n}function CubicBezierP3(s,n){return s*s*s*n}function CubicBezier(s,n,u,f,y){return CubicBezierP0(s,n)+CubicBezierP1(s,u)+CubicBezierP2(s,f)+CubicBezierP3(s,y)}class CubicBezierCurve extends Curve{constructor(n=new Vector2,u=new Vector2,f=new Vector2,y=new Vector2){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=n,this.v1=u,this.v2=f,this.v3=y}getPoint(n,u=new Vector2){const f=u,y=this.v0,S=this.v1,A=this.v2,w=this.v3;return f.set(CubicBezier(n,y.x,S.x,A.x,w.x),CubicBezier(n,y.y,S.y,A.y,w.y)),f}copy(n){return super.copy(n),this.v0.copy(n.v0),this.v1.copy(n.v1),this.v2.copy(n.v2),this.v3.copy(n.v3),this}toJSON(){const n=super.toJSON();return n.v0=this.v0.toArray(),n.v1=this.v1.toArray(),n.v2=this.v2.toArray(),n.v3=this.v3.toArray(),n}fromJSON(n){return super.fromJSON(n),this.v0.fromArray(n.v0),this.v1.fromArray(n.v1),this.v2.fromArray(n.v2),this.v3.fromArray(n.v3),this}}class CubicBezierCurve3 extends Curve{constructor(n=new Vector3,u=new Vector3,f=new Vector3,y=new Vector3){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=n,this.v1=u,this.v2=f,this.v3=y}getPoint(n,u=new Vector3){const f=u,y=this.v0,S=this.v1,A=this.v2,w=this.v3;return f.set(CubicBezier(n,y.x,S.x,A.x,w.x),CubicBezier(n,y.y,S.y,A.y,w.y),CubicBezier(n,y.z,S.z,A.z,w.z)),f}copy(n){return super.copy(n),this.v0.copy(n.v0),this.v1.copy(n.v1),this.v2.copy(n.v2),this.v3.copy(n.v3),this}toJSON(){const n=super.toJSON();return n.v0=this.v0.toArray(),n.v1=this.v1.toArray(),n.v2=this.v2.toArray(),n.v3=this.v3.toArray(),n}fromJSON(n){return super.fromJSON(n),this.v0.fromArray(n.v0),this.v1.fromArray(n.v1),this.v2.fromArray(n.v2),this.v3.fromArray(n.v3),this}}class LineCurve extends Curve{constructor(n=new Vector2,u=new Vector2){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=n,this.v2=u}getPoint(n,u=new Vector2){const f=u;return n===1?f.copy(this.v2):(f.copy(this.v2).sub(this.v1),f.multiplyScalar(n).add(this.v1)),f}getPointAt(n,u){return this.getPoint(n,u)}getTangent(n,u=new Vector2){return u.subVectors(this.v2,this.v1).normalize()}getTangentAt(n,u){return this.getTangent(n,u)}copy(n){return super.copy(n),this.v1.copy(n.v1),this.v2.copy(n.v2),this}toJSON(){const n=super.toJSON();return n.v1=this.v1.toArray(),n.v2=this.v2.toArray(),n}fromJSON(n){return super.fromJSON(n),this.v1.fromArray(n.v1),this.v2.fromArray(n.v2),this}}class LineCurve3 extends Curve{constructor(n=new Vector3,u=new Vector3){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=n,this.v2=u}getPoint(n,u=new Vector3){const f=u;return n===1?f.copy(this.v2):(f.copy(this.v2).sub(this.v1),f.multiplyScalar(n).add(this.v1)),f}getPointAt(n,u){return this.getPoint(n,u)}getTangent(n,u=new Vector3){return u.subVectors(this.v2,this.v1).normalize()}getTangentAt(n,u){return this.getTangent(n,u)}copy(n){return super.copy(n),this.v1.copy(n.v1),this.v2.copy(n.v2),this}toJSON(){const n=super.toJSON();return n.v1=this.v1.toArray(),n.v2=this.v2.toArray(),n}fromJSON(n){return super.fromJSON(n),this.v1.fromArray(n.v1),this.v2.fromArray(n.v2),this}}class QuadraticBezierCurve extends Curve{constructor(n=new Vector2,u=new Vector2,f=new Vector2){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=n,this.v1=u,this.v2=f}getPoint(n,u=new Vector2){const f=u,y=this.v0,S=this.v1,A=this.v2;return f.set(QuadraticBezier(n,y.x,S.x,A.x),QuadraticBezier(n,y.y,S.y,A.y)),f}copy(n){return super.copy(n),this.v0.copy(n.v0),this.v1.copy(n.v1),this.v2.copy(n.v2),this}toJSON(){const n=super.toJSON();return n.v0=this.v0.toArray(),n.v1=this.v1.toArray(),n.v2=this.v2.toArray(),n}fromJSON(n){return super.fromJSON(n),this.v0.fromArray(n.v0),this.v1.fromArray(n.v1),this.v2.fromArray(n.v2),this}}class QuadraticBezierCurve3 extends Curve{constructor(n=new Vector3,u=new Vector3,f=new Vector3){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=n,this.v1=u,this.v2=f}getPoint(n,u=new Vector3){const f=u,y=this.v0,S=this.v1,A=this.v2;return f.set(QuadraticBezier(n,y.x,S.x,A.x),QuadraticBezier(n,y.y,S.y,A.y),QuadraticBezier(n,y.z,S.z,A.z)),f}copy(n){return super.copy(n),this.v0.copy(n.v0),this.v1.copy(n.v1),this.v2.copy(n.v2),this}toJSON(){const n=super.toJSON();return n.v0=this.v0.toArray(),n.v1=this.v1.toArray(),n.v2=this.v2.toArray(),n}fromJSON(n){return super.fromJSON(n),this.v0.fromArray(n.v0),this.v1.fromArray(n.v1),this.v2.fromArray(n.v2),this}}class SplineCurve extends Curve{constructor(n=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=n}getPoint(n,u=new Vector2){const f=u,y=this.points,S=(y.length-1)*n,A=Math.floor(S),w=S-A,C=y[A===0?A:A-1],T=y[A],R=y[A>y.length-2?y.length-1:A+1],I=y[A>y.length-3?y.length-1:A+2];return f.set(CatmullRom(w,C.x,T.x,R.x,I.x),CatmullRom(w,C.y,T.y,R.y,I.y)),f}copy(n){super.copy(n),this.points=[];for(let u=0,f=n.points.length;u<f;u++){const y=n.points[u];this.points.push(y.clone())}return this}toJSON(){const n=super.toJSON();n.points=[];for(let u=0,f=this.points.length;u<f;u++){const y=this.points[u];n.points.push(y.toArray())}return n}fromJSON(n){super.fromJSON(n),this.points=[];for(let u=0,f=n.points.length;u<f;u++){const y=n.points[u];this.points.push(new Vector2().fromArray(y))}return this}}var Curves=Object.freeze({__proto__:null,ArcCurve,CatmullRomCurve3,CubicBezierCurve,CubicBezierCurve3,EllipseCurve,LineCurve,LineCurve3,QuadraticBezierCurve,QuadraticBezierCurve3,SplineCurve});class CurvePath extends Curve{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(n){this.curves.push(n)}closePath(){const n=this.curves[0].getPoint(0),u=this.curves[this.curves.length-1].getPoint(1);if(!n.equals(u)){const f=n.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new Curves[f](u,n))}return this}getPoint(n,u){const f=n*this.getLength(),y=this.getCurveLengths();let S=0;for(;S<y.length;){if(y[S]>=f){const A=y[S]-f,w=this.curves[S],C=w.getLength(),T=C===0?0:1-A/C;return w.getPointAt(T,u)}S++}return null}getLength(){const n=this.getCurveLengths();return n[n.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const n=[];let u=0;for(let f=0,y=this.curves.length;f<y;f++)u+=this.curves[f].getLength(),n.push(u);return this.cacheLengths=n,n}getSpacedPoints(n=40){const u=[];for(let f=0;f<=n;f++)u.push(this.getPoint(f/n));return this.autoClose&&u.push(u[0]),u}getPoints(n=12){const u=[];let f;for(let y=0,S=this.curves;y<S.length;y++){const A=S[y],w=A.isEllipseCurve?n*2:A.isLineCurve||A.isLineCurve3?1:A.isSplineCurve?n*A.points.length:n,C=A.getPoints(w);for(let T=0;T<C.length;T++){const R=C[T];f&&f.equals(R)||(u.push(R),f=R)}}return this.autoClose&&u.length>1&&!u[u.length-1].equals(u[0])&&u.push(u[0]),u}copy(n){super.copy(n),this.curves=[];for(let u=0,f=n.curves.length;u<f;u++){const y=n.curves[u];this.curves.push(y.clone())}return this.autoClose=n.autoClose,this}toJSON(){const n=super.toJSON();n.autoClose=this.autoClose,n.curves=[];for(let u=0,f=this.curves.length;u<f;u++){const y=this.curves[u];n.curves.push(y.toJSON())}return n}fromJSON(n){super.fromJSON(n),this.autoClose=n.autoClose,this.curves=[];for(let u=0,f=n.curves.length;u<f;u++){const y=n.curves[u];this.curves.push(new Curves[y.type]().fromJSON(y))}return this}}class Path extends CurvePath{constructor(n){super(),this.type="Path",this.currentPoint=new Vector2,n&&this.setFromPoints(n)}setFromPoints(n){this.moveTo(n[0].x,n[0].y);for(let u=1,f=n.length;u<f;u++)this.lineTo(n[u].x,n[u].y);return this}moveTo(n,u){return this.currentPoint.set(n,u),this}lineTo(n,u){const f=new LineCurve(this.currentPoint.clone(),new Vector2(n,u));return this.curves.push(f),this.currentPoint.set(n,u),this}quadraticCurveTo(n,u,f,y){const S=new QuadraticBezierCurve(this.currentPoint.clone(),new Vector2(n,u),new Vector2(f,y));return this.curves.push(S),this.currentPoint.set(f,y),this}bezierCurveTo(n,u,f,y,S,A){const w=new CubicBezierCurve(this.currentPoint.clone(),new Vector2(n,u),new Vector2(f,y),new Vector2(S,A));return this.curves.push(w),this.currentPoint.set(S,A),this}splineThru(n){const u=[this.currentPoint.clone()].concat(n),f=new SplineCurve(u);return this.curves.push(f),this.currentPoint.copy(n[n.length-1]),this}arc(n,u,f,y,S,A){const w=this.currentPoint.x,C=this.currentPoint.y;return this.absarc(n+w,u+C,f,y,S,A),this}absarc(n,u,f,y,S,A){return this.absellipse(n,u,f,f,y,S,A),this}ellipse(n,u,f,y,S,A,w,C){const T=this.currentPoint.x,R=this.currentPoint.y;return this.absellipse(n+T,u+R,f,y,S,A,w,C),this}absellipse(n,u,f,y,S,A,w,C){const T=new EllipseCurve(n,u,f,y,S,A,w,C);if(this.curves.length>0){const I=T.getPoint(0);I.equals(this.currentPoint)||this.lineTo(I.x,I.y)}this.curves.push(T);const R=T.getPoint(1);return this.currentPoint.copy(R),this}copy(n){return super.copy(n),this.currentPoint.copy(n.currentPoint),this}toJSON(){const n=super.toJSON();return n.currentPoint=this.currentPoint.toArray(),n}fromJSON(n){return super.fromJSON(n),this.currentPoint.fromArray(n.currentPoint),this}}class Shape extends Path{constructor(n){super(n),this.uuid=generateUUID$1(),this.type="Shape",this.holes=[]}getPointsHoles(n){const u=[];for(let f=0,y=this.holes.length;f<y;f++)u[f]=this.holes[f].getPoints(n);return u}extractPoints(n){return{shape:this.getPoints(n),holes:this.getPointsHoles(n)}}copy(n){super.copy(n),this.holes=[];for(let u=0,f=n.holes.length;u<f;u++){const y=n.holes[u];this.holes.push(y.clone())}return this}toJSON(){const n=super.toJSON();n.uuid=this.uuid,n.holes=[];for(let u=0,f=this.holes.length;u<f;u++){const y=this.holes[u];n.holes.push(y.toJSON())}return n}fromJSON(n){super.fromJSON(n),this.uuid=n.uuid,this.holes=[];for(let u=0,f=n.holes.length;u<f;u++){const y=n.holes[u];this.holes.push(new Path().fromJSON(y))}return this}}function earcut(s,n,u=2){const f=n&&n.length,y=f?n[0]*u:s.length;let S=linkedList(s,0,y,u,!0);const A=[];if(!S||S.next===S.prev)return A;let w,C,T;if(f&&(S=eliminateHoles(s,n,S,u)),s.length>80*u){w=s[0],C=s[1];let R=w,I=C;for(let N=u;N<y;N+=u){const L=s[N],F=s[N+1];L<w&&(w=L),F<C&&(C=F),L>R&&(R=L),F>I&&(I=F)}T=Math.max(R-w,I-C),T=T!==0?32767/T:0}return earcutLinked(S,A,u,w,C,T,0),A}function linkedList(s,n,u,f,y){let S;if(y===signedArea(s,n,u,f)>0)for(let A=n;A<u;A+=f)S=insertNode(A/f|0,s[A],s[A+1],S);else for(let A=u-f;A>=n;A-=f)S=insertNode(A/f|0,s[A],s[A+1],S);return S&&equals(S,S.next)&&(removeNode(S),S=S.next),S}function filterPoints(s,n){if(!s)return s;n||(n=s);let u=s,f;do if(f=!1,!u.steiner&&(equals(u,u.next)||area(u.prev,u,u.next)===0)){if(removeNode(u),u=n=u.prev,u===u.next)break;f=!0}else u=u.next;while(f||u!==n);return n}function earcutLinked(s,n,u,f,y,S,A){if(!s)return;!A&&S&&indexCurve(s,f,y,S);let w=s;for(;s.prev!==s.next;){const C=s.prev,T=s.next;if(S?isEarHashed(s,f,y,S):isEar(s)){n.push(C.i,s.i,T.i),removeNode(s),s=T.next,w=T.next;continue}if(s=T,s===w){A?A===1?(s=cureLocalIntersections(filterPoints(s),n),earcutLinked(s,n,u,f,y,S,2)):A===2&&splitEarcut(s,n,u,f,y,S):earcutLinked(filterPoints(s),n,u,f,y,S,1);break}}}function isEar(s){const n=s.prev,u=s,f=s.next;if(area(n,u,f)>=0)return!1;const y=n.x,S=u.x,A=f.x,w=n.y,C=u.y,T=f.y,R=Math.min(y,S,A),I=Math.min(w,C,T),N=Math.max(y,S,A),L=Math.max(w,C,T);let F=f.next;for(;F!==n;){if(F.x>=R&&F.x<=N&&F.y>=I&&F.y<=L&&pointInTriangleExceptFirst(y,w,S,C,A,T,F.x,F.y)&&area(F.prev,F,F.next)>=0)return!1;F=F.next}return!0}function isEarHashed(s,n,u,f){const y=s.prev,S=s,A=s.next;if(area(y,S,A)>=0)return!1;const w=y.x,C=S.x,T=A.x,R=y.y,I=S.y,N=A.y,L=Math.min(w,C,T),F=Math.min(R,I,N),H=Math.max(w,C,T),z=Math.max(R,I,N),U=zOrder(L,F,n,u,f),G=zOrder(H,z,n,u,f);let Y=s.prevZ,K=s.nextZ;for(;Y&&Y.z>=U&&K&&K.z<=G;){if(Y.x>=L&&Y.x<=H&&Y.y>=F&&Y.y<=z&&Y!==y&&Y!==A&&pointInTriangleExceptFirst(w,R,C,I,T,N,Y.x,Y.y)&&area(Y.prev,Y,Y.next)>=0||(Y=Y.prevZ,K.x>=L&&K.x<=H&&K.y>=F&&K.y<=z&&K!==y&&K!==A&&pointInTriangleExceptFirst(w,R,C,I,T,N,K.x,K.y)&&area(K.prev,K,K.next)>=0))return!1;K=K.nextZ}for(;Y&&Y.z>=U;){if(Y.x>=L&&Y.x<=H&&Y.y>=F&&Y.y<=z&&Y!==y&&Y!==A&&pointInTriangleExceptFirst(w,R,C,I,T,N,Y.x,Y.y)&&area(Y.prev,Y,Y.next)>=0)return!1;Y=Y.prevZ}for(;K&&K.z<=G;){if(K.x>=L&&K.x<=H&&K.y>=F&&K.y<=z&&K!==y&&K!==A&&pointInTriangleExceptFirst(w,R,C,I,T,N,K.x,K.y)&&area(K.prev,K,K.next)>=0)return!1;K=K.nextZ}return!0}function cureLocalIntersections(s,n){let u=s;do{const f=u.prev,y=u.next.next;!equals(f,y)&&intersects(f,u,u.next,y)&&locallyInside(f,y)&&locallyInside(y,f)&&(n.push(f.i,u.i,y.i),removeNode(u),removeNode(u.next),u=s=y),u=u.next}while(u!==s);return filterPoints(u)}function splitEarcut(s,n,u,f,y,S){let A=s;do{let w=A.next.next;for(;w!==A.prev;){if(A.i!==w.i&&isValidDiagonal(A,w)){let C=splitPolygon(A,w);A=filterPoints(A,A.next),C=filterPoints(C,C.next),earcutLinked(A,n,u,f,y,S,0),earcutLinked(C,n,u,f,y,S,0);return}w=w.next}A=A.next}while(A!==s)}function eliminateHoles(s,n,u,f){const y=[];for(let S=0,A=n.length;S<A;S++){const w=n[S]*f,C=S<A-1?n[S+1]*f:s.length,T=linkedList(s,w,C,f,!1);T===T.next&&(T.steiner=!0),y.push(getLeftmost(T))}y.sort(compareXYSlope);for(let S=0;S<y.length;S++)u=eliminateHole(y[S],u);return u}function compareXYSlope(s,n){let u=s.x-n.x;if(u===0&&(u=s.y-n.y,u===0)){const f=(s.next.y-s.y)/(s.next.x-s.x),y=(n.next.y-n.y)/(n.next.x-n.x);u=f-y}return u}function eliminateHole(s,n){const u=findHoleBridge(s,n);if(!u)return n;const f=splitPolygon(u,s);return filterPoints(f,f.next),filterPoints(u,u.next)}function findHoleBridge(s,n){let u=n;const f=s.x,y=s.y;let S=-1/0,A;if(equals(s,u))return u;do{if(equals(s,u.next))return u.next;if(y<=u.y&&y>=u.next.y&&u.next.y!==u.y){const I=u.x+(y-u.y)*(u.next.x-u.x)/(u.next.y-u.y);if(I<=f&&I>S&&(S=I,A=u.x<u.next.x?u:u.next,I===f))return A}u=u.next}while(u!==n);if(!A)return null;const w=A,C=A.x,T=A.y;let R=1/0;u=A;do{if(f>=u.x&&u.x>=C&&f!==u.x&&pointInTriangle(y<T?f:S,y,C,T,y<T?S:f,y,u.x,u.y)){const I=Math.abs(y-u.y)/(f-u.x);locallyInside(u,s)&&(I<R||I===R&&(u.x>A.x||u.x===A.x&&sectorContainsSector(A,u)))&&(A=u,R=I)}u=u.next}while(u!==w);return A}function sectorContainsSector(s,n){return area(s.prev,s,n.prev)<0&&area(n.next,s,s.next)<0}function indexCurve(s,n,u,f){let y=s;do y.z===0&&(y.z=zOrder(y.x,y.y,n,u,f)),y.prevZ=y.prev,y.nextZ=y.next,y=y.next;while(y!==s);y.prevZ.nextZ=null,y.prevZ=null,sortLinked(y)}function sortLinked(s){let n,u=1;do{let f=s,y;s=null;let S=null;for(n=0;f;){n++;let A=f,w=0;for(let T=0;T<u&&(w++,A=A.nextZ,!!A);T++);let C=u;for(;w>0||C>0&&A;)w!==0&&(C===0||!A||f.z<=A.z)?(y=f,f=f.nextZ,w--):(y=A,A=A.nextZ,C--),S?S.nextZ=y:s=y,y.prevZ=S,S=y;f=A}S.nextZ=null,u*=2}while(n>1);return s}function zOrder(s,n,u,f,y){return s=(s-u)*y|0,n=(n-f)*y|0,s=(s|s<<8)&16711935,s=(s|s<<4)&252645135,s=(s|s<<2)&858993459,s=(s|s<<1)&1431655765,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,s|n<<1}function getLeftmost(s){let n=s,u=s;do(n.x<u.x||n.x===u.x&&n.y<u.y)&&(u=n),n=n.next;while(n!==s);return u}function pointInTriangle(s,n,u,f,y,S,A,w){return(y-A)*(n-w)>=(s-A)*(S-w)&&(s-A)*(f-w)>=(u-A)*(n-w)&&(u-A)*(S-w)>=(y-A)*(f-w)}function pointInTriangleExceptFirst(s,n,u,f,y,S,A,w){return!(s===A&&n===w)&&pointInTriangle(s,n,u,f,y,S,A,w)}function isValidDiagonal(s,n){return s.next.i!==n.i&&s.prev.i!==n.i&&!intersectsPolygon(s,n)&&(locallyInside(s,n)&&locallyInside(n,s)&&middleInside(s,n)&&(area(s.prev,s,n.prev)||area(s,n.prev,n))||equals(s,n)&&area(s.prev,s,s.next)>0&&area(n.prev,n,n.next)>0)}function area(s,n,u){return(n.y-s.y)*(u.x-n.x)-(n.x-s.x)*(u.y-n.y)}function equals(s,n){return s.x===n.x&&s.y===n.y}function intersects(s,n,u,f){const y=sign(area(s,n,u)),S=sign(area(s,n,f)),A=sign(area(u,f,s)),w=sign(area(u,f,n));return!!(y!==S&&A!==w||y===0&&onSegment(s,u,n)||S===0&&onSegment(s,f,n)||A===0&&onSegment(u,s,f)||w===0&&onSegment(u,n,f))}function onSegment(s,n,u){return n.x<=Math.max(s.x,u.x)&&n.x>=Math.min(s.x,u.x)&&n.y<=Math.max(s.y,u.y)&&n.y>=Math.min(s.y,u.y)}function sign(s){return s>0?1:s<0?-1:0}function intersectsPolygon(s,n){let u=s;do{if(u.i!==s.i&&u.next.i!==s.i&&u.i!==n.i&&u.next.i!==n.i&&intersects(u,u.next,s,n))return!0;u=u.next}while(u!==s);return!1}function locallyInside(s,n){return area(s.prev,s,s.next)<0?area(s,n,s.next)>=0&&area(s,s.prev,n)>=0:area(s,n,s.prev)<0||area(s,s.next,n)<0}function middleInside(s,n){let u=s,f=!1;const y=(s.x+n.x)/2,S=(s.y+n.y)/2;do u.y>S!=u.next.y>S&&u.next.y!==u.y&&y<(u.next.x-u.x)*(S-u.y)/(u.next.y-u.y)+u.x&&(f=!f),u=u.next;while(u!==s);return f}function splitPolygon(s,n){const u=createNode(s.i,s.x,s.y),f=createNode(n.i,n.x,n.y),y=s.next,S=n.prev;return s.next=n,n.prev=s,u.next=y,y.prev=u,f.next=u,u.prev=f,S.next=f,f.prev=S,f}function insertNode(s,n,u,f){const y=createNode(s,n,u);return f?(y.next=f.next,y.prev=f,f.next.prev=y,f.next=y):(y.prev=y,y.next=y),y}function removeNode(s){s.next.prev=s.prev,s.prev.next=s.next,s.prevZ&&(s.prevZ.nextZ=s.nextZ),s.nextZ&&(s.nextZ.prevZ=s.prevZ)}function createNode(s,n,u){return{i:s,x:n,y:u,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function signedArea(s,n,u,f){let y=0;for(let S=n,A=u-f;S<u;S+=f)y+=(s[A]-s[S])*(s[S+1]+s[A+1]),A=S;return y}class Earcut{static triangulate(n,u,f=2){return earcut(n,u,f)}}class ShapeUtils{static area(n){const u=n.length;let f=0;for(let y=u-1,S=0;S<u;y=S++)f+=n[y].x*n[S].y-n[S].x*n[y].y;return f*.5}static isClockWise(n){return ShapeUtils.area(n)<0}static triangulateShape(n,u){const f=[],y=[],S=[];removeDupEndPts(n),addContour(f,n);let A=n.length;u.forEach(removeDupEndPts);for(let C=0;C<u.length;C++)y.push(A),A+=u[C].length,addContour(f,u[C]);const w=Earcut.triangulate(f,y);for(let C=0;C<w.length;C+=3)S.push(w.slice(C,C+3));return S}}function removeDupEndPts(s){const n=s.length;n>2&&s[n-1].equals(s[0])&&s.pop()}function addContour(s,n){for(let u=0;u<n.length;u++)s.push(n[u].x),s.push(n[u].y)}class ExtrudeGeometry extends BufferGeometry{constructor(n=new Shape([new Vector2(.5,.5),new Vector2(-.5,.5),new Vector2(-.5,-.5),new Vector2(.5,-.5)]),u={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:n,options:u},n=Array.isArray(n)?n:[n];const f=this,y=[],S=[];for(let w=0,C=n.length;w<C;w++){const T=n[w];A(T)}this.setAttribute("position",new Float32BufferAttribute(y,3)),this.setAttribute("uv",new Float32BufferAttribute(S,2)),this.computeVertexNormals();function A(w){const C=[],T=u.curveSegments!==void 0?u.curveSegments:12,R=u.steps!==void 0?u.steps:1,I=u.depth!==void 0?u.depth:1;let N=u.bevelEnabled!==void 0?u.bevelEnabled:!0,L=u.bevelThickness!==void 0?u.bevelThickness:.2,F=u.bevelSize!==void 0?u.bevelSize:L-.1,H=u.bevelOffset!==void 0?u.bevelOffset:0,z=u.bevelSegments!==void 0?u.bevelSegments:3;const U=u.extrudePath,G=u.UVGenerator!==void 0?u.UVGenerator:WorldUVGenerator;let Y,K=!1,Z,J,te,de;if(U){Y=U.getSpacedPoints(R),K=!0,N=!1;const He=U.isCatmullRomCurve3?U.closed:!1;Z=U.computeFrenetFrames(R,He),J=new Vector3,te=new Vector3,de=new Vector3}N||(z=0,L=0,F=0,H=0);const se=w.extractPoints(T);let ne=se.shape;const ge=se.holes;if(!ShapeUtils.isClockWise(ne)){ne=ne.reverse();for(let He=0,Ye=ge.length;He<Ye;He++){const Je=ge[He];ShapeUtils.isClockWise(Je)&&(ge[He]=Je.reverse())}}function we(He){const Je=10000000000000001e-36;let ot=He[0];for(let ze=1;ze<=He.length;ze++){const pt=ze%He.length,yt=He[pt],ut=yt.x-ot.x,Et=yt.y-ot.y,qe=ut*ut+Et*Et,Le=Math.max(Math.abs(yt.x),Math.abs(yt.y),Math.abs(ot.x),Math.abs(ot.y)),lt=Je*Le*Le;if(qe<=lt){He.splice(pt,1),ze--;continue}ot=yt}}we(ne),ge.forEach(we);const Ie=ge.length,Be=ne;for(let He=0;He<Ie;He++){const Ye=ge[He];ne=ne.concat(Ye)}function Me(He,Ye,Je){return Ye||error("ExtrudeGeometry: vec does not exist"),He.clone().addScaledVector(Ye,Je)}const Re=ne.length;function Te(He,Ye,Je){let ot,ze,pt;const yt=He.x-Ye.x,ut=He.y-Ye.y,Et=Je.x-He.x,qe=Je.y-He.y,Le=yt*yt+ut*ut,lt=yt*qe-ut*Et;if(Math.abs(lt)>Number.EPSILON){const We=Math.sqrt(Le),Qe=Math.sqrt(Et*Et+qe*qe),at=Ye.x-ut/We,St=Ye.y+yt/We,Ct=Je.x-qe/Qe,jt=Je.y+Et/Qe,Gt=((Ct-at)*qe-(jt-St)*Et)/(yt*qe-ut*Et);ot=at+yt*Gt-He.x,ze=St+ut*Gt-He.y;const Ft=ot*ot+ze*ze;if(Ft<=2)return new Vector2(ot,ze);pt=Math.sqrt(Ft/2)}else{let We=!1;yt>Number.EPSILON?Et>Number.EPSILON&&(We=!0):yt<-Number.EPSILON?Et<-Number.EPSILON&&(We=!0):Math.sign(ut)===Math.sign(qe)&&(We=!0),We?(ot=-ut,ze=yt,pt=Math.sqrt(Le)):(ot=yt,ze=ut,pt=Math.sqrt(Le/2))}return new Vector2(ot/pt,ze/pt)}const Se=[];for(let He=0,Ye=Be.length,Je=Ye-1,ot=He+1;He<Ye;He++,Je++,ot++)Je===Ye&&(Je=0),ot===Ye&&(ot=0),Se[He]=Te(Be[He],Be[Je],Be[ot]);const oe=[];let ae,be=Se.concat();for(let He=0,Ye=Ie;He<Ye;He++){const Je=ge[He];ae=[];for(let ot=0,ze=Je.length,pt=ze-1,yt=ot+1;ot<ze;ot++,pt++,yt++)pt===ze&&(pt=0),yt===ze&&(yt=0),ae[ot]=Te(Je[ot],Je[pt],Je[yt]);oe.push(ae),be=be.concat(ae)}let he;if(z===0)he=ShapeUtils.triangulateShape(Be,ge);else{const He=[],Ye=[];for(let Je=0;Je<z;Je++){const ot=Je/z,ze=L*Math.cos(ot*Math.PI/2),pt=F*Math.sin(ot*Math.PI/2)+H;for(let yt=0,ut=Be.length;yt<ut;yt++){const Et=Me(Be[yt],Se[yt],pt);Pe(Et.x,Et.y,-ze),ot===0&&He.push(Et)}for(let yt=0,ut=Ie;yt<ut;yt++){const Et=ge[yt];ae=oe[yt];const qe=[];for(let Le=0,lt=Et.length;Le<lt;Le++){const We=Me(Et[Le],ae[Le],pt);Pe(We.x,We.y,-ze),ot===0&&qe.push(We)}ot===0&&Ye.push(qe)}}he=ShapeUtils.triangulateShape(He,Ye)}const ue=he.length,ye=F+H;for(let He=0;He<Re;He++){const Ye=N?Me(ne[He],be[He],ye):ne[He];K?(te.copy(Z.normals[0]).multiplyScalar(Ye.x),J.copy(Z.binormals[0]).multiplyScalar(Ye.y),de.copy(Y[0]).add(te).add(J),Pe(de.x,de.y,de.z)):Pe(Ye.x,Ye.y,0)}for(let He=1;He<=R;He++)for(let Ye=0;Ye<Re;Ye++){const Je=N?Me(ne[Ye],be[Ye],ye):ne[Ye];K?(te.copy(Z.normals[He]).multiplyScalar(Je.x),J.copy(Z.binormals[He]).multiplyScalar(Je.y),de.copy(Y[He]).add(te).add(J),Pe(de.x,de.y,de.z)):Pe(Je.x,Je.y,I/R*He)}for(let He=z-1;He>=0;He--){const Ye=He/z,Je=L*Math.cos(Ye*Math.PI/2),ot=F*Math.sin(Ye*Math.PI/2)+H;for(let ze=0,pt=Be.length;ze<pt;ze++){const yt=Me(Be[ze],Se[ze],ot);Pe(yt.x,yt.y,I+Je)}for(let ze=0,pt=ge.length;ze<pt;ze++){const yt=ge[ze];ae=oe[ze];for(let ut=0,Et=yt.length;ut<Et;ut++){const qe=Me(yt[ut],ae[ut],ot);K?Pe(qe.x,qe.y+Y[R-1].y,Y[R-1].x+Je):Pe(qe.x,qe.y,I+Je)}}}ce(),_e();function ce(){const He=y.length/3;if(N){let Ye=0,Je=Re*Ye;for(let ot=0;ot<ue;ot++){const ze=he[ot];$e(ze[2]+Je,ze[1]+Je,ze[0]+Je)}Ye=R+z*2,Je=Re*Ye;for(let ot=0;ot<ue;ot++){const ze=he[ot];$e(ze[0]+Je,ze[1]+Je,ze[2]+Je)}}else{for(let Ye=0;Ye<ue;Ye++){const Je=he[Ye];$e(Je[2],Je[1],Je[0])}for(let Ye=0;Ye<ue;Ye++){const Je=he[Ye];$e(Je[0]+Re*R,Je[1]+Re*R,Je[2]+Re*R)}}f.addGroup(He,y.length/3-He,0)}function _e(){const He=y.length/3;let Ye=0;ke(Be,Ye),Ye+=Be.length;for(let Je=0,ot=ge.length;Je<ot;Je++){const ze=ge[Je];ke(ze,Ye),Ye+=ze.length}f.addGroup(He,y.length/3-He,1)}function ke(He,Ye){let Je=He.length;for(;--Je>=0;){const ot=Je;let ze=Je-1;ze<0&&(ze=He.length-1);for(let pt=0,yt=R+z*2;pt<yt;pt++){const ut=Re*pt,Et=Re*(pt+1),qe=Ye+ot+ut,Le=Ye+ze+ut,lt=Ye+ze+Et,We=Ye+ot+Et;xe(qe,Le,lt,We)}}}function Pe(He,Ye,Je){C.push(He),C.push(Ye),C.push(Je)}function $e(He,Ye,Je){Ne(He),Ne(Ye),Ne(Je);const ot=y.length/3,ze=G.generateTopUV(f,y,ot-3,ot-2,ot-1);je(ze[0]),je(ze[1]),je(ze[2])}function xe(He,Ye,Je,ot){Ne(He),Ne(Ye),Ne(ot),Ne(Ye),Ne(Je),Ne(ot);const ze=y.length/3,pt=G.generateSideWallUV(f,y,ze-6,ze-3,ze-2,ze-1);je(pt[0]),je(pt[1]),je(pt[3]),je(pt[1]),je(pt[2]),je(pt[3])}function Ne(He){y.push(C[He*3+0]),y.push(C[He*3+1]),y.push(C[He*3+2])}function je(He){S.push(He.x),S.push(He.y)}}}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}toJSON(){const n=super.toJSON(),u=this.parameters.shapes,f=this.parameters.options;return toJSON$1(u,f,n)}static fromJSON(n,u){const f=[];for(let S=0,A=n.shapes.length;S<A;S++){const w=u[n.shapes[S]];f.push(w)}const y=n.options.extrudePath;return y!==void 0&&(n.options.extrudePath=new Curves[y.type]().fromJSON(y)),new ExtrudeGeometry(f,n.options)}}const WorldUVGenerator={generateTopUV:function(s,n,u,f,y){const S=n[u*3],A=n[u*3+1],w=n[f*3],C=n[f*3+1],T=n[y*3],R=n[y*3+1];return[new Vector2(S,A),new Vector2(w,C),new Vector2(T,R)]},generateSideWallUV:function(s,n,u,f,y,S){const A=n[u*3],w=n[u*3+1],C=n[u*3+2],T=n[f*3],R=n[f*3+1],I=n[f*3+2],N=n[y*3],L=n[y*3+1],F=n[y*3+2],H=n[S*3],z=n[S*3+1],U=n[S*3+2];return Math.abs(w-R)<Math.abs(A-T)?[new Vector2(A,1-C),new Vector2(T,1-I),new Vector2(N,1-F),new Vector2(H,1-U)]:[new Vector2(w,1-C),new Vector2(R,1-I),new Vector2(L,1-F),new Vector2(z,1-U)]}};function toJSON$1(s,n,u){if(u.shapes=[],Array.isArray(s))for(let f=0,y=s.length;f<y;f++){const S=s[f];u.shapes.push(S.uuid)}else u.shapes.push(s.uuid);return u.options=Object.assign({},n),n.extrudePath!==void 0&&(u.options.extrudePath=n.extrudePath.toJSON()),u}class IcosahedronGeometry extends PolyhedronGeometry{constructor(n=1,u=0){const f=(1+Math.sqrt(5))/2,y=[-1,f,0,1,f,0,-1,-f,0,1,-f,0,0,-1,f,0,1,f,0,-1,-f,0,1,-f,f,0,-1,f,0,1,-f,0,-1,-f,0,1],S=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(y,S,n,u),this.type="IcosahedronGeometry",this.parameters={radius:n,detail:u}}static fromJSON(n){return new IcosahedronGeometry(n.radius,n.detail)}}class LatheGeometry extends BufferGeometry{constructor(n=[new Vector2(0,-.5),new Vector2(.5,0),new Vector2(0,.5)],u=12,f=0,y=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:n,segments:u,phiStart:f,phiLength:y},u=Math.floor(u),y=clamp(y,0,Math.PI*2);const S=[],A=[],w=[],C=[],T=[],R=1/u,I=new Vector3,N=new Vector2,L=new Vector3,F=new Vector3,H=new Vector3;let z=0,U=0;for(let G=0;G<=n.length-1;G++)switch(G){case 0:z=n[G+1].x-n[G].x,U=n[G+1].y-n[G].y,L.x=U*1,L.y=-z,L.z=U*0,H.copy(L),L.normalize(),C.push(L.x,L.y,L.z);break;case n.length-1:C.push(H.x,H.y,H.z);break;default:z=n[G+1].x-n[G].x,U=n[G+1].y-n[G].y,L.x=U*1,L.y=-z,L.z=U*0,F.copy(L),L.x+=H.x,L.y+=H.y,L.z+=H.z,L.normalize(),C.push(L.x,L.y,L.z),H.copy(F)}for(let G=0;G<=u;G++){const Y=f+G*R*y,K=Math.sin(Y),Z=Math.cos(Y);for(let J=0;J<=n.length-1;J++){I.x=n[J].x*K,I.y=n[J].y,I.z=n[J].x*Z,A.push(I.x,I.y,I.z),N.x=G/u,N.y=J/(n.length-1),w.push(N.x,N.y);const te=C[3*J+0]*K,de=C[3*J+1],se=C[3*J+0]*Z;T.push(te,de,se)}}for(let G=0;G<u;G++)for(let Y=0;Y<n.length-1;Y++){const K=Y+G*n.length,Z=K,J=K+n.length,te=K+n.length+1,de=K+1;S.push(Z,J,de),S.push(te,de,J)}this.setIndex(S),this.setAttribute("position",new Float32BufferAttribute(A,3)),this.setAttribute("uv",new Float32BufferAttribute(w,2)),this.setAttribute("normal",new Float32BufferAttribute(T,3))}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}static fromJSON(n){return new LatheGeometry(n.points,n.segments,n.phiStart,n.phiLength)}}class OctahedronGeometry extends PolyhedronGeometry{constructor(n=1,u=0){const f=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],y=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(f,y,n,u),this.type="OctahedronGeometry",this.parameters={radius:n,detail:u}}static fromJSON(n){return new OctahedronGeometry(n.radius,n.detail)}}class PlaneGeometry extends BufferGeometry{constructor(n=1,u=1,f=1,y=1){super(),this.type="PlaneGeometry",this.parameters={width:n,height:u,widthSegments:f,heightSegments:y};const S=n/2,A=u/2,w=Math.floor(f),C=Math.floor(y),T=w+1,R=C+1,I=n/w,N=u/C,L=[],F=[],H=[],z=[];for(let U=0;U<R;U++){const G=U*N-A;for(let Y=0;Y<T;Y++){const K=Y*I-S;F.push(K,-G,0),H.push(0,0,1),z.push(Y/w),z.push(1-U/C)}}for(let U=0;U<C;U++)for(let G=0;G<w;G++){const Y=G+T*U,K=G+T*(U+1),Z=G+1+T*(U+1),J=G+1+T*U;L.push(Y,K,J),L.push(K,Z,J)}this.setIndex(L),this.setAttribute("position",new Float32BufferAttribute(F,3)),this.setAttribute("normal",new Float32BufferAttribute(H,3)),this.setAttribute("uv",new Float32BufferAttribute(z,2))}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}static fromJSON(n){return new PlaneGeometry(n.width,n.height,n.widthSegments,n.heightSegments)}}class RingGeometry extends BufferGeometry{constructor(n=.5,u=1,f=32,y=1,S=0,A=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:n,outerRadius:u,thetaSegments:f,phiSegments:y,thetaStart:S,thetaLength:A},f=Math.max(3,f),y=Math.max(1,y);const w=[],C=[],T=[],R=[];let I=n;const N=(u-n)/y,L=new Vector3,F=new Vector2;for(let H=0;H<=y;H++){for(let z=0;z<=f;z++){const U=S+z/f*A;L.x=I*Math.cos(U),L.y=I*Math.sin(U),C.push(L.x,L.y,L.z),T.push(0,0,1),F.x=(L.x/u+1)/2,F.y=(L.y/u+1)/2,R.push(F.x,F.y)}I+=N}for(let H=0;H<y;H++){const z=H*(f+1);for(let U=0;U<f;U++){const G=U+z,Y=G,K=G+f+1,Z=G+f+2,J=G+1;w.push(Y,K,J),w.push(K,Z,J)}}this.setIndex(w),this.setAttribute("position",new Float32BufferAttribute(C,3)),this.setAttribute("normal",new Float32BufferAttribute(T,3)),this.setAttribute("uv",new Float32BufferAttribute(R,2))}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}static fromJSON(n){return new RingGeometry(n.innerRadius,n.outerRadius,n.thetaSegments,n.phiSegments,n.thetaStart,n.thetaLength)}}class ShapeGeometry extends BufferGeometry{constructor(n=new Shape([new Vector2(0,.5),new Vector2(-.5,-.5),new Vector2(.5,-.5)]),u=12){super(),this.type="ShapeGeometry",this.parameters={shapes:n,curveSegments:u};const f=[],y=[],S=[],A=[];let w=0,C=0;if(Array.isArray(n)===!1)T(n);else for(let R=0;R<n.length;R++)T(n[R]),this.addGroup(w,C,R),w+=C,C=0;this.setIndex(f),this.setAttribute("position",new Float32BufferAttribute(y,3)),this.setAttribute("normal",new Float32BufferAttribute(S,3)),this.setAttribute("uv",new Float32BufferAttribute(A,2));function T(R){const I=y.length/3,N=R.extractPoints(u);let L=N.shape;const F=N.holes;ShapeUtils.isClockWise(L)===!1&&(L=L.reverse());for(let z=0,U=F.length;z<U;z++){const G=F[z];ShapeUtils.isClockWise(G)===!0&&(F[z]=G.reverse())}const H=ShapeUtils.triangulateShape(L,F);for(let z=0,U=F.length;z<U;z++){const G=F[z];L=L.concat(G)}for(let z=0,U=L.length;z<U;z++){const G=L[z];y.push(G.x,G.y,0),S.push(0,0,1),A.push(G.x,G.y)}for(let z=0,U=H.length;z<U;z++){const G=H[z],Y=G[0]+I,K=G[1]+I,Z=G[2]+I;f.push(Y,K,Z),C+=3}}}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}toJSON(){const n=super.toJSON(),u=this.parameters.shapes;return toJSON(u,n)}static fromJSON(n,u){const f=[];for(let y=0,S=n.shapes.length;y<S;y++){const A=u[n.shapes[y]];f.push(A)}return new ShapeGeometry(f,n.curveSegments)}}function toJSON(s,n){if(n.shapes=[],Array.isArray(s))for(let u=0,f=s.length;u<f;u++){const y=s[u];n.shapes.push(y.uuid)}else n.shapes.push(s.uuid);return n}class SphereGeometry extends BufferGeometry{constructor(n=1,u=32,f=16,y=0,S=Math.PI*2,A=0,w=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:n,widthSegments:u,heightSegments:f,phiStart:y,phiLength:S,thetaStart:A,thetaLength:w},u=Math.max(3,Math.floor(u)),f=Math.max(2,Math.floor(f));const C=Math.min(A+w,Math.PI);let T=0;const R=[],I=new Vector3,N=new Vector3,L=[],F=[],H=[],z=[];for(let U=0;U<=f;U++){const G=[],Y=U/f;let K=0;U===0&&A===0?K=.5/u:U===f&&C===Math.PI&&(K=-.5/u);for(let Z=0;Z<=u;Z++){const J=Z/u;I.x=-n*Math.cos(y+J*S)*Math.sin(A+Y*w),I.y=n*Math.cos(A+Y*w),I.z=n*Math.sin(y+J*S)*Math.sin(A+Y*w),F.push(I.x,I.y,I.z),N.copy(I).normalize(),H.push(N.x,N.y,N.z),z.push(J+K,1-Y),G.push(T++)}R.push(G)}for(let U=0;U<f;U++)for(let G=0;G<u;G++){const Y=R[U][G+1],K=R[U][G],Z=R[U+1][G],J=R[U+1][G+1];(U!==0||A>0)&&L.push(Y,K,J),(U!==f-1||C<Math.PI)&&L.push(K,Z,J)}this.setIndex(L),this.setAttribute("position",new Float32BufferAttribute(F,3)),this.setAttribute("normal",new Float32BufferAttribute(H,3)),this.setAttribute("uv",new Float32BufferAttribute(z,2))}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}static fromJSON(n){return new SphereGeometry(n.radius,n.widthSegments,n.heightSegments,n.phiStart,n.phiLength,n.thetaStart,n.thetaLength)}}class TetrahedronGeometry extends PolyhedronGeometry{constructor(n=1,u=0){const f=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],y=[2,1,0,0,3,2,1,3,0,2,3,1];super(f,y,n,u),this.type="TetrahedronGeometry",this.parameters={radius:n,detail:u}}static fromJSON(n){return new TetrahedronGeometry(n.radius,n.detail)}}class TorusGeometry extends BufferGeometry{constructor(n=1,u=.4,f=12,y=48,S=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:n,tube:u,radialSegments:f,tubularSegments:y,arc:S},f=Math.floor(f),y=Math.floor(y);const A=[],w=[],C=[],T=[],R=new Vector3,I=new Vector3,N=new Vector3;for(let L=0;L<=f;L++)for(let F=0;F<=y;F++){const H=F/y*S,z=L/f*Math.PI*2;I.x=(n+u*Math.cos(z))*Math.cos(H),I.y=(n+u*Math.cos(z))*Math.sin(H),I.z=u*Math.sin(z),w.push(I.x,I.y,I.z),R.x=n*Math.cos(H),R.y=n*Math.sin(H),N.subVectors(I,R).normalize(),C.push(N.x,N.y,N.z),T.push(F/y),T.push(L/f)}for(let L=1;L<=f;L++)for(let F=1;F<=y;F++){const H=(y+1)*L+F-1,z=(y+1)*(L-1)+F-1,U=(y+1)*(L-1)+F,G=(y+1)*L+F;A.push(H,z,G),A.push(z,U,G)}this.setIndex(A),this.setAttribute("position",new Float32BufferAttribute(w,3)),this.setAttribute("normal",new Float32BufferAttribute(C,3)),this.setAttribute("uv",new Float32BufferAttribute(T,2))}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}static fromJSON(n){return new TorusGeometry(n.radius,n.tube,n.radialSegments,n.tubularSegments,n.arc)}}class TorusKnotGeometry extends BufferGeometry{constructor(n=1,u=.4,f=64,y=8,S=2,A=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:n,tube:u,tubularSegments:f,radialSegments:y,p:S,q:A},f=Math.floor(f),y=Math.floor(y);const w=[],C=[],T=[],R=[],I=new Vector3,N=new Vector3,L=new Vector3,F=new Vector3,H=new Vector3,z=new Vector3,U=new Vector3;for(let Y=0;Y<=f;++Y){const K=Y/f*S*Math.PI*2;G(K,S,A,n,L),G(K+.01,S,A,n,F),z.subVectors(F,L),U.addVectors(F,L),H.crossVectors(z,U),U.crossVectors(H,z),H.normalize(),U.normalize();for(let Z=0;Z<=y;++Z){const J=Z/y*Math.PI*2,te=-u*Math.cos(J),de=u*Math.sin(J);I.x=L.x+(te*U.x+de*H.x),I.y=L.y+(te*U.y+de*H.y),I.z=L.z+(te*U.z+de*H.z),C.push(I.x,I.y,I.z),N.subVectors(I,L).normalize(),T.push(N.x,N.y,N.z),R.push(Y/f),R.push(Z/y)}}for(let Y=1;Y<=f;Y++)for(let K=1;K<=y;K++){const Z=(y+1)*(Y-1)+(K-1),J=(y+1)*Y+(K-1),te=(y+1)*Y+K,de=(y+1)*(Y-1)+K;w.push(Z,J,de),w.push(J,te,de)}this.setIndex(w),this.setAttribute("position",new Float32BufferAttribute(C,3)),this.setAttribute("normal",new Float32BufferAttribute(T,3)),this.setAttribute("uv",new Float32BufferAttribute(R,2));function G(Y,K,Z,J,te){const de=Math.cos(Y),se=Math.sin(Y),ne=Z/K*Y,ge=Math.cos(ne);te.x=J*(2+ge)*.5*de,te.y=J*(2+ge)*se*.5,te.z=J*Math.sin(ne)*.5}}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}static fromJSON(n){return new TorusKnotGeometry(n.radius,n.tube,n.tubularSegments,n.radialSegments,n.p,n.q)}}class TubeGeometry extends BufferGeometry{constructor(n=new QuadraticBezierCurve3(new Vector3(-1,-1,0),new Vector3(-1,1,0),new Vector3(1,1,0)),u=64,f=1,y=8,S=!1){super(),this.type="TubeGeometry",this.parameters={path:n,tubularSegments:u,radius:f,radialSegments:y,closed:S};const A=n.computeFrenetFrames(u,S);this.tangents=A.tangents,this.normals=A.normals,this.binormals=A.binormals;const w=new Vector3,C=new Vector3,T=new Vector2;let R=new Vector3;const I=[],N=[],L=[],F=[];H(),this.setIndex(F),this.setAttribute("position",new Float32BufferAttribute(I,3)),this.setAttribute("normal",new Float32BufferAttribute(N,3)),this.setAttribute("uv",new Float32BufferAttribute(L,2));function H(){for(let Y=0;Y<u;Y++)z(Y);z(S===!1?u:0),G(),U()}function z(Y){R=n.getPointAt(Y/u,R);const K=A.normals[Y],Z=A.binormals[Y];for(let J=0;J<=y;J++){const te=J/y*Math.PI*2,de=Math.sin(te),se=-Math.cos(te);C.x=se*K.x+de*Z.x,C.y=se*K.y+de*Z.y,C.z=se*K.z+de*Z.z,C.normalize(),N.push(C.x,C.y,C.z),w.x=R.x+f*C.x,w.y=R.y+f*C.y,w.z=R.z+f*C.z,I.push(w.x,w.y,w.z)}}function U(){for(let Y=1;Y<=u;Y++)for(let K=1;K<=y;K++){const Z=(y+1)*(Y-1)+(K-1),J=(y+1)*Y+(K-1),te=(y+1)*Y+K,de=(y+1)*(Y-1)+K;F.push(Z,J,de),F.push(J,te,de)}}function G(){for(let Y=0;Y<=u;Y++)for(let K=0;K<=y;K++)T.x=Y/u,T.y=K/y,L.push(T.x,T.y)}}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}toJSON(){const n=super.toJSON();return n.path=this.parameters.path.toJSON(),n}static fromJSON(n){return new TubeGeometry(new Curves[n.path.type]().fromJSON(n.path),n.tubularSegments,n.radius,n.radialSegments,n.closed)}}class WireframeGeometry extends BufferGeometry{constructor(n=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:n},n!==null){const u=[],f=new Set,y=new Vector3,S=new Vector3;if(n.index!==null){const A=n.attributes.position,w=n.index;let C=n.groups;C.length===0&&(C=[{start:0,count:w.count,materialIndex:0}]);for(let T=0,R=C.length;T<R;++T){const I=C[T],N=I.start,L=I.count;for(let F=N,H=N+L;F<H;F+=3)for(let z=0;z<3;z++){const U=w.getX(F+z),G=w.getX(F+(z+1)%3);y.fromBufferAttribute(A,U),S.fromBufferAttribute(A,G),isUniqueEdge(y,S,f)===!0&&(u.push(y.x,y.y,y.z),u.push(S.x,S.y,S.z))}}}else{const A=n.attributes.position;for(let w=0,C=A.count/3;w<C;w++)for(let T=0;T<3;T++){const R=3*w+T,I=3*w+(T+1)%3;y.fromBufferAttribute(A,R),S.fromBufferAttribute(A,I),isUniqueEdge(y,S,f)===!0&&(u.push(y.x,y.y,y.z),u.push(S.x,S.y,S.z))}}this.setAttribute("position",new Float32BufferAttribute(u,3))}}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}}function isUniqueEdge(s,n,u){const f=`${s.x},${s.y},${s.z}-${n.x},${n.y},${n.z}`,y=`${n.x},${n.y},${n.z}-${s.x},${s.y},${s.z}`;return u.has(f)===!0||u.has(y)===!0?!1:(u.add(f),u.add(y),!0)}var Geometries=Object.freeze({__proto__:null,BoxGeometry,CapsuleGeometry,CircleGeometry,ConeGeometry,CylinderGeometry,DodecahedronGeometry,EdgesGeometry,ExtrudeGeometry,IcosahedronGeometry,LatheGeometry,OctahedronGeometry,PlaneGeometry,PolyhedronGeometry,RingGeometry,ShapeGeometry,SphereGeometry,TetrahedronGeometry,TorusGeometry,TorusKnotGeometry,TubeGeometry,WireframeGeometry});class ShadowMaterial extends Material{constructor(n){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Color(0),this.transparent=!0,this.fog=!0,this.setValues(n)}copy(n){return super.copy(n),this.color.copy(n.color),this.fog=n.fog,this}}class RawShaderMaterial extends ShaderMaterial{constructor(n){super(n),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class MeshStandardMaterial extends Material{constructor(n){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Color(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Euler,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(n)}copy(n){return super.copy(n),this.defines={STANDARD:""},this.color.copy(n.color),this.roughness=n.roughness,this.metalness=n.metalness,this.map=n.map,this.lightMap=n.lightMap,this.lightMapIntensity=n.lightMapIntensity,this.aoMap=n.aoMap,this.aoMapIntensity=n.aoMapIntensity,this.emissive.copy(n.emissive),this.emissiveMap=n.emissiveMap,this.emissiveIntensity=n.emissiveIntensity,this.bumpMap=n.bumpMap,this.bumpScale=n.bumpScale,this.normalMap=n.normalMap,this.normalMapType=n.normalMapType,this.normalScale.copy(n.normalScale),this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.roughnessMap=n.roughnessMap,this.metalnessMap=n.metalnessMap,this.alphaMap=n.alphaMap,this.envMap=n.envMap,this.envMapRotation.copy(n.envMapRotation),this.envMapIntensity=n.envMapIntensity,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.wireframeLinecap=n.wireframeLinecap,this.wireframeLinejoin=n.wireframeLinejoin,this.flatShading=n.flatShading,this.fog=n.fog,this}}class MeshPhysicalMaterial extends MeshStandardMaterial{constructor(n){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Vector2(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return clamp(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(u){this.ior=(1+.4*u)/(1-.4*u)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Color(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Color(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Color(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(n)}get anisotropy(){return this._anisotropy}set anisotropy(n){this._anisotropy>0!=n>0&&this.version++,this._anisotropy=n}get clearcoat(){return this._clearcoat}set clearcoat(n){this._clearcoat>0!=n>0&&this.version++,this._clearcoat=n}get iridescence(){return this._iridescence}set iridescence(n){this._iridescence>0!=n>0&&this.version++,this._iridescence=n}get dispersion(){return this._dispersion}set dispersion(n){this._dispersion>0!=n>0&&this.version++,this._dispersion=n}get sheen(){return this._sheen}set sheen(n){this._sheen>0!=n>0&&this.version++,this._sheen=n}get transmission(){return this._transmission}set transmission(n){this._transmission>0!=n>0&&this.version++,this._transmission=n}copy(n){return super.copy(n),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=n.anisotropy,this.anisotropyRotation=n.anisotropyRotation,this.anisotropyMap=n.anisotropyMap,this.clearcoat=n.clearcoat,this.clearcoatMap=n.clearcoatMap,this.clearcoatRoughness=n.clearcoatRoughness,this.clearcoatRoughnessMap=n.clearcoatRoughnessMap,this.clearcoatNormalMap=n.clearcoatNormalMap,this.clearcoatNormalScale.copy(n.clearcoatNormalScale),this.dispersion=n.dispersion,this.ior=n.ior,this.iridescence=n.iridescence,this.iridescenceMap=n.iridescenceMap,this.iridescenceIOR=n.iridescenceIOR,this.iridescenceThicknessRange=[...n.iridescenceThicknessRange],this.iridescenceThicknessMap=n.iridescenceThicknessMap,this.sheen=n.sheen,this.sheenColor.copy(n.sheenColor),this.sheenColorMap=n.sheenColorMap,this.sheenRoughness=n.sheenRoughness,this.sheenRoughnessMap=n.sheenRoughnessMap,this.transmission=n.transmission,this.transmissionMap=n.transmissionMap,this.thickness=n.thickness,this.thicknessMap=n.thicknessMap,this.attenuationDistance=n.attenuationDistance,this.attenuationColor.copy(n.attenuationColor),this.specularIntensity=n.specularIntensity,this.specularIntensityMap=n.specularIntensityMap,this.specularColor.copy(n.specularColor),this.specularColorMap=n.specularColorMap,this}}class MeshPhongMaterial extends Material{constructor(n){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Color(16777215),this.specular=new Color(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Euler,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(n)}copy(n){return super.copy(n),this.color.copy(n.color),this.specular.copy(n.specular),this.shininess=n.shininess,this.map=n.map,this.lightMap=n.lightMap,this.lightMapIntensity=n.lightMapIntensity,this.aoMap=n.aoMap,this.aoMapIntensity=n.aoMapIntensity,this.emissive.copy(n.emissive),this.emissiveMap=n.emissiveMap,this.emissiveIntensity=n.emissiveIntensity,this.bumpMap=n.bumpMap,this.bumpScale=n.bumpScale,this.normalMap=n.normalMap,this.normalMapType=n.normalMapType,this.normalScale.copy(n.normalScale),this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.specularMap=n.specularMap,this.alphaMap=n.alphaMap,this.envMap=n.envMap,this.envMapRotation.copy(n.envMapRotation),this.combine=n.combine,this.reflectivity=n.reflectivity,this.refractionRatio=n.refractionRatio,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.wireframeLinecap=n.wireframeLinecap,this.wireframeLinejoin=n.wireframeLinejoin,this.flatShading=n.flatShading,this.fog=n.fog,this}}class MeshToonMaterial extends Material{constructor(n){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Color(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(n)}copy(n){return super.copy(n),this.color.copy(n.color),this.map=n.map,this.gradientMap=n.gradientMap,this.lightMap=n.lightMap,this.lightMapIntensity=n.lightMapIntensity,this.aoMap=n.aoMap,this.aoMapIntensity=n.aoMapIntensity,this.emissive.copy(n.emissive),this.emissiveMap=n.emissiveMap,this.emissiveIntensity=n.emissiveIntensity,this.bumpMap=n.bumpMap,this.bumpScale=n.bumpScale,this.normalMap=n.normalMap,this.normalMapType=n.normalMapType,this.normalScale.copy(n.normalScale),this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.alphaMap=n.alphaMap,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.wireframeLinecap=n.wireframeLinecap,this.wireframeLinejoin=n.wireframeLinejoin,this.fog=n.fog,this}}class MeshNormalMaterial extends Material{constructor(n){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(n)}copy(n){return super.copy(n),this.bumpMap=n.bumpMap,this.bumpScale=n.bumpScale,this.normalMap=n.normalMap,this.normalMapType=n.normalMapType,this.normalScale.copy(n.normalScale),this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.flatShading=n.flatShading,this}}class MeshLambertMaterial extends Material{constructor(n){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Euler,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(n)}copy(n){return super.copy(n),this.color.copy(n.color),this.map=n.map,this.lightMap=n.lightMap,this.lightMapIntensity=n.lightMapIntensity,this.aoMap=n.aoMap,this.aoMapIntensity=n.aoMapIntensity,this.emissive.copy(n.emissive),this.emissiveMap=n.emissiveMap,this.emissiveIntensity=n.emissiveIntensity,this.bumpMap=n.bumpMap,this.bumpScale=n.bumpScale,this.normalMap=n.normalMap,this.normalMapType=n.normalMapType,this.normalScale.copy(n.normalScale),this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.specularMap=n.specularMap,this.alphaMap=n.alphaMap,this.envMap=n.envMap,this.envMapRotation.copy(n.envMapRotation),this.combine=n.combine,this.reflectivity=n.reflectivity,this.refractionRatio=n.refractionRatio,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.wireframeLinecap=n.wireframeLinecap,this.wireframeLinejoin=n.wireframeLinejoin,this.flatShading=n.flatShading,this.fog=n.fog,this}}class MeshDepthMaterial extends Material{constructor(n){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=BasicDepthPacking,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(n)}copy(n){return super.copy(n),this.depthPacking=n.depthPacking,this.map=n.map,this.alphaMap=n.alphaMap,this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this}}class MeshDistanceMaterial extends Material{constructor(n){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(n)}copy(n){return super.copy(n),this.map=n.map,this.alphaMap=n.alphaMap,this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this}}class MeshMatcapMaterial extends Material{constructor(n){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Color(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.fog=!0,this.setValues(n)}copy(n){return super.copy(n),this.defines={MATCAP:""},this.color.copy(n.color),this.matcap=n.matcap,this.map=n.map,this.bumpMap=n.bumpMap,this.bumpScale=n.bumpScale,this.normalMap=n.normalMap,this.normalMapType=n.normalMapType,this.normalScale.copy(n.normalScale),this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.alphaMap=n.alphaMap,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.flatShading=n.flatShading,this.fog=n.fog,this}}class LineDashedMaterial extends LineBasicMaterial{constructor(n){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(n)}copy(n){return super.copy(n),this.scale=n.scale,this.dashSize=n.dashSize,this.gapSize=n.gapSize,this}}function convertArray(s,n){return!s||s.constructor===n?s:typeof n.BYTES_PER_ELEMENT=="number"?new n(s):Array.prototype.slice.call(s)}function getKeyframeOrder(s){function n(y,S){return s[y]-s[S]}const u=s.length,f=new Array(u);for(let y=0;y!==u;++y)f[y]=y;return f.sort(n),f}function sortedArray(s,n,u){const f=s.length,y=new s.constructor(f);for(let S=0,A=0;A!==f;++S){const w=u[S]*n;for(let C=0;C!==n;++C)y[A++]=s[w+C]}return y}function flattenJSON(s,n,u,f){let y=1,S=s[0];for(;S!==void 0&&S[f]===void 0;)S=s[y++];if(S===void 0)return;let A=S[f];if(A!==void 0)if(Array.isArray(A))do A=S[f],A!==void 0&&(n.push(S.time),u.push(...A)),S=s[y++];while(S!==void 0);else if(A.toArray!==void 0)do A=S[f],A!==void 0&&(n.push(S.time),A.toArray(u,u.length)),S=s[y++];while(S!==void 0);else do A=S[f],A!==void 0&&(n.push(S.time),u.push(A)),S=s[y++];while(S!==void 0)}function subclip(s,n,u,f,y=30){const S=s.clone();S.name=n;const A=[];for(let C=0;C<S.tracks.length;++C){const T=S.tracks[C],R=T.getValueSize(),I=[],N=[];for(let L=0;L<T.times.length;++L){const F=T.times[L]*y;if(!(F<u||F>=f)){I.push(T.times[L]);for(let H=0;H<R;++H)N.push(T.values[L*R+H])}}I.length!==0&&(T.times=convertArray(I,T.times.constructor),T.values=convertArray(N,T.values.constructor),A.push(T))}S.tracks=A;let w=1/0;for(let C=0;C<S.tracks.length;++C)w>S.tracks[C].times[0]&&(w=S.tracks[C].times[0]);for(let C=0;C<S.tracks.length;++C)S.tracks[C].shift(-1*w);return S.resetDuration(),S}function makeClipAdditive(s,n=0,u=s,f=30){f<=0&&(f=30);const y=u.tracks.length,S=n/f;for(let A=0;A<y;++A){const w=u.tracks[A],C=w.ValueTypeName;if(C==="bool"||C==="string")continue;const T=s.tracks.find(function(U){return U.name===w.name&&U.ValueTypeName===C});if(T===void 0)continue;let R=0;const I=w.getValueSize();w.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(R=I/3);let N=0;const L=T.getValueSize();T.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(N=L/3);const F=w.times.length-1;let H;if(S<=w.times[0]){const U=R,G=I-R;H=w.values.slice(U,G)}else if(S>=w.times[F]){const U=F*I+R,G=U+I-R;H=w.values.slice(U,G)}else{const U=w.createInterpolant(),G=R,Y=I-R;U.evaluate(S),H=U.resultBuffer.slice(G,Y)}C==="quaternion"&&new Quaternion().fromArray(H).normalize().conjugate().toArray(H);const z=T.times.length;for(let U=0;U<z;++U){const G=U*L+N;if(C==="quaternion")Quaternion.multiplyQuaternionsFlat(T.values,G,H,0,T.values,G);else{const Y=L-N*2;for(let K=0;K<Y;++K)T.values[G+K]-=H[K]}}}return s.blendMode=AdditiveAnimationBlendMode,s}class AnimationUtils{static convertArray(n,u){return convertArray(n,u)}static isTypedArray(n){return isTypedArray(n)}static getKeyframeOrder(n){return getKeyframeOrder(n)}static sortedArray(n,u,f){return sortedArray(n,u,f)}static flattenJSON(n,u,f,y){flattenJSON(n,u,f,y)}static subclip(n,u,f,y,S=30){return subclip(n,u,f,y,S)}static makeClipAdditive(n,u=0,f=n,y=30){return makeClipAdditive(n,u,f,y)}}class Interpolant{constructor(n,u,f,y){this.parameterPositions=n,this._cachedIndex=0,this.resultBuffer=y!==void 0?y:new u.constructor(f),this.sampleValues=u,this.valueSize=f,this.settings=null,this.DefaultSettings_={}}evaluate(n){const u=this.parameterPositions;let f=this._cachedIndex,y=u[f],S=u[f-1];e:{t:{let A;n:{r:if(!(n<y)){for(let w=f+2;;){if(y===void 0){if(n<S)break r;return f=u.length,this._cachedIndex=f,this.copySampleValue_(f-1)}if(f===w)break;if(S=y,y=u[++f],n<y)break t}A=u.length;break n}if(!(n>=S)){const w=u[1];n<w&&(f=2,S=w);for(let C=f-2;;){if(S===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(f===C)break;if(y=S,S=u[--f-1],n>=S)break t}A=f,f=0;break n}break e}for(;f<A;){const w=f+A>>>1;n<u[w]?A=w:f=w+1}if(y=u[f],S=u[f-1],S===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(y===void 0)return f=u.length,this._cachedIndex=f,this.copySampleValue_(f-1)}this._cachedIndex=f,this.intervalChanged_(f,S,y)}return this.interpolate_(f,S,n,y)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(n){const u=this.resultBuffer,f=this.sampleValues,y=this.valueSize,S=n*y;for(let A=0;A!==y;++A)u[A]=f[S+A];return u}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class CubicInterpolant extends Interpolant{constructor(n,u,f,y){super(n,u,f,y),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding}}intervalChanged_(n,u,f){const y=this.parameterPositions;let S=n-2,A=n+1,w=y[S],C=y[A];if(w===void 0)switch(this.getSettings_().endingStart){case ZeroSlopeEnding:S=n,w=2*u-f;break;case WrapAroundEnding:S=y.length-2,w=u+y[S]-y[S+1];break;default:S=n,w=f}if(C===void 0)switch(this.getSettings_().endingEnd){case ZeroSlopeEnding:A=n,C=2*f-u;break;case WrapAroundEnding:A=1,C=f+y[1]-y[0];break;default:A=n-1,C=u}const T=(f-u)*.5,R=this.valueSize;this._weightPrev=T/(u-w),this._weightNext=T/(C-f),this._offsetPrev=S*R,this._offsetNext=A*R}interpolate_(n,u,f,y){const S=this.resultBuffer,A=this.sampleValues,w=this.valueSize,C=n*w,T=C-w,R=this._offsetPrev,I=this._offsetNext,N=this._weightPrev,L=this._weightNext,F=(f-u)/(y-u),H=F*F,z=H*F,U=-N*z+2*N*H-N*F,G=(1+N)*z+(-1.5-2*N)*H+(-.5+N)*F+1,Y=(-1-L)*z+(1.5+L)*H+.5*F,K=L*z-L*H;for(let Z=0;Z!==w;++Z)S[Z]=U*A[R+Z]+G*A[T+Z]+Y*A[C+Z]+K*A[I+Z];return S}}class LinearInterpolant extends Interpolant{constructor(n,u,f,y){super(n,u,f,y)}interpolate_(n,u,f,y){const S=this.resultBuffer,A=this.sampleValues,w=this.valueSize,C=n*w,T=C-w,R=(f-u)/(y-u),I=1-R;for(let N=0;N!==w;++N)S[N]=A[T+N]*I+A[C+N]*R;return S}}class DiscreteInterpolant extends Interpolant{constructor(n,u,f,y){super(n,u,f,y)}interpolate_(n){return this.copySampleValue_(n-1)}}class KeyframeTrack{constructor(n,u,f,y){if(n===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(u===void 0||u.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+n);this.name=n,this.times=convertArray(u,this.TimeBufferType),this.values=convertArray(f,this.ValueBufferType),this.setInterpolation(y||this.DefaultInterpolation)}static toJSON(n){const u=n.constructor;let f;if(u.toJSON!==this.toJSON)f=u.toJSON(n);else{f={name:n.name,times:convertArray(n.times,Array),values:convertArray(n.values,Array)};const y=n.getInterpolation();y!==n.DefaultInterpolation&&(f.interpolation=y)}return f.type=n.ValueTypeName,f}InterpolantFactoryMethodDiscrete(n){return new DiscreteInterpolant(this.times,this.values,this.getValueSize(),n)}InterpolantFactoryMethodLinear(n){return new LinearInterpolant(this.times,this.values,this.getValueSize(),n)}InterpolantFactoryMethodSmooth(n){return new CubicInterpolant(this.times,this.values,this.getValueSize(),n)}setInterpolation(n){let u;switch(n){case InterpolateDiscrete:u=this.InterpolantFactoryMethodDiscrete;break;case InterpolateLinear:u=this.InterpolantFactoryMethodLinear;break;case InterpolateSmooth:u=this.InterpolantFactoryMethodSmooth;break}if(u===void 0){const f="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(n!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(f);return warn("KeyframeTrack:",f),this}return this.createInterpolant=u,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return InterpolateDiscrete;case this.InterpolantFactoryMethodLinear:return InterpolateLinear;case this.InterpolantFactoryMethodSmooth:return InterpolateSmooth}}getValueSize(){return this.values.length/this.times.length}shift(n){if(n!==0){const u=this.times;for(let f=0,y=u.length;f!==y;++f)u[f]+=n}return this}scale(n){if(n!==1){const u=this.times;for(let f=0,y=u.length;f!==y;++f)u[f]*=n}return this}trim(n,u){const f=this.times,y=f.length;let S=0,A=y-1;for(;S!==y&&f[S]<n;)++S;for(;A!==-1&&f[A]>u;)--A;if(++A,S!==0||A!==y){S>=A&&(A=Math.max(A,1),S=A-1);const w=this.getValueSize();this.times=f.slice(S,A),this.values=this.values.slice(S*w,A*w)}return this}validate(){let n=!0;const u=this.getValueSize();u-Math.floor(u)!==0&&(error("KeyframeTrack: Invalid value size in track.",this),n=!1);const f=this.times,y=this.values,S=f.length;S===0&&(error("KeyframeTrack: Track is empty.",this),n=!1);let A=null;for(let w=0;w!==S;w++){const C=f[w];if(typeof C=="number"&&isNaN(C)){error("KeyframeTrack: Time is not a valid number.",this,w,C),n=!1;break}if(A!==null&&A>C){error("KeyframeTrack: Out of order keys.",this,w,C,A),n=!1;break}A=C}if(y!==void 0&&isTypedArray(y))for(let w=0,C=y.length;w!==C;++w){const T=y[w];if(isNaN(T)){error("KeyframeTrack: Value is not a valid number.",this,w,T),n=!1;break}}return n}optimize(){const n=this.times.slice(),u=this.values.slice(),f=this.getValueSize(),y=this.getInterpolation()===InterpolateSmooth,S=n.length-1;let A=1;for(let w=1;w<S;++w){let C=!1;const T=n[w],R=n[w+1];if(T!==R&&(w!==1||T!==n[0]))if(y)C=!0;else{const I=w*f,N=I-f,L=I+f;for(let F=0;F!==f;++F){const H=u[I+F];if(H!==u[N+F]||H!==u[L+F]){C=!0;break}}}if(C){if(w!==A){n[A]=n[w];const I=w*f,N=A*f;for(let L=0;L!==f;++L)u[N+L]=u[I+L]}++A}}if(S>0){n[A]=n[S];for(let w=S*f,C=A*f,T=0;T!==f;++T)u[C+T]=u[w+T];++A}return A!==n.length?(this.times=n.slice(0,A),this.values=u.slice(0,A*f)):(this.times=n,this.values=u),this}clone(){const n=this.times.slice(),u=this.values.slice(),f=this.constructor,y=new f(this.name,n,u);return y.createInterpolant=this.createInterpolant,y}}KeyframeTrack.prototype.ValueTypeName="";KeyframeTrack.prototype.TimeBufferType=Float32Array;KeyframeTrack.prototype.ValueBufferType=Float32Array;KeyframeTrack.prototype.DefaultInterpolation=InterpolateLinear;class BooleanKeyframeTrack extends KeyframeTrack{constructor(n,u,f){super(n,u,f)}}BooleanKeyframeTrack.prototype.ValueTypeName="bool";BooleanKeyframeTrack.prototype.ValueBufferType=Array;BooleanKeyframeTrack.prototype.DefaultInterpolation=InterpolateDiscrete;BooleanKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0;BooleanKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class ColorKeyframeTrack extends KeyframeTrack{constructor(n,u,f,y){super(n,u,f,y)}}ColorKeyframeTrack.prototype.ValueTypeName="color";class NumberKeyframeTrack extends KeyframeTrack{constructor(n,u,f,y){super(n,u,f,y)}}NumberKeyframeTrack.prototype.ValueTypeName="number";class QuaternionLinearInterpolant extends Interpolant{constructor(n,u,f,y){super(n,u,f,y)}interpolate_(n,u,f,y){const S=this.resultBuffer,A=this.sampleValues,w=this.valueSize,C=(f-u)/(y-u);let T=n*w;for(let R=T+w;T!==R;T+=4)Quaternion.slerpFlat(S,0,A,T-w,A,T,C);return S}}class QuaternionKeyframeTrack extends KeyframeTrack{constructor(n,u,f,y){super(n,u,f,y)}InterpolantFactoryMethodLinear(n){return new QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),n)}}QuaternionKeyframeTrack.prototype.ValueTypeName="quaternion";QuaternionKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class StringKeyframeTrack extends KeyframeTrack{constructor(n,u,f){super(n,u,f)}}StringKeyframeTrack.prototype.ValueTypeName="string";StringKeyframeTrack.prototype.ValueBufferType=Array;StringKeyframeTrack.prototype.DefaultInterpolation=InterpolateDiscrete;StringKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0;StringKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class VectorKeyframeTrack extends KeyframeTrack{constructor(n,u,f,y){super(n,u,f,y)}}VectorKeyframeTrack.prototype.ValueTypeName="vector";class AnimationClip{constructor(n="",u=-1,f=[],y=NormalAnimationBlendMode){this.name=n,this.tracks=f,this.duration=u,this.blendMode=y,this.uuid=generateUUID$1(),this.userData={},this.duration<0&&this.resetDuration()}static parse(n){const u=[],f=n.tracks,y=1/(n.fps||1);for(let A=0,w=f.length;A!==w;++A)u.push(parseKeyframeTrack(f[A]).scale(y));const S=new this(n.name,n.duration,u,n.blendMode);return S.uuid=n.uuid,S.userData=JSON.parse(n.userData||"{}"),S}static toJSON(n){const u=[],f=n.tracks,y={name:n.name,duration:n.duration,tracks:u,uuid:n.uuid,blendMode:n.blendMode,userData:JSON.stringify(n.userData)};for(let S=0,A=f.length;S!==A;++S)u.push(KeyframeTrack.toJSON(f[S]));return y}static CreateFromMorphTargetSequence(n,u,f,y){const S=u.length,A=[];for(let w=0;w<S;w++){let C=[],T=[];C.push((w+S-1)%S,w,(w+1)%S),T.push(0,1,0);const R=getKeyframeOrder(C);C=sortedArray(C,1,R),T=sortedArray(T,1,R),!y&&C[0]===0&&(C.push(S),T.push(T[0])),A.push(new NumberKeyframeTrack(".morphTargetInfluences["+u[w].name+"]",C,T).scale(1/f))}return new this(n,-1,A)}static findByName(n,u){let f=n;if(!Array.isArray(n)){const y=n;f=y.geometry&&y.geometry.animations||y.animations}for(let y=0;y<f.length;y++)if(f[y].name===u)return f[y];return null}static CreateClipsFromMorphTargetSequences(n,u,f){const y={},S=/^([\w-]*?)([\d]+)$/;for(let w=0,C=n.length;w<C;w++){const T=n[w],R=T.name.match(S);if(R&&R.length>1){const I=R[1];let N=y[I];N||(y[I]=N=[]),N.push(T)}}const A=[];for(const w in y)A.push(this.CreateFromMorphTargetSequence(w,y[w],u,f));return A}static parseAnimation(n,u){if(warn("AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!n)return error("AnimationClip: No animation in JSONLoader data."),null;const f=function(I,N,L,F,H){if(L.length!==0){const z=[],U=[];flattenJSON(L,z,U,F),z.length!==0&&H.push(new I(N,z,U))}},y=[],S=n.name||"default",A=n.fps||30,w=n.blendMode;let C=n.length||-1;const T=n.hierarchy||[];for(let I=0;I<T.length;I++){const N=T[I].keys;if(!(!N||N.length===0))if(N[0].morphTargets){const L={};let F;for(F=0;F<N.length;F++)if(N[F].morphTargets)for(let H=0;H<N[F].morphTargets.length;H++)L[N[F].morphTargets[H]]=-1;for(const H in L){const z=[],U=[];for(let G=0;G!==N[F].morphTargets.length;++G){const Y=N[F];z.push(Y.time),U.push(Y.morphTarget===H?1:0)}y.push(new NumberKeyframeTrack(".morphTargetInfluence["+H+"]",z,U))}C=L.length*A}else{const L=".bones["+u[I].name+"]";f(VectorKeyframeTrack,L+".position",N,"pos",y),f(QuaternionKeyframeTrack,L+".quaternion",N,"rot",y),f(VectorKeyframeTrack,L+".scale",N,"scl",y)}}return y.length===0?null:new this(S,C,y,w)}resetDuration(){const n=this.tracks;let u=0;for(let f=0,y=n.length;f!==y;++f){const S=this.tracks[f];u=Math.max(u,S.times[S.times.length-1])}return this.duration=u,this}trim(){for(let n=0;n<this.tracks.length;n++)this.tracks[n].trim(0,this.duration);return this}validate(){let n=!0;for(let u=0;u<this.tracks.length;u++)n=n&&this.tracks[u].validate();return n}optimize(){for(let n=0;n<this.tracks.length;n++)this.tracks[n].optimize();return this}clone(){const n=[];for(let f=0;f<this.tracks.length;f++)n.push(this.tracks[f].clone());const u=new this.constructor(this.name,this.duration,n,this.blendMode);return u.userData=JSON.parse(JSON.stringify(this.userData)),u}toJSON(){return this.constructor.toJSON(this)}}function getTrackTypeForValueTypeName(s){switch(s.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return NumberKeyframeTrack;case"vector":case"vector2":case"vector3":case"vector4":return VectorKeyframeTrack;case"color":return ColorKeyframeTrack;case"quaternion":return QuaternionKeyframeTrack;case"bool":case"boolean":return BooleanKeyframeTrack;case"string":return StringKeyframeTrack}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+s)}function parseKeyframeTrack(s){if(s.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const n=getTrackTypeForValueTypeName(s.type);if(s.times===void 0){const u=[],f=[];flattenJSON(s.keys,u,f,"value"),s.times=u,s.values=f}return n.parse!==void 0?n.parse(s):new n(s.name,s.times,s.values,s.interpolation)}const Cache={enabled:!1,files:{},add:function(s,n){this.enabled!==!1&&(this.files[s]=n)},get:function(s){if(this.enabled!==!1)return this.files[s]},remove:function(s){delete this.files[s]},clear:function(){this.files={}}};class LoadingManager{constructor(n,u,f){const y=this;let S=!1,A=0,w=0,C;const T=[];this.onStart=void 0,this.onLoad=n,this.onProgress=u,this.onError=f,this._abortController=null,this.itemStart=function(R){w++,S===!1&&y.onStart!==void 0&&y.onStart(R,A,w),S=!0},this.itemEnd=function(R){A++,y.onProgress!==void 0&&y.onProgress(R,A,w),A===w&&(S=!1,y.onLoad!==void 0&&y.onLoad())},this.itemError=function(R){y.onError!==void 0&&y.onError(R)},this.resolveURL=function(R){return C?C(R):R},this.setURLModifier=function(R){return C=R,this},this.addHandler=function(R,I){return T.push(R,I),this},this.removeHandler=function(R){const I=T.indexOf(R);return I!==-1&&T.splice(I,2),this},this.getHandler=function(R){for(let I=0,N=T.length;I<N;I+=2){const L=T[I],F=T[I+1];if(L.global&&(L.lastIndex=0),L.test(R))return F}return null},this.abort=function(){return this.abortController.abort(),this._abortController=null,this}}get abortController(){return this._abortController||(this._abortController=new AbortController),this._abortController}}const DefaultLoadingManager=new LoadingManager;class Loader{constructor(n){this.manager=n!==void 0?n:DefaultLoadingManager,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(n,u){const f=this;return new Promise(function(y,S){f.load(n,y,u,S)})}parse(){}setCrossOrigin(n){return this.crossOrigin=n,this}setWithCredentials(n){return this.withCredentials=n,this}setPath(n){return this.path=n,this}setResourcePath(n){return this.resourcePath=n,this}setRequestHeader(n){return this.requestHeader=n,this}abort(){return this}}Loader.DEFAULT_MATERIAL_NAME="__DEFAULT";const loading={};class HttpError extends Error{constructor(n,u){super(n),this.response=u}}class FileLoader extends Loader{constructor(n){super(n),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(n,u,f,y){n===void 0&&(n=""),this.path!==void 0&&(n=this.path+n),n=this.manager.resolveURL(n);const S=Cache.get(`file:${n}`);if(S!==void 0)return this.manager.itemStart(n),setTimeout(()=>{u&&u(S),this.manager.itemEnd(n)},0),S;if(loading[n]!==void 0){loading[n].push({onLoad:u,onProgress:f,onError:y});return}loading[n]=[],loading[n].push({onLoad:u,onProgress:f,onError:y});const A=new Request(n,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),w=this.mimeType,C=this.responseType;fetch(A).then(T=>{if(T.status===200||T.status===0){if(T.status===0&&warn("FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||T.body===void 0||T.body.getReader===void 0)return T;const R=loading[n],I=T.body.getReader(),N=T.headers.get("X-File-Size")||T.headers.get("Content-Length"),L=N?parseInt(N):0,F=L!==0;let H=0;const z=new ReadableStream({start(U){G();function G(){I.read().then(({done:Y,value:K})=>{if(Y)U.close();else{H+=K.byteLength;const Z=new ProgressEvent("progress",{lengthComputable:F,loaded:H,total:L});for(let J=0,te=R.length;J<te;J++){const de=R[J];de.onProgress&&de.onProgress(Z)}U.enqueue(K),G()}},Y=>{U.error(Y)})}}});return new Response(z)}else throw new HttpError(`fetch for "${T.url}" responded with ${T.status}: ${T.statusText}`,T)}).then(T=>{switch(C){case"arraybuffer":return T.arrayBuffer();case"blob":return T.blob();case"document":return T.text().then(R=>new DOMParser().parseFromString(R,w));case"json":return T.json();default:if(w==="")return T.text();{const I=/charset="?([^;"\s]*)"?/i.exec(w),N=I&&I[1]?I[1].toLowerCase():void 0,L=new TextDecoder(N);return T.arrayBuffer().then(F=>L.decode(F))}}}).then(T=>{Cache.add(`file:${n}`,T);const R=loading[n];delete loading[n];for(let I=0,N=R.length;I<N;I++){const L=R[I];L.onLoad&&L.onLoad(T)}}).catch(T=>{const R=loading[n];if(R===void 0)throw this.manager.itemError(n),T;delete loading[n];for(let I=0,N=R.length;I<N;I++){const L=R[I];L.onError&&L.onError(T)}this.manager.itemError(n)}).finally(()=>{this.manager.itemEnd(n)}),this.manager.itemStart(n)}setResponseType(n){return this.responseType=n,this}setMimeType(n){return this.mimeType=n,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}class AnimationLoader extends Loader{constructor(n){super(n)}load(n,u,f,y){const S=this,A=new FileLoader(this.manager);A.setPath(this.path),A.setRequestHeader(this.requestHeader),A.setWithCredentials(this.withCredentials),A.load(n,function(w){try{u(S.parse(JSON.parse(w)))}catch(C){y?y(C):error(C),S.manager.itemError(n)}},f,y)}parse(n){const u=[];for(let f=0;f<n.length;f++){const y=AnimationClip.parse(n[f]);u.push(y)}return u}}class CompressedTextureLoader extends Loader{constructor(n){super(n)}load(n,u,f,y){const S=this,A=[],w=new CompressedTexture,C=new FileLoader(this.manager);C.setPath(this.path),C.setResponseType("arraybuffer"),C.setRequestHeader(this.requestHeader),C.setWithCredentials(S.withCredentials);let T=0;function R(I){C.load(n[I],function(N){const L=S.parse(N,!0);A[I]={width:L.width,height:L.height,format:L.format,mipmaps:L.mipmaps},T+=1,T===6&&(L.mipmapCount===1&&(w.minFilter=LinearFilter),w.image=A,w.format=L.format,w.needsUpdate=!0,u&&u(w))},f,y)}if(Array.isArray(n))for(let I=0,N=n.length;I<N;++I)R(I);else C.load(n,function(I){const N=S.parse(I,!0);if(N.isCubemap){const L=N.mipmaps.length/N.mipmapCount;for(let F=0;F<L;F++){A[F]={mipmaps:[]};for(let H=0;H<N.mipmapCount;H++)A[F].mipmaps.push(N.mipmaps[F*N.mipmapCount+H]),A[F].format=N.format,A[F].width=N.width,A[F].height=N.height}w.image=A}else w.image.width=N.width,w.image.height=N.height,w.mipmaps=N.mipmaps;N.mipmapCount===1&&(w.minFilter=LinearFilter),w.format=N.format,w.needsUpdate=!0,u&&u(w)},f,y);return w}}const _loading=new WeakMap;class ImageLoader extends Loader{constructor(n){super(n)}load(n,u,f,y){this.path!==void 0&&(n=this.path+n),n=this.manager.resolveURL(n);const S=this,A=Cache.get(`image:${n}`);if(A!==void 0){if(A.complete===!0)S.manager.itemStart(n),setTimeout(function(){u&&u(A),S.manager.itemEnd(n)},0);else{let I=_loading.get(A);I===void 0&&(I=[],_loading.set(A,I)),I.push({onLoad:u,onError:y})}return A}const w=createElementNS("img");function C(){R(),u&&u(this);const I=_loading.get(this)||[];for(let N=0;N<I.length;N++){const L=I[N];L.onLoad&&L.onLoad(this)}_loading.delete(this),S.manager.itemEnd(n)}function T(I){R(),y&&y(I),Cache.remove(`image:${n}`);const N=_loading.get(this)||[];for(let L=0;L<N.length;L++){const F=N[L];F.onError&&F.onError(I)}_loading.delete(this),S.manager.itemError(n),S.manager.itemEnd(n)}function R(){w.removeEventListener("load",C,!1),w.removeEventListener("error",T,!1)}return w.addEventListener("load",C,!1),w.addEventListener("error",T,!1),n.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(w.crossOrigin=this.crossOrigin),Cache.add(`image:${n}`,w),S.manager.itemStart(n),w.src=n,w}}class CubeTextureLoader extends Loader{constructor(n){super(n)}load(n,u,f,y){const S=new CubeTexture;S.colorSpace=SRGBColorSpace$1;const A=new ImageLoader(this.manager);A.setCrossOrigin(this.crossOrigin),A.setPath(this.path);let w=0;function C(T){A.load(n[T],function(R){S.images[T]=R,w++,w===6&&(S.needsUpdate=!0,u&&u(S))},void 0,y)}for(let T=0;T<n.length;++T)C(T);return S}}class DataTextureLoader extends Loader{constructor(n){super(n)}load(n,u,f,y){const S=this,A=new DataTexture,w=new FileLoader(this.manager);return w.setResponseType("arraybuffer"),w.setRequestHeader(this.requestHeader),w.setPath(this.path),w.setWithCredentials(S.withCredentials),w.load(n,function(C){let T;try{T=S.parse(C)}catch(R){if(y!==void 0)y(R);else{R(R);return}}T.image!==void 0?A.image=T.image:T.data!==void 0&&(A.image.width=T.width,A.image.height=T.height,A.image.data=T.data),A.wrapS=T.wrapS!==void 0?T.wrapS:ClampToEdgeWrapping,A.wrapT=T.wrapT!==void 0?T.wrapT:ClampToEdgeWrapping,A.magFilter=T.magFilter!==void 0?T.magFilter:LinearFilter,A.minFilter=T.minFilter!==void 0?T.minFilter:LinearFilter,A.anisotropy=T.anisotropy!==void 0?T.anisotropy:1,T.colorSpace!==void 0&&(A.colorSpace=T.colorSpace),T.flipY!==void 0&&(A.flipY=T.flipY),T.format!==void 0&&(A.format=T.format),T.type!==void 0&&(A.type=T.type),T.mipmaps!==void 0&&(A.mipmaps=T.mipmaps,A.minFilter=LinearMipmapLinearFilter),T.mipmapCount===1&&(A.minFilter=LinearFilter),T.generateMipmaps!==void 0&&(A.generateMipmaps=T.generateMipmaps),A.needsUpdate=!0,u&&u(A,T)},f,y),A}}class TextureLoader extends Loader{constructor(n){super(n)}load(n,u,f,y){const S=new Texture,A=new ImageLoader(this.manager);return A.setCrossOrigin(this.crossOrigin),A.setPath(this.path),A.load(n,function(w){S.image=w,S.needsUpdate=!0,u!==void 0&&u(S)},f,y),S}}class Light extends Object3D{constructor(n,u=1){super(),this.isLight=!0,this.type="Light",this.color=new Color(n),this.intensity=u}dispose(){this.dispatchEvent({type:"dispose"})}copy(n,u){return super.copy(n,u),this.color.copy(n.color),this.intensity=n.intensity,this}toJSON(n){const u=super.toJSON(n);return u.object.color=this.color.getHex(),u.object.intensity=this.intensity,u}}class HemisphereLight extends Light{constructor(n,u,f){super(n,f),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Object3D.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Color(u)}copy(n,u){return super.copy(n,u),this.groundColor.copy(n.groundColor),this}toJSON(n){const u=super.toJSON(n);return u.object.groundColor=this.groundColor.getHex(),u}}const _projScreenMatrix$2=new Matrix4,_lightPositionWorld$1=new Vector3,_lookTarget$1=new Vector3;class LightShadow{constructor(n){this.camera=n,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Vector2(512,512),this.mapType=UnsignedByteType,this.map=null,this.mapPass=null,this.matrix=new Matrix4,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Frustum,this._frameExtents=new Vector2(1,1),this._viewportCount=1,this._viewports=[new Vector4(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(n){const u=this.camera,f=this.matrix;_lightPositionWorld$1.setFromMatrixPosition(n.matrixWorld),u.position.copy(_lightPositionWorld$1),_lookTarget$1.setFromMatrixPosition(n.target.matrixWorld),u.lookAt(_lookTarget$1),u.updateMatrixWorld(),_projScreenMatrix$2.multiplyMatrices(u.projectionMatrix,u.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_projScreenMatrix$2,u.coordinateSystem,u.reversedDepth),u.reversedDepth?f.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):f.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),f.multiply(_projScreenMatrix$2)}getViewport(n){return this._viewports[n]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(n){return this.camera=n.camera.clone(),this.intensity=n.intensity,this.bias=n.bias,this.radius=n.radius,this.autoUpdate=n.autoUpdate,this.needsUpdate=n.needsUpdate,this.normalBias=n.normalBias,this.blurSamples=n.blurSamples,this.mapSize.copy(n.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const n={};return this.intensity!==1&&(n.intensity=this.intensity),this.bias!==0&&(n.bias=this.bias),this.normalBias!==0&&(n.normalBias=this.normalBias),this.radius!==1&&(n.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(n.mapSize=this.mapSize.toArray()),n.camera=this.camera.toJSON(!1).object,delete n.camera.matrix,n}}class SpotLightShadow extends LightShadow{constructor(){super(new PerspectiveCamera(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(n){const u=this.camera,f=RAD2DEG*2*n.angle*this.focus,y=this.mapSize.width/this.mapSize.height*this.aspect,S=n.distance||u.far;(f!==u.fov||y!==u.aspect||S!==u.far)&&(u.fov=f,u.aspect=y,u.far=S,u.updateProjectionMatrix()),super.updateMatrices(n)}copy(n){return super.copy(n),this.focus=n.focus,this}}class SpotLight extends Light{constructor(n,u,f=0,y=Math.PI/3,S=0,A=2){super(n,u),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Object3D.DEFAULT_UP),this.updateMatrix(),this.target=new Object3D,this.distance=f,this.angle=y,this.penumbra=S,this.decay=A,this.map=null,this.shadow=new SpotLightShadow}get power(){return this.intensity*Math.PI}set power(n){this.intensity=n/Math.PI}dispose(){super.dispose(),this.shadow.dispose()}copy(n,u){return super.copy(n,u),this.distance=n.distance,this.angle=n.angle,this.penumbra=n.penumbra,this.decay=n.decay,this.target=n.target.clone(),this.map=n.map,this.shadow=n.shadow.clone(),this}toJSON(n){const u=super.toJSON(n);return u.object.distance=this.distance,u.object.angle=this.angle,u.object.decay=this.decay,u.object.penumbra=this.penumbra,u.object.target=this.target.uuid,this.map&&this.map.isTexture&&(u.object.map=this.map.toJSON(n).uuid),u.object.shadow=this.shadow.toJSON(),u}}class PointLightShadow extends LightShadow{constructor(){super(new PerspectiveCamera(90,1,.5,500)),this.isPointLightShadow=!0}}class PointLight extends Light{constructor(n,u,f=0,y=2){super(n,u),this.isPointLight=!0,this.type="PointLight",this.distance=f,this.decay=y,this.shadow=new PointLightShadow}get power(){return this.intensity*4*Math.PI}set power(n){this.intensity=n/(4*Math.PI)}dispose(){super.dispose(),this.shadow.dispose()}copy(n,u){return super.copy(n,u),this.distance=n.distance,this.decay=n.decay,this.shadow=n.shadow.clone(),this}toJSON(n){const u=super.toJSON(n);return u.object.distance=this.distance,u.object.decay=this.decay,u.object.shadow=this.shadow.toJSON(),u}}class OrthographicCamera extends Camera{constructor(n=-1,u=1,f=1,y=-1,S=.1,A=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=n,this.right=u,this.top=f,this.bottom=y,this.near=S,this.far=A,this.updateProjectionMatrix()}copy(n,u){return super.copy(n,u),this.left=n.left,this.right=n.right,this.top=n.top,this.bottom=n.bottom,this.near=n.near,this.far=n.far,this.zoom=n.zoom,this.view=n.view===null?null:Object.assign({},n.view),this}setViewOffset(n,u,f,y,S,A){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=n,this.view.fullHeight=u,this.view.offsetX=f,this.view.offsetY=y,this.view.width=S,this.view.height=A,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const n=(this.right-this.left)/(2*this.zoom),u=(this.top-this.bottom)/(2*this.zoom),f=(this.right+this.left)/2,y=(this.top+this.bottom)/2;let S=f-n,A=f+n,w=y+u,C=y-u;if(this.view!==null&&this.view.enabled){const T=(this.right-this.left)/this.view.fullWidth/this.zoom,R=(this.top-this.bottom)/this.view.fullHeight/this.zoom;S+=T*this.view.offsetX,A=S+T*this.view.width,w-=R*this.view.offsetY,C=w-R*this.view.height}this.projectionMatrix.makeOrthographic(S,A,w,C,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(n){const u=super.toJSON(n);return u.object.zoom=this.zoom,u.object.left=this.left,u.object.right=this.right,u.object.top=this.top,u.object.bottom=this.bottom,u.object.near=this.near,u.object.far=this.far,this.view!==null&&(u.object.view=Object.assign({},this.view)),u}}class DirectionalLightShadow extends LightShadow{constructor(){super(new OrthographicCamera(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class DirectionalLight extends Light{constructor(n,u){super(n,u),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Object3D.DEFAULT_UP),this.updateMatrix(),this.target=new Object3D,this.shadow=new DirectionalLightShadow}dispose(){super.dispose(),this.shadow.dispose()}copy(n){return super.copy(n),this.target=n.target.clone(),this.shadow=n.shadow.clone(),this}toJSON(n){const u=super.toJSON(n);return u.object.shadow=this.shadow.toJSON(),u.object.target=this.target.uuid,u}}class AmbientLight extends Light{constructor(n,u){super(n,u),this.isAmbientLight=!0,this.type="AmbientLight"}}class RectAreaLight extends Light{constructor(n,u,f=10,y=10){super(n,u),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=f,this.height=y}get power(){return this.intensity*this.width*this.height*Math.PI}set power(n){this.intensity=n/(this.width*this.height*Math.PI)}copy(n){return super.copy(n),this.width=n.width,this.height=n.height,this}toJSON(n){const u=super.toJSON(n);return u.object.width=this.width,u.object.height=this.height,u}}class SphericalHarmonics3{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let n=0;n<9;n++)this.coefficients.push(new Vector3)}set(n){for(let u=0;u<9;u++)this.coefficients[u].copy(n[u]);return this}zero(){for(let n=0;n<9;n++)this.coefficients[n].set(0,0,0);return this}getAt(n,u){const f=n.x,y=n.y,S=n.z,A=this.coefficients;return u.copy(A[0]).multiplyScalar(.282095),u.addScaledVector(A[1],.488603*y),u.addScaledVector(A[2],.488603*S),u.addScaledVector(A[3],.488603*f),u.addScaledVector(A[4],1.092548*(f*y)),u.addScaledVector(A[5],1.092548*(y*S)),u.addScaledVector(A[6],.315392*(3*S*S-1)),u.addScaledVector(A[7],1.092548*(f*S)),u.addScaledVector(A[8],.546274*(f*f-y*y)),u}getIrradianceAt(n,u){const f=n.x,y=n.y,S=n.z,A=this.coefficients;return u.copy(A[0]).multiplyScalar(.886227),u.addScaledVector(A[1],2*.511664*y),u.addScaledVector(A[2],2*.511664*S),u.addScaledVector(A[3],2*.511664*f),u.addScaledVector(A[4],2*.429043*f*y),u.addScaledVector(A[5],2*.429043*y*S),u.addScaledVector(A[6],.743125*S*S-.247708),u.addScaledVector(A[7],2*.429043*f*S),u.addScaledVector(A[8],.429043*(f*f-y*y)),u}add(n){for(let u=0;u<9;u++)this.coefficients[u].add(n.coefficients[u]);return this}addScaledSH(n,u){for(let f=0;f<9;f++)this.coefficients[f].addScaledVector(n.coefficients[f],u);return this}scale(n){for(let u=0;u<9;u++)this.coefficients[u].multiplyScalar(n);return this}lerp(n,u){for(let f=0;f<9;f++)this.coefficients[f].lerp(n.coefficients[f],u);return this}equals(n){for(let u=0;u<9;u++)if(!this.coefficients[u].equals(n.coefficients[u]))return!1;return!0}copy(n){return this.set(n.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(n,u=0){const f=this.coefficients;for(let y=0;y<9;y++)f[y].fromArray(n,u+y*3);return this}toArray(n=[],u=0){const f=this.coefficients;for(let y=0;y<9;y++)f[y].toArray(n,u+y*3);return n}static getBasisAt(n,u){const f=n.x,y=n.y,S=n.z;u[0]=.282095,u[1]=.488603*y,u[2]=.488603*S,u[3]=.488603*f,u[4]=1.092548*f*y,u[5]=1.092548*y*S,u[6]=.315392*(3*S*S-1),u[7]=1.092548*f*S,u[8]=.546274*(f*f-y*y)}}class LightProbe extends Light{constructor(n=new SphericalHarmonics3,u=1){super(void 0,u),this.isLightProbe=!0,this.sh=n}copy(n){return super.copy(n),this.sh.copy(n.sh),this}toJSON(n){const u=super.toJSON(n);return u.object.sh=this.sh.toArray(),u}}class MaterialLoader extends Loader{constructor(n){super(n),this.textures={}}load(n,u,f,y){const S=this,A=new FileLoader(S.manager);A.setPath(S.path),A.setRequestHeader(S.requestHeader),A.setWithCredentials(S.withCredentials),A.load(n,function(w){try{u(S.parse(JSON.parse(w)))}catch(C){y?y(C):error(C),S.manager.itemError(n)}},f,y)}parse(n){const u=this.textures;function f(S){return u[S]===void 0&&warn("MaterialLoader: Undefined texture",S),u[S]}const y=this.createMaterialFromType(n.type);if(n.uuid!==void 0&&(y.uuid=n.uuid),n.name!==void 0&&(y.name=n.name),n.color!==void 0&&y.color!==void 0&&y.color.setHex(n.color),n.roughness!==void 0&&(y.roughness=n.roughness),n.metalness!==void 0&&(y.metalness=n.metalness),n.sheen!==void 0&&(y.sheen=n.sheen),n.sheenColor!==void 0&&(y.sheenColor=new Color().setHex(n.sheenColor)),n.sheenRoughness!==void 0&&(y.sheenRoughness=n.sheenRoughness),n.emissive!==void 0&&y.emissive!==void 0&&y.emissive.setHex(n.emissive),n.specular!==void 0&&y.specular!==void 0&&y.specular.setHex(n.specular),n.specularIntensity!==void 0&&(y.specularIntensity=n.specularIntensity),n.specularColor!==void 0&&y.specularColor!==void 0&&y.specularColor.setHex(n.specularColor),n.shininess!==void 0&&(y.shininess=n.shininess),n.clearcoat!==void 0&&(y.clearcoat=n.clearcoat),n.clearcoatRoughness!==void 0&&(y.clearcoatRoughness=n.clearcoatRoughness),n.dispersion!==void 0&&(y.dispersion=n.dispersion),n.iridescence!==void 0&&(y.iridescence=n.iridescence),n.iridescenceIOR!==void 0&&(y.iridescenceIOR=n.iridescenceIOR),n.iridescenceThicknessRange!==void 0&&(y.iridescenceThicknessRange=n.iridescenceThicknessRange),n.transmission!==void 0&&(y.transmission=n.transmission),n.thickness!==void 0&&(y.thickness=n.thickness),n.attenuationDistance!==void 0&&(y.attenuationDistance=n.attenuationDistance),n.attenuationColor!==void 0&&y.attenuationColor!==void 0&&y.attenuationColor.setHex(n.attenuationColor),n.anisotropy!==void 0&&(y.anisotropy=n.anisotropy),n.anisotropyRotation!==void 0&&(y.anisotropyRotation=n.anisotropyRotation),n.fog!==void 0&&(y.fog=n.fog),n.flatShading!==void 0&&(y.flatShading=n.flatShading),n.blending!==void 0&&(y.blending=n.blending),n.combine!==void 0&&(y.combine=n.combine),n.side!==void 0&&(y.side=n.side),n.shadowSide!==void 0&&(y.shadowSide=n.shadowSide),n.opacity!==void 0&&(y.opacity=n.opacity),n.transparent!==void 0&&(y.transparent=n.transparent),n.alphaTest!==void 0&&(y.alphaTest=n.alphaTest),n.alphaHash!==void 0&&(y.alphaHash=n.alphaHash),n.depthFunc!==void 0&&(y.depthFunc=n.depthFunc),n.depthTest!==void 0&&(y.depthTest=n.depthTest),n.depthWrite!==void 0&&(y.depthWrite=n.depthWrite),n.colorWrite!==void 0&&(y.colorWrite=n.colorWrite),n.blendSrc!==void 0&&(y.blendSrc=n.blendSrc),n.blendDst!==void 0&&(y.blendDst=n.blendDst),n.blendEquation!==void 0&&(y.blendEquation=n.blendEquation),n.blendSrcAlpha!==void 0&&(y.blendSrcAlpha=n.blendSrcAlpha),n.blendDstAlpha!==void 0&&(y.blendDstAlpha=n.blendDstAlpha),n.blendEquationAlpha!==void 0&&(y.blendEquationAlpha=n.blendEquationAlpha),n.blendColor!==void 0&&y.blendColor!==void 0&&y.blendColor.setHex(n.blendColor),n.blendAlpha!==void 0&&(y.blendAlpha=n.blendAlpha),n.stencilWriteMask!==void 0&&(y.stencilWriteMask=n.stencilWriteMask),n.stencilFunc!==void 0&&(y.stencilFunc=n.stencilFunc),n.stencilRef!==void 0&&(y.stencilRef=n.stencilRef),n.stencilFuncMask!==void 0&&(y.stencilFuncMask=n.stencilFuncMask),n.stencilFail!==void 0&&(y.stencilFail=n.stencilFail),n.stencilZFail!==void 0&&(y.stencilZFail=n.stencilZFail),n.stencilZPass!==void 0&&(y.stencilZPass=n.stencilZPass),n.stencilWrite!==void 0&&(y.stencilWrite=n.stencilWrite),n.wireframe!==void 0&&(y.wireframe=n.wireframe),n.wireframeLinewidth!==void 0&&(y.wireframeLinewidth=n.wireframeLinewidth),n.wireframeLinecap!==void 0&&(y.wireframeLinecap=n.wireframeLinecap),n.wireframeLinejoin!==void 0&&(y.wireframeLinejoin=n.wireframeLinejoin),n.rotation!==void 0&&(y.rotation=n.rotation),n.linewidth!==void 0&&(y.linewidth=n.linewidth),n.dashSize!==void 0&&(y.dashSize=n.dashSize),n.gapSize!==void 0&&(y.gapSize=n.gapSize),n.scale!==void 0&&(y.scale=n.scale),n.polygonOffset!==void 0&&(y.polygonOffset=n.polygonOffset),n.polygonOffsetFactor!==void 0&&(y.polygonOffsetFactor=n.polygonOffsetFactor),n.polygonOffsetUnits!==void 0&&(y.polygonOffsetUnits=n.polygonOffsetUnits),n.dithering!==void 0&&(y.dithering=n.dithering),n.alphaToCoverage!==void 0&&(y.alphaToCoverage=n.alphaToCoverage),n.premultipliedAlpha!==void 0&&(y.premultipliedAlpha=n.premultipliedAlpha),n.forceSinglePass!==void 0&&(y.forceSinglePass=n.forceSinglePass),n.allowOverride!==void 0&&(y.allowOverride=n.allowOverride),n.visible!==void 0&&(y.visible=n.visible),n.toneMapped!==void 0&&(y.toneMapped=n.toneMapped),n.userData!==void 0&&(y.userData=n.userData),n.vertexColors!==void 0&&(typeof n.vertexColors=="number"?y.vertexColors=n.vertexColors>0:y.vertexColors=n.vertexColors),n.uniforms!==void 0)for(const S in n.uniforms){const A=n.uniforms[S];switch(y.uniforms[S]={},A.type){case"t":y.uniforms[S].value=f(A.value);break;case"c":y.uniforms[S].value=new Color().setHex(A.value);break;case"v2":y.uniforms[S].value=new Vector2().fromArray(A.value);break;case"v3":y.uniforms[S].value=new Vector3().fromArray(A.value);break;case"v4":y.uniforms[S].value=new Vector4().fromArray(A.value);break;case"m3":y.uniforms[S].value=new Matrix3().fromArray(A.value);break;case"m4":y.uniforms[S].value=new Matrix4().fromArray(A.value);break;default:y.uniforms[S].value=A.value}}if(n.defines!==void 0&&(y.defines=n.defines),n.vertexShader!==void 0&&(y.vertexShader=n.vertexShader),n.fragmentShader!==void 0&&(y.fragmentShader=n.fragmentShader),n.glslVersion!==void 0&&(y.glslVersion=n.glslVersion),n.extensions!==void 0)for(const S in n.extensions)y.extensions[S]=n.extensions[S];if(n.lights!==void 0&&(y.lights=n.lights),n.clipping!==void 0&&(y.clipping=n.clipping),n.size!==void 0&&(y.size=n.size),n.sizeAttenuation!==void 0&&(y.sizeAttenuation=n.sizeAttenuation),n.map!==void 0&&(y.map=f(n.map)),n.matcap!==void 0&&(y.matcap=f(n.matcap)),n.alphaMap!==void 0&&(y.alphaMap=f(n.alphaMap)),n.bumpMap!==void 0&&(y.bumpMap=f(n.bumpMap)),n.bumpScale!==void 0&&(y.bumpScale=n.bumpScale),n.normalMap!==void 0&&(y.normalMap=f(n.normalMap)),n.normalMapType!==void 0&&(y.normalMapType=n.normalMapType),n.normalScale!==void 0){let S=n.normalScale;Array.isArray(S)===!1&&(S=[S,S]),y.normalScale=new Vector2().fromArray(S)}return n.displacementMap!==void 0&&(y.displacementMap=f(n.displacementMap)),n.displacementScale!==void 0&&(y.displacementScale=n.displacementScale),n.displacementBias!==void 0&&(y.displacementBias=n.displacementBias),n.roughnessMap!==void 0&&(y.roughnessMap=f(n.roughnessMap)),n.metalnessMap!==void 0&&(y.metalnessMap=f(n.metalnessMap)),n.emissiveMap!==void 0&&(y.emissiveMap=f(n.emissiveMap)),n.emissiveIntensity!==void 0&&(y.emissiveIntensity=n.emissiveIntensity),n.specularMap!==void 0&&(y.specularMap=f(n.specularMap)),n.specularIntensityMap!==void 0&&(y.specularIntensityMap=f(n.specularIntensityMap)),n.specularColorMap!==void 0&&(y.specularColorMap=f(n.specularColorMap)),n.envMap!==void 0&&(y.envMap=f(n.envMap)),n.envMapRotation!==void 0&&y.envMapRotation.fromArray(n.envMapRotation),n.envMapIntensity!==void 0&&(y.envMapIntensity=n.envMapIntensity),n.reflectivity!==void 0&&(y.reflectivity=n.reflectivity),n.refractionRatio!==void 0&&(y.refractionRatio=n.refractionRatio),n.lightMap!==void 0&&(y.lightMap=f(n.lightMap)),n.lightMapIntensity!==void 0&&(y.lightMapIntensity=n.lightMapIntensity),n.aoMap!==void 0&&(y.aoMap=f(n.aoMap)),n.aoMapIntensity!==void 0&&(y.aoMapIntensity=n.aoMapIntensity),n.gradientMap!==void 0&&(y.gradientMap=f(n.gradientMap)),n.clearcoatMap!==void 0&&(y.clearcoatMap=f(n.clearcoatMap)),n.clearcoatRoughnessMap!==void 0&&(y.clearcoatRoughnessMap=f(n.clearcoatRoughnessMap)),n.clearcoatNormalMap!==void 0&&(y.clearcoatNormalMap=f(n.clearcoatNormalMap)),n.clearcoatNormalScale!==void 0&&(y.clearcoatNormalScale=new Vector2().fromArray(n.clearcoatNormalScale)),n.iridescenceMap!==void 0&&(y.iridescenceMap=f(n.iridescenceMap)),n.iridescenceThicknessMap!==void 0&&(y.iridescenceThicknessMap=f(n.iridescenceThicknessMap)),n.transmissionMap!==void 0&&(y.transmissionMap=f(n.transmissionMap)),n.thicknessMap!==void 0&&(y.thicknessMap=f(n.thicknessMap)),n.anisotropyMap!==void 0&&(y.anisotropyMap=f(n.anisotropyMap)),n.sheenColorMap!==void 0&&(y.sheenColorMap=f(n.sheenColorMap)),n.sheenRoughnessMap!==void 0&&(y.sheenRoughnessMap=f(n.sheenRoughnessMap)),y}setTextures(n){return this.textures=n,this}createMaterialFromType(n){return MaterialLoader.createMaterialFromType(n)}static createMaterialFromType(n){const u={ShadowMaterial,SpriteMaterial,RawShaderMaterial,ShaderMaterial,PointsMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshPhongMaterial,MeshToonMaterial,MeshNormalMaterial,MeshLambertMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshBasicMaterial,MeshMatcapMaterial,LineDashedMaterial,LineBasicMaterial,Material};return new u[n]}}class LoaderUtils{static extractUrlBase(n){const u=n.lastIndexOf("/");return u===-1?"./":n.slice(0,u+1)}static resolveURL(n,u){return typeof n!="string"||n===""?"":(/^https?:\/\//i.test(u)&&/^\//.test(n)&&(u=u.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(n)||/^data:.*,.*$/i.test(n)||/^blob:.*$/i.test(n)?n:u+n)}}class InstancedBufferGeometry extends BufferGeometry{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(n){return super.copy(n),this.instanceCount=n.instanceCount,this}toJSON(){const n=super.toJSON();return n.instanceCount=this.instanceCount,n.isInstancedBufferGeometry=!0,n}}class BufferGeometryLoader extends Loader{constructor(n){super(n)}load(n,u,f,y){const S=this,A=new FileLoader(S.manager);A.setPath(S.path),A.setRequestHeader(S.requestHeader),A.setWithCredentials(S.withCredentials),A.load(n,function(w){try{u(S.parse(JSON.parse(w)))}catch(C){y?y(C):error(C),S.manager.itemError(n)}},f,y)}parse(n){const u={},f={};function y(L,F){if(u[F]!==void 0)return u[F];const z=L.interleavedBuffers[F],U=S(L,z.buffer),G=getTypedArray(z.type,U),Y=new InterleavedBuffer(G,z.stride);return Y.uuid=z.uuid,u[F]=Y,Y}function S(L,F){if(f[F]!==void 0)return f[F];const z=L.arrayBuffers[F],U=new Uint32Array(z).buffer;return f[F]=U,U}const A=n.isInstancedBufferGeometry?new InstancedBufferGeometry:new BufferGeometry,w=n.data.index;if(w!==void 0){const L=getTypedArray(w.type,w.array);A.setIndex(new BufferAttribute(L,1))}const C=n.data.attributes;for(const L in C){const F=C[L];let H;if(F.isInterleavedBufferAttribute){const z=y(n.data,F.data);H=new InterleavedBufferAttribute(z,F.itemSize,F.offset,F.normalized)}else{const z=getTypedArray(F.type,F.array),U=F.isInstancedBufferAttribute?InstancedBufferAttribute:BufferAttribute;H=new U(z,F.itemSize,F.normalized)}F.name!==void 0&&(H.name=F.name),F.usage!==void 0&&H.setUsage(F.usage),A.setAttribute(L,H)}const T=n.data.morphAttributes;if(T)for(const L in T){const F=T[L],H=[];for(let z=0,U=F.length;z<U;z++){const G=F[z];let Y;if(G.isInterleavedBufferAttribute){const K=y(n.data,G.data);Y=new InterleavedBufferAttribute(K,G.itemSize,G.offset,G.normalized)}else{const K=getTypedArray(G.type,G.array);Y=new BufferAttribute(K,G.itemSize,G.normalized)}G.name!==void 0&&(Y.name=G.name),H.push(Y)}A.morphAttributes[L]=H}n.data.morphTargetsRelative&&(A.morphTargetsRelative=!0);const I=n.data.groups||n.data.drawcalls||n.data.offsets;if(I!==void 0)for(let L=0,F=I.length;L!==F;++L){const H=I[L];A.addGroup(H.start,H.count,H.materialIndex)}const N=n.data.boundingSphere;return N!==void 0&&(A.boundingSphere=new Sphere().fromJSON(N)),n.name&&(A.name=n.name),n.userData&&(A.userData=n.userData),A}}class ObjectLoader extends Loader{constructor(n){super(n)}load(n,u,f,y){const S=this,A=this.path===""?LoaderUtils.extractUrlBase(n):this.path;this.resourcePath=this.resourcePath||A;const w=new FileLoader(this.manager);w.setPath(this.path),w.setRequestHeader(this.requestHeader),w.setWithCredentials(this.withCredentials),w.load(n,function(C){let T=null;try{T=JSON.parse(C)}catch(I){y!==void 0&&y(I),I("ObjectLoader: Can't parse "+n+".",I.message);return}const R=T.metadata;if(R===void 0||R.type===void 0||R.type.toLowerCase()==="geometry"){y!==void 0&&y(new Error("THREE.ObjectLoader: Can't load "+n)),error("ObjectLoader: Can't load "+n);return}S.parse(T,u)},f,y)}async loadAsync(n,u){const f=this,y=this.path===""?LoaderUtils.extractUrlBase(n):this.path;this.resourcePath=this.resourcePath||y;const S=new FileLoader(this.manager);S.setPath(this.path),S.setRequestHeader(this.requestHeader),S.setWithCredentials(this.withCredentials);const A=await S.loadAsync(n,u),w=JSON.parse(A),C=w.metadata;if(C===void 0||C.type===void 0||C.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+n);return await f.parseAsync(w)}parse(n,u){const f=this.parseAnimations(n.animations),y=this.parseShapes(n.shapes),S=this.parseGeometries(n.geometries,y),A=this.parseImages(n.images,function(){u!==void 0&&u(T)}),w=this.parseTextures(n.textures,A),C=this.parseMaterials(n.materials,w),T=this.parseObject(n.object,S,C,w,f),R=this.parseSkeletons(n.skeletons,T);if(this.bindSkeletons(T,R),this.bindLightTargets(T),u!==void 0){let I=!1;for(const N in A)if(A[N].data instanceof HTMLImageElement){I=!0;break}I===!1&&u(T)}return T}async parseAsync(n){const u=this.parseAnimations(n.animations),f=this.parseShapes(n.shapes),y=this.parseGeometries(n.geometries,f),S=await this.parseImagesAsync(n.images),A=this.parseTextures(n.textures,S),w=this.parseMaterials(n.materials,A),C=this.parseObject(n.object,y,w,A,u),T=this.parseSkeletons(n.skeletons,C);return this.bindSkeletons(C,T),this.bindLightTargets(C),C}parseShapes(n){const u={};if(n!==void 0)for(let f=0,y=n.length;f<y;f++){const S=new Shape().fromJSON(n[f]);u[S.uuid]=S}return u}parseSkeletons(n,u){const f={},y={};if(u.traverse(function(S){S.isBone&&(y[S.uuid]=S)}),n!==void 0)for(let S=0,A=n.length;S<A;S++){const w=new Skeleton().fromJSON(n[S],y);f[w.uuid]=w}return f}parseGeometries(n,u){const f={};if(n!==void 0){const y=new BufferGeometryLoader;for(let S=0,A=n.length;S<A;S++){let w;const C=n[S];switch(C.type){case"BufferGeometry":case"InstancedBufferGeometry":w=y.parse(C);break;default:C.type in Geometries?w=Geometries[C.type].fromJSON(C,u):warn(`ObjectLoader: Unsupported geometry type "${C.type}"`)}w.uuid=C.uuid,C.name!==void 0&&(w.name=C.name),C.userData!==void 0&&(w.userData=C.userData),f[C.uuid]=w}}return f}parseMaterials(n,u){const f={},y={};if(n!==void 0){const S=new MaterialLoader;S.setTextures(u);for(let A=0,w=n.length;A<w;A++){const C=n[A];f[C.uuid]===void 0&&(f[C.uuid]=S.parse(C)),y[C.uuid]=f[C.uuid]}}return y}parseAnimations(n){const u={};if(n!==void 0)for(let f=0;f<n.length;f++){const y=n[f],S=AnimationClip.parse(y);u[S.uuid]=S}return u}parseImages(n,u){const f=this,y={};let S;function A(C){return f.manager.itemStart(C),S.load(C,function(){f.manager.itemEnd(C)},void 0,function(){f.manager.itemError(C),f.manager.itemEnd(C)})}function w(C){if(typeof C=="string"){const T=C,R=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(T)?T:f.resourcePath+T;return A(R)}else return C.data?{data:getTypedArray(C.type,C.data),width:C.width,height:C.height}:null}if(n!==void 0&&n.length>0){const C=new LoadingManager(u);S=new ImageLoader(C),S.setCrossOrigin(this.crossOrigin);for(let T=0,R=n.length;T<R;T++){const I=n[T],N=I.url;if(Array.isArray(N)){const L=[];for(let F=0,H=N.length;F<H;F++){const z=N[F],U=w(z);U!==null&&(U instanceof HTMLImageElement?L.push(U):L.push(new DataTexture(U.data,U.width,U.height)))}y[I.uuid]=new Source(L)}else{const L=w(I.url);y[I.uuid]=new Source(L)}}}return y}async parseImagesAsync(n){const u=this,f={};let y;async function S(A){if(typeof A=="string"){const w=A,C=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(w)?w:u.resourcePath+w;return await y.loadAsync(C)}else return A.data?{data:getTypedArray(A.type,A.data),width:A.width,height:A.height}:null}if(n!==void 0&&n.length>0){y=new ImageLoader(this.manager),y.setCrossOrigin(this.crossOrigin);for(let A=0,w=n.length;A<w;A++){const C=n[A],T=C.url;if(Array.isArray(T)){const R=[];for(let I=0,N=T.length;I<N;I++){const L=T[I],F=await S(L);F!==null&&(F instanceof HTMLImageElement?R.push(F):R.push(new DataTexture(F.data,F.width,F.height)))}f[C.uuid]=new Source(R)}else{const R=await S(C.url);f[C.uuid]=new Source(R)}}}return f}parseTextures(n,u){function f(S,A){return typeof S=="number"?S:(warn("ObjectLoader.parseTexture: Constant should be in numeric form.",S),A[S])}const y={};if(n!==void 0)for(let S=0,A=n.length;S<A;S++){const w=n[S];w.image===void 0&&warn('ObjectLoader: No "image" specified for',w.uuid),u[w.image]===void 0&&warn("ObjectLoader: Undefined image",w.image);const C=u[w.image],T=C.data;let R;Array.isArray(T)?(R=new CubeTexture,T.length===6&&(R.needsUpdate=!0)):(T&&T.data?R=new DataTexture:R=new Texture,T&&(R.needsUpdate=!0)),R.source=C,R.uuid=w.uuid,w.name!==void 0&&(R.name=w.name),w.mapping!==void 0&&(R.mapping=f(w.mapping,TEXTURE_MAPPING)),w.channel!==void 0&&(R.channel=w.channel),w.offset!==void 0&&R.offset.fromArray(w.offset),w.repeat!==void 0&&R.repeat.fromArray(w.repeat),w.center!==void 0&&R.center.fromArray(w.center),w.rotation!==void 0&&(R.rotation=w.rotation),w.wrap!==void 0&&(R.wrapS=f(w.wrap[0],TEXTURE_WRAPPING),R.wrapT=f(w.wrap[1],TEXTURE_WRAPPING)),w.format!==void 0&&(R.format=w.format),w.internalFormat!==void 0&&(R.internalFormat=w.internalFormat),w.type!==void 0&&(R.type=w.type),w.colorSpace!==void 0&&(R.colorSpace=w.colorSpace),w.minFilter!==void 0&&(R.minFilter=f(w.minFilter,TEXTURE_FILTER)),w.magFilter!==void 0&&(R.magFilter=f(w.magFilter,TEXTURE_FILTER)),w.anisotropy!==void 0&&(R.anisotropy=w.anisotropy),w.flipY!==void 0&&(R.flipY=w.flipY),w.generateMipmaps!==void 0&&(R.generateMipmaps=w.generateMipmaps),w.premultiplyAlpha!==void 0&&(R.premultiplyAlpha=w.premultiplyAlpha),w.unpackAlignment!==void 0&&(R.unpackAlignment=w.unpackAlignment),w.compareFunction!==void 0&&(R.compareFunction=w.compareFunction),w.userData!==void 0&&(R.userData=w.userData),y[w.uuid]=R}return y}parseObject(n,u,f,y,S){let A;function w(N){return u[N]===void 0&&warn("ObjectLoader: Undefined geometry",N),u[N]}function C(N){if(N!==void 0){if(Array.isArray(N)){const L=[];for(let F=0,H=N.length;F<H;F++){const z=N[F];f[z]===void 0&&warn("ObjectLoader: Undefined material",z),L.push(f[z])}return L}return f[N]===void 0&&warn("ObjectLoader: Undefined material",N),f[N]}}function T(N){return y[N]===void 0&&warn("ObjectLoader: Undefined texture",N),y[N]}let R,I;switch(n.type){case"Scene":A=new Scene$1,n.background!==void 0&&(Number.isInteger(n.background)?A.background=new Color(n.background):A.background=T(n.background)),n.environment!==void 0&&(A.environment=T(n.environment)),n.fog!==void 0&&(n.fog.type==="Fog"?A.fog=new Fog(n.fog.color,n.fog.near,n.fog.far):n.fog.type==="FogExp2"&&(A.fog=new FogExp2(n.fog.color,n.fog.density)),n.fog.name!==""&&(A.fog.name=n.fog.name)),n.backgroundBlurriness!==void 0&&(A.backgroundBlurriness=n.backgroundBlurriness),n.backgroundIntensity!==void 0&&(A.backgroundIntensity=n.backgroundIntensity),n.backgroundRotation!==void 0&&A.backgroundRotation.fromArray(n.backgroundRotation),n.environmentIntensity!==void 0&&(A.environmentIntensity=n.environmentIntensity),n.environmentRotation!==void 0&&A.environmentRotation.fromArray(n.environmentRotation);break;case"PerspectiveCamera":A=new PerspectiveCamera(n.fov,n.aspect,n.near,n.far),n.focus!==void 0&&(A.focus=n.focus),n.zoom!==void 0&&(A.zoom=n.zoom),n.filmGauge!==void 0&&(A.filmGauge=n.filmGauge),n.filmOffset!==void 0&&(A.filmOffset=n.filmOffset),n.view!==void 0&&(A.view=Object.assign({},n.view));break;case"OrthographicCamera":A=new OrthographicCamera(n.left,n.right,n.top,n.bottom,n.near,n.far),n.zoom!==void 0&&(A.zoom=n.zoom),n.view!==void 0&&(A.view=Object.assign({},n.view));break;case"AmbientLight":A=new AmbientLight(n.color,n.intensity);break;case"DirectionalLight":A=new DirectionalLight(n.color,n.intensity),A.target=n.target||"";break;case"PointLight":A=new PointLight(n.color,n.intensity,n.distance,n.decay);break;case"RectAreaLight":A=new RectAreaLight(n.color,n.intensity,n.width,n.height);break;case"SpotLight":A=new SpotLight(n.color,n.intensity,n.distance,n.angle,n.penumbra,n.decay),A.target=n.target||"";break;case"HemisphereLight":A=new HemisphereLight(n.color,n.groundColor,n.intensity);break;case"LightProbe":const N=new SphericalHarmonics3().fromArray(n.sh);A=new LightProbe(N,n.intensity);break;case"SkinnedMesh":R=w(n.geometry),I=C(n.material),A=new SkinnedMesh(R,I),n.bindMode!==void 0&&(A.bindMode=n.bindMode),n.bindMatrix!==void 0&&A.bindMatrix.fromArray(n.bindMatrix),n.skeleton!==void 0&&(A.skeleton=n.skeleton);break;case"Mesh":R=w(n.geometry),I=C(n.material),A=new Mesh(R,I);break;case"InstancedMesh":R=w(n.geometry),I=C(n.material);const L=n.count,F=n.instanceMatrix,H=n.instanceColor;A=new InstancedMesh(R,I,L),A.instanceMatrix=new InstancedBufferAttribute(new Float32Array(F.array),16),H!==void 0&&(A.instanceColor=new InstancedBufferAttribute(new Float32Array(H.array),H.itemSize));break;case"BatchedMesh":R=w(n.geometry),I=C(n.material),A=new BatchedMesh(n.maxInstanceCount,n.maxVertexCount,n.maxIndexCount,I),A.geometry=R,A.perObjectFrustumCulled=n.perObjectFrustumCulled,A.sortObjects=n.sortObjects,A._drawRanges=n.drawRanges,A._reservedRanges=n.reservedRanges,A._geometryInfo=n.geometryInfo.map(z=>{let U=null,G=null;return z.boundingBox!==void 0&&(U=new Box3().fromJSON(z.boundingBox)),z.boundingSphere!==void 0&&(G=new Sphere().fromJSON(z.boundingSphere)),{...z,boundingBox:U,boundingSphere:G}}),A._instanceInfo=n.instanceInfo,A._availableInstanceIds=n._availableInstanceIds,A._availableGeometryIds=n._availableGeometryIds,A._nextIndexStart=n.nextIndexStart,A._nextVertexStart=n.nextVertexStart,A._geometryCount=n.geometryCount,A._maxInstanceCount=n.maxInstanceCount,A._maxVertexCount=n.maxVertexCount,A._maxIndexCount=n.maxIndexCount,A._geometryInitialized=n.geometryInitialized,A._matricesTexture=T(n.matricesTexture.uuid),A._indirectTexture=T(n.indirectTexture.uuid),n.colorsTexture!==void 0&&(A._colorsTexture=T(n.colorsTexture.uuid)),n.boundingSphere!==void 0&&(A.boundingSphere=new Sphere().fromJSON(n.boundingSphere)),n.boundingBox!==void 0&&(A.boundingBox=new Box3().fromJSON(n.boundingBox));break;case"LOD":A=new LOD;break;case"Line":A=new Line(w(n.geometry),C(n.material));break;case"LineLoop":A=new LineLoop(w(n.geometry),C(n.material));break;case"LineSegments":A=new LineSegments(w(n.geometry),C(n.material));break;case"PointCloud":case"Points":A=new Points(w(n.geometry),C(n.material));break;case"Sprite":A=new Sprite(C(n.material));break;case"Group":A=new Group;break;case"Bone":A=new Bone;break;default:A=new Object3D}if(A.uuid=n.uuid,n.name!==void 0&&(A.name=n.name),n.matrix!==void 0?(A.matrix.fromArray(n.matrix),n.matrixAutoUpdate!==void 0&&(A.matrixAutoUpdate=n.matrixAutoUpdate),A.matrixAutoUpdate&&A.matrix.decompose(A.position,A.quaternion,A.scale)):(n.position!==void 0&&A.position.fromArray(n.position),n.rotation!==void 0&&A.rotation.fromArray(n.rotation),n.quaternion!==void 0&&A.quaternion.fromArray(n.quaternion),n.scale!==void 0&&A.scale.fromArray(n.scale)),n.up!==void 0&&A.up.fromArray(n.up),n.castShadow!==void 0&&(A.castShadow=n.castShadow),n.receiveShadow!==void 0&&(A.receiveShadow=n.receiveShadow),n.shadow&&(n.shadow.intensity!==void 0&&(A.shadow.intensity=n.shadow.intensity),n.shadow.bias!==void 0&&(A.shadow.bias=n.shadow.bias),n.shadow.normalBias!==void 0&&(A.shadow.normalBias=n.shadow.normalBias),n.shadow.radius!==void 0&&(A.shadow.radius=n.shadow.radius),n.shadow.mapSize!==void 0&&A.shadow.mapSize.fromArray(n.shadow.mapSize),n.shadow.camera!==void 0&&(A.shadow.camera=this.parseObject(n.shadow.camera))),n.visible!==void 0&&(A.visible=n.visible),n.frustumCulled!==void 0&&(A.frustumCulled=n.frustumCulled),n.renderOrder!==void 0&&(A.renderOrder=n.renderOrder),n.userData!==void 0&&(A.userData=n.userData),n.layers!==void 0&&(A.layers.mask=n.layers),n.children!==void 0){const N=n.children;for(let L=0;L<N.length;L++)A.add(this.parseObject(N[L],u,f,y,S))}if(n.animations!==void 0){const N=n.animations;for(let L=0;L<N.length;L++){const F=N[L];A.animations.push(S[F])}}if(n.type==="LOD"){n.autoUpdate!==void 0&&(A.autoUpdate=n.autoUpdate);const N=n.levels;for(let L=0;L<N.length;L++){const F=N[L],H=A.getObjectByProperty("uuid",F.object);H!==void 0&&A.addLevel(H,F.distance,F.hysteresis)}}return A}bindSkeletons(n,u){Object.keys(u).length!==0&&n.traverse(function(f){if(f.isSkinnedMesh===!0&&f.skeleton!==void 0){const y=u[f.skeleton];y===void 0?warn("ObjectLoader: No skeleton found with UUID:",f.skeleton):f.bind(y,f.bindMatrix)}})}bindLightTargets(n){n.traverse(function(u){if(u.isDirectionalLight||u.isSpotLight){const f=u.target,y=n.getObjectByProperty("uuid",f);y!==void 0?u.target=y:u.target=new Object3D}})}}const TEXTURE_MAPPING={UVMapping,CubeReflectionMapping,CubeRefractionMapping,EquirectangularReflectionMapping,EquirectangularRefractionMapping,CubeUVReflectionMapping},TEXTURE_WRAPPING={RepeatWrapping,ClampToEdgeWrapping,MirroredRepeatWrapping},TEXTURE_FILTER={NearestFilter,NearestMipmapNearestFilter,NearestMipmapLinearFilter,LinearFilter,LinearMipmapNearestFilter,LinearMipmapLinearFilter},_errorMap=new WeakMap;class ImageBitmapLoader extends Loader{constructor(n){super(n),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&warn("ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&warn("ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(n){return this.options=n,this}load(n,u,f,y){n===void 0&&(n=""),this.path!==void 0&&(n=this.path+n),n=this.manager.resolveURL(n);const S=this,A=Cache.get(`image-bitmap:${n}`);if(A!==void 0){if(S.manager.itemStart(n),A.then){A.then(T=>{if(_errorMap.has(A)===!0)y&&y(_errorMap.get(A)),S.manager.itemError(n),S.manager.itemEnd(n);else return u&&u(T),S.manager.itemEnd(n),T});return}return setTimeout(function(){u&&u(A),S.manager.itemEnd(n)},0),A}const w={};w.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",w.headers=this.requestHeader,w.signal=typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;const C=fetch(n,w).then(function(T){return T.blob()}).then(function(T){return createImageBitmap(T,Object.assign(S.options,{colorSpaceConversion:"none"}))}).then(function(T){return Cache.add(`image-bitmap:${n}`,T),u&&u(T),S.manager.itemEnd(n),T}).catch(function(T){y&&y(T),_errorMap.set(C,T),Cache.remove(`image-bitmap:${n}`),S.manager.itemError(n),S.manager.itemEnd(n)});Cache.add(`image-bitmap:${n}`,C),S.manager.itemStart(n)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}let _context;class AudioContext{static getContext(){return _context===void 0&&(_context=new(window.AudioContext||window.webkitAudioContext)),_context}static setContext(n){_context=n}}class AudioLoader extends Loader{constructor(n){super(n)}load(n,u,f,y){const S=this,A=new FileLoader(this.manager);A.setResponseType("arraybuffer"),A.setPath(this.path),A.setRequestHeader(this.requestHeader),A.setWithCredentials(this.withCredentials),A.load(n,function(C){try{const T=C.slice(0);AudioContext.getContext().decodeAudioData(T,function(I){u(I)}).catch(w)}catch(T){w(T)}},f,y);function w(C){y?y(C):error(C),S.manager.itemError(n)}}}const _eyeRight=new Matrix4,_eyeLeft=new Matrix4,_projectionMatrix=new Matrix4;class StereoCamera{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new PerspectiveCamera,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new PerspectiveCamera,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(n){const u=this._cache;if(u.focus!==n.focus||u.fov!==n.fov||u.aspect!==n.aspect*this.aspect||u.near!==n.near||u.far!==n.far||u.zoom!==n.zoom||u.eyeSep!==this.eyeSep){u.focus=n.focus,u.fov=n.fov,u.aspect=n.aspect*this.aspect,u.near=n.near,u.far=n.far,u.zoom=n.zoom,u.eyeSep=this.eyeSep,_projectionMatrix.copy(n.projectionMatrix);const y=u.eyeSep/2,S=y*u.near/u.focus,A=u.near*Math.tan(DEG2RAD*u.fov*.5)/u.zoom;let w,C;_eyeLeft.elements[12]=-y,_eyeRight.elements[12]=y,w=-A*u.aspect+S,C=A*u.aspect+S,_projectionMatrix.elements[0]=2*u.near/(C-w),_projectionMatrix.elements[8]=(C+w)/(C-w),this.cameraL.projectionMatrix.copy(_projectionMatrix),w=-A*u.aspect-S,C=A*u.aspect-S,_projectionMatrix.elements[0]=2*u.near/(C-w),_projectionMatrix.elements[8]=(C+w)/(C-w),this.cameraR.projectionMatrix.copy(_projectionMatrix)}this.cameraL.matrixWorld.copy(n.matrixWorld).multiply(_eyeLeft),this.cameraR.matrixWorld.copy(n.matrixWorld).multiply(_eyeRight)}}class ArrayCamera extends PerspectiveCamera{constructor(n=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=n}}class Clock{constructor(n=!0){this.autoStart=n,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let n=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const u=performance.now();n=(u-this.oldTime)/1e3,this.oldTime=u,this.elapsedTime+=n}return n}}const _position$1=new Vector3,_quaternion$1=new Quaternion,_scale$1=new Vector3,_forward=new Vector3,_up=new Vector3;class AudioListener extends Object3D{constructor(){super(),this.type="AudioListener",this.context=AudioContext.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Clock}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(n){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=n,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(n){return this.gain.gain.setTargetAtTime(n,this.context.currentTime,.01),this}updateMatrixWorld(n){super.updateMatrixWorld(n);const u=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(_position$1,_quaternion$1,_scale$1),_forward.set(0,0,-1).applyQuaternion(_quaternion$1),_up.set(0,1,0).applyQuaternion(_quaternion$1),u.positionX){const f=this.context.currentTime+this.timeDelta;u.positionX.linearRampToValueAtTime(_position$1.x,f),u.positionY.linearRampToValueAtTime(_position$1.y,f),u.positionZ.linearRampToValueAtTime(_position$1.z,f),u.forwardX.linearRampToValueAtTime(_forward.x,f),u.forwardY.linearRampToValueAtTime(_forward.y,f),u.forwardZ.linearRampToValueAtTime(_forward.z,f),u.upX.linearRampToValueAtTime(_up.x,f),u.upY.linearRampToValueAtTime(_up.y,f),u.upZ.linearRampToValueAtTime(_up.z,f)}else u.setPosition(_position$1.x,_position$1.y,_position$1.z),u.setOrientation(_forward.x,_forward.y,_forward.z,_up.x,_up.y,_up.z)}}class Audio extends Object3D{constructor(n){super(),this.type="Audio",this.listener=n,this.context=n.context,this.gain=this.context.createGain(),this.gain.connect(n.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(n){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=n,this.connect(),this}setMediaElementSource(n){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(n),this.connect(),this}setMediaStreamSource(n){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(n),this.connect(),this}setBuffer(n){return this.buffer=n,this.sourceType="buffer",this.autoplay&&this.play(),this}play(n=0){if(this.isPlaying===!0){warn("Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){warn("Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+n;const u=this.context.createBufferSource();return u.buffer=this.buffer,u.loop=this.loop,u.loopStart=this.loopStart,u.loopEnd=this.loopEnd,u.onended=this.onEnded.bind(this),u.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=u,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){warn("Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(n=0){if(this.hasPlaybackControl===!1){warn("Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+n),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let n=1,u=this.filters.length;n<u;n++)this.filters[n-1].connect(this.filters[n]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let n=1,u=this.filters.length;n<u;n++)this.filters[n-1].disconnect(this.filters[n]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(n){return n||(n=[]),this._connected===!0?(this.disconnect(),this.filters=n.slice(),this.connect()):this.filters=n.slice(),this}setDetune(n){return this.detune=n,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(n){return this.setFilters(n?[n]:[])}setPlaybackRate(n){if(this.hasPlaybackControl===!1){warn("Audio: this Audio has no playback control.");return}return this.playbackRate=n,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(warn("Audio: this Audio has no playback control."),!1):this.loop}setLoop(n){if(this.hasPlaybackControl===!1){warn("Audio: this Audio has no playback control.");return}return this.loop=n,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(n){return this.loopStart=n,this}setLoopEnd(n){return this.loopEnd=n,this}getVolume(){return this.gain.gain.value}setVolume(n){return this.gain.gain.setTargetAtTime(n,this.context.currentTime,.01),this}copy(n,u){return super.copy(n,u),n.sourceType!=="buffer"?(warn("Audio: Audio source type cannot be copied."),this):(this.autoplay=n.autoplay,this.buffer=n.buffer,this.detune=n.detune,this.loop=n.loop,this.loopStart=n.loopStart,this.loopEnd=n.loopEnd,this.offset=n.offset,this.duration=n.duration,this.playbackRate=n.playbackRate,this.hasPlaybackControl=n.hasPlaybackControl,this.sourceType=n.sourceType,this.filters=n.filters.slice(),this)}clone(n){return new this.constructor(this.listener).copy(this,n)}}const _position=new Vector3,_quaternion=new Quaternion,_scale=new Vector3,_orientation=new Vector3;class PositionalAudio extends Audio{constructor(n){super(n),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(n){return this.panner.refDistance=n,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(n){return this.panner.rolloffFactor=n,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(n){return this.panner.distanceModel=n,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(n){return this.panner.maxDistance=n,this}setDirectionalCone(n,u,f){return this.panner.coneInnerAngle=n,this.panner.coneOuterAngle=u,this.panner.coneOuterGain=f,this}updateMatrixWorld(n){if(super.updateMatrixWorld(n),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(_position,_quaternion,_scale),_orientation.set(0,0,1).applyQuaternion(_quaternion);const u=this.panner;if(u.positionX){const f=this.context.currentTime+this.listener.timeDelta;u.positionX.linearRampToValueAtTime(_position.x,f),u.positionY.linearRampToValueAtTime(_position.y,f),u.positionZ.linearRampToValueAtTime(_position.z,f),u.orientationX.linearRampToValueAtTime(_orientation.x,f),u.orientationY.linearRampToValueAtTime(_orientation.y,f),u.orientationZ.linearRampToValueAtTime(_orientation.z,f)}else u.setPosition(_position.x,_position.y,_position.z),u.setOrientation(_orientation.x,_orientation.y,_orientation.z)}}class AudioAnalyser{constructor(n,u=2048){this.analyser=n.context.createAnalyser(),this.analyser.fftSize=u,this.data=new Uint8Array(this.analyser.frequencyBinCount),n.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let n=0;const u=this.getFrequencyData();for(let f=0;f<u.length;f++)n+=u[f];return n/u.length}}class PropertyMixer{constructor(n,u,f){this.binding=n,this.valueSize=f;let y,S,A;switch(u){case"quaternion":y=this._slerp,S=this._slerpAdditive,A=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(f*6),this._workIndex=5;break;case"string":case"bool":y=this._select,S=this._select,A=this._setAdditiveIdentityOther,this.buffer=new Array(f*5);break;default:y=this._lerp,S=this._lerpAdditive,A=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(f*5)}this._mixBufferRegion=y,this._mixBufferRegionAdditive=S,this._setIdentity=A,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(n,u){const f=this.buffer,y=this.valueSize,S=n*y+y;let A=this.cumulativeWeight;if(A===0){for(let w=0;w!==y;++w)f[S+w]=f[w];A=u}else{A+=u;const w=u/A;this._mixBufferRegion(f,S,0,w,y)}this.cumulativeWeight=A}accumulateAdditive(n){const u=this.buffer,f=this.valueSize,y=f*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(u,y,0,n,f),this.cumulativeWeightAdditive+=n}apply(n){const u=this.valueSize,f=this.buffer,y=n*u+u,S=this.cumulativeWeight,A=this.cumulativeWeightAdditive,w=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,S<1){const C=u*this._origIndex;this._mixBufferRegion(f,y,C,1-S,u)}A>0&&this._mixBufferRegionAdditive(f,y,this._addIndex*u,1,u);for(let C=u,T=u+u;C!==T;++C)if(f[C]!==f[C+u]){w.setValue(f,y);break}}saveOriginalState(){const n=this.binding,u=this.buffer,f=this.valueSize,y=f*this._origIndex;n.getValue(u,y);for(let S=f,A=y;S!==A;++S)u[S]=u[y+S%f];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const n=this.valueSize*3;this.binding.setValue(this.buffer,n)}_setAdditiveIdentityNumeric(){const n=this._addIndex*this.valueSize,u=n+this.valueSize;for(let f=n;f<u;f++)this.buffer[f]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const n=this._origIndex*this.valueSize,u=this._addIndex*this.valueSize;for(let f=0;f<this.valueSize;f++)this.buffer[u+f]=this.buffer[n+f]}_select(n,u,f,y,S){if(y>=.5)for(let A=0;A!==S;++A)n[u+A]=n[f+A]}_slerp(n,u,f,y){Quaternion.slerpFlat(n,u,n,u,n,f,y)}_slerpAdditive(n,u,f,y,S){const A=this._workIndex*S;Quaternion.multiplyQuaternionsFlat(n,A,n,u,n,f),Quaternion.slerpFlat(n,u,n,u,n,A,y)}_lerp(n,u,f,y,S){const A=1-y;for(let w=0;w!==S;++w){const C=u+w;n[C]=n[C]*A+n[f+w]*y}}_lerpAdditive(n,u,f,y,S){for(let A=0;A!==S;++A){const w=u+A;n[w]=n[w]+n[f+A]*y}}}const _RESERVED_CHARS_RE="\\[\\]\\.:\\/",_reservedRe=new RegExp("["+_RESERVED_CHARS_RE+"]","g"),_wordChar="[^"+_RESERVED_CHARS_RE+"]",_wordCharOrDot="[^"+_RESERVED_CHARS_RE.replace("\\.","")+"]",_directoryRe=/((?:WC+[\/:])*)/.source.replace("WC",_wordChar),_nodeRe=/(WCOD+)?/.source.replace("WCOD",_wordCharOrDot),_objectRe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",_wordChar),_propertyRe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",_wordChar),_trackRe=new RegExp("^"+_directoryRe+_nodeRe+_objectRe+_propertyRe+"$"),_supportedObjectNames=["material","materials","bones","map"];class Composite{constructor(n,u,f){const y=f||PropertyBinding.parseTrackName(u);this._targetGroup=n,this._bindings=n.subscribe_(u,y)}getValue(n,u){this.bind();const f=this._targetGroup.nCachedObjects_,y=this._bindings[f];y!==void 0&&y.getValue(n,u)}setValue(n,u){const f=this._bindings;for(let y=this._targetGroup.nCachedObjects_,S=f.length;y!==S;++y)f[y].setValue(n,u)}bind(){const n=this._bindings;for(let u=this._targetGroup.nCachedObjects_,f=n.length;u!==f;++u)n[u].bind()}unbind(){const n=this._bindings;for(let u=this._targetGroup.nCachedObjects_,f=n.length;u!==f;++u)n[u].unbind()}}class PropertyBinding{constructor(n,u,f){this.path=u,this.parsedPath=f||PropertyBinding.parseTrackName(u),this.node=PropertyBinding.findNode(n,this.parsedPath.nodeName),this.rootNode=n,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(n,u,f){return n&&n.isAnimationObjectGroup?new PropertyBinding.Composite(n,u,f):new PropertyBinding(n,u,f)}static sanitizeNodeName(n){return n.replace(/\s/g,"_").replace(_reservedRe,"")}static parseTrackName(n){const u=_trackRe.exec(n);if(u===null)throw new Error("PropertyBinding: Cannot parse trackName: "+n);const f={nodeName:u[2],objectName:u[3],objectIndex:u[4],propertyName:u[5],propertyIndex:u[6]},y=f.nodeName&&f.nodeName.lastIndexOf(".");if(y!==void 0&&y!==-1){const S=f.nodeName.substring(y+1);_supportedObjectNames.indexOf(S)!==-1&&(f.nodeName=f.nodeName.substring(0,y),f.objectName=S)}if(f.propertyName===null||f.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+n);return f}static findNode(n,u){if(u===void 0||u===""||u==="."||u===-1||u===n.name||u===n.uuid)return n;if(n.skeleton){const f=n.skeleton.getBoneByName(u);if(f!==void 0)return f}if(n.children){const f=function(S){for(let A=0;A<S.length;A++){const w=S[A];if(w.name===u||w.uuid===u)return w;const C=f(w.children);if(C)return C}return null},y=f(n.children);if(y)return y}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(n,u){n[u]=this.targetObject[this.propertyName]}_getValue_array(n,u){const f=this.resolvedProperty;for(let y=0,S=f.length;y!==S;++y)n[u++]=f[y]}_getValue_arrayElement(n,u){n[u]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(n,u){this.resolvedProperty.toArray(n,u)}_setValue_direct(n,u){this.targetObject[this.propertyName]=n[u]}_setValue_direct_setNeedsUpdate(n,u){this.targetObject[this.propertyName]=n[u],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(n,u){this.targetObject[this.propertyName]=n[u],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(n,u){const f=this.resolvedProperty;for(let y=0,S=f.length;y!==S;++y)f[y]=n[u++]}_setValue_array_setNeedsUpdate(n,u){const f=this.resolvedProperty;for(let y=0,S=f.length;y!==S;++y)f[y]=n[u++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(n,u){const f=this.resolvedProperty;for(let y=0,S=f.length;y!==S;++y)f[y]=n[u++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(n,u){this.resolvedProperty[this.propertyIndex]=n[u]}_setValue_arrayElement_setNeedsUpdate(n,u){this.resolvedProperty[this.propertyIndex]=n[u],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(n,u){this.resolvedProperty[this.propertyIndex]=n[u],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(n,u){this.resolvedProperty.fromArray(n,u)}_setValue_fromArray_setNeedsUpdate(n,u){this.resolvedProperty.fromArray(n,u),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(n,u){this.resolvedProperty.fromArray(n,u),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(n,u){this.bind(),this.getValue(n,u)}_setValue_unbound(n,u){this.bind(),this.setValue(n,u)}bind(){let n=this.node;const u=this.parsedPath,f=u.objectName,y=u.propertyName;let S=u.propertyIndex;if(n||(n=PropertyBinding.findNode(this.rootNode,u.nodeName),this.node=n),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!n){warn("PropertyBinding: No target node found for track: "+this.path+".");return}if(f){let T=u.objectIndex;switch(f){case"materials":if(!n.material){error("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!n.material.materials){error("PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}n=n.material.materials;break;case"bones":if(!n.skeleton){error("PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}n=n.skeleton.bones;for(let R=0;R<n.length;R++)if(n[R].name===T){T=R;break}break;case"map":if("map"in n){n=n.map;break}if(!n.material){error("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!n.material.map){error("PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}n=n.material.map;break;default:if(n[f]===void 0){error("PropertyBinding: Can not bind to objectName of node undefined.",this);return}n=n[f]}if(T!==void 0){if(n[T]===void 0){error("PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,n);return}n=n[T]}}const A=n[y];if(A===void 0){const T=u.nodeName;error("PropertyBinding: Trying to update property for track: "+T+"."+y+" but it wasn't found.",n);return}let w=this.Versioning.None;this.targetObject=n,n.isMaterial===!0?w=this.Versioning.NeedsUpdate:n.isObject3D===!0&&(w=this.Versioning.MatrixWorldNeedsUpdate);let C=this.BindingType.Direct;if(S!==void 0){if(y==="morphTargetInfluences"){if(!n.geometry){error("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!n.geometry.morphAttributes){error("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}n.morphTargetDictionary[S]!==void 0&&(S=n.morphTargetDictionary[S])}C=this.BindingType.ArrayElement,this.resolvedProperty=A,this.propertyIndex=S}else A.fromArray!==void 0&&A.toArray!==void 0?(C=this.BindingType.HasFromToArray,this.resolvedProperty=A):Array.isArray(A)?(C=this.BindingType.EntireArray,this.resolvedProperty=A):this.propertyName=y;this.getValue=this.GetterByBindingType[C],this.setValue=this.SetterByBindingTypeAndVersioning[C][w]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}PropertyBinding.Composite=Composite;PropertyBinding.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};PropertyBinding.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};PropertyBinding.prototype.GetterByBindingType=[PropertyBinding.prototype._getValue_direct,PropertyBinding.prototype._getValue_array,PropertyBinding.prototype._getValue_arrayElement,PropertyBinding.prototype._getValue_toArray];PropertyBinding.prototype.SetterByBindingTypeAndVersioning=[[PropertyBinding.prototype._setValue_direct,PropertyBinding.prototype._setValue_direct_setNeedsUpdate,PropertyBinding.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_array,PropertyBinding.prototype._setValue_array_setNeedsUpdate,PropertyBinding.prototype._setValue_array_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_arrayElement,PropertyBinding.prototype._setValue_arrayElement_setNeedsUpdate,PropertyBinding.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_fromArray,PropertyBinding.prototype._setValue_fromArray_setNeedsUpdate,PropertyBinding.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class AnimationObjectGroup{constructor(){this.isAnimationObjectGroup=!0,this.uuid=generateUUID$1(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const n={};this._indicesByUUID=n;for(let f=0,y=arguments.length;f!==y;++f)n[arguments[f].uuid]=f;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const u=this;this.stats={objects:{get total(){return u._objects.length},get inUse(){return this.total-u.nCachedObjects_}},get bindingsPerObject(){return u._bindings.length}}}add(){const n=this._objects,u=this._indicesByUUID,f=this._paths,y=this._parsedPaths,S=this._bindings,A=S.length;let w,C=n.length,T=this.nCachedObjects_;for(let R=0,I=arguments.length;R!==I;++R){const N=arguments[R],L=N.uuid;let F=u[L];if(F===void 0){F=C++,u[L]=F,n.push(N);for(let H=0,z=A;H!==z;++H)S[H].push(new PropertyBinding(N,f[H],y[H]))}else if(F<T){w=n[F];const H=--T,z=n[H];u[z.uuid]=F,n[F]=z,u[L]=H,n[H]=N;for(let U=0,G=A;U!==G;++U){const Y=S[U],K=Y[H];let Z=Y[F];Y[F]=K,Z===void 0&&(Z=new PropertyBinding(N,f[U],y[U])),Y[H]=Z}}else n[F]!==w&&error("AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=T}remove(){const n=this._objects,u=this._indicesByUUID,f=this._bindings,y=f.length;let S=this.nCachedObjects_;for(let A=0,w=arguments.length;A!==w;++A){const C=arguments[A],T=C.uuid,R=u[T];if(R!==void 0&&R>=S){const I=S++,N=n[I];u[N.uuid]=R,n[R]=N,u[T]=I,n[I]=C;for(let L=0,F=y;L!==F;++L){const H=f[L],z=H[I],U=H[R];H[R]=z,H[I]=U}}}this.nCachedObjects_=S}uncache(){const n=this._objects,u=this._indicesByUUID,f=this._bindings,y=f.length;let S=this.nCachedObjects_,A=n.length;for(let w=0,C=arguments.length;w!==C;++w){const T=arguments[w],R=T.uuid,I=u[R];if(I!==void 0)if(delete u[R],I<S){const N=--S,L=n[N],F=--A,H=n[F];u[L.uuid]=I,n[I]=L,u[H.uuid]=N,n[N]=H,n.pop();for(let z=0,U=y;z!==U;++z){const G=f[z],Y=G[N],K=G[F];G[I]=Y,G[N]=K,G.pop()}}else{const N=--A,L=n[N];N>0&&(u[L.uuid]=I),n[I]=L,n.pop();for(let F=0,H=y;F!==H;++F){const z=f[F];z[I]=z[N],z.pop()}}}this.nCachedObjects_=S}subscribe_(n,u){const f=this._bindingsIndicesByPath;let y=f[n];const S=this._bindings;if(y!==void 0)return S[y];const A=this._paths,w=this._parsedPaths,C=this._objects,T=C.length,R=this.nCachedObjects_,I=new Array(T);y=S.length,f[n]=y,A.push(n),w.push(u),S.push(I);for(let N=R,L=C.length;N!==L;++N){const F=C[N];I[N]=new PropertyBinding(F,n,u)}return I}unsubscribe_(n){const u=this._bindingsIndicesByPath,f=u[n];if(f!==void 0){const y=this._paths,S=this._parsedPaths,A=this._bindings,w=A.length-1,C=A[w],T=n[w];u[T]=f,A[f]=C,A.pop(),S[f]=S[w],S.pop(),y[f]=y[w],y.pop()}}}class AnimationAction{constructor(n,u,f=null,y=u.blendMode){this._mixer=n,this._clip=u,this._localRoot=f,this.blendMode=y;const S=u.tracks,A=S.length,w=new Array(A),C={endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding};for(let T=0;T!==A;++T){const R=S[T].createInterpolant(null);w[T]=R,R.settings=C}this._interpolantSettings=C,this._interpolants=w,this._propertyBindings=new Array(A),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=LoopRepeat,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(n){return this._startTime=n,this}setLoop(n,u){return this.loop=n,this.repetitions=u,this}setEffectiveWeight(n){return this.weight=n,this._effectiveWeight=this.enabled?n:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(n){return this._scheduleFading(n,0,1)}fadeOut(n){return this._scheduleFading(n,1,0)}crossFadeFrom(n,u,f=!1){if(n.fadeOut(u),this.fadeIn(u),f===!0){const y=this._clip.duration,S=n._clip.duration,A=S/y,w=y/S;n.warp(1,A,u),this.warp(w,1,u)}return this}crossFadeTo(n,u,f=!1){return n.crossFadeFrom(this,u,f)}stopFading(){const n=this._weightInterpolant;return n!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(n)),this}setEffectiveTimeScale(n){return this.timeScale=n,this._effectiveTimeScale=this.paused?0:n,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(n){return this.timeScale=this._clip.duration/n,this.stopWarping()}syncWith(n){return this.time=n.time,this.timeScale=n.timeScale,this.stopWarping()}halt(n){return this.warp(this._effectiveTimeScale,0,n)}warp(n,u,f){const y=this._mixer,S=y.time,A=this.timeScale;let w=this._timeScaleInterpolant;w===null&&(w=y._lendControlInterpolant(),this._timeScaleInterpolant=w);const C=w.parameterPositions,T=w.sampleValues;return C[0]=S,C[1]=S+f,T[0]=n/A,T[1]=u/A,this}stopWarping(){const n=this._timeScaleInterpolant;return n!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(n)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(n,u,f,y){if(!this.enabled){this._updateWeight(n);return}const S=this._startTime;if(S!==null){const C=(n-S)*f;C<0||f===0?u=0:(this._startTime=null,u=f*C)}u*=this._updateTimeScale(n);const A=this._updateTime(u),w=this._updateWeight(n);if(w>0){const C=this._interpolants,T=this._propertyBindings;switch(this.blendMode){case AdditiveAnimationBlendMode:for(let R=0,I=C.length;R!==I;++R)C[R].evaluate(A),T[R].accumulateAdditive(w);break;case NormalAnimationBlendMode:default:for(let R=0,I=C.length;R!==I;++R)C[R].evaluate(A),T[R].accumulate(y,w)}}}_updateWeight(n){let u=0;if(this.enabled){u=this.weight;const f=this._weightInterpolant;if(f!==null){const y=f.evaluate(n)[0];u*=y,n>f.parameterPositions[1]&&(this.stopFading(),y===0&&(this.enabled=!1))}}return this._effectiveWeight=u,u}_updateTimeScale(n){let u=0;if(!this.paused){u=this.timeScale;const f=this._timeScaleInterpolant;if(f!==null){const y=f.evaluate(n)[0];u*=y,n>f.parameterPositions[1]&&(this.stopWarping(),u===0?this.paused=!0:this.timeScale=u)}}return this._effectiveTimeScale=u,u}_updateTime(n){const u=this._clip.duration,f=this.loop;let y=this.time+n,S=this._loopCount;const A=f===LoopPingPong;if(n===0)return S===-1?y:A&&(S&1)===1?u-y:y;if(f===LoopOnce){S===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(y>=u)y=u;else if(y<0)y=0;else{this.time=y;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=y,this._mixer.dispatchEvent({type:"finished",action:this,direction:n<0?-1:1})}}else{if(S===-1&&(n>=0?(S=0,this._setEndings(!0,this.repetitions===0,A)):this._setEndings(this.repetitions===0,!0,A)),y>=u||y<0){const w=Math.floor(y/u);y-=u*w,S+=Math.abs(w);const C=this.repetitions-S;if(C<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,y=n>0?u:0,this.time=y,this._mixer.dispatchEvent({type:"finished",action:this,direction:n>0?1:-1});else{if(C===1){const T=n<0;this._setEndings(T,!T,A)}else this._setEndings(!1,!1,A);this._loopCount=S,this.time=y,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:w})}}else this.time=y;if(A&&(S&1)===1)return u-y}return y}_setEndings(n,u,f){const y=this._interpolantSettings;f?(y.endingStart=ZeroSlopeEnding,y.endingEnd=ZeroSlopeEnding):(n?y.endingStart=this.zeroSlopeAtStart?ZeroSlopeEnding:ZeroCurvatureEnding:y.endingStart=WrapAroundEnding,u?y.endingEnd=this.zeroSlopeAtEnd?ZeroSlopeEnding:ZeroCurvatureEnding:y.endingEnd=WrapAroundEnding)}_scheduleFading(n,u,f){const y=this._mixer,S=y.time;let A=this._weightInterpolant;A===null&&(A=y._lendControlInterpolant(),this._weightInterpolant=A);const w=A.parameterPositions,C=A.sampleValues;return w[0]=S,C[0]=u,w[1]=S+n,C[1]=f,this}}const _controlInterpolantsResultBuffer=new Float32Array(1);class AnimationMixer extends EventDispatcher{constructor(n){super(),this._root=n,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(n,u){const f=n._localRoot||this._root,y=n._clip.tracks,S=y.length,A=n._propertyBindings,w=n._interpolants,C=f.uuid,T=this._bindingsByRootAndName;let R=T[C];R===void 0&&(R={},T[C]=R);for(let I=0;I!==S;++I){const N=y[I],L=N.name;let F=R[L];if(F!==void 0)++F.referenceCount,A[I]=F;else{if(F=A[I],F!==void 0){F._cacheIndex===null&&(++F.referenceCount,this._addInactiveBinding(F,C,L));continue}const H=u&&u._propertyBindings[I].binding.parsedPath;F=new PropertyMixer(PropertyBinding.create(f,L,H),N.ValueTypeName,N.getValueSize()),++F.referenceCount,this._addInactiveBinding(F,C,L),A[I]=F}w[I].resultBuffer=F.buffer}}_activateAction(n){if(!this._isActiveAction(n)){if(n._cacheIndex===null){const f=(n._localRoot||this._root).uuid,y=n._clip.uuid,S=this._actionsByClip[y];this._bindAction(n,S&&S.knownActions[0]),this._addInactiveAction(n,y,f)}const u=n._propertyBindings;for(let f=0,y=u.length;f!==y;++f){const S=u[f];S.useCount++===0&&(this._lendBinding(S),S.saveOriginalState())}this._lendAction(n)}}_deactivateAction(n){if(this._isActiveAction(n)){const u=n._propertyBindings;for(let f=0,y=u.length;f!==y;++f){const S=u[f];--S.useCount===0&&(S.restoreOriginalState(),this._takeBackBinding(S))}this._takeBackAction(n)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const n=this;this.stats={actions:{get total(){return n._actions.length},get inUse(){return n._nActiveActions}},bindings:{get total(){return n._bindings.length},get inUse(){return n._nActiveBindings}},controlInterpolants:{get total(){return n._controlInterpolants.length},get inUse(){return n._nActiveControlInterpolants}}}}_isActiveAction(n){const u=n._cacheIndex;return u!==null&&u<this._nActiveActions}_addInactiveAction(n,u,f){const y=this._actions,S=this._actionsByClip;let A=S[u];if(A===void 0)A={knownActions:[n],actionByRoot:{}},n._byClipCacheIndex=0,S[u]=A;else{const w=A.knownActions;n._byClipCacheIndex=w.length,w.push(n)}n._cacheIndex=y.length,y.push(n),A.actionByRoot[f]=n}_removeInactiveAction(n){const u=this._actions,f=u[u.length-1],y=n._cacheIndex;f._cacheIndex=y,u[y]=f,u.pop(),n._cacheIndex=null;const S=n._clip.uuid,A=this._actionsByClip,w=A[S],C=w.knownActions,T=C[C.length-1],R=n._byClipCacheIndex;T._byClipCacheIndex=R,C[R]=T,C.pop(),n._byClipCacheIndex=null;const I=w.actionByRoot,N=(n._localRoot||this._root).uuid;delete I[N],C.length===0&&delete A[S],this._removeInactiveBindingsForAction(n)}_removeInactiveBindingsForAction(n){const u=n._propertyBindings;for(let f=0,y=u.length;f!==y;++f){const S=u[f];--S.referenceCount===0&&this._removeInactiveBinding(S)}}_lendAction(n){const u=this._actions,f=n._cacheIndex,y=this._nActiveActions++,S=u[y];n._cacheIndex=y,u[y]=n,S._cacheIndex=f,u[f]=S}_takeBackAction(n){const u=this._actions,f=n._cacheIndex,y=--this._nActiveActions,S=u[y];n._cacheIndex=y,u[y]=n,S._cacheIndex=f,u[f]=S}_addInactiveBinding(n,u,f){const y=this._bindingsByRootAndName,S=this._bindings;let A=y[u];A===void 0&&(A={},y[u]=A),A[f]=n,n._cacheIndex=S.length,S.push(n)}_removeInactiveBinding(n){const u=this._bindings,f=n.binding,y=f.rootNode.uuid,S=f.path,A=this._bindingsByRootAndName,w=A[y],C=u[u.length-1],T=n._cacheIndex;C._cacheIndex=T,u[T]=C,u.pop(),delete w[S],Object.keys(w).length===0&&delete A[y]}_lendBinding(n){const u=this._bindings,f=n._cacheIndex,y=this._nActiveBindings++,S=u[y];n._cacheIndex=y,u[y]=n,S._cacheIndex=f,u[f]=S}_takeBackBinding(n){const u=this._bindings,f=n._cacheIndex,y=--this._nActiveBindings,S=u[y];n._cacheIndex=y,u[y]=n,S._cacheIndex=f,u[f]=S}_lendControlInterpolant(){const n=this._controlInterpolants,u=this._nActiveControlInterpolants++;let f=n[u];return f===void 0&&(f=new LinearInterpolant(new Float32Array(2),new Float32Array(2),1,_controlInterpolantsResultBuffer),f.__cacheIndex=u,n[u]=f),f}_takeBackControlInterpolant(n){const u=this._controlInterpolants,f=n.__cacheIndex,y=--this._nActiveControlInterpolants,S=u[y];n.__cacheIndex=y,u[y]=n,S.__cacheIndex=f,u[f]=S}clipAction(n,u,f){const y=u||this._root,S=y.uuid;let A=typeof n=="string"?AnimationClip.findByName(y,n):n;const w=A!==null?A.uuid:n,C=this._actionsByClip[w];let T=null;if(f===void 0&&(A!==null?f=A.blendMode:f=NormalAnimationBlendMode),C!==void 0){const I=C.actionByRoot[S];if(I!==void 0&&I.blendMode===f)return I;T=C.knownActions[0],A===null&&(A=T._clip)}if(A===null)return null;const R=new AnimationAction(this,A,u,f);return this._bindAction(R,T),this._addInactiveAction(R,w,S),R}existingAction(n,u){const f=u||this._root,y=f.uuid,S=typeof n=="string"?AnimationClip.findByName(f,n):n,A=S?S.uuid:n,w=this._actionsByClip[A];return w!==void 0&&w.actionByRoot[y]||null}stopAllAction(){const n=this._actions,u=this._nActiveActions;for(let f=u-1;f>=0;--f)n[f].stop();return this}update(n){n*=this.timeScale;const u=this._actions,f=this._nActiveActions,y=this.time+=n,S=Math.sign(n),A=this._accuIndex^=1;for(let T=0;T!==f;++T)u[T]._update(y,n,S,A);const w=this._bindings,C=this._nActiveBindings;for(let T=0;T!==C;++T)w[T].apply(A);return this}setTime(n){this.time=0;for(let u=0;u<this._actions.length;u++)this._actions[u].time=0;return this.update(n)}getRoot(){return this._root}uncacheClip(n){const u=this._actions,f=n.uuid,y=this._actionsByClip,S=y[f];if(S!==void 0){const A=S.knownActions;for(let w=0,C=A.length;w!==C;++w){const T=A[w];this._deactivateAction(T);const R=T._cacheIndex,I=u[u.length-1];T._cacheIndex=null,T._byClipCacheIndex=null,I._cacheIndex=R,u[R]=I,u.pop(),this._removeInactiveBindingsForAction(T)}delete y[f]}}uncacheRoot(n){const u=n.uuid,f=this._actionsByClip;for(const A in f){const w=f[A].actionByRoot,C=w[u];C!==void 0&&(this._deactivateAction(C),this._removeInactiveAction(C))}const y=this._bindingsByRootAndName,S=y[u];if(S!==void 0)for(const A in S){const w=S[A];w.restoreOriginalState(),this._removeInactiveBinding(w)}}uncacheAction(n,u){const f=this.existingAction(n,u);f!==null&&(this._deactivateAction(f),this._removeInactiveAction(f))}}class RenderTarget3D extends RenderTarget{constructor(n=1,u=1,f=1,y={}){super(n,u,y),this.isRenderTarget3D=!0,this.depth=f,this.texture=new Data3DTexture(null,n,u,f),this._setTextureOptions(y),this.texture.isRenderTargetTexture=!0}}class Uniform{constructor(n){this.value=n}clone(){return new Uniform(this.value.clone===void 0?this.value:this.value.clone())}}let _id$3=0;class UniformsGroup extends EventDispatcher{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:_id$3++}),this.name="",this.usage=StaticDrawUsage,this.uniforms=[]}add(n){return this.uniforms.push(n),this}remove(n){const u=this.uniforms.indexOf(n);return u!==-1&&this.uniforms.splice(u,1),this}setName(n){return this.name=n,this}setUsage(n){return this.usage=n,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(n){this.name=n.name,this.usage=n.usage;const u=n.uniforms;this.uniforms.length=0;for(let f=0,y=u.length;f<y;f++){const S=Array.isArray(u[f])?u[f]:[u[f]];for(let A=0;A<S.length;A++)this.uniforms.push(S[A].clone())}return this}clone(){return new this.constructor().copy(this)}}class InstancedInterleavedBuffer extends InterleavedBuffer{constructor(n,u,f=1){super(n,u),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=f}copy(n){return super.copy(n),this.meshPerAttribute=n.meshPerAttribute,this}clone(n){const u=super.clone(n);return u.meshPerAttribute=this.meshPerAttribute,u}toJSON(n){const u=super.toJSON(n);return u.isInstancedInterleavedBuffer=!0,u.meshPerAttribute=this.meshPerAttribute,u}}class GLBufferAttribute{constructor(n,u,f,y,S,A=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=n,this.type=u,this.itemSize=f,this.elementSize=y,this.count=S,this.normalized=A,this.version=0}set needsUpdate(n){n===!0&&this.version++}setBuffer(n){return this.buffer=n,this}setType(n,u){return this.type=n,this.elementSize=u,this}setItemSize(n){return this.itemSize=n,this}setCount(n){return this.count=n,this}}const _matrix=new Matrix4;class Raycaster{constructor(n,u,f=0,y=1/0){this.ray=new Ray(n,u),this.near=f,this.far=y,this.camera=null,this.layers=new Layers,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(n,u){this.ray.set(n,u)}setFromCamera(n,u){u.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(u.matrixWorld),this.ray.direction.set(n.x,n.y,.5).unproject(u).sub(this.ray.origin).normalize(),this.camera=u):u.isOrthographicCamera?(this.ray.origin.set(n.x,n.y,(u.near+u.far)/(u.near-u.far)).unproject(u),this.ray.direction.set(0,0,-1).transformDirection(u.matrixWorld),this.camera=u):error("Raycaster: Unsupported camera type: "+u.type)}setFromXRController(n){return _matrix.identity().extractRotation(n.matrixWorld),this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(_matrix),this}intersectObject(n,u=!0,f=[]){return intersect(n,this,f,u),f.sort(ascSort),f}intersectObjects(n,u=!0,f=[]){for(let y=0,S=n.length;y<S;y++)intersect(n[y],this,f,u);return f.sort(ascSort),f}}function ascSort(s,n){return s.distance-n.distance}function intersect(s,n,u,f){let y=!0;if(s.layers.test(n.layers)&&s.raycast(n,u)===!1&&(y=!1),y===!0&&f===!0){const S=s.children;for(let A=0,w=S.length;A<w;A++)intersect(S[A],n,u,!0)}}let Timer$1=class{constructor(){this._previousTime=0,this._currentTime=0,this._startTime=performance.now(),this._delta=0,this._elapsed=0,this._timescale=1,this._document=null,this._pageVisibilityHandler=null}connect(n){this._document=n,n.hidden!==void 0&&(this._pageVisibilityHandler=handleVisibilityChange.bind(this),n.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disconnect(){this._pageVisibilityHandler!==null&&(this._document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this._pageVisibilityHandler=null),this._document=null}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getTimescale(){return this._timescale}setTimescale(n){return this._timescale=n,this}reset(){return this._currentTime=performance.now()-this._startTime,this}dispose(){this.disconnect()}update(n){return this._pageVisibilityHandler!==null&&this._document.hidden===!0?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(n!==void 0?n:performance.now())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}};function handleVisibilityChange(){this._document.hidden===!1&&this.reset()}class Spherical{constructor(n=1,u=0,f=0){this.radius=n,this.phi=u,this.theta=f}set(n,u,f){return this.radius=n,this.phi=u,this.theta=f,this}copy(n){return this.radius=n.radius,this.phi=n.phi,this.theta=n.theta,this}makeSafe(){return this.phi=clamp(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(n){return this.setFromCartesianCoords(n.x,n.y,n.z)}setFromCartesianCoords(n,u,f){return this.radius=Math.sqrt(n*n+u*u+f*f),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(n,f),this.phi=Math.acos(clamp(u/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Cylindrical{constructor(n=1,u=0,f=0){this.radius=n,this.theta=u,this.y=f}set(n,u,f){return this.radius=n,this.theta=u,this.y=f,this}copy(n){return this.radius=n.radius,this.theta=n.theta,this.y=n.y,this}setFromVector3(n){return this.setFromCartesianCoords(n.x,n.y,n.z)}setFromCartesianCoords(n,u,f){return this.radius=Math.sqrt(n*n+f*f),this.theta=Math.atan2(n,f),this.y=u,this}clone(){return new this.constructor().copy(this)}}class Matrix2{constructor(n,u,f,y){Matrix2.prototype.isMatrix2=!0,this.elements=[1,0,0,1],n!==void 0&&this.set(n,u,f,y)}identity(){return this.set(1,0,0,1),this}fromArray(n,u=0){for(let f=0;f<4;f++)this.elements[f]=n[f+u];return this}set(n,u,f,y){const S=this.elements;return S[0]=n,S[2]=u,S[1]=f,S[3]=y,this}}const _vector$4=new Vector2;class Box2{constructor(n=new Vector2(1/0,1/0),u=new Vector2(-1/0,-1/0)){this.isBox2=!0,this.min=n,this.max=u}set(n,u){return this.min.copy(n),this.max.copy(u),this}setFromPoints(n){this.makeEmpty();for(let u=0,f=n.length;u<f;u++)this.expandByPoint(n[u]);return this}setFromCenterAndSize(n,u){const f=_vector$4.copy(u).multiplyScalar(.5);return this.min.copy(n).sub(f),this.max.copy(n).add(f),this}clone(){return new this.constructor().copy(this)}copy(n){return this.min.copy(n.min),this.max.copy(n.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(n){return this.isEmpty()?n.set(0,0):n.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(n){return this.isEmpty()?n.set(0,0):n.subVectors(this.max,this.min)}expandByPoint(n){return this.min.min(n),this.max.max(n),this}expandByVector(n){return this.min.sub(n),this.max.add(n),this}expandByScalar(n){return this.min.addScalar(-n),this.max.addScalar(n),this}containsPoint(n){return n.x>=this.min.x&&n.x<=this.max.x&&n.y>=this.min.y&&n.y<=this.max.y}containsBox(n){return this.min.x<=n.min.x&&n.max.x<=this.max.x&&this.min.y<=n.min.y&&n.max.y<=this.max.y}getParameter(n,u){return u.set((n.x-this.min.x)/(this.max.x-this.min.x),(n.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(n){return n.max.x>=this.min.x&&n.min.x<=this.max.x&&n.max.y>=this.min.y&&n.min.y<=this.max.y}clampPoint(n,u){return u.copy(n).clamp(this.min,this.max)}distanceToPoint(n){return this.clampPoint(n,_vector$4).distanceTo(n)}intersect(n){return this.min.max(n.min),this.max.min(n.max),this.isEmpty()&&this.makeEmpty(),this}union(n){return this.min.min(n.min),this.max.max(n.max),this}translate(n){return this.min.add(n),this.max.add(n),this}equals(n){return n.min.equals(this.min)&&n.max.equals(this.max)}}const _startP=new Vector3,_startEnd=new Vector3,_d1=new Vector3,_d2=new Vector3,_r=new Vector3,_c1=new Vector3,_c2=new Vector3;class Line3{constructor(n=new Vector3,u=new Vector3){this.start=n,this.end=u}set(n,u){return this.start.copy(n),this.end.copy(u),this}copy(n){return this.start.copy(n.start),this.end.copy(n.end),this}getCenter(n){return n.addVectors(this.start,this.end).multiplyScalar(.5)}delta(n){return n.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(n,u){return this.delta(u).multiplyScalar(n).add(this.start)}closestPointToPointParameter(n,u){_startP.subVectors(n,this.start),_startEnd.subVectors(this.end,this.start);const f=_startEnd.dot(_startEnd);let S=_startEnd.dot(_startP)/f;return u&&(S=clamp(S,0,1)),S}closestPointToPoint(n,u,f){const y=this.closestPointToPointParameter(n,u);return this.delta(f).multiplyScalar(y).add(this.start)}distanceSqToLine3(n,u=_c1,f=_c2){const y=10000000000000001e-32;let S,A;const w=this.start,C=n.start,T=this.end,R=n.end;_d1.subVectors(T,w),_d2.subVectors(R,C),_r.subVectors(w,C);const I=_d1.dot(_d1),N=_d2.dot(_d2),L=_d2.dot(_r);if(I<=y&&N<=y)return u.copy(w),f.copy(C),u.sub(f),u.dot(u);if(I<=y)S=0,A=L/N,A=clamp(A,0,1);else{const F=_d1.dot(_r);if(N<=y)A=0,S=clamp(-F/I,0,1);else{const H=_d1.dot(_d2),z=I*N-H*H;z!==0?S=clamp((H*L-F*N)/z,0,1):S=0,A=(H*S+L)/N,A<0?(A=0,S=clamp(-F/I,0,1)):A>1&&(A=1,S=clamp((H-F)/I,0,1))}}return u.copy(w).add(_d1.multiplyScalar(S)),f.copy(C).add(_d2.multiplyScalar(A)),u.sub(f),u.dot(u)}applyMatrix4(n){return this.start.applyMatrix4(n),this.end.applyMatrix4(n),this}equals(n){return n.start.equals(this.start)&&n.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const _vector$3=new Vector3;class SpotLightHelper extends Object3D{constructor(n,u){super(),this.light=n,this.matrixAutoUpdate=!1,this.color=u,this.type="SpotLightHelper";const f=new BufferGeometry,y=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let A=0,w=1,C=32;A<C;A++,w++){const T=A/C*Math.PI*2,R=w/C*Math.PI*2;y.push(Math.cos(T),Math.sin(T),1,Math.cos(R),Math.sin(R),1)}f.setAttribute("position",new Float32BufferAttribute(y,3));const S=new LineBasicMaterial({fog:!1,toneMapped:!1});this.cone=new LineSegments(f,S),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const n=this.light.distance?this.light.distance:1e3,u=n*Math.tan(this.light.angle);this.cone.scale.set(u,u,n),_vector$3.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(_vector$3),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const _vector$2=new Vector3,_boneMatrix=new Matrix4,_matrixWorldInv=new Matrix4;class SkeletonHelper extends LineSegments{constructor(n){const u=getBoneList(n),f=new BufferGeometry,y=[],S=[];for(let T=0;T<u.length;T++){const R=u[T];R.parent&&R.parent.isBone&&(y.push(0,0,0),y.push(0,0,0),S.push(0,0,0),S.push(0,0,0))}f.setAttribute("position",new Float32BufferAttribute(y,3)),f.setAttribute("color",new Float32BufferAttribute(S,3));const A=new LineBasicMaterial({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(f,A),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=n,this.bones=u,this.matrix=n.matrixWorld,this.matrixAutoUpdate=!1;const w=new Color(255),C=new Color(65280);this.setColors(w,C)}updateMatrixWorld(n){const u=this.bones,f=this.geometry,y=f.getAttribute("position");_matrixWorldInv.copy(this.root.matrixWorld).invert();for(let S=0,A=0;S<u.length;S++){const w=u[S];w.parent&&w.parent.isBone&&(_boneMatrix.multiplyMatrices(_matrixWorldInv,w.matrixWorld),_vector$2.setFromMatrixPosition(_boneMatrix),y.setXYZ(A,_vector$2.x,_vector$2.y,_vector$2.z),_boneMatrix.multiplyMatrices(_matrixWorldInv,w.parent.matrixWorld),_vector$2.setFromMatrixPosition(_boneMatrix),y.setXYZ(A+1,_vector$2.x,_vector$2.y,_vector$2.z),A+=2)}f.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(n)}setColors(n,u){const y=this.geometry.getAttribute("color");for(let S=0;S<y.count;S+=2)y.setXYZ(S,n.r,n.g,n.b),y.setXYZ(S+1,u.r,u.g,u.b);return y.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}function getBoneList(s){const n=[];s.isBone===!0&&n.push(s);for(let u=0;u<s.children.length;u++)n.push(...getBoneList(s.children[u]));return n}class PointLightHelper extends Mesh{constructor(n,u,f){const y=new SphereGeometry(u,4,2),S=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1});super(y,S),this.light=n,this.color=f,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const _vector$1=new Vector3,_color1=new Color,_color2=new Color;class HemisphereLightHelper extends Object3D{constructor(n,u,f){super(),this.light=n,this.matrix=n.matrixWorld,this.matrixAutoUpdate=!1,this.color=f,this.type="HemisphereLightHelper";const y=new OctahedronGeometry(u);y.rotateY(Math.PI*.5),this.material=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const S=y.getAttribute("position"),A=new Float32Array(S.count*3);y.setAttribute("color",new BufferAttribute(A,3)),this.add(new Mesh(y,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const n=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const u=n.geometry.getAttribute("color");_color1.copy(this.light.color),_color2.copy(this.light.groundColor);for(let f=0,y=u.count;f<y;f++){const S=f<y/2?_color1:_color2;u.setXYZ(f,S.r,S.g,S.b)}u.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),n.lookAt(_vector$1.setFromMatrixPosition(this.light.matrixWorld).negate())}}class GridHelper extends LineSegments{constructor(n=10,u=10,f=4473924,y=8947848){f=new Color(f),y=new Color(y);const S=u/2,A=n/u,w=n/2,C=[],T=[];for(let N=0,L=0,F=-w;N<=u;N++,F+=A){C.push(-w,0,F,w,0,F),C.push(F,0,-w,F,0,w);const H=N===S?f:y;H.toArray(T,L),L+=3,H.toArray(T,L),L+=3,H.toArray(T,L),L+=3,H.toArray(T,L),L+=3}const R=new BufferGeometry;R.setAttribute("position",new Float32BufferAttribute(C,3)),R.setAttribute("color",new Float32BufferAttribute(T,3));const I=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});super(R,I),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class PolarGridHelper extends LineSegments{constructor(n=10,u=16,f=8,y=64,S=4473924,A=8947848){S=new Color(S),A=new Color(A);const w=[],C=[];if(u>1)for(let I=0;I<u;I++){const N=I/u*(Math.PI*2),L=Math.sin(N)*n,F=Math.cos(N)*n;w.push(0,0,0),w.push(L,0,F);const H=I&1?S:A;C.push(H.r,H.g,H.b),C.push(H.r,H.g,H.b)}for(let I=0;I<f;I++){const N=I&1?S:A,L=n-n/f*I;for(let F=0;F<y;F++){let H=F/y*(Math.PI*2),z=Math.sin(H)*L,U=Math.cos(H)*L;w.push(z,0,U),C.push(N.r,N.g,N.b),H=(F+1)/y*(Math.PI*2),z=Math.sin(H)*L,U=Math.cos(H)*L,w.push(z,0,U),C.push(N.r,N.g,N.b)}}const T=new BufferGeometry;T.setAttribute("position",new Float32BufferAttribute(w,3)),T.setAttribute("color",new Float32BufferAttribute(C,3));const R=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});super(T,R),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const _v1=new Vector3,_v2=new Vector3,_v3=new Vector3;class DirectionalLightHelper extends Object3D{constructor(n,u,f){super(),this.light=n,this.matrix=n.matrixWorld,this.matrixAutoUpdate=!1,this.color=f,this.type="DirectionalLightHelper",u===void 0&&(u=1);let y=new BufferGeometry;y.setAttribute("position",new Float32BufferAttribute([-u,u,0,u,u,0,u,-u,0,-u,-u,0,-u,u,0],3));const S=new LineBasicMaterial({fog:!1,toneMapped:!1});this.lightPlane=new Line(y,S),this.add(this.lightPlane),y=new BufferGeometry,y.setAttribute("position",new Float32BufferAttribute([0,0,0,0,0,1],3)),this.targetLine=new Line(y,S),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),_v1.setFromMatrixPosition(this.light.matrixWorld),_v2.setFromMatrixPosition(this.light.target.matrixWorld),_v3.subVectors(_v2,_v1),this.lightPlane.lookAt(_v2),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(_v2),this.targetLine.scale.z=_v3.length()}}const _vector=new Vector3,_camera=new Camera;class CameraHelper extends LineSegments{constructor(n){const u=new BufferGeometry,f=new LineBasicMaterial({color:16777215,vertexColors:!0,toneMapped:!1}),y=[],S=[],A={};w("n1","n2"),w("n2","n4"),w("n4","n3"),w("n3","n1"),w("f1","f2"),w("f2","f4"),w("f4","f3"),w("f3","f1"),w("n1","f1"),w("n2","f2"),w("n3","f3"),w("n4","f4"),w("p","n1"),w("p","n2"),w("p","n3"),w("p","n4"),w("u1","u2"),w("u2","u3"),w("u3","u1"),w("c","t"),w("p","c"),w("cn1","cn2"),w("cn3","cn4"),w("cf1","cf2"),w("cf3","cf4");function w(F,H){C(F),C(H)}function C(F){y.push(0,0,0),S.push(0,0,0),A[F]===void 0&&(A[F]=[]),A[F].push(y.length/3-1)}u.setAttribute("position",new Float32BufferAttribute(y,3)),u.setAttribute("color",new Float32BufferAttribute(S,3)),super(u,f),this.type="CameraHelper",this.camera=n,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=n.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=A,this.update();const T=new Color(16755200),R=new Color(16711680),I=new Color(43775),N=new Color(16777215),L=new Color(3355443);this.setColors(T,R,I,N,L)}setColors(n,u,f,y,S){const w=this.geometry.getAttribute("color");return w.setXYZ(0,n.r,n.g,n.b),w.setXYZ(1,n.r,n.g,n.b),w.setXYZ(2,n.r,n.g,n.b),w.setXYZ(3,n.r,n.g,n.b),w.setXYZ(4,n.r,n.g,n.b),w.setXYZ(5,n.r,n.g,n.b),w.setXYZ(6,n.r,n.g,n.b),w.setXYZ(7,n.r,n.g,n.b),w.setXYZ(8,n.r,n.g,n.b),w.setXYZ(9,n.r,n.g,n.b),w.setXYZ(10,n.r,n.g,n.b),w.setXYZ(11,n.r,n.g,n.b),w.setXYZ(12,n.r,n.g,n.b),w.setXYZ(13,n.r,n.g,n.b),w.setXYZ(14,n.r,n.g,n.b),w.setXYZ(15,n.r,n.g,n.b),w.setXYZ(16,n.r,n.g,n.b),w.setXYZ(17,n.r,n.g,n.b),w.setXYZ(18,n.r,n.g,n.b),w.setXYZ(19,n.r,n.g,n.b),w.setXYZ(20,n.r,n.g,n.b),w.setXYZ(21,n.r,n.g,n.b),w.setXYZ(22,n.r,n.g,n.b),w.setXYZ(23,n.r,n.g,n.b),w.setXYZ(24,u.r,u.g,u.b),w.setXYZ(25,u.r,u.g,u.b),w.setXYZ(26,u.r,u.g,u.b),w.setXYZ(27,u.r,u.g,u.b),w.setXYZ(28,u.r,u.g,u.b),w.setXYZ(29,u.r,u.g,u.b),w.setXYZ(30,u.r,u.g,u.b),w.setXYZ(31,u.r,u.g,u.b),w.setXYZ(32,f.r,f.g,f.b),w.setXYZ(33,f.r,f.g,f.b),w.setXYZ(34,f.r,f.g,f.b),w.setXYZ(35,f.r,f.g,f.b),w.setXYZ(36,f.r,f.g,f.b),w.setXYZ(37,f.r,f.g,f.b),w.setXYZ(38,y.r,y.g,y.b),w.setXYZ(39,y.r,y.g,y.b),w.setXYZ(40,S.r,S.g,S.b),w.setXYZ(41,S.r,S.g,S.b),w.setXYZ(42,S.r,S.g,S.b),w.setXYZ(43,S.r,S.g,S.b),w.setXYZ(44,S.r,S.g,S.b),w.setXYZ(45,S.r,S.g,S.b),w.setXYZ(46,S.r,S.g,S.b),w.setXYZ(47,S.r,S.g,S.b),w.setXYZ(48,S.r,S.g,S.b),w.setXYZ(49,S.r,S.g,S.b),w.needsUpdate=!0,this}update(){const n=this.geometry,u=this.pointMap,f=1,y=1;let S,A;if(_camera.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),this.camera.reversedDepth===!0)S=1,A=0;else if(this.camera.coordinateSystem===WebGLCoordinateSystem)S=-1,A=1;else if(this.camera.coordinateSystem===WebGPUCoordinateSystem)S=0,A=1;else throw new Error("THREE.CameraHelper.update(): Invalid coordinate system: "+this.camera.coordinateSystem);setPoint("c",u,n,_camera,0,0,S),setPoint("t",u,n,_camera,0,0,A),setPoint("n1",u,n,_camera,-f,-y,S),setPoint("n2",u,n,_camera,f,-y,S),setPoint("n3",u,n,_camera,-f,y,S),setPoint("n4",u,n,_camera,f,y,S),setPoint("f1",u,n,_camera,-f,-y,A),setPoint("f2",u,n,_camera,f,-y,A),setPoint("f3",u,n,_camera,-f,y,A),setPoint("f4",u,n,_camera,f,y,A),setPoint("u1",u,n,_camera,f*.7,y*1.1,S),setPoint("u2",u,n,_camera,-f*.7,y*1.1,S),setPoint("u3",u,n,_camera,0,y*2,S),setPoint("cf1",u,n,_camera,-f,0,A),setPoint("cf2",u,n,_camera,f,0,A),setPoint("cf3",u,n,_camera,0,-y,A),setPoint("cf4",u,n,_camera,0,y,A),setPoint("cn1",u,n,_camera,-f,0,S),setPoint("cn2",u,n,_camera,f,0,S),setPoint("cn3",u,n,_camera,0,-y,S),setPoint("cn4",u,n,_camera,0,y,S),n.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function setPoint(s,n,u,f,y,S,A){_vector.set(y,S,A).unproject(f);const w=n[s];if(w!==void 0){const C=u.getAttribute("position");for(let T=0,R=w.length;T<R;T++)C.setXYZ(w[T],_vector.x,_vector.y,_vector.z)}}const _box=new Box3;class BoxHelper extends LineSegments{constructor(n,u=16776960){const f=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),y=new Float32Array(24),S=new BufferGeometry;S.setIndex(new BufferAttribute(f,1)),S.setAttribute("position",new BufferAttribute(y,3)),super(S,new LineBasicMaterial({color:u,toneMapped:!1})),this.object=n,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&_box.setFromObject(this.object),_box.isEmpty())return;const n=_box.min,u=_box.max,f=this.geometry.attributes.position,y=f.array;y[0]=u.x,y[1]=u.y,y[2]=u.z,y[3]=n.x,y[4]=u.y,y[5]=u.z,y[6]=n.x,y[7]=n.y,y[8]=u.z,y[9]=u.x,y[10]=n.y,y[11]=u.z,y[12]=u.x,y[13]=u.y,y[14]=n.z,y[15]=n.x,y[16]=u.y,y[17]=n.z,y[18]=n.x,y[19]=n.y,y[20]=n.z,y[21]=u.x,y[22]=n.y,y[23]=n.z,f.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(n){return this.object=n,this.update(),this}copy(n,u){return super.copy(n,u),this.object=n.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Box3Helper extends LineSegments{constructor(n,u=16776960){const f=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),y=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],S=new BufferGeometry;S.setIndex(new BufferAttribute(f,1)),S.setAttribute("position",new Float32BufferAttribute(y,3)),super(S,new LineBasicMaterial({color:u,toneMapped:!1})),this.box=n,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(n){const u=this.box;u.isEmpty()||(u.getCenter(this.position),u.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(n))}dispose(){this.geometry.dispose(),this.material.dispose()}}class PlaneHelper extends Line{constructor(n,u=1,f=16776960){const y=f,S=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],A=new BufferGeometry;A.setAttribute("position",new Float32BufferAttribute(S,3)),A.computeBoundingSphere(),super(A,new LineBasicMaterial({color:y,toneMapped:!1})),this.type="PlaneHelper",this.plane=n,this.size=u;const w=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],C=new BufferGeometry;C.setAttribute("position",new Float32BufferAttribute(w,3)),C.computeBoundingSphere(),this.add(new Mesh(C,new MeshBasicMaterial({color:y,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(n){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(n)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const _axis=new Vector3;let _lineGeometry,_coneGeometry;class ArrowHelper extends Object3D{constructor(n=new Vector3(0,0,1),u=new Vector3(0,0,0),f=1,y=16776960,S=f*.2,A=S*.2){super(),this.type="ArrowHelper",_lineGeometry===void 0&&(_lineGeometry=new BufferGeometry,_lineGeometry.setAttribute("position",new Float32BufferAttribute([0,0,0,0,1,0],3)),_coneGeometry=new ConeGeometry(.5,1,5,1),_coneGeometry.translate(0,-.5,0)),this.position.copy(u),this.line=new Line(_lineGeometry,new LineBasicMaterial({color:y,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Mesh(_coneGeometry,new MeshBasicMaterial({color:y,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(n),this.setLength(f,S,A)}setDirection(n){if(n.y>.99999)this.quaternion.set(0,0,0,1);else if(n.y<-.99999)this.quaternion.set(1,0,0,0);else{_axis.set(n.z,0,-n.x).normalize();const u=Math.acos(n.y);this.quaternion.setFromAxisAngle(_axis,u)}}setLength(n,u=n*.2,f=u*.2){this.line.scale.set(1,Math.max(1e-4,n-u),1),this.line.updateMatrix(),this.cone.scale.set(f,u,f),this.cone.position.y=n,this.cone.updateMatrix()}setColor(n){this.line.material.color.set(n),this.cone.material.color.set(n)}copy(n){return super.copy(n,!1),this.line.copy(n.line),this.cone.copy(n.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class AxesHelper extends LineSegments{constructor(n=1){const u=[0,0,0,n,0,0,0,0,0,0,n,0,0,0,0,0,0,n],f=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],y=new BufferGeometry;y.setAttribute("position",new Float32BufferAttribute(u,3)),y.setAttribute("color",new Float32BufferAttribute(f,3));const S=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});super(y,S),this.type="AxesHelper"}setColors(n,u,f){const y=new Color,S=this.geometry.attributes.color.array;return y.set(n),y.toArray(S,0),y.toArray(S,3),y.set(u),y.toArray(S,6),y.toArray(S,9),y.set(f),y.toArray(S,12),y.toArray(S,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class ShapePath{constructor(){this.type="ShapePath",this.color=new Color,this.subPaths=[],this.currentPath=null}moveTo(n,u){return this.currentPath=new Path,this.subPaths.push(this.currentPath),this.currentPath.moveTo(n,u),this}lineTo(n,u){return this.currentPath.lineTo(n,u),this}quadraticCurveTo(n,u,f,y){return this.currentPath.quadraticCurveTo(n,u,f,y),this}bezierCurveTo(n,u,f,y,S,A){return this.currentPath.bezierCurveTo(n,u,f,y,S,A),this}splineThru(n){return this.currentPath.splineThru(n),this}toShapes(n){function u(U){const G=[];for(let Y=0,K=U.length;Y<K;Y++){const Z=U[Y],J=new Shape;J.curves=Z.curves,G.push(J)}return G}function f(U,G){const Y=G.length;let K=!1;for(let Z=Y-1,J=0;J<Y;Z=J++){let te=G[Z],de=G[J],se=de.x-te.x,ne=de.y-te.y;if(Math.abs(ne)>Number.EPSILON){if(ne<0&&(te=G[J],se=-se,de=G[Z],ne=-ne),U.y<te.y||U.y>de.y)continue;if(U.y===te.y){if(U.x===te.x)return!0}else{const ge=ne*(U.x-te.x)-se*(U.y-te.y);if(ge===0)return!0;if(ge<0)continue;K=!K}}else{if(U.y!==te.y)continue;if(de.x<=U.x&&U.x<=te.x||te.x<=U.x&&U.x<=de.x)return!0}}return K}const y=ShapeUtils.isClockWise,S=this.subPaths;if(S.length===0)return[];let A,w,C;const T=[];if(S.length===1)return w=S[0],C=new Shape,C.curves=w.curves,T.push(C),T;let R=!y(S[0].getPoints());R=n?!R:R;const I=[],N=[];let L=[],F=0,H;N[F]=void 0,L[F]=[];for(let U=0,G=S.length;U<G;U++)w=S[U],H=w.getPoints(),A=y(H),A=n?!A:A,A?(!R&&N[F]&&F++,N[F]={s:new Shape,p:H},N[F].s.curves=w.curves,R&&F++,L[F]=[]):L[F].push({h:w,p:H[0]});if(!N[0])return u(S);if(N.length>1){let U=!1,G=0;for(let Y=0,K=N.length;Y<K;Y++)I[Y]=[];for(let Y=0,K=N.length;Y<K;Y++){const Z=L[Y];for(let J=0;J<Z.length;J++){const te=Z[J];let de=!0;for(let se=0;se<N.length;se++)f(te.p,N[se].p)&&(Y!==se&&G++,de?(de=!1,I[se].push(te)):U=!0);de&&I[Y].push(te)}}G>0&&U===!1&&(L=I)}let z;for(let U=0,G=N.length;U<G;U++){C=N[U].s,T.push(C),z=L[U];for(let Y=0,K=z.length;Y<K;Y++)C.holes.push(z[Y].h)}return T}}class Controls extends EventDispatcher{constructor(n,u=null){super(),this.object=n,this.domElement=u,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(n){if(n===void 0){warn("Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=n}disconnect(){}dispose(){}update(){}}function contain(s,n){const u=s.image&&s.image.width?s.image.width/s.image.height:1;return u>n?(s.repeat.x=1,s.repeat.y=u/n,s.offset.x=0,s.offset.y=(1-s.repeat.y)/2):(s.repeat.x=n/u,s.repeat.y=1,s.offset.x=(1-s.repeat.x)/2,s.offset.y=0),s}function cover(s,n){const u=s.image&&s.image.width?s.image.width/s.image.height:1;return u>n?(s.repeat.x=n/u,s.repeat.y=1,s.offset.x=(1-s.repeat.x)/2,s.offset.y=0):(s.repeat.x=1,s.repeat.y=u/n,s.offset.x=0,s.offset.y=(1-s.repeat.y)/2),s}function fill(s){return s.repeat.x=1,s.repeat.y=1,s.offset.x=0,s.offset.y=0,s}function getByteLength(s,n,u,f){const y=getTextureTypeByteLength(f);switch(u){case AlphaFormat:return s*n;case RedFormat:return s*n/y.components*y.byteLength;case RedIntegerFormat:return s*n/y.components*y.byteLength;case RGFormat:return s*n*2/y.components*y.byteLength;case RGIntegerFormat:return s*n*2/y.components*y.byteLength;case RGBFormat:return s*n*3/y.components*y.byteLength;case RGBAFormat:return s*n*4/y.components*y.byteLength;case RGBAIntegerFormat:return s*n*4/y.components*y.byteLength;case RGB_S3TC_DXT1_Format:case RGBA_S3TC_DXT1_Format:return Math.floor((s+3)/4)*Math.floor((n+3)/4)*8;case RGBA_S3TC_DXT3_Format:case RGBA_S3TC_DXT5_Format:return Math.floor((s+3)/4)*Math.floor((n+3)/4)*16;case RGB_PVRTC_2BPPV1_Format:case RGBA_PVRTC_2BPPV1_Format:return Math.max(s,16)*Math.max(n,8)/4;case RGB_PVRTC_4BPPV1_Format:case RGBA_PVRTC_4BPPV1_Format:return Math.max(s,8)*Math.max(n,8)/2;case RGB_ETC1_Format:case RGB_ETC2_Format:case R11_EAC_Format:case SIGNED_R11_EAC_Format:return Math.floor((s+3)/4)*Math.floor((n+3)/4)*8;case RGBA_ETC2_EAC_Format:case RG11_EAC_Format:case SIGNED_RG11_EAC_Format:return Math.floor((s+3)/4)*Math.floor((n+3)/4)*16;case RGBA_ASTC_4x4_Format:return Math.floor((s+3)/4)*Math.floor((n+3)/4)*16;case RGBA_ASTC_5x4_Format:return Math.floor((s+4)/5)*Math.floor((n+3)/4)*16;case RGBA_ASTC_5x5_Format:return Math.floor((s+4)/5)*Math.floor((n+4)/5)*16;case RGBA_ASTC_6x5_Format:return Math.floor((s+5)/6)*Math.floor((n+4)/5)*16;case RGBA_ASTC_6x6_Format:return Math.floor((s+5)/6)*Math.floor((n+5)/6)*16;case RGBA_ASTC_8x5_Format:return Math.floor((s+7)/8)*Math.floor((n+4)/5)*16;case RGBA_ASTC_8x6_Format:return Math.floor((s+7)/8)*Math.floor((n+5)/6)*16;case RGBA_ASTC_8x8_Format:return Math.floor((s+7)/8)*Math.floor((n+7)/8)*16;case RGBA_ASTC_10x5_Format:return Math.floor((s+9)/10)*Math.floor((n+4)/5)*16;case RGBA_ASTC_10x6_Format:return Math.floor((s+9)/10)*Math.floor((n+5)/6)*16;case RGBA_ASTC_10x8_Format:return Math.floor((s+9)/10)*Math.floor((n+7)/8)*16;case RGBA_ASTC_10x10_Format:return Math.floor((s+9)/10)*Math.floor((n+9)/10)*16;case RGBA_ASTC_12x10_Format:return Math.floor((s+11)/12)*Math.floor((n+9)/10)*16;case RGBA_ASTC_12x12_Format:return Math.floor((s+11)/12)*Math.floor((n+11)/12)*16;case RGBA_BPTC_Format:case RGB_BPTC_SIGNED_Format:case RGB_BPTC_UNSIGNED_Format:return Math.ceil(s/4)*Math.ceil(n/4)*16;case RED_RGTC1_Format:case SIGNED_RED_RGTC1_Format:return Math.ceil(s/4)*Math.ceil(n/4)*8;case RED_GREEN_RGTC2_Format:case SIGNED_RED_GREEN_RGTC2_Format:return Math.ceil(s/4)*Math.ceil(n/4)*16}throw new Error(`Unable to determine texture byte length for ${u} format.`)}function getTextureTypeByteLength(s){switch(s){case UnsignedByteType:case ByteType:return{byteLength:1,components:1};case UnsignedShortType:case ShortType:case HalfFloatType:return{byteLength:2,components:1};case UnsignedShort4444Type:case UnsignedShort5551Type:return{byteLength:2,components:4};case UnsignedIntType:case IntType:case FloatType:return{byteLength:4,components:1};case UnsignedInt5999Type:case UnsignedInt101111Type:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${s}.`)}class TextureUtils{static contain(n,u){return contain(n,u)}static cover(n,u){return cover(n,u)}static fill(n){return fill(n)}static getByteLength(n,u,f,y){return getByteLength(n,u,f,y)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:REVISION}}));typeof window<"u"&&(window.__THREE__?warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=REVISION);function WebGLAnimation(){let s=null,n=!1,u=null,f=null;function y(S,A){u(S,A),f=s.requestAnimationFrame(y)}return{start:function(){n!==!0&&u!==null&&(f=s.requestAnimationFrame(y),n=!0)},stop:function(){s.cancelAnimationFrame(f),n=!1},setAnimationLoop:function(S){u=S},setContext:function(S){s=S}}}function WebGLAttributes(s){const n=new WeakMap;function u(w,C){const T=w.array,R=w.usage,I=T.byteLength,N=s.createBuffer();s.bindBuffer(C,N),s.bufferData(C,T,R),w.onUploadCallback();let L;if(T instanceof Float32Array)L=s.FLOAT;else if(typeof Float16Array<"u"&&T instanceof Float16Array)L=s.HALF_FLOAT;else if(T instanceof Uint16Array)w.isFloat16BufferAttribute?L=s.HALF_FLOAT:L=s.UNSIGNED_SHORT;else if(T instanceof Int16Array)L=s.SHORT;else if(T instanceof Uint32Array)L=s.UNSIGNED_INT;else if(T instanceof Int32Array)L=s.INT;else if(T instanceof Int8Array)L=s.BYTE;else if(T instanceof Uint8Array)L=s.UNSIGNED_BYTE;else if(T instanceof Uint8ClampedArray)L=s.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+T);return{buffer:N,type:L,bytesPerElement:T.BYTES_PER_ELEMENT,version:w.version,size:I}}function f(w,C,T){const R=C.array,I=C.updateRanges;if(s.bindBuffer(T,w),I.length===0)s.bufferSubData(T,0,R);else{I.sort((L,F)=>L.start-F.start);let N=0;for(let L=1;L<I.length;L++){const F=I[N],H=I[L];H.start<=F.start+F.count+1?F.count=Math.max(F.count,H.start+H.count-F.start):(++N,I[N]=H)}I.length=N+1;for(let L=0,F=I.length;L<F;L++){const H=I[L];s.bufferSubData(T,H.start*R.BYTES_PER_ELEMENT,R,H.start,H.count)}C.clearUpdateRanges()}C.onUploadCallback()}function y(w){return w.isInterleavedBufferAttribute&&(w=w.data),n.get(w)}function S(w){w.isInterleavedBufferAttribute&&(w=w.data);const C=n.get(w);C&&(s.deleteBuffer(C.buffer),n.delete(w))}function A(w,C){if(w.isInterleavedBufferAttribute&&(w=w.data),w.isGLBufferAttribute){const R=n.get(w);(!R||R.version<w.version)&&n.set(w,{buffer:w.buffer,type:w.type,bytesPerElement:w.elementSize,version:w.version});return}const T=n.get(w);if(T===void 0)n.set(w,u(w,C));else if(T.version<w.version){if(T.size!==w.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");f(T.buffer,w,C),T.version=w.version}}return{get:y,remove:S,update:A}}var alphahash_fragment=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,alphahash_pars_fragment=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,alphamap_fragment=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,alphamap_pars_fragment=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,alphatest_fragment=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,alphatest_pars_fragment=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,aomap_fragment=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,aomap_pars_fragment=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,batching_pars_vertex=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,batching_vertex=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,begin_vertex=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,beginnormal_vertex=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,bsdfs=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,iridescence_fragment=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,bumpmap_pars_fragment=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,clipping_planes_fragment=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,clipping_planes_pars_fragment=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,clipping_planes_pars_vertex=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,clipping_planes_vertex=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,color_fragment=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,color_pars_fragment=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,color_pars_vertex=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,color_vertex=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,common=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,cube_uv_reflection_fragment=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,defaultnormal_vertex=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,displacementmap_pars_vertex=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,displacementmap_vertex=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,emissivemap_fragment=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,emissivemap_pars_fragment=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,colorspace_fragment="gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,envmap_fragment=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,envmap_common_pars_fragment=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
#endif`,envmap_pars_fragment=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,envmap_pars_vertex=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,envmap_vertex=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,fog_vertex=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,fog_pars_vertex=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,fog_fragment=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,fog_pars_fragment=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,gradientmap_pars_fragment=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,lightmap_pars_fragment=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lights_lambert_fragment=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,lights_lambert_pars_fragment=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,lights_pars_begin=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,envmap_physical_pars_fragment=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, pow4( roughness ) ) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,lights_toon_fragment=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,lights_toon_pars_fragment=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,lights_phong_fragment=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_phong_pars_fragment=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,lights_physical_fragment=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.diffuseContribution = diffuseColor.rgb * ( 1.0 - metalnessFactor );
material.metalness = metalnessFactor;
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor;
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = vec3( 0.04 );
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.0001, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,lights_physical_pars_fragment=`uniform sampler2D dfgLUT;
struct PhysicalMaterial {
	vec3 diffuseColor;
	vec3 diffuseContribution;
	vec3 specularColor;
	vec3 specularColorBlended;
	float roughness;
	float metalness;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
		vec3 iridescenceFresnelDielectric;
		vec3 iridescenceFresnelMetallic;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return v;
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColorBlended;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transpose( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float rInv = 1.0 / ( roughness + 0.1 );
	float a = -1.9362 + 1.0678 * roughness + 0.4573 * r2 - 0.8469 * rInv;
	float b = -0.6014 + 0.5538 * roughness - 0.4670 * r2 - 0.1255 * rInv;
	float DG = exp( a * dotNV + b );
	return saturate( DG );
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
vec3 BRDF_GGX_Multiscatter( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 singleScatter = BRDF_GGX( lightDir, viewDir, normal, material );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 dfgV = texture2D( dfgLUT, vec2( material.roughness, dotNV ) ).rg;
	vec2 dfgL = texture2D( dfgLUT, vec2( material.roughness, dotNL ) ).rg;
	vec3 FssEss_V = material.specularColorBlended * dfgV.x + material.specularF90 * dfgV.y;
	vec3 FssEss_L = material.specularColorBlended * dfgL.x + material.specularF90 * dfgL.y;
	float Ess_V = dfgV.x + dfgV.y;
	float Ess_L = dfgL.x + dfgL.y;
	float Ems_V = 1.0 - Ess_V;
	float Ems_L = 1.0 - Ess_L;
	vec3 Favg = material.specularColorBlended + ( 1.0 - material.specularColorBlended ) * 0.047619;
	vec3 Fms = FssEss_V * FssEss_L * Favg / ( 1.0 - Ems_V * Ems_L * Favg + EPSILON );
	float compensationFactor = Ems_V * Ems_L;
	vec3 multiScatter = Fms * compensationFactor;
	return singleScatter + multiScatter;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColorBlended * t2.x + ( vec3( 1.0 ) - material.specularColorBlended ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseContribution * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
 
 		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
 
 		float sheenAlbedoV = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
 		float sheenAlbedoL = IBLSheenBRDF( geometryNormal, directLight.direction, material.sheenRoughness );
 
 		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * max( sheenAlbedoV, sheenAlbedoL );
 
 		irradiance *= sheenEnergyComp;
 
 	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX_Multiscatter( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseContribution );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 diffuse = irradiance * BRDF_Lambert( material.diffuseContribution );
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		diffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectDiffuse += diffuse;
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness ) * RECIPROCAL_PI;
 	#endif
	vec3 singleScatteringDielectric = vec3( 0.0 );
	vec3 multiScatteringDielectric = vec3( 0.0 );
	vec3 singleScatteringMetallic = vec3( 0.0 );
	vec3 multiScatteringMetallic = vec3( 0.0 );
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnelDielectric, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.iridescence, material.iridescenceFresnelMetallic, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscattering( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#endif
	vec3 singleScattering = mix( singleScatteringDielectric, singleScatteringMetallic, material.metalness );
	vec3 multiScattering = mix( multiScatteringDielectric, multiScatteringMetallic, material.metalness );
	vec3 totalScatteringDielectric = singleScatteringDielectric + multiScatteringDielectric;
	vec3 diffuse = material.diffuseContribution * ( 1.0 - totalScatteringDielectric );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	vec3 indirectSpecular = radiance * singleScattering;
	indirectSpecular += multiScattering * cosineWeightedIrradiance;
	vec3 indirectDiffuse = diffuse * cosineWeightedIrradiance;
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		indirectSpecular *= sheenEnergyComp;
		indirectDiffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectSpecular += indirectSpecular;
	reflectedLight.indirectDiffuse += indirectDiffuse;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,lights_fragment_begin=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnelDielectric = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceFresnelMetallic = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.diffuseColor );
		material.iridescenceFresnel = mix( material.iridescenceFresnelDielectric, material.iridescenceFresnelMetallic, material.metalness );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS ) && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,lights_fragment_maps=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,lights_fragment_end=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,logdepthbuf_fragment=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,logdepthbuf_pars_fragment=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_pars_vertex=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_vertex=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,map_fragment=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,map_pars_fragment=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,map_particle_fragment=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,map_particle_pars_fragment=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,metalnessmap_fragment=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,metalnessmap_pars_fragment=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,morphinstance_vertex=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,morphcolor_vertex=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,morphnormal_vertex=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,morphtarget_pars_vertex=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,morphtarget_vertex=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,normal_fragment_begin=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,normal_fragment_maps=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,normal_pars_fragment=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,normal_pars_vertex=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,normal_vertex=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,normalmap_pars_fragment=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,clearcoat_normal_fragment_begin=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,clearcoat_normal_fragment_maps=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,clearcoat_pars_fragment=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,iridescence_pars_fragment=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,opaque_fragment=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,packing=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,premultiplied_alpha_fragment=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,project_vertex=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,dithering_fragment=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,dithering_pars_fragment=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,roughnessmap_fragment=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,roughnessmap_pars_fragment=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,shadowmap_pars_fragment=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#else
			uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#endif
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#else
			uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#endif
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform samplerCubeShadow pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#elif defined( SHADOWMAP_TYPE_BASIC )
			uniform samplerCube pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#endif
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float interleavedGradientNoise( vec2 position ) {
			return fract( 52.9829189 * fract( dot( position, vec2( 0.06711056, 0.00583715 ) ) ) );
		}
		vec2 vogelDiskSample( int sampleIndex, int samplesCount, float phi ) {
			const float goldenAngle = 2.399963229728653;
			float r = sqrt( ( float( sampleIndex ) + 0.5 ) / float( samplesCount ) );
			float theta = float( sampleIndex ) * goldenAngle + phi;
			return vec2( cos( theta ), sin( theta ) ) * r;
		}
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float getShadow( sampler2DShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
				float radius = shadowRadius * texelSize.x;
				float phi = interleavedGradientNoise( gl_FragCoord.xy ) * 6.28318530718;
				shadow = (
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 0, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 1, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 2, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 3, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 4, 5, phi ) * radius, shadowCoord.z ) )
				) * 0.2;
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#elif defined( SHADOWMAP_TYPE_VSM )
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 distribution = texture2D( shadowMap, shadowCoord.xy ).rg;
				float mean = distribution.x;
				float variance = distribution.y * distribution.y;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					float hard_shadow = step( mean, shadowCoord.z );
				#else
					float hard_shadow = step( shadowCoord.z, mean );
				#endif
				if ( hard_shadow == 1.0 ) {
					shadow = 1.0;
				} else {
					variance = max( variance, 0.0000001 );
					float d = shadowCoord.z - mean;
					float p_max = variance / ( variance + d * d );
					p_max = clamp( ( p_max - 0.3 ) / 0.65, 0.0, 1.0 );
					shadow = max( hard_shadow, p_max );
				}
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#else
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				float depth = texture2D( shadowMap, shadowCoord.xy ).r;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					shadow = step( depth, shadowCoord.z );
				#else
					shadow = step( shadowCoord.z, depth );
				#endif
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#if defined( SHADOWMAP_TYPE_PCF )
	float getPointShadow( samplerCubeShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 bd3D = normalize( lightToPosition );
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
			dp += shadowBias;
			float texelSize = shadowRadius / shadowMapSize.x;
			vec3 absDir = abs( bd3D );
			vec3 tangent = absDir.x > absDir.z ? vec3( 0.0, 1.0, 0.0 ) : vec3( 1.0, 0.0, 0.0 );
			tangent = normalize( cross( bd3D, tangent ) );
			vec3 bitangent = cross( bd3D, tangent );
			float phi = interleavedGradientNoise( gl_FragCoord.xy ) * 6.28318530718;
			shadow = (
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 0, 5, phi ).x + bitangent * vogelDiskSample( 0, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 1, 5, phi ).x + bitangent * vogelDiskSample( 1, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 2, 5, phi ).x + bitangent * vogelDiskSample( 2, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 3, 5, phi ).x + bitangent * vogelDiskSample( 3, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 4, 5, phi ).x + bitangent * vogelDiskSample( 4, 5, phi ).y ) * texelSize, dp ) )
			) * 0.2;
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#elif defined( SHADOWMAP_TYPE_BASIC )
	float getPointShadow( samplerCube shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 bd3D = normalize( lightToPosition );
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
			dp += shadowBias;
			float depth = textureCube( shadowMap, bd3D ).r;
			#ifdef USE_REVERSED_DEPTH_BUFFER
				shadow = step( depth, dp );
			#else
				shadow = step( dp, depth );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#endif
	#endif
#endif`,shadowmap_pars_vertex=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,shadowmap_vertex=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,shadowmask_pars_fragment=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0 && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,skinbase_vertex=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,skinning_pars_vertex=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,skinning_vertex=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,skinnormal_vertex=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,specularmap_fragment=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,specularmap_pars_fragment=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,tonemapping_fragment=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tonemapping_pars_fragment=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,transmission_fragment=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseContribution, material.specularColorBlended, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,transmission_pars_fragment=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,uv_pars_fragment=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,uv_pars_vertex=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,uv_vertex=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,worldpos_vertex=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const vertex$h=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,fragment$h=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$g=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,fragment$g=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$f=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,fragment$f=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$e=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,fragment$e=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSED_DEPTH_BUFFER
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,vertex$d=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,fragment$d=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = vec4( dist, 0.0, 0.0, 1.0 );
}`,vertex$c=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,fragment$c=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$b=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,fragment$b=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vertex$a=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,fragment$a=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$9=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$9=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$8=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,fragment$8=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$7=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,fragment$7=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( normalize( normal ) * 0.5 + 0.5, diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,vertex$6=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$6=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$5=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,fragment$5=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
 
		outgoingLight = outgoingLight + sheenSpecularDirect + sheenSpecularIndirect;
 
 	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$4=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$4=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$3=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,fragment$3=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vertex$2=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$2=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,vertex$1=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,fragment$1=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,ShaderChunk={alphahash_fragment,alphahash_pars_fragment,alphamap_fragment,alphamap_pars_fragment,alphatest_fragment,alphatest_pars_fragment,aomap_fragment,aomap_pars_fragment,batching_pars_vertex,batching_vertex,begin_vertex,beginnormal_vertex,bsdfs,iridescence_fragment,bumpmap_pars_fragment,clipping_planes_fragment,clipping_planes_pars_fragment,clipping_planes_pars_vertex,clipping_planes_vertex,color_fragment,color_pars_fragment,color_pars_vertex,color_vertex,common,cube_uv_reflection_fragment,defaultnormal_vertex,displacementmap_pars_vertex,displacementmap_vertex,emissivemap_fragment,emissivemap_pars_fragment,colorspace_fragment,colorspace_pars_fragment,envmap_fragment,envmap_common_pars_fragment,envmap_pars_fragment,envmap_pars_vertex,envmap_physical_pars_fragment,envmap_vertex,fog_vertex,fog_pars_vertex,fog_fragment,fog_pars_fragment,gradientmap_pars_fragment,lightmap_pars_fragment,lights_lambert_fragment,lights_lambert_pars_fragment,lights_pars_begin,lights_toon_fragment,lights_toon_pars_fragment,lights_phong_fragment,lights_phong_pars_fragment,lights_physical_fragment,lights_physical_pars_fragment,lights_fragment_begin,lights_fragment_maps,lights_fragment_end,logdepthbuf_fragment,logdepthbuf_pars_fragment,logdepthbuf_pars_vertex,logdepthbuf_vertex,map_fragment,map_pars_fragment,map_particle_fragment,map_particle_pars_fragment,metalnessmap_fragment,metalnessmap_pars_fragment,morphinstance_vertex,morphcolor_vertex,morphnormal_vertex,morphtarget_pars_vertex,morphtarget_vertex,normal_fragment_begin,normal_fragment_maps,normal_pars_fragment,normal_pars_vertex,normal_vertex,normalmap_pars_fragment,clearcoat_normal_fragment_begin,clearcoat_normal_fragment_maps,clearcoat_pars_fragment,iridescence_pars_fragment,opaque_fragment,packing,premultiplied_alpha_fragment,project_vertex,dithering_fragment,dithering_pars_fragment,roughnessmap_fragment,roughnessmap_pars_fragment,shadowmap_pars_fragment,shadowmap_pars_vertex,shadowmap_vertex,shadowmask_pars_fragment,skinbase_vertex,skinning_pars_vertex,skinning_vertex,skinnormal_vertex,specularmap_fragment,specularmap_pars_fragment,tonemapping_fragment,tonemapping_pars_fragment,transmission_fragment,transmission_pars_fragment,uv_pars_fragment,uv_pars_vertex,uv_vertex,worldpos_vertex,background_vert:vertex$h,background_frag:fragment$h,backgroundCube_vert:vertex$g,backgroundCube_frag:fragment$g,cube_vert:vertex$f,cube_frag:fragment$f,depth_vert:vertex$e,depth_frag:fragment$e,distance_vert:vertex$d,distance_frag:fragment$d,equirect_vert:vertex$c,equirect_frag:fragment$c,linedashed_vert:vertex$b,linedashed_frag:fragment$b,meshbasic_vert:vertex$a,meshbasic_frag:fragment$a,meshlambert_vert:vertex$9,meshlambert_frag:fragment$9,meshmatcap_vert:vertex$8,meshmatcap_frag:fragment$8,meshnormal_vert:vertex$7,meshnormal_frag:fragment$7,meshphong_vert:vertex$6,meshphong_frag:fragment$6,meshphysical_vert:vertex$5,meshphysical_frag:fragment$5,meshtoon_vert:vertex$4,meshtoon_frag:fragment$4,points_vert:vertex$3,points_frag:fragment$3,shadow_vert:vertex$2,shadow_frag:fragment$2,sprite_vert:vertex$1,sprite_frag:fragment$1},UniformsLib={common:{diffuse:{value:new Color(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Matrix3},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Matrix3}},envmap:{envMap:{value:null},envMapRotation:{value:new Matrix3},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},dfgLUT:{value:null}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Matrix3}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Matrix3}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Matrix3},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Matrix3},normalScale:{value:new Vector2(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Matrix3},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Matrix3}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Matrix3}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Matrix3}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Color(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Color(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3},alphaTest:{value:0},uvTransform:{value:new Matrix3}},sprite:{diffuse:{value:new Color(16777215)},opacity:{value:1},center:{value:new Vector2(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Matrix3},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3},alphaTest:{value:0}}},ShaderLib={basic:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.fog]),vertexShader:ShaderChunk.meshbasic_vert,fragmentShader:ShaderChunk.meshbasic_frag},lambert:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)}}]),vertexShader:ShaderChunk.meshlambert_vert,fragmentShader:ShaderChunk.meshlambert_frag},phong:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},specular:{value:new Color(1118481)},shininess:{value:30}}]),vertexShader:ShaderChunk.meshphong_vert,fragmentShader:ShaderChunk.meshphong_frag},standard:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.roughnessmap,UniformsLib.metalnessmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag},toon:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.gradientmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color(0)}}]),vertexShader:ShaderChunk.meshtoon_vert,fragmentShader:ShaderChunk.meshtoon_frag},matcap:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,{matcap:{value:null}}]),vertexShader:ShaderChunk.meshmatcap_vert,fragmentShader:ShaderChunk.meshmatcap_frag},points:{uniforms:mergeUniforms([UniformsLib.points,UniformsLib.fog]),vertexShader:ShaderChunk.points_vert,fragmentShader:ShaderChunk.points_frag},dashed:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ShaderChunk.linedashed_vert,fragmentShader:ShaderChunk.linedashed_frag},depth:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap]),vertexShader:ShaderChunk.depth_vert,fragmentShader:ShaderChunk.depth_frag},normal:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,{opacity:{value:1}}]),vertexShader:ShaderChunk.meshnormal_vert,fragmentShader:ShaderChunk.meshnormal_frag},sprite:{uniforms:mergeUniforms([UniformsLib.sprite,UniformsLib.fog]),vertexShader:ShaderChunk.sprite_vert,fragmentShader:ShaderChunk.sprite_frag},background:{uniforms:{uvTransform:{value:new Matrix3},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ShaderChunk.background_vert,fragmentShader:ShaderChunk.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Matrix3}},vertexShader:ShaderChunk.backgroundCube_vert,fragmentShader:ShaderChunk.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ShaderChunk.cube_vert,fragmentShader:ShaderChunk.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ShaderChunk.equirect_vert,fragmentShader:ShaderChunk.equirect_frag},distance:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap,{referencePosition:{value:new Vector3},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ShaderChunk.distance_vert,fragmentShader:ShaderChunk.distance_frag},shadow:{uniforms:mergeUniforms([UniformsLib.lights,UniformsLib.fog,{color:{value:new Color(0)},opacity:{value:1}}]),vertexShader:ShaderChunk.shadow_vert,fragmentShader:ShaderChunk.shadow_frag}};ShaderLib.physical={uniforms:mergeUniforms([ShaderLib.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Matrix3},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Matrix3},clearcoatNormalScale:{value:new Vector2(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Matrix3},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Matrix3},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Matrix3},sheen:{value:0},sheenColor:{value:new Color(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Matrix3},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Matrix3},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Matrix3},transmissionSamplerSize:{value:new Vector2},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Matrix3},attenuationDistance:{value:0},attenuationColor:{value:new Color(0)},specularColor:{value:new Color(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Matrix3},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Matrix3},anisotropyVector:{value:new Vector2},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Matrix3}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag};const _rgb={r:0,b:0,g:0},_e1$1=new Euler,_m1$1=new Matrix4;function WebGLBackground(s,n,u,f,y,S,A){const w=new Color(0);let C=S===!0?0:1,T,R,I=null,N=0,L=null;function F(Y){let K=Y.isScene===!0?Y.background:null;return K&&K.isTexture&&(K=(Y.backgroundBlurriness>0?u:n).get(K)),K}function H(Y){let K=!1;const Z=F(Y);Z===null?U(w,C):Z&&Z.isColor&&(U(Z,1),K=!0);const J=s.xr.getEnvironmentBlendMode();J==="additive"?f.buffers.color.setClear(0,0,0,1,A):J==="alpha-blend"&&f.buffers.color.setClear(0,0,0,0,A),(s.autoClear||K)&&(f.buffers.depth.setTest(!0),f.buffers.depth.setMask(!0),f.buffers.color.setMask(!0),s.clear(s.autoClearColor,s.autoClearDepth,s.autoClearStencil))}function z(Y,K){const Z=F(K);Z&&(Z.isCubeTexture||Z.mapping===CubeUVReflectionMapping)?(R===void 0&&(R=new Mesh(new BoxGeometry(1,1,1),new ShaderMaterial({name:"BackgroundCubeMaterial",uniforms:cloneUniforms(ShaderLib.backgroundCube.uniforms),vertexShader:ShaderLib.backgroundCube.vertexShader,fragmentShader:ShaderLib.backgroundCube.fragmentShader,side:BackSide,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),R.geometry.deleteAttribute("normal"),R.geometry.deleteAttribute("uv"),R.onBeforeRender=function(J,te,de){this.matrixWorld.copyPosition(de.matrixWorld)},Object.defineProperty(R.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),y.update(R)),_e1$1.copy(K.backgroundRotation),_e1$1.x*=-1,_e1$1.y*=-1,_e1$1.z*=-1,Z.isCubeTexture&&Z.isRenderTargetTexture===!1&&(_e1$1.y*=-1,_e1$1.z*=-1),R.material.uniforms.envMap.value=Z,R.material.uniforms.flipEnvMap.value=Z.isCubeTexture&&Z.isRenderTargetTexture===!1?-1:1,R.material.uniforms.backgroundBlurriness.value=K.backgroundBlurriness,R.material.uniforms.backgroundIntensity.value=K.backgroundIntensity,R.material.uniforms.backgroundRotation.value.setFromMatrix4(_m1$1.makeRotationFromEuler(_e1$1)),R.material.toneMapped=ColorManagement.getTransfer(Z.colorSpace)!==SRGBTransfer,(I!==Z||N!==Z.version||L!==s.toneMapping)&&(R.material.needsUpdate=!0,I=Z,N=Z.version,L=s.toneMapping),R.layers.enableAll(),Y.unshift(R,R.geometry,R.material,0,0,null)):Z&&Z.isTexture&&(T===void 0&&(T=new Mesh(new PlaneGeometry(2,2),new ShaderMaterial({name:"BackgroundMaterial",uniforms:cloneUniforms(ShaderLib.background.uniforms),vertexShader:ShaderLib.background.vertexShader,fragmentShader:ShaderLib.background.fragmentShader,side:FrontSide,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),T.geometry.deleteAttribute("normal"),Object.defineProperty(T.material,"map",{get:function(){return this.uniforms.t2D.value}}),y.update(T)),T.material.uniforms.t2D.value=Z,T.material.uniforms.backgroundIntensity.value=K.backgroundIntensity,T.material.toneMapped=ColorManagement.getTransfer(Z.colorSpace)!==SRGBTransfer,Z.matrixAutoUpdate===!0&&Z.updateMatrix(),T.material.uniforms.uvTransform.value.copy(Z.matrix),(I!==Z||N!==Z.version||L!==s.toneMapping)&&(T.material.needsUpdate=!0,I=Z,N=Z.version,L=s.toneMapping),T.layers.enableAll(),Y.unshift(T,T.geometry,T.material,0,0,null))}function U(Y,K){Y.getRGB(_rgb,getUnlitUniformColorSpace(s)),f.buffers.color.setClear(_rgb.r,_rgb.g,_rgb.b,K,A)}function G(){R!==void 0&&(R.geometry.dispose(),R.material.dispose(),R=void 0),T!==void 0&&(T.geometry.dispose(),T.material.dispose(),T=void 0)}return{getClearColor:function(){return w},setClearColor:function(Y,K=1){w.set(Y),C=K,U(w,C)},getClearAlpha:function(){return C},setClearAlpha:function(Y){C=Y,U(w,C)},render:H,addToRenderList:z,dispose:G}}function WebGLBindingStates(s,n){const u=s.getParameter(s.MAX_VERTEX_ATTRIBS),f={},y=N(null);let S=y,A=!1;function w(ne,ge,Ee,we,Ie){let Be=!1;const Me=I(we,Ee,ge);S!==Me&&(S=Me,T(S.object)),Be=L(ne,we,Ee,Ie),Be&&F(ne,we,Ee,Ie),Ie!==null&&n.update(Ie,s.ELEMENT_ARRAY_BUFFER),(Be||A)&&(A=!1,K(ne,ge,Ee,we),Ie!==null&&s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,n.get(Ie).buffer))}function C(){return s.createVertexArray()}function T(ne){return s.bindVertexArray(ne)}function R(ne){return s.deleteVertexArray(ne)}function I(ne,ge,Ee){const we=Ee.wireframe===!0;let Ie=f[ne.id];Ie===void 0&&(Ie={},f[ne.id]=Ie);let Be=Ie[ge.id];Be===void 0&&(Be={},Ie[ge.id]=Be);let Me=Be[we];return Me===void 0&&(Me=N(C()),Be[we]=Me),Me}function N(ne){const ge=[],Ee=[],we=[];for(let Ie=0;Ie<u;Ie++)ge[Ie]=0,Ee[Ie]=0,we[Ie]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:ge,enabledAttributes:Ee,attributeDivisors:we,object:ne,attributes:{},index:null}}function L(ne,ge,Ee,we){const Ie=S.attributes,Be=ge.attributes;let Me=0;const Re=Ee.getAttributes();for(const Te in Re)if(Re[Te].location>=0){const oe=Ie[Te];let ae=Be[Te];if(ae===void 0&&(Te==="instanceMatrix"&&ne.instanceMatrix&&(ae=ne.instanceMatrix),Te==="instanceColor"&&ne.instanceColor&&(ae=ne.instanceColor)),oe===void 0||oe.attribute!==ae||ae&&oe.data!==ae.data)return!0;Me++}return S.attributesNum!==Me||S.index!==we}function F(ne,ge,Ee,we){const Ie={},Be=ge.attributes;let Me=0;const Re=Ee.getAttributes();for(const Te in Re)if(Re[Te].location>=0){let oe=Be[Te];oe===void 0&&(Te==="instanceMatrix"&&ne.instanceMatrix&&(oe=ne.instanceMatrix),Te==="instanceColor"&&ne.instanceColor&&(oe=ne.instanceColor));const ae={};ae.attribute=oe,oe&&oe.data&&(ae.data=oe.data),Ie[Te]=ae,Me++}S.attributes=Ie,S.attributesNum=Me,S.index=we}function H(){const ne=S.newAttributes;for(let ge=0,Ee=ne.length;ge<Ee;ge++)ne[ge]=0}function z(ne){U(ne,0)}function U(ne,ge){const Ee=S.newAttributes,we=S.enabledAttributes,Ie=S.attributeDivisors;Ee[ne]=1,we[ne]===0&&(s.enableVertexAttribArray(ne),we[ne]=1),Ie[ne]!==ge&&(s.vertexAttribDivisor(ne,ge),Ie[ne]=ge)}function G(){const ne=S.newAttributes,ge=S.enabledAttributes;for(let Ee=0,we=ge.length;Ee<we;Ee++)ge[Ee]!==ne[Ee]&&(s.disableVertexAttribArray(Ee),ge[Ee]=0)}function Y(ne,ge,Ee,we,Ie,Be,Me){Me===!0?s.vertexAttribIPointer(ne,ge,Ee,Ie,Be):s.vertexAttribPointer(ne,ge,Ee,we,Ie,Be)}function K(ne,ge,Ee,we){H();const Ie=we.attributes,Be=Ee.getAttributes(),Me=ge.defaultAttributeValues;for(const Re in Be){const Te=Be[Re];if(Te.location>=0){let Se=Ie[Re];if(Se===void 0&&(Re==="instanceMatrix"&&ne.instanceMatrix&&(Se=ne.instanceMatrix),Re==="instanceColor"&&ne.instanceColor&&(Se=ne.instanceColor)),Se!==void 0){const oe=Se.normalized,ae=Se.itemSize,be=n.get(Se);if(be===void 0)continue;const he=be.buffer,ue=be.type,ye=be.bytesPerElement,ce=ue===s.INT||ue===s.UNSIGNED_INT||Se.gpuType===IntType;if(Se.isInterleavedBufferAttribute){const _e=Se.data,ke=_e.stride,Pe=Se.offset;if(_e.isInstancedInterleavedBuffer){for(let $e=0;$e<Te.locationSize;$e++)U(Te.location+$e,_e.meshPerAttribute);ne.isInstancedMesh!==!0&&we._maxInstanceCount===void 0&&(we._maxInstanceCount=_e.meshPerAttribute*_e.count)}else for(let $e=0;$e<Te.locationSize;$e++)z(Te.location+$e);s.bindBuffer(s.ARRAY_BUFFER,he);for(let $e=0;$e<Te.locationSize;$e++)Y(Te.location+$e,ae/Te.locationSize,ue,oe,ke*ye,(Pe+ae/Te.locationSize*$e)*ye,ce)}else{if(Se.isInstancedBufferAttribute){for(let _e=0;_e<Te.locationSize;_e++)U(Te.location+_e,Se.meshPerAttribute);ne.isInstancedMesh!==!0&&we._maxInstanceCount===void 0&&(we._maxInstanceCount=Se.meshPerAttribute*Se.count)}else for(let _e=0;_e<Te.locationSize;_e++)z(Te.location+_e);s.bindBuffer(s.ARRAY_BUFFER,he);for(let _e=0;_e<Te.locationSize;_e++)Y(Te.location+_e,ae/Te.locationSize,ue,oe,ae*ye,ae/Te.locationSize*_e*ye,ce)}}else if(Me!==void 0){const oe=Me[Re];if(oe!==void 0)switch(oe.length){case 2:s.vertexAttrib2fv(Te.location,oe);break;case 3:s.vertexAttrib3fv(Te.location,oe);break;case 4:s.vertexAttrib4fv(Te.location,oe);break;default:s.vertexAttrib1fv(Te.location,oe)}}}}G()}function Z(){de();for(const ne in f){const ge=f[ne];for(const Ee in ge){const we=ge[Ee];for(const Ie in we)R(we[Ie].object),delete we[Ie];delete ge[Ee]}delete f[ne]}}function J(ne){if(f[ne.id]===void 0)return;const ge=f[ne.id];for(const Ee in ge){const we=ge[Ee];for(const Ie in we)R(we[Ie].object),delete we[Ie];delete ge[Ee]}delete f[ne.id]}function te(ne){for(const ge in f){const Ee=f[ge];if(Ee[ne.id]===void 0)continue;const we=Ee[ne.id];for(const Ie in we)R(we[Ie].object),delete we[Ie];delete Ee[ne.id]}}function de(){se(),A=!0,S!==y&&(S=y,T(S.object))}function se(){y.geometry=null,y.program=null,y.wireframe=!1}return{setup:w,reset:de,resetDefaultState:se,dispose:Z,releaseStatesOfGeometry:J,releaseStatesOfProgram:te,initAttributes:H,enableAttribute:z,disableUnusedAttributes:G}}function WebGLBufferRenderer(s,n,u){let f;function y(T){f=T}function S(T,R){s.drawArrays(f,T,R),u.update(R,f,1)}function A(T,R,I){I!==0&&(s.drawArraysInstanced(f,T,R,I),u.update(R,f,I))}function w(T,R,I){if(I===0)return;n.get("WEBGL_multi_draw").multiDrawArraysWEBGL(f,T,0,R,0,I);let L=0;for(let F=0;F<I;F++)L+=R[F];u.update(L,f,1)}function C(T,R,I,N){if(I===0)return;const L=n.get("WEBGL_multi_draw");if(L===null)for(let F=0;F<T.length;F++)A(T[F],R[F],N[F]);else{L.multiDrawArraysInstancedWEBGL(f,T,0,R,0,N,0,I);let F=0;for(let H=0;H<I;H++)F+=R[H]*N[H];u.update(F,f,1)}}this.setMode=y,this.render=S,this.renderInstances=A,this.renderMultiDraw=w,this.renderMultiDrawInstances=C}function WebGLCapabilities(s,n,u,f){let y;function S(){if(y!==void 0)return y;if(n.has("EXT_texture_filter_anisotropic")===!0){const te=n.get("EXT_texture_filter_anisotropic");y=s.getParameter(te.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else y=0;return y}function A(te){return!(te!==RGBAFormat&&f.convert(te)!==s.getParameter(s.IMPLEMENTATION_COLOR_READ_FORMAT))}function w(te){const de=te===HalfFloatType&&(n.has("EXT_color_buffer_half_float")||n.has("EXT_color_buffer_float"));return!(te!==UnsignedByteType&&f.convert(te)!==s.getParameter(s.IMPLEMENTATION_COLOR_READ_TYPE)&&te!==FloatType&&!de)}function C(te){if(te==="highp"){if(s.getShaderPrecisionFormat(s.VERTEX_SHADER,s.HIGH_FLOAT).precision>0&&s.getShaderPrecisionFormat(s.FRAGMENT_SHADER,s.HIGH_FLOAT).precision>0)return"highp";te="mediump"}return te==="mediump"&&s.getShaderPrecisionFormat(s.VERTEX_SHADER,s.MEDIUM_FLOAT).precision>0&&s.getShaderPrecisionFormat(s.FRAGMENT_SHADER,s.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let T=u.precision!==void 0?u.precision:"highp";const R=C(T);R!==T&&(warn("WebGLRenderer:",T,"not supported, using",R,"instead."),T=R);const I=u.logarithmicDepthBuffer===!0,N=u.reversedDepthBuffer===!0&&n.has("EXT_clip_control"),L=s.getParameter(s.MAX_TEXTURE_IMAGE_UNITS),F=s.getParameter(s.MAX_VERTEX_TEXTURE_IMAGE_UNITS),H=s.getParameter(s.MAX_TEXTURE_SIZE),z=s.getParameter(s.MAX_CUBE_MAP_TEXTURE_SIZE),U=s.getParameter(s.MAX_VERTEX_ATTRIBS),G=s.getParameter(s.MAX_VERTEX_UNIFORM_VECTORS),Y=s.getParameter(s.MAX_VARYING_VECTORS),K=s.getParameter(s.MAX_FRAGMENT_UNIFORM_VECTORS),Z=s.getParameter(s.MAX_SAMPLES),J=s.getParameter(s.SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:S,getMaxPrecision:C,textureFormatReadable:A,textureTypeReadable:w,precision:T,logarithmicDepthBuffer:I,reversedDepthBuffer:N,maxTextures:L,maxVertexTextures:F,maxTextureSize:H,maxCubemapSize:z,maxAttributes:U,maxVertexUniforms:G,maxVaryings:Y,maxFragmentUniforms:K,maxSamples:Z,samples:J}}function WebGLClipping(s){const n=this;let u=null,f=0,y=!1,S=!1;const A=new Plane$1,w=new Matrix3,C={value:null,needsUpdate:!1};this.uniform=C,this.numPlanes=0,this.numIntersection=0,this.init=function(I,N){const L=I.length!==0||N||f!==0||y;return y=N,f=I.length,L},this.beginShadows=function(){S=!0,R(null)},this.endShadows=function(){S=!1},this.setGlobalState=function(I,N){u=R(I,N,0)},this.setState=function(I,N,L){const F=I.clippingPlanes,H=I.clipIntersection,z=I.clipShadows,U=s.get(I);if(!y||F===null||F.length===0||S&&!z)S?R(null):T();else{const G=S?0:f,Y=G*4;let K=U.clippingState||null;C.value=K,K=R(F,N,Y,L);for(let Z=0;Z!==Y;++Z)K[Z]=u[Z];U.clippingState=K,this.numIntersection=H?this.numPlanes:0,this.numPlanes+=G}};function T(){C.value!==u&&(C.value=u,C.needsUpdate=f>0),n.numPlanes=f,n.numIntersection=0}function R(I,N,L,F){const H=I!==null?I.length:0;let z=null;if(H!==0){if(z=C.value,F!==!0||z===null){const U=L+H*4,G=N.matrixWorldInverse;w.getNormalMatrix(G),(z===null||z.length<U)&&(z=new Float32Array(U));for(let Y=0,K=L;Y!==H;++Y,K+=4)A.copy(I[Y]).applyMatrix4(G,w),A.normal.toArray(z,K),z[K+3]=A.constant}C.value=z,C.needsUpdate=!0}return n.numPlanes=H,n.numIntersection=0,z}}function WebGLCubeMaps(s){let n=new WeakMap;function u(A,w){return w===EquirectangularReflectionMapping?A.mapping=CubeReflectionMapping:w===EquirectangularRefractionMapping&&(A.mapping=CubeRefractionMapping),A}function f(A){if(A&&A.isTexture){const w=A.mapping;if(w===EquirectangularReflectionMapping||w===EquirectangularRefractionMapping)if(n.has(A)){const C=n.get(A).texture;return u(C,A.mapping)}else{const C=A.image;if(C&&C.height>0){const T=new WebGLCubeRenderTarget(C.height);return T.fromEquirectangularTexture(s,A),n.set(A,T),A.addEventListener("dispose",y),u(T.texture,A.mapping)}else return null}}return A}function y(A){const w=A.target;w.removeEventListener("dispose",y);const C=n.get(w);C!==void 0&&(n.delete(w),C.dispose())}function S(){n=new WeakMap}return{get:f,dispose:S}}const LOD_MIN=4,EXTRA_LOD_SIGMA=[.125,.215,.35,.446,.526,.582],MAX_SAMPLES=20,GGX_SAMPLES=256,_flatCamera=new OrthographicCamera,_clearColor=new Color;let _oldTarget=null,_oldActiveCubeFace=0,_oldActiveMipmapLevel=0,_oldXrEnabled=!1;const _origin=new Vector3;class PMREMGenerator{constructor(n){this._renderer=n,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._backgroundBox=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._blurMaterial=null,this._ggxMaterial=null}fromScene(n,u=0,f=.1,y=100,S={}){const{size:A=256,position:w=_origin}=S;_oldTarget=this._renderer.getRenderTarget(),_oldActiveCubeFace=this._renderer.getActiveCubeFace(),_oldActiveMipmapLevel=this._renderer.getActiveMipmapLevel(),_oldXrEnabled=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(A);const C=this._allocateTargets();return C.depthBuffer=!0,this._sceneToCubeUV(n,f,y,C,w),u>0&&this._blur(C,0,0,u),this._applyPMREM(C),this._cleanup(C),C}fromEquirectangular(n,u=null){return this._fromTexture(n,u)}fromCubemap(n,u=null){return this._fromTexture(n,u)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=_getCubemapMaterial(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=_getEquirectMaterial(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose(),this._backgroundBox!==null&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSize(n){this._lodMax=Math.floor(Math.log2(n)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._ggxMaterial!==null&&this._ggxMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let n=0;n<this._lodMeshes.length;n++)this._lodMeshes[n].geometry.dispose()}_cleanup(n){this._renderer.setRenderTarget(_oldTarget,_oldActiveCubeFace,_oldActiveMipmapLevel),this._renderer.xr.enabled=_oldXrEnabled,n.scissorTest=!1,_setViewport(n,0,0,n.width,n.height)}_fromTexture(n,u){n.mapping===CubeReflectionMapping||n.mapping===CubeRefractionMapping?this._setSize(n.image.length===0?16:n.image[0].width||n.image[0].image.width):this._setSize(n.image.width/4),_oldTarget=this._renderer.getRenderTarget(),_oldActiveCubeFace=this._renderer.getActiveCubeFace(),_oldActiveMipmapLevel=this._renderer.getActiveMipmapLevel(),_oldXrEnabled=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const f=u||this._allocateTargets();return this._textureToCubeUV(n,f),this._applyPMREM(f),this._cleanup(f),f}_allocateTargets(){const n=3*Math.max(this._cubeSize,112),u=4*this._cubeSize,f={magFilter:LinearFilter,minFilter:LinearFilter,generateMipmaps:!1,type:HalfFloatType,format:RGBAFormat,colorSpace:LinearSRGBColorSpace$1,depthBuffer:!1},y=_createRenderTarget(n,u,f);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==n||this._pingPongRenderTarget.height!==u){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=_createRenderTarget(n,u,f);const{_lodMax:S}=this;({lodMeshes:this._lodMeshes,sizeLods:this._sizeLods,sigmas:this._sigmas}=_createPlanes(S)),this._blurMaterial=_getBlurShader(S,n,u),this._ggxMaterial=_getGGXShader(S,n,u)}return y}_compileMaterial(n){const u=new Mesh(new BufferGeometry,n);this._renderer.compile(u,_flatCamera)}_sceneToCubeUV(n,u,f,y,S){const C=new PerspectiveCamera(90,1,u,f),T=[1,-1,1,1,1,1],R=[1,1,1,-1,-1,-1],I=this._renderer,N=I.autoClear,L=I.toneMapping;I.getClearColor(_clearColor),I.toneMapping=NoToneMapping,I.autoClear=!1,I.state.buffers.depth.getReversed()&&(I.setRenderTarget(y),I.clearDepth(),I.setRenderTarget(null)),this._backgroundBox===null&&(this._backgroundBox=new Mesh(new BoxGeometry,new MeshBasicMaterial({name:"PMREM.Background",side:BackSide,depthWrite:!1,depthTest:!1})));const H=this._backgroundBox,z=H.material;let U=!1;const G=n.background;G?G.isColor&&(z.color.copy(G),n.background=null,U=!0):(z.color.copy(_clearColor),U=!0);for(let Y=0;Y<6;Y++){const K=Y%3;K===0?(C.up.set(0,T[Y],0),C.position.set(S.x,S.y,S.z),C.lookAt(S.x+R[Y],S.y,S.z)):K===1?(C.up.set(0,0,T[Y]),C.position.set(S.x,S.y,S.z),C.lookAt(S.x,S.y+R[Y],S.z)):(C.up.set(0,T[Y],0),C.position.set(S.x,S.y,S.z),C.lookAt(S.x,S.y,S.z+R[Y]));const Z=this._cubeSize;_setViewport(y,K*Z,Y>2?Z:0,Z,Z),I.setRenderTarget(y),U&&I.render(H,C),I.render(n,C)}I.toneMapping=L,I.autoClear=N,n.background=G}_textureToCubeUV(n,u){const f=this._renderer,y=n.mapping===CubeReflectionMapping||n.mapping===CubeRefractionMapping;y?(this._cubemapMaterial===null&&(this._cubemapMaterial=_getCubemapMaterial()),this._cubemapMaterial.uniforms.flipEnvMap.value=n.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=_getEquirectMaterial());const S=y?this._cubemapMaterial:this._equirectMaterial,A=this._lodMeshes[0];A.material=S;const w=S.uniforms;w.envMap.value=n;const C=this._cubeSize;_setViewport(u,0,0,3*C,2*C),f.setRenderTarget(u),f.render(A,_flatCamera)}_applyPMREM(n){const u=this._renderer,f=u.autoClear;u.autoClear=!1;const y=this._lodMeshes.length;for(let S=1;S<y;S++)this._applyGGXFilter(n,S-1,S);u.autoClear=f}_applyGGXFilter(n,u,f){const y=this._renderer,S=this._pingPongRenderTarget,A=this._ggxMaterial,w=this._lodMeshes[f];w.material=A;const C=A.uniforms,T=f/(this._lodMeshes.length-1),R=u/(this._lodMeshes.length-1),I=Math.sqrt(T*T-R*R),N=0+T*1.25,L=I*N,{_lodMax:F}=this,H=this._sizeLods[f],z=3*H*(f>F-LOD_MIN?f-F+LOD_MIN:0),U=4*(this._cubeSize-H);C.envMap.value=n.texture,C.roughness.value=L,C.mipInt.value=F-u,_setViewport(S,z,U,3*H,2*H),y.setRenderTarget(S),y.render(w,_flatCamera),C.envMap.value=S.texture,C.roughness.value=0,C.mipInt.value=F-f,_setViewport(n,z,U,3*H,2*H),y.setRenderTarget(n),y.render(w,_flatCamera)}_blur(n,u,f,y,S){const A=this._pingPongRenderTarget;this._halfBlur(n,A,u,f,y,"latitudinal",S),this._halfBlur(A,n,f,f,y,"longitudinal",S)}_halfBlur(n,u,f,y,S,A,w){const C=this._renderer,T=this._blurMaterial;A!=="latitudinal"&&A!=="longitudinal"&&error("blur direction must be either latitudinal or longitudinal!");const R=3,I=this._lodMeshes[y];I.material=T;const N=T.uniforms,L=this._sizeLods[f]-1,F=isFinite(S)?Math.PI/(2*L):2*Math.PI/(2*MAX_SAMPLES-1),H=S/F,z=isFinite(S)?1+Math.floor(R*H):MAX_SAMPLES;z>MAX_SAMPLES&&warn(`sigmaRadians, ${S}, is too large and will clip, as it requested ${z} samples when the maximum is set to ${MAX_SAMPLES}`);const U=[];let G=0;for(let te=0;te<MAX_SAMPLES;++te){const de=te/H,se=Math.exp(-de*de/2);U.push(se),te===0?G+=se:te<z&&(G+=2*se)}for(let te=0;te<U.length;te++)U[te]=U[te]/G;N.envMap.value=n.texture,N.samples.value=z,N.weights.value=U,N.latitudinal.value=A==="latitudinal",w&&(N.poleAxis.value=w);const{_lodMax:Y}=this;N.dTheta.value=F,N.mipInt.value=Y-f;const K=this._sizeLods[y],Z=3*K*(y>Y-LOD_MIN?y-Y+LOD_MIN:0),J=4*(this._cubeSize-K);_setViewport(u,Z,J,3*K,2*K),C.setRenderTarget(u),C.render(I,_flatCamera)}}function _createPlanes(s){const n=[],u=[],f=[];let y=s;const S=s-LOD_MIN+1+EXTRA_LOD_SIGMA.length;for(let A=0;A<S;A++){const w=Math.pow(2,y);n.push(w);let C=1/w;A>s-LOD_MIN?C=EXTRA_LOD_SIGMA[A-s+LOD_MIN-1]:A===0&&(C=0),u.push(C);const T=1/(w-2),R=-T,I=1+T,N=[R,R,I,R,I,I,R,R,I,I,R,I],L=6,F=6,H=3,z=2,U=1,G=new Float32Array(H*F*L),Y=new Float32Array(z*F*L),K=new Float32Array(U*F*L);for(let J=0;J<L;J++){const te=J%3*2/3-1,de=J>2?0:-1,se=[te,de,0,te+2/3,de,0,te+2/3,de+1,0,te,de,0,te+2/3,de+1,0,te,de+1,0];G.set(se,H*F*J),Y.set(N,z*F*J);const ne=[J,J,J,J,J,J];K.set(ne,U*F*J)}const Z=new BufferGeometry;Z.setAttribute("position",new BufferAttribute(G,H)),Z.setAttribute("uv",new BufferAttribute(Y,z)),Z.setAttribute("faceIndex",new BufferAttribute(K,U)),f.push(new Mesh(Z,null)),y>LOD_MIN&&y--}return{lodMeshes:f,sizeLods:n,sigmas:u}}function _createRenderTarget(s,n,u){const f=new WebGLRenderTarget(s,n,u);return f.texture.mapping=CubeUVReflectionMapping,f.texture.name="PMREM.cubeUv",f.scissorTest=!0,f}function _setViewport(s,n,u,f,y){s.viewport.set(n,u,f,y),s.scissor.set(n,u,f,y)}function _getGGXShader(s,n,u){return new ShaderMaterial({name:"PMREMGGXConvolution",defines:{GGX_SAMPLES,CUBEUV_TEXEL_WIDTH:1/n,CUBEUV_TEXEL_HEIGHT:1/u,CUBEUV_MAX_MIP:`${s}.0`},uniforms:{envMap:{value:null},roughness:{value:0},mipInt:{value:0}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision highp float;
			precision highp int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform float roughness;
			uniform float mipInt;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			#define PI 3.14159265359

			// Van der Corput radical inverse
			float radicalInverse_VdC(uint bits) {
				bits = (bits << 16u) | (bits >> 16u);
				bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);
				bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);
				bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);
				bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);
				return float(bits) * 2.3283064365386963e-10; // / 0x100000000
			}

			// Hammersley sequence
			vec2 hammersley(uint i, uint N) {
				return vec2(float(i) / float(N), radicalInverse_VdC(i));
			}

			// GGX VNDF importance sampling (Eric Heitz 2018)
			// "Sampling the GGX Distribution of Visible Normals"
			// https://jcgt.org/published/0007/04/01/
			vec3 importanceSampleGGX_VNDF(vec2 Xi, vec3 V, float roughness) {
				float alpha = roughness * roughness;

				// Section 3.2: Transform view direction to hemisphere configuration
				vec3 Vh = normalize(vec3(alpha * V.x, alpha * V.y, V.z));

				// Section 4.1: Orthonormal basis
				float lensq = Vh.x * Vh.x + Vh.y * Vh.y;
				vec3 T1 = lensq > 0.0 ? vec3(-Vh.y, Vh.x, 0.0) / sqrt(lensq) : vec3(1.0, 0.0, 0.0);
				vec3 T2 = cross(Vh, T1);

				// Section 4.2: Parameterization of projected area
				float r = sqrt(Xi.x);
				float phi = 2.0 * PI * Xi.y;
				float t1 = r * cos(phi);
				float t2 = r * sin(phi);
				float s = 0.5 * (1.0 + Vh.z);
				t2 = (1.0 - s) * sqrt(1.0 - t1 * t1) + s * t2;

				// Section 4.3: Reprojection onto hemisphere
				vec3 Nh = t1 * T1 + t2 * T2 + sqrt(max(0.0, 1.0 - t1 * t1 - t2 * t2)) * Vh;

				// Section 3.4: Transform back to ellipsoid configuration
				return normalize(vec3(alpha * Nh.x, alpha * Nh.y, max(0.0, Nh.z)));
			}

			void main() {
				vec3 N = normalize(vOutputDirection);
				vec3 V = N; // Assume view direction equals normal for pre-filtering

				vec3 prefilteredColor = vec3(0.0);
				float totalWeight = 0.0;

				// For very low roughness, just sample the environment directly
				if (roughness < 0.001) {
					gl_FragColor = vec4(bilinearCubeUV(envMap, N, mipInt), 1.0);
					return;
				}

				// Tangent space basis for VNDF sampling
				vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);
				vec3 tangent = normalize(cross(up, N));
				vec3 bitangent = cross(N, tangent);

				for(uint i = 0u; i < uint(GGX_SAMPLES); i++) {
					vec2 Xi = hammersley(i, uint(GGX_SAMPLES));

					// For PMREM, V = N, so in tangent space V is always (0, 0, 1)
					vec3 H_tangent = importanceSampleGGX_VNDF(Xi, vec3(0.0, 0.0, 1.0), roughness);

					// Transform H back to world space
					vec3 H = normalize(tangent * H_tangent.x + bitangent * H_tangent.y + N * H_tangent.z);
					vec3 L = normalize(2.0 * dot(V, H) * H - V);

					float NdotL = max(dot(N, L), 0.0);

					if(NdotL > 0.0) {
						// Sample environment at fixed mip level
						// VNDF importance sampling handles the distribution filtering
						vec3 sampleColor = bilinearCubeUV(envMap, L, mipInt);

						// Weight by NdotL for the split-sum approximation
						// VNDF PDF naturally accounts for the visible microfacet distribution
						prefilteredColor += sampleColor * NdotL;
						totalWeight += NdotL;
					}
				}

				if (totalWeight > 0.0) {
					prefilteredColor = prefilteredColor / totalWeight;
				}

				gl_FragColor = vec4(prefilteredColor, 1.0);
			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getBlurShader(s,n,u){const f=new Float32Array(MAX_SAMPLES),y=new Vector3(0,1,0);return new ShaderMaterial({name:"SphericalGaussianBlur",defines:{n:MAX_SAMPLES,CUBEUV_TEXEL_WIDTH:1/n,CUBEUV_TEXEL_HEIGHT:1/u,CUBEUV_MAX_MIP:`${s}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:f},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:y}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getEquirectMaterial(){return new ShaderMaterial({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getCubemapMaterial(){return new ShaderMaterial({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getCommonVertexShader(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function WebGLCubeUVMaps(s){let n=new WeakMap,u=null;function f(w){if(w&&w.isTexture){const C=w.mapping,T=C===EquirectangularReflectionMapping||C===EquirectangularRefractionMapping,R=C===CubeReflectionMapping||C===CubeRefractionMapping;if(T||R){let I=n.get(w);const N=I!==void 0?I.texture.pmremVersion:0;if(w.isRenderTargetTexture&&w.pmremVersion!==N)return u===null&&(u=new PMREMGenerator(s)),I=T?u.fromEquirectangular(w,I):u.fromCubemap(w,I),I.texture.pmremVersion=w.pmremVersion,n.set(w,I),I.texture;if(I!==void 0)return I.texture;{const L=w.image;return T&&L&&L.height>0||R&&L&&y(L)?(u===null&&(u=new PMREMGenerator(s)),I=T?u.fromEquirectangular(w):u.fromCubemap(w),I.texture.pmremVersion=w.pmremVersion,n.set(w,I),w.addEventListener("dispose",S),I.texture):null}}}return w}function y(w){let C=0;const T=6;for(let R=0;R<T;R++)w[R]!==void 0&&C++;return C===T}function S(w){const C=w.target;C.removeEventListener("dispose",S);const T=n.get(C);T!==void 0&&(n.delete(C),T.dispose())}function A(){n=new WeakMap,u!==null&&(u.dispose(),u=null)}return{get:f,dispose:A}}function WebGLExtensions(s){const n={};function u(f){if(n[f]!==void 0)return n[f];const y=s.getExtension(f);return n[f]=y,y}return{has:function(f){return u(f)!==null},init:function(){u("EXT_color_buffer_float"),u("WEBGL_clip_cull_distance"),u("OES_texture_float_linear"),u("EXT_color_buffer_half_float"),u("WEBGL_multisampled_render_to_texture"),u("WEBGL_render_shared_exponent")},get:function(f){const y=u(f);return y===null&&warnOnce("WebGLRenderer: "+f+" extension not supported."),y}}}function WebGLGeometries(s,n,u,f){const y={},S=new WeakMap;function A(I){const N=I.target;N.index!==null&&n.remove(N.index);for(const F in N.attributes)n.remove(N.attributes[F]);N.removeEventListener("dispose",A),delete y[N.id];const L=S.get(N);L&&(n.remove(L),S.delete(N)),f.releaseStatesOfGeometry(N),N.isInstancedBufferGeometry===!0&&delete N._maxInstanceCount,u.memory.geometries--}function w(I,N){return y[N.id]===!0||(N.addEventListener("dispose",A),y[N.id]=!0,u.memory.geometries++),N}function C(I){const N=I.attributes;for(const L in N)n.update(N[L],s.ARRAY_BUFFER)}function T(I){const N=[],L=I.index,F=I.attributes.position;let H=0;if(L!==null){const G=L.array;H=L.version;for(let Y=0,K=G.length;Y<K;Y+=3){const Z=G[Y+0],J=G[Y+1],te=G[Y+2];N.push(Z,J,J,te,te,Z)}}else if(F!==void 0){const G=F.array;H=F.version;for(let Y=0,K=G.length/3-1;Y<K;Y+=3){const Z=Y+0,J=Y+1,te=Y+2;N.push(Z,J,J,te,te,Z)}}else return;const z=new(arrayNeedsUint32(N)?Uint32BufferAttribute:Uint16BufferAttribute)(N,1);z.version=H;const U=S.get(I);U&&n.remove(U),S.set(I,z)}function R(I){const N=S.get(I);if(N){const L=I.index;L!==null&&N.version<L.version&&T(I)}else T(I);return S.get(I)}return{get:w,update:C,getWireframeAttribute:R}}function WebGLIndexedBufferRenderer(s,n,u){let f;function y(N){f=N}let S,A;function w(N){S=N.type,A=N.bytesPerElement}function C(N,L){s.drawElements(f,L,S,N*A),u.update(L,f,1)}function T(N,L,F){F!==0&&(s.drawElementsInstanced(f,L,S,N*A,F),u.update(L,f,F))}function R(N,L,F){if(F===0)return;n.get("WEBGL_multi_draw").multiDrawElementsWEBGL(f,L,0,S,N,0,F);let z=0;for(let U=0;U<F;U++)z+=L[U];u.update(z,f,1)}function I(N,L,F,H){if(F===0)return;const z=n.get("WEBGL_multi_draw");if(z===null)for(let U=0;U<N.length;U++)T(N[U]/A,L[U],H[U]);else{z.multiDrawElementsInstancedWEBGL(f,L,0,S,N,0,H,0,F);let U=0;for(let G=0;G<F;G++)U+=L[G]*H[G];u.update(U,f,1)}}this.setMode=y,this.setIndex=w,this.render=C,this.renderInstances=T,this.renderMultiDraw=R,this.renderMultiDrawInstances=I}function WebGLInfo(s){const n={geometries:0,textures:0},u={frame:0,calls:0,triangles:0,points:0,lines:0};function f(S,A,w){switch(u.calls++,A){case s.TRIANGLES:u.triangles+=w*(S/3);break;case s.LINES:u.lines+=w*(S/2);break;case s.LINE_STRIP:u.lines+=w*(S-1);break;case s.LINE_LOOP:u.lines+=w*S;break;case s.POINTS:u.points+=w*S;break;default:error("WebGLInfo: Unknown draw mode:",A);break}}function y(){u.calls=0,u.triangles=0,u.points=0,u.lines=0}return{memory:n,render:u,programs:null,autoReset:!0,reset:y,update:f}}function WebGLMorphtargets(s,n,u){const f=new WeakMap,y=new Vector4;function S(A,w,C){const T=A.morphTargetInfluences,R=w.morphAttributes.position||w.morphAttributes.normal||w.morphAttributes.color,I=R!==void 0?R.length:0;let N=f.get(w);if(N===void 0||N.count!==I){let ne=function(){de.dispose(),f.delete(w),w.removeEventListener("dispose",ne)};var L=ne;N!==void 0&&N.texture.dispose();const F=w.morphAttributes.position!==void 0,H=w.morphAttributes.normal!==void 0,z=w.morphAttributes.color!==void 0,U=w.morphAttributes.position||[],G=w.morphAttributes.normal||[],Y=w.morphAttributes.color||[];let K=0;F===!0&&(K=1),H===!0&&(K=2),z===!0&&(K=3);let Z=w.attributes.position.count*K,J=1;Z>n.maxTextureSize&&(J=Math.ceil(Z/n.maxTextureSize),Z=n.maxTextureSize);const te=new Float32Array(Z*J*4*I),de=new DataArrayTexture(te,Z,J,I);de.type=FloatType,de.needsUpdate=!0;const se=K*4;for(let ge=0;ge<I;ge++){const Ee=U[ge],we=G[ge],Ie=Y[ge],Be=Z*J*4*ge;for(let Me=0;Me<Ee.count;Me++){const Re=Me*se;F===!0&&(y.fromBufferAttribute(Ee,Me),te[Be+Re+0]=y.x,te[Be+Re+1]=y.y,te[Be+Re+2]=y.z,te[Be+Re+3]=0),H===!0&&(y.fromBufferAttribute(we,Me),te[Be+Re+4]=y.x,te[Be+Re+5]=y.y,te[Be+Re+6]=y.z,te[Be+Re+7]=0),z===!0&&(y.fromBufferAttribute(Ie,Me),te[Be+Re+8]=y.x,te[Be+Re+9]=y.y,te[Be+Re+10]=y.z,te[Be+Re+11]=Ie.itemSize===4?y.w:1)}}N={count:I,texture:de,size:new Vector2(Z,J)},f.set(w,N),w.addEventListener("dispose",ne)}if(A.isInstancedMesh===!0&&A.morphTexture!==null)C.getUniforms().setValue(s,"morphTexture",A.morphTexture,u);else{let F=0;for(let z=0;z<T.length;z++)F+=T[z];const H=w.morphTargetsRelative?1:1-F;C.getUniforms().setValue(s,"morphTargetBaseInfluence",H),C.getUniforms().setValue(s,"morphTargetInfluences",T)}C.getUniforms().setValue(s,"morphTargetsTexture",N.texture,u),C.getUniforms().setValue(s,"morphTargetsTextureSize",N.size)}return{update:S}}function WebGLObjects(s,n,u,f){let y=new WeakMap;function S(C){const T=f.render.frame,R=C.geometry,I=n.get(C,R);if(y.get(I)!==T&&(n.update(I),y.set(I,T)),C.isInstancedMesh&&(C.hasEventListener("dispose",w)===!1&&C.addEventListener("dispose",w),y.get(C)!==T&&(u.update(C.instanceMatrix,s.ARRAY_BUFFER),C.instanceColor!==null&&u.update(C.instanceColor,s.ARRAY_BUFFER),y.set(C,T))),C.isSkinnedMesh){const N=C.skeleton;y.get(N)!==T&&(N.update(),y.set(N,T))}return I}function A(){y=new WeakMap}function w(C){const T=C.target;T.removeEventListener("dispose",w),u.remove(T.instanceMatrix),T.instanceColor!==null&&u.remove(T.instanceColor)}return{update:S,dispose:A}}const toneMappingMap={[LinearToneMapping]:"LINEAR_TONE_MAPPING",[ReinhardToneMapping]:"REINHARD_TONE_MAPPING",[CineonToneMapping]:"CINEON_TONE_MAPPING",[ACESFilmicToneMapping]:"ACES_FILMIC_TONE_MAPPING",[AgXToneMapping]:"AGX_TONE_MAPPING",[NeutralToneMapping]:"NEUTRAL_TONE_MAPPING",[CustomToneMapping]:"CUSTOM_TONE_MAPPING"};function WebGLOutput(s,n,u,f,y){const S=new WebGLRenderTarget(n,u,{type:s,depthBuffer:f,stencilBuffer:y}),A=new WebGLRenderTarget(n,u,{type:HalfFloatType,depthBuffer:!1,stencilBuffer:!1}),w=new BufferGeometry;w.setAttribute("position",new Float32BufferAttribute([-1,3,0,-1,-1,0,3,-1,0],3)),w.setAttribute("uv",new Float32BufferAttribute([0,2,0,0,2,0],2));const C=new RawShaderMaterial({uniforms:{tDiffuse:{value:null}},vertexShader:`
			precision highp float;

			uniform mat4 modelViewMatrix;
			uniform mat4 projectionMatrix;

			attribute vec3 position;
			attribute vec2 uv;

			varying vec2 vUv;

			void main() {
				vUv = uv;
				gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
			}`,fragmentShader:`
			precision highp float;

			uniform sampler2D tDiffuse;

			varying vec2 vUv;

			#include <tonemapping_pars_fragment>
			#include <colorspace_pars_fragment>

			void main() {
				gl_FragColor = texture2D( tDiffuse, vUv );

				#ifdef LINEAR_TONE_MAPPING
					gl_FragColor.rgb = LinearToneMapping( gl_FragColor.rgb );
				#elif defined( REINHARD_TONE_MAPPING )
					gl_FragColor.rgb = ReinhardToneMapping( gl_FragColor.rgb );
				#elif defined( CINEON_TONE_MAPPING )
					gl_FragColor.rgb = CineonToneMapping( gl_FragColor.rgb );
				#elif defined( ACES_FILMIC_TONE_MAPPING )
					gl_FragColor.rgb = ACESFilmicToneMapping( gl_FragColor.rgb );
				#elif defined( AGX_TONE_MAPPING )
					gl_FragColor.rgb = AgXToneMapping( gl_FragColor.rgb );
				#elif defined( NEUTRAL_TONE_MAPPING )
					gl_FragColor.rgb = NeutralToneMapping( gl_FragColor.rgb );
				#elif defined( CUSTOM_TONE_MAPPING )
					gl_FragColor.rgb = CustomToneMapping( gl_FragColor.rgb );
				#endif

				#ifdef SRGB_TRANSFER
					gl_FragColor = sRGBTransferOETF( gl_FragColor );
				#endif
			}`,depthTest:!1,depthWrite:!1}),T=new Mesh(w,C),R=new OrthographicCamera(-1,1,1,-1,0,1);let I=null,N=null,L=!1,F,H=null,z=[],U=!1;this.setSize=function(G,Y){S.setSize(G,Y),A.setSize(G,Y);for(let K=0;K<z.length;K++){const Z=z[K];Z.setSize&&Z.setSize(G,Y)}},this.setEffects=function(G){z=G,U=z.length>0&&z[0].isRenderPass===!0;const Y=S.width,K=S.height;for(let Z=0;Z<z.length;Z++){const J=z[Z];J.setSize&&J.setSize(Y,K)}},this.begin=function(G,Y){if(L||G.toneMapping===NoToneMapping&&z.length===0)return!1;if(H=Y,Y!==null){const K=Y.width,Z=Y.height;(S.width!==K||S.height!==Z)&&this.setSize(K,Z)}return U===!1&&G.setRenderTarget(S),F=G.toneMapping,G.toneMapping=NoToneMapping,!0},this.hasRenderPass=function(){return U},this.end=function(G,Y){G.toneMapping=F,L=!0;let K=S,Z=A;for(let J=0;J<z.length;J++){const te=z[J];if(te.enabled!==!1&&(te.render(G,Z,K,Y),te.needsSwap!==!1)){const de=K;K=Z,Z=de}}if(I!==G.outputColorSpace||N!==G.toneMapping){I=G.outputColorSpace,N=G.toneMapping,C.defines={},ColorManagement.getTransfer(I)===SRGBTransfer&&(C.defines.SRGB_TRANSFER="");const J=toneMappingMap[N];J&&(C.defines[J]=""),C.needsUpdate=!0}C.uniforms.tDiffuse.value=K.texture,G.setRenderTarget(H),G.render(T,R),H=null,L=!1},this.isCompositing=function(){return L},this.dispose=function(){S.dispose(),A.dispose(),w.dispose(),C.dispose()}}const emptyTexture=new Texture,emptyShadowTexture=new DepthTexture(1,1),emptyArrayTexture=new DataArrayTexture,empty3dTexture=new Data3DTexture,emptyCubeTexture=new CubeTexture,arrayCacheF32=[],arrayCacheI32=[],mat4array=new Float32Array(16),mat3array=new Float32Array(9),mat2array=new Float32Array(4);function flatten(s,n,u){const f=s[0];if(f<=0||f>0)return s;const y=n*u;let S=arrayCacheF32[y];if(S===void 0&&(S=new Float32Array(y),arrayCacheF32[y]=S),n!==0){f.toArray(S,0);for(let A=1,w=0;A!==n;++A)w+=u,s[A].toArray(S,w)}return S}function arraysEqual(s,n){if(s.length!==n.length)return!1;for(let u=0,f=s.length;u<f;u++)if(s[u]!==n[u])return!1;return!0}function copyArray(s,n){for(let u=0,f=n.length;u<f;u++)s[u]=n[u]}function allocTexUnits(s,n){let u=arrayCacheI32[n];u===void 0&&(u=new Int32Array(n),arrayCacheI32[n]=u);for(let f=0;f!==n;++f)u[f]=s.allocateTextureUnit();return u}function setValueV1f(s,n){const u=this.cache;u[0]!==n&&(s.uniform1f(this.addr,n),u[0]=n)}function setValueV2f(s,n){const u=this.cache;if(n.x!==void 0)(u[0]!==n.x||u[1]!==n.y)&&(s.uniform2f(this.addr,n.x,n.y),u[0]=n.x,u[1]=n.y);else{if(arraysEqual(u,n))return;s.uniform2fv(this.addr,n),copyArray(u,n)}}function setValueV3f(s,n){const u=this.cache;if(n.x!==void 0)(u[0]!==n.x||u[1]!==n.y||u[2]!==n.z)&&(s.uniform3f(this.addr,n.x,n.y,n.z),u[0]=n.x,u[1]=n.y,u[2]=n.z);else if(n.r!==void 0)(u[0]!==n.r||u[1]!==n.g||u[2]!==n.b)&&(s.uniform3f(this.addr,n.r,n.g,n.b),u[0]=n.r,u[1]=n.g,u[2]=n.b);else{if(arraysEqual(u,n))return;s.uniform3fv(this.addr,n),copyArray(u,n)}}function setValueV4f(s,n){const u=this.cache;if(n.x!==void 0)(u[0]!==n.x||u[1]!==n.y||u[2]!==n.z||u[3]!==n.w)&&(s.uniform4f(this.addr,n.x,n.y,n.z,n.w),u[0]=n.x,u[1]=n.y,u[2]=n.z,u[3]=n.w);else{if(arraysEqual(u,n))return;s.uniform4fv(this.addr,n),copyArray(u,n)}}function setValueM2(s,n){const u=this.cache,f=n.elements;if(f===void 0){if(arraysEqual(u,n))return;s.uniformMatrix2fv(this.addr,!1,n),copyArray(u,n)}else{if(arraysEqual(u,f))return;mat2array.set(f),s.uniformMatrix2fv(this.addr,!1,mat2array),copyArray(u,f)}}function setValueM3(s,n){const u=this.cache,f=n.elements;if(f===void 0){if(arraysEqual(u,n))return;s.uniformMatrix3fv(this.addr,!1,n),copyArray(u,n)}else{if(arraysEqual(u,f))return;mat3array.set(f),s.uniformMatrix3fv(this.addr,!1,mat3array),copyArray(u,f)}}function setValueM4(s,n){const u=this.cache,f=n.elements;if(f===void 0){if(arraysEqual(u,n))return;s.uniformMatrix4fv(this.addr,!1,n),copyArray(u,n)}else{if(arraysEqual(u,f))return;mat4array.set(f),s.uniformMatrix4fv(this.addr,!1,mat4array),copyArray(u,f)}}function setValueV1i(s,n){const u=this.cache;u[0]!==n&&(s.uniform1i(this.addr,n),u[0]=n)}function setValueV2i(s,n){const u=this.cache;if(n.x!==void 0)(u[0]!==n.x||u[1]!==n.y)&&(s.uniform2i(this.addr,n.x,n.y),u[0]=n.x,u[1]=n.y);else{if(arraysEqual(u,n))return;s.uniform2iv(this.addr,n),copyArray(u,n)}}function setValueV3i(s,n){const u=this.cache;if(n.x!==void 0)(u[0]!==n.x||u[1]!==n.y||u[2]!==n.z)&&(s.uniform3i(this.addr,n.x,n.y,n.z),u[0]=n.x,u[1]=n.y,u[2]=n.z);else{if(arraysEqual(u,n))return;s.uniform3iv(this.addr,n),copyArray(u,n)}}function setValueV4i(s,n){const u=this.cache;if(n.x!==void 0)(u[0]!==n.x||u[1]!==n.y||u[2]!==n.z||u[3]!==n.w)&&(s.uniform4i(this.addr,n.x,n.y,n.z,n.w),u[0]=n.x,u[1]=n.y,u[2]=n.z,u[3]=n.w);else{if(arraysEqual(u,n))return;s.uniform4iv(this.addr,n),copyArray(u,n)}}function setValueV1ui(s,n){const u=this.cache;u[0]!==n&&(s.uniform1ui(this.addr,n),u[0]=n)}function setValueV2ui(s,n){const u=this.cache;if(n.x!==void 0)(u[0]!==n.x||u[1]!==n.y)&&(s.uniform2ui(this.addr,n.x,n.y),u[0]=n.x,u[1]=n.y);else{if(arraysEqual(u,n))return;s.uniform2uiv(this.addr,n),copyArray(u,n)}}function setValueV3ui(s,n){const u=this.cache;if(n.x!==void 0)(u[0]!==n.x||u[1]!==n.y||u[2]!==n.z)&&(s.uniform3ui(this.addr,n.x,n.y,n.z),u[0]=n.x,u[1]=n.y,u[2]=n.z);else{if(arraysEqual(u,n))return;s.uniform3uiv(this.addr,n),copyArray(u,n)}}function setValueV4ui(s,n){const u=this.cache;if(n.x!==void 0)(u[0]!==n.x||u[1]!==n.y||u[2]!==n.z||u[3]!==n.w)&&(s.uniform4ui(this.addr,n.x,n.y,n.z,n.w),u[0]=n.x,u[1]=n.y,u[2]=n.z,u[3]=n.w);else{if(arraysEqual(u,n))return;s.uniform4uiv(this.addr,n),copyArray(u,n)}}function setValueT1(s,n,u){const f=this.cache,y=u.allocateTextureUnit();f[0]!==y&&(s.uniform1i(this.addr,y),f[0]=y);let S;this.type===s.SAMPLER_2D_SHADOW?(emptyShadowTexture.compareFunction=u.isReversedDepthBuffer()?GreaterEqualCompare:LessEqualCompare,S=emptyShadowTexture):S=emptyTexture,u.setTexture2D(n||S,y)}function setValueT3D1(s,n,u){const f=this.cache,y=u.allocateTextureUnit();f[0]!==y&&(s.uniform1i(this.addr,y),f[0]=y),u.setTexture3D(n||empty3dTexture,y)}function setValueT6(s,n,u){const f=this.cache,y=u.allocateTextureUnit();f[0]!==y&&(s.uniform1i(this.addr,y),f[0]=y),u.setTextureCube(n||emptyCubeTexture,y)}function setValueT2DArray1(s,n,u){const f=this.cache,y=u.allocateTextureUnit();f[0]!==y&&(s.uniform1i(this.addr,y),f[0]=y),u.setTexture2DArray(n||emptyArrayTexture,y)}function getSingularSetter(s){switch(s){case 5126:return setValueV1f;case 35664:return setValueV2f;case 35665:return setValueV3f;case 35666:return setValueV4f;case 35674:return setValueM2;case 35675:return setValueM3;case 35676:return setValueM4;case 5124:case 35670:return setValueV1i;case 35667:case 35671:return setValueV2i;case 35668:case 35672:return setValueV3i;case 35669:case 35673:return setValueV4i;case 5125:return setValueV1ui;case 36294:return setValueV2ui;case 36295:return setValueV3ui;case 36296:return setValueV4ui;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1;case 35679:case 36299:case 36307:return setValueT3D1;case 35680:case 36300:case 36308:case 36293:return setValueT6;case 36289:case 36303:case 36311:case 36292:return setValueT2DArray1}}function setValueV1fArray(s,n){s.uniform1fv(this.addr,n)}function setValueV2fArray(s,n){const u=flatten(n,this.size,2);s.uniform2fv(this.addr,u)}function setValueV3fArray(s,n){const u=flatten(n,this.size,3);s.uniform3fv(this.addr,u)}function setValueV4fArray(s,n){const u=flatten(n,this.size,4);s.uniform4fv(this.addr,u)}function setValueM2Array(s,n){const u=flatten(n,this.size,4);s.uniformMatrix2fv(this.addr,!1,u)}function setValueM3Array(s,n){const u=flatten(n,this.size,9);s.uniformMatrix3fv(this.addr,!1,u)}function setValueM4Array(s,n){const u=flatten(n,this.size,16);s.uniformMatrix4fv(this.addr,!1,u)}function setValueV1iArray(s,n){s.uniform1iv(this.addr,n)}function setValueV2iArray(s,n){s.uniform2iv(this.addr,n)}function setValueV3iArray(s,n){s.uniform3iv(this.addr,n)}function setValueV4iArray(s,n){s.uniform4iv(this.addr,n)}function setValueV1uiArray(s,n){s.uniform1uiv(this.addr,n)}function setValueV2uiArray(s,n){s.uniform2uiv(this.addr,n)}function setValueV3uiArray(s,n){s.uniform3uiv(this.addr,n)}function setValueV4uiArray(s,n){s.uniform4uiv(this.addr,n)}function setValueT1Array(s,n,u){const f=this.cache,y=n.length,S=allocTexUnits(u,y);arraysEqual(f,S)||(s.uniform1iv(this.addr,S),copyArray(f,S));let A;this.type===s.SAMPLER_2D_SHADOW?A=emptyShadowTexture:A=emptyTexture;for(let w=0;w!==y;++w)u.setTexture2D(n[w]||A,S[w])}function setValueT3DArray(s,n,u){const f=this.cache,y=n.length,S=allocTexUnits(u,y);arraysEqual(f,S)||(s.uniform1iv(this.addr,S),copyArray(f,S));for(let A=0;A!==y;++A)u.setTexture3D(n[A]||empty3dTexture,S[A])}function setValueT6Array(s,n,u){const f=this.cache,y=n.length,S=allocTexUnits(u,y);arraysEqual(f,S)||(s.uniform1iv(this.addr,S),copyArray(f,S));for(let A=0;A!==y;++A)u.setTextureCube(n[A]||emptyCubeTexture,S[A])}function setValueT2DArrayArray(s,n,u){const f=this.cache,y=n.length,S=allocTexUnits(u,y);arraysEqual(f,S)||(s.uniform1iv(this.addr,S),copyArray(f,S));for(let A=0;A!==y;++A)u.setTexture2DArray(n[A]||emptyArrayTexture,S[A])}function getPureArraySetter(s){switch(s){case 5126:return setValueV1fArray;case 35664:return setValueV2fArray;case 35665:return setValueV3fArray;case 35666:return setValueV4fArray;case 35674:return setValueM2Array;case 35675:return setValueM3Array;case 35676:return setValueM4Array;case 5124:case 35670:return setValueV1iArray;case 35667:case 35671:return setValueV2iArray;case 35668:case 35672:return setValueV3iArray;case 35669:case 35673:return setValueV4iArray;case 5125:return setValueV1uiArray;case 36294:return setValueV2uiArray;case 36295:return setValueV3uiArray;case 36296:return setValueV4uiArray;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1Array;case 35679:case 36299:case 36307:return setValueT3DArray;case 35680:case 36300:case 36308:case 36293:return setValueT6Array;case 36289:case 36303:case 36311:case 36292:return setValueT2DArrayArray}}class SingleUniform{constructor(n,u,f){this.id=n,this.addr=f,this.cache=[],this.type=u.type,this.setValue=getSingularSetter(u.type)}}class PureArrayUniform{constructor(n,u,f){this.id=n,this.addr=f,this.cache=[],this.type=u.type,this.size=u.size,this.setValue=getPureArraySetter(u.type)}}class StructuredUniform{constructor(n){this.id=n,this.seq=[],this.map={}}setValue(n,u,f){const y=this.seq;for(let S=0,A=y.length;S!==A;++S){const w=y[S];w.setValue(n,u[w.id],f)}}}const RePathPart=/(\w+)(\])?(\[|\.)?/g;function addUniform(s,n){s.seq.push(n),s.map[n.id]=n}function parseUniform(s,n,u){const f=s.name,y=f.length;for(RePathPart.lastIndex=0;;){const S=RePathPart.exec(f),A=RePathPart.lastIndex;let w=S[1];const C=S[2]==="]",T=S[3];if(C&&(w=w|0),T===void 0||T==="["&&A+2===y){addUniform(u,T===void 0?new SingleUniform(w,s,n):new PureArrayUniform(w,s,n));break}else{let I=u.map[w];I===void 0&&(I=new StructuredUniform(w),addUniform(u,I)),u=I}}}class WebGLUniforms{constructor(n,u){this.seq=[],this.map={};const f=n.getProgramParameter(u,n.ACTIVE_UNIFORMS);for(let A=0;A<f;++A){const w=n.getActiveUniform(u,A),C=n.getUniformLocation(u,w.name);parseUniform(w,C,this)}const y=[],S=[];for(const A of this.seq)A.type===n.SAMPLER_2D_SHADOW||A.type===n.SAMPLER_CUBE_SHADOW||A.type===n.SAMPLER_2D_ARRAY_SHADOW?y.push(A):S.push(A);y.length>0&&(this.seq=y.concat(S))}setValue(n,u,f,y){const S=this.map[u];S!==void 0&&S.setValue(n,f,y)}setOptional(n,u,f){const y=u[f];y!==void 0&&this.setValue(n,f,y)}static upload(n,u,f,y){for(let S=0,A=u.length;S!==A;++S){const w=u[S],C=f[w.id];C.needsUpdate!==!1&&w.setValue(n,C.value,y)}}static seqWithValue(n,u){const f=[];for(let y=0,S=n.length;y!==S;++y){const A=n[y];A.id in u&&f.push(A)}return f}}function WebGLShader(s,n,u){const f=s.createShader(n);return s.shaderSource(f,u),s.compileShader(f),f}const COMPLETION_STATUS_KHR=37297;let programIdCount=0;function handleSource(s,n){const u=s.split(`
`),f=[],y=Math.max(n-6,0),S=Math.min(n+6,u.length);for(let A=y;A<S;A++){const w=A+1;f.push(`${w===n?">":" "} ${w}: ${u[A]}`)}return f.join(`
`)}const _m0=new Matrix3;function getEncodingComponents(s){ColorManagement._getMatrix(_m0,ColorManagement.workingColorSpace,s);const n=`mat3( ${_m0.elements.map(u=>u.toFixed(4))} )`;switch(ColorManagement.getTransfer(s)){case LinearTransfer:return[n,"LinearTransferOETF"];case SRGBTransfer:return[n,"sRGBTransferOETF"];default:return warn("WebGLProgram: Unsupported color space: ",s),[n,"LinearTransferOETF"]}}function getShaderErrors(s,n,u){const f=s.getShaderParameter(n,s.COMPILE_STATUS),S=(s.getShaderInfoLog(n)||"").trim();if(f&&S==="")return"";const A=/ERROR: 0:(\d+)/.exec(S);if(A){const w=parseInt(A[1]);return u.toUpperCase()+`

`+S+`

`+handleSource(s.getShaderSource(n),w)}else return S}function getTexelEncodingFunction(s,n){const u=getEncodingComponents(n);return[`vec4 ${s}( vec4 value ) {`,`	return ${u[1]}( vec4( value.rgb * ${u[0]}, value.a ) );`,"}"].join(`
`)}const toneMappingFunctions={[LinearToneMapping]:"Linear",[ReinhardToneMapping]:"Reinhard",[CineonToneMapping]:"Cineon",[ACESFilmicToneMapping]:"ACESFilmic",[AgXToneMapping]:"AgX",[NeutralToneMapping]:"Neutral",[CustomToneMapping]:"Custom"};function getToneMappingFunction(s,n){const u=toneMappingFunctions[n];return u===void 0?(warn("WebGLProgram: Unsupported toneMapping:",n),"vec3 "+s+"( vec3 color ) { return LinearToneMapping( color ); }"):"vec3 "+s+"( vec3 color ) { return "+u+"ToneMapping( color ); }"}const _v0=new Vector3;function getLuminanceFunction(){ColorManagement.getLuminanceCoefficients(_v0);const s=_v0.x.toFixed(4),n=_v0.y.toFixed(4),u=_v0.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${s}, ${n}, ${u} );`,"	return dot( weights, rgb );","}"].join(`
`)}function generateVertexExtensions(s){return[s.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",s.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(filterEmptyLine).join(`
`)}function generateDefines(s){const n=[];for(const u in s){const f=s[u];f!==!1&&n.push("#define "+u+" "+f)}return n.join(`
`)}function fetchAttributeLocations(s,n){const u={},f=s.getProgramParameter(n,s.ACTIVE_ATTRIBUTES);for(let y=0;y<f;y++){const S=s.getActiveAttrib(n,y),A=S.name;let w=1;S.type===s.FLOAT_MAT2&&(w=2),S.type===s.FLOAT_MAT3&&(w=3),S.type===s.FLOAT_MAT4&&(w=4),u[A]={type:S.type,location:s.getAttribLocation(n,A),locationSize:w}}return u}function filterEmptyLine(s){return s!==""}function replaceLightNums(s,n){const u=n.numSpotLightShadows+n.numSpotLightMaps-n.numSpotLightShadowsWithMaps;return s.replace(/NUM_DIR_LIGHTS/g,n.numDirLights).replace(/NUM_SPOT_LIGHTS/g,n.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,n.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,u).replace(/NUM_RECT_AREA_LIGHTS/g,n.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,n.numPointLights).replace(/NUM_HEMI_LIGHTS/g,n.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,n.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,n.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,n.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,n.numPointLightShadows)}function replaceClippingPlaneNums(s,n){return s.replace(/NUM_CLIPPING_PLANES/g,n.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,n.numClippingPlanes-n.numClipIntersection)}const includePattern=/^[ \t]*#include +<([\w\d./]+)>/gm;function resolveIncludes(s){return s.replace(includePattern,includeReplacer)}const shaderChunkMap=new Map;function includeReplacer(s,n){let u=ShaderChunk[n];if(u===void 0){const f=shaderChunkMap.get(n);if(f!==void 0)u=ShaderChunk[f],warn('WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',n,f);else throw new Error("Can not resolve #include <"+n+">")}return resolveIncludes(u)}const unrollLoopPattern=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function unrollLoops(s){return s.replace(unrollLoopPattern,loopReplacer)}function loopReplacer(s,n,u,f){let y="";for(let S=parseInt(n);S<parseInt(u);S++)y+=f.replace(/\[\s*i\s*\]/g,"[ "+S+" ]").replace(/UNROLLED_LOOP_INDEX/g,S);return y}function generatePrecision(s){let n=`precision ${s.precision} float;
	precision ${s.precision} int;
	precision ${s.precision} sampler2D;
	precision ${s.precision} samplerCube;
	precision ${s.precision} sampler3D;
	precision ${s.precision} sampler2DArray;
	precision ${s.precision} sampler2DShadow;
	precision ${s.precision} samplerCubeShadow;
	precision ${s.precision} sampler2DArrayShadow;
	precision ${s.precision} isampler2D;
	precision ${s.precision} isampler3D;
	precision ${s.precision} isamplerCube;
	precision ${s.precision} isampler2DArray;
	precision ${s.precision} usampler2D;
	precision ${s.precision} usampler3D;
	precision ${s.precision} usamplerCube;
	precision ${s.precision} usampler2DArray;
	`;return s.precision==="highp"?n+=`
#define HIGH_PRECISION`:s.precision==="mediump"?n+=`
#define MEDIUM_PRECISION`:s.precision==="lowp"&&(n+=`
#define LOW_PRECISION`),n}const shadowMapTypeDefines={[PCFShadowMap]:"SHADOWMAP_TYPE_PCF",[VSMShadowMap]:"SHADOWMAP_TYPE_VSM"};function generateShadowMapTypeDefine(s){return shadowMapTypeDefines[s.shadowMapType]||"SHADOWMAP_TYPE_BASIC"}const envMapTypeDefines={[CubeReflectionMapping]:"ENVMAP_TYPE_CUBE",[CubeRefractionMapping]:"ENVMAP_TYPE_CUBE",[CubeUVReflectionMapping]:"ENVMAP_TYPE_CUBE_UV"};function generateEnvMapTypeDefine(s){return s.envMap===!1?"ENVMAP_TYPE_CUBE":envMapTypeDefines[s.envMapMode]||"ENVMAP_TYPE_CUBE"}const envMapModeDefines={[CubeRefractionMapping]:"ENVMAP_MODE_REFRACTION"};function generateEnvMapModeDefine(s){return s.envMap===!1?"ENVMAP_MODE_REFLECTION":envMapModeDefines[s.envMapMode]||"ENVMAP_MODE_REFLECTION"}const envMapBlendingDefines={[MultiplyOperation]:"ENVMAP_BLENDING_MULTIPLY",[MixOperation]:"ENVMAP_BLENDING_MIX",[AddOperation]:"ENVMAP_BLENDING_ADD"};function generateEnvMapBlendingDefine(s){return s.envMap===!1?"ENVMAP_BLENDING_NONE":envMapBlendingDefines[s.combine]||"ENVMAP_BLENDING_NONE"}function generateCubeUVSize(s){const n=s.envMapCubeUVHeight;if(n===null)return null;const u=Math.log2(n)-2,f=1/n;return{texelWidth:1/(3*Math.max(Math.pow(2,u),112)),texelHeight:f,maxMip:u}}function WebGLProgram(s,n,u,f){const y=s.getContext(),S=u.defines;let A=u.vertexShader,w=u.fragmentShader;const C=generateShadowMapTypeDefine(u),T=generateEnvMapTypeDefine(u),R=generateEnvMapModeDefine(u),I=generateEnvMapBlendingDefine(u),N=generateCubeUVSize(u),L=generateVertexExtensions(u),F=generateDefines(S),H=y.createProgram();let z,U,G=u.glslVersion?"#version "+u.glslVersion+`
`:"";u.isRawShaderMaterial?(z=["#define SHADER_TYPE "+u.shaderType,"#define SHADER_NAME "+u.shaderName,F].filter(filterEmptyLine).join(`
`),z.length>0&&(z+=`
`),U=["#define SHADER_TYPE "+u.shaderType,"#define SHADER_NAME "+u.shaderName,F].filter(filterEmptyLine).join(`
`),U.length>0&&(U+=`
`)):(z=[generatePrecision(u),"#define SHADER_TYPE "+u.shaderType,"#define SHADER_NAME "+u.shaderName,F,u.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",u.batching?"#define USE_BATCHING":"",u.batchingColor?"#define USE_BATCHING_COLOR":"",u.instancing?"#define USE_INSTANCING":"",u.instancingColor?"#define USE_INSTANCING_COLOR":"",u.instancingMorph?"#define USE_INSTANCING_MORPH":"",u.useFog&&u.fog?"#define USE_FOG":"",u.useFog&&u.fogExp2?"#define FOG_EXP2":"",u.map?"#define USE_MAP":"",u.envMap?"#define USE_ENVMAP":"",u.envMap?"#define "+R:"",u.lightMap?"#define USE_LIGHTMAP":"",u.aoMap?"#define USE_AOMAP":"",u.bumpMap?"#define USE_BUMPMAP":"",u.normalMap?"#define USE_NORMALMAP":"",u.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",u.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",u.displacementMap?"#define USE_DISPLACEMENTMAP":"",u.emissiveMap?"#define USE_EMISSIVEMAP":"",u.anisotropy?"#define USE_ANISOTROPY":"",u.anisotropyMap?"#define USE_ANISOTROPYMAP":"",u.clearcoatMap?"#define USE_CLEARCOATMAP":"",u.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",u.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",u.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",u.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",u.specularMap?"#define USE_SPECULARMAP":"",u.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",u.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",u.roughnessMap?"#define USE_ROUGHNESSMAP":"",u.metalnessMap?"#define USE_METALNESSMAP":"",u.alphaMap?"#define USE_ALPHAMAP":"",u.alphaHash?"#define USE_ALPHAHASH":"",u.transmission?"#define USE_TRANSMISSION":"",u.transmissionMap?"#define USE_TRANSMISSIONMAP":"",u.thicknessMap?"#define USE_THICKNESSMAP":"",u.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",u.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",u.mapUv?"#define MAP_UV "+u.mapUv:"",u.alphaMapUv?"#define ALPHAMAP_UV "+u.alphaMapUv:"",u.lightMapUv?"#define LIGHTMAP_UV "+u.lightMapUv:"",u.aoMapUv?"#define AOMAP_UV "+u.aoMapUv:"",u.emissiveMapUv?"#define EMISSIVEMAP_UV "+u.emissiveMapUv:"",u.bumpMapUv?"#define BUMPMAP_UV "+u.bumpMapUv:"",u.normalMapUv?"#define NORMALMAP_UV "+u.normalMapUv:"",u.displacementMapUv?"#define DISPLACEMENTMAP_UV "+u.displacementMapUv:"",u.metalnessMapUv?"#define METALNESSMAP_UV "+u.metalnessMapUv:"",u.roughnessMapUv?"#define ROUGHNESSMAP_UV "+u.roughnessMapUv:"",u.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+u.anisotropyMapUv:"",u.clearcoatMapUv?"#define CLEARCOATMAP_UV "+u.clearcoatMapUv:"",u.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+u.clearcoatNormalMapUv:"",u.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+u.clearcoatRoughnessMapUv:"",u.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+u.iridescenceMapUv:"",u.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+u.iridescenceThicknessMapUv:"",u.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+u.sheenColorMapUv:"",u.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+u.sheenRoughnessMapUv:"",u.specularMapUv?"#define SPECULARMAP_UV "+u.specularMapUv:"",u.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+u.specularColorMapUv:"",u.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+u.specularIntensityMapUv:"",u.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+u.transmissionMapUv:"",u.thicknessMapUv?"#define THICKNESSMAP_UV "+u.thicknessMapUv:"",u.vertexTangents&&u.flatShading===!1?"#define USE_TANGENT":"",u.vertexColors?"#define USE_COLOR":"",u.vertexAlphas?"#define USE_COLOR_ALPHA":"",u.vertexUv1s?"#define USE_UV1":"",u.vertexUv2s?"#define USE_UV2":"",u.vertexUv3s?"#define USE_UV3":"",u.pointsUvs?"#define USE_POINTS_UV":"",u.flatShading?"#define FLAT_SHADED":"",u.skinning?"#define USE_SKINNING":"",u.morphTargets?"#define USE_MORPHTARGETS":"",u.morphNormals&&u.flatShading===!1?"#define USE_MORPHNORMALS":"",u.morphColors?"#define USE_MORPHCOLORS":"",u.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+u.morphTextureStride:"",u.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+u.morphTargetsCount:"",u.doubleSided?"#define DOUBLE_SIDED":"",u.flipSided?"#define FLIP_SIDED":"",u.shadowMapEnabled?"#define USE_SHADOWMAP":"",u.shadowMapEnabled?"#define "+C:"",u.sizeAttenuation?"#define USE_SIZEATTENUATION":"",u.numLightProbes>0?"#define USE_LIGHT_PROBES":"",u.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",u.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(filterEmptyLine).join(`
`),U=[generatePrecision(u),"#define SHADER_TYPE "+u.shaderType,"#define SHADER_NAME "+u.shaderName,F,u.useFog&&u.fog?"#define USE_FOG":"",u.useFog&&u.fogExp2?"#define FOG_EXP2":"",u.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",u.map?"#define USE_MAP":"",u.matcap?"#define USE_MATCAP":"",u.envMap?"#define USE_ENVMAP":"",u.envMap?"#define "+T:"",u.envMap?"#define "+R:"",u.envMap?"#define "+I:"",N?"#define CUBEUV_TEXEL_WIDTH "+N.texelWidth:"",N?"#define CUBEUV_TEXEL_HEIGHT "+N.texelHeight:"",N?"#define CUBEUV_MAX_MIP "+N.maxMip+".0":"",u.lightMap?"#define USE_LIGHTMAP":"",u.aoMap?"#define USE_AOMAP":"",u.bumpMap?"#define USE_BUMPMAP":"",u.normalMap?"#define USE_NORMALMAP":"",u.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",u.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",u.emissiveMap?"#define USE_EMISSIVEMAP":"",u.anisotropy?"#define USE_ANISOTROPY":"",u.anisotropyMap?"#define USE_ANISOTROPYMAP":"",u.clearcoat?"#define USE_CLEARCOAT":"",u.clearcoatMap?"#define USE_CLEARCOATMAP":"",u.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",u.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",u.dispersion?"#define USE_DISPERSION":"",u.iridescence?"#define USE_IRIDESCENCE":"",u.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",u.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",u.specularMap?"#define USE_SPECULARMAP":"",u.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",u.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",u.roughnessMap?"#define USE_ROUGHNESSMAP":"",u.metalnessMap?"#define USE_METALNESSMAP":"",u.alphaMap?"#define USE_ALPHAMAP":"",u.alphaTest?"#define USE_ALPHATEST":"",u.alphaHash?"#define USE_ALPHAHASH":"",u.sheen?"#define USE_SHEEN":"",u.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",u.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",u.transmission?"#define USE_TRANSMISSION":"",u.transmissionMap?"#define USE_TRANSMISSIONMAP":"",u.thicknessMap?"#define USE_THICKNESSMAP":"",u.vertexTangents&&u.flatShading===!1?"#define USE_TANGENT":"",u.vertexColors||u.instancingColor||u.batchingColor?"#define USE_COLOR":"",u.vertexAlphas?"#define USE_COLOR_ALPHA":"",u.vertexUv1s?"#define USE_UV1":"",u.vertexUv2s?"#define USE_UV2":"",u.vertexUv3s?"#define USE_UV3":"",u.pointsUvs?"#define USE_POINTS_UV":"",u.gradientMap?"#define USE_GRADIENTMAP":"",u.flatShading?"#define FLAT_SHADED":"",u.doubleSided?"#define DOUBLE_SIDED":"",u.flipSided?"#define FLIP_SIDED":"",u.shadowMapEnabled?"#define USE_SHADOWMAP":"",u.shadowMapEnabled?"#define "+C:"",u.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",u.numLightProbes>0?"#define USE_LIGHT_PROBES":"",u.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",u.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",u.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",u.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",u.toneMapping!==NoToneMapping?"#define TONE_MAPPING":"",u.toneMapping!==NoToneMapping?ShaderChunk.tonemapping_pars_fragment:"",u.toneMapping!==NoToneMapping?getToneMappingFunction("toneMapping",u.toneMapping):"",u.dithering?"#define DITHERING":"",u.opaque?"#define OPAQUE":"",ShaderChunk.colorspace_pars_fragment,getTexelEncodingFunction("linearToOutputTexel",u.outputColorSpace),getLuminanceFunction(),u.useDepthPacking?"#define DEPTH_PACKING "+u.depthPacking:"",`
`].filter(filterEmptyLine).join(`
`)),A=resolveIncludes(A),A=replaceLightNums(A,u),A=replaceClippingPlaneNums(A,u),w=resolveIncludes(w),w=replaceLightNums(w,u),w=replaceClippingPlaneNums(w,u),A=unrollLoops(A),w=unrollLoops(w),u.isRawShaderMaterial!==!0&&(G=`#version 300 es
`,z=[L,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+z,U=["#define varying in",u.glslVersion===GLSL3?"":"layout(location = 0) out highp vec4 pc_fragColor;",u.glslVersion===GLSL3?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+U);const Y=G+z+A,K=G+U+w,Z=WebGLShader(y,y.VERTEX_SHADER,Y),J=WebGLShader(y,y.FRAGMENT_SHADER,K);y.attachShader(H,Z),y.attachShader(H,J),u.index0AttributeName!==void 0?y.bindAttribLocation(H,0,u.index0AttributeName):u.morphTargets===!0&&y.bindAttribLocation(H,0,"position"),y.linkProgram(H);function te(ge){if(s.debug.checkShaderErrors){const Ee=y.getProgramInfoLog(H)||"",we=y.getShaderInfoLog(Z)||"",Ie=y.getShaderInfoLog(J)||"",Be=Ee.trim(),Me=we.trim(),Re=Ie.trim();let Te=!0,Se=!0;if(y.getProgramParameter(H,y.LINK_STATUS)===!1)if(Te=!1,typeof s.debug.onShaderError=="function")s.debug.onShaderError(y,H,Z,J);else{const oe=getShaderErrors(y,Z,"vertex"),ae=getShaderErrors(y,J,"fragment");error("THREE.WebGLProgram: Shader Error "+y.getError()+" - VALIDATE_STATUS "+y.getProgramParameter(H,y.VALIDATE_STATUS)+`

Material Name: `+ge.name+`
Material Type: `+ge.type+`

Program Info Log: `+Be+`
`+oe+`
`+ae)}else Be!==""?warn("WebGLProgram: Program Info Log:",Be):(Me===""||Re==="")&&(Se=!1);Se&&(ge.diagnostics={runnable:Te,programLog:Be,vertexShader:{log:Me,prefix:z},fragmentShader:{log:Re,prefix:U}})}y.deleteShader(Z),y.deleteShader(J),de=new WebGLUniforms(y,H),se=fetchAttributeLocations(y,H)}let de;this.getUniforms=function(){return de===void 0&&te(this),de};let se;this.getAttributes=function(){return se===void 0&&te(this),se};let ne=u.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return ne===!1&&(ne=y.getProgramParameter(H,COMPLETION_STATUS_KHR)),ne},this.destroy=function(){f.releaseStatesOfProgram(this),y.deleteProgram(H),this.program=void 0},this.type=u.shaderType,this.name=u.shaderName,this.id=programIdCount++,this.cacheKey=n,this.usedTimes=1,this.program=H,this.vertexShader=Z,this.fragmentShader=J,this}let _id=0;class WebGLShaderCache{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(n){const u=n.vertexShader,f=n.fragmentShader,y=this._getShaderStage(u),S=this._getShaderStage(f),A=this._getShaderCacheForMaterial(n);return A.has(y)===!1&&(A.add(y),y.usedTimes++),A.has(S)===!1&&(A.add(S),S.usedTimes++),this}remove(n){const u=this.materialCache.get(n);for(const f of u)f.usedTimes--,f.usedTimes===0&&this.shaderCache.delete(f.code);return this.materialCache.delete(n),this}getVertexShaderID(n){return this._getShaderStage(n.vertexShader).id}getFragmentShaderID(n){return this._getShaderStage(n.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(n){const u=this.materialCache;let f=u.get(n);return f===void 0&&(f=new Set,u.set(n,f)),f}_getShaderStage(n){const u=this.shaderCache;let f=u.get(n);return f===void 0&&(f=new WebGLShaderStage(n),u.set(n,f)),f}}class WebGLShaderStage{constructor(n){this.id=_id++,this.code=n,this.usedTimes=0}}function WebGLPrograms(s,n,u,f,y,S,A){const w=new Layers,C=new WebGLShaderCache,T=new Set,R=[],I=new Map,N=y.logarithmicDepthBuffer;let L=y.precision;const F={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distance",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function H(se){return T.add(se),se===0?"uv":`uv${se}`}function z(se,ne,ge,Ee,we){const Ie=Ee.fog,Be=we.geometry,Me=se.isMeshStandardMaterial?Ee.environment:null,Re=(se.isMeshStandardMaterial?u:n).get(se.envMap||Me),Te=Re&&Re.mapping===CubeUVReflectionMapping?Re.image.height:null,Se=F[se.type];se.precision!==null&&(L=y.getMaxPrecision(se.precision),L!==se.precision&&warn("WebGLProgram.getParameters:",se.precision,"not supported, using",L,"instead."));const oe=Be.morphAttributes.position||Be.morphAttributes.normal||Be.morphAttributes.color,ae=oe!==void 0?oe.length:0;let be=0;Be.morphAttributes.position!==void 0&&(be=1),Be.morphAttributes.normal!==void 0&&(be=2),Be.morphAttributes.color!==void 0&&(be=3);let he,ue,ye,ce;if(Se){const On=ShaderLib[Se];he=On.vertexShader,ue=On.fragmentShader}else he=se.vertexShader,ue=se.fragmentShader,C.update(se),ye=C.getVertexShaderID(se),ce=C.getFragmentShaderID(se);const _e=s.getRenderTarget(),ke=s.state.buffers.depth.getReversed(),Pe=we.isInstancedMesh===!0,$e=we.isBatchedMesh===!0,xe=!!se.map,Ne=!!se.matcap,je=!!Re,He=!!se.aoMap,Ye=!!se.lightMap,Je=!!se.bumpMap,ot=!!se.normalMap,ze=!!se.displacementMap,pt=!!se.emissiveMap,yt=!!se.metalnessMap,ut=!!se.roughnessMap,Et=se.anisotropy>0,qe=se.clearcoat>0,Le=se.dispersion>0,lt=se.iridescence>0,We=se.sheen>0,Qe=se.transmission>0,at=Et&&!!se.anisotropyMap,St=qe&&!!se.clearcoatMap,Ct=qe&&!!se.clearcoatNormalMap,jt=qe&&!!se.clearcoatRoughnessMap,Gt=lt&&!!se.iridescenceMap,Ft=lt&&!!se.iridescenceThicknessMap,ct=We&&!!se.sheenColorMap,st=We&&!!se.sheenRoughnessMap,nt=!!se.specularMap,At=!!se.specularColorMap,Yt=!!se.specularIntensityMap,ht=Qe&&!!se.transmissionMap,Tt=Qe&&!!se.thicknessMap,Kt=!!se.gradientMap,_n=!!se.alphaMap,Ht=se.alphaTest>0,Ot=!!se.alphaHash,cn=!!se.extensions;let Mn=NoToneMapping;se.toneMapped&&(_e===null||_e.isXRRenderTarget===!0)&&(Mn=s.toneMapping);const In={shaderID:Se,shaderType:se.type,shaderName:se.name,vertexShader:he,fragmentShader:ue,defines:se.defines,customVertexShaderID:ye,customFragmentShaderID:ce,isRawShaderMaterial:se.isRawShaderMaterial===!0,glslVersion:se.glslVersion,precision:L,batching:$e,batchingColor:$e&&we._colorsTexture!==null,instancing:Pe,instancingColor:Pe&&we.instanceColor!==null,instancingMorph:Pe&&we.morphTexture!==null,outputColorSpace:_e===null?s.outputColorSpace:_e.isXRRenderTarget===!0?_e.texture.colorSpace:LinearSRGBColorSpace$1,alphaToCoverage:!!se.alphaToCoverage,map:xe,matcap:Ne,envMap:je,envMapMode:je&&Re.mapping,envMapCubeUVHeight:Te,aoMap:He,lightMap:Ye,bumpMap:Je,normalMap:ot,displacementMap:ze,emissiveMap:pt,normalMapObjectSpace:ot&&se.normalMapType===ObjectSpaceNormalMap,normalMapTangentSpace:ot&&se.normalMapType===TangentSpaceNormalMap,metalnessMap:yt,roughnessMap:ut,anisotropy:Et,anisotropyMap:at,clearcoat:qe,clearcoatMap:St,clearcoatNormalMap:Ct,clearcoatRoughnessMap:jt,dispersion:Le,iridescence:lt,iridescenceMap:Gt,iridescenceThicknessMap:Ft,sheen:We,sheenColorMap:ct,sheenRoughnessMap:st,specularMap:nt,specularColorMap:At,specularIntensityMap:Yt,transmission:Qe,transmissionMap:ht,thicknessMap:Tt,gradientMap:Kt,opaque:se.transparent===!1&&se.blending===NormalBlending&&se.alphaToCoverage===!1,alphaMap:_n,alphaTest:Ht,alphaHash:Ot,combine:se.combine,mapUv:xe&&H(se.map.channel),aoMapUv:He&&H(se.aoMap.channel),lightMapUv:Ye&&H(se.lightMap.channel),bumpMapUv:Je&&H(se.bumpMap.channel),normalMapUv:ot&&H(se.normalMap.channel),displacementMapUv:ze&&H(se.displacementMap.channel),emissiveMapUv:pt&&H(se.emissiveMap.channel),metalnessMapUv:yt&&H(se.metalnessMap.channel),roughnessMapUv:ut&&H(se.roughnessMap.channel),anisotropyMapUv:at&&H(se.anisotropyMap.channel),clearcoatMapUv:St&&H(se.clearcoatMap.channel),clearcoatNormalMapUv:Ct&&H(se.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:jt&&H(se.clearcoatRoughnessMap.channel),iridescenceMapUv:Gt&&H(se.iridescenceMap.channel),iridescenceThicknessMapUv:Ft&&H(se.iridescenceThicknessMap.channel),sheenColorMapUv:ct&&H(se.sheenColorMap.channel),sheenRoughnessMapUv:st&&H(se.sheenRoughnessMap.channel),specularMapUv:nt&&H(se.specularMap.channel),specularColorMapUv:At&&H(se.specularColorMap.channel),specularIntensityMapUv:Yt&&H(se.specularIntensityMap.channel),transmissionMapUv:ht&&H(se.transmissionMap.channel),thicknessMapUv:Tt&&H(se.thicknessMap.channel),alphaMapUv:_n&&H(se.alphaMap.channel),vertexTangents:!!Be.attributes.tangent&&(ot||Et),vertexColors:se.vertexColors,vertexAlphas:se.vertexColors===!0&&!!Be.attributes.color&&Be.attributes.color.itemSize===4,pointsUvs:we.isPoints===!0&&!!Be.attributes.uv&&(xe||_n),fog:!!Ie,useFog:se.fog===!0,fogExp2:!!Ie&&Ie.isFogExp2,flatShading:se.flatShading===!0&&se.wireframe===!1,sizeAttenuation:se.sizeAttenuation===!0,logarithmicDepthBuffer:N,reversedDepthBuffer:ke,skinning:we.isSkinnedMesh===!0,morphTargets:Be.morphAttributes.position!==void 0,morphNormals:Be.morphAttributes.normal!==void 0,morphColors:Be.morphAttributes.color!==void 0,morphTargetsCount:ae,morphTextureStride:be,numDirLights:ne.directional.length,numPointLights:ne.point.length,numSpotLights:ne.spot.length,numSpotLightMaps:ne.spotLightMap.length,numRectAreaLights:ne.rectArea.length,numHemiLights:ne.hemi.length,numDirLightShadows:ne.directionalShadowMap.length,numPointLightShadows:ne.pointShadowMap.length,numSpotLightShadows:ne.spotShadowMap.length,numSpotLightShadowsWithMaps:ne.numSpotLightShadowsWithMaps,numLightProbes:ne.numLightProbes,numClippingPlanes:A.numPlanes,numClipIntersection:A.numIntersection,dithering:se.dithering,shadowMapEnabled:s.shadowMap.enabled&&ge.length>0,shadowMapType:s.shadowMap.type,toneMapping:Mn,decodeVideoTexture:xe&&se.map.isVideoTexture===!0&&ColorManagement.getTransfer(se.map.colorSpace)===SRGBTransfer,decodeVideoTextureEmissive:pt&&se.emissiveMap.isVideoTexture===!0&&ColorManagement.getTransfer(se.emissiveMap.colorSpace)===SRGBTransfer,premultipliedAlpha:se.premultipliedAlpha,doubleSided:se.side===DoubleSide,flipSided:se.side===BackSide,useDepthPacking:se.depthPacking>=0,depthPacking:se.depthPacking||0,index0AttributeName:se.index0AttributeName,extensionClipCullDistance:cn&&se.extensions.clipCullDistance===!0&&f.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(cn&&se.extensions.multiDraw===!0||$e)&&f.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:f.has("KHR_parallel_shader_compile"),customProgramCacheKey:se.customProgramCacheKey()};return In.vertexUv1s=T.has(1),In.vertexUv2s=T.has(2),In.vertexUv3s=T.has(3),T.clear(),In}function U(se){const ne=[];if(se.shaderID?ne.push(se.shaderID):(ne.push(se.customVertexShaderID),ne.push(se.customFragmentShaderID)),se.defines!==void 0)for(const ge in se.defines)ne.push(ge),ne.push(se.defines[ge]);return se.isRawShaderMaterial===!1&&(G(ne,se),Y(ne,se),ne.push(s.outputColorSpace)),ne.push(se.customProgramCacheKey),ne.join()}function G(se,ne){se.push(ne.precision),se.push(ne.outputColorSpace),se.push(ne.envMapMode),se.push(ne.envMapCubeUVHeight),se.push(ne.mapUv),se.push(ne.alphaMapUv),se.push(ne.lightMapUv),se.push(ne.aoMapUv),se.push(ne.bumpMapUv),se.push(ne.normalMapUv),se.push(ne.displacementMapUv),se.push(ne.emissiveMapUv),se.push(ne.metalnessMapUv),se.push(ne.roughnessMapUv),se.push(ne.anisotropyMapUv),se.push(ne.clearcoatMapUv),se.push(ne.clearcoatNormalMapUv),se.push(ne.clearcoatRoughnessMapUv),se.push(ne.iridescenceMapUv),se.push(ne.iridescenceThicknessMapUv),se.push(ne.sheenColorMapUv),se.push(ne.sheenRoughnessMapUv),se.push(ne.specularMapUv),se.push(ne.specularColorMapUv),se.push(ne.specularIntensityMapUv),se.push(ne.transmissionMapUv),se.push(ne.thicknessMapUv),se.push(ne.combine),se.push(ne.fogExp2),se.push(ne.sizeAttenuation),se.push(ne.morphTargetsCount),se.push(ne.morphAttributeCount),se.push(ne.numDirLights),se.push(ne.numPointLights),se.push(ne.numSpotLights),se.push(ne.numSpotLightMaps),se.push(ne.numHemiLights),se.push(ne.numRectAreaLights),se.push(ne.numDirLightShadows),se.push(ne.numPointLightShadows),se.push(ne.numSpotLightShadows),se.push(ne.numSpotLightShadowsWithMaps),se.push(ne.numLightProbes),se.push(ne.shadowMapType),se.push(ne.toneMapping),se.push(ne.numClippingPlanes),se.push(ne.numClipIntersection),se.push(ne.depthPacking)}function Y(se,ne){w.disableAll(),ne.instancing&&w.enable(0),ne.instancingColor&&w.enable(1),ne.instancingMorph&&w.enable(2),ne.matcap&&w.enable(3),ne.envMap&&w.enable(4),ne.normalMapObjectSpace&&w.enable(5),ne.normalMapTangentSpace&&w.enable(6),ne.clearcoat&&w.enable(7),ne.iridescence&&w.enable(8),ne.alphaTest&&w.enable(9),ne.vertexColors&&w.enable(10),ne.vertexAlphas&&w.enable(11),ne.vertexUv1s&&w.enable(12),ne.vertexUv2s&&w.enable(13),ne.vertexUv3s&&w.enable(14),ne.vertexTangents&&w.enable(15),ne.anisotropy&&w.enable(16),ne.alphaHash&&w.enable(17),ne.batching&&w.enable(18),ne.dispersion&&w.enable(19),ne.batchingColor&&w.enable(20),ne.gradientMap&&w.enable(21),se.push(w.mask),w.disableAll(),ne.fog&&w.enable(0),ne.useFog&&w.enable(1),ne.flatShading&&w.enable(2),ne.logarithmicDepthBuffer&&w.enable(3),ne.reversedDepthBuffer&&w.enable(4),ne.skinning&&w.enable(5),ne.morphTargets&&w.enable(6),ne.morphNormals&&w.enable(7),ne.morphColors&&w.enable(8),ne.premultipliedAlpha&&w.enable(9),ne.shadowMapEnabled&&w.enable(10),ne.doubleSided&&w.enable(11),ne.flipSided&&w.enable(12),ne.useDepthPacking&&w.enable(13),ne.dithering&&w.enable(14),ne.transmission&&w.enable(15),ne.sheen&&w.enable(16),ne.opaque&&w.enable(17),ne.pointsUvs&&w.enable(18),ne.decodeVideoTexture&&w.enable(19),ne.decodeVideoTextureEmissive&&w.enable(20),ne.alphaToCoverage&&w.enable(21),se.push(w.mask)}function K(se){const ne=F[se.type];let ge;if(ne){const Ee=ShaderLib[ne];ge=UniformsUtils.clone(Ee.uniforms)}else ge=se.uniforms;return ge}function Z(se,ne){let ge=I.get(ne);return ge!==void 0?++ge.usedTimes:(ge=new WebGLProgram(s,ne,se,S),R.push(ge),I.set(ne,ge)),ge}function J(se){if(--se.usedTimes===0){const ne=R.indexOf(se);R[ne]=R[R.length-1],R.pop(),I.delete(se.cacheKey),se.destroy()}}function te(se){C.remove(se)}function de(){C.dispose()}return{getParameters:z,getProgramCacheKey:U,getUniforms:K,acquireProgram:Z,releaseProgram:J,releaseShaderCache:te,programs:R,dispose:de}}function WebGLProperties(){let s=new WeakMap;function n(A){return s.has(A)}function u(A){let w=s.get(A);return w===void 0&&(w={},s.set(A,w)),w}function f(A){s.delete(A)}function y(A,w,C){s.get(A)[w]=C}function S(){s=new WeakMap}return{has:n,get:u,remove:f,update:y,dispose:S}}function painterSortStable(s,n){return s.groupOrder!==n.groupOrder?s.groupOrder-n.groupOrder:s.renderOrder!==n.renderOrder?s.renderOrder-n.renderOrder:s.material.id!==n.material.id?s.material.id-n.material.id:s.z!==n.z?s.z-n.z:s.id-n.id}function reversePainterSortStable(s,n){return s.groupOrder!==n.groupOrder?s.groupOrder-n.groupOrder:s.renderOrder!==n.renderOrder?s.renderOrder-n.renderOrder:s.z!==n.z?n.z-s.z:s.id-n.id}function WebGLRenderList(){const s=[];let n=0;const u=[],f=[],y=[];function S(){n=0,u.length=0,f.length=0,y.length=0}function A(I,N,L,F,H,z){let U=s[n];return U===void 0?(U={id:I.id,object:I,geometry:N,material:L,groupOrder:F,renderOrder:I.renderOrder,z:H,group:z},s[n]=U):(U.id=I.id,U.object=I,U.geometry=N,U.material=L,U.groupOrder=F,U.renderOrder=I.renderOrder,U.z=H,U.group=z),n++,U}function w(I,N,L,F,H,z){const U=A(I,N,L,F,H,z);L.transmission>0?f.push(U):L.transparent===!0?y.push(U):u.push(U)}function C(I,N,L,F,H,z){const U=A(I,N,L,F,H,z);L.transmission>0?f.unshift(U):L.transparent===!0?y.unshift(U):u.unshift(U)}function T(I,N){u.length>1&&u.sort(I||painterSortStable),f.length>1&&f.sort(N||reversePainterSortStable),y.length>1&&y.sort(N||reversePainterSortStable)}function R(){for(let I=n,N=s.length;I<N;I++){const L=s[I];if(L.id===null)break;L.id=null,L.object=null,L.geometry=null,L.material=null,L.group=null}}return{opaque:u,transmissive:f,transparent:y,init:S,push:w,unshift:C,finish:R,sort:T}}function WebGLRenderLists(){let s=new WeakMap;function n(f,y){const S=s.get(f);let A;return S===void 0?(A=new WebGLRenderList,s.set(f,[A])):y>=S.length?(A=new WebGLRenderList,S.push(A)):A=S[y],A}function u(){s=new WeakMap}return{get:n,dispose:u}}function UniformsCache(){const s={};return{get:function(n){if(s[n.id]!==void 0)return s[n.id];let u;switch(n.type){case"DirectionalLight":u={direction:new Vector3,color:new Color};break;case"SpotLight":u={position:new Vector3,direction:new Vector3,color:new Color,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":u={position:new Vector3,color:new Color,distance:0,decay:0};break;case"HemisphereLight":u={direction:new Vector3,skyColor:new Color,groundColor:new Color};break;case"RectAreaLight":u={color:new Color,position:new Vector3,halfWidth:new Vector3,halfHeight:new Vector3};break}return s[n.id]=u,u}}}function ShadowUniformsCache(){const s={};return{get:function(n){if(s[n.id]!==void 0)return s[n.id];let u;switch(n.type){case"DirectionalLight":u={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"SpotLight":u={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"PointLight":u={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2,shadowCameraNear:1,shadowCameraFar:1e3};break}return s[n.id]=u,u}}}let nextVersion=0;function shadowCastingAndTexturingLightsFirst(s,n){return(n.castShadow?2:0)-(s.castShadow?2:0)+(n.map?1:0)-(s.map?1:0)}function WebGLLights(s){const n=new UniformsCache,u=ShadowUniformsCache(),f={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let T=0;T<9;T++)f.probe.push(new Vector3);const y=new Vector3,S=new Matrix4,A=new Matrix4;function w(T){let R=0,I=0,N=0;for(let se=0;se<9;se++)f.probe[se].set(0,0,0);let L=0,F=0,H=0,z=0,U=0,G=0,Y=0,K=0,Z=0,J=0,te=0;T.sort(shadowCastingAndTexturingLightsFirst);for(let se=0,ne=T.length;se<ne;se++){const ge=T[se],Ee=ge.color,we=ge.intensity,Ie=ge.distance;let Be=null;if(ge.shadow&&ge.shadow.map&&(ge.shadow.map.texture.format===RGFormat?Be=ge.shadow.map.texture:Be=ge.shadow.map.depthTexture||ge.shadow.map.texture),ge.isAmbientLight)R+=Ee.r*we,I+=Ee.g*we,N+=Ee.b*we;else if(ge.isLightProbe){for(let Me=0;Me<9;Me++)f.probe[Me].addScaledVector(ge.sh.coefficients[Me],we);te++}else if(ge.isDirectionalLight){const Me=n.get(ge);if(Me.color.copy(ge.color).multiplyScalar(ge.intensity),ge.castShadow){const Re=ge.shadow,Te=u.get(ge);Te.shadowIntensity=Re.intensity,Te.shadowBias=Re.bias,Te.shadowNormalBias=Re.normalBias,Te.shadowRadius=Re.radius,Te.shadowMapSize=Re.mapSize,f.directionalShadow[L]=Te,f.directionalShadowMap[L]=Be,f.directionalShadowMatrix[L]=ge.shadow.matrix,G++}f.directional[L]=Me,L++}else if(ge.isSpotLight){const Me=n.get(ge);Me.position.setFromMatrixPosition(ge.matrixWorld),Me.color.copy(Ee).multiplyScalar(we),Me.distance=Ie,Me.coneCos=Math.cos(ge.angle),Me.penumbraCos=Math.cos(ge.angle*(1-ge.penumbra)),Me.decay=ge.decay,f.spot[H]=Me;const Re=ge.shadow;if(ge.map&&(f.spotLightMap[Z]=ge.map,Z++,Re.updateMatrices(ge),ge.castShadow&&J++),f.spotLightMatrix[H]=Re.matrix,ge.castShadow){const Te=u.get(ge);Te.shadowIntensity=Re.intensity,Te.shadowBias=Re.bias,Te.shadowNormalBias=Re.normalBias,Te.shadowRadius=Re.radius,Te.shadowMapSize=Re.mapSize,f.spotShadow[H]=Te,f.spotShadowMap[H]=Be,K++}H++}else if(ge.isRectAreaLight){const Me=n.get(ge);Me.color.copy(Ee).multiplyScalar(we),Me.halfWidth.set(ge.width*.5,0,0),Me.halfHeight.set(0,ge.height*.5,0),f.rectArea[z]=Me,z++}else if(ge.isPointLight){const Me=n.get(ge);if(Me.color.copy(ge.color).multiplyScalar(ge.intensity),Me.distance=ge.distance,Me.decay=ge.decay,ge.castShadow){const Re=ge.shadow,Te=u.get(ge);Te.shadowIntensity=Re.intensity,Te.shadowBias=Re.bias,Te.shadowNormalBias=Re.normalBias,Te.shadowRadius=Re.radius,Te.shadowMapSize=Re.mapSize,Te.shadowCameraNear=Re.camera.near,Te.shadowCameraFar=Re.camera.far,f.pointShadow[F]=Te,f.pointShadowMap[F]=Be,f.pointShadowMatrix[F]=ge.shadow.matrix,Y++}f.point[F]=Me,F++}else if(ge.isHemisphereLight){const Me=n.get(ge);Me.skyColor.copy(ge.color).multiplyScalar(we),Me.groundColor.copy(ge.groundColor).multiplyScalar(we),f.hemi[U]=Me,U++}}z>0&&(s.has("OES_texture_float_linear")===!0?(f.rectAreaLTC1=UniformsLib.LTC_FLOAT_1,f.rectAreaLTC2=UniformsLib.LTC_FLOAT_2):(f.rectAreaLTC1=UniformsLib.LTC_HALF_1,f.rectAreaLTC2=UniformsLib.LTC_HALF_2)),f.ambient[0]=R,f.ambient[1]=I,f.ambient[2]=N;const de=f.hash;(de.directionalLength!==L||de.pointLength!==F||de.spotLength!==H||de.rectAreaLength!==z||de.hemiLength!==U||de.numDirectionalShadows!==G||de.numPointShadows!==Y||de.numSpotShadows!==K||de.numSpotMaps!==Z||de.numLightProbes!==te)&&(f.directional.length=L,f.spot.length=H,f.rectArea.length=z,f.point.length=F,f.hemi.length=U,f.directionalShadow.length=G,f.directionalShadowMap.length=G,f.pointShadow.length=Y,f.pointShadowMap.length=Y,f.spotShadow.length=K,f.spotShadowMap.length=K,f.directionalShadowMatrix.length=G,f.pointShadowMatrix.length=Y,f.spotLightMatrix.length=K+Z-J,f.spotLightMap.length=Z,f.numSpotLightShadowsWithMaps=J,f.numLightProbes=te,de.directionalLength=L,de.pointLength=F,de.spotLength=H,de.rectAreaLength=z,de.hemiLength=U,de.numDirectionalShadows=G,de.numPointShadows=Y,de.numSpotShadows=K,de.numSpotMaps=Z,de.numLightProbes=te,f.version=nextVersion++)}function C(T,R){let I=0,N=0,L=0,F=0,H=0;const z=R.matrixWorldInverse;for(let U=0,G=T.length;U<G;U++){const Y=T[U];if(Y.isDirectionalLight){const K=f.directional[I];K.direction.setFromMatrixPosition(Y.matrixWorld),y.setFromMatrixPosition(Y.target.matrixWorld),K.direction.sub(y),K.direction.transformDirection(z),I++}else if(Y.isSpotLight){const K=f.spot[L];K.position.setFromMatrixPosition(Y.matrixWorld),K.position.applyMatrix4(z),K.direction.setFromMatrixPosition(Y.matrixWorld),y.setFromMatrixPosition(Y.target.matrixWorld),K.direction.sub(y),K.direction.transformDirection(z),L++}else if(Y.isRectAreaLight){const K=f.rectArea[F];K.position.setFromMatrixPosition(Y.matrixWorld),K.position.applyMatrix4(z),A.identity(),S.copy(Y.matrixWorld),S.premultiply(z),A.extractRotation(S),K.halfWidth.set(Y.width*.5,0,0),K.halfHeight.set(0,Y.height*.5,0),K.halfWidth.applyMatrix4(A),K.halfHeight.applyMatrix4(A),F++}else if(Y.isPointLight){const K=f.point[N];K.position.setFromMatrixPosition(Y.matrixWorld),K.position.applyMatrix4(z),N++}else if(Y.isHemisphereLight){const K=f.hemi[H];K.direction.setFromMatrixPosition(Y.matrixWorld),K.direction.transformDirection(z),H++}}}return{setup:w,setupView:C,state:f}}function WebGLRenderState(s){const n=new WebGLLights(s),u=[],f=[];function y(R){T.camera=R,u.length=0,f.length=0}function S(R){u.push(R)}function A(R){f.push(R)}function w(){n.setup(u)}function C(R){n.setupView(u,R)}const T={lightsArray:u,shadowsArray:f,camera:null,lights:n,transmissionRenderTarget:{}};return{init:y,state:T,setupLights:w,setupLightsView:C,pushLight:S,pushShadow:A}}function WebGLRenderStates(s){let n=new WeakMap;function u(y,S=0){const A=n.get(y);let w;return A===void 0?(w=new WebGLRenderState(s),n.set(y,[w])):S>=A.length?(w=new WebGLRenderState(s),A.push(w)):w=A[S],w}function f(){n=new WeakMap}return{get:u,dispose:f}}const vertex=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,fragment=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ).rg;
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ).r;
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( max( 0.0, squared_mean - mean * mean ) );
	gl_FragColor = vec4( mean, std_dev, 0.0, 1.0 );
}`,_cubeDirections=[new Vector3(1,0,0),new Vector3(-1,0,0),new Vector3(0,1,0),new Vector3(0,-1,0),new Vector3(0,0,1),new Vector3(0,0,-1)],_cubeUps=[new Vector3(0,-1,0),new Vector3(0,-1,0),new Vector3(0,0,1),new Vector3(0,0,-1),new Vector3(0,-1,0),new Vector3(0,-1,0)],_projScreenMatrix=new Matrix4,_lightPositionWorld=new Vector3,_lookTarget=new Vector3;function WebGLShadowMap(s,n,u){let f=new Frustum;const y=new Vector2,S=new Vector2,A=new Vector4,w=new MeshDepthMaterial,C=new MeshDistanceMaterial,T={},R=u.maxTextureSize,I={[FrontSide]:BackSide,[BackSide]:FrontSide,[DoubleSide]:DoubleSide},N=new ShaderMaterial({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Vector2},radius:{value:4}},vertexShader:vertex,fragmentShader:fragment}),L=N.clone();L.defines.HORIZONTAL_PASS=1;const F=new BufferGeometry;F.setAttribute("position",new BufferAttribute(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const H=new Mesh(F,N),z=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=PCFShadowMap;let U=this.type;this.render=function(J,te,de){if(z.enabled===!1||z.autoUpdate===!1&&z.needsUpdate===!1||J.length===0)return;J.type===PCFSoftShadowMap&&(warn("WebGLShadowMap: PCFSoftShadowMap has been deprecated. Using PCFShadowMap instead."),J.type=PCFShadowMap);const se=s.getRenderTarget(),ne=s.getActiveCubeFace(),ge=s.getActiveMipmapLevel(),Ee=s.state;Ee.setBlending(NoBlending),Ee.buffers.depth.getReversed()===!0?Ee.buffers.color.setClear(0,0,0,0):Ee.buffers.color.setClear(1,1,1,1),Ee.buffers.depth.setTest(!0),Ee.setScissorTest(!1);const we=U!==this.type;we&&te.traverse(function(Ie){Ie.material&&(Array.isArray(Ie.material)?Ie.material.forEach(Be=>Be.needsUpdate=!0):Ie.material.needsUpdate=!0)});for(let Ie=0,Be=J.length;Ie<Be;Ie++){const Me=J[Ie],Re=Me.shadow;if(Re===void 0){warn("WebGLShadowMap:",Me,"has no shadow.");continue}if(Re.autoUpdate===!1&&Re.needsUpdate===!1)continue;y.copy(Re.mapSize);const Te=Re.getFrameExtents();if(y.multiply(Te),S.copy(Re.mapSize),(y.x>R||y.y>R)&&(y.x>R&&(S.x=Math.floor(R/Te.x),y.x=S.x*Te.x,Re.mapSize.x=S.x),y.y>R&&(S.y=Math.floor(R/Te.y),y.y=S.y*Te.y,Re.mapSize.y=S.y)),Re.map===null||we===!0){if(Re.map!==null&&(Re.map.depthTexture!==null&&(Re.map.depthTexture.dispose(),Re.map.depthTexture=null),Re.map.dispose()),this.type===VSMShadowMap){if(Me.isPointLight){warn("WebGLShadowMap: VSM shadow maps are not supported for PointLights. Use PCF or BasicShadowMap instead.");continue}Re.map=new WebGLRenderTarget(y.x,y.y,{format:RGFormat,type:HalfFloatType,minFilter:LinearFilter,magFilter:LinearFilter,generateMipmaps:!1}),Re.map.texture.name=Me.name+".shadowMap",Re.map.depthTexture=new DepthTexture(y.x,y.y,FloatType),Re.map.depthTexture.name=Me.name+".shadowMapDepth",Re.map.depthTexture.format=DepthFormat,Re.map.depthTexture.compareFunction=null,Re.map.depthTexture.minFilter=NearestFilter,Re.map.depthTexture.magFilter=NearestFilter}else{Me.isPointLight?(Re.map=new WebGLCubeRenderTarget(y.x),Re.map.depthTexture=new CubeDepthTexture(y.x,UnsignedIntType)):(Re.map=new WebGLRenderTarget(y.x,y.y),Re.map.depthTexture=new DepthTexture(y.x,y.y,UnsignedIntType)),Re.map.depthTexture.name=Me.name+".shadowMap",Re.map.depthTexture.format=DepthFormat;const oe=s.state.buffers.depth.getReversed();this.type===PCFShadowMap?(Re.map.depthTexture.compareFunction=oe?GreaterEqualCompare:LessEqualCompare,Re.map.depthTexture.minFilter=LinearFilter,Re.map.depthTexture.magFilter=LinearFilter):(Re.map.depthTexture.compareFunction=null,Re.map.depthTexture.minFilter=NearestFilter,Re.map.depthTexture.magFilter=NearestFilter)}Re.camera.updateProjectionMatrix()}const Se=Re.map.isWebGLCubeRenderTarget?6:1;for(let oe=0;oe<Se;oe++){if(Re.map.isWebGLCubeRenderTarget)s.setRenderTarget(Re.map,oe),s.clear();else{oe===0&&(s.setRenderTarget(Re.map),s.clear());const ae=Re.getViewport(oe);A.set(S.x*ae.x,S.y*ae.y,S.x*ae.z,S.y*ae.w),Ee.viewport(A)}if(Me.isPointLight){const ae=Re.camera,be=Re.matrix,he=Me.distance||ae.far;he!==ae.far&&(ae.far=he,ae.updateProjectionMatrix()),_lightPositionWorld.setFromMatrixPosition(Me.matrixWorld),ae.position.copy(_lightPositionWorld),_lookTarget.copy(ae.position),_lookTarget.add(_cubeDirections[oe]),ae.up.copy(_cubeUps[oe]),ae.lookAt(_lookTarget),ae.updateMatrixWorld(),be.makeTranslation(-_lightPositionWorld.x,-_lightPositionWorld.y,-_lightPositionWorld.z),_projScreenMatrix.multiplyMatrices(ae.projectionMatrix,ae.matrixWorldInverse),Re._frustum.setFromProjectionMatrix(_projScreenMatrix,ae.coordinateSystem,ae.reversedDepth)}else Re.updateMatrices(Me);f=Re.getFrustum(),K(te,de,Re.camera,Me,this.type)}Re.isPointLightShadow!==!0&&this.type===VSMShadowMap&&G(Re,de),Re.needsUpdate=!1}U=this.type,z.needsUpdate=!1,s.setRenderTarget(se,ne,ge)};function G(J,te){const de=n.update(H);N.defines.VSM_SAMPLES!==J.blurSamples&&(N.defines.VSM_SAMPLES=J.blurSamples,L.defines.VSM_SAMPLES=J.blurSamples,N.needsUpdate=!0,L.needsUpdate=!0),J.mapPass===null&&(J.mapPass=new WebGLRenderTarget(y.x,y.y,{format:RGFormat,type:HalfFloatType})),N.uniforms.shadow_pass.value=J.map.depthTexture,N.uniforms.resolution.value=J.mapSize,N.uniforms.radius.value=J.radius,s.setRenderTarget(J.mapPass),s.clear(),s.renderBufferDirect(te,null,de,N,H,null),L.uniforms.shadow_pass.value=J.mapPass.texture,L.uniforms.resolution.value=J.mapSize,L.uniforms.radius.value=J.radius,s.setRenderTarget(J.map),s.clear(),s.renderBufferDirect(te,null,de,L,H,null)}function Y(J,te,de,se){let ne=null;const ge=de.isPointLight===!0?J.customDistanceMaterial:J.customDepthMaterial;if(ge!==void 0)ne=ge;else if(ne=de.isPointLight===!0?C:w,s.localClippingEnabled&&te.clipShadows===!0&&Array.isArray(te.clippingPlanes)&&te.clippingPlanes.length!==0||te.displacementMap&&te.displacementScale!==0||te.alphaMap&&te.alphaTest>0||te.map&&te.alphaTest>0||te.alphaToCoverage===!0){const Ee=ne.uuid,we=te.uuid;let Ie=T[Ee];Ie===void 0&&(Ie={},T[Ee]=Ie);let Be=Ie[we];Be===void 0&&(Be=ne.clone(),Ie[we]=Be,te.addEventListener("dispose",Z)),ne=Be}if(ne.visible=te.visible,ne.wireframe=te.wireframe,se===VSMShadowMap?ne.side=te.shadowSide!==null?te.shadowSide:te.side:ne.side=te.shadowSide!==null?te.shadowSide:I[te.side],ne.alphaMap=te.alphaMap,ne.alphaTest=te.alphaToCoverage===!0?.5:te.alphaTest,ne.map=te.map,ne.clipShadows=te.clipShadows,ne.clippingPlanes=te.clippingPlanes,ne.clipIntersection=te.clipIntersection,ne.displacementMap=te.displacementMap,ne.displacementScale=te.displacementScale,ne.displacementBias=te.displacementBias,ne.wireframeLinewidth=te.wireframeLinewidth,ne.linewidth=te.linewidth,de.isPointLight===!0&&ne.isMeshDistanceMaterial===!0){const Ee=s.properties.get(ne);Ee.light=de}return ne}function K(J,te,de,se,ne){if(J.visible===!1)return;if(J.layers.test(te.layers)&&(J.isMesh||J.isLine||J.isPoints)&&(J.castShadow||J.receiveShadow&&ne===VSMShadowMap)&&(!J.frustumCulled||f.intersectsObject(J))){J.modelViewMatrix.multiplyMatrices(de.matrixWorldInverse,J.matrixWorld);const we=n.update(J),Ie=J.material;if(Array.isArray(Ie)){const Be=we.groups;for(let Me=0,Re=Be.length;Me<Re;Me++){const Te=Be[Me],Se=Ie[Te.materialIndex];if(Se&&Se.visible){const oe=Y(J,Se,se,ne);J.onBeforeShadow(s,J,te,de,we,oe,Te),s.renderBufferDirect(de,null,we,oe,J,Te),J.onAfterShadow(s,J,te,de,we,oe,Te)}}}else if(Ie.visible){const Be=Y(J,Ie,se,ne);J.onBeforeShadow(s,J,te,de,we,Be,null),s.renderBufferDirect(de,null,we,Be,J,null),J.onAfterShadow(s,J,te,de,we,Be,null)}}const Ee=J.children;for(let we=0,Ie=Ee.length;we<Ie;we++)K(Ee[we],te,de,se,ne)}function Z(J){J.target.removeEventListener("dispose",Z);for(const de in T){const se=T[de],ne=J.target.uuid;ne in se&&(se[ne].dispose(),delete se[ne])}}}const reversedFuncs={[NeverDepth]:AlwaysDepth,[LessDepth]:GreaterDepth,[EqualDepth]:NotEqualDepth,[LessEqualDepth]:GreaterEqualDepth,[AlwaysDepth]:NeverDepth,[GreaterDepth]:LessDepth,[NotEqualDepth]:EqualDepth,[GreaterEqualDepth]:LessEqualDepth};function WebGLState(s,n){function u(){let ht=!1;const Tt=new Vector4;let Kt=null;const _n=new Vector4(0,0,0,0);return{setMask:function(Ht){Kt!==Ht&&!ht&&(s.colorMask(Ht,Ht,Ht,Ht),Kt=Ht)},setLocked:function(Ht){ht=Ht},setClear:function(Ht,Ot,cn,Mn,In){In===!0&&(Ht*=Mn,Ot*=Mn,cn*=Mn),Tt.set(Ht,Ot,cn,Mn),_n.equals(Tt)===!1&&(s.clearColor(Ht,Ot,cn,Mn),_n.copy(Tt))},reset:function(){ht=!1,Kt=null,_n.set(-1,0,0,0)}}}function f(){let ht=!1,Tt=!1,Kt=null,_n=null,Ht=null;return{setReversed:function(Ot){if(Tt!==Ot){const cn=n.get("EXT_clip_control");Ot?cn.clipControlEXT(cn.LOWER_LEFT_EXT,cn.ZERO_TO_ONE_EXT):cn.clipControlEXT(cn.LOWER_LEFT_EXT,cn.NEGATIVE_ONE_TO_ONE_EXT),Tt=Ot;const Mn=Ht;Ht=null,this.setClear(Mn)}},getReversed:function(){return Tt},setTest:function(Ot){Ot?_e(s.DEPTH_TEST):ke(s.DEPTH_TEST)},setMask:function(Ot){Kt!==Ot&&!ht&&(s.depthMask(Ot),Kt=Ot)},setFunc:function(Ot){if(Tt&&(Ot=reversedFuncs[Ot]),_n!==Ot){switch(Ot){case NeverDepth:s.depthFunc(s.NEVER);break;case AlwaysDepth:s.depthFunc(s.ALWAYS);break;case LessDepth:s.depthFunc(s.LESS);break;case LessEqualDepth:s.depthFunc(s.LEQUAL);break;case EqualDepth:s.depthFunc(s.EQUAL);break;case GreaterEqualDepth:s.depthFunc(s.GEQUAL);break;case GreaterDepth:s.depthFunc(s.GREATER);break;case NotEqualDepth:s.depthFunc(s.NOTEQUAL);break;default:s.depthFunc(s.LEQUAL)}_n=Ot}},setLocked:function(Ot){ht=Ot},setClear:function(Ot){Ht!==Ot&&(Tt&&(Ot=1-Ot),s.clearDepth(Ot),Ht=Ot)},reset:function(){ht=!1,Kt=null,_n=null,Ht=null,Tt=!1}}}function y(){let ht=!1,Tt=null,Kt=null,_n=null,Ht=null,Ot=null,cn=null,Mn=null,In=null;return{setTest:function(On){ht||(On?_e(s.STENCIL_TEST):ke(s.STENCIL_TEST))},setMask:function(On){Tt!==On&&!ht&&(s.stencilMask(On),Tt=On)},setFunc:function(On,rr,Ar){(Kt!==On||_n!==rr||Ht!==Ar)&&(s.stencilFunc(On,rr,Ar),Kt=On,_n=rr,Ht=Ar)},setOp:function(On,rr,Ar){(Ot!==On||cn!==rr||Mn!==Ar)&&(s.stencilOp(On,rr,Ar),Ot=On,cn=rr,Mn=Ar)},setLocked:function(On){ht=On},setClear:function(On){In!==On&&(s.clearStencil(On),In=On)},reset:function(){ht=!1,Tt=null,Kt=null,_n=null,Ht=null,Ot=null,cn=null,Mn=null,In=null}}}const S=new u,A=new f,w=new y,C=new WeakMap,T=new WeakMap;let R={},I={},N=new WeakMap,L=[],F=null,H=!1,z=null,U=null,G=null,Y=null,K=null,Z=null,J=null,te=new Color(0,0,0),de=0,se=!1,ne=null,ge=null,Ee=null,we=null,Ie=null;const Be=s.getParameter(s.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Me=!1,Re=0;const Te=s.getParameter(s.VERSION);Te.indexOf("WebGL")!==-1?(Re=parseFloat(/^WebGL (\d)/.exec(Te)[1]),Me=Re>=1):Te.indexOf("OpenGL ES")!==-1&&(Re=parseFloat(/^OpenGL ES (\d)/.exec(Te)[1]),Me=Re>=2);let Se=null,oe={};const ae=s.getParameter(s.SCISSOR_BOX),be=s.getParameter(s.VIEWPORT),he=new Vector4().fromArray(ae),ue=new Vector4().fromArray(be);function ye(ht,Tt,Kt,_n){const Ht=new Uint8Array(4),Ot=s.createTexture();s.bindTexture(ht,Ot),s.texParameteri(ht,s.TEXTURE_MIN_FILTER,s.NEAREST),s.texParameteri(ht,s.TEXTURE_MAG_FILTER,s.NEAREST);for(let cn=0;cn<Kt;cn++)ht===s.TEXTURE_3D||ht===s.TEXTURE_2D_ARRAY?s.texImage3D(Tt,0,s.RGBA,1,1,_n,0,s.RGBA,s.UNSIGNED_BYTE,Ht):s.texImage2D(Tt+cn,0,s.RGBA,1,1,0,s.RGBA,s.UNSIGNED_BYTE,Ht);return Ot}const ce={};ce[s.TEXTURE_2D]=ye(s.TEXTURE_2D,s.TEXTURE_2D,1),ce[s.TEXTURE_CUBE_MAP]=ye(s.TEXTURE_CUBE_MAP,s.TEXTURE_CUBE_MAP_POSITIVE_X,6),ce[s.TEXTURE_2D_ARRAY]=ye(s.TEXTURE_2D_ARRAY,s.TEXTURE_2D_ARRAY,1,1),ce[s.TEXTURE_3D]=ye(s.TEXTURE_3D,s.TEXTURE_3D,1,1),S.setClear(0,0,0,1),A.setClear(1),w.setClear(0),_e(s.DEPTH_TEST),A.setFunc(LessEqualDepth),Je(!1),ot(CullFaceBack),_e(s.CULL_FACE),He(NoBlending);function _e(ht){R[ht]!==!0&&(s.enable(ht),R[ht]=!0)}function ke(ht){R[ht]!==!1&&(s.disable(ht),R[ht]=!1)}function Pe(ht,Tt){return I[ht]!==Tt?(s.bindFramebuffer(ht,Tt),I[ht]=Tt,ht===s.DRAW_FRAMEBUFFER&&(I[s.FRAMEBUFFER]=Tt),ht===s.FRAMEBUFFER&&(I[s.DRAW_FRAMEBUFFER]=Tt),!0):!1}function $e(ht,Tt){let Kt=L,_n=!1;if(ht){Kt=N.get(Tt),Kt===void 0&&(Kt=[],N.set(Tt,Kt));const Ht=ht.textures;if(Kt.length!==Ht.length||Kt[0]!==s.COLOR_ATTACHMENT0){for(let Ot=0,cn=Ht.length;Ot<cn;Ot++)Kt[Ot]=s.COLOR_ATTACHMENT0+Ot;Kt.length=Ht.length,_n=!0}}else Kt[0]!==s.BACK&&(Kt[0]=s.BACK,_n=!0);_n&&s.drawBuffers(Kt)}function xe(ht){return F!==ht?(s.useProgram(ht),F=ht,!0):!1}const Ne={[AddEquation]:s.FUNC_ADD,[SubtractEquation]:s.FUNC_SUBTRACT,[ReverseSubtractEquation]:s.FUNC_REVERSE_SUBTRACT};Ne[MinEquation]=s.MIN,Ne[MaxEquation]=s.MAX;const je={[ZeroFactor]:s.ZERO,[OneFactor]:s.ONE,[SrcColorFactor]:s.SRC_COLOR,[SrcAlphaFactor]:s.SRC_ALPHA,[SrcAlphaSaturateFactor]:s.SRC_ALPHA_SATURATE,[DstColorFactor]:s.DST_COLOR,[DstAlphaFactor]:s.DST_ALPHA,[OneMinusSrcColorFactor]:s.ONE_MINUS_SRC_COLOR,[OneMinusSrcAlphaFactor]:s.ONE_MINUS_SRC_ALPHA,[OneMinusDstColorFactor]:s.ONE_MINUS_DST_COLOR,[OneMinusDstAlphaFactor]:s.ONE_MINUS_DST_ALPHA,[ConstantColorFactor]:s.CONSTANT_COLOR,[OneMinusConstantColorFactor]:s.ONE_MINUS_CONSTANT_COLOR,[ConstantAlphaFactor]:s.CONSTANT_ALPHA,[OneMinusConstantAlphaFactor]:s.ONE_MINUS_CONSTANT_ALPHA};function He(ht,Tt,Kt,_n,Ht,Ot,cn,Mn,In,On){if(ht===NoBlending){H===!0&&(ke(s.BLEND),H=!1);return}if(H===!1&&(_e(s.BLEND),H=!0),ht!==CustomBlending){if(ht!==z||On!==se){if((U!==AddEquation||K!==AddEquation)&&(s.blendEquation(s.FUNC_ADD),U=AddEquation,K=AddEquation),On)switch(ht){case NormalBlending:s.blendFuncSeparate(s.ONE,s.ONE_MINUS_SRC_ALPHA,s.ONE,s.ONE_MINUS_SRC_ALPHA);break;case AdditiveBlending:s.blendFunc(s.ONE,s.ONE);break;case SubtractiveBlending:s.blendFuncSeparate(s.ZERO,s.ONE_MINUS_SRC_COLOR,s.ZERO,s.ONE);break;case MultiplyBlending:s.blendFuncSeparate(s.DST_COLOR,s.ONE_MINUS_SRC_ALPHA,s.ZERO,s.ONE);break;default:error("WebGLState: Invalid blending: ",ht);break}else switch(ht){case NormalBlending:s.blendFuncSeparate(s.SRC_ALPHA,s.ONE_MINUS_SRC_ALPHA,s.ONE,s.ONE_MINUS_SRC_ALPHA);break;case AdditiveBlending:s.blendFuncSeparate(s.SRC_ALPHA,s.ONE,s.ONE,s.ONE);break;case SubtractiveBlending:error("WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case MultiplyBlending:error("WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:error("WebGLState: Invalid blending: ",ht);break}G=null,Y=null,Z=null,J=null,te.set(0,0,0),de=0,z=ht,se=On}return}Ht=Ht||Tt,Ot=Ot||Kt,cn=cn||_n,(Tt!==U||Ht!==K)&&(s.blendEquationSeparate(Ne[Tt],Ne[Ht]),U=Tt,K=Ht),(Kt!==G||_n!==Y||Ot!==Z||cn!==J)&&(s.blendFuncSeparate(je[Kt],je[_n],je[Ot],je[cn]),G=Kt,Y=_n,Z=Ot,J=cn),(Mn.equals(te)===!1||In!==de)&&(s.blendColor(Mn.r,Mn.g,Mn.b,In),te.copy(Mn),de=In),z=ht,se=!1}function Ye(ht,Tt){ht.side===DoubleSide?ke(s.CULL_FACE):_e(s.CULL_FACE);let Kt=ht.side===BackSide;Tt&&(Kt=!Kt),Je(Kt),ht.blending===NormalBlending&&ht.transparent===!1?He(NoBlending):He(ht.blending,ht.blendEquation,ht.blendSrc,ht.blendDst,ht.blendEquationAlpha,ht.blendSrcAlpha,ht.blendDstAlpha,ht.blendColor,ht.blendAlpha,ht.premultipliedAlpha),A.setFunc(ht.depthFunc),A.setTest(ht.depthTest),A.setMask(ht.depthWrite),S.setMask(ht.colorWrite);const _n=ht.stencilWrite;w.setTest(_n),_n&&(w.setMask(ht.stencilWriteMask),w.setFunc(ht.stencilFunc,ht.stencilRef,ht.stencilFuncMask),w.setOp(ht.stencilFail,ht.stencilZFail,ht.stencilZPass)),pt(ht.polygonOffset,ht.polygonOffsetFactor,ht.polygonOffsetUnits),ht.alphaToCoverage===!0?_e(s.SAMPLE_ALPHA_TO_COVERAGE):ke(s.SAMPLE_ALPHA_TO_COVERAGE)}function Je(ht){ne!==ht&&(ht?s.frontFace(s.CW):s.frontFace(s.CCW),ne=ht)}function ot(ht){ht!==CullFaceNone?(_e(s.CULL_FACE),ht!==ge&&(ht===CullFaceBack?s.cullFace(s.BACK):ht===CullFaceFront?s.cullFace(s.FRONT):s.cullFace(s.FRONT_AND_BACK))):ke(s.CULL_FACE),ge=ht}function ze(ht){ht!==Ee&&(Me&&s.lineWidth(ht),Ee=ht)}function pt(ht,Tt,Kt){ht?(_e(s.POLYGON_OFFSET_FILL),(we!==Tt||Ie!==Kt)&&(s.polygonOffset(Tt,Kt),we=Tt,Ie=Kt)):ke(s.POLYGON_OFFSET_FILL)}function yt(ht){ht?_e(s.SCISSOR_TEST):ke(s.SCISSOR_TEST)}function ut(ht){ht===void 0&&(ht=s.TEXTURE0+Be-1),Se!==ht&&(s.activeTexture(ht),Se=ht)}function Et(ht,Tt,Kt){Kt===void 0&&(Se===null?Kt=s.TEXTURE0+Be-1:Kt=Se);let _n=oe[Kt];_n===void 0&&(_n={type:void 0,texture:void 0},oe[Kt]=_n),(_n.type!==ht||_n.texture!==Tt)&&(Se!==Kt&&(s.activeTexture(Kt),Se=Kt),s.bindTexture(ht,Tt||ce[ht]),_n.type=ht,_n.texture=Tt)}function qe(){const ht=oe[Se];ht!==void 0&&ht.type!==void 0&&(s.bindTexture(ht.type,null),ht.type=void 0,ht.texture=void 0)}function Le(){try{s.compressedTexImage2D(...arguments)}catch(ht){error("WebGLState:",ht)}}function lt(){try{s.compressedTexImage3D(...arguments)}catch(ht){error("WebGLState:",ht)}}function We(){try{s.texSubImage2D(...arguments)}catch(ht){error("WebGLState:",ht)}}function Qe(){try{s.texSubImage3D(...arguments)}catch(ht){error("WebGLState:",ht)}}function at(){try{s.compressedTexSubImage2D(...arguments)}catch(ht){error("WebGLState:",ht)}}function St(){try{s.compressedTexSubImage3D(...arguments)}catch(ht){error("WebGLState:",ht)}}function Ct(){try{s.texStorage2D(...arguments)}catch(ht){error("WebGLState:",ht)}}function jt(){try{s.texStorage3D(...arguments)}catch(ht){error("WebGLState:",ht)}}function Gt(){try{s.texImage2D(...arguments)}catch(ht){error("WebGLState:",ht)}}function Ft(){try{s.texImage3D(...arguments)}catch(ht){error("WebGLState:",ht)}}function ct(ht){he.equals(ht)===!1&&(s.scissor(ht.x,ht.y,ht.z,ht.w),he.copy(ht))}function st(ht){ue.equals(ht)===!1&&(s.viewport(ht.x,ht.y,ht.z,ht.w),ue.copy(ht))}function nt(ht,Tt){let Kt=T.get(Tt);Kt===void 0&&(Kt=new WeakMap,T.set(Tt,Kt));let _n=Kt.get(ht);_n===void 0&&(_n=s.getUniformBlockIndex(Tt,ht.name),Kt.set(ht,_n))}function At(ht,Tt){const _n=T.get(Tt).get(ht);C.get(Tt)!==_n&&(s.uniformBlockBinding(Tt,_n,ht.__bindingPointIndex),C.set(Tt,_n))}function Yt(){s.disable(s.BLEND),s.disable(s.CULL_FACE),s.disable(s.DEPTH_TEST),s.disable(s.POLYGON_OFFSET_FILL),s.disable(s.SCISSOR_TEST),s.disable(s.STENCIL_TEST),s.disable(s.SAMPLE_ALPHA_TO_COVERAGE),s.blendEquation(s.FUNC_ADD),s.blendFunc(s.ONE,s.ZERO),s.blendFuncSeparate(s.ONE,s.ZERO,s.ONE,s.ZERO),s.blendColor(0,0,0,0),s.colorMask(!0,!0,!0,!0),s.clearColor(0,0,0,0),s.depthMask(!0),s.depthFunc(s.LESS),A.setReversed(!1),s.clearDepth(1),s.stencilMask(4294967295),s.stencilFunc(s.ALWAYS,0,4294967295),s.stencilOp(s.KEEP,s.KEEP,s.KEEP),s.clearStencil(0),s.cullFace(s.BACK),s.frontFace(s.CCW),s.polygonOffset(0,0),s.activeTexture(s.TEXTURE0),s.bindFramebuffer(s.FRAMEBUFFER,null),s.bindFramebuffer(s.DRAW_FRAMEBUFFER,null),s.bindFramebuffer(s.READ_FRAMEBUFFER,null),s.useProgram(null),s.lineWidth(1),s.scissor(0,0,s.canvas.width,s.canvas.height),s.viewport(0,0,s.canvas.width,s.canvas.height),R={},Se=null,oe={},I={},N=new WeakMap,L=[],F=null,H=!1,z=null,U=null,G=null,Y=null,K=null,Z=null,J=null,te=new Color(0,0,0),de=0,se=!1,ne=null,ge=null,Ee=null,we=null,Ie=null,he.set(0,0,s.canvas.width,s.canvas.height),ue.set(0,0,s.canvas.width,s.canvas.height),S.reset(),A.reset(),w.reset()}return{buffers:{color:S,depth:A,stencil:w},enable:_e,disable:ke,bindFramebuffer:Pe,drawBuffers:$e,useProgram:xe,setBlending:He,setMaterial:Ye,setFlipSided:Je,setCullFace:ot,setLineWidth:ze,setPolygonOffset:pt,setScissorTest:yt,activeTexture:ut,bindTexture:Et,unbindTexture:qe,compressedTexImage2D:Le,compressedTexImage3D:lt,texImage2D:Gt,texImage3D:Ft,updateUBOMapping:nt,uniformBlockBinding:At,texStorage2D:Ct,texStorage3D:jt,texSubImage2D:We,texSubImage3D:Qe,compressedTexSubImage2D:at,compressedTexSubImage3D:St,scissor:ct,viewport:st,reset:Yt}}function WebGLTextures(s,n,u,f,y,S,A){const w=n.has("WEBGL_multisampled_render_to_texture")?n.get("WEBGL_multisampled_render_to_texture"):null,C=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),T=new Vector2,R=new WeakMap;let I;const N=new WeakMap;let L=!1;try{L=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function F(qe,Le){return L?new OffscreenCanvas(qe,Le):createElementNS("canvas")}function H(qe,Le,lt){let We=1;const Qe=Et(qe);if((Qe.width>lt||Qe.height>lt)&&(We=lt/Math.max(Qe.width,Qe.height)),We<1)if(typeof HTMLImageElement<"u"&&qe instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&qe instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&qe instanceof ImageBitmap||typeof VideoFrame<"u"&&qe instanceof VideoFrame){const at=Math.floor(We*Qe.width),St=Math.floor(We*Qe.height);I===void 0&&(I=F(at,St));const Ct=Le?F(at,St):I;return Ct.width=at,Ct.height=St,Ct.getContext("2d").drawImage(qe,0,0,at,St),warn("WebGLRenderer: Texture has been resized from ("+Qe.width+"x"+Qe.height+") to ("+at+"x"+St+")."),Ct}else return"data"in qe&&warn("WebGLRenderer: Image in DataTexture is too big ("+Qe.width+"x"+Qe.height+")."),qe;return qe}function z(qe){return qe.generateMipmaps}function U(qe){s.generateMipmap(qe)}function G(qe){return qe.isWebGLCubeRenderTarget?s.TEXTURE_CUBE_MAP:qe.isWebGL3DRenderTarget?s.TEXTURE_3D:qe.isWebGLArrayRenderTarget||qe.isCompressedArrayTexture?s.TEXTURE_2D_ARRAY:s.TEXTURE_2D}function Y(qe,Le,lt,We,Qe=!1){if(qe!==null){if(s[qe]!==void 0)return s[qe];warn("WebGLRenderer: Attempt to use non-existing WebGL internal format '"+qe+"'")}let at=Le;if(Le===s.RED&&(lt===s.FLOAT&&(at=s.R32F),lt===s.HALF_FLOAT&&(at=s.R16F),lt===s.UNSIGNED_BYTE&&(at=s.R8)),Le===s.RED_INTEGER&&(lt===s.UNSIGNED_BYTE&&(at=s.R8UI),lt===s.UNSIGNED_SHORT&&(at=s.R16UI),lt===s.UNSIGNED_INT&&(at=s.R32UI),lt===s.BYTE&&(at=s.R8I),lt===s.SHORT&&(at=s.R16I),lt===s.INT&&(at=s.R32I)),Le===s.RG&&(lt===s.FLOAT&&(at=s.RG32F),lt===s.HALF_FLOAT&&(at=s.RG16F),lt===s.UNSIGNED_BYTE&&(at=s.RG8)),Le===s.RG_INTEGER&&(lt===s.UNSIGNED_BYTE&&(at=s.RG8UI),lt===s.UNSIGNED_SHORT&&(at=s.RG16UI),lt===s.UNSIGNED_INT&&(at=s.RG32UI),lt===s.BYTE&&(at=s.RG8I),lt===s.SHORT&&(at=s.RG16I),lt===s.INT&&(at=s.RG32I)),Le===s.RGB_INTEGER&&(lt===s.UNSIGNED_BYTE&&(at=s.RGB8UI),lt===s.UNSIGNED_SHORT&&(at=s.RGB16UI),lt===s.UNSIGNED_INT&&(at=s.RGB32UI),lt===s.BYTE&&(at=s.RGB8I),lt===s.SHORT&&(at=s.RGB16I),lt===s.INT&&(at=s.RGB32I)),Le===s.RGBA_INTEGER&&(lt===s.UNSIGNED_BYTE&&(at=s.RGBA8UI),lt===s.UNSIGNED_SHORT&&(at=s.RGBA16UI),lt===s.UNSIGNED_INT&&(at=s.RGBA32UI),lt===s.BYTE&&(at=s.RGBA8I),lt===s.SHORT&&(at=s.RGBA16I),lt===s.INT&&(at=s.RGBA32I)),Le===s.RGB&&(lt===s.UNSIGNED_INT_5_9_9_9_REV&&(at=s.RGB9_E5),lt===s.UNSIGNED_INT_10F_11F_11F_REV&&(at=s.R11F_G11F_B10F)),Le===s.RGBA){const St=Qe?LinearTransfer:ColorManagement.getTransfer(We);lt===s.FLOAT&&(at=s.RGBA32F),lt===s.HALF_FLOAT&&(at=s.RGBA16F),lt===s.UNSIGNED_BYTE&&(at=St===SRGBTransfer?s.SRGB8_ALPHA8:s.RGBA8),lt===s.UNSIGNED_SHORT_4_4_4_4&&(at=s.RGBA4),lt===s.UNSIGNED_SHORT_5_5_5_1&&(at=s.RGB5_A1)}return(at===s.R16F||at===s.R32F||at===s.RG16F||at===s.RG32F||at===s.RGBA16F||at===s.RGBA32F)&&n.get("EXT_color_buffer_float"),at}function K(qe,Le){let lt;return qe?Le===null||Le===UnsignedIntType||Le===UnsignedInt248Type?lt=s.DEPTH24_STENCIL8:Le===FloatType?lt=s.DEPTH32F_STENCIL8:Le===UnsignedShortType&&(lt=s.DEPTH24_STENCIL8,warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):Le===null||Le===UnsignedIntType||Le===UnsignedInt248Type?lt=s.DEPTH_COMPONENT24:Le===FloatType?lt=s.DEPTH_COMPONENT32F:Le===UnsignedShortType&&(lt=s.DEPTH_COMPONENT16),lt}function Z(qe,Le){return z(qe)===!0||qe.isFramebufferTexture&&qe.minFilter!==NearestFilter&&qe.minFilter!==LinearFilter?Math.log2(Math.max(Le.width,Le.height))+1:qe.mipmaps!==void 0&&qe.mipmaps.length>0?qe.mipmaps.length:qe.isCompressedTexture&&Array.isArray(qe.image)?Le.mipmaps.length:1}function J(qe){const Le=qe.target;Le.removeEventListener("dispose",J),de(Le),Le.isVideoTexture&&R.delete(Le)}function te(qe){const Le=qe.target;Le.removeEventListener("dispose",te),ne(Le)}function de(qe){const Le=f.get(qe);if(Le.__webglInit===void 0)return;const lt=qe.source,We=N.get(lt);if(We){const Qe=We[Le.__cacheKey];Qe.usedTimes--,Qe.usedTimes===0&&se(qe),Object.keys(We).length===0&&N.delete(lt)}f.remove(qe)}function se(qe){const Le=f.get(qe);s.deleteTexture(Le.__webglTexture);const lt=qe.source,We=N.get(lt);delete We[Le.__cacheKey],A.memory.textures--}function ne(qe){const Le=f.get(qe);if(qe.depthTexture&&(qe.depthTexture.dispose(),f.remove(qe.depthTexture)),qe.isWebGLCubeRenderTarget)for(let We=0;We<6;We++){if(Array.isArray(Le.__webglFramebuffer[We]))for(let Qe=0;Qe<Le.__webglFramebuffer[We].length;Qe++)s.deleteFramebuffer(Le.__webglFramebuffer[We][Qe]);else s.deleteFramebuffer(Le.__webglFramebuffer[We]);Le.__webglDepthbuffer&&s.deleteRenderbuffer(Le.__webglDepthbuffer[We])}else{if(Array.isArray(Le.__webglFramebuffer))for(let We=0;We<Le.__webglFramebuffer.length;We++)s.deleteFramebuffer(Le.__webglFramebuffer[We]);else s.deleteFramebuffer(Le.__webglFramebuffer);if(Le.__webglDepthbuffer&&s.deleteRenderbuffer(Le.__webglDepthbuffer),Le.__webglMultisampledFramebuffer&&s.deleteFramebuffer(Le.__webglMultisampledFramebuffer),Le.__webglColorRenderbuffer)for(let We=0;We<Le.__webglColorRenderbuffer.length;We++)Le.__webglColorRenderbuffer[We]&&s.deleteRenderbuffer(Le.__webglColorRenderbuffer[We]);Le.__webglDepthRenderbuffer&&s.deleteRenderbuffer(Le.__webglDepthRenderbuffer)}const lt=qe.textures;for(let We=0,Qe=lt.length;We<Qe;We++){const at=f.get(lt[We]);at.__webglTexture&&(s.deleteTexture(at.__webglTexture),A.memory.textures--),f.remove(lt[We])}f.remove(qe)}let ge=0;function Ee(){ge=0}function we(){const qe=ge;return qe>=y.maxTextures&&warn("WebGLTextures: Trying to use "+qe+" texture units while this GPU supports only "+y.maxTextures),ge+=1,qe}function Ie(qe){const Le=[];return Le.push(qe.wrapS),Le.push(qe.wrapT),Le.push(qe.wrapR||0),Le.push(qe.magFilter),Le.push(qe.minFilter),Le.push(qe.anisotropy),Le.push(qe.internalFormat),Le.push(qe.format),Le.push(qe.type),Le.push(qe.generateMipmaps),Le.push(qe.premultiplyAlpha),Le.push(qe.flipY),Le.push(qe.unpackAlignment),Le.push(qe.colorSpace),Le.join()}function Be(qe,Le){const lt=f.get(qe);if(qe.isVideoTexture&&yt(qe),qe.isRenderTargetTexture===!1&&qe.isExternalTexture!==!0&&qe.version>0&&lt.__version!==qe.version){const We=qe.image;if(We===null)warn("WebGLRenderer: Texture marked for update but no image data found.");else if(We.complete===!1)warn("WebGLRenderer: Texture marked for update but image is incomplete");else{ce(lt,qe,Le);return}}else qe.isExternalTexture&&(lt.__webglTexture=qe.sourceTexture?qe.sourceTexture:null);u.bindTexture(s.TEXTURE_2D,lt.__webglTexture,s.TEXTURE0+Le)}function Me(qe,Le){const lt=f.get(qe);if(qe.isRenderTargetTexture===!1&&qe.version>0&&lt.__version!==qe.version){ce(lt,qe,Le);return}else qe.isExternalTexture&&(lt.__webglTexture=qe.sourceTexture?qe.sourceTexture:null);u.bindTexture(s.TEXTURE_2D_ARRAY,lt.__webglTexture,s.TEXTURE0+Le)}function Re(qe,Le){const lt=f.get(qe);if(qe.isRenderTargetTexture===!1&&qe.version>0&&lt.__version!==qe.version){ce(lt,qe,Le);return}u.bindTexture(s.TEXTURE_3D,lt.__webglTexture,s.TEXTURE0+Le)}function Te(qe,Le){const lt=f.get(qe);if(qe.isCubeDepthTexture!==!0&&qe.version>0&&lt.__version!==qe.version){_e(lt,qe,Le);return}u.bindTexture(s.TEXTURE_CUBE_MAP,lt.__webglTexture,s.TEXTURE0+Le)}const Se={[RepeatWrapping]:s.REPEAT,[ClampToEdgeWrapping]:s.CLAMP_TO_EDGE,[MirroredRepeatWrapping]:s.MIRRORED_REPEAT},oe={[NearestFilter]:s.NEAREST,[NearestMipmapNearestFilter]:s.NEAREST_MIPMAP_NEAREST,[NearestMipmapLinearFilter]:s.NEAREST_MIPMAP_LINEAR,[LinearFilter]:s.LINEAR,[LinearMipmapNearestFilter]:s.LINEAR_MIPMAP_NEAREST,[LinearMipmapLinearFilter]:s.LINEAR_MIPMAP_LINEAR},ae={[NeverCompare]:s.NEVER,[AlwaysCompare]:s.ALWAYS,[LessCompare]:s.LESS,[LessEqualCompare]:s.LEQUAL,[EqualCompare]:s.EQUAL,[GreaterEqualCompare]:s.GEQUAL,[GreaterCompare]:s.GREATER,[NotEqualCompare]:s.NOTEQUAL};function be(qe,Le){if(Le.type===FloatType&&n.has("OES_texture_float_linear")===!1&&(Le.magFilter===LinearFilter||Le.magFilter===LinearMipmapNearestFilter||Le.magFilter===NearestMipmapLinearFilter||Le.magFilter===LinearMipmapLinearFilter||Le.minFilter===LinearFilter||Le.minFilter===LinearMipmapNearestFilter||Le.minFilter===NearestMipmapLinearFilter||Le.minFilter===LinearMipmapLinearFilter)&&warn("WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),s.texParameteri(qe,s.TEXTURE_WRAP_S,Se[Le.wrapS]),s.texParameteri(qe,s.TEXTURE_WRAP_T,Se[Le.wrapT]),(qe===s.TEXTURE_3D||qe===s.TEXTURE_2D_ARRAY)&&s.texParameteri(qe,s.TEXTURE_WRAP_R,Se[Le.wrapR]),s.texParameteri(qe,s.TEXTURE_MAG_FILTER,oe[Le.magFilter]),s.texParameteri(qe,s.TEXTURE_MIN_FILTER,oe[Le.minFilter]),Le.compareFunction&&(s.texParameteri(qe,s.TEXTURE_COMPARE_MODE,s.COMPARE_REF_TO_TEXTURE),s.texParameteri(qe,s.TEXTURE_COMPARE_FUNC,ae[Le.compareFunction])),n.has("EXT_texture_filter_anisotropic")===!0){if(Le.magFilter===NearestFilter||Le.minFilter!==NearestMipmapLinearFilter&&Le.minFilter!==LinearMipmapLinearFilter||Le.type===FloatType&&n.has("OES_texture_float_linear")===!1)return;if(Le.anisotropy>1||f.get(Le).__currentAnisotropy){const lt=n.get("EXT_texture_filter_anisotropic");s.texParameterf(qe,lt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Le.anisotropy,y.getMaxAnisotropy())),f.get(Le).__currentAnisotropy=Le.anisotropy}}}function he(qe,Le){let lt=!1;qe.__webglInit===void 0&&(qe.__webglInit=!0,Le.addEventListener("dispose",J));const We=Le.source;let Qe=N.get(We);Qe===void 0&&(Qe={},N.set(We,Qe));const at=Ie(Le);if(at!==qe.__cacheKey){Qe[at]===void 0&&(Qe[at]={texture:s.createTexture(),usedTimes:0},A.memory.textures++,lt=!0),Qe[at].usedTimes++;const St=Qe[qe.__cacheKey];St!==void 0&&(Qe[qe.__cacheKey].usedTimes--,St.usedTimes===0&&se(Le)),qe.__cacheKey=at,qe.__webglTexture=Qe[at].texture}return lt}function ue(qe,Le,lt){return Math.floor(Math.floor(qe/lt)/Le)}function ye(qe,Le,lt,We){const at=qe.updateRanges;if(at.length===0)u.texSubImage2D(s.TEXTURE_2D,0,0,0,Le.width,Le.height,lt,We,Le.data);else{at.sort((Ft,ct)=>Ft.start-ct.start);let St=0;for(let Ft=1;Ft<at.length;Ft++){const ct=at[St],st=at[Ft],nt=ct.start+ct.count,At=ue(st.start,Le.width,4),Yt=ue(ct.start,Le.width,4);st.start<=nt+1&&At===Yt&&ue(st.start+st.count-1,Le.width,4)===At?ct.count=Math.max(ct.count,st.start+st.count-ct.start):(++St,at[St]=st)}at.length=St+1;const Ct=s.getParameter(s.UNPACK_ROW_LENGTH),jt=s.getParameter(s.UNPACK_SKIP_PIXELS),Gt=s.getParameter(s.UNPACK_SKIP_ROWS);s.pixelStorei(s.UNPACK_ROW_LENGTH,Le.width);for(let Ft=0,ct=at.length;Ft<ct;Ft++){const st=at[Ft],nt=Math.floor(st.start/4),At=Math.ceil(st.count/4),Yt=nt%Le.width,ht=Math.floor(nt/Le.width),Tt=At,Kt=1;s.pixelStorei(s.UNPACK_SKIP_PIXELS,Yt),s.pixelStorei(s.UNPACK_SKIP_ROWS,ht),u.texSubImage2D(s.TEXTURE_2D,0,Yt,ht,Tt,Kt,lt,We,Le.data)}qe.clearUpdateRanges(),s.pixelStorei(s.UNPACK_ROW_LENGTH,Ct),s.pixelStorei(s.UNPACK_SKIP_PIXELS,jt),s.pixelStorei(s.UNPACK_SKIP_ROWS,Gt)}}function ce(qe,Le,lt){let We=s.TEXTURE_2D;(Le.isDataArrayTexture||Le.isCompressedArrayTexture)&&(We=s.TEXTURE_2D_ARRAY),Le.isData3DTexture&&(We=s.TEXTURE_3D);const Qe=he(qe,Le),at=Le.source;u.bindTexture(We,qe.__webglTexture,s.TEXTURE0+lt);const St=f.get(at);if(at.version!==St.__version||Qe===!0){u.activeTexture(s.TEXTURE0+lt);const Ct=ColorManagement.getPrimaries(ColorManagement.workingColorSpace),jt=Le.colorSpace===NoColorSpace?null:ColorManagement.getPrimaries(Le.colorSpace),Gt=Le.colorSpace===NoColorSpace||Ct===jt?s.NONE:s.BROWSER_DEFAULT_WEBGL;s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,Le.flipY),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Le.premultiplyAlpha),s.pixelStorei(s.UNPACK_ALIGNMENT,Le.unpackAlignment),s.pixelStorei(s.UNPACK_COLORSPACE_CONVERSION_WEBGL,Gt);let Ft=H(Le.image,!1,y.maxTextureSize);Ft=ut(Le,Ft);const ct=S.convert(Le.format,Le.colorSpace),st=S.convert(Le.type);let nt=Y(Le.internalFormat,ct,st,Le.colorSpace,Le.isVideoTexture);be(We,Le);let At;const Yt=Le.mipmaps,ht=Le.isVideoTexture!==!0,Tt=St.__version===void 0||Qe===!0,Kt=at.dataReady,_n=Z(Le,Ft);if(Le.isDepthTexture)nt=K(Le.format===DepthStencilFormat,Le.type),Tt&&(ht?u.texStorage2D(s.TEXTURE_2D,1,nt,Ft.width,Ft.height):u.texImage2D(s.TEXTURE_2D,0,nt,Ft.width,Ft.height,0,ct,st,null));else if(Le.isDataTexture)if(Yt.length>0){ht&&Tt&&u.texStorage2D(s.TEXTURE_2D,_n,nt,Yt[0].width,Yt[0].height);for(let Ht=0,Ot=Yt.length;Ht<Ot;Ht++)At=Yt[Ht],ht?Kt&&u.texSubImage2D(s.TEXTURE_2D,Ht,0,0,At.width,At.height,ct,st,At.data):u.texImage2D(s.TEXTURE_2D,Ht,nt,At.width,At.height,0,ct,st,At.data);Le.generateMipmaps=!1}else ht?(Tt&&u.texStorage2D(s.TEXTURE_2D,_n,nt,Ft.width,Ft.height),Kt&&ye(Le,Ft,ct,st)):u.texImage2D(s.TEXTURE_2D,0,nt,Ft.width,Ft.height,0,ct,st,Ft.data);else if(Le.isCompressedTexture)if(Le.isCompressedArrayTexture){ht&&Tt&&u.texStorage3D(s.TEXTURE_2D_ARRAY,_n,nt,Yt[0].width,Yt[0].height,Ft.depth);for(let Ht=0,Ot=Yt.length;Ht<Ot;Ht++)if(At=Yt[Ht],Le.format!==RGBAFormat)if(ct!==null)if(ht){if(Kt)if(Le.layerUpdates.size>0){const cn=getByteLength(At.width,At.height,Le.format,Le.type);for(const Mn of Le.layerUpdates){const In=At.data.subarray(Mn*cn/At.data.BYTES_PER_ELEMENT,(Mn+1)*cn/At.data.BYTES_PER_ELEMENT);u.compressedTexSubImage3D(s.TEXTURE_2D_ARRAY,Ht,0,0,Mn,At.width,At.height,1,ct,In)}Le.clearLayerUpdates()}else u.compressedTexSubImage3D(s.TEXTURE_2D_ARRAY,Ht,0,0,0,At.width,At.height,Ft.depth,ct,At.data)}else u.compressedTexImage3D(s.TEXTURE_2D_ARRAY,Ht,nt,At.width,At.height,Ft.depth,0,At.data,0,0);else warn("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else ht?Kt&&u.texSubImage3D(s.TEXTURE_2D_ARRAY,Ht,0,0,0,At.width,At.height,Ft.depth,ct,st,At.data):u.texImage3D(s.TEXTURE_2D_ARRAY,Ht,nt,At.width,At.height,Ft.depth,0,ct,st,At.data)}else{ht&&Tt&&u.texStorage2D(s.TEXTURE_2D,_n,nt,Yt[0].width,Yt[0].height);for(let Ht=0,Ot=Yt.length;Ht<Ot;Ht++)At=Yt[Ht],Le.format!==RGBAFormat?ct!==null?ht?Kt&&u.compressedTexSubImage2D(s.TEXTURE_2D,Ht,0,0,At.width,At.height,ct,At.data):u.compressedTexImage2D(s.TEXTURE_2D,Ht,nt,At.width,At.height,0,At.data):warn("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ht?Kt&&u.texSubImage2D(s.TEXTURE_2D,Ht,0,0,At.width,At.height,ct,st,At.data):u.texImage2D(s.TEXTURE_2D,Ht,nt,At.width,At.height,0,ct,st,At.data)}else if(Le.isDataArrayTexture)if(ht){if(Tt&&u.texStorage3D(s.TEXTURE_2D_ARRAY,_n,nt,Ft.width,Ft.height,Ft.depth),Kt)if(Le.layerUpdates.size>0){const Ht=getByteLength(Ft.width,Ft.height,Le.format,Le.type);for(const Ot of Le.layerUpdates){const cn=Ft.data.subarray(Ot*Ht/Ft.data.BYTES_PER_ELEMENT,(Ot+1)*Ht/Ft.data.BYTES_PER_ELEMENT);u.texSubImage3D(s.TEXTURE_2D_ARRAY,0,0,0,Ot,Ft.width,Ft.height,1,ct,st,cn)}Le.clearLayerUpdates()}else u.texSubImage3D(s.TEXTURE_2D_ARRAY,0,0,0,0,Ft.width,Ft.height,Ft.depth,ct,st,Ft.data)}else u.texImage3D(s.TEXTURE_2D_ARRAY,0,nt,Ft.width,Ft.height,Ft.depth,0,ct,st,Ft.data);else if(Le.isData3DTexture)ht?(Tt&&u.texStorage3D(s.TEXTURE_3D,_n,nt,Ft.width,Ft.height,Ft.depth),Kt&&u.texSubImage3D(s.TEXTURE_3D,0,0,0,0,Ft.width,Ft.height,Ft.depth,ct,st,Ft.data)):u.texImage3D(s.TEXTURE_3D,0,nt,Ft.width,Ft.height,Ft.depth,0,ct,st,Ft.data);else if(Le.isFramebufferTexture){if(Tt)if(ht)u.texStorage2D(s.TEXTURE_2D,_n,nt,Ft.width,Ft.height);else{let Ht=Ft.width,Ot=Ft.height;for(let cn=0;cn<_n;cn++)u.texImage2D(s.TEXTURE_2D,cn,nt,Ht,Ot,0,ct,st,null),Ht>>=1,Ot>>=1}}else if(Yt.length>0){if(ht&&Tt){const Ht=Et(Yt[0]);u.texStorage2D(s.TEXTURE_2D,_n,nt,Ht.width,Ht.height)}for(let Ht=0,Ot=Yt.length;Ht<Ot;Ht++)At=Yt[Ht],ht?Kt&&u.texSubImage2D(s.TEXTURE_2D,Ht,0,0,ct,st,At):u.texImage2D(s.TEXTURE_2D,Ht,nt,ct,st,At);Le.generateMipmaps=!1}else if(ht){if(Tt){const Ht=Et(Ft);u.texStorage2D(s.TEXTURE_2D,_n,nt,Ht.width,Ht.height)}Kt&&u.texSubImage2D(s.TEXTURE_2D,0,0,0,ct,st,Ft)}else u.texImage2D(s.TEXTURE_2D,0,nt,ct,st,Ft);z(Le)&&U(We),St.__version=at.version,Le.onUpdate&&Le.onUpdate(Le)}qe.__version=Le.version}function _e(qe,Le,lt){if(Le.image.length!==6)return;const We=he(qe,Le),Qe=Le.source;u.bindTexture(s.TEXTURE_CUBE_MAP,qe.__webglTexture,s.TEXTURE0+lt);const at=f.get(Qe);if(Qe.version!==at.__version||We===!0){u.activeTexture(s.TEXTURE0+lt);const St=ColorManagement.getPrimaries(ColorManagement.workingColorSpace),Ct=Le.colorSpace===NoColorSpace?null:ColorManagement.getPrimaries(Le.colorSpace),jt=Le.colorSpace===NoColorSpace||St===Ct?s.NONE:s.BROWSER_DEFAULT_WEBGL;s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,Le.flipY),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Le.premultiplyAlpha),s.pixelStorei(s.UNPACK_ALIGNMENT,Le.unpackAlignment),s.pixelStorei(s.UNPACK_COLORSPACE_CONVERSION_WEBGL,jt);const Gt=Le.isCompressedTexture||Le.image[0].isCompressedTexture,Ft=Le.image[0]&&Le.image[0].isDataTexture,ct=[];for(let Ot=0;Ot<6;Ot++)!Gt&&!Ft?ct[Ot]=H(Le.image[Ot],!0,y.maxCubemapSize):ct[Ot]=Ft?Le.image[Ot].image:Le.image[Ot],ct[Ot]=ut(Le,ct[Ot]);const st=ct[0],nt=S.convert(Le.format,Le.colorSpace),At=S.convert(Le.type),Yt=Y(Le.internalFormat,nt,At,Le.colorSpace),ht=Le.isVideoTexture!==!0,Tt=at.__version===void 0||We===!0,Kt=Qe.dataReady;let _n=Z(Le,st);be(s.TEXTURE_CUBE_MAP,Le);let Ht;if(Gt){ht&&Tt&&u.texStorage2D(s.TEXTURE_CUBE_MAP,_n,Yt,st.width,st.height);for(let Ot=0;Ot<6;Ot++){Ht=ct[Ot].mipmaps;for(let cn=0;cn<Ht.length;cn++){const Mn=Ht[cn];Le.format!==RGBAFormat?nt!==null?ht?Kt&&u.compressedTexSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Ot,cn,0,0,Mn.width,Mn.height,nt,Mn.data):u.compressedTexImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Ot,cn,Yt,Mn.width,Mn.height,0,Mn.data):warn("WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):ht?Kt&&u.texSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Ot,cn,0,0,Mn.width,Mn.height,nt,At,Mn.data):u.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Ot,cn,Yt,Mn.width,Mn.height,0,nt,At,Mn.data)}}}else{if(Ht=Le.mipmaps,ht&&Tt){Ht.length>0&&_n++;const Ot=Et(ct[0]);u.texStorage2D(s.TEXTURE_CUBE_MAP,_n,Yt,Ot.width,Ot.height)}for(let Ot=0;Ot<6;Ot++)if(Ft){ht?Kt&&u.texSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Ot,0,0,0,ct[Ot].width,ct[Ot].height,nt,At,ct[Ot].data):u.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Ot,0,Yt,ct[Ot].width,ct[Ot].height,0,nt,At,ct[Ot].data);for(let cn=0;cn<Ht.length;cn++){const In=Ht[cn].image[Ot].image;ht?Kt&&u.texSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Ot,cn+1,0,0,In.width,In.height,nt,At,In.data):u.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Ot,cn+1,Yt,In.width,In.height,0,nt,At,In.data)}}else{ht?Kt&&u.texSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Ot,0,0,0,nt,At,ct[Ot]):u.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Ot,0,Yt,nt,At,ct[Ot]);for(let cn=0;cn<Ht.length;cn++){const Mn=Ht[cn];ht?Kt&&u.texSubImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Ot,cn+1,0,0,nt,At,Mn.image[Ot]):u.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+Ot,cn+1,Yt,nt,At,Mn.image[Ot])}}}z(Le)&&U(s.TEXTURE_CUBE_MAP),at.__version=Qe.version,Le.onUpdate&&Le.onUpdate(Le)}qe.__version=Le.version}function ke(qe,Le,lt,We,Qe,at){const St=S.convert(lt.format,lt.colorSpace),Ct=S.convert(lt.type),jt=Y(lt.internalFormat,St,Ct,lt.colorSpace),Gt=f.get(Le),Ft=f.get(lt);if(Ft.__renderTarget=Le,!Gt.__hasExternalTextures){const ct=Math.max(1,Le.width>>at),st=Math.max(1,Le.height>>at);Qe===s.TEXTURE_3D||Qe===s.TEXTURE_2D_ARRAY?u.texImage3D(Qe,at,jt,ct,st,Le.depth,0,St,Ct,null):u.texImage2D(Qe,at,jt,ct,st,0,St,Ct,null)}u.bindFramebuffer(s.FRAMEBUFFER,qe),pt(Le)?w.framebufferTexture2DMultisampleEXT(s.FRAMEBUFFER,We,Qe,Ft.__webglTexture,0,ze(Le)):(Qe===s.TEXTURE_2D||Qe>=s.TEXTURE_CUBE_MAP_POSITIVE_X&&Qe<=s.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&s.framebufferTexture2D(s.FRAMEBUFFER,We,Qe,Ft.__webglTexture,at),u.bindFramebuffer(s.FRAMEBUFFER,null)}function Pe(qe,Le,lt){if(s.bindRenderbuffer(s.RENDERBUFFER,qe),Le.depthBuffer){const We=Le.depthTexture,Qe=We&&We.isDepthTexture?We.type:null,at=K(Le.stencilBuffer,Qe),St=Le.stencilBuffer?s.DEPTH_STENCIL_ATTACHMENT:s.DEPTH_ATTACHMENT;pt(Le)?w.renderbufferStorageMultisampleEXT(s.RENDERBUFFER,ze(Le),at,Le.width,Le.height):lt?s.renderbufferStorageMultisample(s.RENDERBUFFER,ze(Le),at,Le.width,Le.height):s.renderbufferStorage(s.RENDERBUFFER,at,Le.width,Le.height),s.framebufferRenderbuffer(s.FRAMEBUFFER,St,s.RENDERBUFFER,qe)}else{const We=Le.textures;for(let Qe=0;Qe<We.length;Qe++){const at=We[Qe],St=S.convert(at.format,at.colorSpace),Ct=S.convert(at.type),jt=Y(at.internalFormat,St,Ct,at.colorSpace);pt(Le)?w.renderbufferStorageMultisampleEXT(s.RENDERBUFFER,ze(Le),jt,Le.width,Le.height):lt?s.renderbufferStorageMultisample(s.RENDERBUFFER,ze(Le),jt,Le.width,Le.height):s.renderbufferStorage(s.RENDERBUFFER,jt,Le.width,Le.height)}}s.bindRenderbuffer(s.RENDERBUFFER,null)}function $e(qe,Le,lt){const We=Le.isWebGLCubeRenderTarget===!0;if(u.bindFramebuffer(s.FRAMEBUFFER,qe),!(Le.depthTexture&&Le.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Qe=f.get(Le.depthTexture);if(Qe.__renderTarget=Le,(!Qe.__webglTexture||Le.depthTexture.image.width!==Le.width||Le.depthTexture.image.height!==Le.height)&&(Le.depthTexture.image.width=Le.width,Le.depthTexture.image.height=Le.height,Le.depthTexture.needsUpdate=!0),We){if(Qe.__webglInit===void 0&&(Qe.__webglInit=!0,Le.depthTexture.addEventListener("dispose",J)),Qe.__webglTexture===void 0){Qe.__webglTexture=s.createTexture(),u.bindTexture(s.TEXTURE_CUBE_MAP,Qe.__webglTexture),be(s.TEXTURE_CUBE_MAP,Le.depthTexture);const Gt=S.convert(Le.depthTexture.format),Ft=S.convert(Le.depthTexture.type);let ct;Le.depthTexture.format===DepthFormat?ct=s.DEPTH_COMPONENT24:Le.depthTexture.format===DepthStencilFormat&&(ct=s.DEPTH24_STENCIL8);for(let st=0;st<6;st++)s.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+st,0,ct,Le.width,Le.height,0,Gt,Ft,null)}}else Be(Le.depthTexture,0);const at=Qe.__webglTexture,St=ze(Le),Ct=We?s.TEXTURE_CUBE_MAP_POSITIVE_X+lt:s.TEXTURE_2D,jt=Le.depthTexture.format===DepthStencilFormat?s.DEPTH_STENCIL_ATTACHMENT:s.DEPTH_ATTACHMENT;if(Le.depthTexture.format===DepthFormat)pt(Le)?w.framebufferTexture2DMultisampleEXT(s.FRAMEBUFFER,jt,Ct,at,0,St):s.framebufferTexture2D(s.FRAMEBUFFER,jt,Ct,at,0);else if(Le.depthTexture.format===DepthStencilFormat)pt(Le)?w.framebufferTexture2DMultisampleEXT(s.FRAMEBUFFER,jt,Ct,at,0,St):s.framebufferTexture2D(s.FRAMEBUFFER,jt,Ct,at,0);else throw new Error("Unknown depthTexture format")}function xe(qe){const Le=f.get(qe),lt=qe.isWebGLCubeRenderTarget===!0;if(Le.__boundDepthTexture!==qe.depthTexture){const We=qe.depthTexture;if(Le.__depthDisposeCallback&&Le.__depthDisposeCallback(),We){const Qe=()=>{delete Le.__boundDepthTexture,delete Le.__depthDisposeCallback,We.removeEventListener("dispose",Qe)};We.addEventListener("dispose",Qe),Le.__depthDisposeCallback=Qe}Le.__boundDepthTexture=We}if(qe.depthTexture&&!Le.__autoAllocateDepthBuffer)if(lt)for(let We=0;We<6;We++)$e(Le.__webglFramebuffer[We],qe,We);else{const We=qe.texture.mipmaps;We&&We.length>0?$e(Le.__webglFramebuffer[0],qe,0):$e(Le.__webglFramebuffer,qe,0)}else if(lt){Le.__webglDepthbuffer=[];for(let We=0;We<6;We++)if(u.bindFramebuffer(s.FRAMEBUFFER,Le.__webglFramebuffer[We]),Le.__webglDepthbuffer[We]===void 0)Le.__webglDepthbuffer[We]=s.createRenderbuffer(),Pe(Le.__webglDepthbuffer[We],qe,!1);else{const Qe=qe.stencilBuffer?s.DEPTH_STENCIL_ATTACHMENT:s.DEPTH_ATTACHMENT,at=Le.__webglDepthbuffer[We];s.bindRenderbuffer(s.RENDERBUFFER,at),s.framebufferRenderbuffer(s.FRAMEBUFFER,Qe,s.RENDERBUFFER,at)}}else{const We=qe.texture.mipmaps;if(We&&We.length>0?u.bindFramebuffer(s.FRAMEBUFFER,Le.__webglFramebuffer[0]):u.bindFramebuffer(s.FRAMEBUFFER,Le.__webglFramebuffer),Le.__webglDepthbuffer===void 0)Le.__webglDepthbuffer=s.createRenderbuffer(),Pe(Le.__webglDepthbuffer,qe,!1);else{const Qe=qe.stencilBuffer?s.DEPTH_STENCIL_ATTACHMENT:s.DEPTH_ATTACHMENT,at=Le.__webglDepthbuffer;s.bindRenderbuffer(s.RENDERBUFFER,at),s.framebufferRenderbuffer(s.FRAMEBUFFER,Qe,s.RENDERBUFFER,at)}}u.bindFramebuffer(s.FRAMEBUFFER,null)}function Ne(qe,Le,lt){const We=f.get(qe);Le!==void 0&&ke(We.__webglFramebuffer,qe,qe.texture,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,0),lt!==void 0&&xe(qe)}function je(qe){const Le=qe.texture,lt=f.get(qe),We=f.get(Le);qe.addEventListener("dispose",te);const Qe=qe.textures,at=qe.isWebGLCubeRenderTarget===!0,St=Qe.length>1;if(St||(We.__webglTexture===void 0&&(We.__webglTexture=s.createTexture()),We.__version=Le.version,A.memory.textures++),at){lt.__webglFramebuffer=[];for(let Ct=0;Ct<6;Ct++)if(Le.mipmaps&&Le.mipmaps.length>0){lt.__webglFramebuffer[Ct]=[];for(let jt=0;jt<Le.mipmaps.length;jt++)lt.__webglFramebuffer[Ct][jt]=s.createFramebuffer()}else lt.__webglFramebuffer[Ct]=s.createFramebuffer()}else{if(Le.mipmaps&&Le.mipmaps.length>0){lt.__webglFramebuffer=[];for(let Ct=0;Ct<Le.mipmaps.length;Ct++)lt.__webglFramebuffer[Ct]=s.createFramebuffer()}else lt.__webglFramebuffer=s.createFramebuffer();if(St)for(let Ct=0,jt=Qe.length;Ct<jt;Ct++){const Gt=f.get(Qe[Ct]);Gt.__webglTexture===void 0&&(Gt.__webglTexture=s.createTexture(),A.memory.textures++)}if(qe.samples>0&&pt(qe)===!1){lt.__webglMultisampledFramebuffer=s.createFramebuffer(),lt.__webglColorRenderbuffer=[],u.bindFramebuffer(s.FRAMEBUFFER,lt.__webglMultisampledFramebuffer);for(let Ct=0;Ct<Qe.length;Ct++){const jt=Qe[Ct];lt.__webglColorRenderbuffer[Ct]=s.createRenderbuffer(),s.bindRenderbuffer(s.RENDERBUFFER,lt.__webglColorRenderbuffer[Ct]);const Gt=S.convert(jt.format,jt.colorSpace),Ft=S.convert(jt.type),ct=Y(jt.internalFormat,Gt,Ft,jt.colorSpace,qe.isXRRenderTarget===!0),st=ze(qe);s.renderbufferStorageMultisample(s.RENDERBUFFER,st,ct,qe.width,qe.height),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0+Ct,s.RENDERBUFFER,lt.__webglColorRenderbuffer[Ct])}s.bindRenderbuffer(s.RENDERBUFFER,null),qe.depthBuffer&&(lt.__webglDepthRenderbuffer=s.createRenderbuffer(),Pe(lt.__webglDepthRenderbuffer,qe,!0)),u.bindFramebuffer(s.FRAMEBUFFER,null)}}if(at){u.bindTexture(s.TEXTURE_CUBE_MAP,We.__webglTexture),be(s.TEXTURE_CUBE_MAP,Le);for(let Ct=0;Ct<6;Ct++)if(Le.mipmaps&&Le.mipmaps.length>0)for(let jt=0;jt<Le.mipmaps.length;jt++)ke(lt.__webglFramebuffer[Ct][jt],qe,Le,s.COLOR_ATTACHMENT0,s.TEXTURE_CUBE_MAP_POSITIVE_X+Ct,jt);else ke(lt.__webglFramebuffer[Ct],qe,Le,s.COLOR_ATTACHMENT0,s.TEXTURE_CUBE_MAP_POSITIVE_X+Ct,0);z(Le)&&U(s.TEXTURE_CUBE_MAP),u.unbindTexture()}else if(St){for(let Ct=0,jt=Qe.length;Ct<jt;Ct++){const Gt=Qe[Ct],Ft=f.get(Gt);let ct=s.TEXTURE_2D;(qe.isWebGL3DRenderTarget||qe.isWebGLArrayRenderTarget)&&(ct=qe.isWebGL3DRenderTarget?s.TEXTURE_3D:s.TEXTURE_2D_ARRAY),u.bindTexture(ct,Ft.__webglTexture),be(ct,Gt),ke(lt.__webglFramebuffer,qe,Gt,s.COLOR_ATTACHMENT0+Ct,ct,0),z(Gt)&&U(ct)}u.unbindTexture()}else{let Ct=s.TEXTURE_2D;if((qe.isWebGL3DRenderTarget||qe.isWebGLArrayRenderTarget)&&(Ct=qe.isWebGL3DRenderTarget?s.TEXTURE_3D:s.TEXTURE_2D_ARRAY),u.bindTexture(Ct,We.__webglTexture),be(Ct,Le),Le.mipmaps&&Le.mipmaps.length>0)for(let jt=0;jt<Le.mipmaps.length;jt++)ke(lt.__webglFramebuffer[jt],qe,Le,s.COLOR_ATTACHMENT0,Ct,jt);else ke(lt.__webglFramebuffer,qe,Le,s.COLOR_ATTACHMENT0,Ct,0);z(Le)&&U(Ct),u.unbindTexture()}qe.depthBuffer&&xe(qe)}function He(qe){const Le=qe.textures;for(let lt=0,We=Le.length;lt<We;lt++){const Qe=Le[lt];if(z(Qe)){const at=G(qe),St=f.get(Qe).__webglTexture;u.bindTexture(at,St),U(at),u.unbindTexture()}}}const Ye=[],Je=[];function ot(qe){if(qe.samples>0){if(pt(qe)===!1){const Le=qe.textures,lt=qe.width,We=qe.height;let Qe=s.COLOR_BUFFER_BIT;const at=qe.stencilBuffer?s.DEPTH_STENCIL_ATTACHMENT:s.DEPTH_ATTACHMENT,St=f.get(qe),Ct=Le.length>1;if(Ct)for(let Gt=0;Gt<Le.length;Gt++)u.bindFramebuffer(s.FRAMEBUFFER,St.__webglMultisampledFramebuffer),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0+Gt,s.RENDERBUFFER,null),u.bindFramebuffer(s.FRAMEBUFFER,St.__webglFramebuffer),s.framebufferTexture2D(s.DRAW_FRAMEBUFFER,s.COLOR_ATTACHMENT0+Gt,s.TEXTURE_2D,null,0);u.bindFramebuffer(s.READ_FRAMEBUFFER,St.__webglMultisampledFramebuffer);const jt=qe.texture.mipmaps;jt&&jt.length>0?u.bindFramebuffer(s.DRAW_FRAMEBUFFER,St.__webglFramebuffer[0]):u.bindFramebuffer(s.DRAW_FRAMEBUFFER,St.__webglFramebuffer);for(let Gt=0;Gt<Le.length;Gt++){if(qe.resolveDepthBuffer&&(qe.depthBuffer&&(Qe|=s.DEPTH_BUFFER_BIT),qe.stencilBuffer&&qe.resolveStencilBuffer&&(Qe|=s.STENCIL_BUFFER_BIT)),Ct){s.framebufferRenderbuffer(s.READ_FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.RENDERBUFFER,St.__webglColorRenderbuffer[Gt]);const Ft=f.get(Le[Gt]).__webglTexture;s.framebufferTexture2D(s.DRAW_FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,Ft,0)}s.blitFramebuffer(0,0,lt,We,0,0,lt,We,Qe,s.NEAREST),C===!0&&(Ye.length=0,Je.length=0,Ye.push(s.COLOR_ATTACHMENT0+Gt),qe.depthBuffer&&qe.resolveDepthBuffer===!1&&(Ye.push(at),Je.push(at),s.invalidateFramebuffer(s.DRAW_FRAMEBUFFER,Je)),s.invalidateFramebuffer(s.READ_FRAMEBUFFER,Ye))}if(u.bindFramebuffer(s.READ_FRAMEBUFFER,null),u.bindFramebuffer(s.DRAW_FRAMEBUFFER,null),Ct)for(let Gt=0;Gt<Le.length;Gt++){u.bindFramebuffer(s.FRAMEBUFFER,St.__webglMultisampledFramebuffer),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0+Gt,s.RENDERBUFFER,St.__webglColorRenderbuffer[Gt]);const Ft=f.get(Le[Gt]).__webglTexture;u.bindFramebuffer(s.FRAMEBUFFER,St.__webglFramebuffer),s.framebufferTexture2D(s.DRAW_FRAMEBUFFER,s.COLOR_ATTACHMENT0+Gt,s.TEXTURE_2D,Ft,0)}u.bindFramebuffer(s.DRAW_FRAMEBUFFER,St.__webglMultisampledFramebuffer)}else if(qe.depthBuffer&&qe.resolveDepthBuffer===!1&&C){const Le=qe.stencilBuffer?s.DEPTH_STENCIL_ATTACHMENT:s.DEPTH_ATTACHMENT;s.invalidateFramebuffer(s.DRAW_FRAMEBUFFER,[Le])}}}function ze(qe){return Math.min(y.maxSamples,qe.samples)}function pt(qe){const Le=f.get(qe);return qe.samples>0&&n.has("WEBGL_multisampled_render_to_texture")===!0&&Le.__useRenderToTexture!==!1}function yt(qe){const Le=A.render.frame;R.get(qe)!==Le&&(R.set(qe,Le),qe.update())}function ut(qe,Le){const lt=qe.colorSpace,We=qe.format,Qe=qe.type;return qe.isCompressedTexture===!0||qe.isVideoTexture===!0||lt!==LinearSRGBColorSpace$1&&lt!==NoColorSpace&&(ColorManagement.getTransfer(lt)===SRGBTransfer?(We!==RGBAFormat||Qe!==UnsignedByteType)&&warn("WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):error("WebGLTextures: Unsupported texture color space:",lt)),Le}function Et(qe){return typeof HTMLImageElement<"u"&&qe instanceof HTMLImageElement?(T.width=qe.naturalWidth||qe.width,T.height=qe.naturalHeight||qe.height):typeof VideoFrame<"u"&&qe instanceof VideoFrame?(T.width=qe.displayWidth,T.height=qe.displayHeight):(T.width=qe.width,T.height=qe.height),T}this.allocateTextureUnit=we,this.resetTextureUnits=Ee,this.setTexture2D=Be,this.setTexture2DArray=Me,this.setTexture3D=Re,this.setTextureCube=Te,this.rebindTextures=Ne,this.setupRenderTarget=je,this.updateRenderTargetMipmap=He,this.updateMultisampleRenderTarget=ot,this.setupDepthRenderbuffer=xe,this.setupFrameBufferTexture=ke,this.useMultisampledRTT=pt,this.isReversedDepthBuffer=function(){return u.buffers.depth.getReversed()}}function WebGLUtils(s,n){function u(f,y=NoColorSpace){let S;const A=ColorManagement.getTransfer(y);if(f===UnsignedByteType)return s.UNSIGNED_BYTE;if(f===UnsignedShort4444Type)return s.UNSIGNED_SHORT_4_4_4_4;if(f===UnsignedShort5551Type)return s.UNSIGNED_SHORT_5_5_5_1;if(f===UnsignedInt5999Type)return s.UNSIGNED_INT_5_9_9_9_REV;if(f===UnsignedInt101111Type)return s.UNSIGNED_INT_10F_11F_11F_REV;if(f===ByteType)return s.BYTE;if(f===ShortType)return s.SHORT;if(f===UnsignedShortType)return s.UNSIGNED_SHORT;if(f===IntType)return s.INT;if(f===UnsignedIntType)return s.UNSIGNED_INT;if(f===FloatType)return s.FLOAT;if(f===HalfFloatType)return s.HALF_FLOAT;if(f===AlphaFormat)return s.ALPHA;if(f===RGBFormat)return s.RGB;if(f===RGBAFormat)return s.RGBA;if(f===DepthFormat)return s.DEPTH_COMPONENT;if(f===DepthStencilFormat)return s.DEPTH_STENCIL;if(f===RedFormat)return s.RED;if(f===RedIntegerFormat)return s.RED_INTEGER;if(f===RGFormat)return s.RG;if(f===RGIntegerFormat)return s.RG_INTEGER;if(f===RGBAIntegerFormat)return s.RGBA_INTEGER;if(f===RGB_S3TC_DXT1_Format||f===RGBA_S3TC_DXT1_Format||f===RGBA_S3TC_DXT3_Format||f===RGBA_S3TC_DXT5_Format)if(A===SRGBTransfer)if(S=n.get("WEBGL_compressed_texture_s3tc_srgb"),S!==null){if(f===RGB_S3TC_DXT1_Format)return S.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(f===RGBA_S3TC_DXT1_Format)return S.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(f===RGBA_S3TC_DXT3_Format)return S.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(f===RGBA_S3TC_DXT5_Format)return S.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(S=n.get("WEBGL_compressed_texture_s3tc"),S!==null){if(f===RGB_S3TC_DXT1_Format)return S.COMPRESSED_RGB_S3TC_DXT1_EXT;if(f===RGBA_S3TC_DXT1_Format)return S.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(f===RGBA_S3TC_DXT3_Format)return S.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(f===RGBA_S3TC_DXT5_Format)return S.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(f===RGB_PVRTC_4BPPV1_Format||f===RGB_PVRTC_2BPPV1_Format||f===RGBA_PVRTC_4BPPV1_Format||f===RGBA_PVRTC_2BPPV1_Format)if(S=n.get("WEBGL_compressed_texture_pvrtc"),S!==null){if(f===RGB_PVRTC_4BPPV1_Format)return S.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(f===RGB_PVRTC_2BPPV1_Format)return S.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(f===RGBA_PVRTC_4BPPV1_Format)return S.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(f===RGBA_PVRTC_2BPPV1_Format)return S.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(f===RGB_ETC1_Format||f===RGB_ETC2_Format||f===RGBA_ETC2_EAC_Format||f===R11_EAC_Format||f===SIGNED_R11_EAC_Format||f===RG11_EAC_Format||f===SIGNED_RG11_EAC_Format)if(S=n.get("WEBGL_compressed_texture_etc"),S!==null){if(f===RGB_ETC1_Format||f===RGB_ETC2_Format)return A===SRGBTransfer?S.COMPRESSED_SRGB8_ETC2:S.COMPRESSED_RGB8_ETC2;if(f===RGBA_ETC2_EAC_Format)return A===SRGBTransfer?S.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:S.COMPRESSED_RGBA8_ETC2_EAC;if(f===R11_EAC_Format)return S.COMPRESSED_R11_EAC;if(f===SIGNED_R11_EAC_Format)return S.COMPRESSED_SIGNED_R11_EAC;if(f===RG11_EAC_Format)return S.COMPRESSED_RG11_EAC;if(f===SIGNED_RG11_EAC_Format)return S.COMPRESSED_SIGNED_RG11_EAC}else return null;if(f===RGBA_ASTC_4x4_Format||f===RGBA_ASTC_5x4_Format||f===RGBA_ASTC_5x5_Format||f===RGBA_ASTC_6x5_Format||f===RGBA_ASTC_6x6_Format||f===RGBA_ASTC_8x5_Format||f===RGBA_ASTC_8x6_Format||f===RGBA_ASTC_8x8_Format||f===RGBA_ASTC_10x5_Format||f===RGBA_ASTC_10x6_Format||f===RGBA_ASTC_10x8_Format||f===RGBA_ASTC_10x10_Format||f===RGBA_ASTC_12x10_Format||f===RGBA_ASTC_12x12_Format)if(S=n.get("WEBGL_compressed_texture_astc"),S!==null){if(f===RGBA_ASTC_4x4_Format)return A===SRGBTransfer?S.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:S.COMPRESSED_RGBA_ASTC_4x4_KHR;if(f===RGBA_ASTC_5x4_Format)return A===SRGBTransfer?S.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:S.COMPRESSED_RGBA_ASTC_5x4_KHR;if(f===RGBA_ASTC_5x5_Format)return A===SRGBTransfer?S.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:S.COMPRESSED_RGBA_ASTC_5x5_KHR;if(f===RGBA_ASTC_6x5_Format)return A===SRGBTransfer?S.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:S.COMPRESSED_RGBA_ASTC_6x5_KHR;if(f===RGBA_ASTC_6x6_Format)return A===SRGBTransfer?S.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:S.COMPRESSED_RGBA_ASTC_6x6_KHR;if(f===RGBA_ASTC_8x5_Format)return A===SRGBTransfer?S.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:S.COMPRESSED_RGBA_ASTC_8x5_KHR;if(f===RGBA_ASTC_8x6_Format)return A===SRGBTransfer?S.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:S.COMPRESSED_RGBA_ASTC_8x6_KHR;if(f===RGBA_ASTC_8x8_Format)return A===SRGBTransfer?S.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:S.COMPRESSED_RGBA_ASTC_8x8_KHR;if(f===RGBA_ASTC_10x5_Format)return A===SRGBTransfer?S.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:S.COMPRESSED_RGBA_ASTC_10x5_KHR;if(f===RGBA_ASTC_10x6_Format)return A===SRGBTransfer?S.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:S.COMPRESSED_RGBA_ASTC_10x6_KHR;if(f===RGBA_ASTC_10x8_Format)return A===SRGBTransfer?S.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:S.COMPRESSED_RGBA_ASTC_10x8_KHR;if(f===RGBA_ASTC_10x10_Format)return A===SRGBTransfer?S.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:S.COMPRESSED_RGBA_ASTC_10x10_KHR;if(f===RGBA_ASTC_12x10_Format)return A===SRGBTransfer?S.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:S.COMPRESSED_RGBA_ASTC_12x10_KHR;if(f===RGBA_ASTC_12x12_Format)return A===SRGBTransfer?S.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:S.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(f===RGBA_BPTC_Format||f===RGB_BPTC_SIGNED_Format||f===RGB_BPTC_UNSIGNED_Format)if(S=n.get("EXT_texture_compression_bptc"),S!==null){if(f===RGBA_BPTC_Format)return A===SRGBTransfer?S.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:S.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(f===RGB_BPTC_SIGNED_Format)return S.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(f===RGB_BPTC_UNSIGNED_Format)return S.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(f===RED_RGTC1_Format||f===SIGNED_RED_RGTC1_Format||f===RED_GREEN_RGTC2_Format||f===SIGNED_RED_GREEN_RGTC2_Format)if(S=n.get("EXT_texture_compression_rgtc"),S!==null){if(f===RED_RGTC1_Format)return S.COMPRESSED_RED_RGTC1_EXT;if(f===SIGNED_RED_RGTC1_Format)return S.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(f===RED_GREEN_RGTC2_Format)return S.COMPRESSED_RED_GREEN_RGTC2_EXT;if(f===SIGNED_RED_GREEN_RGTC2_Format)return S.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return f===UnsignedInt248Type?s.UNSIGNED_INT_24_8:s[f]!==void 0?s[f]:null}return{convert:u}}const _occlusion_vertex=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,_occlusion_fragment=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class WebXRDepthSensing{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(n,u){if(this.texture===null){const f=new ExternalTexture(n.texture);(n.depthNear!==u.depthNear||n.depthFar!==u.depthFar)&&(this.depthNear=n.depthNear,this.depthFar=n.depthFar),this.texture=f}}getMesh(n){if(this.texture!==null&&this.mesh===null){const u=n.cameras[0].viewport,f=new ShaderMaterial({vertexShader:_occlusion_vertex,fragmentShader:_occlusion_fragment,uniforms:{depthColor:{value:this.texture},depthWidth:{value:u.z},depthHeight:{value:u.w}}});this.mesh=new Mesh(new PlaneGeometry(20,20),f)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class WebXRManager extends EventDispatcher{constructor(n,u){super();const f=this;let y=null,S=1,A=null,w="local-floor",C=1,T=null,R=null,I=null,N=null,L=null,F=null;const H=typeof XRWebGLBinding<"u",z=new WebXRDepthSensing,U={},G=u.getContextAttributes();let Y=null,K=null;const Z=[],J=[],te=new Vector2;let de=null;const se=new PerspectiveCamera;se.viewport=new Vector4;const ne=new PerspectiveCamera;ne.viewport=new Vector4;const ge=[se,ne],Ee=new ArrayCamera;let we=null,Ie=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ce){let _e=Z[ce];return _e===void 0&&(_e=new WebXRController,Z[ce]=_e),_e.getTargetRaySpace()},this.getControllerGrip=function(ce){let _e=Z[ce];return _e===void 0&&(_e=new WebXRController,Z[ce]=_e),_e.getGripSpace()},this.getHand=function(ce){let _e=Z[ce];return _e===void 0&&(_e=new WebXRController,Z[ce]=_e),_e.getHandSpace()};function Be(ce){const _e=J.indexOf(ce.inputSource);if(_e===-1)return;const ke=Z[_e];ke!==void 0&&(ke.update(ce.inputSource,ce.frame,T||A),ke.dispatchEvent({type:ce.type,data:ce.inputSource}))}function Me(){y.removeEventListener("select",Be),y.removeEventListener("selectstart",Be),y.removeEventListener("selectend",Be),y.removeEventListener("squeeze",Be),y.removeEventListener("squeezestart",Be),y.removeEventListener("squeezeend",Be),y.removeEventListener("end",Me),y.removeEventListener("inputsourceschange",Re);for(let ce=0;ce<Z.length;ce++){const _e=J[ce];_e!==null&&(J[ce]=null,Z[ce].disconnect(_e))}we=null,Ie=null,z.reset();for(const ce in U)delete U[ce];n.setRenderTarget(Y),L=null,N=null,I=null,y=null,K=null,ye.stop(),f.isPresenting=!1,n.setPixelRatio(de),n.setSize(te.width,te.height,!1),f.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ce){S=ce,f.isPresenting===!0&&warn("WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ce){w=ce,f.isPresenting===!0&&warn("WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return T||A},this.setReferenceSpace=function(ce){T=ce},this.getBaseLayer=function(){return N!==null?N:L},this.getBinding=function(){return I===null&&H&&(I=new XRWebGLBinding(y,u)),I},this.getFrame=function(){return F},this.getSession=function(){return y},this.setSession=async function(ce){if(y=ce,y!==null){if(Y=n.getRenderTarget(),y.addEventListener("select",Be),y.addEventListener("selectstart",Be),y.addEventListener("selectend",Be),y.addEventListener("squeeze",Be),y.addEventListener("squeezestart",Be),y.addEventListener("squeezeend",Be),y.addEventListener("end",Me),y.addEventListener("inputsourceschange",Re),G.xrCompatible!==!0&&await u.makeXRCompatible(),de=n.getPixelRatio(),n.getSize(te),H&&"createProjectionLayer"in XRWebGLBinding.prototype){let ke=null,Pe=null,$e=null;G.depth&&($e=G.stencil?u.DEPTH24_STENCIL8:u.DEPTH_COMPONENT24,ke=G.stencil?DepthStencilFormat:DepthFormat,Pe=G.stencil?UnsignedInt248Type:UnsignedIntType);const xe={colorFormat:u.RGBA8,depthFormat:$e,scaleFactor:S};I=this.getBinding(),N=I.createProjectionLayer(xe),y.updateRenderState({layers:[N]}),n.setPixelRatio(1),n.setSize(N.textureWidth,N.textureHeight,!1),K=new WebGLRenderTarget(N.textureWidth,N.textureHeight,{format:RGBAFormat,type:UnsignedByteType,depthTexture:new DepthTexture(N.textureWidth,N.textureHeight,Pe,void 0,void 0,void 0,void 0,void 0,void 0,ke),stencilBuffer:G.stencil,colorSpace:n.outputColorSpace,samples:G.antialias?4:0,resolveDepthBuffer:N.ignoreDepthValues===!1,resolveStencilBuffer:N.ignoreDepthValues===!1})}else{const ke={antialias:G.antialias,alpha:!0,depth:G.depth,stencil:G.stencil,framebufferScaleFactor:S};L=new XRWebGLLayer(y,u,ke),y.updateRenderState({baseLayer:L}),n.setPixelRatio(1),n.setSize(L.framebufferWidth,L.framebufferHeight,!1),K=new WebGLRenderTarget(L.framebufferWidth,L.framebufferHeight,{format:RGBAFormat,type:UnsignedByteType,colorSpace:n.outputColorSpace,stencilBuffer:G.stencil,resolveDepthBuffer:L.ignoreDepthValues===!1,resolveStencilBuffer:L.ignoreDepthValues===!1})}K.isXRRenderTarget=!0,this.setFoveation(C),T=null,A=await y.requestReferenceSpace(w),ye.setContext(y),ye.start(),f.isPresenting=!0,f.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(y!==null)return y.environmentBlendMode},this.getDepthTexture=function(){return z.getDepthTexture()};function Re(ce){for(let _e=0;_e<ce.removed.length;_e++){const ke=ce.removed[_e],Pe=J.indexOf(ke);Pe>=0&&(J[Pe]=null,Z[Pe].disconnect(ke))}for(let _e=0;_e<ce.added.length;_e++){const ke=ce.added[_e];let Pe=J.indexOf(ke);if(Pe===-1){for(let xe=0;xe<Z.length;xe++)if(xe>=J.length){J.push(ke),Pe=xe;break}else if(J[xe]===null){J[xe]=ke,Pe=xe;break}if(Pe===-1)break}const $e=Z[Pe];$e&&$e.connect(ke)}}const Te=new Vector3,Se=new Vector3;function oe(ce,_e,ke){Te.setFromMatrixPosition(_e.matrixWorld),Se.setFromMatrixPosition(ke.matrixWorld);const Pe=Te.distanceTo(Se),$e=_e.projectionMatrix.elements,xe=ke.projectionMatrix.elements,Ne=$e[14]/($e[10]-1),je=$e[14]/($e[10]+1),He=($e[9]+1)/$e[5],Ye=($e[9]-1)/$e[5],Je=($e[8]-1)/$e[0],ot=(xe[8]+1)/xe[0],ze=Ne*Je,pt=Ne*ot,yt=Pe/(-Je+ot),ut=yt*-Je;if(_e.matrixWorld.decompose(ce.position,ce.quaternion,ce.scale),ce.translateX(ut),ce.translateZ(yt),ce.matrixWorld.compose(ce.position,ce.quaternion,ce.scale),ce.matrixWorldInverse.copy(ce.matrixWorld).invert(),$e[10]===-1)ce.projectionMatrix.copy(_e.projectionMatrix),ce.projectionMatrixInverse.copy(_e.projectionMatrixInverse);else{const Et=Ne+yt,qe=je+yt,Le=ze-ut,lt=pt+(Pe-ut),We=He*je/qe*Et,Qe=Ye*je/qe*Et;ce.projectionMatrix.makePerspective(Le,lt,We,Qe,Et,qe),ce.projectionMatrixInverse.copy(ce.projectionMatrix).invert()}}function ae(ce,_e){_e===null?ce.matrixWorld.copy(ce.matrix):ce.matrixWorld.multiplyMatrices(_e.matrixWorld,ce.matrix),ce.matrixWorldInverse.copy(ce.matrixWorld).invert()}this.updateCamera=function(ce){if(y===null)return;let _e=ce.near,ke=ce.far;z.texture!==null&&(z.depthNear>0&&(_e=z.depthNear),z.depthFar>0&&(ke=z.depthFar)),Ee.near=ne.near=se.near=_e,Ee.far=ne.far=se.far=ke,(we!==Ee.near||Ie!==Ee.far)&&(y.updateRenderState({depthNear:Ee.near,depthFar:Ee.far}),we=Ee.near,Ie=Ee.far),Ee.layers.mask=ce.layers.mask|6,se.layers.mask=Ee.layers.mask&3,ne.layers.mask=Ee.layers.mask&5;const Pe=ce.parent,$e=Ee.cameras;ae(Ee,Pe);for(let xe=0;xe<$e.length;xe++)ae($e[xe],Pe);$e.length===2?oe(Ee,se,ne):Ee.projectionMatrix.copy(se.projectionMatrix),be(ce,Ee,Pe)};function be(ce,_e,ke){ke===null?ce.matrix.copy(_e.matrixWorld):(ce.matrix.copy(ke.matrixWorld),ce.matrix.invert(),ce.matrix.multiply(_e.matrixWorld)),ce.matrix.decompose(ce.position,ce.quaternion,ce.scale),ce.updateMatrixWorld(!0),ce.projectionMatrix.copy(_e.projectionMatrix),ce.projectionMatrixInverse.copy(_e.projectionMatrixInverse),ce.isPerspectiveCamera&&(ce.fov=RAD2DEG*2*Math.atan(1/ce.projectionMatrix.elements[5]),ce.zoom=1)}this.getCamera=function(){return Ee},this.getFoveation=function(){if(!(N===null&&L===null))return C},this.setFoveation=function(ce){C=ce,N!==null&&(N.fixedFoveation=ce),L!==null&&L.fixedFoveation!==void 0&&(L.fixedFoveation=ce)},this.hasDepthSensing=function(){return z.texture!==null},this.getDepthSensingMesh=function(){return z.getMesh(Ee)},this.getCameraTexture=function(ce){return U[ce]};let he=null;function ue(ce,_e){if(R=_e.getViewerPose(T||A),F=_e,R!==null){const ke=R.views;L!==null&&(n.setRenderTargetFramebuffer(K,L.framebuffer),n.setRenderTarget(K));let Pe=!1;ke.length!==Ee.cameras.length&&(Ee.cameras.length=0,Pe=!0);for(let je=0;je<ke.length;je++){const He=ke[je];let Ye=null;if(L!==null)Ye=L.getViewport(He);else{const ot=I.getViewSubImage(N,He);Ye=ot.viewport,je===0&&(n.setRenderTargetTextures(K,ot.colorTexture,ot.depthStencilTexture),n.setRenderTarget(K))}let Je=ge[je];Je===void 0&&(Je=new PerspectiveCamera,Je.layers.enable(je),Je.viewport=new Vector4,ge[je]=Je),Je.matrix.fromArray(He.transform.matrix),Je.matrix.decompose(Je.position,Je.quaternion,Je.scale),Je.projectionMatrix.fromArray(He.projectionMatrix),Je.projectionMatrixInverse.copy(Je.projectionMatrix).invert(),Je.viewport.set(Ye.x,Ye.y,Ye.width,Ye.height),je===0&&(Ee.matrix.copy(Je.matrix),Ee.matrix.decompose(Ee.position,Ee.quaternion,Ee.scale)),Pe===!0&&Ee.cameras.push(Je)}const $e=y.enabledFeatures;if($e&&$e.includes("depth-sensing")&&y.depthUsage=="gpu-optimized"&&H){I=f.getBinding();const je=I.getDepthInformation(ke[0]);je&&je.isValid&&je.texture&&z.init(je,y.renderState)}if($e&&$e.includes("camera-access")&&H){n.state.unbindTexture(),I=f.getBinding();for(let je=0;je<ke.length;je++){const He=ke[je].camera;if(He){let Ye=U[He];Ye||(Ye=new ExternalTexture,U[He]=Ye);const Je=I.getCameraImage(He);Ye.sourceTexture=Je}}}}for(let ke=0;ke<Z.length;ke++){const Pe=J[ke],$e=Z[ke];Pe!==null&&$e!==void 0&&$e.update(Pe,_e,T||A)}he&&he(ce,_e),_e.detectedPlanes&&f.dispatchEvent({type:"planesdetected",data:_e}),F=null}const ye=new WebGLAnimation;ye.setAnimationLoop(ue),this.setAnimationLoop=function(ce){he=ce},this.dispose=function(){}}}const _e1=new Euler,_m1=new Matrix4;function WebGLMaterials(s,n){function u(z,U){z.matrixAutoUpdate===!0&&z.updateMatrix(),U.value.copy(z.matrix)}function f(z,U){U.color.getRGB(z.fogColor.value,getUnlitUniformColorSpace(s)),U.isFog?(z.fogNear.value=U.near,z.fogFar.value=U.far):U.isFogExp2&&(z.fogDensity.value=U.density)}function y(z,U,G,Y,K){U.isMeshBasicMaterial||U.isMeshLambertMaterial?S(z,U):U.isMeshToonMaterial?(S(z,U),I(z,U)):U.isMeshPhongMaterial?(S(z,U),R(z,U)):U.isMeshStandardMaterial?(S(z,U),N(z,U),U.isMeshPhysicalMaterial&&L(z,U,K)):U.isMeshMatcapMaterial?(S(z,U),F(z,U)):U.isMeshDepthMaterial?S(z,U):U.isMeshDistanceMaterial?(S(z,U),H(z,U)):U.isMeshNormalMaterial?S(z,U):U.isLineBasicMaterial?(A(z,U),U.isLineDashedMaterial&&w(z,U)):U.isPointsMaterial?C(z,U,G,Y):U.isSpriteMaterial?T(z,U):U.isShadowMaterial?(z.color.value.copy(U.color),z.opacity.value=U.opacity):U.isShaderMaterial&&(U.uniformsNeedUpdate=!1)}function S(z,U){z.opacity.value=U.opacity,U.color&&z.diffuse.value.copy(U.color),U.emissive&&z.emissive.value.copy(U.emissive).multiplyScalar(U.emissiveIntensity),U.map&&(z.map.value=U.map,u(U.map,z.mapTransform)),U.alphaMap&&(z.alphaMap.value=U.alphaMap,u(U.alphaMap,z.alphaMapTransform)),U.bumpMap&&(z.bumpMap.value=U.bumpMap,u(U.bumpMap,z.bumpMapTransform),z.bumpScale.value=U.bumpScale,U.side===BackSide&&(z.bumpScale.value*=-1)),U.normalMap&&(z.normalMap.value=U.normalMap,u(U.normalMap,z.normalMapTransform),z.normalScale.value.copy(U.normalScale),U.side===BackSide&&z.normalScale.value.negate()),U.displacementMap&&(z.displacementMap.value=U.displacementMap,u(U.displacementMap,z.displacementMapTransform),z.displacementScale.value=U.displacementScale,z.displacementBias.value=U.displacementBias),U.emissiveMap&&(z.emissiveMap.value=U.emissiveMap,u(U.emissiveMap,z.emissiveMapTransform)),U.specularMap&&(z.specularMap.value=U.specularMap,u(U.specularMap,z.specularMapTransform)),U.alphaTest>0&&(z.alphaTest.value=U.alphaTest);const G=n.get(U),Y=G.envMap,K=G.envMapRotation;Y&&(z.envMap.value=Y,_e1.copy(K),_e1.x*=-1,_e1.y*=-1,_e1.z*=-1,Y.isCubeTexture&&Y.isRenderTargetTexture===!1&&(_e1.y*=-1,_e1.z*=-1),z.envMapRotation.value.setFromMatrix4(_m1.makeRotationFromEuler(_e1)),z.flipEnvMap.value=Y.isCubeTexture&&Y.isRenderTargetTexture===!1?-1:1,z.reflectivity.value=U.reflectivity,z.ior.value=U.ior,z.refractionRatio.value=U.refractionRatio),U.lightMap&&(z.lightMap.value=U.lightMap,z.lightMapIntensity.value=U.lightMapIntensity,u(U.lightMap,z.lightMapTransform)),U.aoMap&&(z.aoMap.value=U.aoMap,z.aoMapIntensity.value=U.aoMapIntensity,u(U.aoMap,z.aoMapTransform))}function A(z,U){z.diffuse.value.copy(U.color),z.opacity.value=U.opacity,U.map&&(z.map.value=U.map,u(U.map,z.mapTransform))}function w(z,U){z.dashSize.value=U.dashSize,z.totalSize.value=U.dashSize+U.gapSize,z.scale.value=U.scale}function C(z,U,G,Y){z.diffuse.value.copy(U.color),z.opacity.value=U.opacity,z.size.value=U.size*G,z.scale.value=Y*.5,U.map&&(z.map.value=U.map,u(U.map,z.uvTransform)),U.alphaMap&&(z.alphaMap.value=U.alphaMap,u(U.alphaMap,z.alphaMapTransform)),U.alphaTest>0&&(z.alphaTest.value=U.alphaTest)}function T(z,U){z.diffuse.value.copy(U.color),z.opacity.value=U.opacity,z.rotation.value=U.rotation,U.map&&(z.map.value=U.map,u(U.map,z.mapTransform)),U.alphaMap&&(z.alphaMap.value=U.alphaMap,u(U.alphaMap,z.alphaMapTransform)),U.alphaTest>0&&(z.alphaTest.value=U.alphaTest)}function R(z,U){z.specular.value.copy(U.specular),z.shininess.value=Math.max(U.shininess,1e-4)}function I(z,U){U.gradientMap&&(z.gradientMap.value=U.gradientMap)}function N(z,U){z.metalness.value=U.metalness,U.metalnessMap&&(z.metalnessMap.value=U.metalnessMap,u(U.metalnessMap,z.metalnessMapTransform)),z.roughness.value=U.roughness,U.roughnessMap&&(z.roughnessMap.value=U.roughnessMap,u(U.roughnessMap,z.roughnessMapTransform)),U.envMap&&(z.envMapIntensity.value=U.envMapIntensity)}function L(z,U,G){z.ior.value=U.ior,U.sheen>0&&(z.sheenColor.value.copy(U.sheenColor).multiplyScalar(U.sheen),z.sheenRoughness.value=U.sheenRoughness,U.sheenColorMap&&(z.sheenColorMap.value=U.sheenColorMap,u(U.sheenColorMap,z.sheenColorMapTransform)),U.sheenRoughnessMap&&(z.sheenRoughnessMap.value=U.sheenRoughnessMap,u(U.sheenRoughnessMap,z.sheenRoughnessMapTransform))),U.clearcoat>0&&(z.clearcoat.value=U.clearcoat,z.clearcoatRoughness.value=U.clearcoatRoughness,U.clearcoatMap&&(z.clearcoatMap.value=U.clearcoatMap,u(U.clearcoatMap,z.clearcoatMapTransform)),U.clearcoatRoughnessMap&&(z.clearcoatRoughnessMap.value=U.clearcoatRoughnessMap,u(U.clearcoatRoughnessMap,z.clearcoatRoughnessMapTransform)),U.clearcoatNormalMap&&(z.clearcoatNormalMap.value=U.clearcoatNormalMap,u(U.clearcoatNormalMap,z.clearcoatNormalMapTransform),z.clearcoatNormalScale.value.copy(U.clearcoatNormalScale),U.side===BackSide&&z.clearcoatNormalScale.value.negate())),U.dispersion>0&&(z.dispersion.value=U.dispersion),U.iridescence>0&&(z.iridescence.value=U.iridescence,z.iridescenceIOR.value=U.iridescenceIOR,z.iridescenceThicknessMinimum.value=U.iridescenceThicknessRange[0],z.iridescenceThicknessMaximum.value=U.iridescenceThicknessRange[1],U.iridescenceMap&&(z.iridescenceMap.value=U.iridescenceMap,u(U.iridescenceMap,z.iridescenceMapTransform)),U.iridescenceThicknessMap&&(z.iridescenceThicknessMap.value=U.iridescenceThicknessMap,u(U.iridescenceThicknessMap,z.iridescenceThicknessMapTransform))),U.transmission>0&&(z.transmission.value=U.transmission,z.transmissionSamplerMap.value=G.texture,z.transmissionSamplerSize.value.set(G.width,G.height),U.transmissionMap&&(z.transmissionMap.value=U.transmissionMap,u(U.transmissionMap,z.transmissionMapTransform)),z.thickness.value=U.thickness,U.thicknessMap&&(z.thicknessMap.value=U.thicknessMap,u(U.thicknessMap,z.thicknessMapTransform)),z.attenuationDistance.value=U.attenuationDistance,z.attenuationColor.value.copy(U.attenuationColor)),U.anisotropy>0&&(z.anisotropyVector.value.set(U.anisotropy*Math.cos(U.anisotropyRotation),U.anisotropy*Math.sin(U.anisotropyRotation)),U.anisotropyMap&&(z.anisotropyMap.value=U.anisotropyMap,u(U.anisotropyMap,z.anisotropyMapTransform))),z.specularIntensity.value=U.specularIntensity,z.specularColor.value.copy(U.specularColor),U.specularColorMap&&(z.specularColorMap.value=U.specularColorMap,u(U.specularColorMap,z.specularColorMapTransform)),U.specularIntensityMap&&(z.specularIntensityMap.value=U.specularIntensityMap,u(U.specularIntensityMap,z.specularIntensityMapTransform))}function F(z,U){U.matcap&&(z.matcap.value=U.matcap)}function H(z,U){const G=n.get(U).light;z.referencePosition.value.setFromMatrixPosition(G.matrixWorld),z.nearDistance.value=G.shadow.camera.near,z.farDistance.value=G.shadow.camera.far}return{refreshFogUniforms:f,refreshMaterialUniforms:y}}function WebGLUniformsGroups(s,n,u,f){let y={},S={},A=[];const w=s.getParameter(s.MAX_UNIFORM_BUFFER_BINDINGS);function C(G,Y){const K=Y.program;f.uniformBlockBinding(G,K)}function T(G,Y){let K=y[G.id];K===void 0&&(F(G),K=R(G),y[G.id]=K,G.addEventListener("dispose",z));const Z=Y.program;f.updateUBOMapping(G,Z);const J=n.render.frame;S[G.id]!==J&&(N(G),S[G.id]=J)}function R(G){const Y=I();G.__bindingPointIndex=Y;const K=s.createBuffer(),Z=G.__size,J=G.usage;return s.bindBuffer(s.UNIFORM_BUFFER,K),s.bufferData(s.UNIFORM_BUFFER,Z,J),s.bindBuffer(s.UNIFORM_BUFFER,null),s.bindBufferBase(s.UNIFORM_BUFFER,Y,K),K}function I(){for(let G=0;G<w;G++)if(A.indexOf(G)===-1)return A.push(G),G;return error("WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function N(G){const Y=y[G.id],K=G.uniforms,Z=G.__cache;s.bindBuffer(s.UNIFORM_BUFFER,Y);for(let J=0,te=K.length;J<te;J++){const de=Array.isArray(K[J])?K[J]:[K[J]];for(let se=0,ne=de.length;se<ne;se++){const ge=de[se];if(L(ge,J,se,Z)===!0){const Ee=ge.__offset,we=Array.isArray(ge.value)?ge.value:[ge.value];let Ie=0;for(let Be=0;Be<we.length;Be++){const Me=we[Be],Re=H(Me);typeof Me=="number"||typeof Me=="boolean"?(ge.__data[0]=Me,s.bufferSubData(s.UNIFORM_BUFFER,Ee+Ie,ge.__data)):Me.isMatrix3?(ge.__data[0]=Me.elements[0],ge.__data[1]=Me.elements[1],ge.__data[2]=Me.elements[2],ge.__data[3]=0,ge.__data[4]=Me.elements[3],ge.__data[5]=Me.elements[4],ge.__data[6]=Me.elements[5],ge.__data[7]=0,ge.__data[8]=Me.elements[6],ge.__data[9]=Me.elements[7],ge.__data[10]=Me.elements[8],ge.__data[11]=0):(Me.toArray(ge.__data,Ie),Ie+=Re.storage/Float32Array.BYTES_PER_ELEMENT)}s.bufferSubData(s.UNIFORM_BUFFER,Ee,ge.__data)}}}s.bindBuffer(s.UNIFORM_BUFFER,null)}function L(G,Y,K,Z){const J=G.value,te=Y+"_"+K;if(Z[te]===void 0)return typeof J=="number"||typeof J=="boolean"?Z[te]=J:Z[te]=J.clone(),!0;{const de=Z[te];if(typeof J=="number"||typeof J=="boolean"){if(de!==J)return Z[te]=J,!0}else if(de.equals(J)===!1)return de.copy(J),!0}return!1}function F(G){const Y=G.uniforms;let K=0;const Z=16;for(let te=0,de=Y.length;te<de;te++){const se=Array.isArray(Y[te])?Y[te]:[Y[te]];for(let ne=0,ge=se.length;ne<ge;ne++){const Ee=se[ne],we=Array.isArray(Ee.value)?Ee.value:[Ee.value];for(let Ie=0,Be=we.length;Ie<Be;Ie++){const Me=we[Ie],Re=H(Me),Te=K%Z,Se=Te%Re.boundary,oe=Te+Se;K+=Se,oe!==0&&Z-oe<Re.storage&&(K+=Z-oe),Ee.__data=new Float32Array(Re.storage/Float32Array.BYTES_PER_ELEMENT),Ee.__offset=K,K+=Re.storage}}}const J=K%Z;return J>0&&(K+=Z-J),G.__size=K,G.__cache={},this}function H(G){const Y={boundary:0,storage:0};return typeof G=="number"||typeof G=="boolean"?(Y.boundary=4,Y.storage=4):G.isVector2?(Y.boundary=8,Y.storage=8):G.isVector3||G.isColor?(Y.boundary=16,Y.storage=12):G.isVector4?(Y.boundary=16,Y.storage=16):G.isMatrix3?(Y.boundary=48,Y.storage=48):G.isMatrix4?(Y.boundary=64,Y.storage=64):G.isTexture?warn("WebGLRenderer: Texture samplers can not be part of an uniforms group."):warn("WebGLRenderer: Unsupported uniform value type.",G),Y}function z(G){const Y=G.target;Y.removeEventListener("dispose",z);const K=A.indexOf(Y.__bindingPointIndex);A.splice(K,1),s.deleteBuffer(y[Y.id]),delete y[Y.id],delete S[Y.id]}function U(){for(const G in y)s.deleteBuffer(y[G]);A=[],y={},S={}}return{bind:C,update:T,dispose:U}}const DATA=new Uint16Array([12469,15057,12620,14925,13266,14620,13807,14376,14323,13990,14545,13625,14713,13328,14840,12882,14931,12528,14996,12233,15039,11829,15066,11525,15080,11295,15085,10976,15082,10705,15073,10495,13880,14564,13898,14542,13977,14430,14158,14124,14393,13732,14556,13410,14702,12996,14814,12596,14891,12291,14937,11834,14957,11489,14958,11194,14943,10803,14921,10506,14893,10278,14858,9960,14484,14039,14487,14025,14499,13941,14524,13740,14574,13468,14654,13106,14743,12678,14818,12344,14867,11893,14889,11509,14893,11180,14881,10751,14852,10428,14812,10128,14765,9754,14712,9466,14764,13480,14764,13475,14766,13440,14766,13347,14769,13070,14786,12713,14816,12387,14844,11957,14860,11549,14868,11215,14855,10751,14825,10403,14782,10044,14729,9651,14666,9352,14599,9029,14967,12835,14966,12831,14963,12804,14954,12723,14936,12564,14917,12347,14900,11958,14886,11569,14878,11247,14859,10765,14828,10401,14784,10011,14727,9600,14660,9289,14586,8893,14508,8533,15111,12234,15110,12234,15104,12216,15092,12156,15067,12010,15028,11776,14981,11500,14942,11205,14902,10752,14861,10393,14812,9991,14752,9570,14682,9252,14603,8808,14519,8445,14431,8145,15209,11449,15208,11451,15202,11451,15190,11438,15163,11384,15117,11274,15055,10979,14994,10648,14932,10343,14871,9936,14803,9532,14729,9218,14645,8742,14556,8381,14461,8020,14365,7603,15273,10603,15272,10607,15267,10619,15256,10631,15231,10614,15182,10535,15118,10389,15042,10167,14963,9787,14883,9447,14800,9115,14710,8665,14615,8318,14514,7911,14411,7507,14279,7198,15314,9675,15313,9683,15309,9712,15298,9759,15277,9797,15229,9773,15166,9668,15084,9487,14995,9274,14898,8910,14800,8539,14697,8234,14590,7790,14479,7409,14367,7067,14178,6621,15337,8619,15337,8631,15333,8677,15325,8769,15305,8871,15264,8940,15202,8909,15119,8775,15022,8565,14916,8328,14804,8009,14688,7614,14569,7287,14448,6888,14321,6483,14088,6171,15350,7402,15350,7419,15347,7480,15340,7613,15322,7804,15287,7973,15229,8057,15148,8012,15046,7846,14933,7611,14810,7357,14682,7069,14552,6656,14421,6316,14251,5948,14007,5528,15356,5942,15356,5977,15353,6119,15348,6294,15332,6551,15302,6824,15249,7044,15171,7122,15070,7050,14949,6861,14818,6611,14679,6349,14538,6067,14398,5651,14189,5311,13935,4958,15359,4123,15359,4153,15356,4296,15353,4646,15338,5160,15311,5508,15263,5829,15188,6042,15088,6094,14966,6001,14826,5796,14678,5543,14527,5287,14377,4985,14133,4586,13869,4257,15360,1563,15360,1642,15358,2076,15354,2636,15341,3350,15317,4019,15273,4429,15203,4732,15105,4911,14981,4932,14836,4818,14679,4621,14517,4386,14359,4156,14083,3795,13808,3437,15360,122,15360,137,15358,285,15355,636,15344,1274,15322,2177,15281,2765,15215,3223,15120,3451,14995,3569,14846,3567,14681,3466,14511,3305,14344,3121,14037,2800,13753,2467,15360,0,15360,1,15359,21,15355,89,15346,253,15325,479,15287,796,15225,1148,15133,1492,15008,1749,14856,1882,14685,1886,14506,1783,14324,1608,13996,1398,13702,1183]);let lut=null;function getDFGLUT(){return lut===null&&(lut=new DataTexture(DATA,16,16,RGFormat,HalfFloatType),lut.name="DFG_LUT",lut.minFilter=LinearFilter,lut.magFilter=LinearFilter,lut.wrapS=ClampToEdgeWrapping,lut.wrapT=ClampToEdgeWrapping,lut.generateMipmaps=!1,lut.needsUpdate=!0),lut}class WebGLRenderer{constructor(n={}){const{canvas:u=createCanvasElement(),context:f=null,depth:y=!0,stencil:S=!1,alpha:A=!1,antialias:w=!1,premultipliedAlpha:C=!0,preserveDrawingBuffer:T=!1,powerPreference:R="default",failIfMajorPerformanceCaveat:I=!1,reversedDepthBuffer:N=!1,outputBufferType:L=UnsignedByteType}=n;this.isWebGLRenderer=!0;let F;if(f!==null){if(typeof WebGLRenderingContext<"u"&&f instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");F=f.getContextAttributes().alpha}else F=A;const H=L,z=new Set([RGBAIntegerFormat,RGIntegerFormat,RedIntegerFormat]),U=new Set([UnsignedByteType,UnsignedIntType,UnsignedShortType,UnsignedInt248Type,UnsignedShort4444Type,UnsignedShort5551Type]),G=new Uint32Array(4),Y=new Int32Array(4);let K=null,Z=null;const J=[],te=[];let de=null;this.domElement=u,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=NoToneMapping,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const se=this;let ne=!1;this._outputColorSpace=SRGBColorSpace$1;let ge=0,Ee=0,we=null,Ie=-1,Be=null;const Me=new Vector4,Re=new Vector4;let Te=null;const Se=new Color(0);let oe=0,ae=u.width,be=u.height,he=1,ue=null,ye=null;const ce=new Vector4(0,0,ae,be),_e=new Vector4(0,0,ae,be);let ke=!1;const Pe=new Frustum;let $e=!1,xe=!1;const Ne=new Matrix4,je=new Vector3,He=new Vector4,Ye={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Je=!1;function ot(){return we===null?he:1}let ze=f;function pt(Ke,_t){return u.getContext(Ke,_t)}try{const Ke={alpha:!0,depth:y,stencil:S,antialias:w,premultipliedAlpha:C,preserveDrawingBuffer:T,powerPreference:R,failIfMajorPerformanceCaveat:I};if("setAttribute"in u&&u.setAttribute("data-engine",`three.js r${REVISION}`),u.addEventListener("webglcontextlost",Mn,!1),u.addEventListener("webglcontextrestored",In,!1),u.addEventListener("webglcontextcreationerror",On,!1),ze===null){const _t="webgl2";if(ze=pt(_t,Ke),ze===null)throw pt(_t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(Ke){throw error("WebGLRenderer: "+Ke.message),Ke}let yt,ut,Et,qe,Le,lt,We,Qe,at,St,Ct,jt,Gt,Ft,ct,st,nt,At,Yt,ht,Tt,Kt,_n,Ht;function Ot(){yt=new WebGLExtensions(ze),yt.init(),Kt=new WebGLUtils(ze,yt),ut=new WebGLCapabilities(ze,yt,n,Kt),Et=new WebGLState(ze,yt),ut.reversedDepthBuffer&&N&&Et.buffers.depth.setReversed(!0),qe=new WebGLInfo(ze),Le=new WebGLProperties,lt=new WebGLTextures(ze,yt,Et,Le,ut,Kt,qe),We=new WebGLCubeMaps(se),Qe=new WebGLCubeUVMaps(se),at=new WebGLAttributes(ze),_n=new WebGLBindingStates(ze,at),St=new WebGLGeometries(ze,at,qe,_n),Ct=new WebGLObjects(ze,St,at,qe),Yt=new WebGLMorphtargets(ze,ut,lt),st=new WebGLClipping(Le),jt=new WebGLPrograms(se,We,Qe,yt,ut,_n,st),Gt=new WebGLMaterials(se,Le),Ft=new WebGLRenderLists,ct=new WebGLRenderStates(yt),At=new WebGLBackground(se,We,Qe,Et,Ct,F,C),nt=new WebGLShadowMap(se,Ct,ut),Ht=new WebGLUniformsGroups(ze,qe,ut,Et),ht=new WebGLBufferRenderer(ze,yt,qe),Tt=new WebGLIndexedBufferRenderer(ze,yt,qe),qe.programs=jt.programs,se.capabilities=ut,se.extensions=yt,se.properties=Le,se.renderLists=Ft,se.shadowMap=nt,se.state=Et,se.info=qe}Ot(),H!==UnsignedByteType&&(de=new WebGLOutput(H,u.width,u.height,y,S));const cn=new WebXRManager(se,ze);this.xr=cn,this.getContext=function(){return ze},this.getContextAttributes=function(){return ze.getContextAttributes()},this.forceContextLoss=function(){const Ke=yt.get("WEBGL_lose_context");Ke&&Ke.loseContext()},this.forceContextRestore=function(){const Ke=yt.get("WEBGL_lose_context");Ke&&Ke.restoreContext()},this.getPixelRatio=function(){return he},this.setPixelRatio=function(Ke){Ke!==void 0&&(he=Ke,this.setSize(ae,be,!1))},this.getSize=function(Ke){return Ke.set(ae,be)},this.setSize=function(Ke,_t,It=!0){if(cn.isPresenting){warn("WebGLRenderer: Can't change size while VR device is presenting.");return}ae=Ke,be=_t,u.width=Math.floor(Ke*he),u.height=Math.floor(_t*he),It===!0&&(u.style.width=Ke+"px",u.style.height=_t+"px"),de!==null&&de.setSize(u.width,u.height),this.setViewport(0,0,Ke,_t)},this.getDrawingBufferSize=function(Ke){return Ke.set(ae*he,be*he).floor()},this.setDrawingBufferSize=function(Ke,_t,It){ae=Ke,be=_t,he=It,u.width=Math.floor(Ke*It),u.height=Math.floor(_t*It),this.setViewport(0,0,Ke,_t)},this.setEffects=function(Ke){if(H===UnsignedByteType){console.error("THREE.WebGLRenderer: setEffects() requires outputBufferType set to HalfFloatType or FloatType.");return}if(Ke){for(let _t=0;_t<Ke.length;_t++)if(Ke[_t].isOutputPass===!0){console.warn("THREE.WebGLRenderer: OutputPass is not needed in setEffects(). Tone mapping and color space conversion are applied automatically.");break}}de.setEffects(Ke||[])},this.getCurrentViewport=function(Ke){return Ke.copy(Me)},this.getViewport=function(Ke){return Ke.copy(ce)},this.setViewport=function(Ke,_t,It,Nt){Ke.isVector4?ce.set(Ke.x,Ke.y,Ke.z,Ke.w):ce.set(Ke,_t,It,Nt),Et.viewport(Me.copy(ce).multiplyScalar(he).round())},this.getScissor=function(Ke){return Ke.copy(_e)},this.setScissor=function(Ke,_t,It,Nt){Ke.isVector4?_e.set(Ke.x,Ke.y,Ke.z,Ke.w):_e.set(Ke,_t,It,Nt),Et.scissor(Re.copy(_e).multiplyScalar(he).round())},this.getScissorTest=function(){return ke},this.setScissorTest=function(Ke){Et.setScissorTest(ke=Ke)},this.setOpaqueSort=function(Ke){ue=Ke},this.setTransparentSort=function(Ke){ye=Ke},this.getClearColor=function(Ke){return Ke.copy(At.getClearColor())},this.setClearColor=function(){At.setClearColor(...arguments)},this.getClearAlpha=function(){return At.getClearAlpha()},this.setClearAlpha=function(){At.setClearAlpha(...arguments)},this.clear=function(Ke=!0,_t=!0,It=!0){let Nt=0;if(Ke){let Mt=!1;if(we!==null){const on=we.texture.format;Mt=z.has(on)}if(Mt){const on=we.texture.type,dn=U.has(on),ln=At.getClearColor(),kn=At.getClearAlpha(),An=ln.r,Gn=ln.g,Tn=ln.b;dn?(G[0]=An,G[1]=Gn,G[2]=Tn,G[3]=kn,ze.clearBufferuiv(ze.COLOR,0,G)):(Y[0]=An,Y[1]=Gn,Y[2]=Tn,Y[3]=kn,ze.clearBufferiv(ze.COLOR,0,Y))}else Nt|=ze.COLOR_BUFFER_BIT}_t&&(Nt|=ze.DEPTH_BUFFER_BIT),It&&(Nt|=ze.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ze.clear(Nt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){u.removeEventListener("webglcontextlost",Mn,!1),u.removeEventListener("webglcontextrestored",In,!1),u.removeEventListener("webglcontextcreationerror",On,!1),At.dispose(),Ft.dispose(),ct.dispose(),Le.dispose(),We.dispose(),Qe.dispose(),Ct.dispose(),_n.dispose(),Ht.dispose(),jt.dispose(),cn.dispose(),cn.removeEventListener("sessionstart",mr),cn.removeEventListener("sessionend",ir),zn.stop()};function Mn(Ke){Ke.preventDefault(),log("WebGLRenderer: Context Lost."),ne=!0}function In(){log("WebGLRenderer: Context Restored."),ne=!1;const Ke=qe.autoReset,_t=nt.enabled,It=nt.autoUpdate,Nt=nt.needsUpdate,Mt=nt.type;Ot(),qe.autoReset=Ke,nt.enabled=_t,nt.autoUpdate=It,nt.needsUpdate=Nt,nt.type=Mt}function On(Ke){error("WebGLRenderer: A WebGL context could not be created. Reason: ",Ke.statusMessage)}function rr(Ke){const _t=Ke.target;_t.removeEventListener("dispose",rr),Ar(_t)}function Ar(Ke){hr(Ke),Le.remove(Ke)}function hr(Ke){const _t=Le.get(Ke).programs;_t!==void 0&&(_t.forEach(function(It){jt.releaseProgram(It)}),Ke.isShaderMaterial&&jt.releaseShaderCache(Ke))}this.renderBufferDirect=function(Ke,_t,It,Nt,Mt,on){_t===null&&(_t=Ye);const dn=Mt.isMesh&&Mt.matrixWorld.determinant()<0,ln=pn(Ke,_t,It,Nt,Mt);Et.setMaterial(Nt,dn);let kn=It.index,An=1;if(Nt.wireframe===!0){if(kn=St.getWireframeAttribute(It),kn===void 0)return;An=2}const Gn=It.drawRange,Tn=It.attributes.position;let Bn=Gn.start*An,nr=(Gn.start+Gn.count)*An;on!==null&&(Bn=Math.max(Bn,on.start*An),nr=Math.min(nr,(on.start+on.count)*An)),kn!==null?(Bn=Math.max(Bn,0),nr=Math.min(nr,kn.count)):Tn!=null&&(Bn=Math.max(Bn,0),nr=Math.min(nr,Tn.count));const Nr=nr-Bn;if(Nr<0||Nr===1/0)return;_n.setup(Mt,Nt,ln,It,kn);let ar,Pn=ht;if(kn!==null&&(ar=at.get(kn),Pn=Tt,Pn.setIndex(ar)),Mt.isMesh)Nt.wireframe===!0?(Et.setLineWidth(Nt.wireframeLinewidth*ot()),Pn.setMode(ze.LINES)):Pn.setMode(ze.TRIANGLES);else if(Mt.isLine){let fn=Nt.linewidth;fn===void 0&&(fn=1),Et.setLineWidth(fn*ot()),Mt.isLineSegments?Pn.setMode(ze.LINES):Mt.isLineLoop?Pn.setMode(ze.LINE_LOOP):Pn.setMode(ze.LINE_STRIP)}else Mt.isPoints?Pn.setMode(ze.POINTS):Mt.isSprite&&Pn.setMode(ze.TRIANGLES);if(Mt.isBatchedMesh)if(Mt._multiDrawInstances!==null)warnOnce("WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),Pn.renderMultiDrawInstances(Mt._multiDrawStarts,Mt._multiDrawCounts,Mt._multiDrawCount,Mt._multiDrawInstances);else if(yt.get("WEBGL_multi_draw"))Pn.renderMultiDraw(Mt._multiDrawStarts,Mt._multiDrawCounts,Mt._multiDrawCount);else{const fn=Mt._multiDrawStarts,Vn=Mt._multiDrawCounts,Rn=Mt._multiDrawCount,Mr=kn?at.get(kn).bytesPerElement:1,fi=Le.get(Nt).currentProgram.getUniforms();for(let dr=0;dr<Rn;dr++)fi.setValue(ze,"_gl_DrawID",dr),Pn.render(fn[dr]/Mr,Vn[dr])}else if(Mt.isInstancedMesh)Pn.renderInstances(Bn,Nr,Mt.count);else if(It.isInstancedBufferGeometry){const fn=It._maxInstanceCount!==void 0?It._maxInstanceCount:1/0,Vn=Math.min(It.instanceCount,fn);Pn.renderInstances(Bn,Nr,Vn)}else Pn.render(Bn,Nr)};function Yr(Ke,_t,It){Ke.transparent===!0&&Ke.side===DoubleSide&&Ke.forceSinglePass===!1?(Ke.side=BackSide,Ke.needsUpdate=!0,$t(Ke,_t,It),Ke.side=FrontSide,Ke.needsUpdate=!0,$t(Ke,_t,It),Ke.side=DoubleSide):$t(Ke,_t,It)}this.compile=function(Ke,_t,It=null){It===null&&(It=Ke),Z=ct.get(It),Z.init(_t),te.push(Z),It.traverseVisible(function(Mt){Mt.isLight&&Mt.layers.test(_t.layers)&&(Z.pushLight(Mt),Mt.castShadow&&Z.pushShadow(Mt))}),Ke!==It&&Ke.traverseVisible(function(Mt){Mt.isLight&&Mt.layers.test(_t.layers)&&(Z.pushLight(Mt),Mt.castShadow&&Z.pushShadow(Mt))}),Z.setupLights();const Nt=new Set;return Ke.traverse(function(Mt){if(!(Mt.isMesh||Mt.isPoints||Mt.isLine||Mt.isSprite))return;const on=Mt.material;if(on)if(Array.isArray(on))for(let dn=0;dn<on.length;dn++){const ln=on[dn];Yr(ln,It,Mt),Nt.add(ln)}else Yr(on,It,Mt),Nt.add(on)}),Z=te.pop(),Nt},this.compileAsync=function(Ke,_t,It=null){const Nt=this.compile(Ke,_t,It);return new Promise(Mt=>{function on(){if(Nt.forEach(function(dn){Le.get(dn).currentProgram.isReady()&&Nt.delete(dn)}),Nt.size===0){Mt(Ke);return}setTimeout(on,10)}yt.get("KHR_parallel_shader_compile")!==null?on():setTimeout(on,10)})};let $r=null;function wr(Ke){$r&&$r(Ke)}function mr(){zn.stop()}function ir(){zn.start()}const zn=new WebGLAnimation;zn.setAnimationLoop(wr),typeof self<"u"&&zn.setContext(self),this.setAnimationLoop=function(Ke){$r=Ke,cn.setAnimationLoop(Ke),Ke===null?zn.stop():zn.start()},cn.addEventListener("sessionstart",mr),cn.addEventListener("sessionend",ir),this.render=function(Ke,_t){if(_t!==void 0&&_t.isCamera!==!0){error("WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(ne===!0)return;const It=cn.enabled===!0&&cn.isPresenting===!0,Nt=de!==null&&(we===null||It)&&de.begin(se,we);if(Ke.matrixWorldAutoUpdate===!0&&Ke.updateMatrixWorld(),_t.parent===null&&_t.matrixWorldAutoUpdate===!0&&_t.updateMatrixWorld(),cn.enabled===!0&&cn.isPresenting===!0&&(de===null||de.isCompositing()===!1)&&(cn.cameraAutoUpdate===!0&&cn.updateCamera(_t),_t=cn.getCamera()),Ke.isScene===!0&&Ke.onBeforeRender(se,Ke,_t,we),Z=ct.get(Ke,te.length),Z.init(_t),te.push(Z),Ne.multiplyMatrices(_t.projectionMatrix,_t.matrixWorldInverse),Pe.setFromProjectionMatrix(Ne,WebGLCoordinateSystem,_t.reversedDepth),xe=this.localClippingEnabled,$e=st.init(this.clippingPlanes,xe),K=Ft.get(Ke,J.length),K.init(),J.push(K),cn.enabled===!0&&cn.isPresenting===!0){const dn=se.xr.getDepthSensingMesh();dn!==null&&Lr(dn,_t,-1/0,se.sortObjects)}Lr(Ke,_t,0,se.sortObjects),K.finish(),se.sortObjects===!0&&K.sort(ue,ye),Je=cn.enabled===!1||cn.isPresenting===!1||cn.hasDepthSensing()===!1,Je&&At.addToRenderList(K,Ke),this.info.render.frame++,$e===!0&&st.beginShadows();const Mt=Z.state.shadowsArray;if(nt.render(Mt,Ke,_t),$e===!0&&st.endShadows(),this.info.autoReset===!0&&this.info.reset(),(Nt&&de.hasRenderPass())===!1){const dn=K.opaque,ln=K.transmissive;if(Z.setupLights(),_t.isArrayCamera){const kn=_t.cameras;if(ln.length>0)for(let An=0,Gn=kn.length;An<Gn;An++){const Tn=kn[An];Xe(dn,ln,Ke,Tn)}Je&&At.render(Ke);for(let An=0,Gn=kn.length;An<Gn;An++){const Tn=kn[An];Hr(K,Ke,Tn,Tn.viewport)}}else ln.length>0&&Xe(dn,ln,Ke,_t),Je&&At.render(Ke),Hr(K,Ke,_t)}we!==null&&Ee===0&&(lt.updateMultisampleRenderTarget(we),lt.updateRenderTargetMipmap(we)),Nt&&de.end(se),Ke.isScene===!0&&Ke.onAfterRender(se,Ke,_t),_n.resetDefaultState(),Ie=-1,Be=null,te.pop(),te.length>0?(Z=te[te.length-1],$e===!0&&st.setGlobalState(se.clippingPlanes,Z.state.camera)):Z=null,J.pop(),J.length>0?K=J[J.length-1]:K=null};function Lr(Ke,_t,It,Nt){if(Ke.visible===!1)return;if(Ke.layers.test(_t.layers)){if(Ke.isGroup)It=Ke.renderOrder;else if(Ke.isLOD)Ke.autoUpdate===!0&&Ke.update(_t);else if(Ke.isLight)Z.pushLight(Ke),Ke.castShadow&&Z.pushShadow(Ke);else if(Ke.isSprite){if(!Ke.frustumCulled||Pe.intersectsSprite(Ke)){Nt&&He.setFromMatrixPosition(Ke.matrixWorld).applyMatrix4(Ne);const dn=Ct.update(Ke),ln=Ke.material;ln.visible&&K.push(Ke,dn,ln,It,He.z,null)}}else if((Ke.isMesh||Ke.isLine||Ke.isPoints)&&(!Ke.frustumCulled||Pe.intersectsObject(Ke))){const dn=Ct.update(Ke),ln=Ke.material;if(Nt&&(Ke.boundingSphere!==void 0?(Ke.boundingSphere===null&&Ke.computeBoundingSphere(),He.copy(Ke.boundingSphere.center)):(dn.boundingSphere===null&&dn.computeBoundingSphere(),He.copy(dn.boundingSphere.center)),He.applyMatrix4(Ke.matrixWorld).applyMatrix4(Ne)),Array.isArray(ln)){const kn=dn.groups;for(let An=0,Gn=kn.length;An<Gn;An++){const Tn=kn[An],Bn=ln[Tn.materialIndex];Bn&&Bn.visible&&K.push(Ke,dn,Bn,It,He.z,Tn)}}else ln.visible&&K.push(Ke,dn,ln,It,He.z,null)}}const on=Ke.children;for(let dn=0,ln=on.length;dn<ln;dn++)Lr(on[dn],_t,It,Nt)}function Hr(Ke,_t,It,Nt){const{opaque:Mt,transmissive:on,transparent:dn}=Ke;Z.setupLightsView(It),$e===!0&&st.setGlobalState(se.clippingPlanes,It),Nt&&Et.viewport(Me.copy(Nt)),Mt.length>0&&it(Mt,_t,It),on.length>0&&it(on,_t,It),dn.length>0&&it(dn,_t,It),Et.buffers.depth.setTest(!0),Et.buffers.depth.setMask(!0),Et.buffers.color.setMask(!0),Et.setPolygonOffset(!1)}function Xe(Ke,_t,It,Nt){if((It.isScene===!0?It.overrideMaterial:null)!==null)return;if(Z.state.transmissionRenderTarget[Nt.id]===void 0){const Bn=yt.has("EXT_color_buffer_half_float")||yt.has("EXT_color_buffer_float");Z.state.transmissionRenderTarget[Nt.id]=new WebGLRenderTarget(1,1,{generateMipmaps:!0,type:Bn?HalfFloatType:UnsignedByteType,minFilter:LinearMipmapLinearFilter,samples:ut.samples,stencilBuffer:S,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:ColorManagement.workingColorSpace})}const on=Z.state.transmissionRenderTarget[Nt.id],dn=Nt.viewport||Me;on.setSize(dn.z*se.transmissionResolutionScale,dn.w*se.transmissionResolutionScale);const ln=se.getRenderTarget(),kn=se.getActiveCubeFace(),An=se.getActiveMipmapLevel();se.setRenderTarget(on),se.getClearColor(Se),oe=se.getClearAlpha(),oe<1&&se.setClearColor(16777215,.5),se.clear(),Je&&At.render(It);const Gn=se.toneMapping;se.toneMapping=NoToneMapping;const Tn=Nt.viewport;if(Nt.viewport!==void 0&&(Nt.viewport=void 0),Z.setupLightsView(Nt),$e===!0&&st.setGlobalState(se.clippingPlanes,Nt),it(Ke,It,Nt),lt.updateMultisampleRenderTarget(on),lt.updateRenderTargetMipmap(on),yt.has("WEBGL_multisampled_render_to_texture")===!1){let Bn=!1;for(let nr=0,Nr=_t.length;nr<Nr;nr++){const ar=_t[nr],{object:Pn,geometry:fn,material:Vn,group:Rn}=ar;if(Vn.side===DoubleSide&&Pn.layers.test(Nt.layers)){const Mr=Vn.side;Vn.side=BackSide,Vn.needsUpdate=!0,xt(Pn,It,Nt,fn,Vn,Rn),Vn.side=Mr,Vn.needsUpdate=!0,Bn=!0}}Bn===!0&&(lt.updateMultisampleRenderTarget(on),lt.updateRenderTargetMipmap(on))}se.setRenderTarget(ln,kn,An),se.setClearColor(Se,oe),Tn!==void 0&&(Nt.viewport=Tn),se.toneMapping=Gn}function it(Ke,_t,It){const Nt=_t.isScene===!0?_t.overrideMaterial:null;for(let Mt=0,on=Ke.length;Mt<on;Mt++){const dn=Ke[Mt],{object:ln,geometry:kn,group:An}=dn;let Gn=dn.material;Gn.allowOverride===!0&&Nt!==null&&(Gn=Nt),ln.layers.test(It.layers)&&xt(ln,_t,It,kn,Gn,An)}}function xt(Ke,_t,It,Nt,Mt,on){Ke.onBeforeRender(se,_t,It,Nt,Mt,on),Ke.modelViewMatrix.multiplyMatrices(It.matrixWorldInverse,Ke.matrixWorld),Ke.normalMatrix.getNormalMatrix(Ke.modelViewMatrix),Mt.onBeforeRender(se,_t,It,Nt,Ke,on),Mt.transparent===!0&&Mt.side===DoubleSide&&Mt.forceSinglePass===!1?(Mt.side=BackSide,Mt.needsUpdate=!0,se.renderBufferDirect(It,_t,Nt,Mt,Ke,on),Mt.side=FrontSide,Mt.needsUpdate=!0,se.renderBufferDirect(It,_t,Nt,Mt,Ke,on),Mt.side=DoubleSide):se.renderBufferDirect(It,_t,Nt,Mt,Ke,on),Ke.onAfterRender(se,_t,It,Nt,Mt,on)}function $t(Ke,_t,It){_t.isScene!==!0&&(_t=Ye);const Nt=Le.get(Ke),Mt=Z.state.lights,on=Z.state.shadowsArray,dn=Mt.state.version,ln=jt.getParameters(Ke,Mt.state,on,_t,It),kn=jt.getProgramCacheKey(ln);let An=Nt.programs;Nt.environment=Ke.isMeshStandardMaterial?_t.environment:null,Nt.fog=_t.fog,Nt.envMap=(Ke.isMeshStandardMaterial?Qe:We).get(Ke.envMap||Nt.environment),Nt.envMapRotation=Nt.environment!==null&&Ke.envMap===null?_t.environmentRotation:Ke.envMapRotation,An===void 0&&(Ke.addEventListener("dispose",rr),An=new Map,Nt.programs=An);let Gn=An.get(kn);if(Gn!==void 0){if(Nt.currentProgram===Gn&&Nt.lightsStateVersion===dn)return Qt(Ke,ln),Gn}else ln.uniforms=jt.getUniforms(Ke),Ke.onBeforeCompile(ln,se),Gn=jt.acquireProgram(ln,kn),An.set(kn,Gn),Nt.uniforms=ln.uniforms;const Tn=Nt.uniforms;return(!Ke.isShaderMaterial&&!Ke.isRawShaderMaterial||Ke.clipping===!0)&&(Tn.clippingPlanes=st.uniform),Qt(Ke,ln),Nt.needsLights=bn(Ke),Nt.lightsStateVersion=dn,Nt.needsLights&&(Tn.ambientLightColor.value=Mt.state.ambient,Tn.lightProbe.value=Mt.state.probe,Tn.directionalLights.value=Mt.state.directional,Tn.directionalLightShadows.value=Mt.state.directionalShadow,Tn.spotLights.value=Mt.state.spot,Tn.spotLightShadows.value=Mt.state.spotShadow,Tn.rectAreaLights.value=Mt.state.rectArea,Tn.ltc_1.value=Mt.state.rectAreaLTC1,Tn.ltc_2.value=Mt.state.rectAreaLTC2,Tn.pointLights.value=Mt.state.point,Tn.pointLightShadows.value=Mt.state.pointShadow,Tn.hemisphereLights.value=Mt.state.hemi,Tn.directionalShadowMap.value=Mt.state.directionalShadowMap,Tn.directionalShadowMatrix.value=Mt.state.directionalShadowMatrix,Tn.spotShadowMap.value=Mt.state.spotShadowMap,Tn.spotLightMatrix.value=Mt.state.spotLightMatrix,Tn.spotLightMap.value=Mt.state.spotLightMap,Tn.pointShadowMap.value=Mt.state.pointShadowMap,Tn.pointShadowMatrix.value=Mt.state.pointShadowMatrix),Nt.currentProgram=Gn,Nt.uniformsList=null,Gn}function en(Ke){if(Ke.uniformsList===null){const _t=Ke.currentProgram.getUniforms();Ke.uniformsList=WebGLUniforms.seqWithValue(_t.seq,Ke.uniforms)}return Ke.uniformsList}function Qt(Ke,_t){const It=Le.get(Ke);It.outputColorSpace=_t.outputColorSpace,It.batching=_t.batching,It.batchingColor=_t.batchingColor,It.instancing=_t.instancing,It.instancingColor=_t.instancingColor,It.instancingMorph=_t.instancingMorph,It.skinning=_t.skinning,It.morphTargets=_t.morphTargets,It.morphNormals=_t.morphNormals,It.morphColors=_t.morphColors,It.morphTargetsCount=_t.morphTargetsCount,It.numClippingPlanes=_t.numClippingPlanes,It.numIntersection=_t.numClipIntersection,It.vertexAlphas=_t.vertexAlphas,It.vertexTangents=_t.vertexTangents,It.toneMapping=_t.toneMapping}function pn(Ke,_t,It,Nt,Mt){_t.isScene!==!0&&(_t=Ye),lt.resetTextureUnits();const on=_t.fog,dn=Nt.isMeshStandardMaterial?_t.environment:null,ln=we===null?se.outputColorSpace:we.isXRRenderTarget===!0?we.texture.colorSpace:LinearSRGBColorSpace$1,kn=(Nt.isMeshStandardMaterial?Qe:We).get(Nt.envMap||dn),An=Nt.vertexColors===!0&&!!It.attributes.color&&It.attributes.color.itemSize===4,Gn=!!It.attributes.tangent&&(!!Nt.normalMap||Nt.anisotropy>0),Tn=!!It.morphAttributes.position,Bn=!!It.morphAttributes.normal,nr=!!It.morphAttributes.color;let Nr=NoToneMapping;Nt.toneMapped&&(we===null||we.isXRRenderTarget===!0)&&(Nr=se.toneMapping);const ar=It.morphAttributes.position||It.morphAttributes.normal||It.morphAttributes.color,Pn=ar!==void 0?ar.length:0,fn=Le.get(Nt),Vn=Z.state.lights;if($e===!0&&(xe===!0||Ke!==Be)){const pi=Ke===Be&&Nt.id===Ie;st.setState(Nt,Ke,pi)}let Rn=!1;Nt.version===fn.__version?(fn.needsLights&&fn.lightsStateVersion!==Vn.state.version||fn.outputColorSpace!==ln||Mt.isBatchedMesh&&fn.batching===!1||!Mt.isBatchedMesh&&fn.batching===!0||Mt.isBatchedMesh&&fn.batchingColor===!0&&Mt.colorTexture===null||Mt.isBatchedMesh&&fn.batchingColor===!1&&Mt.colorTexture!==null||Mt.isInstancedMesh&&fn.instancing===!1||!Mt.isInstancedMesh&&fn.instancing===!0||Mt.isSkinnedMesh&&fn.skinning===!1||!Mt.isSkinnedMesh&&fn.skinning===!0||Mt.isInstancedMesh&&fn.instancingColor===!0&&Mt.instanceColor===null||Mt.isInstancedMesh&&fn.instancingColor===!1&&Mt.instanceColor!==null||Mt.isInstancedMesh&&fn.instancingMorph===!0&&Mt.morphTexture===null||Mt.isInstancedMesh&&fn.instancingMorph===!1&&Mt.morphTexture!==null||fn.envMap!==kn||Nt.fog===!0&&fn.fog!==on||fn.numClippingPlanes!==void 0&&(fn.numClippingPlanes!==st.numPlanes||fn.numIntersection!==st.numIntersection)||fn.vertexAlphas!==An||fn.vertexTangents!==Gn||fn.morphTargets!==Tn||fn.morphNormals!==Bn||fn.morphColors!==nr||fn.toneMapping!==Nr||fn.morphTargetsCount!==Pn)&&(Rn=!0):(Rn=!0,fn.__version=Nt.version);let Mr=fn.currentProgram;Rn===!0&&(Mr=$t(Nt,_t,Mt));let fi=!1,dr=!1,si=!1;const Or=Mr.getUniforms(),li=fn.uniforms;if(Et.useProgram(Mr.program)&&(fi=!0,dr=!0,si=!0),Nt.id!==Ie&&(Ie=Nt.id,dr=!0),fi||Be!==Ke){Et.buffers.depth.getReversed()&&Ke.reversedDepth!==!0&&(Ke._reversedDepth=!0,Ke.updateProjectionMatrix()),Or.setValue(ze,"projectionMatrix",Ke.projectionMatrix),Or.setValue(ze,"viewMatrix",Ke.matrixWorldInverse);const xi=Or.map.cameraPosition;xi!==void 0&&xi.setValue(ze,je.setFromMatrixPosition(Ke.matrixWorld)),ut.logarithmicDepthBuffer&&Or.setValue(ze,"logDepthBufFC",2/(Math.log(Ke.far+1)/Math.LN2)),(Nt.isMeshPhongMaterial||Nt.isMeshToonMaterial||Nt.isMeshLambertMaterial||Nt.isMeshBasicMaterial||Nt.isMeshStandardMaterial||Nt.isShaderMaterial)&&Or.setValue(ze,"isOrthographic",Ke.isOrthographicCamera===!0),Be!==Ke&&(Be=Ke,dr=!0,si=!0)}if(fn.needsLights&&(Vn.state.directionalShadowMap.length>0&&Or.setValue(ze,"directionalShadowMap",Vn.state.directionalShadowMap,lt),Vn.state.spotShadowMap.length>0&&Or.setValue(ze,"spotShadowMap",Vn.state.spotShadowMap,lt),Vn.state.pointShadowMap.length>0&&Or.setValue(ze,"pointShadowMap",Vn.state.pointShadowMap,lt)),Mt.isSkinnedMesh){Or.setOptional(ze,Mt,"bindMatrix"),Or.setOptional(ze,Mt,"bindMatrixInverse");const pi=Mt.skeleton;pi&&(pi.boneTexture===null&&pi.computeBoneTexture(),Or.setValue(ze,"boneTexture",pi.boneTexture,lt))}Mt.isBatchedMesh&&(Or.setOptional(ze,Mt,"batchingTexture"),Or.setValue(ze,"batchingTexture",Mt._matricesTexture,lt),Or.setOptional(ze,Mt,"batchingIdTexture"),Or.setValue(ze,"batchingIdTexture",Mt._indirectTexture,lt),Or.setOptional(ze,Mt,"batchingColorTexture"),Mt._colorsTexture!==null&&Or.setValue(ze,"batchingColorTexture",Mt._colorsTexture,lt));const ci=It.morphAttributes;if((ci.position!==void 0||ci.normal!==void 0||ci.color!==void 0)&&Yt.update(Mt,It,Mr),(dr||fn.receiveShadow!==Mt.receiveShadow)&&(fn.receiveShadow=Mt.receiveShadow,Or.setValue(ze,"receiveShadow",Mt.receiveShadow)),Nt.isMeshGouraudMaterial&&Nt.envMap!==null&&(li.envMap.value=kn,li.flipEnvMap.value=kn.isCubeTexture&&kn.isRenderTargetTexture===!1?-1:1),Nt.isMeshStandardMaterial&&Nt.envMap===null&&_t.environment!==null&&(li.envMapIntensity.value=_t.environmentIntensity),li.dfgLUT!==void 0&&(li.dfgLUT.value=getDFGLUT()),dr&&(Or.setValue(ze,"toneMappingExposure",se.toneMappingExposure),fn.needsLights&&mn(li,si),on&&Nt.fog===!0&&Gt.refreshFogUniforms(li,on),Gt.refreshMaterialUniforms(li,Nt,he,be,Z.state.transmissionRenderTarget[Ke.id]),WebGLUniforms.upload(ze,en(fn),li,lt)),Nt.isShaderMaterial&&Nt.uniformsNeedUpdate===!0&&(WebGLUniforms.upload(ze,en(fn),li,lt),Nt.uniformsNeedUpdate=!1),Nt.isSpriteMaterial&&Or.setValue(ze,"center",Mt.center),Or.setValue(ze,"modelViewMatrix",Mt.modelViewMatrix),Or.setValue(ze,"normalMatrix",Mt.normalMatrix),Or.setValue(ze,"modelMatrix",Mt.matrixWorld),Nt.isShaderMaterial||Nt.isRawShaderMaterial){const pi=Nt.uniformsGroups;for(let xi=0,va=pi.length;xi<va;xi++){const Ce=pi[xi];Ht.update(Ce,Mr),Ht.bind(Ce,Mr)}}return Mr}function mn(Ke,_t){Ke.ambientLightColor.needsUpdate=_t,Ke.lightProbe.needsUpdate=_t,Ke.directionalLights.needsUpdate=_t,Ke.directionalLightShadows.needsUpdate=_t,Ke.pointLights.needsUpdate=_t,Ke.pointLightShadows.needsUpdate=_t,Ke.spotLights.needsUpdate=_t,Ke.spotLightShadows.needsUpdate=_t,Ke.rectAreaLights.needsUpdate=_t,Ke.hemisphereLights.needsUpdate=_t}function bn(Ke){return Ke.isMeshLambertMaterial||Ke.isMeshToonMaterial||Ke.isMeshPhongMaterial||Ke.isMeshStandardMaterial||Ke.isShadowMaterial||Ke.isShaderMaterial&&Ke.lights===!0}this.getActiveCubeFace=function(){return ge},this.getActiveMipmapLevel=function(){return Ee},this.getRenderTarget=function(){return we},this.setRenderTargetTextures=function(Ke,_t,It){const Nt=Le.get(Ke);Nt.__autoAllocateDepthBuffer=Ke.resolveDepthBuffer===!1,Nt.__autoAllocateDepthBuffer===!1&&(Nt.__useRenderToTexture=!1),Le.get(Ke.texture).__webglTexture=_t,Le.get(Ke.depthTexture).__webglTexture=Nt.__autoAllocateDepthBuffer?void 0:It,Nt.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(Ke,_t){const It=Le.get(Ke);It.__webglFramebuffer=_t,It.__useDefaultFramebuffer=_t===void 0};const vn=ze.createFramebuffer();this.setRenderTarget=function(Ke,_t=0,It=0){we=Ke,ge=_t,Ee=It;let Nt=null,Mt=!1,on=!1;if(Ke){const ln=Le.get(Ke);if(ln.__useDefaultFramebuffer!==void 0){Et.bindFramebuffer(ze.FRAMEBUFFER,ln.__webglFramebuffer),Me.copy(Ke.viewport),Re.copy(Ke.scissor),Te=Ke.scissorTest,Et.viewport(Me),Et.scissor(Re),Et.setScissorTest(Te),Ie=-1;return}else if(ln.__webglFramebuffer===void 0)lt.setupRenderTarget(Ke);else if(ln.__hasExternalTextures)lt.rebindTextures(Ke,Le.get(Ke.texture).__webglTexture,Le.get(Ke.depthTexture).__webglTexture);else if(Ke.depthBuffer){const Gn=Ke.depthTexture;if(ln.__boundDepthTexture!==Gn){if(Gn!==null&&Le.has(Gn)&&(Ke.width!==Gn.image.width||Ke.height!==Gn.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");lt.setupDepthRenderbuffer(Ke)}}const kn=Ke.texture;(kn.isData3DTexture||kn.isDataArrayTexture||kn.isCompressedArrayTexture)&&(on=!0);const An=Le.get(Ke).__webglFramebuffer;Ke.isWebGLCubeRenderTarget?(Array.isArray(An[_t])?Nt=An[_t][It]:Nt=An[_t],Mt=!0):Ke.samples>0&&lt.useMultisampledRTT(Ke)===!1?Nt=Le.get(Ke).__webglMultisampledFramebuffer:Array.isArray(An)?Nt=An[It]:Nt=An,Me.copy(Ke.viewport),Re.copy(Ke.scissor),Te=Ke.scissorTest}else Me.copy(ce).multiplyScalar(he).floor(),Re.copy(_e).multiplyScalar(he).floor(),Te=ke;if(It!==0&&(Nt=vn),Et.bindFramebuffer(ze.FRAMEBUFFER,Nt)&&Et.drawBuffers(Ke,Nt),Et.viewport(Me),Et.scissor(Re),Et.setScissorTest(Te),Mt){const ln=Le.get(Ke.texture);ze.framebufferTexture2D(ze.FRAMEBUFFER,ze.COLOR_ATTACHMENT0,ze.TEXTURE_CUBE_MAP_POSITIVE_X+_t,ln.__webglTexture,It)}else if(on){const ln=_t;for(let kn=0;kn<Ke.textures.length;kn++){const An=Le.get(Ke.textures[kn]);ze.framebufferTextureLayer(ze.FRAMEBUFFER,ze.COLOR_ATTACHMENT0+kn,An.__webglTexture,It,ln)}}else if(Ke!==null&&It!==0){const ln=Le.get(Ke.texture);ze.framebufferTexture2D(ze.FRAMEBUFFER,ze.COLOR_ATTACHMENT0,ze.TEXTURE_2D,ln.__webglTexture,It)}Ie=-1},this.readRenderTargetPixels=function(Ke,_t,It,Nt,Mt,on,dn,ln=0){if(!(Ke&&Ke.isWebGLRenderTarget)){error("WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let kn=Le.get(Ke).__webglFramebuffer;if(Ke.isWebGLCubeRenderTarget&&dn!==void 0&&(kn=kn[dn]),kn){Et.bindFramebuffer(ze.FRAMEBUFFER,kn);try{const An=Ke.textures[ln],Gn=An.format,Tn=An.type;if(!ut.textureFormatReadable(Gn)){error("WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!ut.textureTypeReadable(Tn)){error("WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}_t>=0&&_t<=Ke.width-Nt&&It>=0&&It<=Ke.height-Mt&&(Ke.textures.length>1&&ze.readBuffer(ze.COLOR_ATTACHMENT0+ln),ze.readPixels(_t,It,Nt,Mt,Kt.convert(Gn),Kt.convert(Tn),on))}finally{const An=we!==null?Le.get(we).__webglFramebuffer:null;Et.bindFramebuffer(ze.FRAMEBUFFER,An)}}},this.readRenderTargetPixelsAsync=async function(Ke,_t,It,Nt,Mt,on,dn,ln=0){if(!(Ke&&Ke.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let kn=Le.get(Ke).__webglFramebuffer;if(Ke.isWebGLCubeRenderTarget&&dn!==void 0&&(kn=kn[dn]),kn)if(_t>=0&&_t<=Ke.width-Nt&&It>=0&&It<=Ke.height-Mt){Et.bindFramebuffer(ze.FRAMEBUFFER,kn);const An=Ke.textures[ln],Gn=An.format,Tn=An.type;if(!ut.textureFormatReadable(Gn))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!ut.textureTypeReadable(Tn))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const Bn=ze.createBuffer();ze.bindBuffer(ze.PIXEL_PACK_BUFFER,Bn),ze.bufferData(ze.PIXEL_PACK_BUFFER,on.byteLength,ze.STREAM_READ),Ke.textures.length>1&&ze.readBuffer(ze.COLOR_ATTACHMENT0+ln),ze.readPixels(_t,It,Nt,Mt,Kt.convert(Gn),Kt.convert(Tn),0);const nr=we!==null?Le.get(we).__webglFramebuffer:null;Et.bindFramebuffer(ze.FRAMEBUFFER,nr);const Nr=ze.fenceSync(ze.SYNC_GPU_COMMANDS_COMPLETE,0);return ze.flush(),await probeAsync(ze,Nr,4),ze.bindBuffer(ze.PIXEL_PACK_BUFFER,Bn),ze.getBufferSubData(ze.PIXEL_PACK_BUFFER,0,on),ze.deleteBuffer(Bn),ze.deleteSync(Nr),on}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(Ke,_t=null,It=0){const Nt=Math.pow(2,-It),Mt=Math.floor(Ke.image.width*Nt),on=Math.floor(Ke.image.height*Nt),dn=_t!==null?_t.x:0,ln=_t!==null?_t.y:0;lt.setTexture2D(Ke,0),ze.copyTexSubImage2D(ze.TEXTURE_2D,It,0,0,dn,ln,Mt,on),Et.unbindTexture()};const wn=ze.createFramebuffer(),qt=ze.createFramebuffer();this.copyTextureToTexture=function(Ke,_t,It=null,Nt=null,Mt=0,on=null){on===null&&(Mt!==0?(warnOnce("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),on=Mt,Mt=0):on=0);let dn,ln,kn,An,Gn,Tn,Bn,nr,Nr;const ar=Ke.isCompressedTexture?Ke.mipmaps[on]:Ke.image;if(It!==null)dn=It.max.x-It.min.x,ln=It.max.y-It.min.y,kn=It.isBox3?It.max.z-It.min.z:1,An=It.min.x,Gn=It.min.y,Tn=It.isBox3?It.min.z:0;else{const ci=Math.pow(2,-Mt);dn=Math.floor(ar.width*ci),ln=Math.floor(ar.height*ci),Ke.isDataArrayTexture?kn=ar.depth:Ke.isData3DTexture?kn=Math.floor(ar.depth*ci):kn=1,An=0,Gn=0,Tn=0}Nt!==null?(Bn=Nt.x,nr=Nt.y,Nr=Nt.z):(Bn=0,nr=0,Nr=0);const Pn=Kt.convert(_t.format),fn=Kt.convert(_t.type);let Vn;_t.isData3DTexture?(lt.setTexture3D(_t,0),Vn=ze.TEXTURE_3D):_t.isDataArrayTexture||_t.isCompressedArrayTexture?(lt.setTexture2DArray(_t,0),Vn=ze.TEXTURE_2D_ARRAY):(lt.setTexture2D(_t,0),Vn=ze.TEXTURE_2D),ze.pixelStorei(ze.UNPACK_FLIP_Y_WEBGL,_t.flipY),ze.pixelStorei(ze.UNPACK_PREMULTIPLY_ALPHA_WEBGL,_t.premultiplyAlpha),ze.pixelStorei(ze.UNPACK_ALIGNMENT,_t.unpackAlignment);const Rn=ze.getParameter(ze.UNPACK_ROW_LENGTH),Mr=ze.getParameter(ze.UNPACK_IMAGE_HEIGHT),fi=ze.getParameter(ze.UNPACK_SKIP_PIXELS),dr=ze.getParameter(ze.UNPACK_SKIP_ROWS),si=ze.getParameter(ze.UNPACK_SKIP_IMAGES);ze.pixelStorei(ze.UNPACK_ROW_LENGTH,ar.width),ze.pixelStorei(ze.UNPACK_IMAGE_HEIGHT,ar.height),ze.pixelStorei(ze.UNPACK_SKIP_PIXELS,An),ze.pixelStorei(ze.UNPACK_SKIP_ROWS,Gn),ze.pixelStorei(ze.UNPACK_SKIP_IMAGES,Tn);const Or=Ke.isDataArrayTexture||Ke.isData3DTexture,li=_t.isDataArrayTexture||_t.isData3DTexture;if(Ke.isDepthTexture){const ci=Le.get(Ke),pi=Le.get(_t),xi=Le.get(ci.__renderTarget),va=Le.get(pi.__renderTarget);Et.bindFramebuffer(ze.READ_FRAMEBUFFER,xi.__webglFramebuffer),Et.bindFramebuffer(ze.DRAW_FRAMEBUFFER,va.__webglFramebuffer);for(let Ce=0;Ce<kn;Ce++)Or&&(ze.framebufferTextureLayer(ze.READ_FRAMEBUFFER,ze.COLOR_ATTACHMENT0,Le.get(Ke).__webglTexture,Mt,Tn+Ce),ze.framebufferTextureLayer(ze.DRAW_FRAMEBUFFER,ze.COLOR_ATTACHMENT0,Le.get(_t).__webglTexture,on,Nr+Ce)),ze.blitFramebuffer(An,Gn,dn,ln,Bn,nr,dn,ln,ze.DEPTH_BUFFER_BIT,ze.NEAREST);Et.bindFramebuffer(ze.READ_FRAMEBUFFER,null),Et.bindFramebuffer(ze.DRAW_FRAMEBUFFER,null)}else if(Mt!==0||Ke.isRenderTargetTexture||Le.has(Ke)){const ci=Le.get(Ke),pi=Le.get(_t);Et.bindFramebuffer(ze.READ_FRAMEBUFFER,wn),Et.bindFramebuffer(ze.DRAW_FRAMEBUFFER,qt);for(let xi=0;xi<kn;xi++)Or?ze.framebufferTextureLayer(ze.READ_FRAMEBUFFER,ze.COLOR_ATTACHMENT0,ci.__webglTexture,Mt,Tn+xi):ze.framebufferTexture2D(ze.READ_FRAMEBUFFER,ze.COLOR_ATTACHMENT0,ze.TEXTURE_2D,ci.__webglTexture,Mt),li?ze.framebufferTextureLayer(ze.DRAW_FRAMEBUFFER,ze.COLOR_ATTACHMENT0,pi.__webglTexture,on,Nr+xi):ze.framebufferTexture2D(ze.DRAW_FRAMEBUFFER,ze.COLOR_ATTACHMENT0,ze.TEXTURE_2D,pi.__webglTexture,on),Mt!==0?ze.blitFramebuffer(An,Gn,dn,ln,Bn,nr,dn,ln,ze.COLOR_BUFFER_BIT,ze.NEAREST):li?ze.copyTexSubImage3D(Vn,on,Bn,nr,Nr+xi,An,Gn,dn,ln):ze.copyTexSubImage2D(Vn,on,Bn,nr,An,Gn,dn,ln);Et.bindFramebuffer(ze.READ_FRAMEBUFFER,null),Et.bindFramebuffer(ze.DRAW_FRAMEBUFFER,null)}else li?Ke.isDataTexture||Ke.isData3DTexture?ze.texSubImage3D(Vn,on,Bn,nr,Nr,dn,ln,kn,Pn,fn,ar.data):_t.isCompressedArrayTexture?ze.compressedTexSubImage3D(Vn,on,Bn,nr,Nr,dn,ln,kn,Pn,ar.data):ze.texSubImage3D(Vn,on,Bn,nr,Nr,dn,ln,kn,Pn,fn,ar):Ke.isDataTexture?ze.texSubImage2D(ze.TEXTURE_2D,on,Bn,nr,dn,ln,Pn,fn,ar.data):Ke.isCompressedTexture?ze.compressedTexSubImage2D(ze.TEXTURE_2D,on,Bn,nr,ar.width,ar.height,Pn,ar.data):ze.texSubImage2D(ze.TEXTURE_2D,on,Bn,nr,dn,ln,Pn,fn,ar);ze.pixelStorei(ze.UNPACK_ROW_LENGTH,Rn),ze.pixelStorei(ze.UNPACK_IMAGE_HEIGHT,Mr),ze.pixelStorei(ze.UNPACK_SKIP_PIXELS,fi),ze.pixelStorei(ze.UNPACK_SKIP_ROWS,dr),ze.pixelStorei(ze.UNPACK_SKIP_IMAGES,si),on===0&&_t.generateMipmaps&&ze.generateMipmap(Vn),Et.unbindTexture()},this.initRenderTarget=function(Ke){Le.get(Ke).__webglFramebuffer===void 0&&lt.setupRenderTarget(Ke)},this.initTexture=function(Ke){Ke.isCubeTexture?lt.setTextureCube(Ke,0):Ke.isData3DTexture?lt.setTexture3D(Ke,0):Ke.isDataArrayTexture||Ke.isCompressedArrayTexture?lt.setTexture2DArray(Ke,0):lt.setTexture2D(Ke,0),Et.unbindTexture()},this.resetState=function(){ge=0,Ee=0,we=null,Et.reset(),_n.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return WebGLCoordinateSystem}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(n){this._outputColorSpace=n;const u=this.getContext();u.drawingBufferColorSpace=ColorManagement._getDrawingBufferColorSpace(n),u.unpackColorSpace=ColorManagement._getUnpackColorSpace()}}const THREE=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping,AddEquation,AddOperation,AdditiveAnimationBlendMode,AdditiveBlending,AgXToneMapping,AlphaFormat,AlwaysCompare,AlwaysDepth,AlwaysStencilFunc,AmbientLight,AnimationAction,AnimationClip,AnimationLoader,AnimationMixer,AnimationObjectGroup,AnimationUtils,ArcCurve,ArrayCamera,ArrowHelper,AttachedBindMode,Audio,AudioAnalyser,AudioContext,AudioListener,AudioLoader,AxesHelper,BackSide,BasicDepthPacking,BasicShadowMap,BatchedMesh,Bone,BooleanKeyframeTrack,Box2,Box3,Box3Helper,BoxGeometry,BoxHelper,BufferAttribute,BufferGeometry,BufferGeometryLoader,ByteType,Cache,Camera,CameraHelper,CanvasTexture,CapsuleGeometry,CatmullRomCurve3,CineonToneMapping,CircleGeometry,ClampToEdgeWrapping,Clock,Color,ColorKeyframeTrack,ColorManagement,CompressedArrayTexture,CompressedCubeTexture,CompressedTexture,CompressedTextureLoader,ConeGeometry,ConstantAlphaFactor,ConstantColorFactor,Controls,CubeCamera,CubeDepthTexture,CubeReflectionMapping,CubeRefractionMapping,CubeTexture,CubeTextureLoader,CubeUVReflectionMapping,CubicBezierCurve,CubicBezierCurve3,CubicInterpolant,CullFaceBack,CullFaceFront,CullFaceFrontBack,CullFaceNone,Curve,CurvePath,CustomBlending,CustomToneMapping,CylinderGeometry,Cylindrical,Data3DTexture,DataArrayTexture,DataTexture,DataTextureLoader,DataUtils,DecrementStencilOp,DecrementWrapStencilOp,DefaultLoadingManager,DepthFormat,DepthStencilFormat,DepthTexture,DetachedBindMode,DirectionalLight,DirectionalLightHelper,DiscreteInterpolant,DodecahedronGeometry,DoubleSide,DstAlphaFactor,DstColorFactor,DynamicCopyUsage,DynamicDrawUsage,DynamicReadUsage,EdgesGeometry,EllipseCurve,EqualCompare,EqualDepth,EqualStencilFunc,EquirectangularReflectionMapping,EquirectangularRefractionMapping,Euler,EventDispatcher,ExternalTexture,ExtrudeGeometry,FileLoader,Float16BufferAttribute,Float32BufferAttribute,FloatType,Fog,FogExp2,FramebufferTexture,FrontSide,Frustum,FrustumArray,GLBufferAttribute,GLSL1,GLSL3,GreaterCompare,GreaterDepth,GreaterEqualCompare,GreaterEqualDepth,GreaterEqualStencilFunc,GreaterStencilFunc,GridHelper,Group,HalfFloatType,HemisphereLight,HemisphereLightHelper,IcosahedronGeometry,ImageBitmapLoader,ImageLoader,ImageUtils,IncrementStencilOp,IncrementWrapStencilOp,InstancedBufferAttribute,InstancedBufferGeometry,InstancedInterleavedBuffer,InstancedMesh,Int16BufferAttribute,Int32BufferAttribute,Int8BufferAttribute,IntType,InterleavedBuffer,InterleavedBufferAttribute,Interpolant,InterpolateDiscrete,InterpolateLinear,InterpolateSmooth,InterpolationSamplingMode,InterpolationSamplingType,InvertStencilOp,KeepStencilOp,KeyframeTrack,LOD,LatheGeometry,Layers,LessCompare,LessDepth,LessEqualCompare,LessEqualDepth,LessEqualStencilFunc,LessStencilFunc,Light,LightProbe,Line,Line3,LineBasicMaterial,LineCurve,LineCurve3,LineDashedMaterial,LineLoop,LineSegments,LinearFilter,LinearInterpolant,LinearMipMapLinearFilter,LinearMipMapNearestFilter,LinearMipmapLinearFilter,LinearMipmapNearestFilter,LinearSRGBColorSpace:LinearSRGBColorSpace$1,LinearToneMapping,LinearTransfer,Loader,LoaderUtils,LoadingManager,LoopOnce,LoopPingPong,LoopRepeat,MOUSE,Material,MaterialLoader,MathUtils,Matrix2,Matrix3,Matrix4,MaxEquation,Mesh,MeshBasicMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshLambertMaterial,MeshMatcapMaterial,MeshNormalMaterial,MeshPhongMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshToonMaterial,MinEquation,MirroredRepeatWrapping,MixOperation,MultiplyBlending,MultiplyOperation,NearestFilter,NearestMipMapLinearFilter,NearestMipMapNearestFilter,NearestMipmapLinearFilter,NearestMipmapNearestFilter,NeutralToneMapping,NeverCompare,NeverDepth,NeverStencilFunc,NoBlending,NoColorSpace,NoNormalPacking,NoToneMapping,NormalAnimationBlendMode,NormalBlending,NormalGAPacking,NormalRGPacking,NotEqualCompare,NotEqualDepth,NotEqualStencilFunc,NumberKeyframeTrack,Object3D,ObjectLoader,ObjectSpaceNormalMap,OctahedronGeometry,OneFactor,OneMinusConstantAlphaFactor,OneMinusConstantColorFactor,OneMinusDstAlphaFactor,OneMinusDstColorFactor,OneMinusSrcAlphaFactor,OneMinusSrcColorFactor,OrthographicCamera,PCFShadowMap,PCFSoftShadowMap,PMREMGenerator,Path,PerspectiveCamera,Plane:Plane$1,PlaneGeometry,PlaneHelper,PointLight,PointLightHelper,Points,PointsMaterial,PolarGridHelper,PolyhedronGeometry,PositionalAudio,PropertyBinding,PropertyMixer,QuadraticBezierCurve,QuadraticBezierCurve3,Quaternion,QuaternionKeyframeTrack,QuaternionLinearInterpolant,R11_EAC_Format,RED_GREEN_RGTC2_Format,RED_RGTC1_Format,REVISION,RG11_EAC_Format,RGBADepthPacking,RGBAFormat,RGBAIntegerFormat,RGBA_ASTC_10x10_Format,RGBA_ASTC_10x5_Format,RGBA_ASTC_10x6_Format,RGBA_ASTC_10x8_Format,RGBA_ASTC_12x10_Format,RGBA_ASTC_12x12_Format,RGBA_ASTC_4x4_Format,RGBA_ASTC_5x4_Format,RGBA_ASTC_5x5_Format,RGBA_ASTC_6x5_Format,RGBA_ASTC_6x6_Format,RGBA_ASTC_8x5_Format,RGBA_ASTC_8x6_Format,RGBA_ASTC_8x8_Format,RGBA_BPTC_Format,RGBA_ETC2_EAC_Format,RGBA_PVRTC_2BPPV1_Format,RGBA_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT1_Format,RGBA_S3TC_DXT3_Format,RGBA_S3TC_DXT5_Format,RGBDepthPacking,RGBFormat,RGBIntegerFormat,RGB_BPTC_SIGNED_Format,RGB_BPTC_UNSIGNED_Format,RGB_ETC1_Format,RGB_ETC2_Format,RGB_PVRTC_2BPPV1_Format,RGB_PVRTC_4BPPV1_Format,RGB_S3TC_DXT1_Format,RGDepthPacking,RGFormat,RGIntegerFormat,RawShaderMaterial,Ray,Raycaster,RectAreaLight,RedFormat,RedIntegerFormat,ReinhardToneMapping,RenderTarget,RenderTarget3D,RepeatWrapping,ReplaceStencilOp,ReverseSubtractEquation,RingGeometry,SIGNED_R11_EAC_Format,SIGNED_RED_GREEN_RGTC2_Format,SIGNED_RED_RGTC1_Format,SIGNED_RG11_EAC_Format,SRGBColorSpace:SRGBColorSpace$1,SRGBTransfer,Scene:Scene$1,ShaderChunk,ShaderLib,ShaderMaterial,ShadowMaterial,Shape,ShapeGeometry,ShapePath,ShapeUtils,ShortType,Skeleton,SkeletonHelper,SkinnedMesh,Source,Sphere,SphereGeometry,Spherical,SphericalHarmonics3,SplineCurve,SpotLight,SpotLightHelper,Sprite,SpriteMaterial,SrcAlphaFactor,SrcAlphaSaturateFactor,SrcColorFactor,StaticCopyUsage,StaticDrawUsage,StaticReadUsage,StereoCamera,StreamCopyUsage,StreamDrawUsage,StreamReadUsage,StringKeyframeTrack,SubtractEquation,SubtractiveBlending,TOUCH,TangentSpaceNormalMap,TetrahedronGeometry,Texture,TextureLoader,TextureUtils,Timer:Timer$1,TimestampQuery,TorusGeometry,TorusKnotGeometry,Triangle,TriangleFanDrawMode,TriangleStripDrawMode,TrianglesDrawMode,TubeGeometry,UVMapping,Uint16BufferAttribute,Uint32BufferAttribute,Uint8BufferAttribute,Uint8ClampedBufferAttribute,Uniform,UniformsGroup,UniformsLib,UniformsUtils,UnsignedByteType,UnsignedInt101111Type,UnsignedInt248Type,UnsignedInt5999Type,UnsignedIntType,UnsignedShort4444Type,UnsignedShort5551Type,UnsignedShortType,VSMShadowMap,Vector2,Vector3,Vector4,VectorKeyframeTrack,VideoFrameTexture,VideoTexture,WebGL3DRenderTarget,WebGLArrayRenderTarget,WebGLCoordinateSystem,WebGLCubeRenderTarget,WebGLRenderTarget,WebGLRenderer,WebGLUtils,WebGPUCoordinateSystem,WebXRController,WireframeGeometry,WrapAroundEnding,ZeroCurvatureEnding,ZeroFactor,ZeroSlopeEnding,ZeroStencilOp,createCanvasElement,error,getConsoleFunction,log,setConsoleFunction,warn,warnOnce},Symbol.toStringTag,{value:"Module"}));var withSelector={exports:{}},withSelector_production={},shim={exports:{}},useSyncExternalStoreShim_production={};var hasRequiredUseSyncExternalStoreShim_production;function requireUseSyncExternalStoreShim_production(){if(hasRequiredUseSyncExternalStoreShim_production)return useSyncExternalStoreShim_production;hasRequiredUseSyncExternalStoreShim_production=1;var s=requireReact();function n(I,N){return I===N&&(I!==0||1/I===1/N)||I!==I&&N!==N}var u=typeof Object.is=="function"?Object.is:n,f=s.useState,y=s.useEffect,S=s.useLayoutEffect,A=s.useDebugValue;function w(I,N){var L=N(),F=f({inst:{value:L,getSnapshot:N}}),H=F[0].inst,z=F[1];return S(function(){H.value=L,H.getSnapshot=N,C(H)&&z({inst:H})},[I,L,N]),y(function(){return C(H)&&z({inst:H}),I(function(){C(H)&&z({inst:H})})},[I]),A(L),L}function C(I){var N=I.getSnapshot;I=I.value;try{var L=N();return!u(I,L)}catch{return!0}}function T(I,N){return N()}var R=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?T:w;return useSyncExternalStoreShim_production.useSyncExternalStore=s.useSyncExternalStore!==void 0?s.useSyncExternalStore:R,useSyncExternalStoreShim_production}var hasRequiredShim;function requireShim(){return hasRequiredShim||(hasRequiredShim=1,shim.exports=requireUseSyncExternalStoreShim_production()),shim.exports}var hasRequiredWithSelector_production;function requireWithSelector_production(){if(hasRequiredWithSelector_production)return withSelector_production;hasRequiredWithSelector_production=1;var s=requireReact(),n=requireShim();function u(T,R){return T===R&&(T!==0||1/T===1/R)||T!==T&&R!==R}var f=typeof Object.is=="function"?Object.is:u,y=n.useSyncExternalStore,S=s.useRef,A=s.useEffect,w=s.useMemo,C=s.useDebugValue;return withSelector_production.useSyncExternalStoreWithSelector=function(T,R,I,N,L){var F=S(null);if(F.current===null){var H={hasValue:!1,value:null};F.current=H}else H=F.current;F=w(function(){function U(J){if(!G){if(G=!0,Y=J,J=N(J),L!==void 0&&H.hasValue){var te=H.value;if(L(te,J))return K=te}return K=J}if(te=K,f(Y,J))return te;var de=N(J);return L!==void 0&&L(te,de)?(Y=J,te):(Y=J,K=de)}var G=!1,Y,K,Z=I===void 0?null:I;return[function(){return U(R())},Z===null?void 0:function(){return U(Z())}]},[R,I,N,L]);var z=y(T,F[0],F[1]);return A(function(){H.hasValue=!0,H.value=z},[z]),C(z),z},withSelector_production}var hasRequiredWithSelector;function requireWithSelector(){return hasRequiredWithSelector||(hasRequiredWithSelector=1,withSelector.exports=requireWithSelector_production()),withSelector.exports}var withSelectorExports=requireWithSelector();const useSyncExternalStoreExports=getDefaultExportFromCjs$1(withSelectorExports),{useSyncExternalStoreWithSelector}=useSyncExternalStoreExports,identity=s=>s;function useStoreWithEqualityFn(s,n=identity,u){const f=useSyncExternalStoreWithSelector(s.subscribe,s.getState,s.getInitialState,n,u);return React.useDebugValue(f),f}const createWithEqualityFnImpl=(s,n)=>{const u=createStore$1(s),f=(y,S=n)=>useStoreWithEqualityFn(u,y,S);return Object.assign(f,u),f},createWithEqualityFn=((s,n)=>s?createWithEqualityFnImpl(s,n):createWithEqualityFnImpl),isPromise=s=>typeof s=="object"&&typeof s.then=="function",globalCache=[];function shallowEqualArrays(s,n,u=(f,y)=>f===y){if(s===n)return!0;if(!s||!n)return!1;const f=s.length;if(n.length!==f)return!1;for(let y=0;y<f;y++)if(!u(s[y],n[y]))return!1;return!0}function query(s,n=null,u=!1,f={}){n===null&&(n=[s]);for(const S of globalCache)if(shallowEqualArrays(n,S.keys,S.equal)){if(u)return;if(Object.prototype.hasOwnProperty.call(S,"error"))throw S.error;if(Object.prototype.hasOwnProperty.call(S,"response"))return f.lifespan&&f.lifespan>0&&(S.timeout&&clearTimeout(S.timeout),S.timeout=setTimeout(S.remove,f.lifespan)),S.response;if(!u)throw S.promise}const y={keys:n,equal:f.equal,remove:()=>{const S=globalCache.indexOf(y);S!==-1&&globalCache.splice(S,1)},promise:(isPromise(s)?s:s(...n)).then(S=>{y.response=S,f.lifespan&&f.lifespan>0&&(y.timeout=setTimeout(y.remove,f.lifespan))}).catch(S=>y.error=S)};if(globalCache.push(y),!u)throw y.promise}const suspend=(s,n,u)=>query(s,n,!1,u),preload=(s,n,u)=>{query(s,n,!0,u)},clear=s=>{if(s===void 0||s.length===0)globalCache.splice(0,globalCache.length);else{const n=globalCache.find(u=>shallowEqualArrays(s,u.keys,u.equal));n&&n.remove()}};var schedulerExports=requireScheduler();const Tb=getDefaultExportFromCjs$1(schedulerExports);function i$2(s,n,u){if(!s)return;if(u(s)===!0)return s;let f=n?s.return:s.child;for(;f;){const y=i$2(f,n,u);if(y)return y;f=n?null:f.sibling}}function l(s){try{return Object.defineProperties(s,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return s}}const a=l(reactExports.createContext(null));class m extends reactExports.Component{render(){return reactExports.createElement(a.Provider,{value:this._reactInternals},this.props.children)}}function c(){const s=reactExports.useContext(a);if(s===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const n=reactExports.useId();return reactExports.useMemo(()=>{for(const u of[s,s?.alternate]){if(!u)continue;const f=i$2(u,!1,y=>{let S=y.memoizedState;for(;S;){if(S.memoizedState===n)return!0;S=S.next}});if(f)return f}},[s,n])}const p$1=Symbol.for("react.context"),b=s=>s!==null&&typeof s=="object"&&"$$typeof"in s&&s.$$typeof===p$1;function h(){const s=c(),[n]=reactExports.useState(()=>new Map);n.clear();let u=s;for(;u;){const f=u.type;b(f)&&f!==a&&!n.has(f)&&n.set(f,reactExports.use(l(f))),u=u.return}return n}function x$1(){const s=h();return reactExports.useMemo(()=>Array.from(s.keys()).reduce((n,u)=>f=>reactExports.createElement(n,null,reactExports.createElement(u.Provider,{...f,value:s.get(u)})),n=>reactExports.createElement(m,{...n})),[s])}function findInitialRoot(s){let n=s.root;for(;n.getState().previousRoot;)n=n.getState().previousRoot;return n}const isOrthographicCamera=s=>s&&s.isOrthographicCamera,isRef$1=s=>s&&s.hasOwnProperty("current"),isColorRepresentation=s=>s!=null&&(typeof s=="string"||typeof s=="number"||s.isColor),useIsomorphicLayoutEffect=((s,n)=>typeof window<"u"&&(((s=window.document)==null?void 0:s.createElement)||((n=window.navigator)==null?void 0:n.product)==="ReactNative"))()?reactExports.useLayoutEffect:reactExports.useEffect;function useMutableCallback(s){const n=reactExports.useRef(s);return useIsomorphicLayoutEffect(()=>{n.current=s},[s]),n}function useBridge(){const s=c(),n=x$1();return reactExports.useMemo(()=>({children:u})=>{const y=!!i$2(s,!0,S=>S.type===reactExports.StrictMode)?reactExports.StrictMode:reactExports.Fragment;return jsxRuntimeExports.jsx(y,{children:jsxRuntimeExports.jsx(n,{children:u})})},[s,n])}function Block({set:s}){return useIsomorphicLayoutEffect(()=>(s(new Promise(()=>null)),()=>s(!1)),[s]),null}const ErrorBoundary=(s=>(s=class extends reactExports.Component{constructor(...u){super(...u),this.state={error:!1}}componentDidCatch(u){this.props.set(u)}render(){return this.state.error?null:this.props.children}},s.getDerivedStateFromError=()=>({error:!0}),s))();function calculateDpr(s){var n;const u=typeof window<"u"?(n=window.devicePixelRatio)!=null?n:2:1;return Array.isArray(s)?Math.min(Math.max(s[0],u),s[1]):s}function getRootState(s){var n;return(n=s.__r3f)==null?void 0:n.root.getState()}const is={obj:s=>s===Object(s)&&!is.arr(s)&&typeof s!="function",fun:s=>typeof s=="function",str:s=>typeof s=="string",num:s=>typeof s=="number",boo:s=>typeof s=="boolean",und:s=>s===void 0,nul:s=>s===null,arr:s=>Array.isArray(s),equ(s,n,{arrays:u="shallow",objects:f="reference",strict:y=!0}={}){if(typeof s!=typeof n||!!s!=!!n)return!1;if(is.str(s)||is.num(s)||is.boo(s))return s===n;const S=is.obj(s);if(S&&f==="reference")return s===n;const A=is.arr(s);if(A&&u==="reference")return s===n;if((A||S)&&s===n)return!0;let w;for(w in s)if(!(w in n))return!1;if(S&&u==="shallow"&&f==="shallow"){for(w in y?n:s)if(!is.equ(s[w],n[w],{strict:y,objects:"reference"}))return!1}else for(w in y?n:s)if(s[w]!==n[w])return!1;if(is.und(w)){if(A&&s.length===0&&n.length===0||S&&Object.keys(s).length===0&&Object.keys(n).length===0)return!0;if(s!==n)return!1}return!0}};function buildGraph(s){const n={nodes:{},materials:{},meshes:{}};return s&&s.traverse(u=>{u.name&&(n.nodes[u.name]=u),u.material&&!n.materials[u.material.name]&&(n.materials[u.material.name]=u.material),u.isMesh&&!n.meshes[u.name]&&(n.meshes[u.name]=u)}),n}function dispose(s){s.type!=="Scene"&&(s.dispose==null||s.dispose());for(const n in s){const u=s[n];u?.type!=="Scene"&&(u==null||u.dispose==null||u.dispose())}}const REACT_INTERNAL_PROPS=["children","key","ref"];function getInstanceProps(s){const n={};for(const u in s)REACT_INTERNAL_PROPS.includes(u)||(n[u]=s[u]);return n}function prepare(s,n,u,f){const y=s;let S=y?.__r3f;return S||(S={root:n,type:u,parent:null,children:[],props:getInstanceProps(f),object:y,eventCount:0,handlers:{},isHidden:!1},y&&(y.__r3f=S)),S}function resolve(s,n){if(!n.includes("-"))return{root:s,key:n,target:s[n]};if(n in s)return{root:s,key:n,target:s[n]};let u=s;const f=n.split("-");for(const y of f){if(typeof u!="object"||u===null){if(u!==void 0){const S=f.slice(f.indexOf(y)).join("-");return{root:u,key:S,target:void 0}}return{root:s,key:n,target:void 0}}n=y,s=u,u=u[n]}return{root:s,key:n,target:u}}const INDEX_REGEX=/-\d+$/;function attach(s,n){if(is.str(n.props.attach)){if(INDEX_REGEX.test(n.props.attach)){const y=n.props.attach.replace(INDEX_REGEX,""),{root:S,key:A}=resolve(s.object,y);Array.isArray(S[A])||(S[A]=[])}const{root:u,key:f}=resolve(s.object,n.props.attach);n.previousAttach=u[f],u[f]=n.object}else is.fun(n.props.attach)&&(n.previousAttach=n.props.attach(s.object,n.object))}function detach(s,n){if(is.str(n.props.attach)){const{root:u,key:f}=resolve(s.object,n.props.attach),y=n.previousAttach;y===void 0?delete u[f]:u[f]=y}else n.previousAttach==null||n.previousAttach(s.object,n.object);delete n.previousAttach}const RESERVED_PROPS=[...REACT_INTERNAL_PROPS,"args","dispose","attach","object","onUpdate","dispose"],MEMOIZED_PROTOTYPES=new Map;function getMemoizedPrototype(s){let n=MEMOIZED_PROTOTYPES.get(s.constructor);try{n||(n=new s.constructor,MEMOIZED_PROTOTYPES.set(s.constructor,n))}catch{}return n}function diffProps(s,n){const u={};for(const f in n)if(!RESERVED_PROPS.includes(f)&&!is.equ(n[f],s.props[f])){u[f]=n[f];for(const y in n)y.startsWith(`${f}-`)&&(u[y]=n[y])}for(const f in s.props){if(RESERVED_PROPS.includes(f)||n.hasOwnProperty(f))continue;const{root:y,key:S}=resolve(s.object,f);if(y.constructor&&y.constructor.length===0){const A=getMemoizedPrototype(y);is.und(A)||(u[S]=A[S])}else u[S]=0}return u}const colorMaps=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],EVENT_REGEX=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function applyProps(s,n){var u;const f=s.__r3f,y=f&&findInitialRoot(f).getState(),S=f?.eventCount;for(const w in n){let C=n[w];if(RESERVED_PROPS.includes(w))continue;if(f&&EVENT_REGEX.test(w)){typeof C=="function"?f.handlers[w]=C:delete f.handlers[w],f.eventCount=Object.keys(f.handlers).length;continue}if(C===void 0)continue;let{root:T,key:R,target:I}=resolve(s,w);if(I===void 0&&(typeof T!="object"||T===null))throw Error(`R3F: Cannot set "${w}". Ensure it is an object before setting "${R}".`);if(I instanceof Layers&&C instanceof Layers)I.mask=C.mask;else if(I instanceof Color&&isColorRepresentation(C))I.set(C);else if(I!==null&&typeof I=="object"&&typeof I.set=="function"&&typeof I.copy=="function"&&C!=null&&C.constructor&&I.constructor===C.constructor)I.copy(C);else if(I!==null&&typeof I=="object"&&typeof I.set=="function"&&Array.isArray(C))typeof I.fromArray=="function"?I.fromArray(C):I.set(...C);else if(I!==null&&typeof I=="object"&&typeof I.set=="function"&&typeof C=="number")typeof I.setScalar=="function"?I.setScalar(C):I.set(C);else{var A;T[R]=C,y&&!y.linear&&colorMaps.includes(R)&&(A=T[R])!=null&&A.isTexture&&T[R].format===RGBAFormat&&T[R].type===UnsignedByteType&&(T[R].colorSpace=SRGBColorSpace$1)}}if(f!=null&&f.parent&&y!=null&&y.internal&&(u=f.object)!=null&&u.isObject3D&&S!==f.eventCount){const w=f.object,C=y.internal.interaction.indexOf(w);C>-1&&y.internal.interaction.splice(C,1),f.eventCount&&w.raycast!==null&&y.internal.interaction.push(w)}return f&&f.props.attach===void 0&&(f.object.isBufferGeometry?f.props.attach="geometry":f.object.isMaterial&&(f.props.attach="material")),f&&invalidateInstance(f),s}function invalidateInstance(s){var n;if(!s.parent)return;s.props.onUpdate==null||s.props.onUpdate(s.object);const u=(n=s.root)==null||n.getState==null?void 0:n.getState();u&&u.internal.frames===0&&u.invalidate()}function updateCamera(s,n){s.manual||(isOrthographicCamera(s)?(s.left=n.width/-2,s.right=n.width/2,s.top=n.height/2,s.bottom=n.height/-2):s.aspect=n.width/n.height,s.updateProjectionMatrix())}const isObject3D=s=>s?.isObject3D;function makeId(s){return(s.eventObject||s.object).uuid+"/"+s.index+s.instanceId}function releaseInternalPointerCapture(s,n,u,f){const y=u.get(n);y&&(u.delete(n),u.size===0&&(s.delete(f),y.target.releasePointerCapture(f)))}function removeInteractivity(s,n){const{internal:u}=s.getState();u.interaction=u.interaction.filter(f=>f!==n),u.initialHits=u.initialHits.filter(f=>f!==n),u.hovered.forEach((f,y)=>{(f.eventObject===n||f.object===n)&&u.hovered.delete(y)}),u.capturedMap.forEach((f,y)=>{releaseInternalPointerCapture(u.capturedMap,n,f,y)})}function createEvents(s){function n(C){const{internal:T}=s.getState(),R=C.offsetX-T.initialClick[0],I=C.offsetY-T.initialClick[1];return Math.round(Math.sqrt(R*R+I*I))}function u(C){return C.filter(T=>["Move","Over","Enter","Out","Leave"].some(R=>{var I;return(I=T.__r3f)==null?void 0:I.handlers["onPointer"+R]}))}function f(C,T){const R=s.getState(),I=new Set,N=[],L=T?T(R.internal.interaction):R.internal.interaction;for(let U=0;U<L.length;U++){const G=getRootState(L[U]);G&&(G.raycaster.camera=void 0)}R.previousRoot||R.events.compute==null||R.events.compute(C,R);function F(U){const G=getRootState(U);if(!G||!G.events.enabled||G.raycaster.camera===null)return[];if(G.raycaster.camera===void 0){var Y;G.events.compute==null||G.events.compute(C,G,(Y=G.previousRoot)==null?void 0:Y.getState()),G.raycaster.camera===void 0&&(G.raycaster.camera=null)}return G.raycaster.camera?G.raycaster.intersectObject(U,!0):[]}let H=L.flatMap(F).sort((U,G)=>{const Y=getRootState(U.object),K=getRootState(G.object);return!Y||!K?U.distance-G.distance:K.events.priority-Y.events.priority||U.distance-G.distance}).filter(U=>{const G=makeId(U);return I.has(G)?!1:(I.add(G),!0)});R.events.filter&&(H=R.events.filter(H,R));for(const U of H){let G=U.object;for(;G;){var z;(z=G.__r3f)!=null&&z.eventCount&&N.push({...U,eventObject:G}),G=G.parent}}if("pointerId"in C&&R.internal.capturedMap.has(C.pointerId))for(let U of R.internal.capturedMap.get(C.pointerId).values())I.has(makeId(U.intersection))||N.push(U.intersection);return N}function y(C,T,R,I){if(C.length){const N={stopped:!1};for(const L of C){let F=getRootState(L.object);if(F||L.object.traverseAncestors(H=>{const z=getRootState(H);if(z)return F=z,!1}),F){const{raycaster:H,pointer:z,camera:U,internal:G}=F,Y=new Vector3(z.x,z.y,0).unproject(U),K=se=>{var ne,ge;return(ne=(ge=G.capturedMap.get(se))==null?void 0:ge.has(L.eventObject))!=null?ne:!1},Z=se=>{const ne={intersection:L,target:T.target};G.capturedMap.has(se)?G.capturedMap.get(se).set(L.eventObject,ne):G.capturedMap.set(se,new Map([[L.eventObject,ne]])),T.target.setPointerCapture(se)},J=se=>{const ne=G.capturedMap.get(se);ne&&releaseInternalPointerCapture(G.capturedMap,L.eventObject,ne,se)};let te={};for(let se in T){let ne=T[se];typeof ne!="function"&&(te[se]=ne)}let de={...L,...te,pointer:z,intersections:C,stopped:N.stopped,delta:R,unprojectedPoint:Y,ray:H.ray,camera:U,stopPropagation(){const se="pointerId"in T&&G.capturedMap.get(T.pointerId);if((!se||se.has(L.eventObject))&&(de.stopped=N.stopped=!0,G.hovered.size&&Array.from(G.hovered.values()).find(ne=>ne.eventObject===L.eventObject))){const ne=C.slice(0,C.indexOf(L));S([...ne,L])}},target:{hasPointerCapture:K,setPointerCapture:Z,releasePointerCapture:J},currentTarget:{hasPointerCapture:K,setPointerCapture:Z,releasePointerCapture:J},nativeEvent:T};if(I(de),N.stopped===!0)break}}}return C}function S(C){const{internal:T}=s.getState();for(const R of T.hovered.values())if(!C.length||!C.find(I=>I.object===R.object&&I.index===R.index&&I.instanceId===R.instanceId)){const N=R.eventObject.__r3f;if(T.hovered.delete(makeId(R)),N!=null&&N.eventCount){const L=N.handlers,F={...R,intersections:C};L.onPointerOut==null||L.onPointerOut(F),L.onPointerLeave==null||L.onPointerLeave(F)}}}function A(C,T){for(let R=0;R<T.length;R++){const I=T[R].__r3f;I==null||I.handlers.onPointerMissed==null||I.handlers.onPointerMissed(C)}}function w(C){switch(C){case"onPointerLeave":case"onPointerCancel":return()=>S([]);case"onLostPointerCapture":return T=>{const{internal:R}=s.getState();"pointerId"in T&&R.capturedMap.has(T.pointerId)&&requestAnimationFrame(()=>{R.capturedMap.has(T.pointerId)&&(R.capturedMap.delete(T.pointerId),S([]))})}}return function(R){const{onPointerMissed:I,internal:N}=s.getState();N.lastEvent.current=R;const L=C==="onPointerMove",F=C==="onClick"||C==="onContextMenu"||C==="onDoubleClick",z=f(R,L?u:void 0),U=F?n(R):0;C==="onPointerDown"&&(N.initialClick=[R.offsetX,R.offsetY],N.initialHits=z.map(Y=>Y.eventObject)),F&&!z.length&&U<=2&&(A(R,N.interaction),I&&I(R)),L&&S(z);function G(Y){const K=Y.eventObject,Z=K.__r3f;if(!(Z!=null&&Z.eventCount))return;const J=Z.handlers;if(L){if(J.onPointerOver||J.onPointerEnter||J.onPointerOut||J.onPointerLeave){const te=makeId(Y),de=N.hovered.get(te);de?de.stopped&&Y.stopPropagation():(N.hovered.set(te,Y),J.onPointerOver==null||J.onPointerOver(Y),J.onPointerEnter==null||J.onPointerEnter(Y))}J.onPointerMove==null||J.onPointerMove(Y)}else{const te=J[C];te?(!F||N.initialHits.includes(K))&&(A(R,N.interaction.filter(de=>!N.initialHits.includes(de))),te(Y)):F&&N.initialHits.includes(K)&&A(R,N.interaction.filter(de=>!N.initialHits.includes(de)))}}y(z,R,U,G)}}return{handlePointer:w}}const isRenderer=s=>!!(s!=null&&s.render),context=reactExports.createContext(null),createStore=(s,n)=>{const u=createWithEqualityFn((w,C)=>{const T=new Vector3,R=new Vector3,I=new Vector3;function N(U=C().camera,G=R,Y=C().size){const{width:K,height:Z,top:J,left:te}=Y,de=K/Z;G.isVector3?I.copy(G):I.set(...G);const se=U.getWorldPosition(T).distanceTo(I);if(isOrthographicCamera(U))return{width:K/U.zoom,height:Z/U.zoom,top:J,left:te,factor:1,distance:se,aspect:de};{const ne=U.fov*Math.PI/180,ge=2*Math.tan(ne/2)*se,Ee=ge*(K/Z);return{width:Ee,height:ge,top:J,left:te,factor:K/Ee,distance:se,aspect:de}}}let L;const F=U=>w(G=>({performance:{...G.performance,current:U}})),H=new Vector2;return{set:w,get:C,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(U=1)=>s(C(),U),advance:(U,G)=>n(U,G,C()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Clock,pointer:H,mouse:H,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const U=C();L&&clearTimeout(L),U.performance.current!==U.performance.min&&F(U.performance.min),L=setTimeout(()=>F(C().performance.max),U.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:N},setEvents:U=>w(G=>({...G,events:{...G.events,...U}})),setSize:(U,G,Y=0,K=0)=>{const Z=C().camera,J={width:U,height:G,top:Y,left:K};w(te=>({size:J,viewport:{...te.viewport,...N(Z,R,J)}}))},setDpr:U=>w(G=>{const Y=calculateDpr(U);return{viewport:{...G.viewport,dpr:Y,initialDpr:G.viewport.initialDpr||Y}}}),setFrameloop:(U="always")=>{const G=C().clock;G.stop(),G.elapsedTime=0,U!=="never"&&(G.start(),G.elapsedTime=0),w(()=>({frameloop:U}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:reactExports.createRef(),active:!1,frames:0,priority:0,subscribe:(U,G,Y)=>{const K=C().internal;return K.priority=K.priority+(G>0?1:0),K.subscribers.push({ref:U,priority:G,store:Y}),K.subscribers=K.subscribers.sort((Z,J)=>Z.priority-J.priority),()=>{const Z=C().internal;Z!=null&&Z.subscribers&&(Z.priority=Z.priority-(G>0?1:0),Z.subscribers=Z.subscribers.filter(J=>J.ref!==U))}}}}}),f=u.getState();let y=f.size,S=f.viewport.dpr,A=f.camera;return u.subscribe(()=>{const{camera:w,size:C,viewport:T,gl:R,set:I}=u.getState();if(C.width!==y.width||C.height!==y.height||T.dpr!==S){y=C,S=T.dpr,updateCamera(w,C),T.dpr>0&&R.setPixelRatio(T.dpr);const N=typeof HTMLCanvasElement<"u"&&R.domElement instanceof HTMLCanvasElement;R.setSize(C.width,C.height,N)}w!==A&&(A=w,I(N=>({viewport:{...N.viewport,...N.viewport.getCurrentViewport(w)}})))}),u.subscribe(w=>s(w)),u};function useStore(){const s=reactExports.useContext(context);if(!s)throw new Error("R3F: Hooks can only be used within the Canvas component!");return s}function useThree(s=u=>u,n){return useStore()(s,n)}function useFrame(s,n=0){const u=useStore(),f=u.getState().internal.subscribe,y=useMutableCallback(s);return useIsomorphicLayoutEffect(()=>f(y,n,u),[n,f,u]),null}const memoizedLoaders=new WeakMap,isConstructor$1=s=>{var n;return typeof s=="function"&&(s==null||(n=s.prototype)==null?void 0:n.constructor)===s};function loadingFn(s,n){return function(u,...f){let y;return isConstructor$1(u)?(y=memoizedLoaders.get(u),y||(y=new u,memoizedLoaders.set(u,y))):y=u,s&&s(y),Promise.all(f.map(S=>new Promise((A,w)=>y.load(S,C=>{isObject3D(C?.scene)&&Object.assign(C,buildGraph(C.scene)),A(C)},n,C=>w(new Error(`Could not load ${S}: ${C?.message}`))))))}}function useLoader(s,n,u,f){const y=Array.isArray(n)?n:[n],S=suspend(loadingFn(u,f),[s,...y],{equal:is.equ});return Array.isArray(n)?S:S[0]}useLoader.preload=function(s,n,u){const f=Array.isArray(n)?n:[n];return preload(loadingFn(u),[s,...f])};useLoader.clear=function(s,n){const u=Array.isArray(n)?n:[n];return clear([s,...u])};const t=1,o=8,r=32,e=2;var packageData={version:"9.5.0"};function Xb(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Rm={exports:{}},Og={exports:{}},_b$1;function Kb(){return _b$1||(_b$1=1,(function(s){s.exports=function(n){function u(B,$,ee,fe){return new Ju(B,$,ee,fe)}function f(){}function y(B){var $="https://react.dev/errors/"+B;if(1<arguments.length){$+="?args[]="+encodeURIComponent(arguments[1]);for(var ee=2;ee<arguments.length;ee++)$+="&args[]="+encodeURIComponent(arguments[ee])}return"Minified React error #"+B+"; visit "+$+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function S(B){var $=B,ee=B;if(B.alternate)for(;$.return;)$=$.return;else{B=$;do $=B,($.flags&4098)!==0&&(ee=$.return),B=$.return;while(B)}return $.tag===3?ee:null}function A(B){if(S(B)!==B)throw Error(y(188))}function w(B){var $=B.alternate;if(!$){if($=S(B),$===null)throw Error(y(188));return $!==B?null:B}for(var ee=B,fe=$;;){var Ae=ee.return;if(Ae===null)break;var De=Ae.alternate;if(De===null){if(fe=Ae.return,fe!==null){ee=fe;continue}break}if(Ae.child===De.child){for(De=Ae.child;De;){if(De===ee)return A(Ae),B;if(De===fe)return A(Ae),$;De=De.sibling}throw Error(y(188))}if(ee.return!==fe.return)ee=Ae,fe=De;else{for(var tt=!1,kt=Ae.child;kt;){if(kt===ee){tt=!0,ee=Ae,fe=De;break}if(kt===fe){tt=!0,fe=Ae,ee=De;break}kt=kt.sibling}if(!tt){for(kt=De.child;kt;){if(kt===ee){tt=!0,ee=De,fe=Ae;break}if(kt===fe){tt=!0,fe=De,ee=Ae;break}kt=kt.sibling}if(!tt)throw Error(y(189))}}if(ee.alternate!==fe)throw Error(y(190))}if(ee.tag!==3)throw Error(y(188));return ee.stateNode.current===ee?B:$}function C(B){var $=B.tag;if($===5||$===26||$===27||$===6)return B;for(B=B.child;B!==null;){if($=C(B),$!==null)return $;B=B.sibling}return null}function T(B){var $=B.tag;if($===5||$===26||$===27||$===6)return B;for(B=B.child;B!==null;){if(B.tag!==4&&($=T(B),$!==null))return $;B=B.sibling}return null}function R(B){return B===null||typeof B!="object"?null:(B=yo&&B[yo]||B["@@iterator"],typeof B=="function"?B:null)}function I(B){if(B==null)return null;if(typeof B=="function")return B.$$typeof===Bo?null:B.displayName||B.name||null;if(typeof B=="string")return B;switch(B){case ol:return"Fragment";case cl:return"Profiler";case ll:return"StrictMode";case fu:return"Suspense";case mo:return"SuspenseList";case Mc:return"Activity"}if(typeof B=="object")switch(B.$$typeof){case sl:return"Portal";case ms:return B.displayName||"Context";case Rc:return(B._context.displayName||"Context")+".Consumer";case jl:var $=B.render;return B=B.displayName,B||(B=$.displayName||$.name||"",B=B!==""?"ForwardRef("+B+")":"ForwardRef"),B;case pu:return $=B.displayName||null,$!==null?$:I(B.type)||"Memo";case Na:$=B._payload,B=B._init;try{return I(B($))}catch{}}return null}function N(B){return{current:B}}function L(B){0>ml||(B.current=Cu[ml],Cu[ml]=null,ml--)}function F(B,$){ml++,Cu[ml]=B.current,B.current=$}function H(B){return B>>>=0,B===0?32:31-(Ru(B)/Jh|0)|0}function z(B){var $=B&42;if($!==0)return $;switch(B&-B){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return B&261888;case 262144:case 524288:case 1048576:case 2097152:return B&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return B&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return B}}function U(B,$,ee){var fe=B.pendingLanes;if(fe===0)return 0;var Ae=0,De=B.suspendedLanes,tt=B.pingedLanes;B=B.warmLanes;var kt=fe&134217727;return kt!==0?(fe=kt&~De,fe!==0?Ae=z(fe):(tt&=kt,tt!==0?Ae=z(tt):ee||(ee=kt&~B,ee!==0&&(Ae=z(ee))))):(kt=fe&~De,kt!==0?Ae=z(kt):tt!==0?Ae=z(tt):ee||(ee=fe&~B,ee!==0&&(Ae=z(ee)))),Ae===0?0:$!==0&&$!==Ae&&($&De)===0&&(De=Ae&-Ae,ee=$&-$,De>=ee||De===32&&(ee&4194048)!==0)?$:Ae}function G(B,$){return(B.pendingLanes&~(B.suspendedLanes&~B.pingedLanes)&$)===0}function Y(B,$){switch(B){case 1:case 2:case 4:case 8:case 64:return $+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return $+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function K(){var B=Zl;return Zl<<=1,(Zl&62914560)===0&&(Zl=4194304),B}function Z(B){for(var $=[],ee=0;31>ee;ee++)$.push(B);return $}function J(B,$){B.pendingLanes|=$,$!==268435456&&(B.suspendedLanes=0,B.pingedLanes=0,B.warmLanes=0)}function te(B,$,ee,fe,Ae,De){var tt=B.pendingLanes;B.pendingLanes=ee,B.suspendedLanes=0,B.pingedLanes=0,B.warmLanes=0,B.expiredLanes&=ee,B.entangledLanes&=ee,B.errorRecoveryDisabledLanes&=ee,B.shellSuspendCounter=0;var kt=B.entanglements,nn=B.expirationTimes,Sn=B.hiddenUpdates;for(ee=tt&~ee;0<ee;){var Dn=31-Wa(ee),Cn=1<<Dn;kt[Dn]=0,nn[Dn]=-1;var jn=Sn[Dn];if(jn!==null)for(Sn[Dn]=null,Dn=0;Dn<jn.length;Dn++){var Rr=jn[Dn];Rr!==null&&(Rr.lane&=-536870913)}ee&=~Cn}fe!==0&&de(B,fe,0),De!==0&&Ae===0&&B.tag!==0&&(B.suspendedLanes|=De&~(tt&~$))}function de(B,$,ee){B.pendingLanes|=$,B.suspendedLanes&=~$;var fe=31-Wa($);B.entangledLanes|=$,B.entanglements[fe]=B.entanglements[fe]|1073741824|ee&261930}function se(B,$){var ee=B.entangledLanes|=$;for(B=B.entanglements;ee;){var fe=31-Wa(ee),Ae=1<<fe;Ae&$|B[fe]&$&&(B[fe]|=$),ee&=~Ae}}function ne(B,$){var ee=$&-$;return ee=(ee&42)!==0?1:ge(ee),(ee&(B.suspendedLanes|$))!==0?0:ee}function ge(B){switch(B){case 2:B=1;break;case 8:B=4;break;case 32:B=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:B=128;break;case 268435456:B=134217728;break;default:B=0}return B}function Ee(B){return B&=-B,2<B?8<B?(B&134217727)!==0?32:268435456:8:2}function we(B){if(typeof $d=="function"&&tf(B),Xa&&typeof Xa.setStrictMode=="function")try{Xa.setStrictMode(yl,B)}catch{}}function Ie(B,$){return B===$&&(B!==0||1/B===1/$)||B!==B&&$!==$}function Be(B){if(Du===void 0)try{throw Error()}catch(ee){var $=ee.stack.trim().match(/\n( *(at )?)/);Du=$&&$[1]||"",Ws=-1<ee.stack.indexOf(`
    at`)?" (<anonymous>)":-1<ee.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Du+B+Ws}function Me(B,$){if(!B||Bc)return"";Bc=!0;var ee=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var fe={DetermineComponentFrameRoot:function(){try{if($){var Cn=function(){throw Error()};if(Object.defineProperty(Cn.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Cn,[])}catch(Rr){var jn=Rr}Reflect.construct(B,[],Cn)}else{try{Cn.call()}catch(Rr){jn=Rr}B.call(Cn.prototype)}}else{try{throw Error()}catch(Rr){jn=Rr}(Cn=B())&&typeof Cn.catch=="function"&&Cn.catch(function(){})}}catch(Rr){if(Rr&&jn&&typeof Rr.stack=="string")return[Rr.stack,jn.stack]}return[null,null]}};fe.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var Ae=Object.getOwnPropertyDescriptor(fe.DetermineComponentFrameRoot,"name");Ae&&Ae.configurable&&Object.defineProperty(fe.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var De=fe.DetermineComponentFrameRoot(),tt=De[0],kt=De[1];if(tt&&kt){var nn=tt.split(`
`),Sn=kt.split(`
`);for(Ae=fe=0;fe<nn.length&&!nn[fe].includes("DetermineComponentFrameRoot");)fe++;for(;Ae<Sn.length&&!Sn[Ae].includes("DetermineComponentFrameRoot");)Ae++;if(fe===nn.length||Ae===Sn.length)for(fe=nn.length-1,Ae=Sn.length-1;1<=fe&&0<=Ae&&nn[fe]!==Sn[Ae];)Ae--;for(;1<=fe&&0<=Ae;fe--,Ae--)if(nn[fe]!==Sn[Ae]){if(fe!==1||Ae!==1)do if(fe--,Ae--,0>Ae||nn[fe]!==Sn[Ae]){var Dn=`
`+nn[fe].replace(" at new "," at ");return B.displayName&&Dn.includes("<anonymous>")&&(Dn=Dn.replace("<anonymous>",B.displayName)),Dn}while(1<=fe&&0<=Ae);break}}}finally{Bc=!1,Error.prepareStackTrace=ee}return(ee=B?B.displayName||B.name:"")?Be(ee):""}function Re(B,$){switch(B.tag){case 26:case 27:case 5:return Be(B.type);case 16:return Be("Lazy");case 13:return B.child!==$&&$!==null?Be("Suspense Fallback"):Be("Suspense");case 19:return Be("SuspenseList");case 0:case 15:return Me(B.type,!1);case 11:return Me(B.type.render,!1);case 1:return Me(B.type,!0);case 31:return Be("Activity");default:return""}}function Te(B){try{var $="",ee=null;do $+=Re(B,ee),ee=B,B=B.return;while(B);return $}catch(fe){return`
Error generating stack: `+fe.message+`
`+fe.stack}}function Se(B,$){if(typeof B=="object"&&B!==null){var ee=zd.get(B);return ee!==void 0?ee:($={value:B,source:$,stack:Te($)},zd.set(B,$),$)}return{value:B,source:$,stack:Te($)}}function oe(B,$){_o[Xs++]=Uc,_o[Xs++]=Si,Si=B,Uc=$}function ae(B,$,ee){vs[rs++]=ba,vs[rs++]=Rs,vs[rs++]=bs,bs=B;var fe=ba;B=Rs;var Ae=32-Wa(fe)-1;fe&=~(1<<Ae),ee+=1;var De=32-Wa($)+Ae;if(30<De){var tt=Ae-Ae%5;De=(fe&(1<<tt)-1).toString(32),fe>>=tt,Ae-=tt,ba=1<<32-Wa($)+Ae|ee<<Ae|fe,Rs=De+B}else ba=1<<De|ee<<Ae|fe,Rs=B}function be(B){B.return!==null&&(oe(B,1),ae(B,1,0))}function he(B){for(;B===Si;)Si=_o[--Xs],_o[Xs]=null,Uc=_o[--Xs],_o[Xs]=null;for(;B===bs;)bs=vs[--rs],vs[rs]=null,Rs=vs[--rs],vs[rs]=null,ba=vs[--rs],vs[rs]=null}function ue(B,$){vs[rs++]=ba,vs[rs++]=Rs,vs[rs++]=bs,ba=$.id,Rs=$.overflow,bs=B}function ye(B,$){F(Sa,$),F(So,B),F(ma,null),B=fh($),L(ma),F(ma,B)}function ce(){L(ma),L(So),L(Sa)}function _e(B){B.memoizedState!==null&&F($c,B);var $=ma.current,ee=ql($,B.type);$!==ee&&(F(So,B),F(ma,ee))}function ke(B){So.current===B&&(L(ma),L(So)),$c.current===B&&(L($c),Wi?hl._currentValue=dl:hl._currentValue2=dl)}function Pe(B){var $=Error(y(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ye(Se($,B)),Lu}function $e(B,$){if(!Ii)throw Error(y(175));$h(B.stateNode,B.type,B.memoizedProps,$,B)||Pe(B,!0)}function xe(B){for(la=B.return;la;)switch(la.tag){case 5:case 31:case 13:Da=!1;return;case 27:case 3:Da=!0;return;default:la=la.return}}function Ne(B){if(!Ii||B!==la)return!1;if(!Wr)return xe(B),Wr=!0,!1;var $=B.tag;if(oa?$!==3&&$!==27&&($!==5||Yl(B.type)&&!Oa(B.type,B.memoizedProps))&&Ni&&Pe(B):$!==3&&($!==5||Yl(B.type)&&!Oa(B.type,B.memoizedProps))&&Ni&&Pe(B),xe(B),$===13){if(!Ii)throw Error(y(316));if(B=B.memoizedState,B=B!==null?B.dehydrated:null,!B)throw Error(y(317));Ni=Md(B)}else if($===31){if(B=B.memoizedState,B=B!==null?B.dehydrated:null,!B)throw Error(y(317));Ni=Gh(B)}else Ni=oa&&$===27?Nh(B.type,Ni):la?Ih(B.stateNode):null;return!0}function je(){Ii&&(Ni=la=null,Wr=!1)}function He(){var B=Ys;return B!==null&&(Ka===null?Ka=B:Ka.push.apply(Ka,B),Ys=null),B}function Ye(B){Ys===null?Ys=[B]:Ys.push(B)}function Je(B,$,ee){Wi?(F(_s,$._currentValue),$._currentValue=ee):(F(_s,$._currentValue2),$._currentValue2=ee)}function ot(B){var $=_s.current;Wi?B._currentValue=$:B._currentValue2=$,L(_s)}function ze(B,$,ee){for(;B!==null;){var fe=B.alternate;if((B.childLanes&$)!==$?(B.childLanes|=$,fe!==null&&(fe.childLanes|=$)):fe!==null&&(fe.childLanes&$)!==$&&(fe.childLanes|=$),B===ee)break;B=B.return}}function pt(B,$,ee,fe){var Ae=B.child;for(Ae!==null&&(Ae.return=B);Ae!==null;){var De=Ae.dependencies;if(De!==null){var tt=Ae.child;De=De.firstContext;e:for(;De!==null;){var kt=De;De=Ae;for(var nn=0;nn<$.length;nn++)if(kt.context===$[nn]){De.lanes|=ee,kt=De.alternate,kt!==null&&(kt.lanes|=ee),ze(De.return,ee,B),fe||(tt=null);break e}De=kt.next}}else if(Ae.tag===18){if(tt=Ae.return,tt===null)throw Error(y(341));tt.lanes|=ee,De=tt.alternate,De!==null&&(De.lanes|=ee),ze(tt,ee,B),tt=null}else tt=Ae.child;if(tt!==null)tt.return=Ae;else for(tt=Ae;tt!==null;){if(tt===B){tt=null;break}if(Ae=tt.sibling,Ae!==null){Ae.return=tt.return,tt=Ae;break}tt=tt.return}Ae=tt}}function yt(B,$,ee,fe){B=null;for(var Ae=$,De=!1;Ae!==null;){if(!De){if((Ae.flags&524288)!==0)De=!0;else if((Ae.flags&262144)!==0)break}if(Ae.tag===10){var tt=Ae.alternate;if(tt===null)throw Error(y(387));if(tt=tt.memoizedProps,tt!==null){var kt=Ae.type;Yi(Ae.pendingProps.value,tt.value)||(B!==null?B.push(kt):B=[kt])}}else if(Ae===$c.current){if(tt=Ae.alternate,tt===null)throw Error(y(387));tt.memoizedState.memoizedState!==Ae.memoizedState.memoizedState&&(B!==null?B.push(hl):B=[hl])}Ae=Ae.return}B!==null&&pt($,B,ee,fe),$.flags|=262144}function ut(B){for(B=B.firstContext;B!==null;){var $=B.context;if(!Yi(Wi?$._currentValue:$._currentValue2,B.memoizedValue))return!0;B=B.next}return!1}function Et(B){wi=B,Ms=null,B=B.dependencies,B!==null&&(B.firstContext=null)}function qe(B){return lt(wi,B)}function Le(B,$){return wi===null&&Et(B),lt(B,$)}function lt(B,$){var ee=Wi?$._currentValue:$._currentValue2;if($={context:$,memoizedValue:ee,next:null},Ms===null){if(B===null)throw Error(y(308));Ms=$,B.dependencies={lanes:0,firstContext:$},B.flags|=524288}else Ms=Ms.next=$;return ee}function We(){return{controller:new nf,data:new Map,refCount:0}}function Qe(B){B.refCount--,B.refCount===0&&ga(Rf,function(){B.controller.abort()})}function at(){}function St(B){B!==mi&&B.next===null&&(mi===null?zc=mi=B:mi=mi.next=B),Ss=!0,Ca||(Ca=!0,nt())}function Ct(B,$){if(!Pu&&Ss){Pu=!0;do for(var ee=!1,fe=zc;fe!==null;){if(B!==0){var Ae=fe.pendingLanes;if(Ae===0)var De=0;else{var tt=fe.suspendedLanes,kt=fe.pingedLanes;De=(1<<31-Wa(42|B)+1)-1,De&=Ae&~(tt&~kt),De=De&201326741?De&201326741|1:De?De|2:0}De!==0&&(ee=!0,st(fe,De))}else De=Xr,De=U(fe,fe===Ur?De:0,fe.cancelPendingCommit!==null||fe.timeoutHandle!==qa),(De&3)===0||G(fe,De)||(ee=!0,st(fe,De));fe=fe.next}while(ee);Pu=!1}}function jt(){Gt()}function Gt(){Ss=Ca=!1;var B=0;jo!==0&&ul()&&(B=jo);for(var $=Ta(),ee=null,fe=zc;fe!==null;){var Ae=fe.next,De=Ft(fe,$);De===0?(fe.next=null,ee===null?zc=Ae:ee.next=Ae,Ae===null&&(mi=ee)):(ee=fe,(B!==0||(De&3)!==0)&&(Ss=!0)),fe=Ae}aa!==0&&aa!==5||Ct(B),jo!==0&&(jo=0)}function Ft(B,$){for(var ee=B.suspendedLanes,fe=B.pingedLanes,Ae=B.expirationTimes,De=B.pendingLanes&-62914561;0<De;){var tt=31-Wa(De),kt=1<<tt,nn=Ae[tt];nn===-1?((kt&ee)===0||(kt&fe)!==0)&&(Ae[tt]=Y(kt,$)):nn<=$&&(B.expiredLanes|=kt),De&=~kt}if($=Ur,ee=Xr,ee=U(B,B===$?ee:0,B.cancelPendingCommit!==null||B.timeoutHandle!==qa),fe=B.callbackNode,ee===0||B===$&&(yi===2||yi===9)||B.cancelPendingCommit!==null)return fe!==null&&fe!==null&&ku(fe),B.callbackNode=null,B.callbackPriority=0;if((ee&3)===0||G(B,ee)){if($=ee&-ee,$===B.callbackPriority)return $;switch(fe!==null&&ku(fe),Ee(ee)){case 2:case 8:ee=ef;break;case 32:ee=Fc;break;case 268435456:ee=Nu;break;default:ee=Fc}return fe=ct.bind(null,B),ee=Pc(ee,fe),B.callbackPriority=$,B.callbackNode=ee,$}return fe!==null&&fe!==null&&ku(fe),B.callbackPriority=2,B.callbackNode=null,2}function ct(B,$){if(aa!==0&&aa!==5)return B.callbackNode=null,B.callbackPriority=0,null;var ee=B.callbackNode;if(Vs()&&B.callbackNode!==ee)return null;var fe=Xr;return fe=U(B,B===Ur?fe:0,B.cancelPendingCommit!==null||B.timeoutHandle!==qa),fe===0?null:(Cs(B,fe,$),Ft(B,Ta()),B.callbackNode!=null&&B.callbackNode===ee?ct.bind(null,B):null)}function st(B,$){if(Vs())return null;Cs(B,$,!0)}function nt(){hd?pd(function(){(jr&6)!==0?Pc(Iu,jt):Gt()}):Pc(Iu,jt)}function At(){if(jo===0){var B=xo;B===0&&(B=Mu,Mu<<=1,(Mu&261888)===0&&(Mu=256)),jo=B}return jo}function Yt(B,$){if(Kl===null){var ee=Kl=[];Gd=0,xo=At(),ca={status:"pending",value:void 0,then:function(fe){ee.push(fe)}}}return Gd++,$.then(ht,ht),$}function ht(){if(--Gd===0&&Kl!==null){ca!==null&&(ca.status="fulfilled");var B=Kl;Kl=null,xo=0,ca=null;for(var $=0;$<B.length;$++)(0,B[$])()}}function Tt(B,$){var ee=[],fe={status:"pending",value:null,reason:null,then:function(Ae){ee.push(Ae)}};return B.then(function(){fe.status="fulfilled",fe.value=$;for(var Ae=0;Ae<ee.length;Ae++)(0,ee[Ae])($)},function(Ae){for(fe.status="rejected",fe.reason=Ae,Ae=0;Ae<ee.length;Ae++)(0,ee[Ae])(void 0)}),fe}function Kt(){var B=Vo.current;return B!==null?B:Ur.pooledCache}function _n(B,$){$===null?F(Vo,Vo.current):F(Vo,$.pool)}function Ht(){var B=Kt();return B===null?null:{parent:Wi?Oi._currentValue:Oi._currentValue2,pool:B}}function Ot(B,$){if(Yi(B,$))return!0;if(typeof B!="object"||B===null||typeof $!="object"||$===null)return!1;var ee=Object.keys(B),fe=Object.keys($);if(ee.length!==fe.length)return!1;for(fe=0;fe<ee.length;fe++){var Ae=ee[fe];if(!Cf.call($,Ae)||!Yi(B[Ae],$[Ae]))return!1}return!0}function cn(B){return B=B.status,B==="fulfilled"||B==="rejected"}function Mn(B,$,ee){switch(ee=B[ee],ee===void 0?B.push($):ee!==$&&($.then(at,at),$=ee),$.status){case"fulfilled":return $.value;case"rejected":throw B=$.reason,rr(B),B;default:if(typeof $.status=="string")$.then(at,at);else{if(B=Ur,B!==null&&100<B.shellSuspendCounter)throw Error(y(482));B=$,B.status="pending",B.then(function(fe){if($.status==="pending"){var Ae=$;Ae.status="fulfilled",Ae.value=fe}},function(fe){if($.status==="pending"){var Ae=$;Ae.status="rejected",Ae.reason=fe}})}switch($.status){case"fulfilled":return $.value;case"rejected":throw B=$.reason,rr(B),B}throw La=$,ua}}function In(B){try{var $=B._init;return $(B._payload)}catch(ee){throw ee!==null&&typeof ee=="object"&&typeof ee.then=="function"?(La=ee,ua):ee}}function On(){if(La===null)throw Error(y(459));var B=La;return La=null,B}function rr(B){if(B===ua||B===Es)throw Error(y(483))}function Ar(B){var $=vl;return vl+=1,Ho===null&&(Ho=[]),Mn(Ho,B,$)}function hr(B,$){$=$.props.ref,B.ref=$!==void 0?$:null}function Yr(B,$){throw $.$$typeof===il?Error(y(525)):(B=Object.prototype.toString.call($),Error(y(31,B==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":B)))}function $r(B){function $(Xt,Ut){if(B){var tn=Xt.deletions;tn===null?(Xt.deletions=[Ut],Xt.flags|=16):tn.push(Ut)}}function ee(Xt,Ut){if(!B)return null;for(;Ut!==null;)$(Xt,Ut),Ut=Ut.sibling;return null}function fe(Xt){for(var Ut=new Map;Xt!==null;)Xt.key!==null?Ut.set(Xt.key,Xt):Ut.set(Xt.index,Xt),Xt=Xt.sibling;return Ut}function Ae(Xt,Ut){return Xt=ts(Xt,Ut),Xt.index=0,Xt.sibling=null,Xt}function De(Xt,Ut,tn){return Xt.index=tn,B?(tn=Xt.alternate,tn!==null?(tn=tn.index,tn<Ut?(Xt.flags|=67108866,Ut):tn):(Xt.flags|=67108866,Ut)):(Xt.flags|=1048576,Ut)}function tt(Xt){return B&&Xt.alternate===null&&(Xt.flags|=67108866),Xt}function kt(Xt,Ut,tn,Nn){return Ut===null||Ut.tag!==6?(Ut=Qu(tn,Xt.mode,Nn),Ut.return=Xt,Ut):(Ut=Ae(Ut,tn),Ut.return=Xt,Ut)}function nn(Xt,Ut,tn,Nn){var ur=tn.type;return ur===ol?Dn(Xt,Ut,tn.props.children,Nn,tn.key):Ut!==null&&(Ut.elementType===ur||typeof ur=="object"&&ur!==null&&ur.$$typeof===Na&&In(ur)===Ut.type)?(Ut=Ae(Ut,tn.props),hr(Ut,tn),Ut.return=Xt,Ut):(Ut=po(tn.type,tn.key,tn.props,null,Xt.mode,Nn),hr(Ut,tn),Ut.return=Xt,Ut)}function Sn(Xt,Ut,tn,Nn){return Ut===null||Ut.tag!==4||Ut.stateNode.containerInfo!==tn.containerInfo||Ut.stateNode.implementation!==tn.implementation?(Ut=nd(tn,Xt.mode,Nn),Ut.return=Xt,Ut):(Ut=Ae(Ut,tn.children||[]),Ut.return=Xt,Ut)}function Dn(Xt,Ut,tn,Nn,ur){return Ut===null||Ut.tag!==7?(Ut=ps(tn,Xt.mode,Nn,ur),Ut.return=Xt,Ut):(Ut=Ae(Ut,tn),Ut.return=Xt,Ut)}function Cn(Xt,Ut,tn){if(typeof Ut=="string"&&Ut!==""||typeof Ut=="number"||typeof Ut=="bigint")return Ut=Qu(""+Ut,Xt.mode,tn),Ut.return=Xt,Ut;if(typeof Ut=="object"&&Ut!==null){switch(Ut.$$typeof){case Hs:return tn=po(Ut.type,Ut.key,Ut.props,null,Xt.mode,tn),hr(tn,Ut),tn.return=Xt,tn;case sl:return Ut=nd(Ut,Xt.mode,tn),Ut.return=Xt,Ut;case Na:return Ut=In(Ut),Cn(Xt,Ut,tn)}if(Uo(Ut)||R(Ut))return Ut=ps(Ut,Xt.mode,tn,null),Ut.return=Xt,Ut;if(typeof Ut.then=="function")return Cn(Xt,Ar(Ut),tn);if(Ut.$$typeof===ms)return Cn(Xt,Le(Xt,Ut),tn);Yr(Xt,Ut)}return null}function jn(Xt,Ut,tn,Nn){var ur=Ut!==null?Ut.key:null;if(typeof tn=="string"&&tn!==""||typeof tn=="number"||typeof tn=="bigint")return ur!==null?null:kt(Xt,Ut,""+tn,Nn);if(typeof tn=="object"&&tn!==null){switch(tn.$$typeof){case Hs:return tn.key===ur?nn(Xt,Ut,tn,Nn):null;case sl:return tn.key===ur?Sn(Xt,Ut,tn,Nn):null;case Na:return tn=In(tn),jn(Xt,Ut,tn,Nn)}if(Uo(tn)||R(tn))return ur!==null?null:Dn(Xt,Ut,tn,Nn,null);if(typeof tn.then=="function")return jn(Xt,Ut,Ar(tn),Nn);if(tn.$$typeof===ms)return jn(Xt,Ut,Le(Xt,tn),Nn);Yr(Xt,tn)}return null}function Rr(Xt,Ut,tn,Nn,ur){if(typeof Nn=="string"&&Nn!==""||typeof Nn=="number"||typeof Nn=="bigint")return Xt=Xt.get(tn)||null,kt(Ut,Xt,""+Nn,ur);if(typeof Nn=="object"&&Nn!==null){switch(Nn.$$typeof){case Hs:return Xt=Xt.get(Nn.key===null?tn:Nn.key)||null,nn(Ut,Xt,Nn,ur);case sl:return Xt=Xt.get(Nn.key===null?tn:Nn.key)||null,Sn(Ut,Xt,Nn,ur);case Na:return Nn=In(Nn),Rr(Xt,Ut,tn,Nn,ur)}if(Uo(Nn)||R(Nn))return Xt=Xt.get(tn)||null,Dn(Ut,Xt,Nn,ur,null);if(typeof Nn.then=="function")return Rr(Xt,Ut,tn,Ar(Nn),ur);if(Nn.$$typeof===ms)return Rr(Xt,Ut,tn,Le(Ut,Nn),ur);Yr(Ut,Nn)}return null}function Ji(Xt,Ut,tn,Nn){for(var ur=null,zi=null,pr=Ut,ni=Ut=0,ya=null;pr!==null&&ni<tn.length;ni++){pr.index>ni?(ya=pr,pr=null):ya=pr.sibling;var oi=jn(Xt,pr,tn[ni],Nn);if(oi===null){pr===null&&(pr=ya);break}B&&pr&&oi.alternate===null&&$(Xt,pr),Ut=De(oi,Ut,ni),zi===null?ur=oi:zi.sibling=oi,zi=oi,pr=ya}if(ni===tn.length)return ee(Xt,pr),Wr&&oe(Xt,ni),ur;if(pr===null){for(;ni<tn.length;ni++)pr=Cn(Xt,tn[ni],Nn),pr!==null&&(Ut=De(pr,Ut,ni),zi===null?ur=pr:zi.sibling=pr,zi=pr);return Wr&&oe(Xt,ni),ur}for(pr=fe(pr);ni<tn.length;ni++)ya=Rr(pr,Xt,ni,tn[ni],Nn),ya!==null&&(B&&ya.alternate!==null&&pr.delete(ya.key===null?ni:ya.key),Ut=De(ya,Ut,ni),zi===null?ur=ya:zi.sibling=ya,zi=ya);return B&&pr.forEach(function(Ts){return $(Xt,Ts)}),Wr&&oe(Xt,ni),ur}function ac(Xt,Ut,tn,Nn){if(tn==null)throw Error(y(151));for(var ur=null,zi=null,pr=Ut,ni=Ut=0,ya=null,oi=tn.next();pr!==null&&!oi.done;ni++,oi=tn.next()){pr.index>ni?(ya=pr,pr=null):ya=pr.sibling;var Ts=jn(Xt,pr,oi.value,Nn);if(Ts===null){pr===null&&(pr=ya);break}B&&pr&&Ts.alternate===null&&$(Xt,pr),Ut=De(Ts,Ut,ni),zi===null?ur=Ts:zi.sibling=Ts,zi=Ts,pr=ya}if(oi.done)return ee(Xt,pr),Wr&&oe(Xt,ni),ur;if(pr===null){for(;!oi.done;ni++,oi=tn.next())oi=Cn(Xt,oi.value,Nn),oi!==null&&(Ut=De(oi,Ut,ni),zi===null?ur=oi:zi.sibling=oi,zi=oi);return Wr&&oe(Xt,ni),ur}for(pr=fe(pr);!oi.done;ni++,oi=tn.next())oi=Rr(pr,Xt,ni,oi.value,Nn),oi!==null&&(B&&oi.alternate!==null&&pr.delete(oi.key===null?ni:oi.key),Ut=De(oi,Ut,ni),zi===null?ur=oi:zi.sibling=oi,zi=oi);return B&&pr.forEach(function(Mf){return $(Xt,Mf)}),Wr&&oe(Xt,ni),ur}function Qo(Xt,Ut,tn,Nn){if(typeof tn=="object"&&tn!==null&&tn.type===ol&&tn.key===null&&(tn=tn.props.children),typeof tn=="object"&&tn!==null){switch(tn.$$typeof){case Hs:e:{for(var ur=tn.key;Ut!==null;){if(Ut.key===ur){if(ur=tn.type,ur===ol){if(Ut.tag===7){ee(Xt,Ut.sibling),Nn=Ae(Ut,tn.props.children),Nn.return=Xt,Xt=Nn;break e}}else if(Ut.elementType===ur||typeof ur=="object"&&ur!==null&&ur.$$typeof===Na&&In(ur)===Ut.type){ee(Xt,Ut.sibling),Nn=Ae(Ut,tn.props),hr(Nn,tn),Nn.return=Xt,Xt=Nn;break e}ee(Xt,Ut);break}else $(Xt,Ut);Ut=Ut.sibling}tn.type===ol?(Nn=ps(tn.props.children,Xt.mode,Nn,tn.key),Nn.return=Xt,Xt=Nn):(Nn=po(tn.type,tn.key,tn.props,null,Xt.mode,Nn),hr(Nn,tn),Nn.return=Xt,Xt=Nn)}return tt(Xt);case sl:e:{for(ur=tn.key;Ut!==null;){if(Ut.key===ur)if(Ut.tag===4&&Ut.stateNode.containerInfo===tn.containerInfo&&Ut.stateNode.implementation===tn.implementation){ee(Xt,Ut.sibling),Nn=Ae(Ut,tn.children||[]),Nn.return=Xt,Xt=Nn;break e}else{ee(Xt,Ut);break}else $(Xt,Ut);Ut=Ut.sibling}Nn=nd(tn,Xt.mode,Nn),Nn.return=Xt,Xt=Nn}return tt(Xt);case Na:return tn=In(tn),Qo(Xt,Ut,tn,Nn)}if(Uo(tn))return Ji(Xt,Ut,tn,Nn);if(R(tn)){if(ur=R(tn),typeof ur!="function")throw Error(y(150));return tn=ur.call(tn),ac(Xt,Ut,tn,Nn)}if(typeof tn.then=="function")return Qo(Xt,Ut,Ar(tn),Nn);if(tn.$$typeof===ms)return Qo(Xt,Ut,Le(Xt,tn),Nn);Yr(Xt,tn)}return typeof tn=="string"&&tn!==""||typeof tn=="number"||typeof tn=="bigint"?(tn=""+tn,Ut!==null&&Ut.tag===6?(ee(Xt,Ut.sibling),Nn=Ae(Ut,tn),Nn.return=Xt,Xt=Nn):(ee(Xt,Ut),Nn=Qu(tn,Xt.mode,Nn),Nn.return=Xt,Xt=Nn),tt(Xt)):ee(Xt,Ut)}return function(Xt,Ut,tn,Nn){try{vl=0;var ur=Qo(Xt,Ut,tn,Nn);return Ho=null,ur}catch(pr){if(pr===ua||pr===Es)throw pr;var zi=u(29,pr,null,Xt.mode);return zi.lanes=Nn,zi.return=Xt,zi}}}function wr(){for(var B=Ks,$=bl=Ks=0;$<B;){var ee=Ea[$];Ea[$++]=null;var fe=Ea[$];Ea[$++]=null;var Ae=Ea[$];Ea[$++]=null;var De=Ea[$];if(Ea[$++]=null,fe!==null&&Ae!==null){var tt=fe.pending;tt===null?Ae.next=Ae:(Ae.next=tt.next,tt.next=Ae),fe.pending=Ae}De!==0&&Lr(ee,Ae,De)}}function mr(B,$,ee,fe){Ea[Ks++]=B,Ea[Ks++]=$,Ea[Ks++]=ee,Ea[Ks++]=fe,bl|=fe,B.lanes|=fe,B=B.alternate,B!==null&&(B.lanes|=fe)}function ir(B,$,ee,fe){return mr(B,$,ee,fe),Hr(B)}function zn(B,$){return mr(B,null,null,$),Hr(B)}function Lr(B,$,ee){B.lanes|=ee;var fe=B.alternate;fe!==null&&(fe.lanes|=ee);for(var Ae=!1,De=B.return;De!==null;)De.childLanes|=ee,fe=De.alternate,fe!==null&&(fe.childLanes|=ee),De.tag===22&&(B=De.stateNode,B===null||B._visibility&1||(Ae=!0)),B=De,De=De.return;return B.tag===3?(De=B.stateNode,Ae&&$!==null&&(Ae=31-Wa(ee),B=De.hiddenUpdates,fe=B[Ae],fe===null?B[Ae]=[$]:fe.push($),$.lane=ee|536870912),De):null}function Hr(B){if(50<ai)throw ai=0,Wc=null,Error(y(185));for(var $=B.return;$!==null;)B=$,$=B.return;return B.tag===3?B.stateNode:null}function Xe(B){B.updateQueue={baseState:B.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function it(B,$){B=B.updateQueue,$.updateQueue===B&&($.updateQueue={baseState:B.baseState,firstBaseUpdate:B.firstBaseUpdate,lastBaseUpdate:B.lastBaseUpdate,shared:B.shared,callbacks:null})}function xt(B){return{lane:B,tag:0,payload:null,callback:null,next:null}}function $t(B,$,ee){var fe=B.updateQueue;if(fe===null)return null;if(fe=fe.shared,(jr&2)!==0){var Ae=fe.pending;return Ae===null?$.next=$:($.next=Ae.next,Ae.next=$),fe.pending=$,$=Hr(B),Lr(B,null,ee),$}return mr(B,fe,$,ee),Hr(B)}function en(B,$,ee){if($=$.updateQueue,$!==null&&($=$.shared,(ee&4194048)!==0)){var fe=$.lanes;fe&=B.pendingLanes,ee|=fe,$.lanes=ee,se(B,ee)}}function Qt(B,$){var ee=B.updateQueue,fe=B.alternate;if(fe!==null&&(fe=fe.updateQueue,ee===fe)){var Ae=null,De=null;if(ee=ee.firstBaseUpdate,ee!==null){do{var tt={lane:ee.lane,tag:ee.tag,payload:ee.payload,callback:null,next:null};De===null?Ae=De=tt:De=De.next=tt,ee=ee.next}while(ee!==null);De===null?Ae=De=$:De=De.next=$}else Ae=De=$;ee={baseState:fe.baseState,firstBaseUpdate:Ae,lastBaseUpdate:De,shared:fe.shared,callbacks:fe.callbacks},B.updateQueue=ee;return}B=ee.lastBaseUpdate,B===null?ee.firstBaseUpdate=$:B.next=$,ee.lastBaseUpdate=$}function pn(){if(Bu){var B=ca;if(B!==null)throw B}}function mn(B,$,ee,fe){Bu=!1;var Ae=B.updateQueue;as=!1;var De=Ae.firstBaseUpdate,tt=Ae.lastBaseUpdate,kt=Ae.shared.pending;if(kt!==null){Ae.shared.pending=null;var nn=kt,Sn=nn.next;nn.next=null,tt===null?De=Sn:tt.next=Sn,tt=nn;var Dn=B.alternate;Dn!==null&&(Dn=Dn.updateQueue,kt=Dn.lastBaseUpdate,kt!==tt&&(kt===null?Dn.firstBaseUpdate=Sn:kt.next=Sn,Dn.lastBaseUpdate=nn))}if(De!==null){var Cn=Ae.baseState;tt=0,Dn=Sn=nn=null,kt=De;do{var jn=kt.lane&-536870913,Rr=jn!==kt.lane;if(Rr?(Xr&jn)===jn:(fe&jn)===jn){jn!==0&&jn===xo&&(Bu=!0),Dn!==null&&(Dn=Dn.next={lane:0,tag:kt.tag,payload:kt.payload,callback:null,next:null});e:{var Ji=B,ac=kt;jn=$;var Qo=ee;switch(ac.tag){case 1:if(Ji=ac.payload,typeof Ji=="function"){Cn=Ji.call(Qo,Cn,jn);break e}Cn=Ji;break e;case 3:Ji.flags=Ji.flags&-65537|128;case 0:if(Ji=ac.payload,jn=typeof Ji=="function"?Ji.call(Qo,Cn,jn):Ji,jn==null)break e;Cn=hu({},Cn,jn);break e;case 2:as=!0}}jn=kt.callback,jn!==null&&(B.flags|=64,Rr&&(B.flags|=8192),Rr=Ae.callbacks,Rr===null?Ae.callbacks=[jn]:Rr.push(jn))}else Rr={lane:jn,tag:kt.tag,payload:kt.payload,callback:kt.callback,next:null},Dn===null?(Sn=Dn=Rr,nn=Cn):Dn=Dn.next=Rr,tt|=jn;if(kt=kt.next,kt===null){if(kt=Ae.shared.pending,kt===null)break;Rr=kt,kt=Rr.next,Rr.next=null,Ae.lastBaseUpdate=Rr,Ae.shared.pending=null}}while(!0);Dn===null&&(nn=Cn),Ae.baseState=nn,Ae.firstBaseUpdate=Sn,Ae.lastBaseUpdate=Dn,De===null&&(Ae.shared.lanes=0),Ao|=tt,B.lanes=tt,B.memoizedState=Cn}}function bn(B,$){if(typeof B!="function")throw Error(y(191,B));B.call($)}function vn(B,$){var ee=B.callbacks;if(ee!==null)for(B.callbacks=null,B=0;B<ee.length;B++)bn(ee[B],$)}function wn(B,$){B=Qs,F(qo,B),F(_l,$),Qs=B|$.baseLanes}function qt(){F(qo,Qs),F(_l,_l.current)}function Ke(){Qs=qo.current,L(_l),L(qo)}function _t(B){var $=B.alternate;F(ji,ji.current&1),F(Ya,B),Za===null&&($===null||_l.current!==null||$.memoizedState!==null)&&(Za=B)}function It(B){F(ji,ji.current),F(Ya,B),Za===null&&(Za=B)}function Nt(B){B.tag===22?(F(ji,ji.current),F(Ya,B),Za===null&&(Za=B)):Mt()}function Mt(){F(ji,ji.current),F(Ya,Ya.current)}function on(B){L(Ya),Za===B&&(Za=null),L(ji)}function dn(B){for(var $=B;$!==null;){if($.tag===13){var ee=$.memoizedState;if(ee!==null&&(ee=ee.dehydrated,ee===null||zo(ee)||_u(ee)))return $}else if($.tag===19&&($.memoizedProps.revealOrder==="forwards"||$.memoizedProps.revealOrder==="backwards"||$.memoizedProps.revealOrder==="unstable_legacy-backwards"||$.memoizedProps.revealOrder==="together")){if(($.flags&128)!==0)return $}else if($.child!==null){$.child.return=$,$=$.child;continue}if($===B)break;for(;$.sibling===null;){if($.return===null||$.return===B)return null;$=$.return}$.sibling.return=$.return,$=$.sibling}return null}function ln(){throw Error(y(321))}function kn(B,$){if($===null)return!1;for(var ee=0;ee<$.length&&ee<B.length;ee++)if(!Yi(B[ee],$[ee]))return!1;return!0}function An(B,$,ee,fe,Ae,De){return Eo=De,Ir=$,$.memoizedState=null,$.updateQueue=null,$.lanes=0,sr.H=B===null||B.memoizedState===null?Bi:Js,ei=!1,De=ee(fe,Ae),ei=!1,Dr&&(De=Tn($,ee,fe,Ae)),Gn(B),De}function Gn(B){sr.H=ss;var $=Jn!==null&&Jn.next!==null;if(Eo=0,xr=Jn=Ir=null,Br=!1,As=0,ks=null,$)throw Error(y(300));B===null||Mi||(B=B.dependencies,B!==null&&ut(B)&&(Mi=!0))}function Tn(B,$,ee,fe){Ir=B;var Ae=0;do{if(Dr&&(ks=null),As=0,Dr=!1,25<=Ae)throw Error(y(301));if(Ae+=1,xr=Jn=null,B.updateQueue!=null){var De=B.updateQueue;De.lastEffect=null,De.events=null,De.stores=null,De.memoCache!=null&&(De.memoCache.index=0)}sr.H=Wo,De=$(ee,fe)}while(Dr);return De}function Bn(){var B=sr.H,$=B.useState()[0];return $=typeof $.then=="function"?Rn($):$,B=B.useState()[0],(Jn!==null?Jn.memoizedState:null)!==B&&(Ir.flags|=1024),$}function nr(){var B=Ra!==0;return Ra=0,B}function Nr(B,$,ee){$.updateQueue=B.updateQueue,$.flags&=-2053,B.lanes&=~ee}function ar(B){if(Br){for(B=B.memoizedState;B!==null;){var $=B.queue;$!==null&&($.pending=null),B=B.next}Br=!1}Eo=0,xr=Jn=Ir=null,Dr=!1,As=Ra=0,ks=null}function Pn(){var B={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xr===null?Ir.memoizedState=xr=B:xr=xr.next=B,xr}function fn(){if(Jn===null){var B=Ir.alternate;B=B!==null?B.memoizedState:null}else B=Jn.next;var $=xr===null?Ir.memoizedState:xr.next;if($!==null)xr=$,Jn=B;else{if(B===null)throw Ir.alternate===null?Error(y(467)):Error(y(310));Jn=B,B={memoizedState:Jn.memoizedState,baseState:Jn.baseState,baseQueue:Jn.baseQueue,queue:Jn.queue,next:null},xr===null?Ir.memoizedState=xr=B:xr=xr.next=B}return xr}function Vn(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Rn(B){var $=As;return As+=1,ks===null&&(ks=[]),B=Mn(ks,B,$),$=Ir,(xr===null?$.memoizedState:xr.next)===null&&($=$.alternate,sr.H=$===null||$.memoizedState===null?Bi:Js),B}function Mr(B){if(B!==null&&typeof B=="object"){if(typeof B.then=="function")return Rn(B);if(B.$$typeof===ms)return qe(B)}throw Error(y(438,String(B)))}function fi(B){var $=null,ee=Ir.updateQueue;if(ee!==null&&($=ee.memoCache),$==null){var fe=Ir.alternate;fe!==null&&(fe=fe.updateQueue,fe!==null&&(fe=fe.memoCache,fe!=null&&($={data:fe.data.map(function(Ae){return Ae.slice()}),index:0})))}if($==null&&($={data:[],index:0}),ee===null&&(ee=Vn(),Ir.updateQueue=ee),ee.memoCache=$,ee=$.data[$.index],ee===void 0)for(ee=$.data[$.index]=Array(B),fe=0;fe<B;fe++)ee[fe]=ad;return $.index++,ee}function dr(B,$){return typeof $=="function"?$(B):$}function si(B){var $=fn();return Or($,Jn,B)}function Or(B,$,ee){var fe=B.queue;if(fe===null)throw Error(y(311));fe.lastRenderedReducer=ee;var Ae=B.baseQueue,De=fe.pending;if(De!==null){if(Ae!==null){var tt=Ae.next;Ae.next=De.next,De.next=tt}$.baseQueue=Ae=De,fe.pending=null}if(De=B.baseState,Ae===null)B.memoizedState=De;else{$=Ae.next;var kt=tt=null,nn=null,Sn=$,Dn=!1;do{var Cn=Sn.lane&-536870913;if(Cn!==Sn.lane?(Xr&Cn)===Cn:(Eo&Cn)===Cn){var jn=Sn.revertLane;if(jn===0)nn!==null&&(nn=nn.next={lane:0,revertLane:0,gesture:null,action:Sn.action,hasEagerState:Sn.hasEagerState,eagerState:Sn.eagerState,next:null}),Cn===xo&&(Dn=!0);else if((Eo&jn)===jn){Sn=Sn.next,jn===xo&&(Dn=!0);continue}else Cn={lane:0,revertLane:Sn.revertLane,gesture:null,action:Sn.action,hasEagerState:Sn.hasEagerState,eagerState:Sn.eagerState,next:null},nn===null?(kt=nn=Cn,tt=De):nn=nn.next=Cn,Ir.lanes|=jn,Ao|=jn;Cn=Sn.action,ei&&ee(De,Cn),De=Sn.hasEagerState?Sn.eagerState:ee(De,Cn)}else jn={lane:Cn,revertLane:Sn.revertLane,gesture:Sn.gesture,action:Sn.action,hasEagerState:Sn.hasEagerState,eagerState:Sn.eagerState,next:null},nn===null?(kt=nn=jn,tt=De):nn=nn.next=jn,Ir.lanes|=Cn,Ao|=Cn;Sn=Sn.next}while(Sn!==null&&Sn!==$);if(nn===null?tt=De:nn.next=kt,!Yi(De,B.memoizedState)&&(Mi=!0,Dn&&(ee=ca,ee!==null)))throw ee;B.memoizedState=De,B.baseState=tt,B.baseQueue=nn,fe.lastRenderedState=De}return Ae===null&&(fe.lanes=0),[B.memoizedState,fe.dispatch]}function li(B){var $=fn(),ee=$.queue;if(ee===null)throw Error(y(311));ee.lastRenderedReducer=B;var fe=ee.dispatch,Ae=ee.pending,De=$.memoizedState;if(Ae!==null){ee.pending=null;var tt=Ae=Ae.next;do De=B(De,tt.action),tt=tt.next;while(tt!==Ae);Yi(De,$.memoizedState)||(Mi=!0),$.memoizedState=De,$.baseQueue===null&&($.baseState=De),ee.lastRenderedState=De}return[De,fe]}function ci(B,$,ee){var fe=Ir,Ae=fn(),De=Wr;if(De){if(ee===void 0)throw Error(y(407));ee=ee()}else ee=$();var tt=!Yi((Jn||Ae).memoizedState,ee);if(tt&&(Ae.memoizedState=ee,Mi=!0),Ae=Ae.queue,Gr(va.bind(null,fe,Ae,B),[B]),Ae.getSnapshot!==$||tt||xr!==null&&xr.memoizedState.tag&1){if(fe.flags|=2048,Kn(9,{destroy:void 0},xi.bind(null,fe,Ae,ee,$),null),Ur===null)throw Error(y(349));De||(Eo&127)!==0||pi(fe,$,ee)}return ee}function pi(B,$,ee){B.flags|=16384,B={getSnapshot:$,value:ee},$=Ir.updateQueue,$===null?($=Vn(),Ir.updateQueue=$,$.stores=[B]):(ee=$.stores,ee===null?$.stores=[B]:ee.push(B))}function xi(B,$,ee,fe){$.value=ee,$.getSnapshot=fe,Ce($)&&Fe(B)}function va(B,$,ee){return ee(function(){Ce($)&&Fe(B)})}function Ce(B){var $=B.getSnapshot;B=B.value;try{var ee=$();return!Yi(B,ee)}catch{return!0}}function Fe(B){var $=zn(B,2);$!==null&&Pi($,B,2)}function Ve(B){var $=Pn();if(typeof B=="function"){var ee=B;if(B=ee(),ei){we(!0);try{ee()}finally{we(!1)}}}return $.memoizedState=$.baseState=B,$.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:dr,lastRenderedState:B},$}function mt(B,$,ee,fe){return B.baseState=ee,Or(B,Jn,typeof fe=="function"?fe:dr)}function Pt(B,$,ee,fe,Ae){if(Cl(B))throw Error(y(485));if(B=$.action,B!==null){var De={payload:Ae,action:B,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(tt){De.listeners.push(tt)}};sr.T!==null?ee(!0):De.isTransition=!1,fe(De),ee=$.pending,ee===null?(De.next=$.pending=De,an($,De)):(De.next=ee.next,$.pending=ee.next=De)}}function an(B,$){var ee=$.action,fe=$.payload,Ae=B.state;if($.isTransition){var De=sr.T,tt={};sr.T=tt;try{var kt=ee(Ae,fe),nn=sr.S;nn!==null&&nn(tt,kt),zt(B,$,kt)}catch(Sn){xn(B,$,Sn)}finally{De!==null&&tt.types!==null&&(De.types=tt.types),sr.T=De}}else try{De=ee(Ae,fe),zt(B,$,De)}catch(Sn){xn(B,$,Sn)}}function zt(B,$,ee){ee!==null&&typeof ee=="object"&&typeof ee.then=="function"?ee.then(function(fe){sn(B,$,fe)},function(fe){return xn(B,$,fe)}):sn(B,$,ee)}function sn(B,$,ee){$.status="fulfilled",$.value=ee,Un($),B.state=ee,$=B.pending,$!==null&&(ee=$.next,ee===$?B.pending=null:(ee=ee.next,$.next=ee,an(B,ee)))}function xn(B,$,ee){var fe=B.pending;if(B.pending=null,fe!==null){fe=fe.next;do $.status="rejected",$.reason=ee,Un($),$=$.next;while($!==fe)}B.action=null}function Un(B){B=B.listeners;for(var $=0;$<B.length;$++)(0,B[$])()}function tr(B,$){return $}function Tr(B,$){if(Wr){var ee=Ur.formState;if(ee!==null){e:{var fe=Ir;if(Wr){if(Ni){var Ae=kh(Ni,Da);if(Ae){Ni=Ih(Ae),fe=wd(Ae);break e}}Pe(fe)}fe=!1}fe&&($=ee[0])}}ee=Pn(),ee.memoizedState=ee.baseState=$,fe={pending:null,lanes:0,dispatch:null,lastRenderedReducer:tr,lastRenderedState:$},ee.queue=fe,ee=Ua.bind(null,Ir,fe),fe.dispatch=ee,fe=Ve(!1);var De=Tl.bind(null,Ir,!1,fe.queue);return fe=Pn(),Ae={state:$,dispatch:null,action:B,pending:null},fe.queue=Ae,ee=Pt.bind(null,Ir,Ae,De,ee),Ae.dispatch=ee,fe.memoizedState=B,[$,ee,!1]}function lr(B){var $=fn();return Xn($,Jn,B)}function Xn(B,$,ee){if($=Or(B,$,tr)[0],B=si(dr)[0],typeof $=="object"&&$!==null&&typeof $.then=="function")try{var fe=Rn($)}catch(tt){throw tt===ua?Es:tt}else fe=$;$=fn();var Ae=$.queue,De=Ae.dispatch;return ee!==$.memoizedState&&(Ir.flags|=2048,Kn(9,{destroy:void 0},Fn.bind(null,Ae,ee),null)),[fe,De,B]}function Fn(B,$){B.action=$}function Hn(B){var $=fn(),ee=Jn;if(ee!==null)return Xn($,ee,B);fn(),$=$.memoizedState,ee=fn();var fe=ee.queue.dispatch;return ee.memoizedState=B,[$,fe,!1]}function Kn(B,$,ee,fe){return B={tag:B,create:ee,deps:fe,inst:$,next:null},$=Ir.updateQueue,$===null&&($=Vn(),Ir.updateQueue=$),ee=$.lastEffect,ee===null?$.lastEffect=B.next=B:(fe=ee.next,ee.next=B,B.next=fe,$.lastEffect=B),B}function Er(){return fn().memoizedState}function ii(B,$,ee,fe){var Ae=Pn();Ir.flags|=B,Ae.memoizedState=Kn(1|$,{destroy:void 0},ee,fe===void 0?null:fe)}function Pr(B,$,ee,fe){var Ae=fn();fe=fe===void 0?null:fe;var De=Ae.memoizedState.inst;Jn!==null&&fe!==null&&kn(fe,Jn.memoizedState.deps)?Ae.memoizedState=Kn($,De,ee,fe):(Ir.flags|=B,Ae.memoizedState=Kn(1|$,De,ee,fe))}function vi(B,$){ii(8390656,8,B,$)}function Gr(B,$){Pr(2048,8,B,$)}function Qn(B){Ir.flags|=4;var $=Ir.updateQueue;if($===null)$=Vn(),Ir.updateQueue=$,$.events=[B];else{var ee=$.events;ee===null?$.events=[B]:ee.push(B)}}function Wn(B){var $=fn().memoizedState;return Qn({ref:$,nextImpl:B}),function(){if((jr&2)!==0)throw Error(y(440));return $.impl.apply(void 0,arguments)}}function gr(B,$){return Pr(4,2,B,$)}function fr(B,$){return Pr(4,4,B,$)}function br(B,$){if(typeof $=="function"){B=B();var ee=$(B);return function(){typeof ee=="function"?ee():$(null)}}if($!=null)return B=B(),$.current=B,function(){$.current=null}}function yr(B,$,ee){ee=ee!=null?ee.concat([B]):null,Pr(4,4,br.bind(null,$,B),ee)}function da(){}function Ja(B,$){var ee=fn();$=$===void 0?null:$;var fe=ee.memoizedState;return $!==null&&kn($,fe[1])?fe[0]:(ee.memoizedState=[B,$],B)}function cs(B,$){var ee=fn();$=$===void 0?null:$;var fe=ee.memoizedState;if($!==null&&kn($,fe[1]))return fe[0];if(fe=B(),ei){we(!0);try{B()}finally{we(!1)}}return ee.memoizedState=[fe,$],fe}function Di(B,$,ee){return ee===void 0||(Eo&1073741824)!==0&&(Xr&261930)===0?B.memoizedState=$:(B.memoizedState=ee,B=uo(),Ir.lanes|=B,Ao|=B,ee)}function Ns(B,$,ee,fe){return Yi(ee,$)?ee:_l.current!==null?(B=Di(B,ee,fe),Yi(B,$)||(Mi=!0),B):(Eo&42)===0||(Eo&1073741824)!==0&&(Xr&261930)===0?(Mi=!0,B.memoizedState=ee):(B=uo(),Ir.lanes|=B,Ao|=B,$)}function Os(B,$,ee,fe,Ae){var De=gs();qr(De!==0&&8>De?De:8);var tt=sr.T,kt={};sr.T=kt,Tl(B,!1,$,ee);try{var nn=Ae(),Sn=sr.S;if(Sn!==null&&Sn(kt,nn),nn!==null&&typeof nn=="object"&&typeof nn.then=="function"){var Dn=Tt(nn,fe);Ds(B,$,Dn,ki(B))}else Ds(B,$,fe,ki(B))}catch(Cn){Ds(B,$,{then:function(){},status:"rejected",reason:Cn},ki())}finally{qr(De),tt!==null&&kt.types!==null&&(tt.types=kt.types),sr.T=tt}}function ro(B){var $=B.memoizedState;if($!==null)return $;$={memoizedState:dl,baseState:dl,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:dr,lastRenderedState:dl},next:null};var ee={};return $.next={memoizedState:ee,baseState:ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:dr,lastRenderedState:ee},next:null},B.memoizedState=$,B=B.alternate,B!==null&&(B.memoizedState=$),$}function ao(){return qe(hl)}function so(){return fn().memoizedState}function Qi(){return fn().memoizedState}function Aa(B){for(var $=B.return;$!==null;){switch($.tag){case 24:case 3:var ee=ki();B=xt(ee);var fe=$t($,B,ee);fe!==null&&(Pi(fe,$,ee),en(fe,$,ee)),$={cache:We()},B.payload=$;return}$=$.return}}function ea(B,$,ee){var fe=ki();ee={lane:fe,revertLane:0,gesture:null,action:ee,hasEagerState:!1,eagerState:null,next:null},Cl(B)?Xc($,ee):(ee=ir(B,$,ee,fe),ee!==null&&(Pi(ee,B,fe),hc(ee,$,fe)))}function Ua(B,$,ee){var fe=ki();Ds(B,$,ee,fe)}function Ds(B,$,ee,fe){var Ae={lane:fe,revertLane:0,gesture:null,action:ee,hasEagerState:!1,eagerState:null,next:null};if(Cl(B))Xc($,Ae);else{var De=B.alternate;if(B.lanes===0&&(De===null||De.lanes===0)&&(De=$.lastRenderedReducer,De!==null))try{var tt=$.lastRenderedState,kt=De(tt,ee);if(Ae.hasEagerState=!0,Ae.eagerState=kt,Yi(kt,tt))return mr(B,$,Ae,0),Ur===null&&wr(),!1}catch{}if(ee=ir(B,$,Ae,fe),ee!==null)return Pi(ee,B,fe),hc(ee,$,fe),!0}return!1}function Tl(B,$,ee,fe){if(fe={lane:2,revertLane:At(),gesture:null,action:fe,hasEagerState:!1,eagerState:null,next:null},Cl(B)){if($)throw Error(y(479))}else $=ir(B,ee,fe,2),$!==null&&Pi($,B,2)}function Cl(B){var $=B.alternate;return B===Ir||$!==null&&$===Ir}function Xc(B,$){Dr=Br=!0;var ee=B.pending;ee===null?$.next=$:($.next=ee.next,ee.next=$),B.pending=$}function hc(B,$,ee){if((ee&4194048)!==0){var fe=$.lanes;fe&=B.pendingLanes,ee|=fe,$.lanes=ee,se(B,ee)}}function fc(B,$,ee,fe){$=B.memoizedState,ee=ee(fe,$),ee=ee==null?$:hu({},$,ee),B.memoizedState=ee,B.lanes===0&&(B.updateQueue.baseState=ee)}function Rl(B,$,ee,fe,Ae,De,tt){return B=B.stateNode,typeof B.shouldComponentUpdate=="function"?B.shouldComponentUpdate(fe,De,tt):$.prototype&&$.prototype.isPureReactComponent?!Ot(ee,fe)||!Ot(Ae,De):!0}function Ml(B,$,ee,fe){B=$.state,typeof $.componentWillReceiveProps=="function"&&$.componentWillReceiveProps(ee,fe),typeof $.UNSAFE_componentWillReceiveProps=="function"&&$.UNSAFE_componentWillReceiveProps(ee,fe),$.state!==B&&Gc.enqueueReplaceState($,$.state,null)}function oo(B,$){var ee=$;if("ref"in $){ee={};for(var fe in $)fe!=="ref"&&(ee[fe]=$[fe])}if(B=B.defaultProps){ee===$&&(ee=hu({},ee));for(var Ae in B)ee[Ae]===void 0&&(ee[Ae]=B[Ae])}return ee}function kl(B,$){try{var ee=B.onUncaughtError;ee($.value,{componentStack:$.stack})}catch(fe){setTimeout(function(){throw fe})}}function pc(B,$,ee){try{var fe=B.onCaughtError;fe(ee.value,{componentStack:ee.stack,errorBoundary:$.tag===1?$.stateNode:null})}catch(Ae){setTimeout(function(){throw Ae})}}function Co(B,$,ee){return ee=xt(ee),ee.tag=3,ee.payload={element:null},ee.callback=function(){kl(B,$)},ee}function Yc(B){return B=xt(B),B.tag=3,B}function Zc(B,$,ee,fe){var Ae=ee.type.getDerivedStateFromError;if(typeof Ae=="function"){var De=fe.value;B.payload=function(){return Ae(De)},B.callback=function(){pc($,ee,fe)}}var tt=ee.stateNode;tt!==null&&typeof tt.componentDidCatch=="function"&&(B.callback=function(){pc($,ee,fe),typeof Ae!="function"&&(wo===null?wo=new Set([this]):wo.add(this));var kt=fe.stack;this.componentDidCatch(fe.value,{componentStack:kt!==null?kt:""})})}function Hu(B,$,ee,fe,Ae){if(ee.flags|=32768,fe!==null&&typeof fe=="object"&&typeof fe.then=="function"){if($=ee.alternate,$!==null&&yt($,ee,Ae,!0),ee=Ya.current,ee!==null){switch(ee.tag){case 31:case 13:return Za===null?Ul():ee.alternate===null&&$i===0&&($i=3),ee.flags&=-257,ee.flags|=65536,ee.lanes=Ae,fe===Zs?ee.flags|=16384:($=ee.updateQueue,$===null?ee.updateQueue=new Set([fe]):$.add(fe),Gl(B,fe,Ae)),!1;case 22:return ee.flags|=65536,fe===Zs?ee.flags|=16384:($=ee.updateQueue,$===null?($={transitions:null,markerInstances:null,retryQueue:new Set([fe])},ee.updateQueue=$):(ee=$.retryQueue,ee===null?$.retryQueue=new Set([fe]):ee.add(fe)),Gl(B,fe,Ae)),!1}throw Error(y(435,ee.tag))}return Gl(B,fe,Ae),Ul(),!1}if(Wr)return $=Ya.current,$!==null?(($.flags&65536)===0&&($.flags|=256),$.flags|=65536,$.lanes=Ae,fe!==Lu&&(B=Error(y(422),{cause:fe}),Ye(Se(B,ee)))):(fe!==Lu&&($=Error(y(423),{cause:fe}),Ye(Se($,ee))),B=B.current.alternate,B.flags|=65536,Ae&=-Ae,B.lanes|=Ae,fe=Se(fe,ee),Ae=Co(B.stateNode,fe,Ae),Qt(B,Ae),$i!==4&&($i=2)),!1;var De=Error(y(520),{cause:fe});if(De=Se(De,ee),Vc===null?Vc=[De]:Vc.push(De),$i!==4&&($i=2),$===null)return!0;fe=Se(fe,ee),ee=$;do{switch(ee.tag){case 3:return ee.flags|=65536,B=Ae&-Ae,ee.lanes|=B,B=Co(ee.stateNode,fe,B),Qt(ee,B),!1;case 1:if($=ee.type,De=ee.stateNode,(ee.flags&128)===0&&(typeof $.getDerivedStateFromError=="function"||De!==null&&typeof De.componentDidCatch=="function"&&(wo===null||!wo.has(De))))return ee.flags|=65536,Ae&=-Ae,ee.lanes|=Ae,Ae=Yc(Ae),Zc(Ae,B,ee,fe),Qt(ee,Ae),!1}ee=ee.return}while(ee!==null);return!1}function ta(B,$,ee,fe){$.child=B===null?jd($,null,ee,fe):xa($,B.child,ee,fe)}function mc(B,$,ee,fe,Ae){ee=ee.render;var De=$.ref;if("ref"in fe){var tt={};for(var kt in fe)kt!=="ref"&&(tt[kt]=fe[kt])}else tt=fe;return Et($),fe=An(B,$,ee,tt,De,Ae),kt=nr(),B!==null&&!Mi?(Nr(B,$,Ae),bi(B,$,Ae)):(Wr&&kt&&be($),$.flags|=1,ta(B,$,fe,Ae),$.child)}function pe(B,$,ee,fe,Ae){if(B===null){var De=ee.type;return typeof De=="function"&&!nl(De)&&De.defaultProps===void 0&&ee.compare===null?($.tag=15,$.type=De,Oe(B,$,De,fe,Ae)):(B=po(ee.type,null,fe,$,$.mode,Ae),B.ref=$.ref,B.return=$,$.child=B)}if(De=B.child,!$a(B,Ae)){var tt=De.memoizedProps;if(ee=ee.compare,ee=ee!==null?ee:Ot,ee(tt,fe)&&B.ref===$.ref)return bi(B,$,Ae)}return $.flags|=1,B=ts(De,fe),B.ref=$.ref,B.return=$,$.child=B}function Oe(B,$,ee,fe,Ae){if(B!==null){var De=B.memoizedProps;if(Ot(De,fe)&&B.ref===$.ref)if(Mi=!1,$.pendingProps=fe=De,$a(B,Ae))(B.flags&131072)!==0&&(Mi=!0);else return $.lanes=B.lanes,bi(B,$,Ae)}return En(B,$,ee,fe,Ae)}function Ue(B,$,ee,fe){var Ae=fe.children,De=B!==null?B.memoizedState:null;if(B===null&&$.stateNode===null&&($.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),fe.mode==="hidden"){if(($.flags&128)!==0){if(De=De!==null?De.baseLanes|ee:ee,B!==null){for(fe=$.child=B.child,Ae=0;fe!==null;)Ae=Ae|fe.lanes|fe.childLanes,fe=fe.sibling;fe=Ae&~De}else fe=0,$.child=null;return ft(B,$,De,ee,fe)}if((ee&536870912)!==0)$.memoizedState={baseLanes:0,cachePool:null},B!==null&&_n($,De!==null?De.cachePool:null),De!==null?wn($,De):qt(),Nt($);else return fe=$.lanes=536870912,ft(B,$,De!==null?De.baseLanes|ee:ee,ee,fe)}else De!==null?(_n($,De.cachePool),wn($,De),Mt(),$.memoizedState=null):(B!==null&&_n($,null),qt(),Mt());return ta(B,$,Ae,ee),$.child}function Ze(B,$){return B!==null&&B.tag===22||$.stateNode!==null||($.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),$.sibling}function ft(B,$,ee,fe,Ae){var De=Kt();return De=De===null?null:{parent:Wi?Oi._currentValue:Oi._currentValue2,pool:De},$.memoizedState={baseLanes:ee,cachePool:De},B!==null&&_n($,null),qt(),Nt($),B!==null&&yt(B,$,fe,!0),$.childLanes=Ae,null}function bt(B,$){return $=Qr({mode:$.mode,children:$.children},B.mode),$.ref=B.ref,B.child=$,$.return=B,$}function gt(B,$,ee){return xa($,B.child,null,ee),B=bt($,$.pendingProps),B.flags|=2,on($),$.memoizedState=null,B}function Dt(B,$,ee){var fe=$.pendingProps,Ae=($.flags&128)!==0;if($.flags&=-129,B===null){if(Wr){if(fe.mode==="hidden")return B=bt($,fe),$.lanes=536870912,Ze(null,B);if(It($),(B=Ni)?(B=Cd(B,Da),B!==null&&($.memoizedState={dehydrated:B,treeContext:bs!==null?{id:ba,overflow:Rs}:null,retryLane:536870912,hydrationErrors:null},ee=ed(B),ee.return=$,$.child=ee,la=$,Ni=null)):B=null,B===null)throw Pe($);return $.lanes=536870912,null}return bt($,fe)}var De=B.memoizedState;if(De!==null){var tt=De.dehydrated;if(It($),Ae)if($.flags&256)$.flags&=-257,$=gt(B,$,ee);else if($.memoizedState!==null)$.child=B.child,$.flags|=128,$=null;else throw Error(y(558));else if(Mi||yt(B,$,ee,!1),Ae=(ee&B.childLanes)!==0,Mi||Ae){if(fe=Ur,fe!==null&&(tt=ne(fe,ee),tt!==0&&tt!==De.retryLane))throw De.retryLane=tt,zn(B,tt),Pi(fe,B,tt),Pa;Ul(),$=gt(B,$,ee)}else B=De.treeContext,Ii&&(Ni=Lh(tt),la=$,Wr=!0,Ys=null,Da=!1,B!==null&&ue($,B)),$=bt($,fe),$.flags|=4096;return $}return B=ts(B.child,{mode:fe.mode,children:fe.children}),B.ref=$.ref,$.child=B,B.return=$,B}function Zt(B,$){var ee=$.ref;if(ee===null)B!==null&&B.ref!==null&&($.flags|=4194816);else{if(typeof ee!="function"&&typeof ee!="object")throw Error(y(284));(B===null||B.ref!==ee)&&($.flags|=4194816)}}function En(B,$,ee,fe,Ae){return Et($),ee=An(B,$,ee,fe,void 0,Ae),fe=nr(),B!==null&&!Mi?(Nr(B,$,Ae),bi(B,$,Ae)):(Wr&&fe&&be($),$.flags|=1,ta(B,$,ee,Ae),$.child)}function Ln(B,$,ee,fe,Ae,De){return Et($),$.updateQueue=null,ee=Tn($,fe,ee,Ae),Gn(B),fe=nr(),B!==null&&!Mi?(Nr(B,$,De),bi(B,$,De)):(Wr&&fe&&be($),$.flags|=1,ta(B,$,ee,De),$.child)}function er(B,$,ee,fe,Ae){if(Et($),$.stateNode===null){var De=qs,tt=ee.contextType;typeof tt=="object"&&tt!==null&&(De=qe(tt)),De=new ee(fe,De),$.memoizedState=De.state!==null&&De.state!==void 0?De.state:null,De.updater=Gc,$.stateNode=De,De._reactInternals=$,De=$.stateNode,De.props=fe,De.state=$.memoizedState,De.refs={},Xe($),tt=ee.contextType,De.context=typeof tt=="object"&&tt!==null?qe(tt):qs,De.state=$.memoizedState,tt=ee.getDerivedStateFromProps,typeof tt=="function"&&(fc($,ee,tt,fe),De.state=$.memoizedState),typeof ee.getDerivedStateFromProps=="function"||typeof De.getSnapshotBeforeUpdate=="function"||typeof De.UNSAFE_componentWillMount!="function"&&typeof De.componentWillMount!="function"||(tt=De.state,typeof De.componentWillMount=="function"&&De.componentWillMount(),typeof De.UNSAFE_componentWillMount=="function"&&De.UNSAFE_componentWillMount(),tt!==De.state&&Gc.enqueueReplaceState(De,De.state,null),mn($,fe,De,Ae),pn(),De.state=$.memoizedState),typeof De.componentDidMount=="function"&&($.flags|=4194308),fe=!0}else if(B===null){De=$.stateNode;var kt=$.memoizedProps,nn=oo(ee,kt);De.props=nn;var Sn=De.context,Dn=ee.contextType;tt=qs,typeof Dn=="object"&&Dn!==null&&(tt=qe(Dn));var Cn=ee.getDerivedStateFromProps;Dn=typeof Cn=="function"||typeof De.getSnapshotBeforeUpdate=="function",kt=$.pendingProps!==kt,Dn||typeof De.UNSAFE_componentWillReceiveProps!="function"&&typeof De.componentWillReceiveProps!="function"||(kt||Sn!==tt)&&Ml($,De,fe,tt),as=!1;var jn=$.memoizedState;De.state=jn,mn($,fe,De,Ae),pn(),Sn=$.memoizedState,kt||jn!==Sn||as?(typeof Cn=="function"&&(fc($,ee,Cn,fe),Sn=$.memoizedState),(nn=as||Rl($,ee,nn,fe,jn,Sn,tt))?(Dn||typeof De.UNSAFE_componentWillMount!="function"&&typeof De.componentWillMount!="function"||(typeof De.componentWillMount=="function"&&De.componentWillMount(),typeof De.UNSAFE_componentWillMount=="function"&&De.UNSAFE_componentWillMount()),typeof De.componentDidMount=="function"&&($.flags|=4194308)):(typeof De.componentDidMount=="function"&&($.flags|=4194308),$.memoizedProps=fe,$.memoizedState=Sn),De.props=fe,De.state=Sn,De.context=tt,fe=nn):(typeof De.componentDidMount=="function"&&($.flags|=4194308),fe=!1)}else{De=$.stateNode,it(B,$),tt=$.memoizedProps,Dn=oo(ee,tt),De.props=Dn,Cn=$.pendingProps,jn=De.context,Sn=ee.contextType,nn=qs,typeof Sn=="object"&&Sn!==null&&(nn=qe(Sn)),kt=ee.getDerivedStateFromProps,(Sn=typeof kt=="function"||typeof De.getSnapshotBeforeUpdate=="function")||typeof De.UNSAFE_componentWillReceiveProps!="function"&&typeof De.componentWillReceiveProps!="function"||(tt!==Cn||jn!==nn)&&Ml($,De,fe,nn),as=!1,jn=$.memoizedState,De.state=jn,mn($,fe,De,Ae),pn();var Rr=$.memoizedState;tt!==Cn||jn!==Rr||as||B!==null&&B.dependencies!==null&&ut(B.dependencies)?(typeof kt=="function"&&(fc($,ee,kt,fe),Rr=$.memoizedState),(Dn=as||Rl($,ee,Dn,fe,jn,Rr,nn)||B!==null&&B.dependencies!==null&&ut(B.dependencies))?(Sn||typeof De.UNSAFE_componentWillUpdate!="function"&&typeof De.componentWillUpdate!="function"||(typeof De.componentWillUpdate=="function"&&De.componentWillUpdate(fe,Rr,nn),typeof De.UNSAFE_componentWillUpdate=="function"&&De.UNSAFE_componentWillUpdate(fe,Rr,nn)),typeof De.componentDidUpdate=="function"&&($.flags|=4),typeof De.getSnapshotBeforeUpdate=="function"&&($.flags|=1024)):(typeof De.componentDidUpdate!="function"||tt===B.memoizedProps&&jn===B.memoizedState||($.flags|=4),typeof De.getSnapshotBeforeUpdate!="function"||tt===B.memoizedProps&&jn===B.memoizedState||($.flags|=1024),$.memoizedProps=fe,$.memoizedState=Rr),De.props=fe,De.state=Rr,De.context=nn,fe=Dn):(typeof De.componentDidUpdate!="function"||tt===B.memoizedProps&&jn===B.memoizedState||($.flags|=4),typeof De.getSnapshotBeforeUpdate!="function"||tt===B.memoizedProps&&jn===B.memoizedState||($.flags|=1024),fe=!1)}return De=fe,Zt(B,$),fe=($.flags&128)!==0,De||fe?(De=$.stateNode,ee=fe&&typeof ee.getDerivedStateFromError!="function"?null:De.render(),$.flags|=1,B!==null&&fe?($.child=xa($,B.child,null,Ae),$.child=xa($,null,ee,Ae)):ta(B,$,ee,Ae),$.memoizedState=De.state,B=$.child):B=bi(B,$,Ae),B}function Yn(B,$,ee,fe){return je(),$.flags|=256,ta(B,$,ee,fe),$.child}function $n(B){return{baseLanes:B,cachePool:Ht()}}function cr(B,$,ee){return B=B!==null?B.childLanes&~ee:0,$&&(B|=Fa),B}function Cr(B,$,ee){var fe=$.pendingProps,Ae=!1,De=($.flags&128)!==0,tt;if((tt=De)||(tt=B!==null&&B.memoizedState===null?!1:(ji.current&2)!==0),tt&&(Ae=!0,$.flags&=-129),tt=($.flags&32)!==0,$.flags&=-33,B===null){if(Wr){if(Ae?_t($):Mt(),(B=Ni)?(B=Uh(B,Da),B!==null&&($.memoizedState={dehydrated:B,treeContext:bs!==null?{id:ba,overflow:Rs}:null,retryLane:536870912,hydrationErrors:null},ee=ed(B),ee.return=$,$.child=ee,la=$,Ni=null)):B=null,B===null)throw Pe($);return _u(B)?$.lanes=32:$.lanes=536870912,null}var kt=fe.children;return fe=fe.fallback,Ae?(Mt(),Ae=$.mode,kt=Qr({mode:"hidden",children:kt},Ae),fe=ps(fe,Ae,ee,null),kt.return=$,fe.return=$,kt.sibling=fe,$.child=kt,fe=$.child,fe.memoizedState=$n(ee),fe.childLanes=cr(B,tt,ee),$.memoizedState=Sl,Ze(null,fe)):(_t($),ui($,kt))}var nn=B.memoizedState;if(nn!==null&&(kt=nn.dehydrated,kt!==null)){if(De)$.flags&256?(_t($),$.flags&=-257,$=Ri(B,$,ee)):$.memoizedState!==null?(Mt(),$.child=B.child,$.flags|=128,$=null):(Mt(),kt=fe.fallback,Ae=$.mode,fe=Qr({mode:"visible",children:fe.children},Ae),kt=ps(kt,Ae,ee,null),kt.flags|=2,fe.return=$,kt.return=$,fe.sibling=kt,$.child=fe,xa($,B.child,null,ee),fe=$.child,fe.memoizedState=$n(ee),fe.childLanes=cr(B,tt,ee),$.memoizedState=Sl,$=Ze(null,fe));else if(_t($),_u(kt))tt=Su(kt).digest,fe=Error(y(419)),fe.stack="",fe.digest=tt,Ye({value:fe,source:null,stack:null}),$=Ri(B,$,ee);else if(Mi||yt(B,$,ee,!1),tt=(ee&B.childLanes)!==0,Mi||tt){if(tt=Ur,tt!==null&&(fe=ne(tt,ee),fe!==0&&fe!==nn.retryLane))throw nn.retryLane=fe,zn(B,fe),Pi(tt,B,fe),Pa;zo(kt)||Ul(),$=Ri(B,$,ee)}else zo(kt)?($.flags|=192,$.child=B.child,$=null):(B=nn.treeContext,Ii&&(Ni=Ph(kt),la=$,Wr=!0,Ys=null,Da=!1,B!==null&&ue($,B)),$=ui($,fe.children),$.flags|=4096);return $}return Ae?(Mt(),kt=fe.fallback,Ae=$.mode,nn=B.child,De=nn.sibling,fe=ts(nn,{mode:"hidden",children:fe.children}),fe.subtreeFlags=nn.subtreeFlags&65011712,De!==null?kt=ts(De,kt):(kt=ps(kt,Ae,ee,null),kt.flags|=2),kt.return=$,fe.return=$,fe.sibling=kt,$.child=fe,Ze(null,fe),fe=$.child,kt=B.child.memoizedState,kt===null?kt=$n(ee):(Ae=kt.cachePool,Ae!==null?(nn=Wi?Oi._currentValue:Oi._currentValue2,Ae=Ae.parent!==nn?{parent:nn,pool:nn}:Ae):Ae=Ht(),kt={baseLanes:kt.baseLanes|ee,cachePool:Ae}),fe.memoizedState=kt,fe.childLanes=cr(B,tt,ee),$.memoizedState=Sl,Ze(B.child,fe)):(_t($),ee=B.child,B=ee.sibling,ee=ts(ee,{mode:"visible",children:fe.children}),ee.return=$,ee.sibling=null,B!==null&&(tt=$.deletions,tt===null?($.deletions=[B],$.flags|=16):tt.push(B)),$.child=ee,$.memoizedState=null,ee)}function ui(B,$){return $=Qr({mode:"visible",children:$},B.mode),$.return=B,B.child=$}function Qr(B,$){return B=u(22,B,null,$),B.lanes=0,B}function Ri(B,$,ee){return xa($,B.child,null,ee),B=ui($,$.pendingProps.children),B.flags|=2,$.memoizedState=null,B}function Ma(B,$,ee){B.lanes|=$;var fe=B.alternate;fe!==null&&(fe.lanes|=$),ze(B.return,$,ee)}function qi(B,$,ee,fe,Ae,De){var tt=B.memoizedState;tt===null?B.memoizedState={isBackwards:$,rendering:null,renderingStartTime:0,last:fe,tail:ee,tailMode:Ae,treeForkCount:De}:(tt.isBackwards=$,tt.rendering=null,tt.renderingStartTime=0,tt.last=fe,tt.tail=ee,tt.tailMode=Ae,tt.treeForkCount=De)}function Zr(B,$,ee){var fe=$.pendingProps,Ae=fe.revealOrder,De=fe.tail;fe=fe.children;var tt=ji.current,kt=(tt&2)!==0;if(kt?(tt=tt&1|2,$.flags|=128):tt&=1,F(ji,tt),ta(B,$,fe,ee),fe=Wr?Uc:0,!kt&&B!==null&&(B.flags&128)!==0)e:for(B=$.child;B!==null;){if(B.tag===13)B.memoizedState!==null&&Ma(B,ee,$);else if(B.tag===19)Ma(B,ee,$);else if(B.child!==null){B.child.return=B,B=B.child;continue}if(B===$)break e;for(;B.sibling===null;){if(B.return===null||B.return===$)break e;B=B.return}B.sibling.return=B.return,B=B.sibling}switch(Ae){case"forwards":for(ee=$.child,Ae=null;ee!==null;)B=ee.alternate,B!==null&&dn(B)===null&&(Ae=ee),ee=ee.sibling;ee=Ae,ee===null?(Ae=$.child,$.child=null):(Ae=ee.sibling,ee.sibling=null),qi($,!1,Ae,ee,De,fe);break;case"backwards":case"unstable_legacy-backwards":for(ee=null,Ae=$.child,$.child=null;Ae!==null;){if(B=Ae.alternate,B!==null&&dn(B)===null){$.child=Ae;break}B=Ae.sibling,Ae.sibling=ee,ee=Ae,Ae=B}qi($,!0,ee,null,De,fe);break;case"together":qi($,!1,null,null,void 0,fe);break;default:$.memoizedState=null}return $.child}function bi(B,$,ee){if(B!==null&&($.dependencies=B.dependencies),Ao|=$.lanes,(ee&$.childLanes)===0)if(B!==null){if(yt(B,$,ee,!1),(ee&$.childLanes)===0)return null}else return null;if(B!==null&&$.child!==B.child)throw Error(y(153));if($.child!==null){for(B=$.child,ee=ts(B,B.pendingProps),$.child=ee,ee.return=$;B.sibling!==null;)B=B.sibling,ee=ee.sibling=ts(B,B.pendingProps),ee.return=$;ee.sibling=null}return $.child}function $a(B,$){return(B.lanes&$)!==0?!0:(B=B.dependencies,!!(B!==null&&ut(B)))}function gc(B,$,ee){switch($.tag){case 3:ye($,$.stateNode.containerInfo),Je($,Oi,B.memoizedState.cache),je();break;case 27:case 5:_e($);break;case 4:ye($,$.stateNode.containerInfo);break;case 10:Je($,$.type,$.memoizedProps.value);break;case 31:if($.memoizedState!==null)return $.flags|=128,It($),null;break;case 13:var fe=$.memoizedState;if(fe!==null)return fe.dehydrated!==null?(_t($),$.flags|=128,null):(ee&$.child.childLanes)!==0?Cr(B,$,ee):(_t($),B=bi(B,$,ee),B!==null?B.sibling:null);_t($);break;case 19:var Ae=(B.flags&128)!==0;if(fe=(ee&$.childLanes)!==0,fe||(yt(B,$,ee,!1),fe=(ee&$.childLanes)!==0),Ae){if(fe)return Zr(B,$,ee);$.flags|=128}if(Ae=$.memoizedState,Ae!==null&&(Ae.rendering=null,Ae.tail=null,Ae.lastEffect=null),F(ji,ji.current),fe)break;return null;case 22:return $.lanes=0,Ue(B,$,ee,$.pendingProps);case 24:Je($,Oi,B.memoizedState.cache)}return bi(B,$,ee)}function yc(B,$,ee){if(B!==null)if(B.memoizedProps!==$.pendingProps)Mi=!0;else{if(!$a(B,ee)&&($.flags&128)===0)return Mi=!1,gc(B,$,ee);Mi=(B.flags&131072)!==0}else Mi=!1,Wr&&($.flags&1048576)!==0&&ae($,Uc,$.index);switch($.lanes=0,$.tag){case 16:e:{var fe=$.pendingProps;if(B=In($.elementType),$.type=B,typeof B=="function")nl(B)?(fe=oo(B,fe),$.tag=1,$=er(null,$,B,fe,ee)):($.tag=0,$=En(null,$,B,fe,ee));else{if(B!=null){var Ae=B.$$typeof;if(Ae===jl){$.tag=11,$=mc(null,$,B,fe,ee);break e}else if(Ae===pu){$.tag=14,$=pe(null,$,B,fe,ee);break e}}throw $=I(B)||B,Error(y(306,$,""))}}return $;case 0:return En(B,$,$.type,$.pendingProps,ee);case 1:return fe=$.type,Ae=oo(fe,$.pendingProps),er(B,$,fe,Ae,ee);case 3:e:{if(ye($,$.stateNode.containerInfo),B===null)throw Error(y(387));var De=$.pendingProps;Ae=$.memoizedState,fe=Ae.element,it(B,$),mn($,De,null,ee);var tt=$.memoizedState;if(De=tt.cache,Je($,Oi,De),De!==Ae.cache&&pt($,[Oi],ee,!0),pn(),De=tt.element,Ii&&Ae.isDehydrated)if(Ae={element:De,isDehydrated:!1,cache:tt.cache},$.updateQueue.baseState=Ae,$.memoizedState=Ae,$.flags&256){$=Yn(B,$,De,ee);break e}else if(De!==fe){fe=Se(Error(y(424)),$),Ye(fe),$=Yn(B,$,De,ee);break e}else for(Ii&&(Ni=Dh($.stateNode.containerInfo),la=$,Wr=!0,Ys=null,Da=!0),ee=jd($,null,De,ee),$.child=ee;ee;)ee.flags=ee.flags&-3|4096,ee=ee.sibling;else{if(je(),De===fe){$=bi(B,$,ee);break e}ta(B,$,De,ee)}$=$.child}return $;case 26:if(ys)return Zt(B,$),B===null?(ee=Nd($.type,null,$.pendingProps,null))?$.memoizedState=ee:Wr||($.stateNode=wu($.type,$.pendingProps,Sa.current,$)):$.memoizedState=Nd($.type,B.memoizedProps,$.pendingProps,B.memoizedState),null;case 27:if(oa)return _e($),B===null&&oa&&Wr&&(fe=$.stateNode=Tu($.type,$.pendingProps,Sa.current,ma.current,!1),la=$,Da=!0,Ni=Td($.type,fe,Ni)),ta(B,$,$.pendingProps.children,ee),Zt(B,$),B===null&&($.flags|=4194304),$.child;case 5:return B===null&&Wr&&(Xh($.type,$.pendingProps,ma.current),(Ae=fe=Ni)&&(fe=Fh(fe,$.type,$.pendingProps,Da),fe!==null?($.stateNode=fe,la=$,Ni=Oh(fe),Da=!1,Ae=!0):Ae=!1),Ae||Pe($)),_e($),Ae=$.type,De=$.pendingProps,tt=B!==null?B.memoizedProps:null,fe=De.children,Oa(Ae,De)?fe=null:tt!==null&&Oa(Ae,tt)&&($.flags|=32),$.memoizedState!==null&&(Ae=An(B,$,Bn,null,null,ee),Wi?hl._currentValue=Ae:hl._currentValue2=Ae),Zt(B,$),ta(B,$,fe,ee),$.child;case 6:return B===null&&Wr&&(Id($.pendingProps,ma.current),(B=ee=Ni)&&(ee=Bh(ee,$.pendingProps,Da),ee!==null?($.stateNode=ee,la=$,Ni=null,B=!0):B=!1),B||Pe($)),null;case 13:return Cr(B,$,ee);case 4:return ye($,$.stateNode.containerInfo),fe=$.pendingProps,B===null?$.child=xa($,null,fe,ee):ta(B,$,fe,ee),$.child;case 11:return mc(B,$,$.type,$.pendingProps,ee);case 7:return ta(B,$,$.pendingProps,ee),$.child;case 8:return ta(B,$,$.pendingProps.children,ee),$.child;case 12:return ta(B,$,$.pendingProps.children,ee),$.child;case 10:return fe=$.pendingProps,Je($,$.type,fe.value),ta(B,$,fe.children,ee),$.child;case 9:return Ae=$.type._context,fe=$.pendingProps.children,Et($),Ae=qe(Ae),fe=fe(Ae),$.flags|=1,ta(B,$,fe,ee),$.child;case 14:return pe(B,$,$.type,$.pendingProps,ee);case 15:return Oe(B,$,$.type,$.pendingProps,ee);case 19:return Zr(B,$,ee);case 31:return Dt(B,$,ee);case 22:return Ue(B,$,ee,$.pendingProps);case 24:return Et($),fe=qe(Oi),B===null?(Ae=Kt(),Ae===null&&(Ae=Ur,De=We(),Ae.pooledCache=De,De.refCount++,De!==null&&(Ae.pooledCacheLanes|=ee),Ae=De),$.memoizedState={parent:fe,cache:Ae},Xe($),Je($,Oi,Ae)):((B.lanes&ee)!==0&&(it(B,$),mn($,null,null,ee),pn()),Ae=B.memoizedState,De=$.memoizedState,Ae.parent!==fe?(Ae={parent:fe,cache:fe},$.memoizedState=Ae,$.lanes===0&&($.memoizedState=$.updateQueue.baseState=Ae),Je($,Oi,fe)):(fe=De.cache,Je($,Oi,fe),fe!==Ae.cache&&pt($,[Oi],ee,!0))),ta(B,$,$.pendingProps.children,ee),$.child;case 29:throw $.pendingProps}throw Error(y(156,$.tag))}function za(B){B.flags|=4}function el(B){ns&&(B.flags|=8)}function Kc(B,$){if(B!==null&&B.child===$.child)return!1;if(($.flags&16)!==0)return!0;for(B=$.child;B!==null;){if((B.flags&8218)!==0||(B.subtreeFlags&8218)!==0)return!0;B=B.sibling}return!1}function Ro(B,$,ee,fe){if(Jr)for(ee=$.child;ee!==null;){if(ee.tag===5||ee.tag===6)Ic(B,ee.stateNode);else if(!(ee.tag===4||oa&&ee.tag===27)&&ee.child!==null){ee.child.return=ee,ee=ee.child;continue}if(ee===$)break;for(;ee.sibling===null;){if(ee.return===null||ee.return===$)return;ee=ee.return}ee.sibling.return=ee.return,ee=ee.sibling}else if(ns)for(var Ae=$.child;Ae!==null;){if(Ae.tag===5){var De=Ae.stateNode;ee&&fe&&(De=Mh(De,Ae.type,Ae.memoizedProps)),Ic(B,De)}else if(Ae.tag===6)De=Ae.stateNode,ee&&fe&&(De=Ad(De,Ae.memoizedProps)),Ic(B,De);else if(Ae.tag!==4){if(Ae.tag===22&&Ae.memoizedState!==null)De=Ae.child,De!==null&&(De.return=Ae),Ro(B,Ae,!0,!0);else if(Ae.child!==null){Ae.child.return=Ae,Ae=Ae.child;continue}}if(Ae===$)break;for(;Ae.sibling===null;){if(Ae.return===null||Ae.return===$)return;Ae=Ae.return}Ae.sibling.return=Ae.return,Ae=Ae.sibling}}function th(B,$,ee,fe){var Ae=!1;if(ns)for(var De=$.child;De!==null;){if(De.tag===5){var tt=De.stateNode;ee&&fe&&(tt=Mh(tt,De.type,De.memoizedProps)),xd(B,tt)}else if(De.tag===6)tt=De.stateNode,ee&&fe&&(tt=Ad(tt,De.memoizedProps)),xd(B,tt);else if(De.tag!==4){if(De.tag===22&&De.memoizedState!==null)Ae=De.child,Ae!==null&&(Ae.return=De),th(B,De,!0,!0),Ae=!0;else if(De.child!==null){De.child.return=De,De=De.child;continue}}if(De===$)break;for(;De.sibling===null;){if(De.return===null||De.return===$)return Ae;De=De.return}De.sibling.return=De.return,De=De.sibling}return Ae}function nh(B,$){if(ns&&Kc(B,$)){B=$.stateNode;var ee=B.containerInfo,fe=Sd();th(fe,$,!1,!1),B.pendingChildren=fe,za($),Rh(ee,fe)}}function qu(B,$,ee,fe){if(Jr)B.memoizedProps!==fe&&za($);else if(ns){var Ae=B.stateNode,De=B.memoizedProps;if((B=Kc(B,$))||De!==fe){var tt=ma.current;De=Ch(Ae,ee,De,fe,!B,null),De===Ae?$.stateNode=Ae:(el($),Ha(De,ee,fe,tt)&&za($),$.stateNode=De,B&&Ro(De,$,!1,!1))}else $.stateNode=Ae}}function ka(B,$,ee,fe,Ae){if((B.mode&32)!==0&&(ee===null?Nc($,fe):Xl($,ee,fe))){if(B.flags|=16777216,(Ae&335544128)===Ae||cd($,fe))if(Fi(B.stateNode,$,fe))B.flags|=8192;else if(Kr())B.flags|=8192;else throw La=Zs,Fu}else B.flags&=-16777217}function Il(B,$){if(Pd($)){if(B.flags|=16777216,!Fd($))if(Kr())B.flags|=8192;else throw La=Zs,Fu}else B.flags&=-16777217}function vc(B,$){$!==null&&(B.flags|=4),B.flags&16384&&($=B.tag!==22?K():536870912,B.lanes|=$,rc|=$)}function Nl(B,$){if(!Wr)switch(B.tailMode){case"hidden":$=B.tail;for(var ee=null;$!==null;)$.alternate!==null&&(ee=$),$=$.sibling;ee===null?B.tail=null:ee.sibling=null;break;case"collapsed":ee=B.tail;for(var fe=null;ee!==null;)ee.alternate!==null&&(fe=ee),ee=ee.sibling;fe===null?$||B.tail===null?B.tail=null:B.tail.sibling=null:fe.sibling=null}}function Ei(B){var $=B.alternate!==null&&B.alternate.child===B.child,ee=0,fe=0;if($)for(var Ae=B.child;Ae!==null;)ee|=Ae.lanes|Ae.childLanes,fe|=Ae.subtreeFlags&65011712,fe|=Ae.flags&65011712,Ae.return=B,Ae=Ae.sibling;else for(Ae=B.child;Ae!==null;)ee|=Ae.lanes|Ae.childLanes,fe|=Ae.subtreeFlags,fe|=Ae.flags,Ae.return=B,Ae=Ae.sibling;return B.subtreeFlags|=fe,B.childLanes=ee,$}function rh(B,$,ee){var fe=$.pendingProps;switch(he($),$.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ei($),null;case 1:return Ei($),null;case 3:return ee=$.stateNode,fe=null,B!==null&&(fe=B.memoizedState.cache),$.memoizedState.cache!==fe&&($.flags|=2048),ot(Oi),ce(),ee.pendingContext&&(ee.context=ee.pendingContext,ee.pendingContext=null),(B===null||B.child===null)&&(Ne($)?za($):B===null||B.memoizedState.isDehydrated&&($.flags&256)===0||($.flags|=1024,He())),nh(B,$),Ei($),null;case 26:if(ys){var Ae=$.type,De=$.memoizedState;return B===null?(za($),De!==null?(Ei($),Il($,De)):(Ei($),ka($,Ae,null,fe,ee))):De?De!==B.memoizedState?(za($),Ei($),Il($,De)):(Ei($),$.flags&=-16777217):(De=B.memoizedProps,Jr?De!==fe&&za($):qu(B,$,Ae,fe),Ei($),ka($,Ae,De,fe,ee)),null}case 27:if(oa){if(ke($),ee=Sa.current,Ae=$.type,B!==null&&$.stateNode!=null)Jr?B.memoizedProps!==fe&&za($):qu(B,$,Ae,fe);else{if(!fe){if($.stateNode===null)throw Error(y(166));return Ei($),null}B=ma.current,Ne($)?$e($,B):(B=Tu(Ae,fe,ee,B,!0),$.stateNode=B,za($))}return Ei($),null}case 5:if(ke($),Ae=$.type,B!==null&&$.stateNode!=null)qu(B,$,Ae,fe);else{if(!fe){if($.stateNode===null)throw Error(y(166));return Ei($),null}if(De=ma.current,Ne($))$e($,De),Hh($.stateNode,Ae,fe,De)&&($.flags|=64);else{var tt=od(Ae,fe,Sa.current,De,$);el($),Ro(tt,$,!1,!1),$.stateNode=tt,Ha(tt,Ae,fe,De)&&za($)}}return Ei($),ka($,$.type,B===null?null:B.memoizedProps,$.pendingProps,ee),null;case 6:if(B&&$.stateNode!=null)ee=B.memoizedProps,Jr?ee!==fe&&za($):ns&&(ee!==fe?(B=Sa.current,ee=ma.current,el($),$.stateNode=vo(fe,B,ee,$)):$.stateNode=B.stateNode);else{if(typeof fe!="string"&&$.stateNode===null)throw Error(y(166));if(B=Sa.current,ee=ma.current,Ne($)){if(!Ii)throw Error(y(176));if(B=$.stateNode,ee=$.memoizedProps,fe=null,Ae=la,Ae!==null)switch(Ae.tag){case 27:case 5:fe=Ae.memoizedProps}Af(B,ee,$,fe)||Pe($,!0)}else el($),$.stateNode=vo(fe,B,ee,$)}return Ei($),null;case 31:if(ee=$.memoizedState,B===null||B.memoizedState!==null){if(fe=Ne($),ee!==null){if(B===null){if(!fe)throw Error(y(318));if(!Ii)throw Error(y(556));if(B=$.memoizedState,B=B!==null?B.dehydrated:null,!B)throw Error(y(557));Rd(B,$)}else je(),($.flags&128)===0&&($.memoizedState=null),$.flags|=4;Ei($),B=!1}else ee=He(),B!==null&&B.memoizedState!==null&&(B.memoizedState.hydrationErrors=ee),B=!0;if(!B)return $.flags&256?(on($),$):(on($),null);if(($.flags&128)!==0)throw Error(y(558))}return Ei($),null;case 13:if(fe=$.memoizedState,B===null||B.memoizedState!==null&&B.memoizedState.dehydrated!==null){if(Ae=Ne($),fe!==null&&fe.dehydrated!==null){if(B===null){if(!Ae)throw Error(y(318));if(!Ii)throw Error(y(344));if(Ae=$.memoizedState,Ae=Ae!==null?Ae.dehydrated:null,!Ae)throw Error(y(317));zh(Ae,$)}else je(),($.flags&128)===0&&($.memoizedState=null),$.flags|=4;Ei($),Ae=!1}else Ae=He(),B!==null&&B.memoizedState!==null&&(B.memoizedState.hydrationErrors=Ae),Ae=!0;if(!Ae)return $.flags&256?(on($),$):(on($),null)}return on($),($.flags&128)!==0?($.lanes=ee,$):(ee=fe!==null,B=B!==null&&B.memoizedState!==null,ee&&(fe=$.child,Ae=null,fe.alternate!==null&&fe.alternate.memoizedState!==null&&fe.alternate.memoizedState.cachePool!==null&&(Ae=fe.alternate.memoizedState.cachePool.pool),De=null,fe.memoizedState!==null&&fe.memoizedState.cachePool!==null&&(De=fe.memoizedState.cachePool.pool),De!==Ae&&(fe.flags|=2048)),ee!==B&&ee&&($.child.flags|=8192),vc($,$.updateQueue),Ei($),null);case 4:return ce(),nh(B,$),B===null&&_i($.stateNode.containerInfo),Ei($),null;case 10:return ot($.type),Ei($),null;case 19:if(L(ji),fe=$.memoizedState,fe===null)return Ei($),null;if(Ae=($.flags&128)!==0,De=fe.rendering,De===null)if(Ae)Nl(fe,!1);else{if($i!==0||B!==null&&(B.flags&128)!==0)for(B=$.child;B!==null;){if(De=dn(B),De!==null){for($.flags|=128,Nl(fe,!1),B=De.updateQueue,$.updateQueue=B,vc($,B),$.subtreeFlags=0,B=ee,ee=$.child;ee!==null;)cu(ee,B),ee=ee.sibling;return F(ji,ji.current&1|2),Wr&&oe($,fe.treeForkCount),$.child}B=B.sibling}fe.tail!==null&&Ta()>Jo&&($.flags|=128,Ae=!0,Nl(fe,!1),$.lanes=4194304)}else{if(!Ae)if(B=dn(De),B!==null){if($.flags|=128,Ae=!0,B=B.updateQueue,$.updateQueue=B,vc($,B),Nl(fe,!0),fe.tail===null&&fe.tailMode==="hidden"&&!De.alternate&&!Wr)return Ei($),null}else 2*Ta()-fe.renderingStartTime>Jo&&ee!==536870912&&($.flags|=128,Ae=!0,Nl(fe,!1),$.lanes=4194304);fe.isBackwards?(De.sibling=$.child,$.child=De):(B=fe.last,B!==null?B.sibling=De:$.child=De,fe.last=De)}return fe.tail!==null?(B=fe.tail,fe.rendering=B,fe.tail=B.sibling,fe.renderingStartTime=Ta(),B.sibling=null,ee=ji.current,F(ji,Ae?ee&1|2:ee&1),Wr&&oe($,fe.treeForkCount),B):(Ei($),null);case 22:case 23:return on($),Ke(),fe=$.memoizedState!==null,B!==null?B.memoizedState!==null!==fe&&($.flags|=8192):fe&&($.flags|=8192),fe?(ee&536870912)!==0&&($.flags&128)===0&&(Ei($),$.subtreeFlags&6&&($.flags|=8192)):Ei($),ee=$.updateQueue,ee!==null&&vc($,ee.retryQueue),ee=null,B!==null&&B.memoizedState!==null&&B.memoizedState.cachePool!==null&&(ee=B.memoizedState.cachePool.pool),fe=null,$.memoizedState!==null&&$.memoizedState.cachePool!==null&&(fe=$.memoizedState.cachePool.pool),fe!==ee&&($.flags|=2048),B!==null&&L(Vo),null;case 24:return ee=null,B!==null&&(ee=B.memoizedState.cache),$.memoizedState.cache!==ee&&($.flags|=2048),ot(Oi),Ei($),null;case 25:return null;case 30:return null}throw Error(y(156,$.tag))}function Wu(B,$){switch(he($),$.tag){case 1:return B=$.flags,B&65536?($.flags=B&-65537|128,$):null;case 3:return ot(Oi),ce(),B=$.flags,(B&65536)!==0&&(B&128)===0?($.flags=B&-65537|128,$):null;case 26:case 27:case 5:return ke($),null;case 31:if($.memoizedState!==null){if(on($),$.alternate===null)throw Error(y(340));je()}return B=$.flags,B&65536?($.flags=B&-65537|128,$):null;case 13:if(on($),B=$.memoizedState,B!==null&&B.dehydrated!==null){if($.alternate===null)throw Error(y(340));je()}return B=$.flags,B&65536?($.flags=B&-65537|128,$):null;case 19:return L(ji),null;case 4:return ce(),null;case 10:return ot($.type),null;case 22:case 23:return on($),Ke(),B!==null&&L(Vo),B=$.flags,B&65536?($.flags=B&-65537|128,$):null;case 24:return ot(Oi),null;case 25:return null;default:return null}}function ih(B,$){switch(he($),$.tag){case 3:ot(Oi),ce();break;case 26:case 27:case 5:ke($);break;case 4:ce();break;case 31:$.memoizedState!==null&&on($);break;case 13:on($);break;case 19:L(ji);break;case 10:ot($.type);break;case 22:case 23:on($),Ke(),B!==null&&L(Vo);break;case 24:ot(Oi)}}function Ls(B,$){try{var ee=$.updateQueue,fe=ee!==null?ee.lastEffect:null;if(fe!==null){var Ae=fe.next;ee=Ae;do{if((ee.tag&B)===B){fe=void 0;var De=ee.create,tt=ee.inst;fe=De(),tt.destroy=fe}ee=ee.next}while(ee!==Ae)}}catch(kt){Sr($,$.return,kt)}}function Ps(B,$,ee){try{var fe=$.updateQueue,Ae=fe!==null?fe.lastEffect:null;if(Ae!==null){var De=Ae.next;fe=De;do{if((fe.tag&B)===B){var tt=fe.inst,kt=tt.destroy;if(kt!==void 0){tt.destroy=void 0,Ae=$;var nn=ee,Sn=kt;try{Sn()}catch(Dn){Sr(Ae,nn,Dn)}}}fe=fe.next}while(fe!==De)}}catch(Dn){Sr($,$.return,Dn)}}function Ol(B){var $=B.updateQueue;if($!==null){var ee=B.stateNode;try{vn($,ee)}catch(fe){Sr(B,B.return,fe)}}}function Jc(B,$,ee){ee.props=oo(B.type,B.memoizedProps),ee.state=B.memoizedState;try{ee.componentWillUnmount()}catch(fe){Sr(B,$,fe)}}function Dl(B,$){try{var ee=B.ref;if(ee!==null){switch(B.tag){case 26:case 27:case 5:var fe=Hl(B.stateNode);break;case 30:fe=B.stateNode;break;default:fe=B.stateNode}typeof ee=="function"?B.refCleanup=ee(fe):ee.current=fe}}catch(Ae){Sr(B,$,Ae)}}function wa(B,$){var ee=B.ref,fe=B.refCleanup;if(ee!==null)if(typeof fe=="function")try{fe()}catch(Ae){Sr(B,$,Ae)}finally{B.refCleanup=null,B=B.alternate,B!=null&&(B.refCleanup=null)}else if(typeof ee=="function")try{ee(null)}catch(Ae){Sr(B,$,Ae)}else ee.current=null}function tl(B){var $=B.type,ee=B.memoizedProps,fe=B.stateNode;try{bh(fe,$,ee,B)}catch(Ae){Sr(B,B.return,Ae)}}function bc(B,$,ee){try{_h(B.stateNode,B.type,ee,$,B)}catch(fe){Sr(B,B.return,fe)}}function Xu(B){return B.tag===5||B.tag===3||(ys?B.tag===26:!1)||(oa?B.tag===27&&pl(B.type):!1)||B.tag===4}function lo(B){e:for(;;){for(;B.sibling===null;){if(B.return===null||Xu(B.return))return null;B=B.return}for(B.sibling.return=B.return,B=B.sibling;B.tag!==5&&B.tag!==6&&B.tag!==18;){if(oa&&B.tag===27&&pl(B.type)||B.flags&2||B.child===null||B.tag===4)continue e;B.child.return=B,B=B.child}if(!(B.flags&2))return B.stateNode}}function Qc(B,$,ee){var fe=B.tag;if(fe===5||fe===6)B=B.stateNode,$?xh(ee,B,$):yd(ee,B);else if(fe!==4&&(oa&&fe===27&&pl(B.type)&&(ee=B.stateNode,$=null),B=B.child,B!==null))for(Qc(B,$,ee),B=B.sibling;B!==null;)Qc(B,$,ee),B=B.sibling}function _c(B,$,ee){var fe=B.tag;if(fe===5||fe===6)B=B.stateNode,$?Sh(ee,B,$):gd(ee,B);else if(fe!==4&&(oa&&fe===27&&pl(B.type)&&(ee=B.stateNode),B=B.child,B!==null))for(_c(B,$,ee),B=B.sibling;B!==null;)_c(B,$,ee),B=B.sibling}function Yu(B,$,ee){B=B.containerInfo;try{Ed(B,ee)}catch(fe){Sr($,$.return,fe)}}function ah(B){var $=B.stateNode,ee=B.memoizedProps;try{ra(B.type,ee,$,B)}catch(fe){Sr(B,B.return,fe)}}function _f(B,$){for(mu(B.containerInfo),Zi=$;Zi!==null;)if(B=Zi,$=B.child,(B.subtreeFlags&1028)!==0&&$!==null)$.return=B,Zi=$;else for(;Zi!==null;){B=Zi;var ee=B.alternate;switch($=B.flags,B.tag){case 0:if(($&4)!==0&&($=B.updateQueue,$=$!==null?$.events:null,$!==null))for(var fe=0;fe<$.length;fe++){var Ae=$[fe];Ae.ref.impl=Ae.nextImpl}break;case 11:case 15:break;case 1:if(($&1024)!==0&&ee!==null){$=void 0,fe=B,Ae=ee.memoizedProps,ee=ee.memoizedState;var De=fe.stateNode;try{var tt=oo(fe.type,Ae);$=De.getSnapshotBeforeUpdate(tt,ee),De.__reactInternalSnapshotBeforeUpdate=$}catch(kt){Sr(fe,fe.return,kt)}}break;case 3:($&1024)!==0&&Jr&&_d(B.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(($&1024)!==0)throw Error(y(163))}if($=B.sibling,$!==null){$.return=B.return,Zi=$;break}Zi=B.return}}function sh(B,$,ee){var fe=ee.flags;switch(ee.tag){case 0:case 11:case 15:Ia(B,ee),fe&4&&Ls(5,ee);break;case 1:if(Ia(B,ee),fe&4)if(B=ee.stateNode,$===null)try{B.componentDidMount()}catch(tt){Sr(ee,ee.return,tt)}else{var Ae=oo(ee.type,$.memoizedProps);$=$.memoizedState;try{B.componentDidUpdate(Ae,$,B.__reactInternalSnapshotBeforeUpdate)}catch(tt){Sr(ee,ee.return,tt)}}fe&64&&Ol(ee),fe&512&&Dl(ee,ee.return);break;case 3:if(Ia(B,ee),fe&64&&(fe=ee.updateQueue,fe!==null)){if(B=null,ee.child!==null)switch(ee.child.tag){case 27:case 5:B=Hl(ee.child.stateNode);break;case 1:B=ee.child.stateNode}try{vn(fe,B)}catch(tt){Sr(ee,ee.return,tt)}}break;case 27:oa&&$===null&&fe&4&&ah(ee);case 26:case 5:if(Ia(B,ee),$===null){if(fe&4)tl(ee);else if(fe&64){B=ee.type,$=ee.memoizedProps,Ae=ee.stateNode;try{jh(Ae,B,$,ee)}catch(tt){Sr(ee,ee.return,tt)}}}fe&512&&Dl(ee,ee.return);break;case 12:Ia(B,ee);break;case 31:Ia(B,ee),fe&4&&ds(B,ee);break;case 13:Ia(B,ee),fe&4&&xc(B,ee),fe&64&&(fe=ee.memoizedState,fe!==null&&(fe=fe.dehydrated,fe!==null&&(ee=Sf.bind(null,ee),xu(fe,ee))));break;case 22:if(fe=ee.memoizedState!==null||Vi,!fe){$=$!==null&&$.memoizedState!==null||Hi,Ae=Vi;var De=Hi;Vi=fe,(Hi=$)&&!De?fs(B,ee,(ee.subtreeFlags&8772)!==0):Ia(B,ee),Vi=Ae,Hi=De}break;case 30:break;default:Ia(B,ee)}}function Zu(B){var $=B.alternate;$!==null&&(B.alternate=null,Zu($)),B.child=null,B.deletions=null,B.sibling=null,B.tag===5&&($=B.stateNode,$!==null&&gu($)),B.stateNode=null,B.return=null,B.dependencies=null,B.memoizedProps=null,B.memoizedState=null,B.pendingProps=null,B.stateNode=null,B.updateQueue=null}function us(B,$,ee){for(ee=ee.child;ee!==null;)Sc(B,$,ee),ee=ee.sibling}function Sc(B,$,ee){if(Xa&&typeof Xa.onCommitFiberUnmount=="function")try{Xa.onCommitFiberUnmount(yl,ee)}catch{}switch(ee.tag){case 26:if(ys){Hi||wa(ee,$),us(B,$,ee),ee.memoizedState?Go(ee.memoizedState):ee.stateNode&&Ld(ee.stateNode);break}case 27:if(oa){Hi||wa(ee,$);var fe=Ui,Ae=Ki;pl(ee.type)&&(Ui=ee.stateNode,Ki=!1),us(B,$,ee),pa(ee.stateNode),Ui=fe,Ki=Ae;break}case 5:Hi||wa(ee,$);case 6:if(Jr){if(fe=Ui,Ae=Ki,Ui=null,us(B,$,ee),Ui=fe,Ki=Ae,Ui!==null)if(Ki)try{vd(Ui,ee.stateNode)}catch(De){Sr(ee,$,De)}else try{Eh(Ui,ee.stateNode)}catch(De){Sr(ee,$,De)}}else us(B,$,ee);break;case 18:Jr&&Ui!==null&&(Ki?Eu(Ui,ee.stateNode):kd(Ui,ee.stateNode));break;case 4:Jr?(fe=Ui,Ae=Ki,Ui=ee.stateNode.containerInfo,Ki=!0,us(B,$,ee),Ui=fe,Ki=Ae):(ns&&Yu(ee.stateNode,ee,Sd()),us(B,$,ee));break;case 0:case 11:case 14:case 15:Ps(2,ee,$),Hi||Ps(4,ee,$),us(B,$,ee);break;case 1:Hi||(wa(ee,$),fe=ee.stateNode,typeof fe.componentWillUnmount=="function"&&Jc(ee,$,fe)),us(B,$,ee);break;case 21:us(B,$,ee);break;case 22:Hi=(fe=Hi)||ee.memoizedState!==null,us(B,$,ee),Hi=fe;break;default:us(B,$,ee)}}function ds(B,$){if(Ii&&$.memoizedState===null&&(B=$.alternate,B!==null&&(B=B.memoizedState,B!==null))){B=B.dehydrated;try{wf(B)}catch(ee){Sr($,$.return,ee)}}}function xc(B,$){if(Ii&&$.memoizedState===null&&(B=$.alternate,B!==null&&(B=B.memoizedState,B!==null&&(B=B.dehydrated,B!==null))))try{Tf(B)}catch(ee){Sr($,$.return,ee)}}function hs(B){switch(B.tag){case 31:case 13:case 19:var $=B.stateNode;return $===null&&($=B.stateNode=new Hd),$;case 22:return B=B.stateNode,$=B._retryCache,$===null&&($=B._retryCache=new Hd),$;default:throw Error(y(435,B.tag))}}function co(B,$){var ee=hs(B);$.forEach(function(fe){if(!ee.has(fe)){ee.add(fe);var Ae=xf.bind(null,B,fe);fe.then(Ae,Ae)}})}function ha(B,$){var ee=$.deletions;if(ee!==null)for(var fe=0;fe<ee.length;fe++){var Ae=ee[fe],De=B,tt=$;if(Jr){var kt=tt;e:for(;kt!==null;){switch(kt.tag){case 27:if(oa){if(pl(kt.type)){Ui=kt.stateNode,Ki=!1;break e}break}case 5:Ui=kt.stateNode,Ki=!1;break e;case 3:case 4:Ui=kt.stateNode.containerInfo,Ki=!0;break e}kt=kt.return}if(Ui===null)throw Error(y(160));Sc(De,tt,Ae),Ui=null,Ki=!1}else Sc(De,tt,Ae);De=Ae.alternate,De!==null&&(De.return=null),Ae.return=null}if($.subtreeFlags&13886)for($=$.child;$!==null;)Ec($,B),$=$.sibling}function Ec(B,$){var ee=B.alternate,fe=B.flags;switch(B.tag){case 0:case 11:case 14:case 15:ha($,B),fa(B),fe&4&&(Ps(3,B,B.return),Ls(3,B),Ps(5,B,B.return));break;case 1:ha($,B),fa(B),fe&512&&(Hi||ee===null||wa(ee,ee.return)),fe&64&&Vi&&(B=B.updateQueue,B!==null&&(fe=B.callbacks,fe!==null&&(ee=B.shared.hiddenCallbacks,B.shared.hiddenCallbacks=ee===null?fe:ee.concat(fe))));break;case 26:if(ys){var Ae=gi;if(ha($,B),fa(B),fe&512&&(Hi||ee===null||wa(ee,ee.return)),fe&4){fe=ee!==null?ee.memoizedState:null;var De=B.memoizedState;ee===null?De===null?B.stateNode===null?B.stateNode=Yh(Ae,B.type,B.memoizedProps,B):Dd(Ae,B.type,B.stateNode):B.stateNode=Od(Ae,De,B.memoizedProps):fe!==De?(fe===null?ee.stateNode!==null&&Ld(ee.stateNode):Go(fe),De===null?Dd(Ae,B.type,B.stateNode):Od(Ae,De,B.memoizedProps)):De===null&&B.stateNode!==null&&bc(B,B.memoizedProps,ee.memoizedProps)}break}case 27:if(oa){ha($,B),fa(B),fe&512&&(Hi||ee===null||wa(ee,ee.return)),ee!==null&&fe&4&&bc(B,B.memoizedProps,ee.memoizedProps);break}case 5:if(ha($,B),fa(B),fe&512&&(Hi||ee===null||wa(ee,ee.return)),Jr){if(B.flags&32){Ae=B.stateNode;try{bd(Ae)}catch(Cn){Sr(B,B.return,Cn)}}fe&4&&B.stateNode!=null&&(Ae=B.memoizedProps,bc(B,Ae,ee!==null?ee.memoizedProps:Ae)),fe&1024&&(Jl=!0)}else ns&&B.alternate!==null&&(B.alternate.stateNode=B.stateNode);break;case 6:if(ha($,B),fa(B),fe&4&&Jr){if(B.stateNode===null)throw Error(y(162));fe=B.memoizedProps,ee=ee!==null?ee.memoizedProps:fe,Ae=B.stateNode;try{yh(Ae,ee,fe)}catch(Cn){Sr(B,B.return,Cn)}}break;case 3:if(ys?(Zh(),Ae=gi,gi=Lc($.containerInfo),ha($,B),gi=Ae):ha($,B),fa(B),fe&4){if(Jr&&Ii&&ee!==null&&ee.memoizedState.isDehydrated)try{Vh($.containerInfo)}catch(Cn){Sr(B,B.return,Cn)}if(ns){fe=$.containerInfo,ee=$.pendingChildren;try{Ed(fe,ee)}catch(Cn){Sr(B,B.return,Cn)}}}Jl&&(Jl=!1,eu(B));break;case 4:ys?(ee=gi,gi=Lc(B.stateNode.containerInfo),ha($,B),fa(B),gi=ee):(ha($,B),fa(B)),fe&4&&ns&&Yu(B.stateNode,B,B.stateNode.pendingChildren);break;case 12:ha($,B),fa(B);break;case 31:ha($,B),fa(B),fe&4&&(fe=B.updateQueue,fe!==null&&(B.updateQueue=null,co(B,fe)));break;case 13:ha($,B),fa(B),B.child.flags&8192&&B.memoizedState!==null!=(ee!==null&&ee.memoizedState!==null)&&(Hc=Ta()),fe&4&&(fe=B.updateQueue,fe!==null&&(B.updateQueue=null,co(B,fe)));break;case 22:Ae=B.memoizedState!==null;var tt=ee!==null&&ee.memoizedState!==null,kt=Vi,nn=Hi;if(Vi=kt||Ae,Hi=nn||tt,ha($,B),Hi=nn,Vi=kt,fa(B),fe&8192&&($=B.stateNode,$._visibility=Ae?$._visibility&-2:$._visibility|1,Ae&&(ee===null||tt||Vi||Hi||Mo(B)),Jr)){e:if(ee=null,Jr)for($=B;;){if($.tag===5||ys&&$.tag===26){if(ee===null){tt=ee=$;try{De=tt.stateNode,Ae?Ef(De):wh(tt.stateNode,tt.memoizedProps)}catch(Cn){Sr(tt,tt.return,Cn)}}}else if($.tag===6){if(ee===null){tt=$;try{var Sn=tt.stateNode;Ae?Ah(Sn):Th(Sn,tt.memoizedProps)}catch(Cn){Sr(tt,tt.return,Cn)}}}else if($.tag===18){if(ee===null){tt=$;try{var Dn=tt.stateNode;Ae?qh(Dn):Wh(tt.stateNode)}catch(Cn){Sr(tt,tt.return,Cn)}}}else if(($.tag!==22&&$.tag!==23||$.memoizedState===null||$===B)&&$.child!==null){$.child.return=$,$=$.child;continue}if($===B)break e;for(;$.sibling===null;){if($.return===null||$.return===B)break e;ee===$&&(ee=null),$=$.return}ee===$&&(ee=null),$.sibling.return=$.return,$=$.sibling}}fe&4&&(fe=B.updateQueue,fe!==null&&(ee=fe.retryQueue,ee!==null&&(fe.retryQueue=null,co(B,ee))));break;case 19:ha($,B),fa(B),fe&4&&(fe=B.updateQueue,fe!==null&&(B.updateQueue=null,co(B,fe)));break;case 30:break;case 21:break;default:ha($,B),fa(B)}}function fa(B){var $=B.flags;if($&2){try{for(var ee,fe=B.return;fe!==null;){if(Xu(fe)){ee=fe;break}fe=fe.return}if(Jr){if(ee==null)throw Error(y(160));switch(ee.tag){case 27:if(oa){var Ae=ee.stateNode,De=lo(B);_c(B,De,Ae);break}case 5:var tt=ee.stateNode;ee.flags&32&&(bd(tt),ee.flags&=-33);var kt=lo(B);_c(B,kt,tt);break;case 3:case 4:var nn=ee.stateNode.containerInfo,Sn=lo(B);Qc(B,Sn,nn);break;default:throw Error(y(161))}}}catch(Dn){Sr(B,B.return,Dn)}B.flags&=-3}$&4096&&(B.flags&=-4097)}function eu(B){if(B.subtreeFlags&1024)for(B=B.child;B!==null;){var $=B;eu($),$.tag===5&&$.flags&1024&&dd($.stateNode),B=B.sibling}}function Ia(B,$){if($.subtreeFlags&8772)for($=$.child;$!==null;)sh(B,$.alternate,$),$=$.sibling}function Mo(B){for(B=B.child;B!==null;){var $=B;switch($.tag){case 0:case 11:case 14:case 15:Ps(4,$,$.return),Mo($);break;case 1:wa($,$.return);var ee=$.stateNode;typeof ee.componentWillUnmount=="function"&&Jc($,$.return,ee),Mo($);break;case 27:oa&&pa($.stateNode);case 26:case 5:wa($,$.return),Mo($);break;case 22:$.memoizedState===null&&Mo($);break;case 30:Mo($);break;default:Mo($)}B=B.sibling}}function fs(B,$,ee){for(ee=ee&&($.subtreeFlags&8772)!==0,$=$.child;$!==null;){var fe=$.alternate,Ae=B,De=$,tt=De.flags;switch(De.tag){case 0:case 11:case 15:fs(Ae,De,ee),Ls(4,De);break;case 1:if(fs(Ae,De,ee),fe=De,Ae=fe.stateNode,typeof Ae.componentDidMount=="function")try{Ae.componentDidMount()}catch(Sn){Sr(fe,fe.return,Sn)}if(fe=De,Ae=fe.updateQueue,Ae!==null){var kt=fe.stateNode;try{var nn=Ae.shared.hiddenCallbacks;if(nn!==null)for(Ae.shared.hiddenCallbacks=null,Ae=0;Ae<nn.length;Ae++)bn(nn[Ae],kt)}catch(Sn){Sr(fe,fe.return,Sn)}}ee&&tt&64&&Ol(De),Dl(De,De.return);break;case 27:oa&&ah(De);case 26:case 5:fs(Ae,De,ee),ee&&fe===null&&tt&4&&tl(De),Dl(De,De.return);break;case 12:fs(Ae,De,ee);break;case 31:fs(Ae,De,ee),ee&&tt&4&&ds(Ae,De);break;case 13:fs(Ae,De,ee),ee&&tt&4&&xc(Ae,De);break;case 22:De.memoizedState===null&&fs(Ae,De,ee),Dl(De,De.return);break;case 30:break;default:fs(Ae,De,ee)}$=$.sibling}}function ko(B,$){var ee=null;B!==null&&B.memoizedState!==null&&B.memoizedState.cachePool!==null&&(ee=B.memoizedState.cachePool.pool),B=null,$.memoizedState!==null&&$.memoizedState.cachePool!==null&&(B=$.memoizedState.cachePool.pool),B!==ee&&(B!=null&&B.refCount++,ee!=null&&Qe(ee))}function Ku(B,$){B=null,$.alternate!==null&&(B=$.alternate.memoizedState.cache),$=$.memoizedState.cache,$!==B&&($.refCount++,B!=null&&Qe(B))}function Li(B,$,ee,fe){if($.subtreeFlags&10256)for($=$.child;$!==null;)tu(B,$,ee,fe),$=$.sibling}function tu(B,$,ee,fe){var Ae=$.flags;switch($.tag){case 0:case 11:case 15:Li(B,$,ee,fe),Ae&2048&&Ls(9,$);break;case 1:Li(B,$,ee,fe);break;case 3:Li(B,$,ee,fe),Ae&2048&&(B=null,$.alternate!==null&&(B=$.alternate.memoizedState.cache),$=$.memoizedState.cache,$!==B&&($.refCount++,B!=null&&Qe(B)));break;case 12:if(Ae&2048){Li(B,$,ee,fe),B=$.stateNode;try{var De=$.memoizedProps,tt=De.id,kt=De.onPostCommit;typeof kt=="function"&&kt(tt,$.alternate===null?"mount":"update",B.passiveEffectDuration,-0)}catch(nn){Sr($,$.return,nn)}}else Li(B,$,ee,fe);break;case 31:Li(B,$,ee,fe);break;case 13:Li(B,$,ee,fe);break;case 23:break;case 22:De=$.stateNode,tt=$.alternate,$.memoizedState!==null?De._visibility&2?Li(B,$,ee,fe):Ll(B,$):De._visibility&2?Li(B,$,ee,fe):(De._visibility|=2,Ga(B,$,ee,fe,($.subtreeFlags&10256)!==0||!1)),Ae&2048&&ko(tt,$);break;case 24:Li(B,$,ee,fe),Ae&2048&&Ku($.alternate,$);break;default:Li(B,$,ee,fe)}}function Ga(B,$,ee,fe,Ae){for(Ae=Ae&&(($.subtreeFlags&10256)!==0||!1),$=$.child;$!==null;){var De=B,tt=$,kt=ee,nn=fe,Sn=tt.flags;switch(tt.tag){case 0:case 11:case 15:Ga(De,tt,kt,nn,Ae),Ls(8,tt);break;case 23:break;case 22:var Dn=tt.stateNode;tt.memoizedState!==null?Dn._visibility&2?Ga(De,tt,kt,nn,Ae):Ll(De,tt):(Dn._visibility|=2,Ga(De,tt,kt,nn,Ae)),Ae&&Sn&2048&&ko(tt.alternate,tt);break;case 24:Ga(De,tt,kt,nn,Ae),Ae&&Sn&2048&&Ku(tt.alternate,tt);break;default:Ga(De,tt,kt,nn,Ae)}$=$.sibling}}function Ll(B,$){if($.subtreeFlags&10256)for($=$.child;$!==null;){var ee=B,fe=$,Ae=fe.flags;switch(fe.tag){case 22:Ll(ee,fe),Ae&2048&&ko(fe.alternate,fe);break;case 24:Ll(ee,fe),Ae&2048&&Ku(fe.alternate,fe);break;default:Ll(ee,fe)}$=$.sibling}}function Fs(B,$,ee){if(B.subtreeFlags&os)for(B=B.child;B!==null;)Io(B,$,ee),B=B.sibling}function Io(B,$,ee){switch(B.tag){case 26:if(Fs(B,$,ee),B.flags&os)if(B.memoizedState!==null)Kh(ee,gi,B.memoizedState,B.memoizedProps);else{var fe=B.stateNode,Ae=B.type;B=B.memoizedProps,(($&335544128)===$||cd(Ae,B))&&yu(ee,fe,Ae,B)}break;case 5:Fs(B,$,ee),B.flags&os&&(fe=B.stateNode,Ae=B.type,B=B.memoizedProps,(($&335544128)===$||cd(Ae,B))&&yu(ee,fe,Ae,B));break;case 3:case 4:ys?(fe=gi,gi=Lc(B.stateNode.containerInfo),Fs(B,$,ee),gi=fe):Fs(B,$,ee);break;case 22:B.memoizedState===null&&(fe=B.alternate,fe!==null&&fe.memoizedState!==null?(fe=os,os=16777216,Fs(B,$,ee),os=fe):Fs(B,$,ee));break;default:Fs(B,$,ee)}}function nu(B){var $=B.alternate;if($!==null&&(B=$.child,B!==null)){$.child=null;do $=B.sibling,B.sibling=null,B=$;while(B!==null)}}function Pl(B){var $=B.deletions;if((B.flags&16)!==0){if($!==null)for(var ee=0;ee<$.length;ee++){var fe=$[ee];Zi=fe,Qa(fe,B)}nu(B)}if(B.subtreeFlags&10256)for(B=B.child;B!==null;)ru(B),B=B.sibling}function ru(B){switch(B.tag){case 0:case 11:case 15:Pl(B),B.flags&2048&&Ps(9,B,B.return);break;case 3:Pl(B);break;case 12:Pl(B);break;case 22:var $=B.stateNode;B.memoizedState!==null&&$._visibility&2&&(B.return===null||B.return.tag!==13)?($._visibility&=-3,Ac(B)):Pl(B);break;default:Pl(B)}}function Ac(B){var $=B.deletions;if((B.flags&16)!==0){if($!==null)for(var ee=0;ee<$.length;ee++){var fe=$[ee];Zi=fe,Qa(fe,B)}nu(B)}for(B=B.child;B!==null;){switch($=B,$.tag){case 0:case 11:case 15:Ps(8,$,$.return),Ac($);break;case 22:ee=$.stateNode,ee._visibility&2&&(ee._visibility&=-3,Ac($));break;default:Ac($)}B=B.sibling}}function Qa(B,$){for(;Zi!==null;){var ee=Zi;switch(ee.tag){case 0:case 11:case 15:Ps(8,ee,$);break;case 23:case 22:if(ee.memoizedState!==null&&ee.memoizedState.cachePool!==null){var fe=ee.memoizedState.cachePool.pool;fe!=null&&fe.refCount++}break;case 24:Qe(ee.memoizedState.cache)}if(fe=ee.child,fe!==null)fe.return=ee,Zi=fe;else e:for(ee=B;Zi!==null;){fe=Zi;var Ae=fe.sibling,De=fe.return;if(Zu(fe),fe===ee){Zi=null;break e}if(Ae!==null){Ae.return=De,Zi=Ae;break e}Zi=De}}}function No(B){var $=kr(B);if($!=null){if(typeof $.memoizedProps["data-testname"]!="string")throw Error(y(364));return $}if(B=Xi(B),B===null)throw Error(y(362));return B.stateNode.current}function Oo(B,$){var ee=B.tag;switch($.$$typeof){case ws:if(B.type===$.value)return!0;break;case ec:e:{for($=$.value,B=[B,0],ee=0;ee<B.length;){var fe=B[ee++],Ae=fe.tag,De=B[ee++],tt=$[De];if(Ae!==5&&Ae!==26&&Ae!==27||!$o(fe)){for(;tt!=null&&Oo(fe,tt);)De++,tt=$[De];if(De===$.length){$=!0;break e}else for(fe=fe.child;fe!==null;)B.push(fe,De),fe=fe.sibling}}$=!1}return $;case tc:if((ee===5||ee===26||ee===27)&&md(B.stateNode,$.value))return!0;break;case Xo:if((ee===5||ee===6||ee===26||ee===27)&&(B=Oc(B),B!==null&&0<=B.indexOf($.value)))return!0;break;case jc:if((ee===5||ee===26||ee===27)&&(B=B.memoizedProps["data-testname"],typeof B=="string"&&B.toLowerCase()===$.value.toLowerCase()))return!0;break;default:throw Error(y(365))}return!1}function Fl(B){switch(B.$$typeof){case ws:return"<"+(I(B.value)||"Unknown")+">";case ec:return":has("+(Fl(B)||"")+")";case tc:return'[role="'+B.value+'"]';case Xo:return'"'+B.value+'"';case jc:return'[data-testname="'+B.value+'"]';default:throw Error(y(365))}}function Bl(B,$){var ee=[];B=[B,0];for(var fe=0;fe<B.length;){var Ae=B[fe++],De=Ae.tag,tt=B[fe++],kt=$[tt];if(De!==5&&De!==26&&De!==27||!$o(Ae)){for(;kt!=null&&Oo(Ae,kt);)tt++,kt=$[tt];if(tt===$.length)ee.push(Ae);else for(Ae=Ae.child;Ae!==null;)B.push(Ae,tt),Ae=Ae.sibling}}return ee}function ja(B,$){if(!sa)throw Error(y(363));B=No(B),B=Bl(B,$),$=[],B=Array.from(B);for(var ee=0;ee<B.length;){var fe=B[ee++],Ae=fe.tag;if(Ae===5||Ae===26||Ae===27)$o(fe)||$.push(fe.stateNode);else for(fe=fe.child;fe!==null;)B.push(fe),fe=fe.sibling}return $}function ki(){return(jr&2)!==0&&Xr!==0?Xr&-Xr:sr.T!==null?At():Wl()}function uo(){if(Fa===0)if((Xr&536870912)===0||Wr){var B=gl;gl<<=1,(gl&3932160)===0&&(gl=262144),Fa=B}else Fa=536870912;return B=Ya.current,B!==null&&(B.flags|=32),Fa}function Pi(B,$,ee){(B===Ur&&(yi===2||yi===9)||B.cancelPendingCommit!==null)&&(Gi(B,0),Us(B,Xr,Fa,!1)),J(B,ee),((jr&2)===0||B!==Ur)&&(B===Ur&&((jr&2)===0&&(Ko|=ee),$i===4&&Us(B,Xr,Fa,!1)),St(B))}function Cs(B,$,ee){if((jr&6)!==0)throw Error(y(327));var fe=!ee&&($&127)===0&&($&B.expiredLanes)===0||G(B,$),Ae=fe?ch(B,$):$s(B,$,!0),De=fe;do{if(Ae===0){Yo&&!fe&&Us(B,$,0,!1);break}else{if(ee=B.current.alternate,De&&!oh(ee)){Ae=$s(B,$,!1),De=!1;continue}if(Ae===2){if(De=$,B.errorRecoveryDisabledLanes&De)var tt=0;else tt=B.pendingLanes&-536870913,tt=tt!==0?tt:tt&536870912?536870912:0;if(tt!==0){$=tt;e:{var kt=B;Ae=Vc;var nn=Ii&&kt.current.memoizedState.isDehydrated;if(nn&&(Gi(kt,tt).flags|=256),tt=$s(kt,tt,!1),tt!==2){if(Zo&&!nn){kt.errorRecoveryDisabledLanes|=De,Ko|=De,Ae=4;break e}De=Ka,Ka=Ae,De!==null&&(Ka===null?Ka=De:Ka.push.apply(Ka,De))}Ae=tt}if(De=!1,Ae!==2)continue}}if(Ae===1){Gi(B,0),Us(B,$,0,!0);break}e:{switch(fe=B,De=Ae,De){case 0:case 1:throw Error(y(345));case 4:if(($&4194048)!==$)break;case 6:Us(fe,$,Fa,!Is);break e;case 2:Ka=null;break;case 3:case 5:break;default:throw Error(y(329))}if(($&62914560)===$&&(Ae=Hc+300-Ta(),10<Ae)){if(Us(fe,$,Fa,!Is),U(fe,0,!0)!==0)break e;eo=$,fe.timeoutHandle=ld(Bs.bind(null,fe,ee,Ka,qc,Uu,$,Fa,Ko,rc,Is,De,"Throttled",-0,0),Ae);break e}Bs(fe,ee,Ka,qc,Uu,$,Fa,Ko,rc,Is,De,null,-0,0)}}break}while(!0);St(B)}function Bs(B,$,ee,fe,Ae,De,tt,kt,nn,Sn,Dn,Cn,jn,Rr){if(B.timeoutHandle=qa,Cn=$.subtreeFlags,Cn&8192||(Cn&16785408)===16785408){Cn=ud(),Io($,De,Cn);var Ji=(De&62914560)===De?Hc-Ta():(De&4194048)===De?El-Ta():0;if(Ji=gh(Cn,Ji),Ji!==null){eo=De,B.cancelPendingCommit=Ji(Gs.bind(null,B,$,De,ee,fe,Ae,tt,kt,nn,Dn,Cn,null,jn,Rr)),Us(B,De,tt,!Sn);return}}Gs(B,$,De,ee,fe,Ae,tt,kt,nn)}function oh(B){for(var $=B;;){var ee=$.tag;if((ee===0||ee===11||ee===15)&&$.flags&16384&&(ee=$.updateQueue,ee!==null&&(ee=ee.stores,ee!==null)))for(var fe=0;fe<ee.length;fe++){var Ae=ee[fe],De=Ae.getSnapshot;Ae=Ae.value;try{if(!Yi(De(),Ae))return!1}catch{return!1}}if(ee=$.child,$.subtreeFlags&16384&&ee!==null)ee.return=$,$=ee;else{if($===B)break;for(;$.sibling===null;){if($.return===null||$.return===B)return!0;$=$.return}$.sibling.return=$.return,$=$.sibling}}return!0}function Us(B,$,ee,fe){$&=~nc,$&=~Ko,B.suspendedLanes|=$,B.pingedLanes&=~$,fe&&(B.warmLanes|=$),fe=B.expirationTimes;for(var Ae=$;0<Ae;){var De=31-Wa(Ae),tt=1<<De;fe[De]=-1,Ae&=~tt}ee!==0&&de(B,ee,$)}function iu(){return(jr&6)===0?(Ct(0),!1):!0}function au(){if(Vr!==null){if(yi===0)var B=Vr.return;else B=Vr,Ms=wi=null,ar(B),Ho=null,vl=0,B=Vr;for(;B!==null;)ih(B.alternate,B),B=B.return;Vr=null}}function Gi(B,$){var ee=B.timeoutHandle;ee!==qa&&(B.timeoutHandle=qa,mh(ee)),ee=B.cancelPendingCommit,ee!==null&&(B.cancelPendingCommit=null,ee()),eo=0,au(),Ur=B,Vr=ee=ts(B.current,null),Xr=$,yi=0,ia=null,Is=!1,Yo=G(B,$),Zo=!1,rc=Fa=nc=Ko=Ao=$i=0,Ka=Vc=null,Uu=!1,($&8)!==0&&($|=$&32);var fe=B.entangledLanes;if(fe!==0)for(B=B.entanglements,fe&=$;0<fe;){var Ae=31-Wa(fe),De=1<<Ae;$|=B[Ae],fe&=~De}return Qs=$,wr(),ee}function Ai(B,$){Ir=null,sr.H=ss,$===ua||$===Es?($=On(),yi=3):$===Fu?($=On(),yi=4):yi=$===Pa?8:$!==null&&typeof $=="object"&&typeof $.then=="function"?6:1,ia=$,Vr===null&&($i=1,kl(B,Se($,B.current)))}function Kr(){var B=Ya.current;return B===null?!0:(Xr&4194048)===Xr?Za===null:(Xr&62914560)===Xr||(Xr&536870912)!==0?B===Za:!1}function ho(){var B=sr.H;return sr.H=ss,B===null?ss:B}function es(){var B=sr.A;return sr.A=Ql,B}function Ul(){$i=4,Is||(Xr&4194048)!==Xr&&Ya.current!==null||(Yo=!0),(Ao&134217727)===0&&(Ko&134217727)===0||Ur===null||Us(Ur,Xr,Fa,!1)}function $s(B,$,ee){var fe=jr;jr|=2;var Ae=ho(),De=es();(Ur!==B||Xr!==$)&&(qc=null,Gi(B,$)),$=!1;var tt=$i;e:do try{if(yi!==0&&Vr!==null){var kt=Vr,nn=ia;switch(yi){case 8:au(),tt=6;break e;case 3:case 2:case 9:case 6:Ya.current===null&&($=!0);var Sn=yi;if(yi=0,ia=null,zs(B,kt,nn,Sn),ee&&Yo){tt=0;break e}break;default:Sn=yi,yi=0,ia=null,zs(B,kt,nn,Sn)}}lh(),tt=$i;break}catch(Dn){Ai(B,Dn)}while(!0);return $&&B.shellSuspendCounter++,Ms=wi=null,jr=fe,sr.H=Ae,sr.A=De,Vr===null&&(Ur=null,Xr=0,wr()),tt}function lh(){for(;Vr!==null;)Do(Vr)}function ch(B,$){var ee=jr;jr|=2;var fe=ho(),Ae=es();Ur!==B||Xr!==$?(qc=null,Jo=Ta()+500,Gi(B,$)):Yo=G(B,$);e:do try{if(yi!==0&&Vr!==null){$=Vr;var De=ia;t:switch(yi){case 1:yi=0,ia=null,zs(B,$,De,1);break;case 2:case 9:if(cn(De)){yi=0,ia=null,su($);break}$=function(){yi!==2&&yi!==9||Ur!==B||(yi=7),St(B)},De.then($,$);break e;case 3:yi=7;break e;case 4:yi=5;break e;case 7:cn(De)?(yi=0,ia=null,su($)):(yi=0,ia=null,zs(B,$,De,7));break;case 5:var tt=null;switch(Vr.tag){case 26:tt=Vr.memoizedState;case 5:case 27:var kt=Vr,nn=kt.type,Sn=kt.pendingProps;if(tt?Fd(tt):Fi(kt.stateNode,nn,Sn)){yi=0,ia=null;var Dn=kt.sibling;if(Dn!==null)Vr=Dn;else{var Cn=kt.return;Cn!==null?(Vr=Cn,zl(Cn)):Vr=null}break t}}yi=0,ia=null,zs(B,$,De,5);break;case 6:yi=0,ia=null,zs(B,$,De,6);break;case 8:au(),$i=6;break e;default:throw Error(y(462))}}$l();break}catch(jn){Ai(B,jn)}while(!0);return Ms=wi=null,sr.H=fe,sr.A=Ae,jr=ee,Vr!==null?0:(Ur=null,Xr=0,wr(),$i)}function $l(){for(;Vr!==null&&!Qh();)Do(Vr)}function Do(B){var $=yc(B.alternate,B,Qs);B.memoizedProps=B.pendingProps,$===null?zl(B):Vr=$}function su(B){var $=B,ee=$.alternate;switch($.tag){case 15:case 0:$=Ln(ee,$,$.pendingProps,$.type,void 0,Xr);break;case 11:$=Ln(ee,$,$.pendingProps,$.type.render,$.ref,Xr);break;case 5:ar($);default:ih(ee,$),$=Vr=cu($,Qs),$=yc(ee,$,Qs)}B.memoizedProps=B.pendingProps,$===null?zl(B):Vr=$}function zs(B,$,ee,fe){Ms=wi=null,ar($),Ho=null,vl=0;var Ae=$.return;try{if(Hu(B,Ae,$,ee,Xr)){$i=1,kl(B,Se(ee,B.current)),Vr=null;return}}catch(De){if(Ae!==null)throw Vr=Ae,De;$i=1,kl(B,Se(ee,B.current)),Vr=null;return}$.flags&32768?(Wr||fe===1?B=!0:Yo||(Xr&536870912)!==0?B=!1:(Is=B=!0,(fe===2||fe===9||fe===3||fe===6)&&(fe=Ya.current,fe!==null&&fe.tag===13&&(fe.flags|=16384))),Lo($,B)):zl($)}function zl(B){var $=B;do{if(($.flags&32768)!==0){Lo($,Is);return}B=$.return;var ee=rh($.alternate,$,Qs);if(ee!==null){Vr=ee;return}if($=$.sibling,$!==null){Vr=$;return}Vr=$=B}while($!==null);$i===0&&($i=5)}function Lo(B,$){do{var ee=Wu(B.alternate,B);if(ee!==null){ee.flags&=32767,Vr=ee;return}if(ee=B.return,ee!==null&&(ee.flags|=32768,ee.subtreeFlags=0,ee.deletions=null),!$&&(B=B.sibling,B!==null)){Vr=B;return}Vr=B=ee}while(B!==null);$i=6,Vr=null}function Gs(B,$,ee,fe,Ae,De,tt,kt,nn){B.cancelPendingCommit=null;do Vs();while(aa!==0);if((jr&6)!==0)throw Error(y(327));if($!==null){if($===B.current)throw Error(y(177));if(De=$.lanes|$.childLanes,De|=bl,te(B,ee,De,tt,kt,nn),B===Ur&&(Vr=Ur=null,Xr=0),Al=$,To=B,eo=ee,ic=De,$u=Ae,qd=fe,($.subtreeFlags&10256)!==0||($.flags&10256)!==0?(B.callbackNode=null,B.callbackPriority=0,na(Fc,function(){return wc(),null})):(B.callbackNode=null,B.callbackPriority=0),fe=($.flags&13878)!==0,($.subtreeFlags&13878)!==0||fe){fe=sr.T,sr.T=null,Ae=gs(),qr(2),tt=jr,jr|=4;try{_f(B,$,ee)}finally{jr=tt,qr(Ae),sr.T=fe}}aa=1,fo(),js(),ou()}}function fo(){if(aa===1){aa=0;var B=To,$=Al,ee=($.flags&13878)!==0;if(($.subtreeFlags&13878)!==0||ee){ee=sr.T,sr.T=null;var fe=gs();qr(2);var Ae=jr;jr|=4;try{Ec($,B),ph(B.containerInfo)}finally{jr=Ae,qr(fe),sr.T=ee}}B.current=$,aa=2}}function js(){if(aa===2){aa=0;var B=To,$=Al,ee=($.flags&8772)!==0;if(($.subtreeFlags&8772)!==0||ee){ee=sr.T,sr.T=null;var fe=gs();qr(2);var Ae=jr;jr|=4;try{sh(B,$.alternate,$)}finally{jr=Ae,qr(fe),sr.T=ee}}aa=3}}function ou(){if(aa===4||aa===3){aa=0,Ud();var B=To,$=Al,ee=eo,fe=qd;($.subtreeFlags&10256)!==0||($.flags&10256)!==0?aa=5:(aa=0,Al=To=null,lu(B,B.pendingLanes));var Ae=B.pendingLanes;if(Ae===0&&(wo=null),Ee(ee),$=$.stateNode,Xa&&typeof Xa.onCommitFiberRoot=="function")try{Xa.onCommitFiberRoot(yl,$,void 0,($.current.flags&128)===128)}catch{}if(fe!==null){$=sr.T,Ae=gs(),qr(2),sr.T=null;try{for(var De=B.onRecoverableError,tt=0;tt<fe.length;tt++){var kt=fe[tt];De(kt.value,{componentStack:kt.stack})}}finally{sr.T=$,qr(Ae)}}(eo&3)!==0&&Vs(),St(B),Ae=B.pendingLanes,(ee&261930)!==0&&(Ae&42)!==0?B===Wc?ai++:(ai=0,Wc=B):ai=0,Ii&&Dc(),Ct(0)}}function lu(B,$){(B.pooledCacheLanes&=$)===0&&($=B.pooledCache,$!=null&&(B.pooledCache=null,Qe($)))}function Vs(){return fo(),js(),ou(),wc()}function wc(){if(aa!==5)return!1;var B=To,$=ic;ic=0;var ee=Ee(eo),fe=32>ee?32:ee;ee=sr.T;var Ae=gs();try{qr(fe),sr.T=null,fe=$u,$u=null;var De=To,tt=eo;if(aa=0,Al=To=null,eo=0,(jr&6)!==0)throw Error(y(331));var kt=jr;if(jr|=4,ru(De.current),tu(De,De.current,tt,fe),jr=kt,Ct(0,!1),Xa&&typeof Xa.onPostCommitFiberRoot=="function")try{Xa.onPostCommitFiberRoot(yl,De)}catch{}return!0}finally{qr(Ae),sr.T=ee,lu(B,$)}}function Po(B,$,ee){$=Se(ee,$),$=Co(B.stateNode,$,2),B=$t(B,$,2),B!==null&&(J(B,2),St(B))}function Sr(B,$,ee){if(B.tag===3)Po(B,B,ee);else for(;$!==null;){if($.tag===3){Po($,B,ee);break}else if($.tag===1){var fe=$.stateNode;if(typeof $.type.getDerivedStateFromError=="function"||typeof fe.componentDidCatch=="function"&&(wo===null||!wo.has(fe))){B=Se(ee,B),ee=Yc(2),fe=$t($,ee,2),fe!==null&&(Zc(ee,fe,$,B),J(fe,2),St(fe));break}}$=$.return}}function Gl(B,$,ee){var fe=B.pingCache;if(fe===null){fe=B.pingCache=new ls;var Ae=new Set;fe.set($,Ae)}else Ae=fe.get($),Ae===void 0&&(Ae=new Set,fe.set($,Ae));Ae.has(ee)||(Zo=!0,Ae.add(ee),B=uh.bind(null,B,$,ee),$.then(B,B))}function uh(B,$,ee){var fe=B.pingCache;fe!==null&&fe.delete($),B.pingedLanes|=B.suspendedLanes&ee,B.warmLanes&=~ee,Ur===B&&(Xr&ee)===ee&&($i===4||$i===3&&(Xr&62914560)===Xr&&300>Ta()-Hc?(jr&2)===0&&Gi(B,0):nc|=ee,rc===Xr&&(rc=0)),St(B)}function dh(B,$){$===0&&($=K()),B=zn(B,$),B!==null&&(J(B,$),St(B))}function Sf(B){var $=B.memoizedState,ee=0;$!==null&&(ee=$.retryLane),dh(B,ee)}function xf(B,$){var ee=0;switch(B.tag){case 31:case 13:var fe=B.stateNode,Ae=B.memoizedState;Ae!==null&&(ee=Ae.retryLane);break;case 19:fe=B.stateNode;break;case 22:fe=B.stateNode._retryCache;break;default:throw Error(y(314))}fe!==null&&fe.delete($),dh(B,ee)}function na(B,$){return Pc(B,$)}function Ju(B,$,ee,fe){this.tag=B,this.key=ee,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=$,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=fe,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nl(B){return B=B.prototype,!(!B||!B.isReactComponent)}function ts(B,$){var ee=B.alternate;return ee===null?(ee=u(B.tag,$,B.key,B.mode),ee.elementType=B.elementType,ee.type=B.type,ee.stateNode=B.stateNode,ee.alternate=B,B.alternate=ee):(ee.pendingProps=$,ee.type=B.type,ee.flags=0,ee.subtreeFlags=0,ee.deletions=null),ee.flags=B.flags&65011712,ee.childLanes=B.childLanes,ee.lanes=B.lanes,ee.child=B.child,ee.memoizedProps=B.memoizedProps,ee.memoizedState=B.memoizedState,ee.updateQueue=B.updateQueue,$=B.dependencies,ee.dependencies=$===null?null:{lanes:$.lanes,firstContext:$.firstContext},ee.sibling=B.sibling,ee.index=B.index,ee.ref=B.ref,ee.refCleanup=B.refCleanup,ee}function cu(B,$){B.flags&=65011714;var ee=B.alternate;return ee===null?(B.childLanes=0,B.lanes=$,B.child=null,B.subtreeFlags=0,B.memoizedProps=null,B.memoizedState=null,B.updateQueue=null,B.dependencies=null,B.stateNode=null):(B.childLanes=ee.childLanes,B.lanes=ee.lanes,B.child=ee.child,B.subtreeFlags=0,B.deletions=null,B.memoizedProps=ee.memoizedProps,B.memoizedState=ee.memoizedState,B.updateQueue=ee.updateQueue,B.type=ee.type,$=ee.dependencies,B.dependencies=$===null?null:{lanes:$.lanes,firstContext:$.firstContext}),B}function po(B,$,ee,fe,Ae,De){var tt=0;if(fe=B,typeof B=="function")nl(B)&&(tt=1);else if(typeof B=="string")tt=ys&&oa?Au(B,ee,ma.current)?26:Bd(B)?27:5:ys?Au(B,ee,ma.current)?26:5:oa&&Bd(B)?27:5;else e:switch(B){case Mc:return B=u(31,ee,$,Ae),B.elementType=Mc,B.lanes=De,B;case ol:return ps(ee.children,Ae,De,$);case ll:tt=8,Ae|=24;break;case cl:return B=u(12,ee,$,Ae|2),B.elementType=cl,B.lanes=De,B;case fu:return B=u(13,ee,$,Ae),B.elementType=fu,B.lanes=De,B;case mo:return B=u(19,ee,$,Ae),B.elementType=mo,B.lanes=De,B;default:if(typeof B=="object"&&B!==null)switch(B.$$typeof){case ms:tt=10;break e;case Rc:tt=9;break e;case jl:tt=11;break e;case pu:tt=14;break e;case Na:tt=16,fe=null;break e}tt=29,ee=Error(y(130,B===null?"null":typeof B,"")),fe=null}return $=u(tt,ee,$,Ae),$.elementType=B,$.type=fe,$.lanes=De,$}function ps(B,$,ee,fe){return B=u(7,B,fe,$),B.lanes=ee,B}function Qu(B,$,ee){return B=u(6,B,null,$),B.lanes=ee,B}function ed(B){var $=u(18,null,null,0);return $.stateNode=B,$}function nd(B,$,ee){return $=u(4,B.children!==null?B.children:[],B.key,$),$.lanes=ee,$.stateNode={containerInfo:B.containerInfo,pendingChildren:null,implementation:B.implementation},$}function hh(B,$,ee,fe,Ae,De,tt,kt,nn){this.tag=1,this.containerInfo=B,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=qa,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Z(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Z(0),this.hiddenUpdates=Z(null),this.identifierPrefix=fe,this.onUncaughtError=Ae,this.onCaughtError=De,this.onRecoverableError=tt,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=nn,this.incompleteTransitions=new Map}function Fo(B,$,ee,fe,Ae,De,tt,kt,nn,Sn,Dn,Cn){return B=new hh(B,$,ee,tt,nn,Sn,Dn,Cn,kt),$=1,De===!0&&($|=24),De=u(3,null,null,$),B.current=De,De.stateNode=B,$=We(),$.refCount++,B.pooledCache=$,$.refCount++,De.memoizedState={element:fe,isDehydrated:ee,cache:$},Xe(De),B}function uu(B){return B?(B=qs,B):qs}function Tc(B){var $=B._reactInternals;if($===void 0)throw typeof B.render=="function"?Error(y(188)):(B=Object.keys(B).join(","),Error(y(268,B)));return B=w($),B=B!==null?C(B):null,B===null?null:Hl(B.stateNode)}function rd(B,$,ee,fe,Ae,De){Ae=uu(Ae),fe.context===null?fe.context=Ae:fe.pendingContext=Ae,fe=xt($),fe.payload={element:ee},De=De===void 0?null:De,De!==null&&(fe.callback=De),ee=$t(B,fe,$),ee!==null&&(Pi(ee,B,$),en(ee,B,$))}function rl(B,$){if(B=B.memoizedState,B!==null&&B.dehydrated!==null){var ee=B.retryLane;B.retryLane=ee!==0&&ee<$?ee:$}}function Cc(B,$){rl(B,$),(B=B.alternate)&&rl(B,$)}var Fr={},du=React,Va=Tb,hu=Object.assign,il=Symbol.for("react.element"),Hs=Symbol.for("react.transitional.element"),sl=Symbol.for("react.portal"),ol=Symbol.for("react.fragment"),ll=Symbol.for("react.strict_mode"),cl=Symbol.for("react.profiler"),Rc=Symbol.for("react.consumer"),ms=Symbol.for("react.context"),jl=Symbol.for("react.forward_ref"),fu=Symbol.for("react.suspense"),mo=Symbol.for("react.suspense_list"),pu=Symbol.for("react.memo"),Na=Symbol.for("react.lazy"),Mc=Symbol.for("react.activity"),ad=Symbol.for("react.memo_cache_sentinel"),yo=Symbol.iterator,Bo=Symbol.for("react.client.reference"),Uo=Array.isArray,sr=du.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,sd=n.rendererVersion,kc=n.rendererPackageName,Vl=n.extraDevToolsConfig,Hl=n.getPublicInstance,fh=n.getRootHostContext,ql=n.getChildHostContext,mu=n.prepareForCommit,ph=n.resetAfterCommit,od=n.createInstance;n.cloneMutableInstance;var Ic=n.appendInitialChild,Ha=n.finalizeInitialChildren,Oa=n.shouldSetTextContent,vo=n.createTextInstance;n.cloneMutableTextInstance;var ld=n.scheduleTimeout,mh=n.cancelTimeout,qa=n.noTimeout,Wi=n.isPrimaryRenderer;n.warnsIfNotActing;var Jr=n.supportsMutation,ns=n.supportsPersistence,Ii=n.supportsHydration,kr=n.getInstanceFromNode;n.beforeActiveInstanceBlur;var _i=n.preparePortalMount;n.prepareScopeUpdate,n.getInstanceFromScope;var qr=n.setCurrentUpdatePriority,gs=n.getCurrentUpdatePriority,Wl=n.resolveUpdatePriority;n.trackSchedulerEvent,n.resolveEventType,n.resolveEventTimeStamp;var ul=n.shouldAttemptEagerTransition,gu=n.detachDeletedInstance;n.requestPostPaintCallback;var Nc=n.maySuspendCommit,Xl=n.maySuspendCommitOnUpdate,cd=n.maySuspendCommitInSyncRender,Fi=n.preloadInstance,ud=n.startSuspendingCommit,yu=n.suspendInstance;n.suspendOnActiveViewTransition;var gh=n.waitForCommitToBeReady;n.getSuspendedCommitReason;var dl=n.NotPendingTransition,hl=n.HostTransitionContext,dd=n.resetFormInstance;n.bindToConsole;var hd=n.supportsMicrotasks,pd=n.scheduleMicrotask,sa=n.supportsTestSelectors,Xi=n.findFiberRoot,vu=n.getBoundingRect,Oc=n.getTextContent,$o=n.isHiddenSubtree,md=n.matchAccessibilityRole,bo=n.setFocusIfFocusable,bu=n.setupIntersectionObserver,gd=n.appendChild,yd=n.appendChildToContainer,yh=n.commitTextUpdate,bh=n.commitMount,_h=n.commitUpdate,Sh=n.insertBefore,xh=n.insertInContainerBefore,Eh=n.removeChild,vd=n.removeChildFromContainer,bd=n.resetTextContent,Ef=n.hideInstance,Ah=n.hideTextInstance,wh=n.unhideInstance,Th=n.unhideTextInstance;n.cancelViewTransitionName,n.cancelRootViewTransitionName,n.restoreRootViewTransitionName,n.cloneRootViewTransitionContainer,n.removeRootViewTransitionClone,n.measureClonedInstance,n.hasInstanceChanged,n.hasInstanceAffectedParent,n.startViewTransition,n.startGestureTransition,n.stopViewTransition,n.getCurrentGestureOffset,n.createViewTransitionInstance;var _d=n.clearContainer;n.createFragmentInstance,n.updateFragmentInstanceFiber,n.commitNewChildToFragmentInstance,n.deleteChildFromFragmentInstance;var Ch=n.cloneInstance,Sd=n.createContainerChildSet,xd=n.appendChildToContainerChildSet,Rh=n.finalizeContainerChildren,Ed=n.replaceContainerChildren,Mh=n.cloneHiddenInstance,Ad=n.cloneHiddenTextInstance,zo=n.isSuspenseInstancePending,_u=n.isSuspenseInstanceFallback,Su=n.getSuspenseInstanceFallbackErrorDetails,xu=n.registerSuspenseInstanceRetry,kh=n.canHydrateFormStateMarker,wd=n.isFormStateMarkerMatching,Ih=n.getNextHydratableSibling,Nh=n.getNextHydratableSiblingAfterSingleton,Oh=n.getFirstHydratableChild,Dh=n.getFirstHydratableChildWithinContainer,Lh=n.getFirstHydratableChildWithinActivityInstance,Ph=n.getFirstHydratableChildWithinSuspenseInstance,Td=n.getFirstHydratableChildWithinSingleton,Fh=n.canHydrateInstance,Bh=n.canHydrateTextInstance,Cd=n.canHydrateActivityInstance,Uh=n.canHydrateSuspenseInstance,$h=n.hydrateInstance,Af=n.hydrateTextInstance,Rd=n.hydrateActivityInstance,zh=n.hydrateSuspenseInstance,Gh=n.getNextHydratableInstanceAfterActivityInstance,Md=n.getNextHydratableInstanceAfterSuspenseInstance,jh=n.commitHydratedInstance,Vh=n.commitHydratedContainer,wf=n.commitHydratedActivityInstance,Tf=n.commitHydratedSuspenseInstance,Hh=n.finalizeHydratedChildren,Dc=n.flushHydrationEvents;n.clearActivityBoundary;var kd=n.clearSuspenseBoundary;n.clearActivityBoundaryFromContainer;var Eu=n.clearSuspenseBoundaryFromContainer,qh=n.hideDehydratedBoundary,Wh=n.unhideDehydratedBoundary,Yl=n.shouldDeleteUnhydratedTailInstances;n.diffHydratedPropsForDevWarnings,n.diffHydratedTextForDevWarnings,n.describeHydratableInstanceForDevWarnings;var Xh=n.validateHydratableInstance,Id=n.validateHydratableTextInstance,ys=n.supportsResources,Au=n.isHostHoistableType,Lc=n.getHoistableRoot,Nd=n.getResource,Od=n.acquireResource,Go=n.releaseResource,Yh=n.hydrateHoistable,Dd=n.mountHoistable,Ld=n.unmountHoistable,wu=n.createHoistableInstance,Zh=n.prepareToCommitHoistables,Pd=n.mayResourceSuspendCommit,Fd=n.preloadResource,Kh=n.suspendResource,oa=n.supportsSingletons,Tu=n.resolveSingletonInstance,ra=n.acquireSingletonInstance,pa=n.releaseSingletonInstance,Bd=n.isHostSingletonType,pl=n.isSingletonScope,Cu=[],ml=-1,qs={},Wa=Math.clz32?Math.clz32:H,Ru=Math.log,Jh=Math.LN2,Mu=256,gl=262144,Zl=4194304,Pc=Va.unstable_scheduleCallback,ku=Va.unstable_cancelCallback,Qh=Va.unstable_shouldYield,Ud=Va.unstable_requestPaint,Ta=Va.unstable_now,Iu=Va.unstable_ImmediatePriority,ef=Va.unstable_UserBlockingPriority,Fc=Va.unstable_NormalPriority,Nu=Va.unstable_IdlePriority,$d=Va.log,tf=Va.unstable_setDisableYieldValue,yl=null,Xa=null,Yi=typeof Object.is=="function"?Object.is:Ie,Ou=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)},Cf=Object.prototype.hasOwnProperty,Du,Ws,Bc=!1,zd=new WeakMap,_o=[],Xs=0,Si=null,Uc=0,vs=[],rs=0,bs=null,ba=1,Rs="",ma=N(null),So=N(null),Sa=N(null),$c=N(null),la=null,Ni=null,Wr=!1,Ys=null,Da=!1,Lu=Error(y(519)),_s=N(null),wi=null,Ms=null,nf=typeof AbortController<"u"?AbortController:function(){var B=[],$=this.signal={aborted:!1,addEventListener:function(ee,fe){B.push(fe)}};this.abort=function(){$.aborted=!0,B.forEach(function(ee){return ee()})}},ga=Va.unstable_scheduleCallback,Rf=Va.unstable_NormalPriority,Oi={$$typeof:ms,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},zc=null,mi=null,Ca=!1,Ss=!1,Pu=!1,jo=0,Kl=null,Gd=0,xo=0,ca=null,xs=sr.S;sr.S=function(B,$){El=Ta(),typeof $=="object"&&$!==null&&typeof $.then=="function"&&Yt(B,$),xs!==null&&xs(B,$)};var Vo=N(null),ua=Error(y(460)),Fu=Error(y(474)),Es=Error(y(542)),Zs={then:function(){}},La=null,Ho=null,vl=0,xa=$r(!0),jd=$r(!1),Ea=[],Ks=0,bl=0,as=!1,Bu=!1,_l=N(null),qo=N(0),Ya=N(null),Za=null,ji=N(0),Eo=0,Ir=null,Jn=null,xr=null,Br=!1,Dr=!1,ei=!1,Ra=0,As=0,ks=null,Vd=0,ss={readContext:qe,use:Mr,useCallback:ln,useContext:ln,useEffect:ln,useImperativeHandle:ln,useLayoutEffect:ln,useInsertionEffect:ln,useMemo:ln,useReducer:ln,useRef:ln,useState:ln,useDebugValue:ln,useDeferredValue:ln,useTransition:ln,useSyncExternalStore:ln,useId:ln,useHostTransitionStatus:ln,useFormState:ln,useActionState:ln,useOptimistic:ln,useMemoCache:ln,useCacheRefresh:ln};ss.useEffectEvent=ln;var Bi={readContext:qe,use:Mr,useCallback:function(B,$){return Pn().memoizedState=[B,$===void 0?null:$],B},useContext:qe,useEffect:vi,useImperativeHandle:function(B,$,ee){ee=ee!=null?ee.concat([B]):null,ii(4194308,4,br.bind(null,$,B),ee)},useLayoutEffect:function(B,$){return ii(4194308,4,B,$)},useInsertionEffect:function(B,$){ii(4,2,B,$)},useMemo:function(B,$){var ee=Pn();$=$===void 0?null:$;var fe=B();if(ei){we(!0);try{B()}finally{we(!1)}}return ee.memoizedState=[fe,$],fe},useReducer:function(B,$,ee){var fe=Pn();if(ee!==void 0){var Ae=ee($);if(ei){we(!0);try{ee($)}finally{we(!1)}}}else Ae=$;return fe.memoizedState=fe.baseState=Ae,B={pending:null,lanes:0,dispatch:null,lastRenderedReducer:B,lastRenderedState:Ae},fe.queue=B,B=B.dispatch=ea.bind(null,Ir,B),[fe.memoizedState,B]},useRef:function(B){var $=Pn();return B={current:B},$.memoizedState=B},useState:function(B){B=Ve(B);var $=B.queue,ee=Ua.bind(null,Ir,$);return $.dispatch=ee,[B.memoizedState,ee]},useDebugValue:da,useDeferredValue:function(B,$){var ee=Pn();return Di(ee,B,$)},useTransition:function(){var B=Ve(!1);return B=Os.bind(null,Ir,B.queue,!0,!1),Pn().memoizedState=B,[!1,B]},useSyncExternalStore:function(B,$,ee){var fe=Ir,Ae=Pn();if(Wr){if(ee===void 0)throw Error(y(407));ee=ee()}else{if(ee=$(),Ur===null)throw Error(y(349));(Xr&127)!==0||pi(fe,$,ee)}Ae.memoizedState=ee;var De={value:ee,getSnapshot:$};return Ae.queue=De,vi(va.bind(null,fe,De,B),[B]),fe.flags|=2048,Kn(9,{destroy:void 0},xi.bind(null,fe,De,ee,$),null),ee},useId:function(){var B=Pn(),$=Ur.identifierPrefix;if(Wr){var ee=Rs,fe=ba;ee=(fe&~(1<<32-Wa(fe)-1)).toString(32)+ee,$="_"+$+"R_"+ee,ee=Ra++,0<ee&&($+="H"+ee.toString(32)),$+="_"}else ee=Vd++,$="_"+$+"r_"+ee.toString(32)+"_";return B.memoizedState=$},useHostTransitionStatus:ao,useFormState:Tr,useActionState:Tr,useOptimistic:function(B){var $=Pn();$.memoizedState=$.baseState=B;var ee={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return $.queue=ee,$=Tl.bind(null,Ir,!0,ee),ee.dispatch=$,[B,$]},useMemoCache:fi,useCacheRefresh:function(){return Pn().memoizedState=Aa.bind(null,Ir)},useEffectEvent:function(B){var $=Pn(),ee={impl:B};return $.memoizedState=ee,function(){if((jr&2)!==0)throw Error(y(440));return ee.impl.apply(void 0,arguments)}}},Js={readContext:qe,use:Mr,useCallback:Ja,useContext:qe,useEffect:Gr,useImperativeHandle:yr,useInsertionEffect:gr,useLayoutEffect:fr,useMemo:cs,useReducer:si,useRef:Er,useState:function(){return si(dr)},useDebugValue:da,useDeferredValue:function(B,$){var ee=fn();return Ns(ee,Jn.memoizedState,B,$)},useTransition:function(){var B=si(dr)[0],$=fn().memoizedState;return[typeof B=="boolean"?B:Rn(B),$]},useSyncExternalStore:ci,useId:so,useHostTransitionStatus:ao,useFormState:lr,useActionState:lr,useOptimistic:function(B,$){var ee=fn();return mt(ee,Jn,B,$)},useMemoCache:fi,useCacheRefresh:Qi};Js.useEffectEvent=Wn;var Wo={readContext:qe,use:Mr,useCallback:Ja,useContext:qe,useEffect:Gr,useImperativeHandle:yr,useInsertionEffect:gr,useLayoutEffect:fr,useMemo:cs,useReducer:li,useRef:Er,useState:function(){return li(dr)},useDebugValue:da,useDeferredValue:function(B,$){var ee=fn();return Jn===null?Di(ee,B,$):Ns(ee,Jn.memoizedState,B,$)},useTransition:function(){var B=li(dr)[0],$=fn().memoizedState;return[typeof B=="boolean"?B:Rn(B),$]},useSyncExternalStore:ci,useId:so,useHostTransitionStatus:ao,useFormState:Hn,useActionState:Hn,useOptimistic:function(B,$){var ee=fn();return Jn!==null?mt(ee,Jn,B,$):(ee.baseState=B,[B,ee.queue.dispatch])},useMemoCache:fi,useCacheRefresh:Qi};Wo.useEffectEvent=Wn;var Gc={enqueueSetState:function(B,$,ee){B=B._reactInternals;var fe=ki(),Ae=xt(fe);Ae.payload=$,ee!=null&&(Ae.callback=ee),$=$t(B,Ae,fe),$!==null&&(Pi($,B,fe),en($,B,fe))},enqueueReplaceState:function(B,$,ee){B=B._reactInternals;var fe=ki(),Ae=xt(fe);Ae.tag=1,Ae.payload=$,ee!=null&&(Ae.callback=ee),$=$t(B,Ae,fe),$!==null&&(Pi($,B,fe),en($,B,fe))},enqueueForceUpdate:function(B,$){B=B._reactInternals;var ee=ki(),fe=xt(ee);fe.tag=2,$!=null&&(fe.callback=$),$=$t(B,fe,ee),$!==null&&(Pi($,B,ee),en($,B,ee))}},Pa=Error(y(461)),Mi=!1,Sl={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null},Vi=!1,Hi=!1,Jl=!1,Hd=typeof WeakSet=="function"?WeakSet:Set,Zi=null,Ui=null,Ki=!1,gi=null,os=8192,Ql={getCacheForType:function(B){var $=qe(Oi),ee=$.data.get(B);return ee===void 0&&(ee=B(),$.data.set(B,ee)),ee},cacheSignal:function(){return qe(Oi).controller.signal}},ws=0,ec=1,tc=2,jc=3,Xo=4;if(typeof Symbol=="function"&&Symbol.for){var xl=Symbol.for;ws=xl("selector.component"),ec=xl("selector.has_pseudo_class"),tc=xl("selector.role"),jc=xl("selector.test_id"),Xo=xl("selector.text")}var ls=typeof WeakMap=="function"?WeakMap:Map,jr=0,Ur=null,Vr=null,Xr=0,yi=0,ia=null,Is=!1,Yo=!1,Zo=!1,Qs=0,$i=0,Ao=0,Ko=0,nc=0,Fa=0,rc=0,Vc=null,Ka=null,Uu=!1,Hc=0,El=0,Jo=1/0,qc=null,wo=null,aa=0,To=null,Al=null,eo=0,ic=0,$u=null,qd=null,ai=0,Wc=null;return Fr.attemptContinuousHydration=function(B){if(B.tag===13||B.tag===31){var $=zn(B,67108864);$!==null&&Pi($,B,67108864),Cc(B,67108864)}},Fr.attemptHydrationAtCurrentPriority=function(B){if(B.tag===13||B.tag===31){var $=ki();$=ge($);var ee=zn(B,$);ee!==null&&Pi(ee,B,$),Cc(B,$)}},Fr.attemptSynchronousHydration=function(B){switch(B.tag){case 3:if(B=B.stateNode,B.current.memoizedState.isDehydrated){var $=z(B.pendingLanes);if($!==0){for(B.pendingLanes|=2,B.entangledLanes|=2;$;){var ee=1<<31-Wa($);B.entanglements[1]|=ee,$&=~ee}St(B),(jr&6)===0&&(Jo=Ta()+500,Ct(0))}}break;case 31:case 13:$=zn(B,2),$!==null&&Pi($,B,2),iu(),Cc(B,2)}},Fr.batchedUpdates=function(B,$){return B($)},Fr.createComponentSelector=function(B){return{$$typeof:ws,value:B}},Fr.createContainer=function(B,$,ee,fe,Ae,De,tt,kt,nn,Sn){return Fo(B,$,!1,null,ee,fe,De,null,tt,kt,nn,Sn)},Fr.createHasPseudoClassSelector=function(B){return{$$typeof:ec,value:B}},Fr.createHydrationContainer=function(B,$,ee,fe,Ae,De,tt,kt,nn,Sn,Dn,Cn,jn,Rr){var Ji;return B=Fo(ee,fe,!0,B,Ae,De,kt,Rr,nn,Sn,Dn,Cn),B.context=uu(null),ee=B.current,fe=ki(),fe=ge(fe),Ae=xt(fe),Ae.callback=(Ji=$)!=null?Ji:null,$t(ee,Ae,fe),$=fe,B.current.lanes=$,J(B,$),St(B),B},Fr.createPortal=function(B,$,ee){var fe=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:sl,key:fe==null?null:""+fe,children:B,containerInfo:$,implementation:ee}},Fr.createRoleSelector=function(B){return{$$typeof:tc,value:B}},Fr.createTestNameSelector=function(B){return{$$typeof:jc,value:B}},Fr.createTextSelector=function(B){return{$$typeof:Xo,value:B}},Fr.defaultOnCaughtError=function(B){console.error(B)},Fr.defaultOnRecoverableError=function(B){Ou(B)},Fr.defaultOnUncaughtError=function(B){Ou(B)},Fr.deferredUpdates=function(B){var $=sr.T,ee=gs();try{return qr(32),sr.T=null,B()}finally{qr(ee),sr.T=$}},Fr.discreteUpdates=function(B,$,ee,fe,Ae){var De=sr.T,tt=gs();try{return qr(2),sr.T=null,B($,ee,fe,Ae)}finally{qr(tt),sr.T=De,jr===0&&(Jo=Ta()+500)}},Fr.findAllNodes=ja,Fr.findBoundingRects=function(B,$){if(!sa)throw Error(y(363));$=ja(B,$),B=[];for(var ee=0;ee<$.length;ee++)B.push(vu($[ee]));for($=B.length-1;0<$;$--){ee=B[$];for(var fe=ee.x,Ae=fe+ee.width,De=ee.y,tt=De+ee.height,kt=$-1;0<=kt;kt--)if($!==kt){var nn=B[kt],Sn=nn.x,Dn=Sn+nn.width,Cn=nn.y,jn=Cn+nn.height;if(fe>=Sn&&De>=Cn&&Ae<=Dn&&tt<=jn){B.splice($,1);break}else if(fe!==Sn||ee.width!==nn.width||jn<De||Cn>tt){if(!(De!==Cn||ee.height!==nn.height||Dn<fe||Sn>Ae)){Sn>fe&&(nn.width+=Sn-fe,nn.x=fe),Dn<Ae&&(nn.width=Ae-Sn),B.splice($,1);break}}else{Cn>De&&(nn.height+=Cn-De,nn.y=De),jn<tt&&(nn.height=tt-Cn),B.splice($,1);break}}}return B},Fr.findHostInstance=Tc,Fr.findHostInstanceWithNoPortals=function(B){return B=w(B),B=B!==null?T(B):null,B===null?null:Hl(B.stateNode)},Fr.findHostInstanceWithWarning=function(B){return Tc(B)},Fr.flushPassiveEffects=Vs,Fr.flushSyncFromReconciler=function(B){var $=jr;jr|=1;var ee=sr.T,fe=gs();try{if(qr(2),sr.T=null,B)return B()}finally{qr(fe),sr.T=ee,jr=$,(jr&6)===0&&Ct(0)}},Fr.flushSyncWork=iu,Fr.focusWithin=function(B,$){if(!sa)throw Error(y(363));for(B=No(B),$=Bl(B,$),$=Array.from($),B=0;B<$.length;){var ee=$[B++],fe=ee.tag;if(!$o(ee)){if((fe===5||fe===26||fe===27)&&bo(ee.stateNode))return!0;for(ee=ee.child;ee!==null;)$.push(ee),ee=ee.sibling}}return!1},Fr.getFindAllNodesFailureDescription=function(B,$){if(!sa)throw Error(y(363));var ee=0,fe=[];B=[No(B),0];for(var Ae=0;Ae<B.length;){var De=B[Ae++],tt=De.tag,kt=B[Ae++],nn=$[kt];if((tt!==5&&tt!==26&&tt!==27||!$o(De))&&(Oo(De,nn)&&(fe.push(Fl(nn)),kt++,kt>ee&&(ee=kt)),kt<$.length))for(De=De.child;De!==null;)B.push(De,kt),De=De.sibling}if(ee<$.length){for(B=[];ee<$.length;ee++)B.push(Fl($[ee]));return`findAllNodes was able to match part of the selector:
  `+(fe.join(" > ")+`

No matching component was found for:
  `)+B.join(" > ")}return null},Fr.getPublicRootInstance=function(B){if(B=B.current,!B.child)return null;switch(B.child.tag){case 27:case 5:return Hl(B.child.stateNode);default:return B.child.stateNode}},Fr.injectIntoDevTools=function(){var B={bundleType:0,version:sd,rendererPackageName:kc,currentDispatcherRef:sr,reconcilerVersion:"19.2.0"};if(Vl!==null&&(B.rendererConfig=Vl),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")B=!1;else{var $=__REACT_DEVTOOLS_GLOBAL_HOOK__;if($.isDisabled||!$.supportsFiber)B=!0;else{try{yl=$.inject(B),Xa=$}catch{}B=!!$.checkDCE}}return B},Fr.isAlreadyRendering=function(){return(jr&6)!==0},Fr.observeVisibleRects=function(B,$,ee,fe){if(!sa)throw Error(y(363));B=ja(B,$);var Ae=bu(B,ee,fe).disconnect;return{disconnect:function(){Ae()}}},Fr.shouldError=function(){return null},Fr.shouldSuspend=function(){return!1},Fr.startHostTransition=function(B,$,ee,fe){if(B.tag!==5)throw Error(y(476));var Ae=ro(B).queue;Os(B,Ae,$,dl,ee===null?f:function(){var De=ro(B);return De.next===null&&(De=B.alternate.memoizedState),Ds(B,De.next.queue,{},ki()),ee(fe)})},Fr.updateContainer=function(B,$,ee,fe){var Ae=$.current,De=ki();return rd(Ae,De,B,$,ee,fe),De},Fr.updateContainerSync=function(B,$,ee,fe){return rd($.current,2,B,$,ee,fe),2},Fr},s.exports.default=s.exports,Object.defineProperty(s.exports,"__esModule",{value:!0})})(Og)),Og.exports}var Eb;function n0(){return Eb||(Eb=1,Rm.exports=Kb()),Rm.exports}var t0=n0();const r0=Xb(t0);function createReconciler(s){const n=r0(s);return n.injectIntoDevTools(),n}const NoEventPriority=0,catalogue={},PREFIX_REGEX=/^three(?=[A-Z])/,toPascalCase=s=>`${s[0].toUpperCase()}${s.slice(1)}`;let i$1=0;const isConstructor=s=>typeof s=="function";function extend(s){if(isConstructor(s)){const n=`${i$1++}`;return catalogue[n]=s,n}else Object.assign(catalogue,s)}function validateInstance(s,n){const u=toPascalCase(s),f=catalogue[u];if(s!=="primitive"&&!f)throw new Error(`R3F: ${u} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(s==="primitive"&&!n.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(n.args!==void 0&&!Array.isArray(n.args))throw new Error("R3F: The args prop must be an array!")}function createInstance(s,n,u){var f;return s=toPascalCase(s)in catalogue?s:s.replace(PREFIX_REGEX,""),validateInstance(s,n),s==="primitive"&&(f=n.object)!=null&&f.__r3f&&delete n.object.__r3f,prepare(n.object,u,s,n)}function hideInstance(s){if(!s.isHidden){var n;s.props.attach&&(n=s.parent)!=null&&n.object?detach(s.parent,s):isObject3D(s.object)&&(s.object.visible=!1),s.isHidden=!0,invalidateInstance(s)}}function unhideInstance(s){if(s.isHidden){var n;s.props.attach&&(n=s.parent)!=null&&n.object?attach(s.parent,s):isObject3D(s.object)&&s.props.visible!==!1&&(s.object.visible=!0),s.isHidden=!1,invalidateInstance(s)}}function handleContainerEffects(s,n,u){const f=n.root.getState();if(!(!s.parent&&s.object!==f.scene)){if(!n.object){var y,S;const A=catalogue[toPascalCase(n.type)];n.object=(y=n.props.object)!=null?y:new A(...(S=n.props.args)!=null?S:[]),n.object.__r3f=n}if(applyProps(n.object,n.props),n.props.attach)attach(s,n);else if(isObject3D(n.object)&&isObject3D(s.object)){const A=s.object.children.indexOf(u?.object);if(u&&A!==-1){const w=s.object.children.indexOf(n.object);if(w!==-1){s.object.children.splice(w,1);const C=w<A?A-1:A;s.object.children.splice(C,0,n.object)}else n.object.parent=s.object,s.object.children.splice(A,0,n.object),n.object.dispatchEvent({type:"added"}),s.object.dispatchEvent({type:"childadded",child:n.object})}else s.object.add(n.object)}for(const A of n.children)handleContainerEffects(n,A);invalidateInstance(n)}}function appendChild(s,n){n&&(n.parent=s,s.children.push(n),handleContainerEffects(s,n))}function insertBefore(s,n,u){if(!n||!u)return;n.parent=s;const f=s.children.indexOf(u);f!==-1?s.children.splice(f,0,n):s.children.push(n),handleContainerEffects(s,n,u)}function disposeOnIdle(s){if(typeof s.dispose=="function"){const n=()=>{try{s.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?n():schedulerExports.unstable_scheduleCallback(schedulerExports.unstable_IdlePriority,n)}}function removeChild(s,n,u){if(!n)return;n.parent=null;const f=s.children.indexOf(n);f!==-1&&s.children.splice(f,1),n.props.attach?detach(s,n):isObject3D(n.object)&&isObject3D(s.object)&&(s.object.remove(n.object),removeInteractivity(findInitialRoot(n),n.object));const y=n.props.dispose!==null&&u!==!1;for(let S=n.children.length-1;S>=0;S--){const A=n.children[S];removeChild(n,A,y)}n.children.length=0,delete n.object.__r3f,y&&n.type!=="primitive"&&n.object.type!=="Scene"&&disposeOnIdle(n.object),u===void 0&&invalidateInstance(n)}function setFiberRef(s,n){for(const u of[s,s.alternate])if(u!==null)if(typeof u.ref=="function"){u.refCleanup==null||u.refCleanup();const f=u.ref(n);typeof f=="function"&&(u.refCleanup=f)}else u.ref&&(u.ref.current=n)}const reconstructed=[];function swapInstances(){for(const[u]of reconstructed){const f=u.parent;if(f){u.props.attach?detach(f,u):isObject3D(u.object)&&isObject3D(f.object)&&f.object.remove(u.object);for(const y of u.children)y.props.attach?detach(u,y):isObject3D(y.object)&&isObject3D(u.object)&&u.object.remove(y.object)}u.isHidden&&unhideInstance(u),u.object.__r3f&&delete u.object.__r3f,u.type!=="primitive"&&disposeOnIdle(u.object)}for(const[u,f,y]of reconstructed){u.props=f;const S=u.parent;if(S){var s,n;const A=catalogue[toPascalCase(u.type)];u.object=(s=u.props.object)!=null?s:new A(...(n=u.props.args)!=null?n:[]),u.object.__r3f=u,setFiberRef(y,u.object),applyProps(u.object,u.props),u.props.attach?attach(S,u):isObject3D(u.object)&&isObject3D(S.object)&&S.object.add(u.object);for(const w of u.children)w.props.attach?attach(u,w):isObject3D(w.object)&&isObject3D(u.object)&&u.object.add(w.object);invalidateInstance(u)}}reconstructed.length=0}const handleTextInstance=()=>{},NO_CONTEXT={};let currentUpdatePriority=NoEventPriority;const NoFlags=0,Update=4,reconciler=createReconciler({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance,removeChild,appendChild,appendInitialChild:appendChild,insertBefore,appendChildToContainer(s,n){const u=s.getState().scene.__r3f;!n||!u||appendChild(u,n)},removeChildFromContainer(s,n){const u=s.getState().scene.__r3f;!n||!u||removeChild(u,n)},insertInContainerBefore(s,n,u){const f=s.getState().scene.__r3f;!n||!u||!f||insertBefore(f,n,u)},getRootHostContext:()=>NO_CONTEXT,getChildHostContext:()=>NO_CONTEXT,commitUpdate(s,n,u,f,y){var S,A,w;validateInstance(n,f);let C=!1;if((s.type==="primitive"&&u.object!==f.object||((S=f.args)==null?void 0:S.length)!==((A=u.args)==null?void 0:A.length)||(w=f.args)!=null&&w.some((R,I)=>{var N;return R!==((N=u.args)==null?void 0:N[I])}))&&(C=!0),C)reconstructed.push([s,{...f},y]);else{const R=diffProps(s,f);Object.keys(R).length&&(Object.assign(s.props,R),applyProps(s.object,R))}(y.sibling===null||(y.flags&Update)===NoFlags)&&swapInstances()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:s=>s?.object,prepareForCommit:()=>null,preparePortalMount:s=>prepare(s.getState().scene,s,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance,unhideInstance,createTextInstance:handleTextInstance,hideTextInstance:handleTextInstance,unhideTextInstance:handleTextInstance,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:reactExports.createContext(null),setCurrentUpdatePriority(s){currentUpdatePriority=s},getCurrentUpdatePriority(){return currentUpdatePriority},resolveUpdatePriority(){var s;if(currentUpdatePriority!==NoEventPriority)return currentUpdatePriority;switch(typeof window<"u"&&((s=window.event)==null?void 0:s.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return e;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return o;default:return r}},resetFormInstance(){},rendererPackageName:"@react-three/fiber",rendererVersion:packageData.version,applyViewTransitionName(s,n,u){},restoreViewTransitionName(s,n){},cancelViewTransitionName(s,n,u){},cancelRootViewTransitionName(s){},restoreRootViewTransitionName(s){},InstanceMeasurement:null,measureInstance:s=>null,wasInstanceInViewport:s=>!0,hasInstanceChanged:(s,n)=>!1,hasInstanceAffectedParent:(s,n)=>!1,suspendOnActiveViewTransition(s,n){},startGestureTransition:()=>null,startViewTransition:()=>null,stopViewTransition(s){},createViewTransitionInstance:s=>null,getCurrentGestureOffset(s){throw new Error("startGestureTransition is not yet supported in react-three-fiber.")},cloneMutableInstance(s,n){return s},cloneMutableTextInstance(s){return s},cloneRootViewTransitionContainer(s){throw new Error("Not implemented.")},removeRootViewTransitionClone(s,n){throw new Error("Not implemented.")},createFragmentInstance:s=>null,updateFragmentInstanceFiber(s,n){},commitNewChildToFragmentInstance(s,n){},deleteChildFromFragmentInstance(s,n){},measureClonedInstance:s=>null,maySuspendCommitOnUpdate:(s,n,u)=>!1,maySuspendCommitInSyncRender:(s,n)=>!1,startSuspendingCommit:()=>null,getSuspendedCommitReason:(s,n)=>null}),_roots=new Map,shallowLoose={objects:"shallow",strict:!1};function computeInitialSize(s,n){if(!n&&typeof HTMLCanvasElement<"u"&&s instanceof HTMLCanvasElement&&s.parentElement){const{width:u,height:f,top:y,left:S}=s.parentElement.getBoundingClientRect();return{width:u,height:f,top:y,left:S}}else if(!n&&typeof OffscreenCanvas<"u"&&s instanceof OffscreenCanvas)return{width:s.width,height:s.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...n}}function createRoot(s){const n=_roots.get(s),u=n?.fiber,f=n?.store;n&&console.warn("R3F.createRoot should only be called once!");const y=typeof reportError=="function"?reportError:console.error,S=f||createStore(invalidate,advance),A=u||reconciler.createContainer(S,t,null,!1,null,"",y,y,y,null);n||_roots.set(s,{fiber:A,store:S});let w,C,T=!1,R=null;return{async configure(I={}){let N;R=new Promise(ae=>N=ae);let{gl:L,size:F,scene:H,events:z,onCreated:U,shadows:G=!1,linear:Y=!1,flat:K=!1,legacy:Z=!1,orthographic:J=!1,frameloop:te="always",dpr:de=[1,2],performance:se,raycaster:ne,camera:ge,onPointerMissed:Ee}=I,we=S.getState(),Ie=we.gl;if(!we.gl){const ae={canvas:s,powerPreference:"high-performance",antialias:!0,alpha:!0},be=typeof L=="function"?await L(ae):L;isRenderer(be)?Ie=be:Ie=new WebGLRenderer({...ae,...L}),we.set({gl:Ie})}let Be=we.raycaster;Be||we.set({raycaster:Be=new Raycaster});const{params:Me,...Re}=ne||{};if(is.equ(Re,Be,shallowLoose)||applyProps(Be,{...Re}),is.equ(Me,Be.params,shallowLoose)||applyProps(Be,{params:{...Be.params,...Me}}),!we.camera||we.camera===C&&!is.equ(C,ge,shallowLoose)){C=ge;const ae=ge?.isCamera,be=ae?ge:J?new OrthographicCamera(0,0,0,0,.1,1e3):new PerspectiveCamera(75,0,.1,1e3);ae||(be.position.z=5,ge&&(applyProps(be,ge),be.manual||("aspect"in ge||"left"in ge||"right"in ge||"bottom"in ge||"top"in ge)&&(be.manual=!0,be.updateProjectionMatrix())),!we.camera&&!(ge!=null&&ge.rotation)&&be.lookAt(0,0,0)),we.set({camera:be}),Be.camera=be}if(!we.scene){let ae;H!=null&&H.isScene?(ae=H,prepare(ae,S,"",{})):(ae=new Scene$1,prepare(ae,S,"",{}),H&&applyProps(ae,H)),we.set({scene:ae})}z&&!we.events.handlers&&we.set({events:z(S)});const Te=computeInitialSize(s,F);if(is.equ(Te,we.size,shallowLoose)||we.setSize(Te.width,Te.height,Te.top,Te.left),de&&we.viewport.dpr!==calculateDpr(de)&&we.setDpr(de),we.frameloop!==te&&we.setFrameloop(te),we.onPointerMissed||we.set({onPointerMissed:Ee}),se&&!is.equ(se,we.performance,shallowLoose)&&we.set(ae=>({performance:{...ae.performance,...se}})),!we.xr){var Se;const ae=(ue,ye)=>{const ce=S.getState();ce.frameloop!=="never"&&advance(ue,!0,ce,ye)},be=()=>{const ue=S.getState();ue.gl.xr.enabled=ue.gl.xr.isPresenting,ue.gl.xr.setAnimationLoop(ue.gl.xr.isPresenting?ae:null),ue.gl.xr.isPresenting||invalidate(ue)},he={connect(){const ue=S.getState().gl;ue.xr.addEventListener("sessionstart",be),ue.xr.addEventListener("sessionend",be)},disconnect(){const ue=S.getState().gl;ue.xr.removeEventListener("sessionstart",be),ue.xr.removeEventListener("sessionend",be)}};typeof((Se=Ie.xr)==null?void 0:Se.addEventListener)=="function"&&he.connect(),we.set({xr:he})}if(Ie.shadowMap){const ae=Ie.shadowMap.enabled,be=Ie.shadowMap.type;if(Ie.shadowMap.enabled=!!G,is.boo(G))Ie.shadowMap.type=PCFSoftShadowMap;else if(is.str(G)){var oe;const he={basic:BasicShadowMap,percentage:PCFShadowMap,soft:PCFSoftShadowMap,variance:VSMShadowMap};Ie.shadowMap.type=(oe=he[G])!=null?oe:PCFSoftShadowMap}else is.obj(G)&&Object.assign(Ie.shadowMap,G);(ae!==Ie.shadowMap.enabled||be!==Ie.shadowMap.type)&&(Ie.shadowMap.needsUpdate=!0)}return ColorManagement.enabled=!Z,T||(Ie.outputColorSpace=Y?LinearSRGBColorSpace$1:SRGBColorSpace$1,Ie.toneMapping=K?NoToneMapping:ACESFilmicToneMapping),we.legacy!==Z&&we.set(()=>({legacy:Z})),we.linear!==Y&&we.set(()=>({linear:Y})),we.flat!==K&&we.set(()=>({flat:K})),L&&!is.fun(L)&&!isRenderer(L)&&!is.equ(L,Ie,shallowLoose)&&applyProps(Ie,L),w=U,T=!0,N(),this},render(I){return!T&&!R&&this.configure(),R.then(()=>{reconciler.updateContainer(jsxRuntimeExports.jsx(Provider,{store:S,children:I,onCreated:w,rootElement:s}),A,null,()=>{})}),S},unmount(){unmountComponentAtNode(s)}}}function Provider({store:s,children:n,onCreated:u,rootElement:f}){return useIsomorphicLayoutEffect(()=>{const y=s.getState();y.set(S=>({internal:{...S.internal,active:!0}})),u&&u(y),s.getState().events.connected||y.events.connect==null||y.events.connect(f)},[]),jsxRuntimeExports.jsx(context.Provider,{value:s,children:n})}function unmountComponentAtNode(s,n){const u=_roots.get(s),f=u?.fiber;if(f){const y=u?.store.getState();y&&(y.internal.active=!1),reconciler.updateContainer(null,f,null,()=>{y&&setTimeout(()=>{try{var S,A,w,C;y.events.disconnect==null||y.events.disconnect(),(S=y.gl)==null||(A=S.renderLists)==null||A.dispose==null||A.dispose(),(w=y.gl)==null||w.forceContextLoss==null||w.forceContextLoss(),(C=y.gl)!=null&&C.xr&&y.xr.disconnect(),dispose(y.scene),_roots.delete(s)}catch{}},500)})}}function createPortal(s,n,u){return jsxRuntimeExports.jsx(Portal,{children:s,container:n,state:u})}function Portal({state:s={},children:n,container:u}){const{events:f,size:y,...S}=s,A=useStore(),[w]=reactExports.useState(()=>new Raycaster),[C]=reactExports.useState(()=>new Vector2),T=useMutableCallback((I,N)=>{let L;if(N.camera&&y){const F=N.camera;L=I.viewport.getCurrentViewport(F,new Vector3,y),F!==I.camera&&updateCamera(F,y)}return{...I,...N,scene:u,raycaster:w,pointer:C,mouse:C,previousRoot:A,events:{...I.events,...N.events,...f},size:{...I.size,...y},viewport:{...I.viewport,...L},setEvents:F=>N.set(H=>({...H,events:{...H.events,...F}}))}}),R=reactExports.useMemo(()=>{const I=createWithEqualityFn((L,F)=>({...S,set:L,get:F})),N=L=>I.setState(F=>T.current(L,F));return N(A.getState()),A.subscribe(N),I},[A,u]);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:reconciler.createPortal(jsxRuntimeExports.jsx(context.Provider,{value:R,children:n}),R,null)})}const globalEffects=new Set,globalAfterEffects=new Set,globalTailEffects=new Set;function run(s,n){if(s.size)for(const{callback:u}of s.values())u(n)}function flushGlobalEffects(s,n){switch(s){case"before":return run(globalEffects,n);case"after":return run(globalAfterEffects,n);case"tail":return run(globalTailEffects,n)}}let subscribers,subscription;function update(s,n,u){let f=n.clock.getDelta();n.frameloop==="never"&&typeof s=="number"&&(f=s-n.clock.elapsedTime,n.clock.oldTime=n.clock.elapsedTime,n.clock.elapsedTime=s),subscribers=n.internal.subscribers;for(let y=0;y<subscribers.length;y++)subscription=subscribers[y],subscription.ref.current(subscription.store.getState(),f,u);return!n.internal.priority&&n.gl.render&&n.gl.render(n.scene,n.camera),n.internal.frames=Math.max(0,n.internal.frames-1),n.frameloop==="always"?1:n.internal.frames}let running=!1,useFrameInProgress=!1,repeat,frame,state;function loop(s){frame=requestAnimationFrame(loop),running=!0,repeat=0,flushGlobalEffects("before",s),useFrameInProgress=!0;for(const u of _roots.values()){var n;state=u.store.getState(),state.internal.active&&(state.frameloop==="always"||state.internal.frames>0)&&!((n=state.gl.xr)!=null&&n.isPresenting)&&(repeat+=update(s,state))}if(useFrameInProgress=!1,flushGlobalEffects("after",s),repeat===0)return flushGlobalEffects("tail",s),running=!1,cancelAnimationFrame(frame)}function invalidate(s,n=1){var u;if(!s)return _roots.forEach(f=>invalidate(f.store.getState(),n));(u=s.gl.xr)!=null&&u.isPresenting||!s.internal.active||s.frameloop==="never"||(n>1?s.internal.frames=Math.min(60,s.internal.frames+n):useFrameInProgress?s.internal.frames=2:s.internal.frames=1,running||(running=!0,requestAnimationFrame(loop)))}function advance(s,n=!0,u,f){if(n&&flushGlobalEffects("before",s),u)update(s,u,f);else for(const y of _roots.values())update(s,y.store.getState());n&&flushGlobalEffects("after",s)}const DOM_EVENTS={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function createPointerEvents(s){const{handlePointer:n}=createEvents(s);return{priority:1,enabled:!0,compute(u,f,y){f.pointer.set(u.offsetX/f.size.width*2-1,-(u.offsetY/f.size.height)*2+1),f.raycaster.setFromCamera(f.pointer,f.camera)},connected:void 0,handlers:Object.keys(DOM_EVENTS).reduce((u,f)=>({...u,[f]:n(f)}),{}),update:()=>{var u;const{events:f,internal:y}=s.getState();(u=y.lastEvent)!=null&&u.current&&f.handlers&&f.handlers.onPointerMove(y.lastEvent.current)},connect:u=>{const{set:f,events:y}=s.getState();if(y.disconnect==null||y.disconnect(),f(S=>({events:{...S.events,connected:u}})),y.handlers)for(const S in y.handlers){const A=y.handlers[S],[w,C]=DOM_EVENTS[S];u.addEventListener(w,A,{passive:C})}},disconnect:()=>{const{set:u,events:f}=s.getState();if(f.connected){if(f.handlers)for(const y in f.handlers){const S=f.handlers[y],[A]=DOM_EVENTS[y];f.connected.removeEventListener(A,S)}u(y=>({events:{...y.events,connected:void 0}}))}}}}function g(s,n){let u;return(...f)=>{window.clearTimeout(u),u=window.setTimeout(()=>s(...f),n)}}function j({debounce:s,scroll:n,polyfill:u,offsetSize:f}={debounce:0,scroll:!1,offsetSize:!1}){const y=u||(typeof window>"u"?class{}:window.ResizeObserver);if(!y)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[S,A]=reactExports.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),w=reactExports.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:S,orientationHandler:null}),C=s?typeof s=="number"?s:s.scroll:null,T=s?typeof s=="number"?s:s.resize:null,R=reactExports.useRef(!1);reactExports.useEffect(()=>(R.current=!0,()=>{R.current=!1}));const[I,N,L]=reactExports.useMemo(()=>{const U=()=>{if(!w.current.element)return;const{left:G,top:Y,width:K,height:Z,bottom:J,right:te,x:de,y:se}=w.current.element.getBoundingClientRect(),ne={left:G,top:Y,width:K,height:Z,bottom:J,right:te,x:de,y:se};w.current.element instanceof HTMLElement&&f&&(ne.height=w.current.element.offsetHeight,ne.width=w.current.element.offsetWidth),Object.freeze(ne),R.current&&!D$1(w.current.lastBounds,ne)&&A(w.current.lastBounds=ne)};return[U,T?g(U,T):U,C?g(U,C):U]},[A,f,C,T]);function F(){w.current.scrollContainers&&(w.current.scrollContainers.forEach(U=>U.removeEventListener("scroll",L,!0)),w.current.scrollContainers=null),w.current.resizeObserver&&(w.current.resizeObserver.disconnect(),w.current.resizeObserver=null),w.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",w.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",w.current.orientationHandler))}function H(){w.current.element&&(w.current.resizeObserver=new y(L),w.current.resizeObserver.observe(w.current.element),n&&w.current.scrollContainers&&w.current.scrollContainers.forEach(U=>U.addEventListener("scroll",L,{capture:!0,passive:!0})),w.current.orientationHandler=()=>{L()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",w.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",w.current.orientationHandler))}const z=U=>{!U||U===w.current.element||(F(),w.current.element=U,w.current.scrollContainers=E(U),H())};return X(L,!!n),W(N),reactExports.useEffect(()=>{F(),H()},[n,L,N]),reactExports.useEffect(()=>F,[]),[z,S,I]}function W(s){reactExports.useEffect(()=>{const n=s;return window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n)}},[s])}function X(s,n){reactExports.useEffect(()=>{if(n){const u=s;return window.addEventListener("scroll",u,{capture:!0,passive:!0}),()=>{window.removeEventListener("scroll",u,!0)}}},[s,n])}function E(s){const n=[];if(!s||s===document.body)return n;const{overflow:u,overflowX:f,overflowY:y}=window.getComputedStyle(s);return[u,f,y].some(S=>S==="auto"||S==="scroll")&&n.push(s),[...n,...E(s.parentElement)]}const k=["x","y","top","bottom","left","right","width","height"],D$1=(s,n)=>k.every(u=>s[u]===n[u]);function CanvasImpl({ref:s,children:n,fallback:u,resize:f,style:y,gl:S,events:A=createPointerEvents,eventSource:w,eventPrefix:C,shadows:T,linear:R,flat:I,legacy:N,orthographic:L,frameloop:F,dpr:H,performance:z,raycaster:U,camera:G,scene:Y,onPointerMissed:K,onCreated:Z,...J}){reactExports.useMemo(()=>extend(THREE),[]);const te=useBridge(),[de,se]=j({scroll:!0,debounce:{scroll:50,resize:0},...f}),ne=reactExports.useRef(null),ge=reactExports.useRef(null);reactExports.useImperativeHandle(s,()=>ne.current);const Ee=useMutableCallback(K),[we,Ie]=reactExports.useState(!1),[Be,Me]=reactExports.useState(!1);if(we)throw we;if(Be)throw Be;const Re=reactExports.useRef(null);useIsomorphicLayoutEffect(()=>{const Se=ne.current;if(se.width>0&&se.height>0&&Se){Re.current||(Re.current=createRoot(Se));async function oe(){await Re.current.configure({gl:S,scene:Y,events:A,shadows:T,linear:R,flat:I,legacy:N,orthographic:L,frameloop:F,dpr:H,performance:z,raycaster:U,camera:G,size:se,onPointerMissed:(...ae)=>Ee.current==null?void 0:Ee.current(...ae),onCreated:ae=>{ae.events.connect==null||ae.events.connect(w?isRef$1(w)?w.current:w:ge.current),C&&ae.setEvents({compute:(be,he)=>{const ue=be[C+"X"],ye=be[C+"Y"];he.pointer.set(ue/he.size.width*2-1,-(ye/he.size.height)*2+1),he.raycaster.setFromCamera(he.pointer,he.camera)}}),Z?.(ae)}}),Re.current.render(jsxRuntimeExports.jsx(te,{children:jsxRuntimeExports.jsx(ErrorBoundary,{set:Me,children:jsxRuntimeExports.jsx(reactExports.Suspense,{fallback:jsxRuntimeExports.jsx(Block,{set:Ie}),children:n??null})})}))}oe()}}),reactExports.useEffect(()=>{const Se=ne.current;if(Se)return()=>unmountComponentAtNode(Se)},[]);const Te=w?"none":"auto";return jsxRuntimeExports.jsx("div",{ref:ge,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:Te,...y},...J,children:jsxRuntimeExports.jsx("div",{ref:de,style:{width:"100%",height:"100%"},children:jsxRuntimeExports.jsx("canvas",{ref:ne,style:{display:"block"},children:u})})})}function Canvas(s){return jsxRuntimeExports.jsx(m,{children:jsxRuntimeExports.jsx(CanvasImpl,{...s})})}var MILLISECONDS_TO_SECONDS=1/1e3,SECONDS_TO_MILLISECONDS=1e3,Timer=class{constructor(){this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(s){typeof document<"u"&&document.hidden!==void 0&&(s?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=s)}get delta(){return this._delta*MILLISECONDS_TO_SECONDS}get fixedDelta(){return this._fixedDelta*MILLISECONDS_TO_SECONDS}set fixedDelta(s){this._fixedDelta=s*SECONDS_TO_MILLISECONDS}get elapsed(){return this._elapsed*MILLISECONDS_TO_SECONDS}update(s){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(s!==void 0?s:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}getDelta(){return this.delta}getElapsed(){return this.elapsed}handleEvent(s){document.hidden||(this.currentTime=performance.now()-this.startTime)}dispose(){this.autoReset=!1}},fullscreenGeometry=(()=>{const s=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),n=new Float32Array([0,0,2,0,0,2]),u=new BufferGeometry;return u.setAttribute("position",new BufferAttribute(s,3)),u.setAttribute("uv",new BufferAttribute(n,2)),u})(),Pass=class Kf{static get fullscreenGeometry(){return fullscreenGeometry}constructor(n="Pass",u=new Scene$1,f=new OrthographicCamera){this.name=n,this.renderer=null,this.scene=u,this.camera=f,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(n){if(this.rtt===n){const u=this.fullscreenMaterial;u!==null&&(u.needsUpdate=!0),this.rtt=!n}}set mainScene(n){}set mainCamera(n){}setRenderer(n){this.renderer=n}isEnabled(){return this.enabled}setEnabled(n){this.enabled=n}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(n){let u=this.screen;u!==null?u.material=n:(u=new Mesh(Kf.fullscreenGeometry,n),u.frustumCulled=!1,this.scene===null&&(this.scene=new Scene$1),this.scene.add(u),this.screen=u)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(n){this.fullscreenMaterial=n}getDepthTexture(){return null}setDepthTexture(n,u=BasicDepthPacking){}render(n,u,f,y,S){throw new Error("Render method not implemented!")}setSize(n,u){}initialize(n,u,f){}dispose(){for(const n of Object.keys(this)){const u=this[n];(u instanceof WebGLRenderTarget||u instanceof Material||u instanceof Texture||u instanceof Kf)&&this[n].dispose()}this.fullscreenMaterial!==null&&this.fullscreenMaterial.dispose()}},ClearMaskPass=class extends Pass{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(s,n,u,f,y){const S=s.state.buffers.stencil;S.setLocked(!1),S.setTest(!1)}},copy_default=`#ifdef COLOR_WRITE
#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#endif
#ifdef DEPTH_WRITE
#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}
#endif
#ifdef USE_WEIGHTS
uniform vec4 channelWeights;
#endif
uniform float opacity;varying vec2 vUv;void main(){
#ifdef COLOR_WRITE
vec4 texel=texture2D(inputBuffer,vUv);
#ifdef USE_WEIGHTS
texel*=channelWeights;
#endif
gl_FragColor=opacity*texel;
#ifdef COLOR_SPACE_CONVERSION
#include <colorspace_fragment>
#endif
#include <dithering_fragment>
#else
gl_FragColor=vec4(0.0);
#endif
#ifdef DEPTH_WRITE
gl_FragDepth=readDepth(vUv);
#endif
}`,common_default="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",CopyMaterial=class extends ShaderMaterial{constructor(){super({name:"CopyMaterial",defines:{COLOR_SPACE_CONVERSION:"1",DEPTH_PACKING:"0",COLOR_WRITE:"1"},uniforms:{inputBuffer:new Uniform(null),depthBuffer:new Uniform(null),channelWeights:new Uniform(null),opacity:new Uniform(1)},blending:NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:copy_default,vertexShader:common_default}),this.depthFunc=AlwaysDepth}get inputBuffer(){return this.uniforms.inputBuffer.value}set inputBuffer(s){const n=s!==null;this.colorWrite!==n&&(n?this.defines.COLOR_WRITE=!0:delete this.defines.COLOR_WRITE,this.colorWrite=n,this.needsUpdate=!0),this.uniforms.inputBuffer.value=s}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(s){const n=s!==null;this.depthWrite!==n&&(n?this.defines.DEPTH_WRITE=!0:delete this.defines.DEPTH_WRITE,this.depthTest=n,this.depthWrite=n,this.needsUpdate=!0),this.uniforms.depthBuffer.value=s}set depthPacking(s){this.defines.DEPTH_PACKING=s.toFixed(0),this.needsUpdate=!0}get colorSpaceConversion(){return this.defines.COLOR_SPACE_CONVERSION!==void 0}set colorSpaceConversion(s){this.colorSpaceConversion!==s&&(s?this.defines.COLOR_SPACE_CONVERSION=!0:delete this.defines.COLOR_SPACE_CONVERSION,this.needsUpdate=!0)}get channelWeights(){return this.uniforms.channelWeights.value}set channelWeights(s){s!==null?(this.defines.USE_WEIGHTS="1",this.uniforms.channelWeights.value=s):delete this.defines.USE_WEIGHTS,this.needsUpdate=!0}setInputBuffer(s){this.uniforms.inputBuffer.value=s}getOpacity(s){return this.uniforms.opacity.value}setOpacity(s){this.uniforms.opacity.value=s}},CopyPass=class extends Pass{constructor(s,n=!0){super("CopyPass"),this.fullscreenMaterial=new CopyMaterial,this.needsSwap=!1,this.renderTarget=s,s===void 0&&(this.renderTarget=new WebGLRenderTarget(1,1,{minFilter:LinearFilter,magFilter:LinearFilter,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=n}get resize(){return this.autoResize}set resize(s){this.autoResize=s}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(s){this.autoResize=s}render(s,n,u,f,y){this.fullscreenMaterial.inputBuffer=n.texture,s.setRenderTarget(this.renderToScreen?null:this.renderTarget),s.render(this.scene,this.camera)}setSize(s,n){this.autoResize&&this.renderTarget.setSize(s,n)}initialize(s,n,u){u!==void 0&&(this.renderTarget.texture.type=u,u!==UnsignedByteType?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":s!==null&&s.outputColorSpace===SRGBColorSpace$1&&(this.renderTarget.texture.colorSpace=SRGBColorSpace$1))}},color=new Color,ClearPass=class extends Pass{constructor(s=!0,n=!0,u=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=s,this.depth=n,this.stencil=u,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(s,n,u){this.color=s,this.depth=n,this.stencil=u}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(s){this.overrideClearColor=s}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(s){this.overrideClearAlpha=s}render(s,n,u,f,y){const S=this.overrideClearColor,A=this.overrideClearAlpha,w=s.getClearAlpha(),C=S!==null,T=A>=0;C?(s.getClearColor(color),s.setClearColor(S,T?A:w)):T&&s.setClearAlpha(A),s.setRenderTarget(this.renderToScreen?null:n),s.clear(this.color,this.depth,this.stencil),C?s.setClearColor(color,w):T&&s.setClearAlpha(w)}},MaskPass=class extends Pass{constructor(s,n){super("MaskPass",s,n),this.needsSwap=!1,this.clearPass=new ClearPass(!1,!1,!0),this.inverse=!1}set mainScene(s){this.scene=s}set mainCamera(s){this.camera=s}get inverted(){return this.inverse}set inverted(s){this.inverse=s}get clear(){return this.clearPass.enabled}set clear(s){this.clearPass.enabled=s}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(s){this.inverted=s}render(s,n,u,f,y){const S=s.getContext(),A=s.state.buffers,w=this.scene,C=this.camera,T=this.clearPass,R=this.inverted?0:1,I=1-R;A.color.setMask(!1),A.depth.setMask(!1),A.color.setLocked(!0),A.depth.setLocked(!0),A.stencil.setTest(!0),A.stencil.setOp(S.REPLACE,S.REPLACE,S.REPLACE),A.stencil.setFunc(S.ALWAYS,R,4294967295),A.stencil.setClear(I),A.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?T.render(s,null):(T.render(s,n),T.render(s,u))),this.renderToScreen?(s.setRenderTarget(null),s.render(w,C)):(s.setRenderTarget(n),s.render(w,C),s.setRenderTarget(u),s.render(w,C)),A.color.setLocked(!1),A.depth.setLocked(!1),A.stencil.setLocked(!1),A.stencil.setFunc(S.EQUAL,1,4294967295),A.stencil.setOp(S.KEEP,S.KEEP,S.KEEP),A.stencil.setLocked(!0)}},EffectComposer=class{constructor(s=null,{depthBuffer:n=!0,stencilBuffer:u=!1,multisampling:f=0,frameBufferType:y}={}){this.renderer=null,this.inputBuffer=this.createBuffer(n,u,y,f),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new CopyPass,this.depthTexture=null,this.passes=[],this.timer=new Timer,this.autoRenderToScreen=!0,this.setRenderer(s)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(s){const n=this.inputBuffer,u=this.multisampling;u>0&&s>0?(this.inputBuffer.samples=s,this.outputBuffer.samples=s,this.inputBuffer.dispose(),this.outputBuffer.dispose()):u!==s&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(n.depthBuffer,n.stencilBuffer,n.texture.type,s),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(s){if(this.renderer=s,s!==null){const n=s.getSize(new Vector2),u=s.getContext().getContextAttributes().alpha,f=this.inputBuffer.texture.type;f===UnsignedByteType&&s.outputColorSpace===SRGBColorSpace$1&&(this.inputBuffer.texture.colorSpace=SRGBColorSpace$1,this.outputBuffer.texture.colorSpace=SRGBColorSpace$1,this.inputBuffer.dispose(),this.outputBuffer.dispose()),s.autoClear=!1,this.setSize(n.width,n.height);for(const y of this.passes)y.initialize(s,u,f)}}replaceRenderer(s,n=!0){const u=this.renderer,f=u.domElement.parentNode;return this.setRenderer(s),n&&f!==null&&(f.removeChild(u.domElement),f.appendChild(s.domElement)),u}createDepthTexture(){const s=this.depthTexture=new DepthTexture;return this.inputBuffer.depthTexture=s,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(s.format=DepthStencilFormat,s.type=UnsignedInt248Type):s.type=UnsignedIntType,s}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const s of this.passes)s.setDepthTexture(null)}}createBuffer(s,n,u,f){const y=this.renderer,S=y===null?new Vector2:y.getDrawingBufferSize(new Vector2),A={minFilter:LinearFilter,magFilter:LinearFilter,stencilBuffer:n,depthBuffer:s,type:u},w=new WebGLRenderTarget(S.width,S.height,A);return f>0&&(w.samples=f),u===UnsignedByteType&&y!==null&&y.outputColorSpace===SRGBColorSpace$1&&(w.texture.colorSpace=SRGBColorSpace$1),w.texture.name="EffectComposer.Buffer",w.texture.generateMipmaps=!1,w}setMainScene(s){for(const n of this.passes)n.mainScene=s}setMainCamera(s){for(const n of this.passes)n.mainCamera=s}addPass(s,n){const u=this.passes,f=this.renderer,y=f.getDrawingBufferSize(new Vector2),S=f.getContext().getContextAttributes().alpha,A=this.inputBuffer.texture.type;if(s.setRenderer(f),s.setSize(y.width,y.height),s.initialize(f,S,A),this.autoRenderToScreen&&(u.length>0&&(u[u.length-1].renderToScreen=!1),s.renderToScreen&&(this.autoRenderToScreen=!1)),n!==void 0?u.splice(n,0,s):u.push(s),this.autoRenderToScreen&&(u[u.length-1].renderToScreen=!0),s.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){const w=this.createDepthTexture();for(s of u)s.setDepthTexture(w)}else s.setDepthTexture(this.depthTexture)}removePass(s){const n=this.passes,u=n.indexOf(s);if(u!==-1&&n.splice(u,1).length>0){if(this.depthTexture!==null){const S=(w,C)=>w||C.needsDepthTexture;n.reduce(S,!1)||(s.getDepthTexture()===this.depthTexture&&s.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&u===n.length&&(s.renderToScreen=!1,n.length>0&&(n[n.length-1].renderToScreen=!0))}}removeAllPasses(){const s=this.passes;this.deleteDepthTexture(),s.length>0&&(this.autoRenderToScreen&&(s[s.length-1].renderToScreen=!1),this.passes=[])}render(s){const n=this.renderer,u=this.copyPass;let f=this.inputBuffer,y=this.outputBuffer,S=!1,A,w,C;s===void 0&&(this.timer.update(),s=this.timer.getDelta());for(const T of this.passes)T.enabled&&(T.render(n,f,y,s,S),T.needsSwap&&(S&&(u.renderToScreen=T.renderToScreen,A=n.getContext(),w=n.state.buffers.stencil,w.setFunc(A.NOTEQUAL,1,4294967295),u.render(n,f,y,s,S),w.setFunc(A.EQUAL,1,4294967295)),C=f,f=y,y=C),T instanceof MaskPass?S=!0:T instanceof ClearMaskPass&&(S=!1))}setSize(s,n,u){const f=this.renderer,y=f.getSize(new Vector2);(s===void 0||n===void 0)&&(s=y.width,n=y.height),(y.width!==s||y.height!==n)&&f.setSize(s,n,u);const S=f.getDrawingBufferSize(new Vector2);this.inputBuffer.setSize(S.width,S.height),this.outputBuffer.setSize(S.width,S.height);for(const A of this.passes)A.setSize(S.width,S.height)}reset(){this.dispose(),this.autoRenderToScreen=!0}dispose(){for(const s of this.passes)s.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose(),Pass.fullscreenGeometry.dispose()}},EffectAttribute={NONE:0,DEPTH:1,CONVOLUTION:2},EffectShaderSection={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},EffectShaderData=class{constructor(){this.shaderParts=new Map([[EffectShaderSection.FRAGMENT_HEAD,null],[EffectShaderSection.FRAGMENT_MAIN_UV,null],[EffectShaderSection.FRAGMENT_MAIN_IMAGE,null],[EffectShaderSection.VERTEX_HEAD,null],[EffectShaderSection.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=EffectAttribute.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=LinearSRGBColorSpace$1}},workaroundEnabled=!1,OverrideMaterialManager=class{constructor(s=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(s),this.meshCount=0,this.replaceMaterial=n=>{if(n.isMesh){let u;if(n.material.flatShading)switch(n.material.side){case DoubleSide:u=this.materialsFlatShadedDoubleSide;break;case BackSide:u=this.materialsFlatShadedBackSide;break;default:u=this.materialsFlatShaded;break}else switch(n.material.side){case DoubleSide:u=this.materialsDoubleSide;break;case BackSide:u=this.materialsBackSide;break;default:u=this.materials;break}this.originalMaterials.set(n,n.material),n.isSkinnedMesh?n.material=u[2]:n.isInstancedMesh?n.material=u[1]:n.material=u[0],++this.meshCount}}}cloneMaterial(s){if(!(s instanceof ShaderMaterial))return s.clone();const n=s.uniforms,u=new Map;for(const y in n){const S=n[y].value;S.isRenderTargetTexture&&(n[y].value=null,u.set(y,S))}const f=s.clone();for(const y of u)n[y[0]].value=y[1],f.uniforms[y[0]].value=y[1];return f}setMaterial(s){if(this.disposeMaterials(),this.material=s,s!==null){const n=this.materials=[this.cloneMaterial(s),this.cloneMaterial(s),this.cloneMaterial(s)];for(const u of n)u.uniforms=Object.assign({},s.uniforms),u.side=FrontSide;n[2].skinning=!0,this.materialsBackSide=n.map(u=>{const f=this.cloneMaterial(u);return f.uniforms=Object.assign({},s.uniforms),f.side=BackSide,f}),this.materialsDoubleSide=n.map(u=>{const f=this.cloneMaterial(u);return f.uniforms=Object.assign({},s.uniforms),f.side=DoubleSide,f}),this.materialsFlatShaded=n.map(u=>{const f=this.cloneMaterial(u);return f.uniforms=Object.assign({},s.uniforms),f.flatShading=!0,f}),this.materialsFlatShadedBackSide=n.map(u=>{const f=this.cloneMaterial(u);return f.uniforms=Object.assign({},s.uniforms),f.flatShading=!0,f.side=BackSide,f}),this.materialsFlatShadedDoubleSide=n.map(u=>{const f=this.cloneMaterial(u);return f.uniforms=Object.assign({},s.uniforms),f.flatShading=!0,f.side=DoubleSide,f})}}render(s,n,u){const f=s.shadowMap.enabled;if(s.shadowMap.enabled=!1,workaroundEnabled){const y=this.originalMaterials;this.meshCount=0,n.traverse(this.replaceMaterial),s.render(n,u);for(const S of y)S[0].material=S[1];this.meshCount!==y.size&&y.clear()}else{const y=n.overrideMaterial;n.overrideMaterial=this.material,s.render(n,u),n.overrideMaterial=y}s.shadowMap.enabled=f}disposeMaterials(){if(this.material!==null){const s=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const n of s)n.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return workaroundEnabled}static set workaroundEnabled(s){workaroundEnabled=s}},AUTO_SIZE=-1,Resolution=class extends EventDispatcher{constructor(s,n=AUTO_SIZE,u=AUTO_SIZE,f=1){super(),this.resizable=s,this.baseSize=new Vector2(1,1),this.preferredSize=new Vector2(n,u),this.target=this.preferredSize,this.s=f,this.effectiveSize=new Vector2,this.addEventListener("change",()=>this.updateEffectiveSize()),this.updateEffectiveSize()}updateEffectiveSize(){const s=this.baseSize,n=this.preferredSize,u=this.effectiveSize,f=this.scale;n.width!==AUTO_SIZE?u.width=n.width:n.height!==AUTO_SIZE?u.width=Math.round(n.height*(s.width/Math.max(s.height,1))):u.width=Math.round(s.width*f),n.height!==AUTO_SIZE?u.height=n.height:n.width!==AUTO_SIZE?u.height=Math.round(n.width/Math.max(s.width/Math.max(s.height,1),1)):u.height=Math.round(s.height*f)}get width(){return this.effectiveSize.width}set width(s){this.preferredWidth=s}get height(){return this.effectiveSize.height}set height(s){this.preferredHeight=s}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(s){this.s!==s&&(this.s=s,this.preferredSize.setScalar(AUTO_SIZE),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(s){this.scale=s}get baseWidth(){return this.baseSize.width}set baseWidth(s){this.baseSize.width!==s&&(this.baseSize.width=s,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(s){this.baseWidth=s}get baseHeight(){return this.baseSize.height}set baseHeight(s){this.baseSize.height!==s&&(this.baseSize.height=s,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(s){this.baseHeight=s}setBaseSize(s,n){(this.baseSize.width!==s||this.baseSize.height!==n)&&(this.baseSize.set(s,n),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(s){this.preferredSize.width!==s&&(this.preferredSize.width=s,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(s){this.preferredWidth=s}get preferredHeight(){return this.preferredSize.height}set preferredHeight(s){this.preferredSize.height!==s&&(this.preferredSize.height=s,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(s){this.preferredHeight=s}setPreferredSize(s,n){(this.preferredSize.width!==s||this.preferredSize.height!==n)&&(this.preferredSize.set(s,n),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(s){this.s=s.scale,this.baseSize.set(s.baseWidth,s.baseHeight),this.preferredSize.set(s.preferredWidth,s.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return AUTO_SIZE}},BlendFunction={ADD:0,ALPHA:1,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},add_default="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=dst.rgb+src.rgb;return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",alpha_default="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){return mix(dst,src,src.a*opacity);}",average_default="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=(dst.rgb+src.rgb)*0.5;return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",color_default="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 a=RGBToHSL(dst.rgb);vec3 b=RGBToHSL(src.rgb);vec3 c=HSLToRGB(vec3(b.xy,a.z));return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",color_burn_default="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 a=dst.rgb,b=src.rgb;vec3 c=mix(step(0.0,b)*(1.0-min(vec3(1.0),(1.0-a)/max(b,1e-9))),vec3(1.0),step(1.0,a));return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",color_dodge_default="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 a=dst.rgb,b=src.rgb;vec3 c=step(0.0,a)*mix(min(vec3(1.0),a/max(1.0-b,1e-9)),vec3(1.0),step(1.0,b));return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",darken_default="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=min(dst.rgb,src.rgb);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",difference_default="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=abs(dst.rgb-src.rgb);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",divide_default="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=dst.rgb/max(src.rgb,1e-9);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",exclusion_default="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=dst.rgb+src.rgb-2.0*dst.rgb*src.rgb;return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",hard_light_default="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 a=min(dst.rgb,1.0);vec3 b=min(src.rgb,1.0);vec3 c=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,b));return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",hard_mix_default="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=step(1.0,dst.rgb+src.rgb);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",hue_default="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 a=RGBToHSL(dst.rgb);vec3 b=RGBToHSL(src.rgb);vec3 c=HSLToRGB(vec3(b.x,a.yz));return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",invert_default="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=max(1.0-src.rgb,0.0);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",invert_rgb_default="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=src.rgb*max(1.0-dst.rgb,0.0);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",lighten_default="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=max(dst.rgb,src.rgb);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",linear_burn_default="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=clamp(src.rgb+dst.rgb-1.0,0.0,1.0);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",linear_dodge_default="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=min(dst.rgb+src.rgb,1.0);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",linear_light_default="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=clamp(2.0*src.rgb+dst.rgb-1.0,0.0,1.0);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",luminosity_default="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 a=RGBToHSL(dst.rgb);vec3 b=RGBToHSL(src.rgb);vec3 c=HSLToRGB(vec3(a.xy,b.z));return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",multiply_default="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=dst.rgb*src.rgb;return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",negation_default="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=max(1.0-abs(1.0-dst.rgb-src.rgb),0.0);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",normal_default="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){return mix(dst,src,opacity);}",overlay_default="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 a=2.0*src.rgb*dst.rgb;vec3 b=1.0-2.0*(1.0-src.rgb)*(1.0-dst.rgb);vec3 c=mix(a,b,step(0.5,dst.rgb));return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",pin_light_default="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 src2=2.0*src.rgb;vec3 c=mix(mix(src2,dst.rgb,step(0.5*dst.rgb,src.rgb)),max(src2-1.0,vec3(0.0)),step(dst.rgb,src2-1.0));return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",reflect_default="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 a=min(dst.rgb*dst.rgb/max(1.0-src.rgb,1e-9),1.0);vec3 c=mix(a,src.rgb,step(1.0,src.rgb));return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",saturation_default="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 a=RGBToHSL(dst.rgb);vec3 b=RGBToHSL(src.rgb);vec3 c=HSLToRGB(vec3(a.x,b.y,a.z));return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",screen_default="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=dst.rgb+src.rgb-min(dst.rgb*src.rgb,1.0);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",soft_light_default="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 src2=2.0*src.rgb;vec3 d=dst.rgb+(src2-1.0);vec3 w=step(0.5,src.rgb);vec3 a=dst.rgb-(1.0-src2)*dst.rgb*(1.0-dst.rgb);vec3 b=mix(d*(sqrt(dst.rgb)-dst.rgb),d*dst.rgb*((16.0*dst.rgb-12.0)*dst.rgb+3.0),w*(1.0-step(0.25,dst.rgb)));vec3 c=mix(a,b,w);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",src_default="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){return src;}",subtract_default="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=max(dst.rgb-src.rgb,0.0);return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",vivid_light_default="vec4 blend(const in vec4 dst,const in vec4 src,const in float opacity){vec3 c=mix(max(1.0-min((1.0-dst.rgb)/(2.0*src.rgb),1.0),0.0),min(dst.rgb/(2.0*(1.0-src.rgb)),1.0),step(0.5,src.rgb));return mix(dst,vec4(c,max(dst.a,src.a)),opacity);}",blendFunctions=new Map([[BlendFunction.ADD,add_default],[BlendFunction.ALPHA,alpha_default],[BlendFunction.AVERAGE,average_default],[BlendFunction.COLOR,color_default],[BlendFunction.COLOR_BURN,color_burn_default],[BlendFunction.COLOR_DODGE,color_dodge_default],[BlendFunction.DARKEN,darken_default],[BlendFunction.DIFFERENCE,difference_default],[BlendFunction.DIVIDE,divide_default],[BlendFunction.DST,null],[BlendFunction.EXCLUSION,exclusion_default],[BlendFunction.HARD_LIGHT,hard_light_default],[BlendFunction.HARD_MIX,hard_mix_default],[BlendFunction.HUE,hue_default],[BlendFunction.INVERT,invert_default],[BlendFunction.INVERT_RGB,invert_rgb_default],[BlendFunction.LIGHTEN,lighten_default],[BlendFunction.LINEAR_BURN,linear_burn_default],[BlendFunction.LINEAR_DODGE,linear_dodge_default],[BlendFunction.LINEAR_LIGHT,linear_light_default],[BlendFunction.LUMINOSITY,luminosity_default],[BlendFunction.MULTIPLY,multiply_default],[BlendFunction.NEGATION,negation_default],[BlendFunction.NORMAL,normal_default],[BlendFunction.OVERLAY,overlay_default],[BlendFunction.PIN_LIGHT,pin_light_default],[BlendFunction.REFLECT,reflect_default],[BlendFunction.SATURATION,saturation_default],[BlendFunction.SCREEN,screen_default],[BlendFunction.SOFT_LIGHT,soft_light_default],[BlendFunction.SRC,src_default],[BlendFunction.SUBTRACT,subtract_default],[BlendFunction.VIVID_LIGHT,vivid_light_default]]),BlendMode=class extends EventDispatcher{constructor(s,n=1){super(),this._blendFunction=s,this.opacity=new Uniform(n)}getOpacity(){return this.opacity.value}setOpacity(s){this.opacity.value=s}get blendFunction(){return this._blendFunction}set blendFunction(s){this._blendFunction=s,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(s){this.blendFunction=s}getShaderCode(){return blendFunctions.get(this.blendFunction)}},Effect=class extends EventDispatcher{constructor(s,n,{attributes:u=EffectAttribute.NONE,blendFunction:f=BlendFunction.NORMAL,defines:y=new Map,uniforms:S=new Map,extensions:A=null,vertexShader:w=null}={}){super(),this.name=s,this.renderer=null,this.attributes=u,this.fragmentShader=n,this.vertexShader=w,this.defines=y,this.uniforms=S,this.extensions=A,this.blendMode=new BlendMode(f),this.blendMode.addEventListener("change",C=>this.setChanged()),this._inputColorSpace=LinearSRGBColorSpace$1,this._outputColorSpace=NoColorSpace}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(s){this._inputColorSpace=s,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(s){this._outputColorSpace=s,this.setChanged()}set mainScene(s){}set mainCamera(s){}getName(){return this.name}setRenderer(s){this.renderer=s}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(s){this.attributes=s,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(s){this.fragmentShader=s,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(s){this.vertexShader=s,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(s,n=BasicDepthPacking){}update(s,n,u){}setSize(s,n){}initialize(s,n,u){}dispose(){for(const s of Object.keys(this)){const n=this[s];(n instanceof WebGLRenderTarget||n instanceof Material||n instanceof Texture||n instanceof Pass)&&this[s].dispose()}}},KernelSize={MEDIUM:2,LARGE:3},convolution_kawase_default=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <colorspace_fragment>
}`,convolution_kawase_default2="uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",kernelPresets=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],KawaseBlurMaterial=class extends ShaderMaterial{constructor(s=new Vector4){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new Uniform(null),texelSize:new Uniform(new Vector4),scale:new Uniform(1),kernel:new Uniform(0)},blending:NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:convolution_kawase_default,vertexShader:convolution_kawase_default2}),this.setTexelSize(s.x,s.y),this.kernelSize=KernelSize.MEDIUM}set inputBuffer(s){this.uniforms.inputBuffer.value=s}setInputBuffer(s){this.inputBuffer=s}get kernelSequence(){return kernelPresets[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(s){this.uniforms.scale.value=s}getScale(){return this.uniforms.scale.value}setScale(s){this.uniforms.scale.value=s}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(s){this.uniforms.kernel.value=s}setKernel(s){this.kernel=s}setTexelSize(s,n){this.uniforms.texelSize.value.set(s,n,s*.5,n*.5)}setSize(s,n){const u=1/s,f=1/n;this.uniforms.texelSize.value.set(u,f,u*.5,f*.5)}},KawaseBlurPass=class extends Pass{constructor({kernelSize:s=KernelSize.MEDIUM,resolutionScale:n=.5,width:u=Resolution.AUTO_SIZE,height:f=Resolution.AUTO_SIZE,resolutionX:y=u,resolutionY:S=f}={}){super("KawaseBlurPass"),this.renderTargetA=new WebGLRenderTarget(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const A=this.resolution=new Resolution(this,y,S,n);A.addEventListener("change",w=>this.setSize(A.baseWidth,A.baseHeight)),this._blurMaterial=new KawaseBlurMaterial,this._blurMaterial.kernelSize=s,this.copyMaterial=new CopyMaterial}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(s){this._blurMaterial=s}get dithering(){return this.copyMaterial.dithering}set dithering(s){this.copyMaterial.dithering=s}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(s){this.blurMaterial.kernelSize=s}get width(){return this.resolution.width}set width(s){this.resolution.preferredWidth=s}get height(){return this.resolution.height}set height(s){this.resolution.preferredHeight=s}get scale(){return this.blurMaterial.scale}set scale(s){this.blurMaterial.scale=s}getScale(){return this.blurMaterial.scale}setScale(s){this.blurMaterial.scale=s}getKernelSize(){return this.kernelSize}setKernelSize(s){this.kernelSize=s}getResolutionScale(){return this.resolution.scale}setResolutionScale(s){this.resolution.scale=s}render(s,n,u,f,y){const S=this.scene,A=this.camera,w=this.renderTargetA,C=this.renderTargetB,T=this.blurMaterial,R=T.kernelSequence;let I=n;this.fullscreenMaterial=T;for(let N=0,L=R.length;N<L;++N){const F=(N&1)===0?w:C;T.kernel=R[N],T.inputBuffer=I.texture,s.setRenderTarget(F),s.render(S,A),I=F}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=I.texture,s.setRenderTarget(this.renderToScreen?null:u),s.render(S,A)}setSize(s,n){const u=this.resolution;u.setBaseSize(s,n);const f=u.width,y=u.height;this.renderTargetA.setSize(f,y),this.renderTargetB.setSize(f,y),this.blurMaterial.setSize(s,n)}initialize(s,n,u){u!==void 0&&(this.renderTargetA.texture.type=u,this.renderTargetB.texture.type=u,u!==UnsignedByteType?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):s!==null&&s.outputColorSpace===SRGBColorSpace$1&&(this.renderTargetA.texture.colorSpace=SRGBColorSpace$1,this.renderTargetB.texture.colorSpace=SRGBColorSpace$1))}static get AUTO_SIZE(){return Resolution.AUTO_SIZE}},luminance_default=`#include <common>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);float mask=1.0;
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);mask=low*high;
#elif defined(THRESHOLD)
mask=smoothstep(threshold,threshold+smoothing,l);
#endif
#ifdef COLOR
gl_FragColor=texel*mask;
#else
gl_FragColor=vec4(l*mask);
#endif
}`,LuminanceMaterial=class extends ShaderMaterial{constructor(s=!1,n=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:REVISION.replace(/\D+/g,"")},uniforms:{inputBuffer:new Uniform(null),threshold:new Uniform(0),smoothing:new Uniform(1),range:new Uniform(null)},blending:NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:luminance_default,vertexShader:common_default}),this.colorOutput=s,this.luminanceRange=n}set inputBuffer(s){this.uniforms.inputBuffer.value=s}setInputBuffer(s){this.uniforms.inputBuffer.value=s}get threshold(){return this.uniforms.threshold.value}set threshold(s){this.smoothing>0||s>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=s}getThreshold(){return this.threshold}setThreshold(s){this.threshold=s}get smoothing(){return this.uniforms.smoothing.value}set smoothing(s){this.threshold>0||s>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=s}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(s){this.smoothing=s}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(s){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(s){s?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(s){return this.colorOutput}setColorOutputEnabled(s){this.colorOutput=s}get useRange(){return this.luminanceRange!==null}set useRange(s){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(s){s!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=s,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(s){this.luminanceRange=s}},LuminancePass=class extends Pass{constructor({renderTarget:s,luminanceRange:n,colorOutput:u,resolutionScale:f=1,width:y=Resolution.AUTO_SIZE,height:S=Resolution.AUTO_SIZE,resolutionX:A=y,resolutionY:w=S}={}){super("LuminancePass"),this.fullscreenMaterial=new LuminanceMaterial(u,n),this.needsSwap=!1,this.renderTarget=s,this.renderTarget===void 0&&(this.renderTarget=new WebGLRenderTarget(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target");const C=this.resolution=new Resolution(this,A,w,f);C.addEventListener("change",T=>this.setSize(C.baseWidth,C.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(s,n,u,f,y){const S=this.fullscreenMaterial;S.inputBuffer=n.texture,s.setRenderTarget(this.renderToScreen?null:this.renderTarget),s.render(this.scene,this.camera)}setSize(s,n){const u=this.resolution;u.setBaseSize(s,n),this.renderTarget.setSize(u.width,u.height)}initialize(s,n,u){u!==void 0&&u!==UnsignedByteType&&(this.renderTarget.texture.type=u,this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},convolution_downsampling_default=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#define WEIGHT_INNER 0.125
#define WEIGHT_OUTER 0.05556
varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;float clampToBorder(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void main(){vec4 c=vec4(0.0);vec4 w=WEIGHT_INNER*vec4(clampToBorder(vUv00),clampToBorder(vUv01),clampToBorder(vUv02),clampToBorder(vUv03));c+=w.x*texture2D(inputBuffer,vUv00);c+=w.y*texture2D(inputBuffer,vUv01);c+=w.z*texture2D(inputBuffer,vUv02);c+=w.w*texture2D(inputBuffer,vUv03);w=WEIGHT_OUTER*vec4(clampToBorder(vUv04),clampToBorder(vUv05),clampToBorder(vUv06),clampToBorder(vUv07));c+=w.x*texture2D(inputBuffer,vUv04);c+=w.y*texture2D(inputBuffer,vUv05);c+=w.z*texture2D(inputBuffer,vUv06);c+=w.w*texture2D(inputBuffer,vUv07);w=WEIGHT_OUTER*vec4(clampToBorder(vUv08),clampToBorder(vUv09),clampToBorder(vUv10),clampToBorder(vUv11));c+=w.x*texture2D(inputBuffer,vUv08);c+=w.y*texture2D(inputBuffer,vUv09);c+=w.z*texture2D(inputBuffer,vUv10);c+=w.w*texture2D(inputBuffer,vUv11);c+=WEIGHT_OUTER*texture2D(inputBuffer,vUv);gl_FragColor=c;
#include <colorspace_fragment>
}`,convolution_downsampling_default2="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;void main(){vUv=position.xy*0.5+0.5;vUv00=vUv+texelSize*vec2(-1.0,1.0);vUv01=vUv+texelSize*vec2(1.0,1.0);vUv02=vUv+texelSize*vec2(-1.0,-1.0);vUv03=vUv+texelSize*vec2(1.0,-1.0);vUv04=vUv+texelSize*vec2(-2.0,2.0);vUv05=vUv+texelSize*vec2(0.0,2.0);vUv06=vUv+texelSize*vec2(2.0,2.0);vUv07=vUv+texelSize*vec2(-2.0,0.0);vUv08=vUv+texelSize*vec2(2.0,0.0);vUv09=vUv+texelSize*vec2(-2.0,-2.0);vUv10=vUv+texelSize*vec2(0.0,-2.0);vUv11=vUv+texelSize*vec2(2.0,-2.0);gl_Position=vec4(position.xy,1.0,1.0);}",DownsamplingMaterial=class extends ShaderMaterial{constructor(){super({name:"DownsamplingMaterial",uniforms:{inputBuffer:new Uniform(null),texelSize:new Uniform(new Vector2)},blending:NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:convolution_downsampling_default,vertexShader:convolution_downsampling_default2})}set inputBuffer(s){this.uniforms.inputBuffer.value=s}setSize(s,n){this.uniforms.texelSize.value.set(1/s,1/n)}},convolution_upsampling_default=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;uniform mediump sampler2D supportBuffer;
#else
uniform lowp sampler2D inputBuffer;uniform lowp sampler2D supportBuffer;
#endif
uniform float radius;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vec4 c=vec4(0.0);c+=texture2D(inputBuffer,vUv0)*0.0625;c+=texture2D(inputBuffer,vUv1)*0.125;c+=texture2D(inputBuffer,vUv2)*0.0625;c+=texture2D(inputBuffer,vUv3)*0.125;c+=texture2D(inputBuffer,vUv)*0.25;c+=texture2D(inputBuffer,vUv4)*0.125;c+=texture2D(inputBuffer,vUv5)*0.0625;c+=texture2D(inputBuffer,vUv6)*0.125;c+=texture2D(inputBuffer,vUv7)*0.0625;vec4 baseColor=texture2D(supportBuffer,vUv);gl_FragColor=mix(baseColor,c,radius);
#include <colorspace_fragment>
}`,convolution_upsampling_default2="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,1.0);vUv1=vUv+texelSize*vec2(0.0,1.0);vUv2=vUv+texelSize*vec2(1.0,1.0);vUv3=vUv+texelSize*vec2(-1.0,0.0);vUv4=vUv+texelSize*vec2(1.0,0.0);vUv5=vUv+texelSize*vec2(-1.0,-1.0);vUv6=vUv+texelSize*vec2(0.0,-1.0);vUv7=vUv+texelSize*vec2(1.0,-1.0);gl_Position=vec4(position.xy,1.0,1.0);}",UpsamplingMaterial=class extends ShaderMaterial{constructor(){super({name:"UpsamplingMaterial",uniforms:{inputBuffer:new Uniform(null),supportBuffer:new Uniform(null),texelSize:new Uniform(new Vector2),radius:new Uniform(.85)},blending:NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:convolution_upsampling_default,vertexShader:convolution_upsampling_default2})}set inputBuffer(s){this.uniforms.inputBuffer.value=s}set supportBuffer(s){this.uniforms.supportBuffer.value=s}get radius(){return this.uniforms.radius.value}set radius(s){this.uniforms.radius.value=s}setSize(s,n){this.uniforms.texelSize.value.set(1/s,1/n)}},MipmapBlurPass=class extends Pass{constructor(){super("MipmapBlurPass"),this.needsSwap=!1,this.renderTarget=new WebGLRenderTarget(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Upsampling.Mipmap0",this.downsamplingMipmaps=[],this.upsamplingMipmaps=[],this.downsamplingMaterial=new DownsamplingMaterial,this.upsamplingMaterial=new UpsamplingMaterial,this.resolution=new Vector2}get texture(){return this.renderTarget.texture}get levels(){return this.downsamplingMipmaps.length}set levels(s){if(this.levels!==s){const n=this.renderTarget;this.dispose(),this.downsamplingMipmaps=[],this.upsamplingMipmaps=[];for(let u=0;u<s;++u){const f=n.clone();f.texture.name="Downsampling.Mipmap"+u,this.downsamplingMipmaps.push(f)}this.upsamplingMipmaps.push(n);for(let u=1,f=s-1;u<f;++u){const y=n.clone();y.texture.name="Upsampling.Mipmap"+u,this.upsamplingMipmaps.push(y)}this.setSize(this.resolution.x,this.resolution.y)}}get radius(){return this.upsamplingMaterial.radius}set radius(s){this.upsamplingMaterial.radius=s}render(s,n,u,f,y){const{scene:S,camera:A}=this,{downsamplingMaterial:w,upsamplingMaterial:C}=this,{downsamplingMipmaps:T,upsamplingMipmaps:R}=this;let I=n;this.fullscreenMaterial=w;for(let N=0,L=T.length;N<L;++N){const F=T[N];w.setSize(I.width,I.height),w.inputBuffer=I.texture,s.setRenderTarget(F),s.render(S,A),I=F}this.fullscreenMaterial=C;for(let N=R.length-1;N>=0;--N){const L=R[N];C.setSize(I.width,I.height),C.inputBuffer=I.texture,C.supportBuffer=T[N].texture,s.setRenderTarget(L),s.render(S,A),I=L}}setSize(s,n){const u=this.resolution;u.set(s,n);let f=u.width,y=u.height;for(let S=0,A=this.downsamplingMipmaps.length;S<A;++S)f=Math.round(f*.5),y=Math.round(y*.5),this.downsamplingMipmaps[S].setSize(f,y),S<this.upsamplingMipmaps.length&&this.upsamplingMipmaps[S].setSize(f,y)}initialize(s,n,u){if(u!==void 0){const f=this.downsamplingMipmaps.concat(this.upsamplingMipmaps);for(const y of f)y.texture.type=u;if(u!==UnsignedByteType)this.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1";else if(s!==null&&s.outputColorSpace===SRGBColorSpace$1)for(const y of f)y.texture.colorSpace=SRGBColorSpace$1}}dispose(){super.dispose();for(const s of this.downsamplingMipmaps.concat(this.upsamplingMipmaps))s.dispose()}},bloom_default=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=texture2D(map,uv)*intensity;}`,BloomEffect=class extends Effect{constructor({blendFunction:s=BlendFunction.SCREEN,luminanceThreshold:n=1,luminanceSmoothing:u=.03,mipmapBlur:f=!0,intensity:y=1,radius:S=.85,levels:A=8,kernelSize:w=KernelSize.LARGE,resolutionScale:C=.5,width:T=Resolution.AUTO_SIZE,height:R=Resolution.AUTO_SIZE,resolutionX:I=T,resolutionY:N=R}={}){super("BloomEffect",bloom_default,{blendFunction:s,uniforms:new Map([["map",new Uniform(null)],["intensity",new Uniform(y)]])}),this.renderTarget=new WebGLRenderTarget(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.blurPass=new KawaseBlurPass({kernelSize:w}),this.luminancePass=new LuminancePass({colorOutput:!0}),this.luminanceMaterial.threshold=n,this.luminanceMaterial.smoothing=u,this.mipmapBlurPass=new MipmapBlurPass,this.mipmapBlurPass.enabled=f,this.mipmapBlurPass.radius=S,this.mipmapBlurPass.levels=A,this.uniforms.get("map").value=f?this.mipmapBlurPass.texture:this.renderTarget.texture;const L=this.resolution=new Resolution(this,I,N,C);L.addEventListener("change",F=>this.setSize(L.baseWidth,L.baseHeight))}get texture(){return this.mipmapBlurPass.enabled?this.mipmapBlurPass.texture:this.renderTarget.texture}getTexture(){return this.texture}getResolution(){return this.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(s){this.resolution.preferredWidth=s}get height(){return this.resolution.height}set height(s){this.resolution.preferredHeight=s}get dithering(){return this.blurPass.dithering}set dithering(s){this.blurPass.dithering=s}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(s){this.blurPass.kernelSize=s}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(s){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(s){this.uniforms.get("intensity").value=s}getIntensity(){return this.intensity}setIntensity(s){this.intensity=s}getResolutionScale(){return this.resolution.scale}setResolutionScale(s){this.resolution.scale=s}update(s,n,u){const f=this.renderTarget,y=this.luminancePass;y.enabled?(y.render(s,n),this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(s,y.renderTarget):this.blurPass.render(s,y.renderTarget,f)):this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(s,n):this.blurPass.render(s,n,f)}setSize(s,n){const u=this.resolution;u.setBaseSize(s,n),this.renderTarget.setSize(u.width,u.height),this.blurPass.resolution.copy(u),this.luminancePass.setSize(s,n),this.mipmapBlurPass.setSize(s,n)}initialize(s,n,u){this.blurPass.initialize(s,n,u),this.luminancePass.initialize(s,n,u),this.mipmapBlurPass.initialize(s,n,u),u!==void 0&&(this.renderTarget.texture.type=u,s!==null&&s.outputColorSpace===SRGBColorSpace$1&&(this.renderTarget.texture.colorSpace=SRGBColorSpace$1))}},RenderPass=class extends Pass{constructor(s,n,u=null){super("RenderPass",s,n),this.needsSwap=!1,this.clearPass=new ClearPass,this.overrideMaterialManager=u===null?null:new OverrideMaterialManager(u),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(s){this.scene=s}set mainCamera(s){this.camera=s}get renderToScreen(){return super.renderToScreen}set renderToScreen(s){super.renderToScreen=s,this.clearPass.renderToScreen=s}get overrideMaterial(){const s=this.overrideMaterialManager;return s!==null?s.material:null}set overrideMaterial(s){const n=this.overrideMaterialManager;s!==null?n!==null?n.setMaterial(s):this.overrideMaterialManager=new OverrideMaterialManager(s):n!==null&&(n.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(s){this.overrideMaterial=s}get clear(){return this.clearPass.enabled}set clear(s){this.clearPass.enabled=s}getSelection(){return this.selection}setSelection(s){this.selection=s}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(s){this.ignoreBackground=s}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(s){this.skipShadowMapUpdate=s}getClearPass(){return this.clearPass}render(s,n,u,f,y){const S=this.scene,A=this.camera,w=this.selection,C=A.layers.mask,T=S.background,R=s.shadowMap.autoUpdate,I=this.renderToScreen?null:n;w!==null&&A.layers.set(w.getLayer()),this.skipShadowMapUpdate&&(s.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(S.background=null),this.clearPass.enabled&&this.clearPass.render(s,n),s.setRenderTarget(I),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(s,S,A):s.render(S,A),A.layers.mask=C,S.background=T,s.shadowMap.autoUpdate=R}},depth_downsampling_default=`#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
#ifdef DOWNSAMPLE_NORMALS
uniform lowp sampler2D normalBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}int findBestDepth(const in float samples[4]){float c=(samples[0]+samples[1]+samples[2]+samples[3])*0.25;float distances[4];distances[0]=abs(c-samples[0]);distances[1]=abs(c-samples[1]);distances[2]=abs(c-samples[2]);distances[3]=abs(c-samples[3]);float maxDistance=max(max(distances[0],distances[1]),max(distances[2],distances[3]));int remaining[3];int rejected[3];int i,j,k;for(i=0,j=0,k=0;i<4;++i){if(distances[i]<maxDistance){remaining[j++]=i;}else{rejected[k++]=i;}}for(;j<3;++j){remaining[j]=rejected[--k];}vec3 s=vec3(samples[remaining[0]],samples[remaining[1]],samples[remaining[2]]);c=(s.x+s.y+s.z)/3.0;distances[0]=abs(c-s.x);distances[1]=abs(c-s.y);distances[2]=abs(c-s.z);float minDistance=min(distances[0],min(distances[1],distances[2]));for(i=0;i<3;++i){if(distances[i]==minDistance){break;}}return remaining[i];}void main(){float d[4];d[0]=readDepth(vUv0);d[1]=readDepth(vUv1);d[2]=readDepth(vUv2);d[3]=readDepth(vUv3);int index=findBestDepth(d);
#ifdef DOWNSAMPLE_NORMALS
vec3 n[4];n[0]=texture2D(normalBuffer,vUv0).rgb;n[1]=texture2D(normalBuffer,vUv1).rgb;n[2]=texture2D(normalBuffer,vUv2).rgb;n[3]=texture2D(normalBuffer,vUv3).rgb;
#else
vec3 n[4];n[0]=vec3(0.0);n[1]=vec3(0.0);n[2]=vec3(0.0);n[3]=vec3(0.0);
#endif
gl_FragColor=vec4(n[index],d[index]);}`,depth_downsampling_default2="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=uv;vUv1=vec2(uv.x,uv.y+texelSize.y);vUv2=vec2(uv.x+texelSize.x,uv.y);vUv3=uv+texelSize;gl_Position=vec4(position.xy,1.0,1.0);}",DepthDownsamplingMaterial=class extends ShaderMaterial{constructor(){super({name:"DepthDownsamplingMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new Uniform(null),normalBuffer:new Uniform(null),texelSize:new Uniform(new Vector2)},blending:NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:depth_downsampling_default,vertexShader:depth_downsampling_default2})}set depthBuffer(s){this.uniforms.depthBuffer.value=s}set depthPacking(s){this.defines.DEPTH_PACKING=s.toFixed(0),this.needsUpdate=!0}setDepthBuffer(s,n=BasicDepthPacking){this.depthBuffer=s,this.depthPacking=n}set normalBuffer(s){this.uniforms.normalBuffer.value=s,s!==null?this.defines.DOWNSAMPLE_NORMALS="1":delete this.defines.DOWNSAMPLE_NORMALS,this.needsUpdate=!0}setNormalBuffer(s){this.normalBuffer=s}setTexelSize(s,n){this.uniforms.texelSize.value.set(s,n)}setSize(s,n){this.uniforms.texelSize.value.set(1/s,1/n)}},DepthDownsamplingPass=class extends Pass{constructor({normalBuffer:s=null,resolutionScale:n=.5,width:u=Resolution.AUTO_SIZE,height:f=Resolution.AUTO_SIZE,resolutionX:y=u,resolutionY:S=f}={}){super("DepthDownsamplingPass");const A=new DepthDownsamplingMaterial;A.normalBuffer=s,this.fullscreenMaterial=A,this.needsDepthTexture=!0,this.needsSwap=!1,this.renderTarget=new WebGLRenderTarget(1,1,{minFilter:NearestFilter,magFilter:NearestFilter,depthBuffer:!1,type:FloatType}),this.renderTarget.texture.name="DepthDownsamplingPass.Target",this.renderTarget.texture.generateMipmaps=!1;const w=this.resolution=new Resolution(this,y,S,n);w.addEventListener("change",C=>this.setSize(w.baseWidth,w.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}setDepthTexture(s,n=BasicDepthPacking){this.fullscreenMaterial.depthBuffer=s,this.fullscreenMaterial.depthPacking=n}render(s,n,u,f,y){s.setRenderTarget(this.renderToScreen?null:this.renderTarget),s.render(this.scene,this.camera)}setSize(s,n){const u=this.resolution;u.setBaseSize(s,n),this.renderTarget.setSize(u.width,u.height),this.fullscreenMaterial.setSize(s,n)}initialize(s,n,u){const f=s.getContext();if(!(f.getExtension("EXT_color_buffer_float")||f.getExtension("EXT_color_buffer_half_float")))throw new Error("Rendering to float texture is not supported.")}},effect_default=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
float depth=unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
float depth=texture2D(depthBuffer,uv).r;
#endif
#if defined(USE_LOGARITHMIC_DEPTH_BUFFER) || defined(LOG_DEPTH)
float d=pow(2.0,depth*log2(cameraFar+1.0))-1.0;float a=cameraFar/(cameraFar-cameraNear);float b=cameraFar*cameraNear/(cameraNear-cameraFar);depth=a+b/d;
#elif defined(USE_REVERSED_DEPTH_BUFFER)
depth=1.0-depth;
#endif
return depth;}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEAD void main(){FRAGMENT_MAIN_UV vec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGE color0.a=clamp(color0.a,0.0,1.0);gl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <colorspace_fragment>
#endif
#include <dithering_fragment>
}`,effect_default2="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEAD void main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORT gl_Position=vec4(position.xy,1.0,1.0);}",EffectMaterial=class extends ShaderMaterial{constructor(s,n,u,f,y=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:REVISION.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new Uniform(null),depthBuffer:new Uniform(null),resolution:new Uniform(new Vector2),texelSize:new Uniform(new Vector2),cameraNear:new Uniform(.3),cameraFar:new Uniform(1e3),aspect:new Uniform(1),time:new Uniform(0)},blending:NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,dithering:y}),s&&this.setShaderParts(s),n&&this.setDefines(n),u&&this.setUniforms(u),this.copyCameraSettings(f)}set inputBuffer(s){this.uniforms.inputBuffer.value=s}setInputBuffer(s){this.uniforms.inputBuffer.value=s}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(s){this.uniforms.depthBuffer.value=s}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(s){this.defines.DEPTH_PACKING=s.toFixed(0),this.needsUpdate=!0}setDepthBuffer(s,n=BasicDepthPacking){this.depthBuffer=s,this.depthPacking=n}setShaderData(s){this.setShaderParts(s.shaderParts),this.setDefines(s.defines),this.setUniforms(s.uniforms),this.setExtensions(s.extensions)}setShaderParts(s){return this.fragmentShader=effect_default.replace(EffectShaderSection.FRAGMENT_HEAD,s.get(EffectShaderSection.FRAGMENT_HEAD)||"").replace(EffectShaderSection.FRAGMENT_MAIN_UV,s.get(EffectShaderSection.FRAGMENT_MAIN_UV)||"").replace(EffectShaderSection.FRAGMENT_MAIN_IMAGE,s.get(EffectShaderSection.FRAGMENT_MAIN_IMAGE)||""),this.vertexShader=effect_default2.replace(EffectShaderSection.VERTEX_HEAD,s.get(EffectShaderSection.VERTEX_HEAD)||"").replace(EffectShaderSection.VERTEX_MAIN_SUPPORT,s.get(EffectShaderSection.VERTEX_MAIN_SUPPORT)||""),this.needsUpdate=!0,this}setDefines(s){for(const n of s.entries())this.defines[n[0]]=n[1];return this.needsUpdate=!0,this}setUniforms(s){for(const n of s.entries())this.uniforms[n[0]]=n[1];return this}setExtensions(s){this.extensions={};for(const n of s)this.extensions[n]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(s){this.encodeOutput!==s&&(s?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(s){return this.encodeOutput}setOutputEncodingEnabled(s){this.encodeOutput=s}get time(){return this.uniforms.time.value}set time(s){this.uniforms.time.value=s}setDeltaTime(s){this.uniforms.time.value+=s}adoptCameraSettings(s){this.copyCameraSettings(s)}copyCameraSettings(s){s&&(this.uniforms.cameraNear.value=s.near,this.uniforms.cameraFar.value=s.far,s instanceof PerspectiveCamera?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(s,n){const u=this.uniforms;u.resolution.value.set(s,n),u.texelSize.value.set(1/s,1/n),u.aspect.value=s/n}static get Section(){return EffectShaderSection}};function prefixSubstrings(s,n,u){for(const f of n){const y="$1"+s+f.charAt(0).toUpperCase()+f.slice(1),S=new RegExp("([^\\.])(\\b"+f+"\\b)","g");for(const A of u.entries())A[1]!==null&&u.set(A[0],A[1].replace(S,y))}}function integrateEffect(s,n,u){let f=n.getFragmentShader(),y=n.getVertexShader();const S=f!==void 0&&/mainImage/.test(f),A=f!==void 0&&/mainUv/.test(f);if(u.attributes|=n.getAttributes(),f===void 0)throw new Error(`Missing fragment shader (${n.name})`);if(A&&(u.attributes&EffectAttribute.CONVOLUTION)!==0)throw new Error(`Effects that transform UVs are incompatible with convolution effects (${n.name})`);if(!S&&!A)throw new Error(`Could not find mainImage or mainUv function (${n.name})`);{const w=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,C=u.shaderParts;let T=C.get(EffectShaderSection.FRAGMENT_HEAD)||"",R=C.get(EffectShaderSection.FRAGMENT_MAIN_UV)||"",I=C.get(EffectShaderSection.FRAGMENT_MAIN_IMAGE)||"",N=C.get(EffectShaderSection.VERTEX_HEAD)||"",L=C.get(EffectShaderSection.VERTEX_MAIN_SUPPORT)||"";const F=new Set,H=new Set;if(A&&(R+=`	${s}MainUv(UV);
`,u.uvTransformation=!0),y!==null&&/mainSupport/.test(y)){const G=/mainSupport *\([\w\s]*?uv\s*?\)/.test(y);L+=`	${s}MainSupport(`,L+=G?`vUv);
`:`);
`;for(const Y of y.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const K of Y[1].split(/\s*,\s*/))u.varyings.add(K),F.add(K),H.add(K);for(const Y of y.matchAll(w))H.add(Y[1])}for(const G of f.matchAll(w))H.add(G[1]);for(const G of n.defines.keys())H.add(G.replace(/\([\w\s,]*\)/g,""));for(const G of n.uniforms.keys())H.add(G);H.delete("while"),H.delete("for"),H.delete("if"),n.uniforms.forEach((G,Y)=>u.uniforms.set(s+Y.charAt(0).toUpperCase()+Y.slice(1),G)),n.defines.forEach((G,Y)=>u.defines.set(s+Y.charAt(0).toUpperCase()+Y.slice(1),G));const z=new Map([["fragment",f],["vertex",y]]);prefixSubstrings(s,H,u.defines),prefixSubstrings(s,H,z),f=z.get("fragment"),y=z.get("vertex");const U=n.blendMode;if(u.blendModes.set(U.blendFunction,U),S){n.inputColorSpace!==null&&n.inputColorSpace!==u.colorSpace&&(I+=n.inputColorSpace===SRGBColorSpace$1?`color0 = sRGBTransferOETF(color0);
	`:`color0 = sRGBToLinear(color0);
	`),n.outputColorSpace!==NoColorSpace?u.colorSpace=n.outputColorSpace:n.inputColorSpace!==null&&(u.colorSpace=n.inputColorSpace);const G=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;I+=`${s}MainImage(color0, UV, `,(u.attributes&EffectAttribute.DEPTH)!==0&&G.test(f)&&(I+="depth, ",u.readDepth=!0),I+=`color1);
	`;const Y=s+"BlendOpacity";u.uniforms.set(Y,U.opacity),I+=`color0 = blend${U.blendFunction}(color0, color1, ${Y});

	`,T+=`uniform float ${Y};

`}if(T+=f+`
`,y!==null&&(N+=y+`
`),C.set(EffectShaderSection.FRAGMENT_HEAD,T),C.set(EffectShaderSection.FRAGMENT_MAIN_UV,R),C.set(EffectShaderSection.FRAGMENT_MAIN_IMAGE,I),C.set(EffectShaderSection.VERTEX_HEAD,N),C.set(EffectShaderSection.VERTEX_MAIN_SUPPORT,L),n.extensions!==null)for(const G of n.extensions)u.extensions.add(G)}}var EffectPass=class extends Pass{constructor(s,...n){super("EffectPass"),this.fullscreenMaterial=new EffectMaterial(null,null,null,s),this.listener=u=>this.handleEvent(u),this.effects=[],this.setEffects(n),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(s){for(const n of this.effects)n.mainScene=s}set mainCamera(s){this.fullscreenMaterial.copyCameraSettings(s);for(const n of this.effects)n.mainCamera=s}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(s){this.fullscreenMaterial.encodeOutput=s}get dithering(){return this.fullscreenMaterial.dithering}set dithering(s){const n=this.fullscreenMaterial;n.dithering=s,n.needsUpdate=!0}setEffects(s){for(const n of this.effects)n.removeEventListener("change",this.listener);this.effects=s.sort((n,u)=>u.attributes-n.attributes);for(const n of this.effects)n.addEventListener("change",this.listener)}updateMaterial(){const s=new EffectShaderData;let n=0;for(const A of this.effects)if(A.blendMode.blendFunction===BlendFunction.DST)s.attributes|=A.getAttributes()&EffectAttribute.DEPTH;else{if((s.attributes&A.getAttributes()&EffectAttribute.CONVOLUTION)!==0)throw new Error(`Convolution effects cannot be merged (${A.name})`);integrateEffect("e"+n++,A,s)}let u=s.shaderParts.get(EffectShaderSection.FRAGMENT_HEAD),f=s.shaderParts.get(EffectShaderSection.FRAGMENT_MAIN_IMAGE),y=s.shaderParts.get(EffectShaderSection.FRAGMENT_MAIN_UV);const S=/\bblend\b/g;for(const A of s.blendModes.values())u+=A.getShaderCode().replace(S,`blend${A.blendFunction}`)+`
`;(s.attributes&EffectAttribute.DEPTH)!==0?(s.readDepth&&(f=`float depth = readDepth(UV);

	`+f),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,s.colorSpace===SRGBColorSpace$1&&(f+=`color0 = sRGBToLinear(color0);
	`),s.uvTransformation?(y=`vec2 transformedUv = vUv;
`+y,s.defines.set("UV","transformedUv")):s.defines.set("UV","vUv"),s.shaderParts.set(EffectShaderSection.FRAGMENT_HEAD,u),s.shaderParts.set(EffectShaderSection.FRAGMENT_MAIN_IMAGE,f),s.shaderParts.set(EffectShaderSection.FRAGMENT_MAIN_UV,y);for(const[A,w]of s.shaderParts)w!==null&&s.shaderParts.set(A,w.trim().replace(/^#/,`
#`));this.skipRendering=n===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(s)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(s,n=BasicDepthPacking){this.fullscreenMaterial.depthBuffer=s,this.fullscreenMaterial.depthPacking=n;for(const u of this.effects)u.setDepthTexture(s,n)}render(s,n,u,f,y){for(const S of this.effects)S.update(s,n,f);if(!this.skipRendering||this.renderToScreen){const S=this.fullscreenMaterial;S.inputBuffer=n.texture,S.time+=f*this.timeScale,s.setRenderTarget(this.renderToScreen?null:u),s.render(this.scene,this.camera)}}setSize(s,n){this.fullscreenMaterial.setSize(s,n);for(const u of this.effects)u.setSize(s,n)}initialize(s,n,u){this.renderer=s;for(const f of this.effects)f.initialize(s,n,u);this.updateMaterial(),u!==void 0&&u!==UnsignedByteType&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const s of this.effects)s.removeEventListener("change",this.listener),s.dispose()}handleEvent(s){s.type==="change"&&this.recompile()}},NormalPass=class extends Pass{constructor(s,n,{renderTarget:u,resolutionScale:f=1,width:y=Resolution.AUTO_SIZE,height:S=Resolution.AUTO_SIZE,resolutionX:A=y,resolutionY:w=S}={}){super("NormalPass"),this.needsSwap=!1,this.renderPass=new RenderPass(s,n,new MeshNormalMaterial);const C=this.renderPass;C.ignoreBackground=!0,C.skipShadowMapUpdate=!0;const T=C.getClearPass();T.overrideClearColor=new Color(7829503),T.overrideClearAlpha=1,this.renderTarget=u,this.renderTarget===void 0&&(this.renderTarget=new WebGLRenderTarget(1,1,{minFilter:NearestFilter,magFilter:NearestFilter}),this.renderTarget.texture.name="NormalPass.Target");const R=this.resolution=new Resolution(this,A,w,f);R.addEventListener("change",I=>this.setSize(R.baseWidth,R.baseHeight))}set mainScene(s){this.renderPass.mainScene=s}set mainCamera(s){this.renderPass.mainCamera=s}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(s){this.resolution.scale=s}render(s,n,u,f,y){const S=this.renderToScreen?null:this.renderTarget;this.renderPass.render(s,S,S)}setSize(s,n){const u=this.resolution;u.setBaseSize(s,n),this.renderTarget.setSize(u.width,u.height)}};function _defineProperty(s,n,u){return n in s?Object.defineProperty(s,n,{value:u,enumerable:!0,configurable:!0,writable:!0}):s[n]=u,s}new Vector2;new Vector2;function _classCallCheck(s,n){if(!(s instanceof n))throw new TypeError("Cannot call a class as a function")}var Grad=function s(n,u,f){var y=this;_classCallCheck(this,s),_defineProperty(this,"dot2",function(S,A){return y.x*S+y.y*A}),_defineProperty(this,"dot3",function(S,A,w){return y.x*S+y.y*A+y.z*w}),this.x=n,this.y=u,this.z=f},grad3=[new Grad(1,1,0),new Grad(-1,1,0),new Grad(1,-1,0),new Grad(-1,-1,0),new Grad(1,0,1),new Grad(-1,0,1),new Grad(1,0,-1),new Grad(-1,0,-1),new Grad(0,1,1),new Grad(0,-1,1),new Grad(0,1,-1),new Grad(0,-1,-1)],p=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],perm=new Array(512),gradP=new Array(512),seed=function s(n){n>0&&n<1&&(n*=65536),n=Math.floor(n),n<256&&(n|=n<<8);for(var u=0;u<256;u++){var f;u&1?f=p[u]^n&255:f=p[u]^n>>8&255,perm[u]=perm[u+256]=f,gradP[u]=gradP[u+256]=grad3[f%12]}};seed(0);function normalizeSeed(s){if(typeof s=="number")s=Math.abs(s);else if(typeof s=="string"){var n=s;s=0;for(var u=0;u<n.length;u++)s=(s+(u+1)*(n.charCodeAt(u)%96))%2147483647}return s===0&&(s=311),s}function lcgRandom(s){var n=normalizeSeed(s);return function(){var u=n*48271%2147483647;return n=u,u/2147483647}}var Generator=function s(n){var u=this;_classCallCheck(this,s),_defineProperty(this,"seed",0),_defineProperty(this,"init",function(f){u.seed=f,u.value=lcgRandom(f)}),_defineProperty(this,"value",lcgRandom(this.seed)),this.init(n)};new Generator(Math.random());const D=reactExports.createContext(null),ie=s=>(s.getAttributes()&2)===2,dt=reactExports.memo(reactExports.forwardRef(({children:s,camera:n,scene:u,resolutionScale:f,enabled:y=!0,renderPriority:S=1,autoClear:A=!0,depthBuffer:w,enableNormalPass:C,stencilBuffer:T,multisampling:R=8,frameBufferType:I=HalfFloatType},N)=>{const{gl:L,scene:F,camera:H,size:z}=useThree(),U=u||F,G=n||H,[Y,K,Z]=reactExports.useMemo(()=>{const de=new EffectComposer(L,{depthBuffer:w,stencilBuffer:T,multisampling:R,frameBufferType:I});de.addPass(new RenderPass(U,G));let se=null,ne=null;return C&&(ne=new NormalPass(U,G),ne.enabled=!1,de.addPass(ne),f!==void 0&&(se=new DepthDownsamplingPass({normalBuffer:ne.texture,resolutionScale:f}),se.enabled=!1,de.addPass(se))),[de,ne,se]},[G,L,w,T,R,I,U,C,f]);reactExports.useEffect(()=>Y?.setSize(z.width,z.height),[Y,z]),useFrame((de,se)=>{if(y){const ne=L.autoClear;L.autoClear=A,T&&!A&&L.clearStencil(),Y.render(se),L.autoClear=ne}},y?S:0);const J=reactExports.useRef(null);reactExports.useLayoutEffect(()=>{const de=[],se=J.current.__r3f;if(se&&Y){const ne=se.children;for(let ge=0;ge<ne.length;ge++){const Ee=ne[ge].object;if(Ee instanceof Effect){const we=[Ee];if(!ie(Ee)){let Be=null;for(;(Be=ne[ge+1]?.object)instanceof Effect&&!ie(Be);)we.push(Be),ge++}const Ie=new EffectPass(G,...we);de.push(Ie)}else Ee instanceof Pass&&de.push(Ee)}for(const ge of de)Y?.addPass(ge);K&&(K.enabled=!0),Z&&(Z.enabled=!0)}return()=>{for(const ne of de)Y?.removePass(ne);K&&(K.enabled=!1),Z&&(Z.enabled=!1)}},[Y,s,G,K,Z]),reactExports.useEffect(()=>{const de=L.toneMapping;return L.toneMapping=NoToneMapping,()=>{L.toneMapping=de}},[L]);const te=reactExports.useMemo(()=>({composer:Y,normalPass:K,downSamplingPass:Z,resolutionScale:f,camera:G,scene:U}),[Y,K,Z,f,G,U]);return reactExports.useImperativeHandle(N,()=>Y,[Y]),jsxRuntimeExports.jsx(D.Provider,{value:te,children:jsxRuntimeExports.jsx("group",{ref:J,children:s})})}));let vt=0;const le=new WeakMap,P=(s,n)=>function({blendFunction:u=n?.blendFunction,opacity:f=n?.opacity,...y}){let S=le.get(s);if(!S){const C=`@react-three/postprocessing/${s.name}-${vt++}`;extend({[C]:s}),le.set(s,S=C)}const A=useThree(C=>C.camera),w=React.useMemo(()=>[...n?.args??[],...y.args??[{...n,...y}]],[JSON.stringify(y)]);return jsxRuntimeExports.jsx(S,{camera:A,"blendMode-blendFunction":u,"blendMode-opacity-value":f,...y,args:w})},wt=P(BloomEffect,{blendFunction:0}),v1=new Vector3,v2=new Vector3,v3=new Vector3,v4=new Vector2;function defaultCalculatePosition(s,n,u){const f=v1.setFromMatrixPosition(s.matrixWorld);f.project(n);const y=u.width/2,S=u.height/2;return[f.x*y+y,-(f.y*S)+S]}function isObjectBehindCamera(s,n){const u=v1.setFromMatrixPosition(s.matrixWorld),f=v2.setFromMatrixPosition(n.matrixWorld),y=u.sub(f),S=n.getWorldDirection(v3);return y.angleTo(S)>Math.PI/2}function isObjectVisible(s,n,u,f){const y=v1.setFromMatrixPosition(s.matrixWorld),S=y.clone();S.project(n),v4.set(S.x,S.y),u.setFromCamera(v4,n);const A=u.intersectObjects(f,!0);if(A.length){const w=A[0].distance;return y.distanceTo(u.ray.origin)<w}return!0}function objectScale(s,n){if(n instanceof OrthographicCamera)return n.zoom;if(n instanceof PerspectiveCamera){const u=v1.setFromMatrixPosition(s.matrixWorld),f=v2.setFromMatrixPosition(n.matrixWorld),y=n.fov*Math.PI/180,S=u.distanceTo(f);return 1/(2*Math.tan(y/2)*S)}else return 1}function objectZIndex(s,n,u){if(n instanceof PerspectiveCamera||n instanceof OrthographicCamera){const f=v1.setFromMatrixPosition(s.matrixWorld),y=v2.setFromMatrixPosition(n.matrixWorld),S=f.distanceTo(y),A=(u[1]-u[0])/(n.far-n.near),w=u[1]-A*n.far;return Math.round(A*S+w)}}const epsilon=s=>Math.abs(s)<1e-10?0:s;function getCSSMatrix(s,n,u=""){let f="matrix3d(";for(let y=0;y!==16;y++)f+=epsilon(n[y]*s.elements[y])+(y!==15?",":")");return u+f}const getCameraCSSMatrix=(s=>n=>getCSSMatrix(n,s))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),getObjectCSSMatrix=(s=>(n,u)=>getCSSMatrix(n,s(u),"translate(-50%,-50%)"))(s=>[1/s,1/s,1/s,1,-1/s,-1/s,-1/s,-1,1/s,1/s,1/s,1,1,1,1,1]);function isRefObject(s){return s&&typeof s=="object"&&"current"in s}const Html=reactExports.forwardRef(({children:s,eps:n=.001,style:u,className:f,prepend:y,center:S,fullscreen:A,portal:w,distanceFactor:C,sprite:T=!1,transform:R=!1,occlude:I,onOcclude:N,castShadow:L,receiveShadow:F,material:H,geometry:z,zIndexRange:U=[16777271,0],calculatePosition:G=defaultCalculatePosition,as:Y="div",wrapperClass:K,pointerEvents:Z="auto",...J},te)=>{const{gl:de,camera:se,scene:ne,size:ge,raycaster:Ee,events:we,viewport:Ie}=useThree(),[Be]=reactExports.useState(()=>document.createElement(Y)),Me=reactExports.useRef(null),Re=reactExports.useRef(null),Te=reactExports.useRef(0),Se=reactExports.useRef([0,0]),oe=reactExports.useRef(null),ae=reactExports.useRef(null),be=w?.current||we.connected||de.domElement.parentNode,he=reactExports.useRef(null),ue=reactExports.useRef(!1),ye=reactExports.useMemo(()=>I&&I!=="blending"||Array.isArray(I)&&I.length&&isRefObject(I[0]),[I]);reactExports.useLayoutEffect(()=>{const $e=de.domElement;I&&I==="blending"?($e.style.zIndex=`${Math.floor(U[0]/2)}`,$e.style.position="absolute",$e.style.pointerEvents="none"):($e.style.zIndex=null,$e.style.position=null,$e.style.pointerEvents=null)},[I]),reactExports.useLayoutEffect(()=>{if(Re.current){const $e=Me.current=clientExports.createRoot(Be);if(ne.updateMatrixWorld(),R)Be.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const xe=G(Re.current,se,ge);Be.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${xe[0]}px,${xe[1]}px,0);transform-origin:0 0;`}return be&&(y?be.prepend(Be):be.appendChild(Be)),()=>{be&&be.removeChild(Be),$e.unmount()}}},[be,R]),reactExports.useLayoutEffect(()=>{K&&(Be.className=K)},[K]);const ce=reactExports.useMemo(()=>R?{position:"absolute",top:0,left:0,width:ge.width,height:ge.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:S?"translate3d(-50%,-50%,0)":"none",...A&&{top:-ge.height/2,left:-ge.width/2,width:ge.width,height:ge.height},...u},[u,S,A,ge,R]),_e=reactExports.useMemo(()=>({position:"absolute",pointerEvents:Z}),[Z]);reactExports.useLayoutEffect(()=>{if(ue.current=!1,R){var $e;($e=Me.current)==null||$e.render(reactExports.createElement("div",{ref:oe,style:ce},reactExports.createElement("div",{ref:ae,style:_e},reactExports.createElement("div",{ref:te,className:f,style:u,children:s}))))}else{var xe;(xe=Me.current)==null||xe.render(reactExports.createElement("div",{ref:te,style:ce,className:f,children:s}))}});const ke=reactExports.useRef(!0);useFrame($e=>{if(Re.current){se.updateMatrixWorld(),Re.current.updateWorldMatrix(!0,!1);const xe=R?Se.current:G(Re.current,se,ge);if(R||Math.abs(Te.current-se.zoom)>n||Math.abs(Se.current[0]-xe[0])>n||Math.abs(Se.current[1]-xe[1])>n){const Ne=isObjectBehindCamera(Re.current,se);let je=!1;ye&&(Array.isArray(I)?je=I.map(ot=>ot.current):I!=="blending"&&(je=[ne]));const He=ke.current;if(je){const ot=isObjectVisible(Re.current,se,Ee,je);ke.current=ot&&!Ne}else ke.current=!Ne;He!==ke.current&&(N?N(!ke.current):Be.style.display=ke.current?"block":"none");const Ye=Math.floor(U[0]/2),Je=I?ye?[U[0],Ye]:[Ye-1,0]:U;if(Be.style.zIndex=`${objectZIndex(Re.current,se,Je)}`,R){const[ot,ze]=[ge.width/2,ge.height/2],pt=se.projectionMatrix.elements[5]*ze,{isOrthographicCamera:yt,top:ut,left:Et,bottom:qe,right:Le}=se,lt=getCameraCSSMatrix(se.matrixWorldInverse),We=yt?`scale(${pt})translate(${epsilon(-(Le+Et)/2)}px,${epsilon((ut+qe)/2)}px)`:`translateZ(${pt}px)`;let Qe=Re.current.matrixWorld;T&&(Qe=se.matrixWorldInverse.clone().transpose().copyPosition(Qe).scale(Re.current.scale),Qe.elements[3]=Qe.elements[7]=Qe.elements[11]=0,Qe.elements[15]=1),Be.style.width=ge.width+"px",Be.style.height=ge.height+"px",Be.style.perspective=yt?"":`${pt}px`,oe.current&&ae.current&&(oe.current.style.transform=`${We}${lt}translate(${ot}px,${ze}px)`,ae.current.style.transform=getObjectCSSMatrix(Qe,1/((C||10)/400)))}else{const ot=C===void 0?1:objectScale(Re.current,se)*C;Be.style.transform=`translate3d(${xe[0]}px,${xe[1]}px,0) scale(${ot})`}Se.current=xe,Te.current=se.zoom}}if(!ye&&he.current&&!ue.current)if(R){if(oe.current){const xe=oe.current.children[0];if(xe!=null&&xe.clientWidth&&xe!=null&&xe.clientHeight){const{isOrthographicCamera:Ne}=se;if(Ne||z)J.scale&&(Array.isArray(J.scale)?J.scale instanceof Vector3?he.current.scale.copy(J.scale.clone().divideScalar(1)):he.current.scale.set(1/J.scale[0],1/J.scale[1],1/J.scale[2]):he.current.scale.setScalar(1/J.scale));else{const je=(C||10)/400,He=xe.clientWidth*je,Ye=xe.clientHeight*je;he.current.scale.set(He,Ye,1)}ue.current=!0}}}else{const xe=Be.children[0];if(xe!=null&&xe.clientWidth&&xe!=null&&xe.clientHeight){const Ne=1/Ie.factor,je=xe.clientWidth*Ne,He=xe.clientHeight*Ne;he.current.scale.set(je,He,1),ue.current=!0}he.current.lookAt($e.camera.position)}});const Pe=reactExports.useMemo(()=>({vertexShader:R?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom"
            is false.
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;

            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[R]);return reactExports.createElement("group",_extends({},J,{ref:Re}),I&&!ye&&reactExports.createElement("mesh",{castShadow:L,receiveShadow:F,ref:he},z||reactExports.createElement("planeGeometry",null),H||reactExports.createElement("shaderMaterial",{side:DoubleSide,vertexShader:Pe.vertexShader,fragmentShader:Pe.fragmentShader})))}),version$1=parseInt(REVISION.replace(/\D+/g,""));function toTrianglesDrawMode(s,n){if(n===TrianglesDrawMode)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),s;if(n===TriangleFanDrawMode||n===TriangleStripDrawMode){let u=s.getIndex();if(u===null){const A=[],w=s.getAttribute("position");if(w!==void 0){for(let C=0;C<w.count;C++)A.push(C);s.setIndex(A),u=s.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),s}const f=u.count-2,y=[];if(u)if(n===TriangleFanDrawMode)for(let A=1;A<=f;A++)y.push(u.getX(0)),y.push(u.getX(A)),y.push(u.getX(A+1));else for(let A=0;A<f;A++)A%2===0?(y.push(u.getX(A)),y.push(u.getX(A+1)),y.push(u.getX(A+2))):(y.push(u.getX(A+2)),y.push(u.getX(A+1)),y.push(u.getX(A)));y.length/3!==f&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const S=s.clone();return S.setIndex(y),S.clearGroups(),S}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",n),s}function toCreasedNormals(s,n=Math.PI/3){const u=Math.cos(n),f=(1+1e-10)*100,y=[new Vector3,new Vector3,new Vector3],S=new Vector3,A=new Vector3,w=new Vector3,C=new Vector3;function T(H){const z=~~(H.x*f),U=~~(H.y*f),G=~~(H.z*f);return`${z},${U},${G}`}const R=s.index?s.toNonIndexed():s,I=R.attributes.position,N={};for(let H=0,z=I.count/3;H<z;H++){const U=3*H,G=y[0].fromBufferAttribute(I,U+0),Y=y[1].fromBufferAttribute(I,U+1),K=y[2].fromBufferAttribute(I,U+2);S.subVectors(K,Y),A.subVectors(G,Y);const Z=new Vector3().crossVectors(S,A).normalize();for(let J=0;J<3;J++){const te=y[J],de=T(te);de in N||(N[de]=[]),N[de].push(Z)}}const L=new Float32Array(I.count*3),F=new BufferAttribute(L,3,!1);for(let H=0,z=I.count/3;H<z;H++){const U=3*H,G=y[0].fromBufferAttribute(I,U+0),Y=y[1].fromBufferAttribute(I,U+1),K=y[2].fromBufferAttribute(I,U+2);S.subVectors(K,Y),A.subVectors(G,Y),w.crossVectors(S,A).normalize();for(let Z=0;Z<3;Z++){const J=y[Z],te=T(J),de=N[te];C.set(0,0,0);for(let se=0,ne=de.length;se<ne;se++){const ge=de[se];w.dot(ge)>u&&C.add(ge)}C.normalize(),F.setXYZ(U+Z,C.x,C.y,C.z)}}return R.setAttribute("normal",F),R}var u8=Uint8Array,u16=Uint16Array,u32=Uint32Array,fleb=new u8([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),fdeb=new u8([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),clim=new u8([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),freb=function(s,n){for(var u=new u16(31),f=0;f<31;++f)u[f]=n+=1<<s[f-1];for(var y=new u32(u[30]),f=1;f<30;++f)for(var S=u[f];S<u[f+1];++S)y[S]=S-u[f]<<5|f;return[u,y]},_a=freb(fleb,2),fl=_a[0],revfl=_a[1];fl[28]=258,revfl[258]=28;var _b=freb(fdeb,0),fd=_b[0],rev=new u16(32768);for(var i=0;i<32768;++i){var x=(i&43690)>>>1|(i&21845)<<1;x=(x&52428)>>>2|(x&13107)<<2,x=(x&61680)>>>4|(x&3855)<<4,rev[i]=((x&65280)>>>8|(x&255)<<8)>>>1}var hMap=(function(s,n,u){for(var f=s.length,y=0,S=new u16(n);y<f;++y)++S[s[y]-1];var A=new u16(n);for(y=0;y<n;++y)A[y]=A[y-1]+S[y-1]<<1;var w;if(u){w=new u16(1<<n);var C=15-n;for(y=0;y<f;++y)if(s[y])for(var T=y<<4|s[y],R=n-s[y],I=A[s[y]-1]++<<R,N=I|(1<<R)-1;I<=N;++I)w[rev[I]>>>C]=T}else for(w=new u16(f),y=0;y<f;++y)s[y]&&(w[y]=rev[A[s[y]-1]++]>>>15-s[y]);return w}),flt=new u8(288);for(var i=0;i<144;++i)flt[i]=8;for(var i=144;i<256;++i)flt[i]=9;for(var i=256;i<280;++i)flt[i]=7;for(var i=280;i<288;++i)flt[i]=8;var fdt=new u8(32);for(var i=0;i<32;++i)fdt[i]=5;var flrm=hMap(flt,9,1),fdrm=hMap(fdt,5,1),max=function(s){for(var n=s[0],u=1;u<s.length;++u)s[u]>n&&(n=s[u]);return n},bits=function(s,n,u){var f=n/8|0;return(s[f]|s[f+1]<<8)>>(n&7)&u},bits16=function(s,n){var u=n/8|0;return(s[u]|s[u+1]<<8|s[u+2]<<16)>>(n&7)},shft=function(s){return(s/8|0)+(s&7&&1)},slc=function(s,n,u){(u==null||u>s.length)&&(u=s.length);var f=new(s instanceof u16?u16:s instanceof u32?u32:u8)(u-n);return f.set(s.subarray(n,u)),f},inflt=function(s,n,u){var f=s.length;if(!f||u&&!u.l&&f<5)return n||new u8(0);var y=!n||u,S=!u||u.i;u||(u={}),n||(n=new u8(f*3));var A=function(ce){var _e=n.length;if(ce>_e){var ke=new u8(Math.max(_e*2,ce));ke.set(n),n=ke}},w=u.f||0,C=u.p||0,T=u.b||0,R=u.l,I=u.d,N=u.m,L=u.n,F=f*8;do{if(!R){u.f=w=bits(s,C,1);var H=bits(s,C+1,3);if(C+=3,H)if(H==1)R=flrm,I=fdrm,N=9,L=5;else if(H==2){var Y=bits(s,C,31)+257,K=bits(s,C+10,15)+4,Z=Y+bits(s,C+5,31)+1;C+=14;for(var J=new u8(Z),te=new u8(19),de=0;de<K;++de)te[clim[de]]=bits(s,C+de*3,7);C+=K*3;for(var se=max(te),ne=(1<<se)-1,ge=hMap(te,se,1),de=0;de<Z;){var Ee=ge[bits(s,C,ne)];C+=Ee&15;var z=Ee>>>4;if(z<16)J[de++]=z;else{var we=0,Ie=0;for(z==16?(Ie=3+bits(s,C,3),C+=2,we=J[de-1]):z==17?(Ie=3+bits(s,C,7),C+=3):z==18&&(Ie=11+bits(s,C,127),C+=7);Ie--;)J[de++]=we}}var Be=J.subarray(0,Y),Me=J.subarray(Y);N=max(Be),L=max(Me),R=hMap(Be,N,1),I=hMap(Me,L,1)}else throw"invalid block type";else{var z=shft(C)+4,U=s[z-4]|s[z-3]<<8,G=z+U;if(G>f){if(S)throw"unexpected EOF";break}y&&A(T+U),n.set(s.subarray(z,G),T),u.b=T+=U,u.p=C=G*8;continue}if(C>F){if(S)throw"unexpected EOF";break}}y&&A(T+131072);for(var Re=(1<<N)-1,Te=(1<<L)-1,Se=C;;Se=C){var we=R[bits16(s,C)&Re],oe=we>>>4;if(C+=we&15,C>F){if(S)throw"unexpected EOF";break}if(!we)throw"invalid length/literal";if(oe<256)n[T++]=oe;else if(oe==256){Se=C,R=null;break}else{var ae=oe-254;if(oe>264){var de=oe-257,be=fleb[de];ae=bits(s,C,(1<<be)-1)+fl[de],C+=be}var he=I[bits16(s,C)&Te],ue=he>>>4;if(!he)throw"invalid distance";C+=he&15;var Me=fd[ue];if(ue>3){var be=fdeb[ue];Me+=bits16(s,C)&(1<<be)-1,C+=be}if(C>F){if(S)throw"unexpected EOF";break}y&&A(T+131072);for(var ye=T+ae;T<ye;T+=4)n[T]=n[T-Me],n[T+1]=n[T+1-Me],n[T+2]=n[T+2-Me],n[T+3]=n[T+3-Me];T=ye}}u.l=R,u.p=Se,u.b=T,R&&(w=1,u.m=N,u.d=I,u.n=L)}while(!w);return T==n.length?n:slc(n,0,T)},et=new u8(0),zlv=function(s){if((s[0]&15)!=8||s[0]>>>4>7||(s[0]<<8|s[1])%31)throw"invalid zlib data";if(s[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function unzlibSync(s,n){return inflt((zlv(s),s.subarray(2,-4)),n)}var td=typeof TextDecoder<"u"&&new TextDecoder,tds=0;try{td.decode(et,{stream:!0}),tds=1}catch(s){}var __defProp=Object.defineProperty,__defNormalProp=(s,n,u)=>n in s?__defProp(s,n,{enumerable:!0,configurable:!0,writable:!0,value:u}):s[n]=u,__publicField=(s,n,u)=>(__defNormalProp(s,typeof n!="symbol"?n+"":n,u),u);const Sky$1=(()=>{const s={uniforms:{turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new Vector3},up:{value:new Vector3(0,1,0)}},vertexShader:`
      uniform vec3 sunPosition;
      uniform float rayleigh;
      uniform float turbidity;
      uniform float mieCoefficient;
      uniform vec3 up;

      varying vec3 vWorldPosition;
      varying vec3 vSunDirection;
      varying float vSunfade;
      varying vec3 vBetaR;
      varying vec3 vBetaM;
      varying float vSunE;

      // constants for atmospheric scattering
      const float e = 2.71828182845904523536028747135266249775724709369995957;
      const float pi = 3.141592653589793238462643383279502884197169;

      // wavelength of used primaries, according to preetham
      const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );
      // this pre-calcuation replaces older TotalRayleigh(vec3 lambda) function:
      // (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))
      const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );

      // mie stuff
      // K coefficient for the primaries
      const float v = 4.0;
      const vec3 K = vec3( 0.686, 0.678, 0.666 );
      // MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K
      const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );

      // earth shadow hack
      // cutoffAngle = pi / 1.95;
      const float cutoffAngle = 1.6110731556870734;
      const float steepness = 1.5;
      const float EE = 1000.0;

      float sunIntensity( float zenithAngleCos ) {
        zenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );
        return EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );
      }

      vec3 totalMie( float T ) {
        float c = ( 0.2 * T ) * 10E-18;
        return 0.434 * c * MieConst;
      }

      void main() {

        vec4 worldPosition = modelMatrix * vec4( position, 1.0 );
        vWorldPosition = worldPosition.xyz;

        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        gl_Position.z = gl_Position.w; // set z to camera.far

        vSunDirection = normalize( sunPosition );

        vSunE = sunIntensity( dot( vSunDirection, up ) );

        vSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );

        float rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );

      // extinction (absorbtion + out scattering)
      // rayleigh coefficients
        vBetaR = totalRayleigh * rayleighCoefficient;

      // mie coefficients
        vBetaM = totalMie( turbidity ) * mieCoefficient;

      }
    `,fragmentShader:`
      varying vec3 vWorldPosition;
      varying vec3 vSunDirection;
      varying float vSunfade;
      varying vec3 vBetaR;
      varying vec3 vBetaM;
      varying float vSunE;

      uniform float mieDirectionalG;
      uniform vec3 up;

      const vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );

      // constants for atmospheric scattering
      const float pi = 3.141592653589793238462643383279502884197169;

      const float n = 1.0003; // refractive index of air
      const float N = 2.545E25; // number of molecules per unit volume for air at 288.15K and 1013mb (sea level -45 celsius)

      // optical length at zenith for molecules
      const float rayleighZenithLength = 8.4E3;
      const float mieZenithLength = 1.25E3;
      // 66 arc seconds -> degrees, and the cosine of that
      const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;

      // 3.0 / ( 16.0 * pi )
      const float THREE_OVER_SIXTEENPI = 0.05968310365946075;
      // 1.0 / ( 4.0 * pi )
      const float ONE_OVER_FOURPI = 0.07957747154594767;

      float rayleighPhase( float cosTheta ) {
        return THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );
      }

      float hgPhase( float cosTheta, float g ) {
        float g2 = pow( g, 2.0 );
        float inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );
        return ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );
      }

      void main() {

        vec3 direction = normalize( vWorldPosition - cameraPos );

      // optical length
      // cutoff angle at 90 to avoid singularity in next formula.
        float zenithAngle = acos( max( 0.0, dot( up, direction ) ) );
        float inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );
        float sR = rayleighZenithLength * inverse;
        float sM = mieZenithLength * inverse;

      // combined extinction factor
        vec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );

      // in scattering
        float cosTheta = dot( direction, vSunDirection );

        float rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );
        vec3 betaRTheta = vBetaR * rPhase;

        float mPhase = hgPhase( cosTheta, mieDirectionalG );
        vec3 betaMTheta = vBetaM * mPhase;

        vec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );
        Lin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );

      // nightsky
        float theta = acos( direction.y ); // elevation --> y-axis, [-pi/2, pi/2]
        float phi = atan( direction.z, direction.x ); // azimuth --> x-axis [-pi/2, pi/2]
        vec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );
        vec3 L0 = vec3( 0.1 ) * Fex;

      // composition + solar disc
        float sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );
        L0 += ( vSunE * 19000.0 * Fex ) * sundisk;

        vec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );

        vec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );

        gl_FragColor = vec4( retColor, 1.0 );

      #include <tonemapping_fragment>
      #include <${version$1>=154?"colorspace_fragment":"encodings_fragment"}>

      }
    `},n=new ShaderMaterial({name:"SkyShader",fragmentShader:s.fragmentShader,vertexShader:s.vertexShader,uniforms:UniformsUtils.clone(s.uniforms),side:BackSide,depthWrite:!1});class u extends Mesh{constructor(){super(new BoxGeometry(1,1,1),n)}}return __publicField(u,"SkyShader",s),__publicField(u,"material",n),u})(),isCubeTexture=s=>s&&s.isCubeTexture;class GroundProjectedEnv extends Mesh{constructor(n,u){var f,y;const S=isCubeTexture(n),w=((y=S?(f=n.image[0])==null?void 0:f.width:n.image.width)!=null?y:1024)/4,C=Math.floor(Math.log2(w)),T=Math.pow(2,C),R=3*Math.max(T,112),I=4*T,N=[S?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/R}`,`#define CUBEUV_TEXEL_HEIGHT ${1/I}`,`#define CUBEUV_MAX_MIP ${C}.0`],L=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,F=N.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${version$1>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,H={map:{value:n},height:{value:u?.height||15},radius:{value:u?.radius||100}},z=new IcosahedronGeometry(1,16),U=new ShaderMaterial({uniforms:H,fragmentShader:F,vertexShader:L,side:DoubleSide});super(z,U)}set radius(n){this.material.uniforms.radius.value=n}get radius(){return this.material.uniforms.radius.value}set height(n){this.material.uniforms.height.value=n}get height(){return this.material.uniforms.height.value}}function decodeText(s){if(typeof TextDecoder<"u")return new TextDecoder().decode(s);let n="";for(let u=0,f=s.length;u<f;u++)n+=String.fromCharCode(s[u]);try{return decodeURIComponent(escape(n))}catch{return n}}const SRGBColorSpace="srgb",LinearSRGBColorSpace="srgb-linear",sRGBEncoding=3001,LinearEncoding=3e3;class GLTFLoader extends Loader{constructor(n){super(n),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(u){return new GLTFMaterialsClearcoatExtension(u)}),this.register(function(u){return new GLTFMaterialsDispersionExtension(u)}),this.register(function(u){return new GLTFTextureBasisUExtension(u)}),this.register(function(u){return new GLTFTextureWebPExtension(u)}),this.register(function(u){return new GLTFTextureAVIFExtension(u)}),this.register(function(u){return new GLTFMaterialsSheenExtension(u)}),this.register(function(u){return new GLTFMaterialsTransmissionExtension(u)}),this.register(function(u){return new GLTFMaterialsVolumeExtension(u)}),this.register(function(u){return new GLTFMaterialsIorExtension(u)}),this.register(function(u){return new GLTFMaterialsEmissiveStrengthExtension(u)}),this.register(function(u){return new GLTFMaterialsSpecularExtension(u)}),this.register(function(u){return new GLTFMaterialsIridescenceExtension(u)}),this.register(function(u){return new GLTFMaterialsAnisotropyExtension(u)}),this.register(function(u){return new GLTFMaterialsBumpExtension(u)}),this.register(function(u){return new GLTFLightsExtension(u)}),this.register(function(u){return new GLTFMeshoptCompression(u)}),this.register(function(u){return new GLTFMeshGpuInstancing(u)})}load(n,u,f,y){const S=this;let A;if(this.resourcePath!=="")A=this.resourcePath;else if(this.path!==""){const T=LoaderUtils.extractUrlBase(n);A=LoaderUtils.resolveURL(T,this.path)}else A=LoaderUtils.extractUrlBase(n);this.manager.itemStart(n);const w=function(T){y?y(T):console.error(T),S.manager.itemError(n),S.manager.itemEnd(n)},C=new FileLoader(this.manager);C.setPath(this.path),C.setResponseType("arraybuffer"),C.setRequestHeader(this.requestHeader),C.setWithCredentials(this.withCredentials),C.load(n,function(T){try{S.parse(T,A,function(R){u(R),S.manager.itemEnd(n)},w)}catch(R){w(R)}},f,w)}setDRACOLoader(n){return this.dracoLoader=n,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(n){return this.ktx2Loader=n,this}setMeshoptDecoder(n){return this.meshoptDecoder=n,this}register(n){return this.pluginCallbacks.indexOf(n)===-1&&this.pluginCallbacks.push(n),this}unregister(n){return this.pluginCallbacks.indexOf(n)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(n),1),this}parse(n,u,f,y){let S;const A={},w={};if(typeof n=="string")S=JSON.parse(n);else if(n instanceof ArrayBuffer)if(decodeText(new Uint8Array(n.slice(0,4)))===BINARY_EXTENSION_HEADER_MAGIC){try{A[EXTENSIONS.KHR_BINARY_GLTF]=new GLTFBinaryExtension(n)}catch(R){y&&y(R);return}S=JSON.parse(A[EXTENSIONS.KHR_BINARY_GLTF].content)}else S=JSON.parse(decodeText(new Uint8Array(n)));else S=n;if(S.asset===void 0||S.asset.version[0]<2){y&&y(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const C=new GLTFParser(S,{path:u||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});C.fileLoader.setRequestHeader(this.requestHeader);for(let T=0;T<this.pluginCallbacks.length;T++){const R=this.pluginCallbacks[T](C);R.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),w[R.name]=R,A[R.name]=!0}if(S.extensionsUsed)for(let T=0;T<S.extensionsUsed.length;++T){const R=S.extensionsUsed[T],I=S.extensionsRequired||[];switch(R){case EXTENSIONS.KHR_MATERIALS_UNLIT:A[R]=new GLTFMaterialsUnlitExtension;break;case EXTENSIONS.KHR_DRACO_MESH_COMPRESSION:A[R]=new GLTFDracoMeshCompressionExtension(S,this.dracoLoader);break;case EXTENSIONS.KHR_TEXTURE_TRANSFORM:A[R]=new GLTFTextureTransformExtension;break;case EXTENSIONS.KHR_MESH_QUANTIZATION:A[R]=new GLTFMeshQuantizationExtension;break;default:I.indexOf(R)>=0&&w[R]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+R+'".')}}C.setExtensions(A),C.setPlugins(w),C.parse(f,y)}parseAsync(n,u){const f=this;return new Promise(function(y,S){f.parse(n,u,y,S)})}}function GLTFRegistry(){let s={};return{get:function(n){return s[n]},add:function(n,u){s[n]=u},remove:function(n){delete s[n]},removeAll:function(){s={}}}}const EXTENSIONS={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class GLTFLightsExtension{constructor(n){this.parser=n,this.name=EXTENSIONS.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const n=this.parser,u=this.parser.json.nodes||[];for(let f=0,y=u.length;f<y;f++){const S=u[f];S.extensions&&S.extensions[this.name]&&S.extensions[this.name].light!==void 0&&n._addNodeRef(this.cache,S.extensions[this.name].light)}}_loadLight(n){const u=this.parser,f="light:"+n;let y=u.cache.get(f);if(y)return y;const S=u.json,C=((S.extensions&&S.extensions[this.name]||{}).lights||[])[n];let T;const R=new Color(16777215);C.color!==void 0&&R.setRGB(C.color[0],C.color[1],C.color[2],LinearSRGBColorSpace);const I=C.range!==void 0?C.range:0;switch(C.type){case"directional":T=new DirectionalLight(R),T.target.position.set(0,0,-1),T.add(T.target);break;case"point":T=new PointLight(R),T.distance=I;break;case"spot":T=new SpotLight(R),T.distance=I,C.spot=C.spot||{},C.spot.innerConeAngle=C.spot.innerConeAngle!==void 0?C.spot.innerConeAngle:0,C.spot.outerConeAngle=C.spot.outerConeAngle!==void 0?C.spot.outerConeAngle:Math.PI/4,T.angle=C.spot.outerConeAngle,T.penumbra=1-C.spot.innerConeAngle/C.spot.outerConeAngle,T.target.position.set(0,0,-1),T.add(T.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+C.type)}return T.position.set(0,0,0),T.decay=2,assignExtrasToUserData(T,C),C.intensity!==void 0&&(T.intensity=C.intensity),T.name=u.createUniqueName(C.name||"light_"+n),y=Promise.resolve(T),u.cache.add(f,y),y}getDependency(n,u){if(n==="light")return this._loadLight(u)}createNodeAttachment(n){const u=this,f=this.parser,S=f.json.nodes[n],w=(S.extensions&&S.extensions[this.name]||{}).light;return w===void 0?null:this._loadLight(w).then(function(C){return f._getNodeRef(u.cache,w,C)})}}class GLTFMaterialsUnlitExtension{constructor(){this.name=EXTENSIONS.KHR_MATERIALS_UNLIT}getMaterialType(){return MeshBasicMaterial}extendParams(n,u,f){const y=[];n.color=new Color(1,1,1),n.opacity=1;const S=u.pbrMetallicRoughness;if(S){if(Array.isArray(S.baseColorFactor)){const A=S.baseColorFactor;n.color.setRGB(A[0],A[1],A[2],LinearSRGBColorSpace),n.opacity=A[3]}S.baseColorTexture!==void 0&&y.push(f.assignTexture(n,"map",S.baseColorTexture,SRGBColorSpace))}return Promise.all(y)}}class GLTFMaterialsEmissiveStrengthExtension{constructor(n){this.parser=n,this.name=EXTENSIONS.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(n,u){const y=this.parser.json.materials[n];if(!y.extensions||!y.extensions[this.name])return Promise.resolve();const S=y.extensions[this.name].emissiveStrength;return S!==void 0&&(u.emissiveIntensity=S),Promise.resolve()}}class GLTFMaterialsClearcoatExtension{constructor(n){this.parser=n,this.name=EXTENSIONS.KHR_MATERIALS_CLEARCOAT}getMaterialType(n){const f=this.parser.json.materials[n];return!f.extensions||!f.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(n,u){const f=this.parser,y=f.json.materials[n];if(!y.extensions||!y.extensions[this.name])return Promise.resolve();const S=[],A=y.extensions[this.name];if(A.clearcoatFactor!==void 0&&(u.clearcoat=A.clearcoatFactor),A.clearcoatTexture!==void 0&&S.push(f.assignTexture(u,"clearcoatMap",A.clearcoatTexture)),A.clearcoatRoughnessFactor!==void 0&&(u.clearcoatRoughness=A.clearcoatRoughnessFactor),A.clearcoatRoughnessTexture!==void 0&&S.push(f.assignTexture(u,"clearcoatRoughnessMap",A.clearcoatRoughnessTexture)),A.clearcoatNormalTexture!==void 0&&(S.push(f.assignTexture(u,"clearcoatNormalMap",A.clearcoatNormalTexture)),A.clearcoatNormalTexture.scale!==void 0)){const w=A.clearcoatNormalTexture.scale;u.clearcoatNormalScale=new Vector2(w,w)}return Promise.all(S)}}class GLTFMaterialsDispersionExtension{constructor(n){this.parser=n,this.name=EXTENSIONS.KHR_MATERIALS_DISPERSION}getMaterialType(n){const f=this.parser.json.materials[n];return!f.extensions||!f.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(n,u){const y=this.parser.json.materials[n];if(!y.extensions||!y.extensions[this.name])return Promise.resolve();const S=y.extensions[this.name];return u.dispersion=S.dispersion!==void 0?S.dispersion:0,Promise.resolve()}}class GLTFMaterialsIridescenceExtension{constructor(n){this.parser=n,this.name=EXTENSIONS.KHR_MATERIALS_IRIDESCENCE}getMaterialType(n){const f=this.parser.json.materials[n];return!f.extensions||!f.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(n,u){const f=this.parser,y=f.json.materials[n];if(!y.extensions||!y.extensions[this.name])return Promise.resolve();const S=[],A=y.extensions[this.name];return A.iridescenceFactor!==void 0&&(u.iridescence=A.iridescenceFactor),A.iridescenceTexture!==void 0&&S.push(f.assignTexture(u,"iridescenceMap",A.iridescenceTexture)),A.iridescenceIor!==void 0&&(u.iridescenceIOR=A.iridescenceIor),u.iridescenceThicknessRange===void 0&&(u.iridescenceThicknessRange=[100,400]),A.iridescenceThicknessMinimum!==void 0&&(u.iridescenceThicknessRange[0]=A.iridescenceThicknessMinimum),A.iridescenceThicknessMaximum!==void 0&&(u.iridescenceThicknessRange[1]=A.iridescenceThicknessMaximum),A.iridescenceThicknessTexture!==void 0&&S.push(f.assignTexture(u,"iridescenceThicknessMap",A.iridescenceThicknessTexture)),Promise.all(S)}}class GLTFMaterialsSheenExtension{constructor(n){this.parser=n,this.name=EXTENSIONS.KHR_MATERIALS_SHEEN}getMaterialType(n){const f=this.parser.json.materials[n];return!f.extensions||!f.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(n,u){const f=this.parser,y=f.json.materials[n];if(!y.extensions||!y.extensions[this.name])return Promise.resolve();const S=[];u.sheenColor=new Color(0,0,0),u.sheenRoughness=0,u.sheen=1;const A=y.extensions[this.name];if(A.sheenColorFactor!==void 0){const w=A.sheenColorFactor;u.sheenColor.setRGB(w[0],w[1],w[2],LinearSRGBColorSpace)}return A.sheenRoughnessFactor!==void 0&&(u.sheenRoughness=A.sheenRoughnessFactor),A.sheenColorTexture!==void 0&&S.push(f.assignTexture(u,"sheenColorMap",A.sheenColorTexture,SRGBColorSpace)),A.sheenRoughnessTexture!==void 0&&S.push(f.assignTexture(u,"sheenRoughnessMap",A.sheenRoughnessTexture)),Promise.all(S)}}class GLTFMaterialsTransmissionExtension{constructor(n){this.parser=n,this.name=EXTENSIONS.KHR_MATERIALS_TRANSMISSION}getMaterialType(n){const f=this.parser.json.materials[n];return!f.extensions||!f.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(n,u){const f=this.parser,y=f.json.materials[n];if(!y.extensions||!y.extensions[this.name])return Promise.resolve();const S=[],A=y.extensions[this.name];return A.transmissionFactor!==void 0&&(u.transmission=A.transmissionFactor),A.transmissionTexture!==void 0&&S.push(f.assignTexture(u,"transmissionMap",A.transmissionTexture)),Promise.all(S)}}class GLTFMaterialsVolumeExtension{constructor(n){this.parser=n,this.name=EXTENSIONS.KHR_MATERIALS_VOLUME}getMaterialType(n){const f=this.parser.json.materials[n];return!f.extensions||!f.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(n,u){const f=this.parser,y=f.json.materials[n];if(!y.extensions||!y.extensions[this.name])return Promise.resolve();const S=[],A=y.extensions[this.name];u.thickness=A.thicknessFactor!==void 0?A.thicknessFactor:0,A.thicknessTexture!==void 0&&S.push(f.assignTexture(u,"thicknessMap",A.thicknessTexture)),u.attenuationDistance=A.attenuationDistance||1/0;const w=A.attenuationColor||[1,1,1];return u.attenuationColor=new Color().setRGB(w[0],w[1],w[2],LinearSRGBColorSpace),Promise.all(S)}}class GLTFMaterialsIorExtension{constructor(n){this.parser=n,this.name=EXTENSIONS.KHR_MATERIALS_IOR}getMaterialType(n){const f=this.parser.json.materials[n];return!f.extensions||!f.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(n,u){const y=this.parser.json.materials[n];if(!y.extensions||!y.extensions[this.name])return Promise.resolve();const S=y.extensions[this.name];return u.ior=S.ior!==void 0?S.ior:1.5,Promise.resolve()}}class GLTFMaterialsSpecularExtension{constructor(n){this.parser=n,this.name=EXTENSIONS.KHR_MATERIALS_SPECULAR}getMaterialType(n){const f=this.parser.json.materials[n];return!f.extensions||!f.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(n,u){const f=this.parser,y=f.json.materials[n];if(!y.extensions||!y.extensions[this.name])return Promise.resolve();const S=[],A=y.extensions[this.name];u.specularIntensity=A.specularFactor!==void 0?A.specularFactor:1,A.specularTexture!==void 0&&S.push(f.assignTexture(u,"specularIntensityMap",A.specularTexture));const w=A.specularColorFactor||[1,1,1];return u.specularColor=new Color().setRGB(w[0],w[1],w[2],LinearSRGBColorSpace),A.specularColorTexture!==void 0&&S.push(f.assignTexture(u,"specularColorMap",A.specularColorTexture,SRGBColorSpace)),Promise.all(S)}}class GLTFMaterialsBumpExtension{constructor(n){this.parser=n,this.name=EXTENSIONS.EXT_MATERIALS_BUMP}getMaterialType(n){const f=this.parser.json.materials[n];return!f.extensions||!f.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(n,u){const f=this.parser,y=f.json.materials[n];if(!y.extensions||!y.extensions[this.name])return Promise.resolve();const S=[],A=y.extensions[this.name];return u.bumpScale=A.bumpFactor!==void 0?A.bumpFactor:1,A.bumpTexture!==void 0&&S.push(f.assignTexture(u,"bumpMap",A.bumpTexture)),Promise.all(S)}}class GLTFMaterialsAnisotropyExtension{constructor(n){this.parser=n,this.name=EXTENSIONS.KHR_MATERIALS_ANISOTROPY}getMaterialType(n){const f=this.parser.json.materials[n];return!f.extensions||!f.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(n,u){const f=this.parser,y=f.json.materials[n];if(!y.extensions||!y.extensions[this.name])return Promise.resolve();const S=[],A=y.extensions[this.name];return A.anisotropyStrength!==void 0&&(u.anisotropy=A.anisotropyStrength),A.anisotropyRotation!==void 0&&(u.anisotropyRotation=A.anisotropyRotation),A.anisotropyTexture!==void 0&&S.push(f.assignTexture(u,"anisotropyMap",A.anisotropyTexture)),Promise.all(S)}}class GLTFTextureBasisUExtension{constructor(n){this.parser=n,this.name=EXTENSIONS.KHR_TEXTURE_BASISU}loadTexture(n){const u=this.parser,f=u.json,y=f.textures[n];if(!y.extensions||!y.extensions[this.name])return null;const S=y.extensions[this.name],A=u.options.ktx2Loader;if(!A){if(f.extensionsRequired&&f.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return u.loadTextureImage(n,S.source,A)}}class GLTFTextureWebPExtension{constructor(n){this.parser=n,this.name=EXTENSIONS.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(n){const u=this.name,f=this.parser,y=f.json,S=y.textures[n];if(!S.extensions||!S.extensions[u])return null;const A=S.extensions[u],w=y.images[A.source];let C=f.textureLoader;if(w.uri){const T=f.options.manager.getHandler(w.uri);T!==null&&(C=T)}return this.detectSupport().then(function(T){if(T)return f.loadTextureImage(n,A.source,C);if(y.extensionsRequired&&y.extensionsRequired.indexOf(u)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return f.loadTexture(n)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(n){const u=new Image;u.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",u.onload=u.onerror=function(){n(u.height===1)}})),this.isSupported}}class GLTFTextureAVIFExtension{constructor(n){this.parser=n,this.name=EXTENSIONS.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(n){const u=this.name,f=this.parser,y=f.json,S=y.textures[n];if(!S.extensions||!S.extensions[u])return null;const A=S.extensions[u],w=y.images[A.source];let C=f.textureLoader;if(w.uri){const T=f.options.manager.getHandler(w.uri);T!==null&&(C=T)}return this.detectSupport().then(function(T){if(T)return f.loadTextureImage(n,A.source,C);if(y.extensionsRequired&&y.extensionsRequired.indexOf(u)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return f.loadTexture(n)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(n){const u=new Image;u.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",u.onload=u.onerror=function(){n(u.height===1)}})),this.isSupported}}class GLTFMeshoptCompression{constructor(n){this.name=EXTENSIONS.EXT_MESHOPT_COMPRESSION,this.parser=n}loadBufferView(n){const u=this.parser.json,f=u.bufferViews[n];if(f.extensions&&f.extensions[this.name]){const y=f.extensions[this.name],S=this.parser.getDependency("buffer",y.buffer),A=this.parser.options.meshoptDecoder;if(!A||!A.supported){if(u.extensionsRequired&&u.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return S.then(function(w){const C=y.byteOffset||0,T=y.byteLength||0,R=y.count,I=y.byteStride,N=new Uint8Array(w,C,T);return A.decodeGltfBufferAsync?A.decodeGltfBufferAsync(R,I,N,y.mode,y.filter).then(function(L){return L.buffer}):A.ready.then(function(){const L=new ArrayBuffer(R*I);return A.decodeGltfBuffer(new Uint8Array(L),R,I,N,y.mode,y.filter),L})})}else return null}}class GLTFMeshGpuInstancing{constructor(n){this.name=EXTENSIONS.EXT_MESH_GPU_INSTANCING,this.parser=n}createNodeMesh(n){const u=this.parser.json,f=u.nodes[n];if(!f.extensions||!f.extensions[this.name]||f.mesh===void 0)return null;const y=u.meshes[f.mesh];for(const T of y.primitives)if(T.mode!==WEBGL_CONSTANTS.TRIANGLES&&T.mode!==WEBGL_CONSTANTS.TRIANGLE_STRIP&&T.mode!==WEBGL_CONSTANTS.TRIANGLE_FAN&&T.mode!==void 0)return null;const A=f.extensions[this.name].attributes,w=[],C={};for(const T in A)w.push(this.parser.getDependency("accessor",A[T]).then(R=>(C[T]=R,C[T])));return w.length<1?null:(w.push(this.parser.createNodeMesh(n)),Promise.all(w).then(T=>{const R=T.pop(),I=R.isGroup?R.children:[R],N=T[0].count,L=[];for(const F of I){const H=new Matrix4,z=new Vector3,U=new Quaternion,G=new Vector3(1,1,1),Y=new InstancedMesh(F.geometry,F.material,N);for(let K=0;K<N;K++)C.TRANSLATION&&z.fromBufferAttribute(C.TRANSLATION,K),C.ROTATION&&U.fromBufferAttribute(C.ROTATION,K),C.SCALE&&G.fromBufferAttribute(C.SCALE,K),Y.setMatrixAt(K,H.compose(z,U,G));for(const K in C)if(K==="_COLOR_0"){const Z=C[K];Y.instanceColor=new InstancedBufferAttribute(Z.array,Z.itemSize,Z.normalized)}else K!=="TRANSLATION"&&K!=="ROTATION"&&K!=="SCALE"&&F.geometry.setAttribute(K,C[K]);Object3D.prototype.copy.call(Y,F),this.parser.assignFinalMaterial(Y),L.push(Y)}return R.isGroup?(R.clear(),R.add(...L),R):L[0]}))}}const BINARY_EXTENSION_HEADER_MAGIC="glTF",BINARY_EXTENSION_HEADER_LENGTH=12,BINARY_EXTENSION_CHUNK_TYPES={JSON:1313821514,BIN:5130562};class GLTFBinaryExtension{constructor(n){this.name=EXTENSIONS.KHR_BINARY_GLTF,this.content=null,this.body=null;const u=new DataView(n,0,BINARY_EXTENSION_HEADER_LENGTH);if(this.header={magic:decodeText(new Uint8Array(n.slice(0,4))),version:u.getUint32(4,!0),length:u.getUint32(8,!0)},this.header.magic!==BINARY_EXTENSION_HEADER_MAGIC)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const f=this.header.length-BINARY_EXTENSION_HEADER_LENGTH,y=new DataView(n,BINARY_EXTENSION_HEADER_LENGTH);let S=0;for(;S<f;){const A=y.getUint32(S,!0);S+=4;const w=y.getUint32(S,!0);if(S+=4,w===BINARY_EXTENSION_CHUNK_TYPES.JSON){const C=new Uint8Array(n,BINARY_EXTENSION_HEADER_LENGTH+S,A);this.content=decodeText(C)}else if(w===BINARY_EXTENSION_CHUNK_TYPES.BIN){const C=BINARY_EXTENSION_HEADER_LENGTH+S;this.body=n.slice(C,C+A)}S+=A}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class GLTFDracoMeshCompressionExtension{constructor(n,u){if(!u)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=EXTENSIONS.KHR_DRACO_MESH_COMPRESSION,this.json=n,this.dracoLoader=u,this.dracoLoader.preload()}decodePrimitive(n,u){const f=this.json,y=this.dracoLoader,S=n.extensions[this.name].bufferView,A=n.extensions[this.name].attributes,w={},C={},T={};for(const R in A){const I=ATTRIBUTES[R]||R.toLowerCase();w[I]=A[R]}for(const R in n.attributes){const I=ATTRIBUTES[R]||R.toLowerCase();if(A[R]!==void 0){const N=f.accessors[n.attributes[R]],L=WEBGL_COMPONENT_TYPES[N.componentType];T[I]=L.name,C[I]=N.normalized===!0}}return u.getDependency("bufferView",S).then(function(R){return new Promise(function(I,N){y.decodeDracoFile(R,function(L){for(const F in L.attributes){const H=L.attributes[F],z=C[F];z!==void 0&&(H.normalized=z)}I(L)},w,T,LinearSRGBColorSpace,N)})})}}class GLTFTextureTransformExtension{constructor(){this.name=EXTENSIONS.KHR_TEXTURE_TRANSFORM}extendTexture(n,u){return(u.texCoord===void 0||u.texCoord===n.channel)&&u.offset===void 0&&u.rotation===void 0&&u.scale===void 0||(n=n.clone(),u.texCoord!==void 0&&(n.channel=u.texCoord),u.offset!==void 0&&n.offset.fromArray(u.offset),u.rotation!==void 0&&(n.rotation=u.rotation),u.scale!==void 0&&n.repeat.fromArray(u.scale),n.needsUpdate=!0),n}}class GLTFMeshQuantizationExtension{constructor(){this.name=EXTENSIONS.KHR_MESH_QUANTIZATION}}class GLTFCubicSplineInterpolant extends Interpolant{constructor(n,u,f,y){super(n,u,f,y)}copySampleValue_(n){const u=this.resultBuffer,f=this.sampleValues,y=this.valueSize,S=n*y*3+y;for(let A=0;A!==y;A++)u[A]=f[S+A];return u}interpolate_(n,u,f,y){const S=this.resultBuffer,A=this.sampleValues,w=this.valueSize,C=w*2,T=w*3,R=y-u,I=(f-u)/R,N=I*I,L=N*I,F=n*T,H=F-T,z=-2*L+3*N,U=L-N,G=1-z,Y=U-N+I;for(let K=0;K!==w;K++){const Z=A[H+K+w],J=A[H+K+C]*R,te=A[F+K+w],de=A[F+K]*R;S[K]=G*Z+Y*J+z*te+U*de}return S}}const _q=new Quaternion;class GLTFCubicSplineQuaternionInterpolant extends GLTFCubicSplineInterpolant{interpolate_(n,u,f,y){const S=super.interpolate_(n,u,f,y);return _q.fromArray(S).normalize().toArray(S),S}}const WEBGL_CONSTANTS={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},WEBGL_COMPONENT_TYPES={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},WEBGL_FILTERS={9728:NearestFilter,9729:LinearFilter,9984:NearestMipmapNearestFilter,9985:LinearMipmapNearestFilter,9986:NearestMipmapLinearFilter,9987:LinearMipmapLinearFilter},WEBGL_WRAPPINGS={33071:ClampToEdgeWrapping,33648:MirroredRepeatWrapping,10497:RepeatWrapping},WEBGL_TYPE_SIZES={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ATTRIBUTES={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...version$1>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},PATH_PROPERTIES={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},INTERPOLATION={CUBICSPLINE:void 0,LINEAR:InterpolateLinear,STEP:InterpolateDiscrete},ALPHA_MODES={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function createDefaultMaterial(s){return s.DefaultMaterial===void 0&&(s.DefaultMaterial=new MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:FrontSide})),s.DefaultMaterial}function addUnknownExtensionsToUserData(s,n,u){for(const f in u.extensions)s[f]===void 0&&(n.userData.gltfExtensions=n.userData.gltfExtensions||{},n.userData.gltfExtensions[f]=u.extensions[f])}function assignExtrasToUserData(s,n){n.extras!==void 0&&(typeof n.extras=="object"?Object.assign(s.userData,n.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+n.extras))}function addMorphTargets(s,n,u){let f=!1,y=!1,S=!1;for(let T=0,R=n.length;T<R;T++){const I=n[T];if(I.POSITION!==void 0&&(f=!0),I.NORMAL!==void 0&&(y=!0),I.COLOR_0!==void 0&&(S=!0),f&&y&&S)break}if(!f&&!y&&!S)return Promise.resolve(s);const A=[],w=[],C=[];for(let T=0,R=n.length;T<R;T++){const I=n[T];if(f){const N=I.POSITION!==void 0?u.getDependency("accessor",I.POSITION):s.attributes.position;A.push(N)}if(y){const N=I.NORMAL!==void 0?u.getDependency("accessor",I.NORMAL):s.attributes.normal;w.push(N)}if(S){const N=I.COLOR_0!==void 0?u.getDependency("accessor",I.COLOR_0):s.attributes.color;C.push(N)}}return Promise.all([Promise.all(A),Promise.all(w),Promise.all(C)]).then(function(T){const R=T[0],I=T[1],N=T[2];return f&&(s.morphAttributes.position=R),y&&(s.morphAttributes.normal=I),S&&(s.morphAttributes.color=N),s.morphTargetsRelative=!0,s})}function updateMorphTargets(s,n){if(s.updateMorphTargets(),n.weights!==void 0)for(let u=0,f=n.weights.length;u<f;u++)s.morphTargetInfluences[u]=n.weights[u];if(n.extras&&Array.isArray(n.extras.targetNames)){const u=n.extras.targetNames;if(s.morphTargetInfluences.length===u.length){s.morphTargetDictionary={};for(let f=0,y=u.length;f<y;f++)s.morphTargetDictionary[u[f]]=f}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function createPrimitiveKey(s){let n;const u=s.extensions&&s.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION];if(u?n="draco:"+u.bufferView+":"+u.indices+":"+createAttributesKey(u.attributes):n=s.indices+":"+createAttributesKey(s.attributes)+":"+s.mode,s.targets!==void 0)for(let f=0,y=s.targets.length;f<y;f++)n+=":"+createAttributesKey(s.targets[f]);return n}function createAttributesKey(s){let n="";const u=Object.keys(s).sort();for(let f=0,y=u.length;f<y;f++)n+=u[f]+":"+s[u[f]]+";";return n}function getNormalizedComponentScale(s){switch(s){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function getImageURIMimeType(s){return s.search(/\.jpe?g($|\?)/i)>0||s.search(/^data\:image\/jpeg/)===0?"image/jpeg":s.search(/\.webp($|\?)/i)>0||s.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const _identityMatrix=new Matrix4;class GLTFParser{constructor(n={},u={}){this.json=n,this.extensions={},this.plugins={},this.options=u,this.cache=new GLTFRegistry,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let f=!1,y=!1,S=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(f=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,y=navigator.userAgent.indexOf("Firefox")>-1,S=y?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||f||y&&S<98?this.textureLoader=new TextureLoader(this.options.manager):this.textureLoader=new ImageBitmapLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(n){this.extensions=n}setPlugins(n){this.plugins=n}parse(n,u){const f=this,y=this.json,S=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(A){return A._markDefs&&A._markDefs()}),Promise.all(this._invokeAll(function(A){return A.beforeRoot&&A.beforeRoot()})).then(function(){return Promise.all([f.getDependencies("scene"),f.getDependencies("animation"),f.getDependencies("camera")])}).then(function(A){const w={scene:A[0][y.scene||0],scenes:A[0],animations:A[1],cameras:A[2],asset:y.asset,parser:f,userData:{}};return addUnknownExtensionsToUserData(S,w,y),assignExtrasToUserData(w,y),Promise.all(f._invokeAll(function(C){return C.afterRoot&&C.afterRoot(w)})).then(function(){for(const C of w.scenes)C.updateMatrixWorld();n(w)})}).catch(u)}_markDefs(){const n=this.json.nodes||[],u=this.json.skins||[],f=this.json.meshes||[];for(let y=0,S=u.length;y<S;y++){const A=u[y].joints;for(let w=0,C=A.length;w<C;w++)n[A[w]].isBone=!0}for(let y=0,S=n.length;y<S;y++){const A=n[y];A.mesh!==void 0&&(this._addNodeRef(this.meshCache,A.mesh),A.skin!==void 0&&(f[A.mesh].isSkinnedMesh=!0)),A.camera!==void 0&&this._addNodeRef(this.cameraCache,A.camera)}}_addNodeRef(n,u){u!==void 0&&(n.refs[u]===void 0&&(n.refs[u]=n.uses[u]=0),n.refs[u]++)}_getNodeRef(n,u,f){if(n.refs[u]<=1)return f;const y=f.clone(),S=(A,w)=>{const C=this.associations.get(A);C!=null&&this.associations.set(w,C);for(const[T,R]of A.children.entries())S(R,w.children[T])};return S(f,y),y.name+="_instance_"+n.uses[u]++,y}_invokeOne(n){const u=Object.values(this.plugins);u.push(this);for(let f=0;f<u.length;f++){const y=n(u[f]);if(y)return y}return null}_invokeAll(n){const u=Object.values(this.plugins);u.unshift(this);const f=[];for(let y=0;y<u.length;y++){const S=n(u[y]);S&&f.push(S)}return f}getDependency(n,u){const f=n+":"+u;let y=this.cache.get(f);if(!y){switch(n){case"scene":y=this.loadScene(u);break;case"node":y=this._invokeOne(function(S){return S.loadNode&&S.loadNode(u)});break;case"mesh":y=this._invokeOne(function(S){return S.loadMesh&&S.loadMesh(u)});break;case"accessor":y=this.loadAccessor(u);break;case"bufferView":y=this._invokeOne(function(S){return S.loadBufferView&&S.loadBufferView(u)});break;case"buffer":y=this.loadBuffer(u);break;case"material":y=this._invokeOne(function(S){return S.loadMaterial&&S.loadMaterial(u)});break;case"texture":y=this._invokeOne(function(S){return S.loadTexture&&S.loadTexture(u)});break;case"skin":y=this.loadSkin(u);break;case"animation":y=this._invokeOne(function(S){return S.loadAnimation&&S.loadAnimation(u)});break;case"camera":y=this.loadCamera(u);break;default:if(y=this._invokeOne(function(S){return S!=this&&S.getDependency&&S.getDependency(n,u)}),!y)throw new Error("Unknown type: "+n);break}this.cache.add(f,y)}return y}getDependencies(n){let u=this.cache.get(n);if(!u){const f=this,y=this.json[n+(n==="mesh"?"es":"s")]||[];u=Promise.all(y.map(function(S,A){return f.getDependency(n,A)})),this.cache.add(n,u)}return u}loadBuffer(n){const u=this.json.buffers[n],f=this.fileLoader;if(u.type&&u.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+u.type+" buffer type is not supported.");if(u.uri===void 0&&n===0)return Promise.resolve(this.extensions[EXTENSIONS.KHR_BINARY_GLTF].body);const y=this.options;return new Promise(function(S,A){f.load(LoaderUtils.resolveURL(u.uri,y.path),S,void 0,function(){A(new Error('THREE.GLTFLoader: Failed to load buffer "'+u.uri+'".'))})})}loadBufferView(n){const u=this.json.bufferViews[n];return this.getDependency("buffer",u.buffer).then(function(f){const y=u.byteLength||0,S=u.byteOffset||0;return f.slice(S,S+y)})}loadAccessor(n){const u=this,f=this.json,y=this.json.accessors[n];if(y.bufferView===void 0&&y.sparse===void 0){const A=WEBGL_TYPE_SIZES[y.type],w=WEBGL_COMPONENT_TYPES[y.componentType],C=y.normalized===!0,T=new w(y.count*A);return Promise.resolve(new BufferAttribute(T,A,C))}const S=[];return y.bufferView!==void 0?S.push(this.getDependency("bufferView",y.bufferView)):S.push(null),y.sparse!==void 0&&(S.push(this.getDependency("bufferView",y.sparse.indices.bufferView)),S.push(this.getDependency("bufferView",y.sparse.values.bufferView))),Promise.all(S).then(function(A){const w=A[0],C=WEBGL_TYPE_SIZES[y.type],T=WEBGL_COMPONENT_TYPES[y.componentType],R=T.BYTES_PER_ELEMENT,I=R*C,N=y.byteOffset||0,L=y.bufferView!==void 0?f.bufferViews[y.bufferView].byteStride:void 0,F=y.normalized===!0;let H,z;if(L&&L!==I){const U=Math.floor(N/L),G="InterleavedBuffer:"+y.bufferView+":"+y.componentType+":"+U+":"+y.count;let Y=u.cache.get(G);Y||(H=new T(w,U*L,y.count*L/R),Y=new InterleavedBuffer(H,L/R),u.cache.add(G,Y)),z=new InterleavedBufferAttribute(Y,C,N%L/R,F)}else w===null?H=new T(y.count*C):H=new T(w,N,y.count*C),z=new BufferAttribute(H,C,F);if(y.sparse!==void 0){const U=WEBGL_TYPE_SIZES.SCALAR,G=WEBGL_COMPONENT_TYPES[y.sparse.indices.componentType],Y=y.sparse.indices.byteOffset||0,K=y.sparse.values.byteOffset||0,Z=new G(A[1],Y,y.sparse.count*U),J=new T(A[2],K,y.sparse.count*C);w!==null&&(z=new BufferAttribute(z.array.slice(),z.itemSize,z.normalized));for(let te=0,de=Z.length;te<de;te++){const se=Z[te];if(z.setX(se,J[te*C]),C>=2&&z.setY(se,J[te*C+1]),C>=3&&z.setZ(se,J[te*C+2]),C>=4&&z.setW(se,J[te*C+3]),C>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return z})}loadTexture(n){const u=this.json,f=this.options,S=u.textures[n].source,A=u.images[S];let w=this.textureLoader;if(A.uri){const C=f.manager.getHandler(A.uri);C!==null&&(w=C)}return this.loadTextureImage(n,S,w)}loadTextureImage(n,u,f){const y=this,S=this.json,A=S.textures[n],w=S.images[u],C=(w.uri||w.bufferView)+":"+A.sampler;if(this.textureCache[C])return this.textureCache[C];const T=this.loadImageSource(u,f).then(function(R){R.flipY=!1,R.name=A.name||w.name||"",R.name===""&&typeof w.uri=="string"&&w.uri.startsWith("data:image/")===!1&&(R.name=w.uri);const N=(S.samplers||{})[A.sampler]||{};return R.magFilter=WEBGL_FILTERS[N.magFilter]||LinearFilter,R.minFilter=WEBGL_FILTERS[N.minFilter]||LinearMipmapLinearFilter,R.wrapS=WEBGL_WRAPPINGS[N.wrapS]||RepeatWrapping,R.wrapT=WEBGL_WRAPPINGS[N.wrapT]||RepeatWrapping,y.associations.set(R,{textures:n}),R}).catch(function(){return null});return this.textureCache[C]=T,T}loadImageSource(n,u){const f=this,y=this.json,S=this.options;if(this.sourceCache[n]!==void 0)return this.sourceCache[n].then(I=>I.clone());const A=y.images[n],w=self.URL||self.webkitURL;let C=A.uri||"",T=!1;if(A.bufferView!==void 0)C=f.getDependency("bufferView",A.bufferView).then(function(I){T=!0;const N=new Blob([I],{type:A.mimeType});return C=w.createObjectURL(N),C});else if(A.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+n+" is missing URI and bufferView");const R=Promise.resolve(C).then(function(I){return new Promise(function(N,L){let F=N;u.isImageBitmapLoader===!0&&(F=function(H){const z=new Texture(H);z.needsUpdate=!0,N(z)}),u.load(LoaderUtils.resolveURL(I,S.path),F,void 0,L)})}).then(function(I){return T===!0&&w.revokeObjectURL(C),assignExtrasToUserData(I,A),I.userData.mimeType=A.mimeType||getImageURIMimeType(A.uri),I}).catch(function(I){throw console.error("THREE.GLTFLoader: Couldn't load texture",C),I});return this.sourceCache[n]=R,R}assignTexture(n,u,f,y){const S=this;return this.getDependency("texture",f.index).then(function(A){if(!A)return null;if(f.texCoord!==void 0&&f.texCoord>0&&(A=A.clone(),A.channel=f.texCoord),S.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM]){const w=f.extensions!==void 0?f.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM]:void 0;if(w){const C=S.associations.get(A);A=S.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM].extendTexture(A,w),S.associations.set(A,C)}}return y!==void 0&&(typeof y=="number"&&(y=y===sRGBEncoding?SRGBColorSpace:LinearSRGBColorSpace),"colorSpace"in A?A.colorSpace=y:A.encoding=y===SRGBColorSpace?sRGBEncoding:LinearEncoding),n[u]=A,A})}assignFinalMaterial(n){const u=n.geometry;let f=n.material;const y=u.attributes.tangent===void 0,S=u.attributes.color!==void 0,A=u.attributes.normal===void 0;if(n.isPoints){const w="PointsMaterial:"+f.uuid;let C=this.cache.get(w);C||(C=new PointsMaterial,Material.prototype.copy.call(C,f),C.color.copy(f.color),C.map=f.map,C.sizeAttenuation=!1,this.cache.add(w,C)),f=C}else if(n.isLine){const w="LineBasicMaterial:"+f.uuid;let C=this.cache.get(w);C||(C=new LineBasicMaterial,Material.prototype.copy.call(C,f),C.color.copy(f.color),C.map=f.map,this.cache.add(w,C)),f=C}if(y||S||A){let w="ClonedMaterial:"+f.uuid+":";y&&(w+="derivative-tangents:"),S&&(w+="vertex-colors:"),A&&(w+="flat-shading:");let C=this.cache.get(w);C||(C=f.clone(),S&&(C.vertexColors=!0),A&&(C.flatShading=!0),y&&(C.normalScale&&(C.normalScale.y*=-1),C.clearcoatNormalScale&&(C.clearcoatNormalScale.y*=-1)),this.cache.add(w,C),this.associations.set(C,this.associations.get(f))),f=C}n.material=f}getMaterialType(){return MeshStandardMaterial}loadMaterial(n){const u=this,f=this.json,y=this.extensions,S=f.materials[n];let A;const w={},C=S.extensions||{},T=[];if(C[EXTENSIONS.KHR_MATERIALS_UNLIT]){const I=y[EXTENSIONS.KHR_MATERIALS_UNLIT];A=I.getMaterialType(),T.push(I.extendParams(w,S,u))}else{const I=S.pbrMetallicRoughness||{};if(w.color=new Color(1,1,1),w.opacity=1,Array.isArray(I.baseColorFactor)){const N=I.baseColorFactor;w.color.setRGB(N[0],N[1],N[2],LinearSRGBColorSpace),w.opacity=N[3]}I.baseColorTexture!==void 0&&T.push(u.assignTexture(w,"map",I.baseColorTexture,SRGBColorSpace)),w.metalness=I.metallicFactor!==void 0?I.metallicFactor:1,w.roughness=I.roughnessFactor!==void 0?I.roughnessFactor:1,I.metallicRoughnessTexture!==void 0&&(T.push(u.assignTexture(w,"metalnessMap",I.metallicRoughnessTexture)),T.push(u.assignTexture(w,"roughnessMap",I.metallicRoughnessTexture))),A=this._invokeOne(function(N){return N.getMaterialType&&N.getMaterialType(n)}),T.push(Promise.all(this._invokeAll(function(N){return N.extendMaterialParams&&N.extendMaterialParams(n,w)})))}S.doubleSided===!0&&(w.side=DoubleSide);const R=S.alphaMode||ALPHA_MODES.OPAQUE;if(R===ALPHA_MODES.BLEND?(w.transparent=!0,w.depthWrite=!1):(w.transparent=!1,R===ALPHA_MODES.MASK&&(w.alphaTest=S.alphaCutoff!==void 0?S.alphaCutoff:.5)),S.normalTexture!==void 0&&A!==MeshBasicMaterial&&(T.push(u.assignTexture(w,"normalMap",S.normalTexture)),w.normalScale=new Vector2(1,1),S.normalTexture.scale!==void 0)){const I=S.normalTexture.scale;w.normalScale.set(I,I)}if(S.occlusionTexture!==void 0&&A!==MeshBasicMaterial&&(T.push(u.assignTexture(w,"aoMap",S.occlusionTexture)),S.occlusionTexture.strength!==void 0&&(w.aoMapIntensity=S.occlusionTexture.strength)),S.emissiveFactor!==void 0&&A!==MeshBasicMaterial){const I=S.emissiveFactor;w.emissive=new Color().setRGB(I[0],I[1],I[2],LinearSRGBColorSpace)}return S.emissiveTexture!==void 0&&A!==MeshBasicMaterial&&T.push(u.assignTexture(w,"emissiveMap",S.emissiveTexture,SRGBColorSpace)),Promise.all(T).then(function(){const I=new A(w);return S.name&&(I.name=S.name),assignExtrasToUserData(I,S),u.associations.set(I,{materials:n}),S.extensions&&addUnknownExtensionsToUserData(y,I,S),I})}createUniqueName(n){const u=PropertyBinding.sanitizeNodeName(n||"");return u in this.nodeNamesUsed?u+"_"+ ++this.nodeNamesUsed[u]:(this.nodeNamesUsed[u]=0,u)}loadGeometries(n){const u=this,f=this.extensions,y=this.primitiveCache;function S(w){return f[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(w,u).then(function(C){return addPrimitiveAttributes(C,w,u)})}const A=[];for(let w=0,C=n.length;w<C;w++){const T=n[w],R=createPrimitiveKey(T),I=y[R];if(I)A.push(I.promise);else{let N;T.extensions&&T.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION]?N=S(T):N=addPrimitiveAttributes(new BufferGeometry,T,u),y[R]={primitive:T,promise:N},A.push(N)}}return Promise.all(A)}loadMesh(n){const u=this,f=this.json,y=this.extensions,S=f.meshes[n],A=S.primitives,w=[];for(let C=0,T=A.length;C<T;C++){const R=A[C].material===void 0?createDefaultMaterial(this.cache):this.getDependency("material",A[C].material);w.push(R)}return w.push(u.loadGeometries(A)),Promise.all(w).then(function(C){const T=C.slice(0,C.length-1),R=C[C.length-1],I=[];for(let L=0,F=R.length;L<F;L++){const H=R[L],z=A[L];let U;const G=T[L];if(z.mode===WEBGL_CONSTANTS.TRIANGLES||z.mode===WEBGL_CONSTANTS.TRIANGLE_STRIP||z.mode===WEBGL_CONSTANTS.TRIANGLE_FAN||z.mode===void 0)U=S.isSkinnedMesh===!0?new SkinnedMesh(H,G):new Mesh(H,G),U.isSkinnedMesh===!0&&U.normalizeSkinWeights(),z.mode===WEBGL_CONSTANTS.TRIANGLE_STRIP?U.geometry=toTrianglesDrawMode(U.geometry,TriangleStripDrawMode):z.mode===WEBGL_CONSTANTS.TRIANGLE_FAN&&(U.geometry=toTrianglesDrawMode(U.geometry,TriangleFanDrawMode));else if(z.mode===WEBGL_CONSTANTS.LINES)U=new LineSegments(H,G);else if(z.mode===WEBGL_CONSTANTS.LINE_STRIP)U=new Line(H,G);else if(z.mode===WEBGL_CONSTANTS.LINE_LOOP)U=new LineLoop(H,G);else if(z.mode===WEBGL_CONSTANTS.POINTS)U=new Points(H,G);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+z.mode);Object.keys(U.geometry.morphAttributes).length>0&&updateMorphTargets(U,S),U.name=u.createUniqueName(S.name||"mesh_"+n),assignExtrasToUserData(U,S),z.extensions&&addUnknownExtensionsToUserData(y,U,z),u.assignFinalMaterial(U),I.push(U)}for(let L=0,F=I.length;L<F;L++)u.associations.set(I[L],{meshes:n,primitives:L});if(I.length===1)return S.extensions&&addUnknownExtensionsToUserData(y,I[0],S),I[0];const N=new Group;S.extensions&&addUnknownExtensionsToUserData(y,N,S),u.associations.set(N,{meshes:n});for(let L=0,F=I.length;L<F;L++)N.add(I[L]);return N})}loadCamera(n){let u;const f=this.json.cameras[n],y=f[f.type];if(!y){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return f.type==="perspective"?u=new PerspectiveCamera(MathUtils.radToDeg(y.yfov),y.aspectRatio||1,y.znear||1,y.zfar||2e6):f.type==="orthographic"&&(u=new OrthographicCamera(-y.xmag,y.xmag,y.ymag,-y.ymag,y.znear,y.zfar)),f.name&&(u.name=this.createUniqueName(f.name)),assignExtrasToUserData(u,f),Promise.resolve(u)}loadSkin(n){const u=this.json.skins[n],f=[];for(let y=0,S=u.joints.length;y<S;y++)f.push(this._loadNodeShallow(u.joints[y]));return u.inverseBindMatrices!==void 0?f.push(this.getDependency("accessor",u.inverseBindMatrices)):f.push(null),Promise.all(f).then(function(y){const S=y.pop(),A=y,w=[],C=[];for(let T=0,R=A.length;T<R;T++){const I=A[T];if(I){w.push(I);const N=new Matrix4;S!==null&&N.fromArray(S.array,T*16),C.push(N)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',u.joints[T])}return new Skeleton(w,C)})}loadAnimation(n){const u=this.json,f=this,y=u.animations[n],S=y.name?y.name:"animation_"+n,A=[],w=[],C=[],T=[],R=[];for(let I=0,N=y.channels.length;I<N;I++){const L=y.channels[I],F=y.samplers[L.sampler],H=L.target,z=H.node,U=y.parameters!==void 0?y.parameters[F.input]:F.input,G=y.parameters!==void 0?y.parameters[F.output]:F.output;H.node!==void 0&&(A.push(this.getDependency("node",z)),w.push(this.getDependency("accessor",U)),C.push(this.getDependency("accessor",G)),T.push(F),R.push(H))}return Promise.all([Promise.all(A),Promise.all(w),Promise.all(C),Promise.all(T),Promise.all(R)]).then(function(I){const N=I[0],L=I[1],F=I[2],H=I[3],z=I[4],U=[];for(let G=0,Y=N.length;G<Y;G++){const K=N[G],Z=L[G],J=F[G],te=H[G],de=z[G];if(K===void 0)continue;K.updateMatrix&&K.updateMatrix();const se=f._createAnimationTracks(K,Z,J,te,de);if(se)for(let ne=0;ne<se.length;ne++)U.push(se[ne])}return new AnimationClip(S,void 0,U)})}createNodeMesh(n){const u=this.json,f=this,y=u.nodes[n];return y.mesh===void 0?null:f.getDependency("mesh",y.mesh).then(function(S){const A=f._getNodeRef(f.meshCache,y.mesh,S);return y.weights!==void 0&&A.traverse(function(w){if(w.isMesh)for(let C=0,T=y.weights.length;C<T;C++)w.morphTargetInfluences[C]=y.weights[C]}),A})}loadNode(n){const u=this.json,f=this,y=u.nodes[n],S=f._loadNodeShallow(n),A=[],w=y.children||[];for(let T=0,R=w.length;T<R;T++)A.push(f.getDependency("node",w[T]));const C=y.skin===void 0?Promise.resolve(null):f.getDependency("skin",y.skin);return Promise.all([S,Promise.all(A),C]).then(function(T){const R=T[0],I=T[1],N=T[2];N!==null&&R.traverse(function(L){L.isSkinnedMesh&&L.bind(N,_identityMatrix)});for(let L=0,F=I.length;L<F;L++)R.add(I[L]);return R})}_loadNodeShallow(n){const u=this.json,f=this.extensions,y=this;if(this.nodeCache[n]!==void 0)return this.nodeCache[n];const S=u.nodes[n],A=S.name?y.createUniqueName(S.name):"",w=[],C=y._invokeOne(function(T){return T.createNodeMesh&&T.createNodeMesh(n)});return C&&w.push(C),S.camera!==void 0&&w.push(y.getDependency("camera",S.camera).then(function(T){return y._getNodeRef(y.cameraCache,S.camera,T)})),y._invokeAll(function(T){return T.createNodeAttachment&&T.createNodeAttachment(n)}).forEach(function(T){w.push(T)}),this.nodeCache[n]=Promise.all(w).then(function(T){let R;if(S.isBone===!0?R=new Bone:T.length>1?R=new Group:T.length===1?R=T[0]:R=new Object3D,R!==T[0])for(let I=0,N=T.length;I<N;I++)R.add(T[I]);if(S.name&&(R.userData.name=S.name,R.name=A),assignExtrasToUserData(R,S),S.extensions&&addUnknownExtensionsToUserData(f,R,S),S.matrix!==void 0){const I=new Matrix4;I.fromArray(S.matrix),R.applyMatrix4(I)}else S.translation!==void 0&&R.position.fromArray(S.translation),S.rotation!==void 0&&R.quaternion.fromArray(S.rotation),S.scale!==void 0&&R.scale.fromArray(S.scale);return y.associations.has(R)||y.associations.set(R,{}),y.associations.get(R).nodes=n,R}),this.nodeCache[n]}loadScene(n){const u=this.extensions,f=this.json.scenes[n],y=this,S=new Group;f.name&&(S.name=y.createUniqueName(f.name)),assignExtrasToUserData(S,f),f.extensions&&addUnknownExtensionsToUserData(u,S,f);const A=f.nodes||[],w=[];for(let C=0,T=A.length;C<T;C++)w.push(y.getDependency("node",A[C]));return Promise.all(w).then(function(C){for(let R=0,I=C.length;R<I;R++)S.add(C[R]);const T=R=>{const I=new Map;for(const[N,L]of y.associations)(N instanceof Material||N instanceof Texture)&&I.set(N,L);return R.traverse(N=>{const L=y.associations.get(N);L!=null&&I.set(N,L)}),I};return y.associations=T(S),S})}_createAnimationTracks(n,u,f,y,S){const A=[],w=n.name?n.name:n.uuid,C=[];PATH_PROPERTIES[S.path]===PATH_PROPERTIES.weights?n.traverse(function(N){N.morphTargetInfluences&&C.push(N.name?N.name:N.uuid)}):C.push(w);let T;switch(PATH_PROPERTIES[S.path]){case PATH_PROPERTIES.weights:T=NumberKeyframeTrack;break;case PATH_PROPERTIES.rotation:T=QuaternionKeyframeTrack;break;case PATH_PROPERTIES.position:case PATH_PROPERTIES.scale:T=VectorKeyframeTrack;break;default:f.itemSize===1?T=NumberKeyframeTrack:T=VectorKeyframeTrack;break}const R=y.interpolation!==void 0?INTERPOLATION[y.interpolation]:InterpolateLinear,I=this._getArrayFromAccessor(f);for(let N=0,L=C.length;N<L;N++){const F=new T(C[N]+"."+PATH_PROPERTIES[S.path],u.array,I,R);y.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(F),A.push(F)}return A}_getArrayFromAccessor(n){let u=n.array;if(n.normalized){const f=getNormalizedComponentScale(u.constructor),y=new Float32Array(u.length);for(let S=0,A=u.length;S<A;S++)y[S]=u[S]*f;u=y}return u}_createCubicSplineTrackInterpolant(n){n.createInterpolant=function(f){const y=this instanceof QuaternionKeyframeTrack?GLTFCubicSplineQuaternionInterpolant:GLTFCubicSplineInterpolant;return new y(this.times,this.values,this.getValueSize()/3,f)},n.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function computeBounds(s,n,u){const f=n.attributes,y=new Box3;if(f.POSITION!==void 0){const w=u.json.accessors[f.POSITION],C=w.min,T=w.max;if(C!==void 0&&T!==void 0){if(y.set(new Vector3(C[0],C[1],C[2]),new Vector3(T[0],T[1],T[2])),w.normalized){const R=getNormalizedComponentScale(WEBGL_COMPONENT_TYPES[w.componentType]);y.min.multiplyScalar(R),y.max.multiplyScalar(R)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const S=n.targets;if(S!==void 0){const w=new Vector3,C=new Vector3;for(let T=0,R=S.length;T<R;T++){const I=S[T];if(I.POSITION!==void 0){const N=u.json.accessors[I.POSITION],L=N.min,F=N.max;if(L!==void 0&&F!==void 0){if(C.setX(Math.max(Math.abs(L[0]),Math.abs(F[0]))),C.setY(Math.max(Math.abs(L[1]),Math.abs(F[1]))),C.setZ(Math.max(Math.abs(L[2]),Math.abs(F[2]))),N.normalized){const H=getNormalizedComponentScale(WEBGL_COMPONENT_TYPES[N.componentType]);C.multiplyScalar(H)}w.max(C)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}y.expandByVector(w)}s.boundingBox=y;const A=new Sphere;y.getCenter(A.center),A.radius=y.min.distanceTo(y.max)/2,s.boundingSphere=A}function addPrimitiveAttributes(s,n,u){const f=n.attributes,y=[];function S(A,w){return u.getDependency("accessor",A).then(function(C){s.setAttribute(w,C)})}for(const A in f){const w=ATTRIBUTES[A]||A.toLowerCase();w in s.attributes||y.push(S(f[A],w))}if(n.indices!==void 0&&!s.index){const A=u.getDependency("accessor",n.indices).then(function(w){s.setIndex(w)});y.push(A)}return assignExtrasToUserData(s,n),computeBounds(s,n,u),Promise.all(y).then(function(){return n.targets!==void 0?addMorphTargets(s,n.targets,u):s})}class RGBELoader extends DataTextureLoader{constructor(n){super(n),this.type=HalfFloatType}parse(n){const A=function(de,se){switch(de){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(se||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(se||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(se||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(se||""))}},I=function(de,se,ne){se=se||1024;let Ee=de.pos,we=-1,Ie=0,Be="",Me=String.fromCharCode.apply(null,new Uint16Array(de.subarray(Ee,Ee+128)));for(;0>(we=Me.indexOf(`
`))&&Ie<se&&Ee<de.byteLength;)Be+=Me,Ie+=Me.length,Ee+=128,Me+=String.fromCharCode.apply(null,new Uint16Array(de.subarray(Ee,Ee+128)));return-1<we?(de.pos+=Ie+we+1,Be+Me.slice(0,we)):!1},N=function(de){const se=/^#\?(\S+)/,ne=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,ge=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,Ee=/^\s*FORMAT=(\S+)\s*$/,we=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,Ie={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let Be,Me;for((de.pos>=de.byteLength||!(Be=I(de)))&&A(1,"no header found"),(Me=Be.match(se))||A(3,"bad initial token"),Ie.valid|=1,Ie.programtype=Me[1],Ie.string+=Be+`
`;Be=I(de),Be!==!1;){if(Ie.string+=Be+`
`,Be.charAt(0)==="#"){Ie.comments+=Be+`
`;continue}if((Me=Be.match(ne))&&(Ie.gamma=parseFloat(Me[1])),(Me=Be.match(ge))&&(Ie.exposure=parseFloat(Me[1])),(Me=Be.match(Ee))&&(Ie.valid|=2,Ie.format=Me[1]),(Me=Be.match(we))&&(Ie.valid|=4,Ie.height=parseInt(Me[1],10),Ie.width=parseInt(Me[2],10)),Ie.valid&2&&Ie.valid&4)break}return Ie.valid&2||A(3,"missing format specifier"),Ie.valid&4||A(3,"missing image size specifier"),Ie},L=function(de,se,ne){const ge=se;if(ge<8||ge>32767||de[0]!==2||de[1]!==2||de[2]&128)return new Uint8Array(de);ge!==(de[2]<<8|de[3])&&A(3,"wrong scanline width");const Ee=new Uint8Array(4*se*ne);Ee.length||A(4,"unable to allocate buffer space");let we=0,Ie=0;const Be=4*ge,Me=new Uint8Array(4),Re=new Uint8Array(Be);let Te=ne;for(;Te>0&&Ie<de.byteLength;){Ie+4>de.byteLength&&A(1),Me[0]=de[Ie++],Me[1]=de[Ie++],Me[2]=de[Ie++],Me[3]=de[Ie++],(Me[0]!=2||Me[1]!=2||(Me[2]<<8|Me[3])!=ge)&&A(3,"bad rgbe scanline format");let Se=0,oe;for(;Se<Be&&Ie<de.byteLength;){oe=de[Ie++];const be=oe>128;if(be&&(oe-=128),(oe===0||Se+oe>Be)&&A(3,"bad scanline data"),be){const he=de[Ie++];for(let ue=0;ue<oe;ue++)Re[Se++]=he}else Re.set(de.subarray(Ie,Ie+oe),Se),Se+=oe,Ie+=oe}const ae=ge;for(let be=0;be<ae;be++){let he=0;Ee[we]=Re[be+he],he+=ge,Ee[we+1]=Re[be+he],he+=ge,Ee[we+2]=Re[be+he],he+=ge,Ee[we+3]=Re[be+he],we+=4}Te--}return Ee},F=function(de,se,ne,ge){const Ee=de[se+3],we=Math.pow(2,Ee-128)/255;ne[ge+0]=de[se+0]*we,ne[ge+1]=de[se+1]*we,ne[ge+2]=de[se+2]*we,ne[ge+3]=1},H=function(de,se,ne,ge){const Ee=de[se+3],we=Math.pow(2,Ee-128)/255;ne[ge+0]=DataUtils.toHalfFloat(Math.min(de[se+0]*we,65504)),ne[ge+1]=DataUtils.toHalfFloat(Math.min(de[se+1]*we,65504)),ne[ge+2]=DataUtils.toHalfFloat(Math.min(de[se+2]*we,65504)),ne[ge+3]=DataUtils.toHalfFloat(1)},z=new Uint8Array(n);z.pos=0;const U=N(z),G=U.width,Y=U.height,K=L(z.subarray(z.pos),G,Y);let Z,J,te;switch(this.type){case FloatType:te=K.length/4;const de=new Float32Array(te*4);for(let ne=0;ne<te;ne++)F(K,ne*4,de,ne*4);Z=de,J=FloatType;break;case HalfFloatType:te=K.length/4;const se=new Uint16Array(te*4);for(let ne=0;ne<te;ne++)H(K,ne*4,se,ne*4);Z=se,J=HalfFloatType;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:G,height:Y,data:Z,header:U.string,gamma:U.gamma,exposure:U.exposure,type:J}}setDataType(n){return this.type=n,this}load(n,u,f,y){function S(A,w){switch(A.type){case FloatType:case HalfFloatType:"colorSpace"in A?A.colorSpace="srgb-linear":A.encoding=3e3,A.minFilter=LinearFilter,A.magFilter=LinearFilter,A.generateMipmaps=!1,A.flipY=!0;break}u&&u(A,w)}return super.load(n,S,f,y)}}const hasColorSpace=version$1>=152;class EXRLoader extends DataTextureLoader{constructor(n){super(n),this.type=HalfFloatType}parse(n){const se=Math.pow(2.7182818,2.2);function ne(Xe,it){for(var xt=0,$t=0;$t<65536;++$t)($t==0||Xe[$t>>3]&1<<($t&7))&&(it[xt++]=$t);for(var en=xt-1;xt<65536;)it[xt++]=0;return en}function ge(Xe){for(var it=0;it<16384;it++)Xe[it]={},Xe[it].len=0,Xe[it].lit=0,Xe[it].p=null}const Ee={l:0,c:0,lc:0};function we(Xe,it,xt,$t,en){for(;xt<Xe;)it=it<<8|st($t,en),xt+=8;xt-=Xe,Ee.l=it>>xt&(1<<Xe)-1,Ee.c=it,Ee.lc=xt}const Ie=new Array(59);function Be(Xe){for(var it=0;it<=58;++it)Ie[it]=0;for(var it=0;it<65537;++it)Ie[Xe[it]]+=1;for(var xt=0,it=58;it>0;--it){var $t=xt+Ie[it]>>1;Ie[it]=xt,xt=$t}for(var it=0;it<65537;++it){var en=Xe[it];en>0&&(Xe[it]=en|Ie[en]++<<6)}}function Me(Xe,it,xt,$t,en,Qt,pn){for(var mn=xt,bn=0,vn=0;en<=Qt;en++){if(mn.value-xt.value>$t)return!1;we(6,bn,vn,Xe,mn);var wn=Ee.l;if(bn=Ee.c,vn=Ee.lc,pn[en]=wn,wn==63){if(mn.value-xt.value>$t)throw"Something wrong with hufUnpackEncTable";we(8,bn,vn,Xe,mn);var qt=Ee.l+6;if(bn=Ee.c,vn=Ee.lc,en+qt>Qt+1)throw"Something wrong with hufUnpackEncTable";for(;qt--;)pn[en++]=0;en--}else if(wn>=59){var qt=wn-59+2;if(en+qt>Qt+1)throw"Something wrong with hufUnpackEncTable";for(;qt--;)pn[en++]=0;en--}}Be(pn)}function Re(Xe){return Xe&63}function Te(Xe){return Xe>>6}function Se(Xe,it,xt,$t){for(;it<=xt;it++){var en=Te(Xe[it]),Qt=Re(Xe[it]);if(en>>Qt)throw"Invalid table entry";if(Qt>14){var pn=$t[en>>Qt-14];if(pn.len)throw"Invalid table entry";if(pn.lit++,pn.p){var mn=pn.p;pn.p=new Array(pn.lit);for(var bn=0;bn<pn.lit-1;++bn)pn.p[bn]=mn[bn]}else pn.p=new Array(1);pn.p[pn.lit-1]=it}else if(Qt)for(var vn=0,bn=1<<14-Qt;bn>0;bn--){var pn=$t[(en<<14-Qt)+vn];if(pn.len||pn.p)throw"Invalid table entry";pn.len=Qt,pn.lit=it,vn++}}return!0}const oe={c:0,lc:0};function ae(Xe,it,xt,$t){Xe=Xe<<8|st(xt,$t),it+=8,oe.c=Xe,oe.lc=it}const be={c:0,lc:0};function he(Xe,it,xt,$t,en,Qt,pn,mn,bn,vn){if(Xe==it){$t<8&&(ae(xt,$t,en,pn),xt=oe.c,$t=oe.lc),$t-=8;var wn=xt>>$t,wn=new Uint8Array([wn])[0];if(bn.value+wn>vn)return!1;for(var qt=mn[bn.value-1];wn-- >0;)mn[bn.value++]=qt}else if(bn.value<vn)mn[bn.value++]=Xe;else return!1;be.c=xt,be.lc=$t}function ue(Xe){return Xe&65535}function ye(Xe){var it=ue(Xe);return it>32767?it-65536:it}const ce={a:0,b:0};function _e(Xe,it){var xt=ye(Xe),$t=ye(it),en=$t,Qt=xt+(en&1)+(en>>1),pn=Qt,mn=Qt-en;ce.a=pn,ce.b=mn}function ke(Xe,it){var xt=ue(Xe),$t=ue(it),en=xt-($t>>1)&65535,Qt=$t+en-32768&65535;ce.a=Qt,ce.b=en}function Pe(Xe,it,xt,$t,en,Qt,pn){for(var mn=pn<16384,bn=xt>en?en:xt,vn=1,wn;vn<=bn;)vn<<=1;for(vn>>=1,wn=vn,vn>>=1;vn>=1;){for(var qt=0,Ke=qt+Qt*(en-wn),_t=Qt*vn,It=Qt*wn,Nt=$t*vn,Mt=$t*wn,on,dn,ln,kn;qt<=Ke;qt+=It){for(var An=qt,Gn=qt+$t*(xt-wn);An<=Gn;An+=Mt){var Tn=An+Nt,Bn=An+_t,nr=Bn+Nt;mn?(_e(Xe[An+it],Xe[Bn+it]),on=ce.a,ln=ce.b,_e(Xe[Tn+it],Xe[nr+it]),dn=ce.a,kn=ce.b,_e(on,dn),Xe[An+it]=ce.a,Xe[Tn+it]=ce.b,_e(ln,kn),Xe[Bn+it]=ce.a,Xe[nr+it]=ce.b):(ke(Xe[An+it],Xe[Bn+it]),on=ce.a,ln=ce.b,ke(Xe[Tn+it],Xe[nr+it]),dn=ce.a,kn=ce.b,ke(on,dn),Xe[An+it]=ce.a,Xe[Tn+it]=ce.b,ke(ln,kn),Xe[Bn+it]=ce.a,Xe[nr+it]=ce.b)}if(xt&vn){var Bn=An+_t;mn?_e(Xe[An+it],Xe[Bn+it]):ke(Xe[An+it],Xe[Bn+it]),on=ce.a,Xe[Bn+it]=ce.b,Xe[An+it]=on}}if(en&vn)for(var An=qt,Gn=qt+$t*(xt-wn);An<=Gn;An+=Mt){var Tn=An+Nt;mn?_e(Xe[An+it],Xe[Tn+it]):ke(Xe[An+it],Xe[Tn+it]),on=ce.a,Xe[Tn+it]=ce.b,Xe[An+it]=on}wn=vn,vn>>=1}return qt}function $e(Xe,it,xt,$t,en,Qt,pn,mn,bn,vn){for(var wn=0,qt=0,Ke=mn,_t=Math.trunc(en.value+(Qt+7)/8);en.value<_t;)for(ae(wn,qt,xt,en),wn=oe.c,qt=oe.lc;qt>=14;){var It=wn>>qt-14&16383,Nt=it[It];if(Nt.len)qt-=Nt.len,he(Nt.lit,pn,wn,qt,xt,$t,en,bn,vn,Ke),wn=be.c,qt=be.lc;else{if(!Nt.p)throw"hufDecode issues";var Mt;for(Mt=0;Mt<Nt.lit;Mt++){for(var on=Re(Xe[Nt.p[Mt]]);qt<on&&en.value<_t;)ae(wn,qt,xt,en),wn=oe.c,qt=oe.lc;if(qt>=on&&Te(Xe[Nt.p[Mt]])==(wn>>qt-on&(1<<on)-1)){qt-=on,he(Nt.p[Mt],pn,wn,qt,xt,$t,en,bn,vn,Ke),wn=be.c,qt=be.lc;break}}if(Mt==Nt.lit)throw"hufDecode issues"}}var dn=8-Qt&7;for(wn>>=dn,qt-=dn;qt>0;){var Nt=it[wn<<14-qt&16383];if(Nt.len)qt-=Nt.len,he(Nt.lit,pn,wn,qt,xt,$t,en,bn,vn,Ke),wn=be.c,qt=be.lc;else throw"hufDecode issues"}return!0}function xe(Xe,it,xt,$t,en,Qt){var pn={value:0},mn=xt.value,bn=ct(it,xt),vn=ct(it,xt);xt.value+=4;var wn=ct(it,xt);if(xt.value+=4,bn<0||bn>=65537||vn<0||vn>=65537)throw"Something wrong with HUF_ENCSIZE";var qt=new Array(65537),Ke=new Array(16384);ge(Ke);var _t=$t-(xt.value-mn);if(Me(Xe,it,xt,_t,bn,vn,qt),wn>8*($t-(xt.value-mn)))throw"Something wrong with hufUncompress";Se(qt,bn,vn,Ke),$e(qt,Ke,Xe,it,xt,wn,vn,Qt,en,pn)}function Ne(Xe,it,xt){for(var $t=0;$t<xt;++$t)it[$t]=Xe[it[$t]]}function je(Xe){for(var it=1;it<Xe.length;it++){var xt=Xe[it-1]+Xe[it]-128;Xe[it]=xt}}function He(Xe,it){for(var xt=0,$t=Math.floor((Xe.length+1)/2),en=0,Qt=Xe.length-1;!(en>Qt||(it[en++]=Xe[xt++],en>Qt));)it[en++]=Xe[$t++]}function Ye(Xe){for(var it=Xe.byteLength,xt=new Array,$t=0,en=new DataView(Xe);it>0;){var Qt=en.getInt8($t++);if(Qt<0){var pn=-Qt;it-=pn+1;for(var mn=0;mn<pn;mn++)xt.push(en.getUint8($t++))}else{var pn=Qt;it-=2;for(var bn=en.getUint8($t++),mn=0;mn<pn+1;mn++)xt.push(bn)}}return xt}function Je(Xe,it,xt,$t,en,Qt){var Tn=new DataView(Qt.buffer),pn=xt[Xe.idx[0]].width,mn=xt[Xe.idx[0]].height,bn=3,vn=Math.floor(pn/8),wn=Math.ceil(pn/8),qt=Math.ceil(mn/8),Ke=pn-(wn-1)*8,_t=mn-(qt-1)*8,It={value:0},Nt=new Array(bn),Mt=new Array(bn),on=new Array(bn),dn=new Array(bn),ln=new Array(bn);for(let Pn=0;Pn<bn;++Pn)ln[Pn]=it[Xe.idx[Pn]],Nt[Pn]=Pn<1?0:Nt[Pn-1]+wn*qt,Mt[Pn]=new Float32Array(64),on[Pn]=new Uint16Array(64),dn[Pn]=new Uint16Array(wn*64);for(let Pn=0;Pn<qt;++Pn){var kn=8;Pn==qt-1&&(kn=_t);var An=8;for(let Vn=0;Vn<wn;++Vn){Vn==wn-1&&(An=Ke);for(let Rn=0;Rn<bn;++Rn)on[Rn].fill(0),on[Rn][0]=en[Nt[Rn]++],ot(It,$t,on[Rn]),ze(on[Rn],Mt[Rn]),pt(Mt[Rn]);yt(Mt);for(let Rn=0;Rn<bn;++Rn)ut(Mt[Rn],dn[Rn],Vn*64)}let fn=0;for(let Vn=0;Vn<bn;++Vn){const Rn=xt[Xe.idx[Vn]].type;for(let Mr=8*Pn;Mr<8*Pn+kn;++Mr){fn=ln[Vn][Mr];for(let fi=0;fi<vn;++fi){const dr=fi*64+(Mr&7)*8;Tn.setUint16(fn+0*Rn,dn[Vn][dr+0],!0),Tn.setUint16(fn+2*Rn,dn[Vn][dr+1],!0),Tn.setUint16(fn+4*Rn,dn[Vn][dr+2],!0),Tn.setUint16(fn+6*Rn,dn[Vn][dr+3],!0),Tn.setUint16(fn+8*Rn,dn[Vn][dr+4],!0),Tn.setUint16(fn+10*Rn,dn[Vn][dr+5],!0),Tn.setUint16(fn+12*Rn,dn[Vn][dr+6],!0),Tn.setUint16(fn+14*Rn,dn[Vn][dr+7],!0),fn+=16*Rn}}if(vn!=wn)for(let Mr=8*Pn;Mr<8*Pn+kn;++Mr){const fi=ln[Vn][Mr]+8*vn*2*Rn,dr=vn*64+(Mr&7)*8;for(let si=0;si<An;++si)Tn.setUint16(fi+si*2*Rn,dn[Vn][dr+si],!0)}}}for(var Gn=new Uint16Array(pn),Tn=new DataView(Qt.buffer),Bn=0;Bn<bn;++Bn){xt[Xe.idx[Bn]].decoded=!0;var nr=xt[Xe.idx[Bn]].type;if(xt[Bn].type==2)for(var Nr=0;Nr<mn;++Nr){const Pn=ln[Bn][Nr];for(var ar=0;ar<pn;++ar)Gn[ar]=Tn.getUint16(Pn+ar*2*nr,!0);for(var ar=0;ar<pn;++ar)Tn.setFloat32(Pn+ar*2*nr,Tt(Gn[ar]),!0)}}}function ot(Xe,it,xt){for(var $t,en=1;en<64;)$t=it[Xe.value],$t==65280?en=64:$t>>8==255?en+=$t&255:(xt[en]=$t,en++),Xe.value++}function ze(Xe,it){it[0]=Tt(Xe[0]),it[1]=Tt(Xe[1]),it[2]=Tt(Xe[5]),it[3]=Tt(Xe[6]),it[4]=Tt(Xe[14]),it[5]=Tt(Xe[15]),it[6]=Tt(Xe[27]),it[7]=Tt(Xe[28]),it[8]=Tt(Xe[2]),it[9]=Tt(Xe[4]),it[10]=Tt(Xe[7]),it[11]=Tt(Xe[13]),it[12]=Tt(Xe[16]),it[13]=Tt(Xe[26]),it[14]=Tt(Xe[29]),it[15]=Tt(Xe[42]),it[16]=Tt(Xe[3]),it[17]=Tt(Xe[8]),it[18]=Tt(Xe[12]),it[19]=Tt(Xe[17]),it[20]=Tt(Xe[25]),it[21]=Tt(Xe[30]),it[22]=Tt(Xe[41]),it[23]=Tt(Xe[43]),it[24]=Tt(Xe[9]),it[25]=Tt(Xe[11]),it[26]=Tt(Xe[18]),it[27]=Tt(Xe[24]),it[28]=Tt(Xe[31]),it[29]=Tt(Xe[40]),it[30]=Tt(Xe[44]),it[31]=Tt(Xe[53]),it[32]=Tt(Xe[10]),it[33]=Tt(Xe[19]),it[34]=Tt(Xe[23]),it[35]=Tt(Xe[32]),it[36]=Tt(Xe[39]),it[37]=Tt(Xe[45]),it[38]=Tt(Xe[52]),it[39]=Tt(Xe[54]),it[40]=Tt(Xe[20]),it[41]=Tt(Xe[22]),it[42]=Tt(Xe[33]),it[43]=Tt(Xe[38]),it[44]=Tt(Xe[46]),it[45]=Tt(Xe[51]),it[46]=Tt(Xe[55]),it[47]=Tt(Xe[60]),it[48]=Tt(Xe[21]),it[49]=Tt(Xe[34]),it[50]=Tt(Xe[37]),it[51]=Tt(Xe[47]),it[52]=Tt(Xe[50]),it[53]=Tt(Xe[56]),it[54]=Tt(Xe[59]),it[55]=Tt(Xe[61]),it[56]=Tt(Xe[35]),it[57]=Tt(Xe[36]),it[58]=Tt(Xe[48]),it[59]=Tt(Xe[49]),it[60]=Tt(Xe[57]),it[61]=Tt(Xe[58]),it[62]=Tt(Xe[62]),it[63]=Tt(Xe[63])}function pt(Xe){const it=.5*Math.cos(.7853975),xt=.5*Math.cos(3.14159/16),$t=.5*Math.cos(3.14159/8),en=.5*Math.cos(3*3.14159/16),Qt=.5*Math.cos(5*3.14159/16),pn=.5*Math.cos(3*3.14159/8),mn=.5*Math.cos(7*3.14159/16);for(var bn=new Array(4),vn=new Array(4),wn=new Array(4),qt=new Array(4),Ke=0;Ke<8;++Ke){var _t=Ke*8;bn[0]=$t*Xe[_t+2],bn[1]=pn*Xe[_t+2],bn[2]=$t*Xe[_t+6],bn[3]=pn*Xe[_t+6],vn[0]=xt*Xe[_t+1]+en*Xe[_t+3]+Qt*Xe[_t+5]+mn*Xe[_t+7],vn[1]=en*Xe[_t+1]-mn*Xe[_t+3]-xt*Xe[_t+5]-Qt*Xe[_t+7],vn[2]=Qt*Xe[_t+1]-xt*Xe[_t+3]+mn*Xe[_t+5]+en*Xe[_t+7],vn[3]=mn*Xe[_t+1]-Qt*Xe[_t+3]+en*Xe[_t+5]-xt*Xe[_t+7],wn[0]=it*(Xe[_t+0]+Xe[_t+4]),wn[3]=it*(Xe[_t+0]-Xe[_t+4]),wn[1]=bn[0]+bn[3],wn[2]=bn[1]-bn[2],qt[0]=wn[0]+wn[1],qt[1]=wn[3]+wn[2],qt[2]=wn[3]-wn[2],qt[3]=wn[0]-wn[1],Xe[_t+0]=qt[0]+vn[0],Xe[_t+1]=qt[1]+vn[1],Xe[_t+2]=qt[2]+vn[2],Xe[_t+3]=qt[3]+vn[3],Xe[_t+4]=qt[3]-vn[3],Xe[_t+5]=qt[2]-vn[2],Xe[_t+6]=qt[1]-vn[1],Xe[_t+7]=qt[0]-vn[0]}for(var It=0;It<8;++It)bn[0]=$t*Xe[16+It],bn[1]=pn*Xe[16+It],bn[2]=$t*Xe[48+It],bn[3]=pn*Xe[48+It],vn[0]=xt*Xe[8+It]+en*Xe[24+It]+Qt*Xe[40+It]+mn*Xe[56+It],vn[1]=en*Xe[8+It]-mn*Xe[24+It]-xt*Xe[40+It]-Qt*Xe[56+It],vn[2]=Qt*Xe[8+It]-xt*Xe[24+It]+mn*Xe[40+It]+en*Xe[56+It],vn[3]=mn*Xe[8+It]-Qt*Xe[24+It]+en*Xe[40+It]-xt*Xe[56+It],wn[0]=it*(Xe[It]+Xe[32+It]),wn[3]=it*(Xe[It]-Xe[32+It]),wn[1]=bn[0]+bn[3],wn[2]=bn[1]-bn[2],qt[0]=wn[0]+wn[1],qt[1]=wn[3]+wn[2],qt[2]=wn[3]-wn[2],qt[3]=wn[0]-wn[1],Xe[0+It]=qt[0]+vn[0],Xe[8+It]=qt[1]+vn[1],Xe[16+It]=qt[2]+vn[2],Xe[24+It]=qt[3]+vn[3],Xe[32+It]=qt[3]-vn[3],Xe[40+It]=qt[2]-vn[2],Xe[48+It]=qt[1]-vn[1],Xe[56+It]=qt[0]-vn[0]}function yt(Xe){for(var it=0;it<64;++it){var xt=Xe[0][it],$t=Xe[1][it],en=Xe[2][it];Xe[0][it]=xt+1.5747*en,Xe[1][it]=xt-.1873*$t-.4682*en,Xe[2][it]=xt+1.8556*$t}}function ut(Xe,it,xt){for(var $t=0;$t<64;++$t)it[xt+$t]=DataUtils.toHalfFloat(Et(Xe[$t]))}function Et(Xe){return Xe<=1?Math.sign(Xe)*Math.pow(Math.abs(Xe),2.2):Math.sign(Xe)*Math.pow(se,Math.abs(Xe)-1)}function qe(Xe){return new DataView(Xe.array.buffer,Xe.offset.value,Xe.size)}function Le(Xe){var it=Xe.viewer.buffer.slice(Xe.offset.value,Xe.offset.value+Xe.size),xt=new Uint8Array(Ye(it)),$t=new Uint8Array(xt.length);return je(xt),He(xt,$t),new DataView($t.buffer)}function lt(Xe){var it=Xe.array.slice(Xe.offset.value,Xe.offset.value+Xe.size),xt=unzlibSync(it),$t=new Uint8Array(xt.length);return je(xt),He(xt,$t),new DataView($t.buffer)}function We(Xe){for(var it=Xe.viewer,xt={value:Xe.offset.value},$t=new Uint16Array(Xe.width*Xe.scanlineBlockSize*(Xe.channels*Xe.type)),en=new Uint8Array(8192),Qt=0,pn=new Array(Xe.channels),mn=0;mn<Xe.channels;mn++)pn[mn]={},pn[mn].start=Qt,pn[mn].end=pn[mn].start,pn[mn].nx=Xe.width,pn[mn].ny=Xe.lines,pn[mn].size=Xe.type,Qt+=pn[mn].nx*pn[mn].ny*pn[mn].size;var bn=Kt(it,xt),vn=Kt(it,xt);if(vn>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(bn<=vn)for(var mn=0;mn<vn-bn+1;mn++)en[mn+bn]=nt(it,xt);var wn=new Uint16Array(65536),qt=ne(en,wn),Ke=ct(it,xt);xe(Xe.array,it,xt,Ke,$t,Qt);for(var mn=0;mn<Xe.channels;++mn)for(var _t=pn[mn],It=0;It<pn[mn].size;++It)Pe($t,_t.start+It,_t.nx,_t.size,_t.ny,_t.nx*_t.size,qt);Ne(wn,$t,Qt);for(var Nt=0,Mt=new Uint8Array($t.buffer.byteLength),on=0;on<Xe.lines;on++)for(var dn=0;dn<Xe.channels;dn++){var _t=pn[dn],ln=_t.nx*_t.size,kn=new Uint8Array($t.buffer,_t.end*2,ln*2);Mt.set(kn,Nt),Nt+=ln*2,_t.end+=ln}return new DataView(Mt.buffer)}function Qe(Xe){var it=Xe.array.slice(Xe.offset.value,Xe.offset.value+Xe.size),xt=unzlibSync(it);const $t=Xe.lines*Xe.channels*Xe.width,en=Xe.type==1?new Uint16Array($t):new Uint32Array($t);let Qt=0,pn=0;const mn=new Array(4);for(let bn=0;bn<Xe.lines;bn++)for(let vn=0;vn<Xe.channels;vn++){let wn=0;switch(Xe.type){case 1:mn[0]=Qt,mn[1]=mn[0]+Xe.width,Qt=mn[1]+Xe.width;for(let qt=0;qt<Xe.width;++qt){const Ke=xt[mn[0]++]<<8|xt[mn[1]++];wn+=Ke,en[pn]=wn,pn++}break;case 2:mn[0]=Qt,mn[1]=mn[0]+Xe.width,mn[2]=mn[1]+Xe.width,Qt=mn[2]+Xe.width;for(let qt=0;qt<Xe.width;++qt){const Ke=xt[mn[0]++]<<24|xt[mn[1]++]<<16|xt[mn[2]++]<<8;wn+=Ke,en[pn]=wn,pn++}break}}return new DataView(en.buffer)}function at(Xe){var it=Xe.viewer,xt={value:Xe.offset.value},$t=new Uint8Array(Xe.width*Xe.lines*(Xe.channels*Xe.type*2)),en={version:At(it,xt),unknownUncompressedSize:At(it,xt),unknownCompressedSize:At(it,xt),acCompressedSize:At(it,xt),dcCompressedSize:At(it,xt),rleCompressedSize:At(it,xt),rleUncompressedSize:At(it,xt),rleRawSize:At(it,xt),totalAcUncompressedCount:At(it,xt),totalDcUncompressedCount:At(it,xt),acCompression:At(it,xt)};if(en.version<2)throw"EXRLoader.parse: "+ir.compression+" version "+en.version+" is unsupported";for(var Qt=new Array,pn=Kt(it,xt)-2;pn>0;){var mn=St(it.buffer,xt),bn=nt(it,xt),vn=bn>>2&3,wn=(bn>>4)-1,qt=new Int8Array([wn])[0],Ke=nt(it,xt);Qt.push({name:mn,index:qt,type:Ke,compression:vn}),pn-=mn.length+3}for(var _t=ir.channels,It=new Array(Xe.channels),Nt=0;Nt<Xe.channels;++Nt){var Mt=It[Nt]={},on=_t[Nt];Mt.name=on.name,Mt.compression=0,Mt.decoded=!1,Mt.type=on.pixelType,Mt.pLinear=on.pLinear,Mt.width=Xe.width,Mt.height=Xe.lines}for(var dn={idx:new Array(3)},ln=0;ln<Xe.channels;++ln)for(var Mt=It[ln],Nt=0;Nt<Qt.length;++Nt){var kn=Qt[Nt];Mt.name==kn.name&&(Mt.compression=kn.compression,kn.index>=0&&(dn.idx[kn.index]=ln),Mt.offset=ln)}if(en.acCompressedSize>0)switch(en.acCompression){case 0:var Tn=new Uint16Array(en.totalAcUncompressedCount);xe(Xe.array,it,xt,en.acCompressedSize,Tn,en.totalAcUncompressedCount);break;case 1:var An=Xe.array.slice(xt.value,xt.value+en.totalAcUncompressedCount),Gn=unzlibSync(An),Tn=new Uint16Array(Gn.buffer);xt.value+=en.totalAcUncompressedCount;break}if(en.dcCompressedSize>0){var Bn={array:Xe.array,offset:xt,size:en.dcCompressedSize},nr=new Uint16Array(lt(Bn).buffer);xt.value+=en.dcCompressedSize}if(en.rleRawSize>0){var An=Xe.array.slice(xt.value,xt.value+en.rleCompressedSize),Gn=unzlibSync(An),Nr=Ye(Gn.buffer);xt.value+=en.rleCompressedSize}for(var ar=0,Pn=new Array(It.length),Nt=0;Nt<Pn.length;++Nt)Pn[Nt]=new Array;for(var fn=0;fn<Xe.lines;++fn)for(var Vn=0;Vn<It.length;++Vn)Pn[Vn].push(ar),ar+=It[Vn].width*Xe.type*2;Je(dn,Pn,It,Tn,nr,$t);for(var Nt=0;Nt<It.length;++Nt){var Mt=It[Nt];if(!Mt.decoded)switch(Mt.compression){case 2:for(var Rn=0,Mr=0,fn=0;fn<Xe.lines;++fn){for(var fi=Pn[Nt][Rn],dr=0;dr<Mt.width;++dr){for(var si=0;si<2*Mt.type;++si)$t[fi++]=Nr[Mr+si*Mt.width*Mt.height];Mr++}Rn++}break;default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView($t.buffer)}function St(Xe,it){for(var xt=new Uint8Array(Xe),$t=0;xt[it.value+$t]!=0;)$t+=1;var en=new TextDecoder().decode(xt.slice(it.value,it.value+$t));return it.value=it.value+$t+1,en}function Ct(Xe,it,xt){var $t=new TextDecoder().decode(new Uint8Array(Xe).slice(it.value,it.value+xt));return it.value=it.value+xt,$t}function jt(Xe,it){var xt=Ft(Xe,it),$t=ct(Xe,it);return[xt,$t]}function Gt(Xe,it){var xt=ct(Xe,it),$t=ct(Xe,it);return[xt,$t]}function Ft(Xe,it){var xt=Xe.getInt32(it.value,!0);return it.value=it.value+4,xt}function ct(Xe,it){var xt=Xe.getUint32(it.value,!0);return it.value=it.value+4,xt}function st(Xe,it){var xt=Xe[it.value];return it.value=it.value+1,xt}function nt(Xe,it){var xt=Xe.getUint8(it.value);return it.value=it.value+1,xt}const At=function(Xe,it){let xt;return"getBigInt64"in DataView.prototype?xt=Number(Xe.getBigInt64(it.value,!0)):xt=Xe.getUint32(it.value+4,!0)+Number(Xe.getUint32(it.value,!0)<<32),it.value+=8,xt};function Yt(Xe,it){var xt=Xe.getFloat32(it.value,!0);return it.value+=4,xt}function ht(Xe,it){return DataUtils.toHalfFloat(Yt(Xe,it))}function Tt(Xe){var it=(Xe&31744)>>10,xt=Xe&1023;return(Xe>>15?-1:1)*(it?it===31?xt?NaN:1/0:Math.pow(2,it-15)*(1+xt/1024):6103515625e-14*(xt/1024))}function Kt(Xe,it){var xt=Xe.getUint16(it.value,!0);return it.value+=2,xt}function _n(Xe,it){return Tt(Kt(Xe,it))}function Ht(Xe,it,xt,$t){for(var en=xt.value,Qt=[];xt.value<en+$t-1;){var pn=St(it,xt),mn=Ft(Xe,xt),bn=nt(Xe,xt);xt.value+=3;var vn=Ft(Xe,xt),wn=Ft(Xe,xt);Qt.push({name:pn,pixelType:mn,pLinear:bn,xSampling:vn,ySampling:wn})}return xt.value+=1,Qt}function Ot(Xe,it){var xt=Yt(Xe,it),$t=Yt(Xe,it),en=Yt(Xe,it),Qt=Yt(Xe,it),pn=Yt(Xe,it),mn=Yt(Xe,it),bn=Yt(Xe,it),vn=Yt(Xe,it);return{redX:xt,redY:$t,greenX:en,greenY:Qt,blueX:pn,blueY:mn,whiteX:bn,whiteY:vn}}function cn(Xe,it){var xt=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],$t=nt(Xe,it);return xt[$t]}function Mn(Xe,it){var xt=ct(Xe,it),$t=ct(Xe,it),en=ct(Xe,it),Qt=ct(Xe,it);return{xMin:xt,yMin:$t,xMax:en,yMax:Qt}}function In(Xe,it){var xt=["INCREASING_Y"],$t=nt(Xe,it);return xt[$t]}function On(Xe,it){var xt=Yt(Xe,it),$t=Yt(Xe,it);return[xt,$t]}function rr(Xe,it){var xt=Yt(Xe,it),$t=Yt(Xe,it),en=Yt(Xe,it);return[xt,$t,en]}function Ar(Xe,it,xt,$t,en){if($t==="string"||$t==="stringvector"||$t==="iccProfile")return Ct(it,xt,en);if($t==="chlist")return Ht(Xe,it,xt,en);if($t==="chromaticities")return Ot(Xe,xt);if($t==="compression")return cn(Xe,xt);if($t==="box2i")return Mn(Xe,xt);if($t==="lineOrder")return In(Xe,xt);if($t==="float")return Yt(Xe,xt);if($t==="v2f")return On(Xe,xt);if($t==="v3f")return rr(Xe,xt);if($t==="int")return Ft(Xe,xt);if($t==="rational")return jt(Xe,xt);if($t==="timecode")return Gt(Xe,xt);if($t==="preview")return xt.value+=en,"skipped";xt.value+=en}function hr(Xe,it,xt){const $t={};if(Xe.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";$t.version=Xe.getUint8(4);const en=Xe.getUint8(5);$t.spec={singleTile:!!(en&2),longName:!!(en&4),deepFormat:!!(en&8),multiPart:!!(en&16)},xt.value=8;for(var Qt=!0;Qt;){var pn=St(it,xt);if(pn==0)Qt=!1;else{var mn=St(it,xt),bn=ct(Xe,xt),vn=Ar(Xe,it,xt,mn,bn);vn===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${mn}'.`):$t[pn]=vn}}if((en&-5)!=0)throw console.error("EXRHeader:",$t),"THREE.EXRLoader: provided file is currently unsupported.";return $t}function Yr(Xe,it,xt,$t,en){const Qt={size:0,viewer:it,array:xt,offset:$t,width:Xe.dataWindow.xMax-Xe.dataWindow.xMin+1,height:Xe.dataWindow.yMax-Xe.dataWindow.yMin+1,channels:Xe.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:Xe.channels[0].pixelType,uncompress:null,getter:null,format:null,[hasColorSpace?"colorSpace":"encoding"]:null};switch(Xe.compression){case"NO_COMPRESSION":Qt.lines=1,Qt.uncompress=qe;break;case"RLE_COMPRESSION":Qt.lines=1,Qt.uncompress=Le;break;case"ZIPS_COMPRESSION":Qt.lines=1,Qt.uncompress=lt;break;case"ZIP_COMPRESSION":Qt.lines=16,Qt.uncompress=lt;break;case"PIZ_COMPRESSION":Qt.lines=32,Qt.uncompress=We;break;case"PXR24_COMPRESSION":Qt.lines=16,Qt.uncompress=Qe;break;case"DWAA_COMPRESSION":Qt.lines=32,Qt.uncompress=at;break;case"DWAB_COMPRESSION":Qt.lines=256,Qt.uncompress=at;break;default:throw"EXRLoader.parse: "+Xe.compression+" is unsupported"}if(Qt.scanlineBlockSize=Qt.lines,Qt.type==1)switch(en){case FloatType:Qt.getter=_n,Qt.inputSize=2;break;case HalfFloatType:Qt.getter=Kt,Qt.inputSize=2;break}else if(Qt.type==2)switch(en){case FloatType:Qt.getter=Yt,Qt.inputSize=4;break;case HalfFloatType:Qt.getter=ht,Qt.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+Qt.type+" for "+Xe.compression+".";Qt.blockCount=(Xe.dataWindow.yMax+1)/Qt.scanlineBlockSize;for(var pn=0;pn<Qt.blockCount;pn++)At(it,$t);Qt.outputChannels=Qt.channels==3?4:Qt.channels;const mn=Qt.width*Qt.height*Qt.outputChannels;switch(en){case FloatType:Qt.byteArray=new Float32Array(mn),Qt.channels<Qt.outputChannels&&Qt.byteArray.fill(1,0,mn);break;case HalfFloatType:Qt.byteArray=new Uint16Array(mn),Qt.channels<Qt.outputChannels&&Qt.byteArray.fill(15360,0,mn);break;default:console.error("THREE.EXRLoader: unsupported type: ",en);break}return Qt.bytesPerLine=Qt.width*Qt.inputSize*Qt.channels,Qt.outputChannels==4?Qt.format=RGBAFormat:Qt.format=RedFormat,hasColorSpace?Qt.colorSpace="srgb-linear":Qt.encoding=3e3,Qt}const $r=new DataView(n),wr=new Uint8Array(n),mr={value:0},ir=hr($r,n,mr),zn=Yr(ir,$r,wr,mr,this.type),Lr={value:0},Hr={R:0,G:1,B:2,A:3,Y:0};for(let Xe=0;Xe<zn.height/zn.scanlineBlockSize;Xe++){const it=ct($r,mr);zn.size=ct($r,mr),zn.lines=it+zn.scanlineBlockSize>zn.height?zn.height-it:zn.scanlineBlockSize;const $t=zn.size<zn.lines*zn.bytesPerLine?zn.uncompress(zn):qe(zn);mr.value+=zn.size;for(let en=0;en<zn.scanlineBlockSize;en++){const Qt=en+Xe*zn.scanlineBlockSize;if(Qt>=zn.height)break;for(let pn=0;pn<zn.channels;pn++){const mn=Hr[ir.channels[pn].name];for(let bn=0;bn<zn.width;bn++){Lr.value=(en*(zn.channels*zn.width)+pn*zn.width+bn)*zn.inputSize;const vn=(zn.height-1-Qt)*(zn.width*zn.outputChannels)+bn*zn.outputChannels+mn;zn.byteArray[vn]=zn.getter($t,Lr)}}}}return{header:ir,width:zn.width,height:zn.height,data:zn.byteArray,format:zn.format,[hasColorSpace?"colorSpace":"encoding"]:zn[hasColorSpace?"colorSpace":"encoding"],type:this.type}}setDataType(n){return this.type=n,this}load(n,u,f,y){function S(A,w){hasColorSpace?A.colorSpace=w.colorSpace:A.encoding=w.encoding,A.minFilter=LinearFilter,A.magFilter=LinearFilter,A.generateMipmaps=!1,A.flipY=!1,u&&u(A,w)}return super.load(n,S,f,y)}}const _taskCache=new WeakMap;class DRACOLoader extends Loader{constructor(n){super(n),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(n){return this.decoderPath=n,this}setDecoderConfig(n){return this.decoderConfig=n,this}setWorkerLimit(n){return this.workerLimit=n,this}load(n,u,f,y){const S=new FileLoader(this.manager);S.setPath(this.path),S.setResponseType("arraybuffer"),S.setRequestHeader(this.requestHeader),S.setWithCredentials(this.withCredentials),S.load(n,A=>{const w={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(A,w).then(u).catch(y)},f,y)}decodeDracoFile(n,u,f,y){const S={attributeIDs:f||this.defaultAttributeIDs,attributeTypes:y||this.defaultAttributeTypes,useUniqueIDs:!!f};this.decodeGeometry(n,S).then(u)}decodeGeometry(n,u){for(const C in u.attributeTypes){const T=u.attributeTypes[C];T.BYTES_PER_ELEMENT!==void 0&&(u.attributeTypes[C]=T.name)}const f=JSON.stringify(u);if(_taskCache.has(n)){const C=_taskCache.get(n);if(C.key===f)return C.promise;if(n.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let y;const S=this.workerNextTaskID++,A=n.byteLength,w=this._getWorker(S,A).then(C=>(y=C,new Promise((T,R)=>{y._callbacks[S]={resolve:T,reject:R},y.postMessage({type:"decode",id:S,taskConfig:u,buffer:n},[n])}))).then(C=>this._createGeometry(C.geometry));return w.catch(()=>!0).then(()=>{y&&S&&this._releaseTask(y,S)}),_taskCache.set(n,{key:f,promise:w}),w}_createGeometry(n){const u=new BufferGeometry;n.index&&u.setIndex(new BufferAttribute(n.index.array,1));for(let f=0;f<n.attributes.length;f++){const y=n.attributes[f],S=y.name,A=y.array,w=y.itemSize;u.setAttribute(S,new BufferAttribute(A,w))}return u}_loadLibrary(n,u){const f=new FileLoader(this.manager);return f.setPath(this.decoderPath),f.setResponseType(u),f.setWithCredentials(this.withCredentials),new Promise((y,S)=>{f.load(n,y,void 0,S)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const n=typeof WebAssembly!="object"||this.decoderConfig.type==="js",u=[];return n?u.push(this._loadLibrary("draco_decoder.js","text")):(u.push(this._loadLibrary("draco_wasm_wrapper.js","text")),u.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(u).then(f=>{const y=f[0];n||(this.decoderConfig.wasmBinary=f[1]);const S=DRACOWorker.toString(),A=["/* draco decoder */",y,"","/* worker */",S.substring(S.indexOf("{")+1,S.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([A]))}),this.decoderPending}_getWorker(n,u){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const y=new Worker(this.workerSourceURL);y._callbacks={},y._taskCosts={},y._taskLoad=0,y.postMessage({type:"init",decoderConfig:this.decoderConfig}),y.onmessage=function(S){const A=S.data;switch(A.type){case"decode":y._callbacks[A.id].resolve(A);break;case"error":y._callbacks[A.id].reject(A);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+A.type+'"')}},this.workerPool.push(y)}else this.workerPool.sort(function(y,S){return y._taskLoad>S._taskLoad?-1:1});const f=this.workerPool[this.workerPool.length-1];return f._taskCosts[n]=u,f._taskLoad+=u,f})}_releaseTask(n,u){n._taskLoad-=n._taskCosts[u],delete n._callbacks[u],delete n._taskCosts[u]}debug(){console.log("Task load: ",this.workerPool.map(n=>n._taskLoad))}dispose(){for(let n=0;n<this.workerPool.length;++n)this.workerPool[n].terminate();return this.workerPool.length=0,this}}function DRACOWorker(){let s,n;onmessage=function(A){const w=A.data;switch(w.type){case"init":s=w.decoderConfig,n=new Promise(function(R){s.onModuleLoaded=function(I){R({draco:I})},DracoDecoderModule(s)});break;case"decode":const C=w.buffer,T=w.taskConfig;n.then(R=>{const I=R.draco,N=new I.Decoder,L=new I.DecoderBuffer;L.Init(new Int8Array(C),C.byteLength);try{const F=u(I,N,L,T),H=F.attributes.map(z=>z.array.buffer);F.index&&H.push(F.index.array.buffer),self.postMessage({type:"decode",id:w.id,geometry:F},H)}catch(F){console.error(F),self.postMessage({type:"error",id:w.id,error:F.message})}finally{I.destroy(L),I.destroy(N)}});break}};function u(A,w,C,T){const R=T.attributeIDs,I=T.attributeTypes;let N,L;const F=w.GetEncodedGeometryType(C);if(F===A.TRIANGULAR_MESH)N=new A.Mesh,L=w.DecodeBufferToMesh(C,N);else if(F===A.POINT_CLOUD)N=new A.PointCloud,L=w.DecodeBufferToPointCloud(C,N);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!L.ok()||N.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+L.error_msg());const H={index:null,attributes:[]};for(const z in R){const U=self[I[z]];let G,Y;if(T.useUniqueIDs)Y=R[z],G=w.GetAttributeByUniqueId(N,Y);else{if(Y=w.GetAttributeId(N,A[R[z]]),Y===-1)continue;G=w.GetAttribute(N,Y)}H.attributes.push(y(A,w,N,z,U,G))}return F===A.TRIANGULAR_MESH&&(H.index=f(A,w,N)),A.destroy(N),H}function f(A,w,C){const R=C.num_faces()*3,I=R*4,N=A._malloc(I);w.GetTrianglesUInt32Array(C,I,N);const L=new Uint32Array(A.HEAPF32.buffer,N,R).slice();return A._free(N),{array:L,itemSize:1}}function y(A,w,C,T,R,I){const N=I.num_components(),F=C.num_points()*N,H=F*R.BYTES_PER_ELEMENT,z=S(A,R),U=A._malloc(H);w.GetAttributeDataArrayForAllPoints(C,I,z,H,U);const G=new R(A.HEAPF32.buffer,U,F).slice();return A._free(U),{name:T,array:G,itemSize:N}}function S(A,w){switch(w){case Float32Array:return A.DT_FLOAT32;case Int8Array:return A.DT_INT8;case Int16Array:return A.DT_INT16;case Int32Array:return A.DT_INT32;case Uint8Array:return A.DT_UINT8;case Uint16Array:return A.DT_UINT16;case Uint32Array:return A.DT_UINT32}}}let generated;const MeshoptDecoder=()=>{if(generated)return generated;const s="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",n="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",u=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),f=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let y=s;WebAssembly.validate(u)&&(y=n);let S;const A=WebAssembly.instantiate(w(y),{}).then(I=>{S=I.instance,S.exports.__wasm_call_ctors()});function w(I){const N=new Uint8Array(I.length);for(let F=0;F<I.length;++F){const H=I.charCodeAt(F);N[F]=H>96?H-71:H>64?H-65:H>47?H+4:H>46?63:62}let L=0;for(let F=0;F<I.length;++F)N[L++]=N[F]<60?f[N[F]]:(N[F]-60)*64+N[++F];return N.buffer.slice(0,L)}function C(I,N,L,F,H,z){const U=S.exports.sbrk,G=L+3&-4,Y=U(G*F),K=U(H.length),Z=new Uint8Array(S.exports.memory.buffer);Z.set(H,K);const J=I(Y,L,F,K,H.length);if(J===0&&z&&z(Y,G,F),N.set(Z.subarray(Y,Y+L*F)),U(Y-U(0)),J!==0)throw new Error(`Malformed buffer data: ${J}`)}const T={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},R={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return generated={ready:A,supported:!0,decodeVertexBuffer(I,N,L,F,H){C(S.exports.meshopt_decodeVertexBuffer,I,N,L,F,S.exports[T[H]])},decodeIndexBuffer(I,N,L,F){C(S.exports.meshopt_decodeIndexBuffer,I,N,L,F)},decodeIndexSequence(I,N,L,F){C(S.exports.meshopt_decodeIndexSequence,I,N,L,F)},decodeGltfBuffer(I,N,L,F,H,z){C(S.exports[R[H]],I,N,L,F,S.exports[T[z]])}},generated};function workerBootstrap(){var s=Object.create(null);function n(y,S){var A=y.id,w=y.name,C=y.dependencies;C===void 0&&(C=[]);var T=y.init;T===void 0&&(T=function(){});var R=y.getTransferables;if(R===void 0&&(R=null),!s[A])try{C=C.map(function(N){return N&&N.isWorkerModule&&(n(N,function(L){if(L instanceof Error)throw L}),N=s[N.id].value),N}),T=f("<"+w+">.init",T),R&&(R=f("<"+w+">.getTransferables",R));var I=null;typeof T=="function"?I=T.apply(void 0,C):console.error("worker module init function failed to rehydrate"),s[A]={id:A,value:I,getTransferables:R},S(I)}catch(N){N&&N.noLog||console.error(N),S(N)}}function u(y,S){var A,w=y.id,C=y.args;(!s[w]||typeof s[w].value!="function")&&S(new Error("Worker module "+w+": not found or its 'init' did not return a function"));try{var T=(A=s[w]).value.apply(A,C);T&&typeof T.then=="function"?T.then(R,function(I){return S(I instanceof Error?I:new Error(""+I))}):R(T)}catch(I){S(I)}function R(I){try{var N=s[w].getTransferables&&s[w].getTransferables(I);(!N||!Array.isArray(N)||!N.length)&&(N=void 0),S(I,N)}catch(L){console.error(L),S(L)}}}function f(y,S){var A=void 0;self.troikaDefine=function(C){return A=C};var w=URL.createObjectURL(new Blob(["/** "+y.replace(/\*/g,"")+` **/

troikaDefine(
`+S+`
)`],{type:"application/javascript"}));try{importScripts(w)}catch(C){console.error(C)}return URL.revokeObjectURL(w),delete self.troikaDefine,A}self.addEventListener("message",function(y){var S=y.data,A=S.messageId,w=S.action,C=S.data;try{w==="registerModule"&&n(C,function(T){T instanceof Error?postMessage({messageId:A,success:!1,error:T.message}):postMessage({messageId:A,success:!0,result:{isCallable:typeof T=="function"}})}),w==="callModule"&&u(C,function(T,R){T instanceof Error?postMessage({messageId:A,success:!1,error:T.message}):postMessage({messageId:A,success:!0,result:T},R||void 0)})}catch(T){postMessage({messageId:A,success:!1,error:T.stack})}})}function defineMainThreadModule(s){var n=function(){for(var u=[],f=arguments.length;f--;)u[f]=arguments[f];return n._getInitResult().then(function(y){if(typeof y=="function")return y.apply(void 0,u);throw new Error("Worker module function was called but `init` did not return a callable function")})};return n._getInitResult=function(){var u=s.dependencies,f=s.init;u=Array.isArray(u)?u.map(function(S){return S&&(S=S.onMainThread||S,S._getInitResult&&(S=S._getInitResult())),S}):[];var y=Promise.all(u).then(function(S){return f.apply(null,S)});return n._getInitResult=function(){return y},y},n}var supportsWorkers=function(){var s=!1;if(typeof window<"u"&&typeof window.document<"u")try{var n=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));n.terminate(),s=!0}catch(u){console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+u.message+"]")}return supportsWorkers=function(){return s},s},_workerModuleId=0,_messageId=0,_allowInitAsString=!1,workers=Object.create(null),registeredModules=Object.create(null),openRequests=Object.create(null);function defineWorkerModule(s){if((!s||typeof s.init!="function")&&!_allowInitAsString)throw new Error("requires `options.init` function");var n=s.dependencies,u=s.init,f=s.getTransferables,y=s.workerId,S=defineMainThreadModule(s);y==null&&(y="#default");var A="workerModule"+ ++_workerModuleId,w=s.name||A,C=null;n=n&&n.map(function(R){return typeof R=="function"&&!R.workerModuleData&&(_allowInitAsString=!0,R=defineWorkerModule({workerId:y,name:"<"+w+"> function dependency: "+R.name,init:`function(){return (
`+stringifyFunction(R)+`
)}`}),_allowInitAsString=!1),R&&R.workerModuleData&&(R=R.workerModuleData),R});function T(){for(var R=[],I=arguments.length;I--;)R[I]=arguments[I];if(!supportsWorkers())return S.apply(void 0,R);if(!C){C=callWorker(y,"registerModule",T.workerModuleData);var N=function(){C=null,registeredModules[y].delete(N)};(registeredModules[y]||(registeredModules[y]=new Set)).add(N)}return C.then(function(L){var F=L.isCallable;if(F)return callWorker(y,"callModule",{id:A,args:R});throw new Error("Worker module function was called but `init` did not return a callable function")})}return T.workerModuleData={isWorkerModule:!0,id:A,name:w,dependencies:n,init:stringifyFunction(u),getTransferables:f&&stringifyFunction(f)},T.onMainThread=S,T}function terminateWorker(s){registeredModules[s]&&registeredModules[s].forEach(function(n){n()}),workers[s]&&(workers[s].terminate(),delete workers[s])}function stringifyFunction(s){var n=s.toString();return!/^function/.test(n)&&/^\w+\s*\(/.test(n)&&(n="function "+n),n}function getWorker(s){var n=workers[s];if(!n){var u=stringifyFunction(workerBootstrap);n=workers[s]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+s.replace(/\*/g,"")+` **/

;(`+u+")()"],{type:"application/javascript"}))),n.onmessage=function(f){var y=f.data,S=y.messageId,A=openRequests[S];if(!A)throw new Error("WorkerModule response with empty or unknown messageId");delete openRequests[S],A(y)}}return n}function callWorker(s,n,u){return new Promise(function(f,y){var S=++_messageId;openRequests[S]=function(A){A.success?f(A.result):y(new Error("Error in worker "+n+" call: "+A.error))},getWorker(s).postMessage({messageId:S,action:n,data:u})})}function SDFGenerator(){var s=(function(n){function u(Se,oe,ae,be,he,ue,ye,ce){var _e=1-ye;ce.x=_e*_e*Se+2*_e*ye*ae+ye*ye*he,ce.y=_e*_e*oe+2*_e*ye*be+ye*ye*ue}function f(Se,oe,ae,be,he,ue,ye,ce,_e,ke){var Pe=1-_e;ke.x=Pe*Pe*Pe*Se+3*Pe*Pe*_e*ae+3*Pe*_e*_e*he+_e*_e*_e*ye,ke.y=Pe*Pe*Pe*oe+3*Pe*Pe*_e*be+3*Pe*_e*_e*ue+_e*_e*_e*ce}function y(Se,oe){for(var ae=/([MLQCZ])([^MLQCZ]*)/g,be,he,ue,ye,ce;be=ae.exec(Se);){var _e=be[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(ke){return parseFloat(ke)});switch(be[1]){case"M":ye=he=_e[0],ce=ue=_e[1];break;case"L":(_e[0]!==ye||_e[1]!==ce)&&oe("L",ye,ce,ye=_e[0],ce=_e[1]);break;case"Q":{oe("Q",ye,ce,ye=_e[2],ce=_e[3],_e[0],_e[1]);break}case"C":{oe("C",ye,ce,ye=_e[4],ce=_e[5],_e[0],_e[1],_e[2],_e[3]);break}case"Z":(ye!==he||ce!==ue)&&oe("L",ye,ce,he,ue);break}}}function S(Se,oe,ae){ae===void 0&&(ae=16);var be={x:0,y:0};y(Se,function(he,ue,ye,ce,_e,ke,Pe,$e,xe){switch(he){case"L":oe(ue,ye,ce,_e);break;case"Q":{for(var Ne=ue,je=ye,He=1;He<ae;He++)u(ue,ye,ke,Pe,ce,_e,He/(ae-1),be),oe(Ne,je,be.x,be.y),Ne=be.x,je=be.y;break}case"C":{for(var Ye=ue,Je=ye,ot=1;ot<ae;ot++)f(ue,ye,ke,Pe,$e,xe,ce,_e,ot/(ae-1),be),oe(Ye,Je,be.x,be.y),Ye=be.x,Je=be.y;break}}})}var A="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",w="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",C=new WeakMap,T={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function R(Se,oe){var ae=Se.getContext?Se.getContext("webgl",T):Se,be=C.get(ae);if(!be){let Ye=function(ut){var Et=ue[ut];if(!Et&&(Et=ue[ut]=ae.getExtension(ut),!Et))throw new Error(ut+" not supported");return Et},Je=function(ut,Et){var qe=ae.createShader(Et);return ae.shaderSource(qe,ut),ae.compileShader(qe),qe},ot=function(ut,Et,qe,Le){if(!ye[ut]){var lt={},We={},Qe=ae.createProgram();ae.attachShader(Qe,Je(Et,ae.VERTEX_SHADER)),ae.attachShader(Qe,Je(qe,ae.FRAGMENT_SHADER)),ae.linkProgram(Qe),ye[ut]={program:Qe,transaction:function(St){ae.useProgram(Qe),St({setUniform:function(jt,Gt){for(var Ft=[],ct=arguments.length-2;ct-- >0;)Ft[ct]=arguments[ct+2];var st=We[Gt]||(We[Gt]=ae.getUniformLocation(Qe,Gt));ae["uniform"+jt].apply(ae,[st].concat(Ft))},setAttribute:function(jt,Gt,Ft,ct,st){var nt=lt[jt];nt||(nt=lt[jt]={buf:ae.createBuffer(),loc:ae.getAttribLocation(Qe,jt),data:null}),ae.bindBuffer(ae.ARRAY_BUFFER,nt.buf),ae.vertexAttribPointer(nt.loc,Gt,ae.FLOAT,!1,0,0),ae.enableVertexAttribArray(nt.loc),he?ae.vertexAttribDivisor(nt.loc,ct):Ye("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(nt.loc,ct),st!==nt.data&&(ae.bufferData(ae.ARRAY_BUFFER,st,Ft),nt.data=st)}})}}}ye[ut].transaction(Le)},ze=function(ut,Et){_e++;try{ae.activeTexture(ae.TEXTURE0+_e);var qe=ce[ut];qe||(qe=ce[ut]=ae.createTexture(),ae.bindTexture(ae.TEXTURE_2D,qe),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_MIN_FILTER,ae.NEAREST),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_MAG_FILTER,ae.NEAREST)),ae.bindTexture(ae.TEXTURE_2D,qe),Et(qe,_e)}finally{_e--}},pt=function(ut,Et,qe){var Le=ae.createFramebuffer();ke.push(Le),ae.bindFramebuffer(ae.FRAMEBUFFER,Le),ae.activeTexture(ae.TEXTURE0+Et),ae.bindTexture(ae.TEXTURE_2D,ut),ae.framebufferTexture2D(ae.FRAMEBUFFER,ae.COLOR_ATTACHMENT0,ae.TEXTURE_2D,ut,0);try{qe(Le)}finally{ae.deleteFramebuffer(Le),ae.bindFramebuffer(ae.FRAMEBUFFER,ke[--ke.length-1]||null)}},yt=function(){ue={},ye={},ce={},_e=-1,ke.length=0};var Pe=Ye,$e=Je,xe=ot,Ne=ze,je=pt,He=yt,he=typeof WebGL2RenderingContext<"u"&&ae instanceof WebGL2RenderingContext,ue={},ye={},ce={},_e=-1,ke=[];ae.canvas.addEventListener("webglcontextlost",function(ut){yt(),ut.preventDefault()},!1),C.set(ae,be={gl:ae,isWebGL2:he,getExtension:Ye,withProgram:ot,withTexture:ze,withTextureFramebuffer:pt,handleContextLoss:yt})}oe(be)}function I(Se,oe,ae,be,he,ue,ye,ce){ye===void 0&&(ye=15),ce===void 0&&(ce=null),R(Se,function(_e){var ke=_e.gl,Pe=_e.withProgram,$e=_e.withTexture;$e("copy",function(xe,Ne){ke.texImage2D(ke.TEXTURE_2D,0,ke.RGBA,he,ue,0,ke.RGBA,ke.UNSIGNED_BYTE,oe),Pe("copy",A,w,function(je){var He=je.setUniform,Ye=je.setAttribute;Ye("aUV",2,ke.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),He("1i","image",Ne),ke.bindFramebuffer(ke.FRAMEBUFFER,ce||null),ke.disable(ke.BLEND),ke.colorMask(ye&8,ye&4,ye&2,ye&1),ke.viewport(ae,be,he,ue),ke.scissor(ae,be,he,ue),ke.drawArrays(ke.TRIANGLES,0,3)})})})}function N(Se,oe,ae){var be=Se.width,he=Se.height;R(Se,function(ue){var ye=ue.gl,ce=new Uint8Array(be*he*4);ye.readPixels(0,0,be,he,ye.RGBA,ye.UNSIGNED_BYTE,ce),Se.width=oe,Se.height=ae,I(ye,ce,0,0,be,he)})}var L=Object.freeze({__proto__:null,withWebGLContext:R,renderImageData:I,resizeWebGLCanvasWithoutClearing:N});function F(Se,oe,ae,be,he,ue){ue===void 0&&(ue=1);var ye=new Uint8Array(Se*oe),ce=be[2]-be[0],_e=be[3]-be[1],ke=[];S(ae,function(Ye,Je,ot,ze){ke.push({x1:Ye,y1:Je,x2:ot,y2:ze,minX:Math.min(Ye,ot),minY:Math.min(Je,ze),maxX:Math.max(Ye,ot),maxY:Math.max(Je,ze)})}),ke.sort(function(Ye,Je){return Ye.maxX-Je.maxX});for(var Pe=0;Pe<Se;Pe++)for(var $e=0;$e<oe;$e++){var xe=je(be[0]+ce*(Pe+.5)/Se,be[1]+_e*($e+.5)/oe),Ne=Math.pow(1-Math.abs(xe)/he,ue)/2;xe<0&&(Ne=1-Ne),Ne=Math.max(0,Math.min(255,Math.round(Ne*255))),ye[$e*Se+Pe]=Ne}return ye;function je(Ye,Je){for(var ot=1/0,ze=1/0,pt=ke.length;pt--;){var yt=ke[pt];if(yt.maxX+ze<=Ye)break;if(Ye+ze>yt.minX&&Je-ze<yt.maxY&&Je+ze>yt.minY){var ut=U(Ye,Je,yt.x1,yt.y1,yt.x2,yt.y2);ut<ot&&(ot=ut,ze=Math.sqrt(ot))}}return He(Ye,Je)&&(ze=-ze),ze}function He(Ye,Je){for(var ot=0,ze=ke.length;ze--;){var pt=ke[ze];if(pt.maxX<=Ye)break;var yt=pt.y1>Je!=pt.y2>Je&&Ye<(pt.x2-pt.x1)*(Je-pt.y1)/(pt.y2-pt.y1)+pt.x1;yt&&(ot+=pt.y1<pt.y2?1:-1)}return ot!==0}}function H(Se,oe,ae,be,he,ue,ye,ce,_e,ke){ue===void 0&&(ue=1),ce===void 0&&(ce=0),_e===void 0&&(_e=0),ke===void 0&&(ke=0),z(Se,oe,ae,be,he,ue,ye,null,ce,_e,ke)}function z(Se,oe,ae,be,he,ue,ye,ce,_e,ke,Pe){ue===void 0&&(ue=1),_e===void 0&&(_e=0),ke===void 0&&(ke=0),Pe===void 0&&(Pe=0);for(var $e=F(Se,oe,ae,be,he,ue),xe=new Uint8Array($e.length*4),Ne=0;Ne<$e.length;Ne++)xe[Ne*4+Pe]=$e[Ne];I(ye,xe,_e,ke,Se,oe,1<<3-Pe,ce)}function U(Se,oe,ae,be,he,ue){var ye=he-ae,ce=ue-be,_e=ye*ye+ce*ce,ke=_e?Math.max(0,Math.min(1,((Se-ae)*ye+(oe-be)*ce)/_e)):0,Pe=Se-(ae+ke*ye),$e=oe-(be+ke*ce);return Pe*Pe+$e*$e}var G=Object.freeze({__proto__:null,generate:F,generateIntoCanvas:H,generateIntoFramebuffer:z}),Y="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",K="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",Z="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",J=new Float32Array([0,0,2,0,0,2]),te=null,de=!1,se={},ne=new WeakMap;function ge(Se){if(!de&&!Be(Se))throw new Error("WebGL generation not supported")}function Ee(Se,oe,ae,be,he,ue,ye){if(ue===void 0&&(ue=1),ye===void 0&&(ye=null),!ye&&(ye=te,!ye)){var ce=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!ce)throw new Error("OffscreenCanvas or DOM canvas not supported");ye=te=ce.getContext("webgl",{depth:!1})}ge(ye);var _e=new Uint8Array(Se*oe*4);R(ye,function(xe){var Ne=xe.gl,je=xe.withTexture,He=xe.withTextureFramebuffer;je("readable",function(Ye,Je){Ne.texImage2D(Ne.TEXTURE_2D,0,Ne.RGBA,Se,oe,0,Ne.RGBA,Ne.UNSIGNED_BYTE,null),He(Ye,Je,function(ot){Ie(Se,oe,ae,be,he,ue,Ne,ot,0,0,0),Ne.readPixels(0,0,Se,oe,Ne.RGBA,Ne.UNSIGNED_BYTE,_e)})})});for(var ke=new Uint8Array(Se*oe),Pe=0,$e=0;Pe<_e.length;Pe+=4)ke[$e++]=_e[Pe];return ke}function we(Se,oe,ae,be,he,ue,ye,ce,_e,ke){ue===void 0&&(ue=1),ce===void 0&&(ce=0),_e===void 0&&(_e=0),ke===void 0&&(ke=0),Ie(Se,oe,ae,be,he,ue,ye,null,ce,_e,ke)}function Ie(Se,oe,ae,be,he,ue,ye,ce,_e,ke,Pe){ue===void 0&&(ue=1),_e===void 0&&(_e=0),ke===void 0&&(ke=0),Pe===void 0&&(Pe=0),ge(ye);var $e=[];S(ae,function(xe,Ne,je,He){$e.push(xe,Ne,je,He)}),$e=new Float32Array($e),R(ye,function(xe){var Ne=xe.gl,je=xe.isWebGL2,He=xe.getExtension,Ye=xe.withProgram,Je=xe.withTexture,ot=xe.withTextureFramebuffer,ze=xe.handleContextLoss;if(Je("rawDistances",function(pt,yt){(Se!==pt._lastWidth||oe!==pt._lastHeight)&&Ne.texImage2D(Ne.TEXTURE_2D,0,Ne.RGBA,pt._lastWidth=Se,pt._lastHeight=oe,0,Ne.RGBA,Ne.UNSIGNED_BYTE,null),Ye("main",Y,K,function(ut){var Et=ut.setAttribute,qe=ut.setUniform,Le=!je&&He("ANGLE_instanced_arrays"),lt=!je&&He("EXT_blend_minmax");Et("aUV",2,Ne.STATIC_DRAW,0,J),Et("aLineSegment",4,Ne.DYNAMIC_DRAW,1,$e),qe.apply(void 0,["4f","uGlyphBounds"].concat(be)),qe("1f","uMaxDistance",he),qe("1f","uExponent",ue),ot(pt,yt,function(We){Ne.enable(Ne.BLEND),Ne.colorMask(!0,!0,!0,!0),Ne.viewport(0,0,Se,oe),Ne.scissor(0,0,Se,oe),Ne.blendFunc(Ne.ONE,Ne.ONE),Ne.blendEquationSeparate(Ne.FUNC_ADD,je?Ne.MAX:lt.MAX_EXT),Ne.clear(Ne.COLOR_BUFFER_BIT),je?Ne.drawArraysInstanced(Ne.TRIANGLES,0,3,$e.length/4):Le.drawArraysInstancedANGLE(Ne.TRIANGLES,0,3,$e.length/4)})}),Ye("post",A,Z,function(ut){ut.setAttribute("aUV",2,Ne.STATIC_DRAW,0,J),ut.setUniform("1i","tex",yt),Ne.bindFramebuffer(Ne.FRAMEBUFFER,ce),Ne.disable(Ne.BLEND),Ne.colorMask(Pe===0,Pe===1,Pe===2,Pe===3),Ne.viewport(_e,ke,Se,oe),Ne.scissor(_e,ke,Se,oe),Ne.drawArrays(Ne.TRIANGLES,0,3)})}),Ne.isContextLost())throw ze(),new Error("webgl context lost")})}function Be(Se){var oe=!Se||Se===te?se:Se.canvas||Se,ae=ne.get(oe);if(ae===void 0){de=!0;var be=null;try{var he=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],ue=Ee(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,Se);ae=ue&&he.length===ue.length&&ue.every(function(ye,ce){return ye===he[ce]}),ae||(be="bad trial run results",console.info(he,ue))}catch(ye){ae=!1,be=ye.message}be&&console.warn("WebGL SDF generation not supported:",be),de=!1,ne.set(oe,ae)}return ae}var Me=Object.freeze({__proto__:null,generate:Ee,generateIntoCanvas:we,generateIntoFramebuffer:Ie,isSupported:Be});function Re(Se,oe,ae,be,he,ue){he===void 0&&(he=Math.max(be[2]-be[0],be[3]-be[1])/2),ue===void 0&&(ue=1);try{return Ee.apply(Me,arguments)}catch(ye){return console.info("WebGL SDF generation failed, falling back to JS",ye),F.apply(G,arguments)}}function Te(Se,oe,ae,be,he,ue,ye,ce,_e,ke){he===void 0&&(he=Math.max(be[2]-be[0],be[3]-be[1])/2),ue===void 0&&(ue=1),ce===void 0&&(ce=0),_e===void 0&&(_e=0),ke===void 0&&(ke=0);try{return we.apply(Me,arguments)}catch(Pe){return console.info("WebGL SDF generation failed, falling back to JS",Pe),H.apply(G,arguments)}}return n.forEachPathCommand=y,n.generate=Re,n.generateIntoCanvas=Te,n.javascript=G,n.pathToLineSegments=S,n.webgl=Me,n.webglUtils=L,Object.defineProperty(n,"__esModule",{value:!0}),n})({});return s}function bidiFactory(){var s=(function(n){var u={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},f={},y={};f.L=1,y[1]="L",Object.keys(u).forEach(function(ze,pt){f[ze]=1<<pt+1,y[f[ze]]=ze}),Object.freeze(f);var S=f.LRI|f.RLI|f.FSI,A=f.L|f.R|f.AL,w=f.B|f.S|f.WS|f.ON|f.FSI|f.LRI|f.RLI|f.PDI,C=f.BN|f.RLE|f.LRE|f.RLO|f.LRO|f.PDF,T=f.S|f.WS|f.B|S|f.PDI|C,R=null;function I(){if(!R){R=new Map;var ze=function(yt){if(u.hasOwnProperty(yt)){var ut=0;u[yt].split(",").forEach(function(Et){var qe=Et.split("+"),Le=qe[0],lt=qe[1];Le=parseInt(Le,36),lt=lt?parseInt(lt,36):0,R.set(ut+=Le,f[yt]);for(var We=0;We<lt;We++)R.set(++ut,f[yt])})}};for(var pt in u)ze(pt)}}function N(ze){return I(),R.get(ze.codePointAt(0))||f.L}function L(ze){return y[N(ze)]}var F={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function H(ze,pt){var yt=36,ut=0,Et=new Map,qe=pt&&new Map,Le;return ze.split(",").forEach(function lt(We){if(We.indexOf("+")!==-1)for(var Qe=+We;Qe--;)lt(Le);else{Le=We;var at=We.split(">"),St=at[0],Ct=at[1];St=String.fromCodePoint(ut+=parseInt(St,yt)),Ct=String.fromCodePoint(ut+=parseInt(Ct,yt)),Et.set(St,Ct),pt&&qe.set(Ct,St)}}),{map:Et,reverseMap:qe}}var z,U,G;function Y(){if(!z){var ze=H(F.pairs,!0),pt=ze.map,yt=ze.reverseMap;z=pt,U=yt,G=H(F.canonical,!1).map}}function K(ze){return Y(),z.get(ze)||null}function Z(ze){return Y(),U.get(ze)||null}function J(ze){return Y(),G.get(ze)||null}var te=f.L,de=f.R,se=f.EN,ne=f.ES,ge=f.ET,Ee=f.AN,we=f.CS,Ie=f.B,Be=f.S,Me=f.ON,Re=f.BN,Te=f.NSM,Se=f.AL,oe=f.LRO,ae=f.RLO,be=f.LRE,he=f.RLE,ue=f.PDF,ye=f.LRI,ce=f.RLI,_e=f.FSI,ke=f.PDI;function Pe(ze,pt){for(var yt=125,ut=new Uint32Array(ze.length),Et=0;Et<ze.length;Et++)ut[Et]=N(ze[Et]);var qe=new Map;function Le(Qi,Aa){var ea=ut[Qi];ut[Qi]=Aa,qe.set(ea,qe.get(ea)-1),ea&w&&qe.set(w,qe.get(w)-1),qe.set(Aa,(qe.get(Aa)||0)+1),Aa&w&&qe.set(w,(qe.get(w)||0)+1)}for(var lt=new Uint8Array(ze.length),We=new Map,Qe=[],at=null,St=0;St<ze.length;St++)at||Qe.push(at={start:St,end:ze.length-1,level:pt==="rtl"?1:pt==="ltr"?0:ao(St,!1)}),ut[St]&Ie&&(at.end=St,at=null);for(var Ct=he|be|ae|oe|S|ke|ue|Ie,jt=function(Qi){return Qi+(Qi&1?1:2)},Gt=function(Qi){return Qi+(Qi&1?2:1)},Ft=0;Ft<Qe.length;Ft++){at=Qe[Ft];var ct=[{_level:at.level,_override:0,_isolate:0}],st=void 0,nt=0,At=0,Yt=0;qe.clear();for(var ht=at.start;ht<=at.end;ht++){var Tt=ut[ht];if(st=ct[ct.length-1],qe.set(Tt,(qe.get(Tt)||0)+1),Tt&w&&qe.set(w,(qe.get(w)||0)+1),Tt&Ct)if(Tt&(he|be)){lt[ht]=st._level;var Kt=(Tt===he?Gt:jt)(st._level);Kt<=yt&&!nt&&!At?ct.push({_level:Kt,_override:0,_isolate:0}):nt||At++}else if(Tt&(ae|oe)){lt[ht]=st._level;var _n=(Tt===ae?Gt:jt)(st._level);_n<=yt&&!nt&&!At?ct.push({_level:_n,_override:Tt&ae?de:te,_isolate:0}):nt||At++}else if(Tt&S){Tt&_e&&(Tt=ao(ht+1,!0)===1?ce:ye),lt[ht]=st._level,st._override&&Le(ht,st._override);var Ht=(Tt===ce?Gt:jt)(st._level);Ht<=yt&&nt===0&&At===0?(Yt++,ct.push({_level:Ht,_override:0,_isolate:1,_isolInitIndex:ht})):nt++}else if(Tt&ke){if(nt>0)nt--;else if(Yt>0){for(At=0;!ct[ct.length-1]._isolate;)ct.pop();var Ot=ct[ct.length-1]._isolInitIndex;Ot!=null&&(We.set(Ot,ht),We.set(ht,Ot)),ct.pop(),Yt--}st=ct[ct.length-1],lt[ht]=st._level,st._override&&Le(ht,st._override)}else Tt&ue?(nt===0&&(At>0?At--:!st._isolate&&ct.length>1&&(ct.pop(),st=ct[ct.length-1])),lt[ht]=st._level):Tt&Ie&&(lt[ht]=at.level);else lt[ht]=st._level,st._override&&Tt!==Re&&Le(ht,st._override)}for(var cn=[],Mn=null,In=at.start;In<=at.end;In++){var On=ut[In];if(!(On&C)){var rr=lt[In],Ar=On&S,hr=On===ke;Mn&&rr===Mn._level?(Mn._end=In,Mn._endsWithIsolInit=Ar):cn.push(Mn={_start:In,_end:In,_level:rr,_startsWithPDI:hr,_endsWithIsolInit:Ar})}}for(var Yr=[],$r=0;$r<cn.length;$r++){var wr=cn[$r];if(!wr._startsWithPDI||wr._startsWithPDI&&!We.has(wr._start)){for(var mr=[Mn=wr],ir=void 0;Mn&&Mn._endsWithIsolInit&&(ir=We.get(Mn._end))!=null;)for(var zn=$r+1;zn<cn.length;zn++)if(cn[zn]._start===ir){mr.push(Mn=cn[zn]);break}for(var Lr=[],Hr=0;Hr<mr.length;Hr++)for(var Xe=mr[Hr],it=Xe._start;it<=Xe._end;it++)Lr.push(it);for(var xt=lt[Lr[0]],$t=at.level,en=Lr[0]-1;en>=0;en--)if(!(ut[en]&C)){$t=lt[en];break}var Qt=Lr[Lr.length-1],pn=lt[Qt],mn=at.level;if(!(ut[Qt]&S)){for(var bn=Qt+1;bn<=at.end;bn++)if(!(ut[bn]&C)){mn=lt[bn];break}}Yr.push({_seqIndices:Lr,_sosType:Math.max($t,xt)%2?de:te,_eosType:Math.max(mn,pn)%2?de:te})}}for(var vn=0;vn<Yr.length;vn++){var wn=Yr[vn],qt=wn._seqIndices,Ke=wn._sosType,_t=wn._eosType,It=lt[qt[0]]&1?de:te;if(qe.get(Te))for(var Nt=0;Nt<qt.length;Nt++){var Mt=qt[Nt];if(ut[Mt]&Te){for(var on=Ke,dn=Nt-1;dn>=0;dn--)if(!(ut[qt[dn]]&C)){on=ut[qt[dn]];break}Le(Mt,on&(S|ke)?Me:on)}}if(qe.get(se))for(var ln=0;ln<qt.length;ln++){var kn=qt[ln];if(ut[kn]&se)for(var An=ln-1;An>=-1;An--){var Gn=An===-1?Ke:ut[qt[An]];if(Gn&A){Gn===Se&&Le(kn,Ee);break}}}if(qe.get(Se))for(var Tn=0;Tn<qt.length;Tn++){var Bn=qt[Tn];ut[Bn]&Se&&Le(Bn,de)}if(qe.get(ne)||qe.get(we))for(var nr=1;nr<qt.length-1;nr++){var Nr=qt[nr];if(ut[Nr]&(ne|we)){for(var ar=0,Pn=0,fn=nr-1;fn>=0&&(ar=ut[qt[fn]],!!(ar&C));fn--);for(var Vn=nr+1;Vn<qt.length&&(Pn=ut[qt[Vn]],!!(Pn&C));Vn++);ar===Pn&&(ut[Nr]===ne?ar===se:ar&(se|Ee))&&Le(Nr,ar)}}if(qe.get(se))for(var Rn=0;Rn<qt.length;Rn++){var Mr=qt[Rn];if(ut[Mr]&se){for(var fi=Rn-1;fi>=0&&ut[qt[fi]]&(ge|C);fi--)Le(qt[fi],se);for(Rn++;Rn<qt.length&&ut[qt[Rn]]&(ge|C|se);Rn++)ut[qt[Rn]]!==se&&Le(qt[Rn],se)}}if(qe.get(ge)||qe.get(ne)||qe.get(we))for(var dr=0;dr<qt.length;dr++){var si=qt[dr];if(ut[si]&(ge|ne|we)){Le(si,Me);for(var Or=dr-1;Or>=0&&ut[qt[Or]]&C;Or--)Le(qt[Or],Me);for(var li=dr+1;li<qt.length&&ut[qt[li]]&C;li++)Le(qt[li],Me)}}if(qe.get(se))for(var ci=0,pi=Ke;ci<qt.length;ci++){var xi=qt[ci],va=ut[xi];va&se?pi===te&&Le(xi,te):va&A&&(pi=va)}if(qe.get(w)){var Ce=de|se|Ee,Fe=Ce|te,Ve=[];{for(var mt=[],Pt=0;Pt<qt.length;Pt++)if(ut[qt[Pt]]&w){var an=ze[qt[Pt]],zt=void 0;if(K(an)!==null)if(mt.length<63)mt.push({char:an,seqIndex:Pt});else break;else if((zt=Z(an))!==null)for(var sn=mt.length-1;sn>=0;sn--){var xn=mt[sn].char;if(xn===zt||xn===Z(J(an))||K(J(xn))===an){Ve.push([mt[sn].seqIndex,Pt]),mt.length=sn;break}}}Ve.sort(function(Qi,Aa){return Qi[0]-Aa[0]})}for(var Un=0;Un<Ve.length;Un++){for(var tr=Ve[Un],Tr=tr[0],lr=tr[1],Xn=!1,Fn=0,Hn=Tr+1;Hn<lr;Hn++){var Kn=qt[Hn];if(ut[Kn]&Fe){Xn=!0;var Er=ut[Kn]&Ce?de:te;if(Er===It){Fn=Er;break}}}if(Xn&&!Fn){Fn=Ke;for(var ii=Tr-1;ii>=0;ii--){var Pr=qt[ii];if(ut[Pr]&Fe){var vi=ut[Pr]&Ce?de:te;vi!==It?Fn=vi:Fn=It;break}}}if(Fn){if(ut[qt[Tr]]=ut[qt[lr]]=Fn,Fn!==It){for(var Gr=Tr+1;Gr<qt.length;Gr++)if(!(ut[qt[Gr]]&C)){N(ze[qt[Gr]])&Te&&(ut[qt[Gr]]=Fn);break}}if(Fn!==It){for(var Qn=lr+1;Qn<qt.length;Qn++)if(!(ut[qt[Qn]]&C)){N(ze[qt[Qn]])&Te&&(ut[qt[Qn]]=Fn);break}}}}for(var Wn=0;Wn<qt.length;Wn++)if(ut[qt[Wn]]&w){for(var gr=Wn,fr=Wn,br=Ke,yr=Wn-1;yr>=0;yr--)if(ut[qt[yr]]&C)gr=yr;else{br=ut[qt[yr]]&Ce?de:te;break}for(var da=_t,Ja=Wn+1;Ja<qt.length;Ja++)if(ut[qt[Ja]]&(w|C))fr=Ja;else{da=ut[qt[Ja]]&Ce?de:te;break}for(var cs=gr;cs<=fr;cs++)ut[qt[cs]]=br===da?br:It;Wn=fr}}}for(var Di=at.start;Di<=at.end;Di++){var Ns=lt[Di],Os=ut[Di];if(Ns&1?Os&(te|se|Ee)&&lt[Di]++:Os&de?lt[Di]++:Os&(Ee|se)&&(lt[Di]+=2),Os&C&&(lt[Di]=Di===0?at.level:lt[Di-1]),Di===at.end||N(ze[Di])&(Be|Ie))for(var ro=Di;ro>=0&&N(ze[ro])&T;ro--)lt[ro]=at.level}}return{levels:lt,paragraphs:Qe};function ao(Qi,Aa){for(var ea=Qi;ea<ze.length;ea++){var Ua=ut[ea];if(Ua&(de|Se))return 1;if(Ua&(Ie|te)||Aa&&Ua===ke)return 0;if(Ua&S){var Ds=so(ea);ea=Ds===-1?ze.length:Ds}}return 0}function so(Qi){for(var Aa=1,ea=Qi+1;ea<ze.length;ea++){var Ua=ut[ea];if(Ua&Ie)break;if(Ua&ke){if(--Aa===0)return ea}else Ua&S&&Aa++}return-1}}var $e="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",xe;function Ne(){if(!xe){var ze=H($e,!0),pt=ze.map,yt=ze.reverseMap;yt.forEach(function(ut,Et){pt.set(Et,ut)}),xe=pt}}function je(ze){return Ne(),xe.get(ze)||null}function He(ze,pt,yt,ut){var Et=ze.length;yt=Math.max(0,yt==null?0:+yt),ut=Math.min(Et-1,ut==null?Et-1:+ut);for(var qe=new Map,Le=yt;Le<=ut;Le++)if(pt[Le]&1){var lt=je(ze[Le]);lt!==null&&qe.set(Le,lt)}return qe}function Ye(ze,pt,yt,ut){var Et=ze.length;yt=Math.max(0,yt==null?0:+yt),ut=Math.min(Et-1,ut==null?Et-1:+ut);var qe=[];return pt.paragraphs.forEach(function(Le){var lt=Math.max(yt,Le.start),We=Math.min(ut,Le.end);if(lt<We){for(var Qe=pt.levels.slice(lt,We+1),at=We;at>=lt&&N(ze[at])&T;at--)Qe[at]=Le.level;for(var St=Le.level,Ct=1/0,jt=0;jt<Qe.length;jt++){var Gt=Qe[jt];Gt>St&&(St=Gt),Gt<Ct&&(Ct=Gt|1)}for(var Ft=St;Ft>=Ct;Ft--)for(var ct=0;ct<Qe.length;ct++)if(Qe[ct]>=Ft){for(var st=ct;ct+1<Qe.length&&Qe[ct+1]>=Ft;)ct++;ct>st&&qe.push([st+lt,ct+lt])}}}),qe}function Je(ze,pt,yt,ut){var Et=ot(ze,pt,yt,ut),qe=[].concat(ze);return Et.forEach(function(Le,lt){qe[lt]=(pt.levels[Le]&1?je(ze[Le]):null)||ze[Le]}),qe.join("")}function ot(ze,pt,yt,ut){for(var Et=Ye(ze,pt,yt,ut),qe=[],Le=0;Le<ze.length;Le++)qe[Le]=Le;return Et.forEach(function(lt){for(var We=lt[0],Qe=lt[1],at=qe.slice(We,Qe+1),St=at.length;St--;)qe[Qe-St]=at[St]}),qe}return n.closingToOpeningBracket=Z,n.getBidiCharType=N,n.getBidiCharTypeName=L,n.getCanonicalBracket=J,n.getEmbeddingLevels=Pe,n.getMirroredCharacter=je,n.getMirroredCharactersMap=He,n.getReorderSegments=Ye,n.getReorderedIndices=ot,n.getReorderedString=Je,n.openingToClosingBracket=K,Object.defineProperty(n,"__esModule",{value:!0}),n})({});return s}const voidMainRegExp=/\bvoid\s+main\s*\(\s*\)\s*{/g;function expandShaderIncludes(s){const n=/^[ \t]*#include +<([\w\d./]+)>/gm;function u(f,y){let S=ShaderChunk[y];return S?expandShaderIncludes(S):f}return s.replace(n,u)}const _lut=[];for(let s=0;s<256;s++)_lut[s]=(s<16?"0":"")+s.toString(16);function generateUUID(){const s=Math.random()*4294967295|0,n=Math.random()*4294967295|0,u=Math.random()*4294967295|0,f=Math.random()*4294967295|0;return(_lut[s&255]+_lut[s>>8&255]+_lut[s>>16&255]+_lut[s>>24&255]+"-"+_lut[n&255]+_lut[n>>8&255]+"-"+_lut[n>>16&15|64]+_lut[n>>24&255]+"-"+_lut[u&63|128]+_lut[u>>8&255]+"-"+_lut[u>>16&255]+_lut[u>>24&255]+_lut[f&255]+_lut[f>>8&255]+_lut[f>>16&255]+_lut[f>>24&255]).toUpperCase()}const assign$1=Object.assign||function(){let s=arguments[0];for(let n=1,u=arguments.length;n<u;n++){let f=arguments[n];if(f)for(let y in f)Object.prototype.hasOwnProperty.call(f,y)&&(s[y]=f[y])}return s},epoch=Date.now(),CONSTRUCTOR_CACHE=new WeakMap,SHADER_UPGRADE_CACHE=new Map;let materialInstanceId=1e10;function createDerivedMaterial(s,n){const u=getKeyForOptions(n);let f=CONSTRUCTOR_CACHE.get(s);if(f||CONSTRUCTOR_CACHE.set(s,f=Object.create(null)),f[u])return new f[u];const y=`_onBeforeCompile${u}`,S=function(T,R){s.onBeforeCompile.call(this,T,R);const I=this.customProgramCacheKey()+"|"+T.vertexShader+"|"+T.fragmentShader;let N=SHADER_UPGRADE_CACHE[I];if(!N){const L=upgradeShaders(this,T,n,u);N=SHADER_UPGRADE_CACHE[I]=L}T.vertexShader=N.vertexShader,T.fragmentShader=N.fragmentShader,assign$1(T.uniforms,this.uniforms),n.timeUniform&&(T.uniforms[n.timeUniform]={get value(){return Date.now()-epoch}}),this[y]&&this[y](T)},A=function(){return w(n.chained?s:s.clone())},w=function(T){const R=Object.create(T,C);return Object.defineProperty(R,"baseMaterial",{value:s}),Object.defineProperty(R,"id",{value:materialInstanceId++}),R.uuid=generateUUID(),R.uniforms=assign$1({},T.uniforms,n.uniforms),R.defines=assign$1({},T.defines,n.defines),R.defines[`TROIKA_DERIVED_MATERIAL_${u}`]="",R.extensions=assign$1({},T.extensions,n.extensions),R._listeners=void 0,R},C={constructor:{value:A},isDerivedMaterial:{value:!0},type:{get:()=>s.type,set:T=>{s.type=T}},isDerivedFrom:{writable:!0,configurable:!0,value:function(T){const R=this.baseMaterial;return T===R||R.isDerivedMaterial&&R.isDerivedFrom(T)||!1}},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return s.customProgramCacheKey()+"|"+u}},onBeforeCompile:{get(){return S},set(T){this[y]=T}},copy:{writable:!0,configurable:!0,value:function(T){return s.copy.call(this,T),!s.isShaderMaterial&&!s.isDerivedMaterial&&(assign$1(this.extensions,T.extensions),assign$1(this.defines,T.defines),assign$1(this.uniforms,UniformsUtils.clone(T.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const T=new s.constructor;return w(T).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let T=this._depthMaterial;return T||(T=this._depthMaterial=createDerivedMaterial(s.isDerivedMaterial?s.getDepthMaterial():new MeshDepthMaterial({depthPacking:RGBADepthPacking}),n),T.defines.IS_DEPTH_MATERIAL="",T.uniforms=this.uniforms),T}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let T=this._distanceMaterial;return T||(T=this._distanceMaterial=createDerivedMaterial(s.isDerivedMaterial?s.getDistanceMaterial():new MeshDistanceMaterial,n),T.defines.IS_DISTANCE_MATERIAL="",T.uniforms=this.uniforms),T}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:T,_distanceMaterial:R}=this;T&&T.dispose(),R&&R.dispose(),s.dispose.call(this)}}};return f[u]=A,new A}function upgradeShaders(s,{vertexShader:n,fragmentShader:u},f,y){let{vertexDefs:S,vertexMainIntro:A,vertexMainOutro:w,vertexTransform:C,fragmentDefs:T,fragmentMainIntro:R,fragmentMainOutro:I,fragmentColorTransform:N,customRewriter:L,timeUniform:F}=f;if(S=S||"",A=A||"",w=w||"",T=T||"",R=R||"",I=I||"",(C||L)&&(n=expandShaderIncludes(n)),(N||L)&&(u=u.replace(/^[ \t]*#include <((?:tonemapping|encodings|colorspace|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),u=expandShaderIncludes(u)),L){let H=L({vertexShader:n,fragmentShader:u});n=H.vertexShader,u=H.fragmentShader}if(N){let H=[];u=u.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,z=>(H.push(z),"")),I=`${N}
${H.join(`
`)}
${I}`}if(F){const H=`
uniform float ${F};
`;S=H+S,T=H+T}return C&&(n=`vec3 troika_position_${y};
vec3 troika_normal_${y};
vec2 troika_uv_${y};
${n}
`,S=`${S}
void troikaVertexTransform${y}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${C}
}
`,A=`
troika_position_${y} = vec3(position);
troika_normal_${y} = vec3(normal);
troika_uv_${y} = vec2(uv);
troikaVertexTransform${y}(troika_position_${y}, troika_normal_${y}, troika_uv_${y});
${A}
`,n=n.replace(/\b(position|normal|uv)\b/g,(H,z,U,G)=>/\battribute\s+vec[23]\s+$/.test(G.substr(0,U))?z:`troika_${z}_${y}`),s.map&&s.map.channel>0||(n=n.replace(/\bMAP_UV\b/g,`troika_uv_${y}`))),n=injectIntoShaderCode(n,y,S,A,w),u=injectIntoShaderCode(u,y,T,R,I),{vertexShader:n,fragmentShader:u}}function injectIntoShaderCode(s,n,u,f,y){return(f||y||u)&&(s=s.replace(voidMainRegExp,`
${u}
void troikaOrigMain${n}() {`),s+=`
void main() {
  ${f}
  troikaOrigMain${n}();
  ${y}
}`),s}function optionsJsonReplacer(s,n){return s==="uniforms"?void 0:typeof n=="function"?n.toString():n}let _idCtr=0;const optionsHashesToIds=new Map;function getKeyForOptions(s){const n=JSON.stringify(s,optionsJsonReplacer);let u=optionsHashesToIds.get(n);return u==null&&optionsHashesToIds.set(n,u=++_idCtr),u}function typrFactory(){return typeof window>"u"&&(self.window=self),(function(s){var n={parse:function(y){var S=n._bin,A=new Uint8Array(y);if(S.readASCII(A,0,4)=="ttcf"){var w=4;S.readUshort(A,w),w+=2,S.readUshort(A,w),w+=2;var C=S.readUint(A,w);w+=4;for(var T=[],R=0;R<C;R++){var I=S.readUint(A,w);w+=4,T.push(n._readFont(A,I))}return T}return[n._readFont(A,0)]},_readFont:function(y,S){var A=n._bin,w=S;A.readFixed(y,S),S+=4;var C=A.readUshort(y,S);S+=2,A.readUshort(y,S),S+=2,A.readUshort(y,S),S+=2,A.readUshort(y,S),S+=2;for(var T=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GDEF","GPOS","GSUB","SVG "],R={_data:y,_offset:w},I={},N=0;N<C;N++){var L=A.readASCII(y,S,4);S+=4,A.readUint(y,S),S+=4;var F=A.readUint(y,S);S+=4;var H=A.readUint(y,S);S+=4,I[L]={offset:F,length:H}}for(N=0;N<T.length;N++){var z=T[N];I[z]&&(R[z.trim()]=n[z.trim()].parse(y,I[z].offset,I[z].length,R))}return R},_tabOffset:function(y,S,A){for(var w=n._bin,C=w.readUshort(y,A+4),T=A+12,R=0;R<C;R++){var I=w.readASCII(y,T,4);T+=4,w.readUint(y,T),T+=4;var N=w.readUint(y,T);if(T+=4,w.readUint(y,T),T+=4,I==S)return N}return 0}};n._bin={readFixed:function(y,S){return(y[S]<<8|y[S+1])+(y[S+2]<<8|y[S+3])/65540},readF2dot14:function(y,S){return n._bin.readShort(y,S)/16384},readInt:function(y,S){return n._bin._view(y).getInt32(S)},readInt8:function(y,S){return n._bin._view(y).getInt8(S)},readShort:function(y,S){return n._bin._view(y).getInt16(S)},readUshort:function(y,S){return n._bin._view(y).getUint16(S)},readUshorts:function(y,S,A){for(var w=[],C=0;C<A;C++)w.push(n._bin.readUshort(y,S+2*C));return w},readUint:function(y,S){return n._bin._view(y).getUint32(S)},readUint64:function(y,S){return 4294967296*n._bin.readUint(y,S)+n._bin.readUint(y,S+4)},readASCII:function(y,S,A){for(var w="",C=0;C<A;C++)w+=String.fromCharCode(y[S+C]);return w},readUnicode:function(y,S,A){for(var w="",C=0;C<A;C++){var T=y[S++]<<8|y[S++];w+=String.fromCharCode(T)}return w},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(y,S,A){var w=n._bin._tdec;return w&&S==0&&A==y.length?w.decode(y):n._bin.readASCII(y,S,A)},readBytes:function(y,S,A){for(var w=[],C=0;C<A;C++)w.push(y[S+C]);return w},readASCIIArray:function(y,S,A){for(var w=[],C=0;C<A;C++)w.push(String.fromCharCode(y[S+C]));return w},_view:function(y){return y._dataView||(y._dataView=y.buffer?new DataView(y.buffer,y.byteOffset,y.byteLength):new DataView(new Uint8Array(y).buffer))}},n._lctf={},n._lctf.parse=function(y,S,A,w,C){var T=n._bin,R={},I=S;T.readFixed(y,S),S+=4;var N=T.readUshort(y,S);S+=2;var L=T.readUshort(y,S);S+=2;var F=T.readUshort(y,S);return S+=2,R.scriptList=n._lctf.readScriptList(y,I+N),R.featureList=n._lctf.readFeatureList(y,I+L),R.lookupList=n._lctf.readLookupList(y,I+F,C),R},n._lctf.readLookupList=function(y,S,A){var w=n._bin,C=S,T=[],R=w.readUshort(y,S);S+=2;for(var I=0;I<R;I++){var N=w.readUshort(y,S);S+=2;var L=n._lctf.readLookupTable(y,C+N,A);T.push(L)}return T},n._lctf.readLookupTable=function(y,S,A){var w=n._bin,C=S,T={tabs:[]};T.ltype=w.readUshort(y,S),S+=2,T.flag=w.readUshort(y,S),S+=2;var R=w.readUshort(y,S);S+=2;for(var I=T.ltype,N=0;N<R;N++){var L=w.readUshort(y,S);S+=2;var F=A(y,I,C+L,T);T.tabs.push(F)}return T},n._lctf.numOfOnes=function(y){for(var S=0,A=0;A<32;A++)(y>>>A&1)!=0&&S++;return S},n._lctf.readClassDef=function(y,S){var A=n._bin,w=[],C=A.readUshort(y,S);if(S+=2,C==1){var T=A.readUshort(y,S);S+=2;var R=A.readUshort(y,S);S+=2;for(var I=0;I<R;I++)w.push(T+I),w.push(T+I),w.push(A.readUshort(y,S)),S+=2}if(C==2){var N=A.readUshort(y,S);for(S+=2,I=0;I<N;I++)w.push(A.readUshort(y,S)),S+=2,w.push(A.readUshort(y,S)),S+=2,w.push(A.readUshort(y,S)),S+=2}return w},n._lctf.getInterval=function(y,S){for(var A=0;A<y.length;A+=3){var w=y[A],C=y[A+1];if(y[A+2],w<=S&&S<=C)return A}return-1},n._lctf.readCoverage=function(y,S){var A=n._bin,w={};w.fmt=A.readUshort(y,S),S+=2;var C=A.readUshort(y,S);return S+=2,w.fmt==1&&(w.tab=A.readUshorts(y,S,C)),w.fmt==2&&(w.tab=A.readUshorts(y,S,3*C)),w},n._lctf.coverageIndex=function(y,S){var A=y.tab;if(y.fmt==1)return A.indexOf(S);if(y.fmt==2){var w=n._lctf.getInterval(A,S);if(w!=-1)return A[w+2]+(S-A[w])}return-1},n._lctf.readFeatureList=function(y,S){var A=n._bin,w=S,C=[],T=A.readUshort(y,S);S+=2;for(var R=0;R<T;R++){var I=A.readASCII(y,S,4);S+=4;var N=A.readUshort(y,S);S+=2;var L=n._lctf.readFeatureTable(y,w+N);L.tag=I.trim(),C.push(L)}return C},n._lctf.readFeatureTable=function(y,S){var A=n._bin,w=S,C={},T=A.readUshort(y,S);S+=2,T>0&&(C.featureParams=w+T);var R=A.readUshort(y,S);S+=2,C.tab=[];for(var I=0;I<R;I++)C.tab.push(A.readUshort(y,S+2*I));return C},n._lctf.readScriptList=function(y,S){var A=n._bin,w=S,C={},T=A.readUshort(y,S);S+=2;for(var R=0;R<T;R++){var I=A.readASCII(y,S,4);S+=4;var N=A.readUshort(y,S);S+=2,C[I.trim()]=n._lctf.readScriptTable(y,w+N)}return C},n._lctf.readScriptTable=function(y,S){var A=n._bin,w=S,C={},T=A.readUshort(y,S);S+=2,T>0&&(C.default=n._lctf.readLangSysTable(y,w+T));var R=A.readUshort(y,S);S+=2;for(var I=0;I<R;I++){var N=A.readASCII(y,S,4);S+=4;var L=A.readUshort(y,S);S+=2,C[N.trim()]=n._lctf.readLangSysTable(y,w+L)}return C},n._lctf.readLangSysTable=function(y,S){var A=n._bin,w={};A.readUshort(y,S),S+=2,w.reqFeature=A.readUshort(y,S),S+=2;var C=A.readUshort(y,S);return S+=2,w.features=A.readUshorts(y,S,C),w},n.CFF={},n.CFF.parse=function(y,S,A){var w=n._bin;(y=new Uint8Array(y.buffer,S,A))[S=0],y[++S],y[++S],y[++S],S++;var C=[];S=n.CFF.readIndex(y,S,C);for(var T=[],R=0;R<C.length-1;R++)T.push(w.readASCII(y,S+C[R],C[R+1]-C[R]));S+=C[C.length-1];var I=[];S=n.CFF.readIndex(y,S,I);var N=[];for(R=0;R<I.length-1;R++)N.push(n.CFF.readDict(y,S+I[R],S+I[R+1]));S+=I[I.length-1];var L=N[0],F=[];S=n.CFF.readIndex(y,S,F);var H=[];for(R=0;R<F.length-1;R++)H.push(w.readASCII(y,S+F[R],F[R+1]-F[R]));if(S+=F[F.length-1],n.CFF.readSubrs(y,S,L),L.CharStrings){S=L.CharStrings,F=[],S=n.CFF.readIndex(y,S,F);var z=[];for(R=0;R<F.length-1;R++)z.push(w.readBytes(y,S+F[R],F[R+1]-F[R]));L.CharStrings=z}if(L.ROS){S=L.FDArray;var U=[];for(S=n.CFF.readIndex(y,S,U),L.FDArray=[],R=0;R<U.length-1;R++){var G=n.CFF.readDict(y,S+U[R],S+U[R+1]);n.CFF._readFDict(y,G,H),L.FDArray.push(G)}S+=U[U.length-1],S=L.FDSelect,L.FDSelect=[];var Y=y[S];if(S++,Y!=3)throw Y;var K=w.readUshort(y,S);for(S+=2,R=0;R<K+1;R++)L.FDSelect.push(w.readUshort(y,S),y[S+2]),S+=3}return L.Encoding&&(L.Encoding=n.CFF.readEncoding(y,L.Encoding,L.CharStrings.length)),L.charset&&(L.charset=n.CFF.readCharset(y,L.charset,L.CharStrings.length)),n.CFF._readFDict(y,L,H),L},n.CFF._readFDict=function(y,S,A){var w;for(var C in S.Private&&(w=S.Private[1],S.Private=n.CFF.readDict(y,w,w+S.Private[0]),S.Private.Subrs&&n.CFF.readSubrs(y,w+S.Private.Subrs,S.Private)),S)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(C)!=-1&&(S[C]=A[S[C]-426+35])},n.CFF.readSubrs=function(y,S,A){var w=n._bin,C=[];S=n.CFF.readIndex(y,S,C);var T,R=C.length;T=R<1240?107:R<33900?1131:32768,A.Bias=T,A.Subrs=[];for(var I=0;I<C.length-1;I++)A.Subrs.push(w.readBytes(y,S+C[I],C[I+1]-C[I]))},n.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],n.CFF.glyphByUnicode=function(y,S){for(var A=0;A<y.charset.length;A++)if(y.charset[A]==S)return A;return-1},n.CFF.glyphBySE=function(y,S){return S<0||S>255?-1:n.CFF.glyphByUnicode(y,n.CFF.tableSE[S])},n.CFF.readEncoding=function(y,S,A){n._bin;var w=[".notdef"],C=y[S];if(S++,C!=0)throw"error: unknown encoding format: "+C;var T=y[S];S++;for(var R=0;R<T;R++)w.push(y[S+R]);return w},n.CFF.readCharset=function(y,S,A){var w=n._bin,C=[".notdef"],T=y[S];if(S++,T==0)for(var R=0;R<A;R++){var I=w.readUshort(y,S);S+=2,C.push(I)}else{if(T!=1&&T!=2)throw"error: format: "+T;for(;C.length<A;){I=w.readUshort(y,S),S+=2;var N=0;for(T==1?(N=y[S],S++):(N=w.readUshort(y,S),S+=2),R=0;R<=N;R++)C.push(I),I++}}return C},n.CFF.readIndex=function(y,S,A){var w=n._bin,C=w.readUshort(y,S)+1,T=y[S+=2];if(S++,T==1)for(var R=0;R<C;R++)A.push(y[S+R]);else if(T==2)for(R=0;R<C;R++)A.push(w.readUshort(y,S+2*R));else if(T==3)for(R=0;R<C;R++)A.push(16777215&w.readUint(y,S+3*R-1));else if(C!=1)throw"unsupported offset size: "+T+", count: "+C;return(S+=C*T)-1},n.CFF.getCharString=function(y,S,A){var w=n._bin,C=y[S],T=y[S+1];y[S+2],y[S+3],y[S+4];var R=1,I=null,N=null;C<=20&&(I=C,R=1),C==12&&(I=100*C+T,R=2),21<=C&&C<=27&&(I=C,R=1),C==28&&(N=w.readShort(y,S+1),R=3),29<=C&&C<=31&&(I=C,R=1),32<=C&&C<=246&&(N=C-139,R=1),247<=C&&C<=250&&(N=256*(C-247)+T+108,R=2),251<=C&&C<=254&&(N=256*-(C-251)-T-108,R=2),C==255&&(N=w.readInt(y,S+1)/65535,R=5),A.val=N??"o"+I,A.size=R},n.CFF.readCharString=function(y,S,A){for(var w=S+A,C=n._bin,T=[];S<w;){var R=y[S],I=y[S+1];y[S+2],y[S+3],y[S+4];var N=1,L=null,F=null;R<=20&&(L=R,N=1),R==12&&(L=100*R+I,N=2),R!=19&&R!=20||(L=R,N=2),21<=R&&R<=27&&(L=R,N=1),R==28&&(F=C.readShort(y,S+1),N=3),29<=R&&R<=31&&(L=R,N=1),32<=R&&R<=246&&(F=R-139,N=1),247<=R&&R<=250&&(F=256*(R-247)+I+108,N=2),251<=R&&R<=254&&(F=256*-(R-251)-I-108,N=2),R==255&&(F=C.readInt(y,S+1)/65535,N=5),T.push(F??"o"+L),S+=N}return T},n.CFF.readDict=function(y,S,A){for(var w=n._bin,C={},T=[];S<A;){var R=y[S],I=y[S+1];y[S+2],y[S+3],y[S+4];var N=1,L=null,F=null;if(R==28&&(F=w.readShort(y,S+1),N=3),R==29&&(F=w.readInt(y,S+1),N=5),32<=R&&R<=246&&(F=R-139,N=1),247<=R&&R<=250&&(F=256*(R-247)+I+108,N=2),251<=R&&R<=254&&(F=256*-(R-251)-I-108,N=2),R==255)throw F=w.readInt(y,S+1)/65535,N=5,"unknown number";if(R==30){var H=[];for(N=1;;){var z=y[S+N];N++;var U=z>>4,G=15&z;if(U!=15&&H.push(U),G!=15&&H.push(G),G==15)break}for(var Y="",K=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],Z=0;Z<H.length;Z++)Y+=K[H[Z]];F=parseFloat(Y)}R<=21&&(L=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][R],N=1,R==12&&(L=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][I],N=2)),L!=null?(C[L]=T.length==1?T[0]:T,T=[]):T.push(F),S+=N}return C},n.cmap={},n.cmap.parse=function(y,S,A){y=new Uint8Array(y.buffer,S,A),S=0;var w=n._bin,C={};w.readUshort(y,S),S+=2;var T=w.readUshort(y,S);S+=2;var R=[];C.tables=[];for(var I=0;I<T;I++){var N=w.readUshort(y,S);S+=2;var L=w.readUshort(y,S);S+=2;var F=w.readUint(y,S);S+=4;var H="p"+N+"e"+L,z=R.indexOf(F);if(z==-1){var U;z=C.tables.length,R.push(F);var G=w.readUshort(y,F);G==0?U=n.cmap.parse0(y,F):G==4?U=n.cmap.parse4(y,F):G==6?U=n.cmap.parse6(y,F):G==12?U=n.cmap.parse12(y,F):console.debug("unknown format: "+G,N,L,F),C.tables.push(U)}if(C[H]!=null)throw"multiple tables for one platform+encoding";C[H]=z}return C},n.cmap.parse0=function(y,S){var A=n._bin,w={};w.format=A.readUshort(y,S),S+=2;var C=A.readUshort(y,S);S+=2,A.readUshort(y,S),S+=2,w.map=[];for(var T=0;T<C-6;T++)w.map.push(y[S+T]);return w},n.cmap.parse4=function(y,S){var A=n._bin,w=S,C={};C.format=A.readUshort(y,S),S+=2;var T=A.readUshort(y,S);S+=2,A.readUshort(y,S),S+=2;var R=A.readUshort(y,S);S+=2;var I=R/2;C.searchRange=A.readUshort(y,S),S+=2,C.entrySelector=A.readUshort(y,S),S+=2,C.rangeShift=A.readUshort(y,S),S+=2,C.endCount=A.readUshorts(y,S,I),S+=2*I,S+=2,C.startCount=A.readUshorts(y,S,I),S+=2*I,C.idDelta=[];for(var N=0;N<I;N++)C.idDelta.push(A.readShort(y,S)),S+=2;for(C.idRangeOffset=A.readUshorts(y,S,I),S+=2*I,C.glyphIdArray=[];S<w+T;)C.glyphIdArray.push(A.readUshort(y,S)),S+=2;return C},n.cmap.parse6=function(y,S){var A=n._bin,w={};w.format=A.readUshort(y,S),S+=2,A.readUshort(y,S),S+=2,A.readUshort(y,S),S+=2,w.firstCode=A.readUshort(y,S),S+=2;var C=A.readUshort(y,S);S+=2,w.glyphIdArray=[];for(var T=0;T<C;T++)w.glyphIdArray.push(A.readUshort(y,S)),S+=2;return w},n.cmap.parse12=function(y,S){var A=n._bin,w={};w.format=A.readUshort(y,S),S+=2,S+=2,A.readUint(y,S),S+=4,A.readUint(y,S),S+=4;var C=A.readUint(y,S);S+=4,w.groups=[];for(var T=0;T<C;T++){var R=S+12*T,I=A.readUint(y,R+0),N=A.readUint(y,R+4),L=A.readUint(y,R+8);w.groups.push([I,N,L])}return w},n.glyf={},n.glyf.parse=function(y,S,A,w){for(var C=[],T=0;T<w.maxp.numGlyphs;T++)C.push(null);return C},n.glyf._parseGlyf=function(y,S){var A=n._bin,w=y._data,C=n._tabOffset(w,"glyf",y._offset)+y.loca[S];if(y.loca[S]==y.loca[S+1])return null;var T={};if(T.noc=A.readShort(w,C),C+=2,T.xMin=A.readShort(w,C),C+=2,T.yMin=A.readShort(w,C),C+=2,T.xMax=A.readShort(w,C),C+=2,T.yMax=A.readShort(w,C),C+=2,T.xMin>=T.xMax||T.yMin>=T.yMax)return null;if(T.noc>0){T.endPts=[];for(var R=0;R<T.noc;R++)T.endPts.push(A.readUshort(w,C)),C+=2;var I=A.readUshort(w,C);if(C+=2,w.length-C<I)return null;T.instructions=A.readBytes(w,C,I),C+=I;var N=T.endPts[T.noc-1]+1;for(T.flags=[],R=0;R<N;R++){var L=w[C];if(C++,T.flags.push(L),(8&L)!=0){var F=w[C];C++;for(var H=0;H<F;H++)T.flags.push(L),R++}}for(T.xs=[],R=0;R<N;R++){var z=(2&T.flags[R])!=0,U=(16&T.flags[R])!=0;z?(T.xs.push(U?w[C]:-w[C]),C++):U?T.xs.push(0):(T.xs.push(A.readShort(w,C)),C+=2)}for(T.ys=[],R=0;R<N;R++)z=(4&T.flags[R])!=0,U=(32&T.flags[R])!=0,z?(T.ys.push(U?w[C]:-w[C]),C++):U?T.ys.push(0):(T.ys.push(A.readShort(w,C)),C+=2);var G=0,Y=0;for(R=0;R<N;R++)G+=T.xs[R],Y+=T.ys[R],T.xs[R]=G,T.ys[R]=Y}else{var K;T.parts=[];do{K=A.readUshort(w,C),C+=2;var Z={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(T.parts.push(Z),Z.glyphIndex=A.readUshort(w,C),C+=2,1&K){var J=A.readShort(w,C);C+=2;var te=A.readShort(w,C);C+=2}else J=A.readInt8(w,C),C++,te=A.readInt8(w,C),C++;2&K?(Z.m.tx=J,Z.m.ty=te):(Z.p1=J,Z.p2=te),8&K?(Z.m.a=Z.m.d=A.readF2dot14(w,C),C+=2):64&K?(Z.m.a=A.readF2dot14(w,C),C+=2,Z.m.d=A.readF2dot14(w,C),C+=2):128&K&&(Z.m.a=A.readF2dot14(w,C),C+=2,Z.m.b=A.readF2dot14(w,C),C+=2,Z.m.c=A.readF2dot14(w,C),C+=2,Z.m.d=A.readF2dot14(w,C),C+=2)}while(32&K);if(256&K){var de=A.readUshort(w,C);for(C+=2,T.instr=[],R=0;R<de;R++)T.instr.push(w[C]),C++}}return T},n.GDEF={},n.GDEF.parse=function(y,S,A,w){var C=S;S+=4;var T=n._bin.readUshort(y,S);return{glyphClassDef:T===0?null:n._lctf.readClassDef(y,C+T)}},n.GPOS={},n.GPOS.parse=function(y,S,A,w){return n._lctf.parse(y,S,A,w,n.GPOS.subt)},n.GPOS.subt=function(y,S,A,w){var C=n._bin,T=A,R={};if(R.fmt=C.readUshort(y,A),A+=2,S==1||S==2||S==3||S==7||S==8&&R.fmt<=2){var I=C.readUshort(y,A);A+=2,R.coverage=n._lctf.readCoverage(y,I+T)}if(S==1&&R.fmt==1){var N=C.readUshort(y,A);A+=2,N!=0&&(R.pos=n.GPOS.readValueRecord(y,A,N))}else if(S==2&&R.fmt>=1&&R.fmt<=2){N=C.readUshort(y,A),A+=2;var L=C.readUshort(y,A);A+=2;var F=n._lctf.numOfOnes(N),H=n._lctf.numOfOnes(L);if(R.fmt==1){R.pairsets=[];var z=C.readUshort(y,A);A+=2;for(var U=0;U<z;U++){var G=T+C.readUshort(y,A);A+=2;var Y=C.readUshort(y,G);G+=2;for(var K=[],Z=0;Z<Y;Z++){var J=C.readUshort(y,G);G+=2,N!=0&&(Ee=n.GPOS.readValueRecord(y,G,N),G+=2*F),L!=0&&(we=n.GPOS.readValueRecord(y,G,L),G+=2*H),K.push({gid2:J,val1:Ee,val2:we})}R.pairsets.push(K)}}if(R.fmt==2){var te=C.readUshort(y,A);A+=2;var de=C.readUshort(y,A);A+=2;var se=C.readUshort(y,A);A+=2;var ne=C.readUshort(y,A);for(A+=2,R.classDef1=n._lctf.readClassDef(y,T+te),R.classDef2=n._lctf.readClassDef(y,T+de),R.matrix=[],U=0;U<se;U++){var ge=[];for(Z=0;Z<ne;Z++){var Ee=null,we=null;N!=0&&(Ee=n.GPOS.readValueRecord(y,A,N),A+=2*F),L!=0&&(we=n.GPOS.readValueRecord(y,A,L),A+=2*H),ge.push({val1:Ee,val2:we})}R.matrix.push(ge)}}}else if(S==4&&R.fmt==1)R.markCoverage=n._lctf.readCoverage(y,C.readUshort(y,A)+T),R.baseCoverage=n._lctf.readCoverage(y,C.readUshort(y,A+2)+T),R.markClassCount=C.readUshort(y,A+4),R.markArray=n.GPOS.readMarkArray(y,C.readUshort(y,A+6)+T),R.baseArray=n.GPOS.readBaseArray(y,C.readUshort(y,A+8)+T,R.markClassCount);else if(S==6&&R.fmt==1)R.mark1Coverage=n._lctf.readCoverage(y,C.readUshort(y,A)+T),R.mark2Coverage=n._lctf.readCoverage(y,C.readUshort(y,A+2)+T),R.markClassCount=C.readUshort(y,A+4),R.mark1Array=n.GPOS.readMarkArray(y,C.readUshort(y,A+6)+T),R.mark2Array=n.GPOS.readBaseArray(y,C.readUshort(y,A+8)+T,R.markClassCount);else{if(S==9&&R.fmt==1){var Ie=C.readUshort(y,A);A+=2;var Be=C.readUint(y,A);if(A+=4,w.ltype==9)w.ltype=Ie;else if(w.ltype!=Ie)throw"invalid extension substitution";return n.GPOS.subt(y,w.ltype,T+Be)}console.debug("unsupported GPOS table LookupType",S,"format",R.fmt)}return R},n.GPOS.readValueRecord=function(y,S,A){var w=n._bin,C=[];return C.push(1&A?w.readShort(y,S):0),S+=1&A?2:0,C.push(2&A?w.readShort(y,S):0),S+=2&A?2:0,C.push(4&A?w.readShort(y,S):0),S+=4&A?2:0,C.push(8&A?w.readShort(y,S):0),S+=8&A?2:0,C},n.GPOS.readBaseArray=function(y,S,A){var w=n._bin,C=[],T=S,R=w.readUshort(y,S);S+=2;for(var I=0;I<R;I++){for(var N=[],L=0;L<A;L++)N.push(n.GPOS.readAnchorRecord(y,T+w.readUshort(y,S))),S+=2;C.push(N)}return C},n.GPOS.readMarkArray=function(y,S){var A=n._bin,w=[],C=S,T=A.readUshort(y,S);S+=2;for(var R=0;R<T;R++){var I=n.GPOS.readAnchorRecord(y,A.readUshort(y,S+2)+C);I.markClass=A.readUshort(y,S),w.push(I),S+=4}return w},n.GPOS.readAnchorRecord=function(y,S){var A=n._bin,w={};return w.fmt=A.readUshort(y,S),w.x=A.readShort(y,S+2),w.y=A.readShort(y,S+4),w},n.GSUB={},n.GSUB.parse=function(y,S,A,w){return n._lctf.parse(y,S,A,w,n.GSUB.subt)},n.GSUB.subt=function(y,S,A,w){var C=n._bin,T=A,R={};if(R.fmt=C.readUshort(y,A),A+=2,S!=1&&S!=2&&S!=4&&S!=5&&S!=6)return null;if(S==1||S==2||S==4||S==5&&R.fmt<=2||S==6&&R.fmt<=2){var I=C.readUshort(y,A);A+=2,R.coverage=n._lctf.readCoverage(y,T+I)}if(S==1&&R.fmt>=1&&R.fmt<=2){if(R.fmt==1)R.delta=C.readShort(y,A),A+=2;else if(R.fmt==2){var N=C.readUshort(y,A);A+=2,R.newg=C.readUshorts(y,A,N),A+=2*R.newg.length}}else if(S==2&&R.fmt==1){N=C.readUshort(y,A),A+=2,R.seqs=[];for(var L=0;L<N;L++){var F=C.readUshort(y,A)+T;A+=2;var H=C.readUshort(y,F);R.seqs.push(C.readUshorts(y,F+2,H))}}else if(S==4)for(R.vals=[],N=C.readUshort(y,A),A+=2,L=0;L<N;L++){var z=C.readUshort(y,A);A+=2,R.vals.push(n.GSUB.readLigatureSet(y,T+z))}else if(S==5&&R.fmt==2){if(R.fmt==2){var U=C.readUshort(y,A);A+=2,R.cDef=n._lctf.readClassDef(y,T+U),R.scset=[];var G=C.readUshort(y,A);for(A+=2,L=0;L<G;L++){var Y=C.readUshort(y,A);A+=2,R.scset.push(Y==0?null:n.GSUB.readSubClassSet(y,T+Y))}}}else if(S==6&&R.fmt==3){if(R.fmt==3){for(L=0;L<3;L++){N=C.readUshort(y,A),A+=2;for(var K=[],Z=0;Z<N;Z++)K.push(n._lctf.readCoverage(y,T+C.readUshort(y,A+2*Z)));A+=2*N,L==0&&(R.backCvg=K),L==1&&(R.inptCvg=K),L==2&&(R.ahedCvg=K)}N=C.readUshort(y,A),A+=2,R.lookupRec=n.GSUB.readSubstLookupRecords(y,A,N)}}else{if(S==7&&R.fmt==1){var J=C.readUshort(y,A);A+=2;var te=C.readUint(y,A);if(A+=4,w.ltype==9)w.ltype=J;else if(w.ltype!=J)throw"invalid extension substitution";return n.GSUB.subt(y,w.ltype,T+te)}console.debug("unsupported GSUB table LookupType",S,"format",R.fmt)}return R},n.GSUB.readSubClassSet=function(y,S){var A=n._bin.readUshort,w=S,C=[],T=A(y,S);S+=2;for(var R=0;R<T;R++){var I=A(y,S);S+=2,C.push(n.GSUB.readSubClassRule(y,w+I))}return C},n.GSUB.readSubClassRule=function(y,S){var A=n._bin.readUshort,w={},C=A(y,S),T=A(y,S+=2);S+=2,w.input=[];for(var R=0;R<C-1;R++)w.input.push(A(y,S)),S+=2;return w.substLookupRecords=n.GSUB.readSubstLookupRecords(y,S,T),w},n.GSUB.readSubstLookupRecords=function(y,S,A){for(var w=n._bin.readUshort,C=[],T=0;T<A;T++)C.push(w(y,S),w(y,S+2)),S+=4;return C},n.GSUB.readChainSubClassSet=function(y,S){var A=n._bin,w=S,C=[],T=A.readUshort(y,S);S+=2;for(var R=0;R<T;R++){var I=A.readUshort(y,S);S+=2,C.push(n.GSUB.readChainSubClassRule(y,w+I))}return C},n.GSUB.readChainSubClassRule=function(y,S){for(var A=n._bin,w={},C=["backtrack","input","lookahead"],T=0;T<C.length;T++){var R=A.readUshort(y,S);S+=2,T==1&&R--,w[C[T]]=A.readUshorts(y,S,R),S+=2*w[C[T]].length}return R=A.readUshort(y,S),S+=2,w.subst=A.readUshorts(y,S,2*R),S+=2*w.subst.length,w},n.GSUB.readLigatureSet=function(y,S){var A=n._bin,w=S,C=[],T=A.readUshort(y,S);S+=2;for(var R=0;R<T;R++){var I=A.readUshort(y,S);S+=2,C.push(n.GSUB.readLigature(y,w+I))}return C},n.GSUB.readLigature=function(y,S){var A=n._bin,w={chain:[]};w.nglyph=A.readUshort(y,S),S+=2;var C=A.readUshort(y,S);S+=2;for(var T=0;T<C-1;T++)w.chain.push(A.readUshort(y,S)),S+=2;return w},n.head={},n.head.parse=function(y,S,A){var w=n._bin,C={};return w.readFixed(y,S),S+=4,C.fontRevision=w.readFixed(y,S),S+=4,w.readUint(y,S),S+=4,w.readUint(y,S),S+=4,C.flags=w.readUshort(y,S),S+=2,C.unitsPerEm=w.readUshort(y,S),S+=2,C.created=w.readUint64(y,S),S+=8,C.modified=w.readUint64(y,S),S+=8,C.xMin=w.readShort(y,S),S+=2,C.yMin=w.readShort(y,S),S+=2,C.xMax=w.readShort(y,S),S+=2,C.yMax=w.readShort(y,S),S+=2,C.macStyle=w.readUshort(y,S),S+=2,C.lowestRecPPEM=w.readUshort(y,S),S+=2,C.fontDirectionHint=w.readShort(y,S),S+=2,C.indexToLocFormat=w.readShort(y,S),S+=2,C.glyphDataFormat=w.readShort(y,S),S+=2,C},n.hhea={},n.hhea.parse=function(y,S,A){var w=n._bin,C={};return w.readFixed(y,S),S+=4,C.ascender=w.readShort(y,S),S+=2,C.descender=w.readShort(y,S),S+=2,C.lineGap=w.readShort(y,S),S+=2,C.advanceWidthMax=w.readUshort(y,S),S+=2,C.minLeftSideBearing=w.readShort(y,S),S+=2,C.minRightSideBearing=w.readShort(y,S),S+=2,C.xMaxExtent=w.readShort(y,S),S+=2,C.caretSlopeRise=w.readShort(y,S),S+=2,C.caretSlopeRun=w.readShort(y,S),S+=2,C.caretOffset=w.readShort(y,S),S+=2,S+=8,C.metricDataFormat=w.readShort(y,S),S+=2,C.numberOfHMetrics=w.readUshort(y,S),S+=2,C},n.hmtx={},n.hmtx.parse=function(y,S,A,w){for(var C=n._bin,T={aWidth:[],lsBearing:[]},R=0,I=0,N=0;N<w.maxp.numGlyphs;N++)N<w.hhea.numberOfHMetrics&&(R=C.readUshort(y,S),S+=2,I=C.readShort(y,S),S+=2),T.aWidth.push(R),T.lsBearing.push(I);return T},n.kern={},n.kern.parse=function(y,S,A,w){var C=n._bin,T=C.readUshort(y,S);if(S+=2,T==1)return n.kern.parseV1(y,S-2,A,w);var R=C.readUshort(y,S);S+=2;for(var I={glyph1:[],rval:[]},N=0;N<R;N++){S+=2,A=C.readUshort(y,S),S+=2;var L=C.readUshort(y,S);S+=2;var F=L>>>8;if((F&=15)!=0)throw"unknown kern table format: "+F;S=n.kern.readFormat0(y,S,I)}return I},n.kern.parseV1=function(y,S,A,w){var C=n._bin;C.readFixed(y,S),S+=4;var T=C.readUint(y,S);S+=4;for(var R={glyph1:[],rval:[]},I=0;I<T;I++){C.readUint(y,S),S+=4;var N=C.readUshort(y,S);S+=2,C.readUshort(y,S),S+=2;var L=N>>>8;if((L&=15)!=0)throw"unknown kern table format: "+L;S=n.kern.readFormat0(y,S,R)}return R},n.kern.readFormat0=function(y,S,A){var w=n._bin,C=-1,T=w.readUshort(y,S);S+=2,w.readUshort(y,S),S+=2,w.readUshort(y,S),S+=2,w.readUshort(y,S),S+=2;for(var R=0;R<T;R++){var I=w.readUshort(y,S);S+=2;var N=w.readUshort(y,S);S+=2;var L=w.readShort(y,S);S+=2,I!=C&&(A.glyph1.push(I),A.rval.push({glyph2:[],vals:[]}));var F=A.rval[A.rval.length-1];F.glyph2.push(N),F.vals.push(L),C=I}return S},n.loca={},n.loca.parse=function(y,S,A,w){var C=n._bin,T=[],R=w.head.indexToLocFormat,I=w.maxp.numGlyphs+1;if(R==0)for(var N=0;N<I;N++)T.push(C.readUshort(y,S+(N<<1))<<1);if(R==1)for(N=0;N<I;N++)T.push(C.readUint(y,S+(N<<2)));return T},n.maxp={},n.maxp.parse=function(y,S,A){var w=n._bin,C={},T=w.readUint(y,S);return S+=4,C.numGlyphs=w.readUshort(y,S),S+=2,T==65536&&(C.maxPoints=w.readUshort(y,S),S+=2,C.maxContours=w.readUshort(y,S),S+=2,C.maxCompositePoints=w.readUshort(y,S),S+=2,C.maxCompositeContours=w.readUshort(y,S),S+=2,C.maxZones=w.readUshort(y,S),S+=2,C.maxTwilightPoints=w.readUshort(y,S),S+=2,C.maxStorage=w.readUshort(y,S),S+=2,C.maxFunctionDefs=w.readUshort(y,S),S+=2,C.maxInstructionDefs=w.readUshort(y,S),S+=2,C.maxStackElements=w.readUshort(y,S),S+=2,C.maxSizeOfInstructions=w.readUshort(y,S),S+=2,C.maxComponentElements=w.readUshort(y,S),S+=2,C.maxComponentDepth=w.readUshort(y,S),S+=2),C},n.name={},n.name.parse=function(y,S,A){var w=n._bin,C={};w.readUshort(y,S),S+=2;var T=w.readUshort(y,S);S+=2,w.readUshort(y,S);for(var R,I=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],N=S+=2,L=0;L<T;L++){var F=w.readUshort(y,S);S+=2;var H=w.readUshort(y,S);S+=2;var z=w.readUshort(y,S);S+=2;var U=w.readUshort(y,S);S+=2;var G=w.readUshort(y,S);S+=2;var Y=w.readUshort(y,S);S+=2;var K,Z=I[U],J=N+12*T+Y;if(F==0)K=w.readUnicode(y,J,G/2);else if(F==3&&H==0)K=w.readUnicode(y,J,G/2);else if(H==0)K=w.readASCII(y,J,G);else if(H==1)K=w.readUnicode(y,J,G/2);else if(H==3)K=w.readUnicode(y,J,G/2);else{if(F!=1)throw"unknown encoding "+H+", platformID: "+F;K=w.readASCII(y,J,G),console.debug("reading unknown MAC encoding "+H+" as ASCII")}var te="p"+F+","+z.toString(16);C[te]==null&&(C[te]={}),C[te][Z!==void 0?Z:U]=K,C[te]._lang=z}for(var de in C)if(C[de].postScriptName!=null&&C[de]._lang==1033)return C[de];for(var de in C)if(C[de].postScriptName!=null&&C[de]._lang==0)return C[de];for(var de in C)if(C[de].postScriptName!=null&&C[de]._lang==3084)return C[de];for(var de in C)if(C[de].postScriptName!=null)return C[de];for(var de in C){R=de;break}return console.debug("returning name table with languageID "+C[R]._lang),C[R]},n["OS/2"]={},n["OS/2"].parse=function(y,S,A){var w=n._bin.readUshort(y,S);S+=2;var C={};if(w==0)n["OS/2"].version0(y,S,C);else if(w==1)n["OS/2"].version1(y,S,C);else if(w==2||w==3||w==4)n["OS/2"].version2(y,S,C);else{if(w!=5)throw"unknown OS/2 table version: "+w;n["OS/2"].version5(y,S,C)}return C},n["OS/2"].version0=function(y,S,A){var w=n._bin;return A.xAvgCharWidth=w.readShort(y,S),S+=2,A.usWeightClass=w.readUshort(y,S),S+=2,A.usWidthClass=w.readUshort(y,S),S+=2,A.fsType=w.readUshort(y,S),S+=2,A.ySubscriptXSize=w.readShort(y,S),S+=2,A.ySubscriptYSize=w.readShort(y,S),S+=2,A.ySubscriptXOffset=w.readShort(y,S),S+=2,A.ySubscriptYOffset=w.readShort(y,S),S+=2,A.ySuperscriptXSize=w.readShort(y,S),S+=2,A.ySuperscriptYSize=w.readShort(y,S),S+=2,A.ySuperscriptXOffset=w.readShort(y,S),S+=2,A.ySuperscriptYOffset=w.readShort(y,S),S+=2,A.yStrikeoutSize=w.readShort(y,S),S+=2,A.yStrikeoutPosition=w.readShort(y,S),S+=2,A.sFamilyClass=w.readShort(y,S),S+=2,A.panose=w.readBytes(y,S,10),S+=10,A.ulUnicodeRange1=w.readUint(y,S),S+=4,A.ulUnicodeRange2=w.readUint(y,S),S+=4,A.ulUnicodeRange3=w.readUint(y,S),S+=4,A.ulUnicodeRange4=w.readUint(y,S),S+=4,A.achVendID=[w.readInt8(y,S),w.readInt8(y,S+1),w.readInt8(y,S+2),w.readInt8(y,S+3)],S+=4,A.fsSelection=w.readUshort(y,S),S+=2,A.usFirstCharIndex=w.readUshort(y,S),S+=2,A.usLastCharIndex=w.readUshort(y,S),S+=2,A.sTypoAscender=w.readShort(y,S),S+=2,A.sTypoDescender=w.readShort(y,S),S+=2,A.sTypoLineGap=w.readShort(y,S),S+=2,A.usWinAscent=w.readUshort(y,S),S+=2,A.usWinDescent=w.readUshort(y,S),S+=2},n["OS/2"].version1=function(y,S,A){var w=n._bin;return S=n["OS/2"].version0(y,S,A),A.ulCodePageRange1=w.readUint(y,S),S+=4,A.ulCodePageRange2=w.readUint(y,S),S+=4},n["OS/2"].version2=function(y,S,A){var w=n._bin;return S=n["OS/2"].version1(y,S,A),A.sxHeight=w.readShort(y,S),S+=2,A.sCapHeight=w.readShort(y,S),S+=2,A.usDefault=w.readUshort(y,S),S+=2,A.usBreak=w.readUshort(y,S),S+=2,A.usMaxContext=w.readUshort(y,S),S+=2},n["OS/2"].version5=function(y,S,A){var w=n._bin;return S=n["OS/2"].version2(y,S,A),A.usLowerOpticalPointSize=w.readUshort(y,S),S+=2,A.usUpperOpticalPointSize=w.readUshort(y,S),S+=2},n.post={},n.post.parse=function(y,S,A){var w=n._bin,C={};return C.version=w.readFixed(y,S),S+=4,C.italicAngle=w.readFixed(y,S),S+=4,C.underlinePosition=w.readShort(y,S),S+=2,C.underlineThickness=w.readShort(y,S),S+=2,C},n==null&&(n={}),n.U==null&&(n.U={}),n.U.codeToGlyph=function(y,S){var A=y.cmap,w=-1;if(A.p0e4!=null?w=A.p0e4:A.p3e1!=null?w=A.p3e1:A.p1e0!=null?w=A.p1e0:A.p0e3!=null&&(w=A.p0e3),w==-1)throw"no familiar platform and encoding!";var C=A.tables[w];if(C.format==0)return S>=C.map.length?0:C.map[S];if(C.format==4){for(var T=-1,R=0;R<C.endCount.length;R++)if(S<=C.endCount[R]){T=R;break}return T==-1||C.startCount[T]>S?0:65535&(C.idRangeOffset[T]!=0?C.glyphIdArray[S-C.startCount[T]+(C.idRangeOffset[T]>>1)-(C.idRangeOffset.length-T)]:S+C.idDelta[T])}if(C.format==12){if(S>C.groups[C.groups.length-1][1])return 0;for(R=0;R<C.groups.length;R++){var I=C.groups[R];if(I[0]<=S&&S<=I[1])return I[2]+(S-I[0])}return 0}throw"unknown cmap table format "+C.format},n.U.glyphToPath=function(y,S){var A={cmds:[],crds:[]};if(y.SVG&&y.SVG.entries[S]){var w=y.SVG.entries[S];return w==null?A:(typeof w=="string"&&(w=n.SVG.toPath(w),y.SVG.entries[S]=w),w)}if(y.CFF){var C={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:y.CFF.Private?y.CFF.Private.defaultWidthX:0,open:!1},T=y.CFF,R=y.CFF.Private;if(T.ROS){for(var I=0;T.FDSelect[I+2]<=S;)I+=2;R=T.FDArray[T.FDSelect[I+1]].Private}n.U._drawCFF(y.CFF.CharStrings[S],C,T,R,A)}else y.glyf&&n.U._drawGlyf(S,y,A);return A},n.U._drawGlyf=function(y,S,A){var w=S.glyf[y];w==null&&(w=S.glyf[y]=n.glyf._parseGlyf(S,y)),w!=null&&(w.noc>-1?n.U._simpleGlyph(w,A):n.U._compoGlyph(w,S,A))},n.U._simpleGlyph=function(y,S){for(var A=0;A<y.noc;A++){for(var w=A==0?0:y.endPts[A-1]+1,C=y.endPts[A],T=w;T<=C;T++){var R=T==w?C:T-1,I=T==C?w:T+1,N=1&y.flags[T],L=1&y.flags[R],F=1&y.flags[I],H=y.xs[T],z=y.ys[T];if(T==w)if(N){if(!L){n.U.P.moveTo(S,H,z);continue}n.U.P.moveTo(S,y.xs[R],y.ys[R])}else L?n.U.P.moveTo(S,y.xs[R],y.ys[R]):n.U.P.moveTo(S,(y.xs[R]+H)/2,(y.ys[R]+z)/2);N?L&&n.U.P.lineTo(S,H,z):F?n.U.P.qcurveTo(S,H,z,y.xs[I],y.ys[I]):n.U.P.qcurveTo(S,H,z,(H+y.xs[I])/2,(z+y.ys[I])/2)}n.U.P.closePath(S)}},n.U._compoGlyph=function(y,S,A){for(var w=0;w<y.parts.length;w++){var C={cmds:[],crds:[]},T=y.parts[w];n.U._drawGlyf(T.glyphIndex,S,C);for(var R=T.m,I=0;I<C.crds.length;I+=2){var N=C.crds[I],L=C.crds[I+1];A.crds.push(N*R.a+L*R.b+R.tx),A.crds.push(N*R.c+L*R.d+R.ty)}for(I=0;I<C.cmds.length;I++)A.cmds.push(C.cmds[I])}},n.U._getGlyphClass=function(y,S){var A=n._lctf.getInterval(S,y);return A==-1?0:S[A+2]},n.U._applySubs=function(y,S,A,w){for(var C=y.length-S-1,T=0;T<A.tabs.length;T++)if(A.tabs[T]!=null){var R,I=A.tabs[T];if(!I.coverage||(R=n._lctf.coverageIndex(I.coverage,y[S]))!=-1){if(A.ltype==1)y[S],I.fmt==1?y[S]=y[S]+I.delta:y[S]=I.newg[R];else if(A.ltype==4)for(var N=I.vals[R],L=0;L<N.length;L++){var F=N[L],H=F.chain.length;if(!(H>C)){for(var z=!0,U=0,G=0;G<H;G++){for(;y[S+U+(1+G)]==-1;)U++;F.chain[G]!=y[S+U+(1+G)]&&(z=!1)}if(z){for(y[S]=F.nglyph,G=0;G<H+U;G++)y[S+G+1]=-1;break}}}else if(A.ltype==5&&I.fmt==2)for(var Y=n._lctf.getInterval(I.cDef,y[S]),K=I.cDef[Y+2],Z=I.scset[K],J=0;J<Z.length;J++){var te=Z[J],de=te.input;if(!(de.length>C)){for(z=!0,G=0;G<de.length;G++){var se=n._lctf.getInterval(I.cDef,y[S+1+G]);if(Y==-1&&I.cDef[se+2]!=de[G]){z=!1;break}}if(z){var ne=te.substLookupRecords;for(L=0;L<ne.length;L+=2)ne[L],ne[L+1]}}}else if(A.ltype==6&&I.fmt==3){if(!n.U._glsCovered(y,I.backCvg,S-I.backCvg.length)||!n.U._glsCovered(y,I.inptCvg,S)||!n.U._glsCovered(y,I.ahedCvg,S+I.inptCvg.length))continue;var ge=I.lookupRec;for(J=0;J<ge.length;J+=2){Y=ge[J];var Ee=w[ge[J+1]];n.U._applySubs(y,S+Y,Ee,w)}}}}},n.U._glsCovered=function(y,S,A){for(var w=0;w<S.length;w++)if(n._lctf.coverageIndex(S[w],y[A+w])==-1)return!1;return!0},n.U.glyphsToPath=function(y,S,A){for(var w={cmds:[],crds:[]},C=0,T=0;T<S.length;T++){var R=S[T];if(R!=-1){for(var I=T<S.length-1&&S[T+1]!=-1?S[T+1]:0,N=n.U.glyphToPath(y,R),L=0;L<N.crds.length;L+=2)w.crds.push(N.crds[L]+C),w.crds.push(N.crds[L+1]);for(A&&w.cmds.push(A),L=0;L<N.cmds.length;L++)w.cmds.push(N.cmds[L]);A&&w.cmds.push("X"),C+=y.hmtx.aWidth[R],T<S.length-1&&(C+=n.U.getPairAdjustment(y,R,I))}}return w},n.U.P={},n.U.P.moveTo=function(y,S,A){y.cmds.push("M"),y.crds.push(S,A)},n.U.P.lineTo=function(y,S,A){y.cmds.push("L"),y.crds.push(S,A)},n.U.P.curveTo=function(y,S,A,w,C,T,R){y.cmds.push("C"),y.crds.push(S,A,w,C,T,R)},n.U.P.qcurveTo=function(y,S,A,w,C){y.cmds.push("Q"),y.crds.push(S,A,w,C)},n.U.P.closePath=function(y){y.cmds.push("Z")},n.U._drawCFF=function(y,S,A,w,C){for(var T=S.stack,R=S.nStems,I=S.haveWidth,N=S.width,L=S.open,F=0,H=S.x,z=S.y,U=0,G=0,Y=0,K=0,Z=0,J=0,te=0,de=0,se=0,ne=0,ge={val:0,size:0};F<y.length;){n.CFF.getCharString(y,F,ge);var Ee=ge.val;if(F+=ge.size,Ee=="o1"||Ee=="o18")T.length%2!=0&&!I&&(N=T.shift()+w.nominalWidthX),R+=T.length>>1,T.length=0,I=!0;else if(Ee=="o3"||Ee=="o23")T.length%2!=0&&!I&&(N=T.shift()+w.nominalWidthX),R+=T.length>>1,T.length=0,I=!0;else if(Ee=="o4")T.length>1&&!I&&(N=T.shift()+w.nominalWidthX,I=!0),L&&n.U.P.closePath(C),z+=T.pop(),n.U.P.moveTo(C,H,z),L=!0;else if(Ee=="o5")for(;T.length>0;)H+=T.shift(),z+=T.shift(),n.U.P.lineTo(C,H,z);else if(Ee=="o6"||Ee=="o7")for(var we=T.length,Ie=Ee=="o6",Be=0;Be<we;Be++){var Me=T.shift();Ie?H+=Me:z+=Me,Ie=!Ie,n.U.P.lineTo(C,H,z)}else if(Ee=="o8"||Ee=="o24"){we=T.length;for(var Re=0;Re+6<=we;)U=H+T.shift(),G=z+T.shift(),Y=U+T.shift(),K=G+T.shift(),H=Y+T.shift(),z=K+T.shift(),n.U.P.curveTo(C,U,G,Y,K,H,z),Re+=6;Ee=="o24"&&(H+=T.shift(),z+=T.shift(),n.U.P.lineTo(C,H,z))}else{if(Ee=="o11")break;if(Ee=="o1234"||Ee=="o1235"||Ee=="o1236"||Ee=="o1237")Ee=="o1234"&&(G=z,Y=(U=H+T.shift())+T.shift(),ne=K=G+T.shift(),J=K,de=z,H=(te=(Z=(se=Y+T.shift())+T.shift())+T.shift())+T.shift(),n.U.P.curveTo(C,U,G,Y,K,se,ne),n.U.P.curveTo(C,Z,J,te,de,H,z)),Ee=="o1235"&&(U=H+T.shift(),G=z+T.shift(),Y=U+T.shift(),K=G+T.shift(),se=Y+T.shift(),ne=K+T.shift(),Z=se+T.shift(),J=ne+T.shift(),te=Z+T.shift(),de=J+T.shift(),H=te+T.shift(),z=de+T.shift(),T.shift(),n.U.P.curveTo(C,U,G,Y,K,se,ne),n.U.P.curveTo(C,Z,J,te,de,H,z)),Ee=="o1236"&&(U=H+T.shift(),G=z+T.shift(),Y=U+T.shift(),ne=K=G+T.shift(),J=K,te=(Z=(se=Y+T.shift())+T.shift())+T.shift(),de=J+T.shift(),H=te+T.shift(),n.U.P.curveTo(C,U,G,Y,K,se,ne),n.U.P.curveTo(C,Z,J,te,de,H,z)),Ee=="o1237"&&(U=H+T.shift(),G=z+T.shift(),Y=U+T.shift(),K=G+T.shift(),se=Y+T.shift(),ne=K+T.shift(),Z=se+T.shift(),J=ne+T.shift(),te=Z+T.shift(),de=J+T.shift(),Math.abs(te-H)>Math.abs(de-z)?H=te+T.shift():z=de+T.shift(),n.U.P.curveTo(C,U,G,Y,K,se,ne),n.U.P.curveTo(C,Z,J,te,de,H,z));else if(Ee=="o14"){if(T.length>0&&!I&&(N=T.shift()+A.nominalWidthX,I=!0),T.length==4){var Te=T.shift(),Se=T.shift(),oe=T.shift(),ae=T.shift(),be=n.CFF.glyphBySE(A,oe),he=n.CFF.glyphBySE(A,ae);n.U._drawCFF(A.CharStrings[be],S,A,w,C),S.x=Te,S.y=Se,n.U._drawCFF(A.CharStrings[he],S,A,w,C)}L&&(n.U.P.closePath(C),L=!1)}else if(Ee=="o19"||Ee=="o20")T.length%2!=0&&!I&&(N=T.shift()+w.nominalWidthX),R+=T.length>>1,T.length=0,I=!0,F+=R+7>>3;else if(Ee=="o21")T.length>2&&!I&&(N=T.shift()+w.nominalWidthX,I=!0),z+=T.pop(),H+=T.pop(),L&&n.U.P.closePath(C),n.U.P.moveTo(C,H,z),L=!0;else if(Ee=="o22")T.length>1&&!I&&(N=T.shift()+w.nominalWidthX,I=!0),H+=T.pop(),L&&n.U.P.closePath(C),n.U.P.moveTo(C,H,z),L=!0;else if(Ee=="o25"){for(;T.length>6;)H+=T.shift(),z+=T.shift(),n.U.P.lineTo(C,H,z);U=H+T.shift(),G=z+T.shift(),Y=U+T.shift(),K=G+T.shift(),H=Y+T.shift(),z=K+T.shift(),n.U.P.curveTo(C,U,G,Y,K,H,z)}else if(Ee=="o26")for(T.length%2&&(H+=T.shift());T.length>0;)U=H,G=z+T.shift(),H=Y=U+T.shift(),z=(K=G+T.shift())+T.shift(),n.U.P.curveTo(C,U,G,Y,K,H,z);else if(Ee=="o27")for(T.length%2&&(z+=T.shift());T.length>0;)G=z,Y=(U=H+T.shift())+T.shift(),K=G+T.shift(),H=Y+T.shift(),z=K,n.U.P.curveTo(C,U,G,Y,K,H,z);else if(Ee=="o10"||Ee=="o29"){var ue=Ee=="o10"?w:A;if(T.length==0)console.debug("error: empty stack");else{var ye=T.pop(),ce=ue.Subrs[ye+ue.Bias];S.x=H,S.y=z,S.nStems=R,S.haveWidth=I,S.width=N,S.open=L,n.U._drawCFF(ce,S,A,w,C),H=S.x,z=S.y,R=S.nStems,I=S.haveWidth,N=S.width,L=S.open}}else if(Ee=="o30"||Ee=="o31"){var _e=T.length,ke=(Re=0,Ee=="o31");for(Re+=_e-(we=-3&_e);Re<we;)ke?(G=z,Y=(U=H+T.shift())+T.shift(),z=(K=G+T.shift())+T.shift(),we-Re==5?(H=Y+T.shift(),Re++):H=Y,ke=!1):(U=H,G=z+T.shift(),Y=U+T.shift(),K=G+T.shift(),H=Y+T.shift(),we-Re==5?(z=K+T.shift(),Re++):z=K,ke=!0),n.U.P.curveTo(C,U,G,Y,K,H,z),Re+=4}else{if((Ee+"").charAt(0)=="o")throw console.debug("Unknown operation: "+Ee,y),Ee;T.push(Ee)}}}S.x=H,S.y=z,S.nStems=R,S.haveWidth=I,S.width=N,S.open=L};var u=n,f={Typr:u};return s.Typr=u,s.default=f,Object.defineProperty(s,"__esModule",{value:!0}),s})({}).Typr}function woff2otfFactory(){return(function(s){var n=Uint8Array,u=Uint16Array,f=Uint32Array,y=new n([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),S=new n([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),A=new n([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),w=function(Ee,we){for(var Ie=new u(31),Be=0;Be<31;++Be)Ie[Be]=we+=1<<Ee[Be-1];var Me=new f(Ie[30]);for(Be=1;Be<30;++Be)for(var Re=Ie[Be];Re<Ie[Be+1];++Re)Me[Re]=Re-Ie[Be]<<5|Be;return[Ie,Me]},C=w(y,2),T=C[0],R=C[1];T[28]=258,R[258]=28;for(var I=w(S,0)[0],N=new u(32768),L=0;L<32768;++L){var F=(43690&L)>>>1|(21845&L)<<1;F=(61680&(F=(52428&F)>>>2|(13107&F)<<2))>>>4|(3855&F)<<4,N[L]=((65280&F)>>>8|(255&F)<<8)>>>1}var H=function(Ee,we,Ie){for(var Be=Ee.length,Me=0,Re=new u(we);Me<Be;++Me)++Re[Ee[Me]-1];var Te,Se=new u(we);for(Me=0;Me<we;++Me)Se[Me]=Se[Me-1]+Re[Me-1]<<1;{Te=new u(1<<we);var oe=15-we;for(Me=0;Me<Be;++Me)if(Ee[Me])for(var ae=Me<<4|Ee[Me],be=we-Ee[Me],he=Se[Ee[Me]-1]++<<be,ue=he|(1<<be)-1;he<=ue;++he)Te[N[he]>>>oe]=ae}return Te},z=new n(288);for(L=0;L<144;++L)z[L]=8;for(L=144;L<256;++L)z[L]=9;for(L=256;L<280;++L)z[L]=7;for(L=280;L<288;++L)z[L]=8;var U=new n(32);for(L=0;L<32;++L)U[L]=5;var G=H(z,9),Y=H(U,5),K=function(Ee){for(var we=Ee[0],Ie=1;Ie<Ee.length;++Ie)Ee[Ie]>we&&(we=Ee[Ie]);return we},Z=function(Ee,we,Ie){var Be=we/8|0;return(Ee[Be]|Ee[Be+1]<<8)>>(7&we)&Ie},J=function(Ee,we){var Ie=we/8|0;return(Ee[Ie]|Ee[Ie+1]<<8|Ee[Ie+2]<<16)>>(7&we)},te=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],de=function(Ee,we,Ie){var Be=new Error(we||te[Ee]);if(Be.code=Ee,Error.captureStackTrace&&Error.captureStackTrace(Be,de),!Ie)throw Be;return Be},se=function(Ee,we,Ie){var Be=Ee.length;if(!Be||Ie&&!Ie.l&&Be<5)return we||new n(0);var Me=!we||Ie,Re=!Ie||Ie.i;Ie||(Ie={}),we||(we=new n(3*Be));var Te,Se=function(st){var nt=we.length;if(st>nt){var At=new n(Math.max(2*nt,st));At.set(we),we=At}},oe=Ie.f||0,ae=Ie.p||0,be=Ie.b||0,he=Ie.l,ue=Ie.d,ye=Ie.m,ce=Ie.n,_e=8*Be;do{if(!he){Ie.f=oe=Z(Ee,ae,1);var ke=Z(Ee,ae+1,3);if(ae+=3,!ke){var Pe=Ee[(yt=((Te=ae)/8|0)+(7&Te&&1)+4)-4]|Ee[yt-3]<<8,$e=yt+Pe;if($e>Be){Re&&de(0);break}Me&&Se(be+Pe),we.set(Ee.subarray(yt,$e),be),Ie.b=be+=Pe,Ie.p=ae=8*$e;continue}if(ke==1)he=G,ue=Y,ye=9,ce=5;else if(ke==2){var xe=Z(Ee,ae,31)+257,Ne=Z(Ee,ae+10,15)+4,je=xe+Z(Ee,ae+5,31)+1;ae+=14;for(var He=new n(je),Ye=new n(19),Je=0;Je<Ne;++Je)Ye[A[Je]]=Z(Ee,ae+3*Je,7);ae+=3*Ne;var ot=K(Ye),ze=(1<<ot)-1,pt=H(Ye,ot);for(Je=0;Je<je;){var yt,ut=pt[Z(Ee,ae,ze)];if(ae+=15&ut,(yt=ut>>>4)<16)He[Je++]=yt;else{var Et=0,qe=0;for(yt==16?(qe=3+Z(Ee,ae,3),ae+=2,Et=He[Je-1]):yt==17?(qe=3+Z(Ee,ae,7),ae+=3):yt==18&&(qe=11+Z(Ee,ae,127),ae+=7);qe--;)He[Je++]=Et}}var Le=He.subarray(0,xe),lt=He.subarray(xe);ye=K(Le),ce=K(lt),he=H(Le,ye),ue=H(lt,ce)}else de(1);if(ae>_e){Re&&de(0);break}}Me&&Se(be+131072);for(var We=(1<<ye)-1,Qe=(1<<ce)-1,at=ae;;at=ae){var St=(Et=he[J(Ee,ae)&We])>>>4;if((ae+=15&Et)>_e){Re&&de(0);break}if(Et||de(2),St<256)we[be++]=St;else{if(St==256){at=ae,he=null;break}var Ct=St-254;if(St>264){var jt=y[Je=St-257];Ct=Z(Ee,ae,(1<<jt)-1)+T[Je],ae+=jt}var Gt=ue[J(Ee,ae)&Qe],Ft=Gt>>>4;if(Gt||de(3),ae+=15&Gt,lt=I[Ft],Ft>3&&(jt=S[Ft],lt+=J(Ee,ae)&(1<<jt)-1,ae+=jt),ae>_e){Re&&de(0);break}Me&&Se(be+131072);for(var ct=be+Ct;be<ct;be+=4)we[be]=we[be-lt],we[be+1]=we[be+1-lt],we[be+2]=we[be+2-lt],we[be+3]=we[be+3-lt];be=ct}}Ie.l=he,Ie.p=at,Ie.b=be,he&&(oe=1,Ie.m=ye,Ie.d=ue,Ie.n=ce)}while(!oe);return be==we.length?we:(function(st,nt,At){(At==null||At>st.length)&&(At=st.length);var Yt=new(st instanceof u?u:st instanceof f?f:n)(At-nt);return Yt.set(st.subarray(nt,At)),Yt})(we,0,be)},ne=new n(0),ge=typeof TextDecoder<"u"&&new TextDecoder;try{ge.decode(ne,{stream:!0})}catch{}return s.convert_streams=function(Ee){var we=new DataView(Ee),Ie=0;function Be(){var xe=we.getUint16(Ie);return Ie+=2,xe}function Me(){var xe=we.getUint32(Ie);return Ie+=4,xe}function Re(xe){Pe.setUint16($e,xe),$e+=2}function Te(xe){Pe.setUint32($e,xe),$e+=4}for(var Se={signature:Me(),flavor:Me(),length:Me(),numTables:Be(),reserved:Be(),totalSfntSize:Me(),majorVersion:Be(),minorVersion:Be(),metaOffset:Me(),metaLength:Me(),metaOrigLength:Me(),privOffset:Me(),privLength:Me()},oe=0;Math.pow(2,oe)<=Se.numTables;)oe++;oe--;for(var ae=16*Math.pow(2,oe),be=16*Se.numTables-ae,he=12,ue=[],ye=0;ye<Se.numTables;ye++)ue.push({tag:Me(),offset:Me(),compLength:Me(),origLength:Me(),origChecksum:Me()}),he+=16;var ce,_e=new Uint8Array(12+16*ue.length+ue.reduce((function(xe,Ne){return xe+Ne.origLength+4}),0)),ke=_e.buffer,Pe=new DataView(ke),$e=0;return Te(Se.flavor),Re(Se.numTables),Re(ae),Re(oe),Re(be),ue.forEach((function(xe){Te(xe.tag),Te(xe.origChecksum),Te(he),Te(xe.origLength),xe.outOffset=he,(he+=xe.origLength)%4!=0&&(he+=4-he%4)})),ue.forEach((function(xe){var Ne,je=Ee.slice(xe.offset,xe.offset+xe.compLength);if(xe.compLength!=xe.origLength){var He=new Uint8Array(xe.origLength);Ne=new Uint8Array(je,2),se(Ne,He)}else He=new Uint8Array(je);_e.set(He,xe.outOffset);var Ye=0;(he=xe.outOffset+xe.origLength)%4!=0&&(Ye=4-he%4),_e.set(new Uint8Array(Ye).buffer,xe.outOffset+xe.origLength),ce=he+Ye})),ke.slice(0,ce)},Object.defineProperty(s,"__esModule",{value:!0}),s})({}).convert_streams}function parserFactory(s,n){const u={M:2,L:2,Q:4,C:6,Z:0},f={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},y=1,S=2,A=4,w=8,C=16,T=32;let R;function I(te){if(!R){const de={R:S,L:y,D:A,C,U:T,T:w};R=new Map;for(let se in f){let ne=0;f[se].split(",").forEach(ge=>{let[Ee,we]=ge.split("+");Ee=parseInt(Ee,36),we=we?parseInt(we,36):0,R.set(ne+=Ee,de[se]);for(let Ie=we;Ie--;)R.set(++ne,de[se])})}}return R.get(te)||T}const N=1,L=2,F=3,H=4,z=[null,"isol","init","fina","medi"];function U(te){const de=new Uint8Array(te.length);let se=T,ne=N,ge=-1;for(let Ee=0;Ee<te.length;Ee++){const we=te.codePointAt(Ee);let Ie=I(we)|0,Be=N;Ie&w||(se&(y|A|C)?Ie&(S|A|C)?(Be=F,(ne===N||ne===F)&&de[ge]++):Ie&(y|T)&&(ne===L||ne===H)&&de[ge]--:se&(S|T)&&(ne===L||ne===H)&&de[ge]--,ne=de[Ee]=Be,se=Ie,ge=Ee,we>65535&&Ee++)}return de}function G(te,de){const se=[];for(let ge=0;ge<de.length;ge++){const Ee=de.codePointAt(ge);Ee>65535&&ge++,se.push(s.U.codeToGlyph(te,Ee))}const ne=te.GSUB;if(ne){const{lookupList:ge,featureList:Ee}=ne;let we;const Ie=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws|ccmp)$/,Be=[];Ee.forEach(Me=>{if(Ie.test(Me.tag))for(let Re=0;Re<Me.tab.length;Re++){if(Be[Me.tab[Re]])continue;Be[Me.tab[Re]]=!0;const Te=ge[Me.tab[Re]],Se=/^(isol|init|fina|medi)$/.test(Me.tag);Se&&!we&&(we=U(de));for(let oe=0;oe<se.length;oe++)(!we||!Se||z[we[oe]]===Me.tag)&&s.U._applySubs(se,oe,Te,ge)}})}return se}function Y(te,de){const se=new Int16Array(de.length*3);let ne=0;for(;ne<de.length;ne++){const Ie=de[ne];if(Ie===-1)continue;se[ne*3+2]=te.hmtx.aWidth[Ie];const Be=te.GPOS;if(Be){const Me=Be.lookupList;for(let Re=0;Re<Me.length;Re++){const Te=Me[Re];for(let Se=0;Se<Te.tabs.length;Se++){const oe=Te.tabs[Se];if(Te.ltype===1){if(s._lctf.coverageIndex(oe.coverage,Ie)!==-1&&oe.pos){we(oe.pos,ne);break}}else if(Te.ltype===2){let ae=null,be=ge();if(be!==-1){const he=s._lctf.coverageIndex(oe.coverage,de[be]);if(he!==-1){if(oe.fmt===1){const ue=oe.pairsets[he];for(let ye=0;ye<ue.length;ye++)ue[ye].gid2===Ie&&(ae=ue[ye])}else if(oe.fmt===2){const ue=s.U._getGlyphClass(de[be],oe.classDef1),ye=s.U._getGlyphClass(Ie,oe.classDef2);ae=oe.matrix[ue][ye]}if(ae){ae.val1&&we(ae.val1,be),ae.val2&&we(ae.val2,ne);break}}}}else if(Te.ltype===4){const ae=s._lctf.coverageIndex(oe.markCoverage,Ie);if(ae!==-1){const be=ge(Ee),he=be===-1?-1:s._lctf.coverageIndex(oe.baseCoverage,de[be]);if(he!==-1){const ue=oe.markArray[ae],ye=oe.baseArray[he][ue.markClass];se[ne*3]=ye.x-ue.x+se[be*3]-se[be*3+2],se[ne*3+1]=ye.y-ue.y+se[be*3+1];break}}}else if(Te.ltype===6){const ae=s._lctf.coverageIndex(oe.mark1Coverage,Ie);if(ae!==-1){const be=ge();if(be!==-1){const he=de[be];if(K(te,he)===3){const ue=s._lctf.coverageIndex(oe.mark2Coverage,he);if(ue!==-1){const ye=oe.mark1Array[ae],ce=oe.mark2Array[ue][ye.markClass];se[ne*3]=ce.x-ye.x+se[be*3]-se[be*3+2],se[ne*3+1]=ce.y-ye.y+se[be*3+1];break}}}}}}}}else if(te.kern&&!te.cff){const Me=ge();if(Me!==-1){const Re=te.kern.glyph1.indexOf(de[Me]);if(Re!==-1){const Te=te.kern.rval[Re].glyph2.indexOf(Ie);Te!==-1&&(se[Me*3+2]+=te.kern.rval[Re].vals[Te])}}}}return se;function ge(Ie){for(let Be=ne-1;Be>=0;Be--)if(de[Be]!==-1&&(!Ie||Ie(de[Be])))return Be;return-1}function Ee(Ie){return K(te,Ie)===1}function we(Ie,Be){for(let Me=0;Me<3;Me++)se[Be*3+Me]+=Ie[Me]||0}}function K(te,de){const se=te.GDEF&&te.GDEF.glyphClassDef;return se?s.U._getGlyphClass(de,se):0}function Z(...te){for(let de=0;de<te.length;de++)if(typeof te[de]=="number")return te[de]}function J(te){const de=Object.create(null),se=te["OS/2"],ne=te.hhea,ge=te.head.unitsPerEm,Ee=Z(se&&se.sTypoAscender,ne&&ne.ascender,ge),we={unitsPerEm:ge,ascender:Ee,descender:Z(se&&se.sTypoDescender,ne&&ne.descender,0),capHeight:Z(se&&se.sCapHeight,Ee),xHeight:Z(se&&se.sxHeight,Ee),lineGap:Z(se&&se.sTypoLineGap,ne&&ne.lineGap),supportsCodePoint(Ie){return s.U.codeToGlyph(te,Ie)>0},forEachGlyph(Ie,Be,Me,Re){let Te=0;const Se=1/we.unitsPerEm*Be,oe=G(te,Ie);let ae=0;const be=Y(te,oe);return oe.forEach((he,ue)=>{if(he!==-1){let ye=de[he];if(!ye){const{cmds:ce,crds:_e}=s.U.glyphToPath(te,he);let ke="",Pe=0;for(let He=0,Ye=ce.length;He<Ye;He++){const Je=u[ce[He]];ke+=ce[He];for(let ot=1;ot<=Je;ot++)ke+=(ot>1?",":"")+_e[Pe++]}let $e,xe,Ne,je;if(_e.length){$e=xe=1/0,Ne=je=-1/0;for(let He=0,Ye=_e.length;He<Ye;He+=2){let Je=_e[He],ot=_e[He+1];Je<$e&&($e=Je),ot<xe&&(xe=ot),Je>Ne&&(Ne=Je),ot>je&&(je=ot)}}else $e=Ne=xe=je=0;ye=de[he]={index:he,advanceWidth:te.hmtx.aWidth[he],xMin:$e,yMin:xe,xMax:Ne,yMax:je,path:ke}}Re.call(null,ye,Te+be[ue*3]*Se,be[ue*3+1]*Se,ae),Te+=be[ue*3+2]*Se,Me&&(Te+=Me*Be)}ae+=Ie.codePointAt(ae)>65535?2:1}),Te}};return we}return function(de){const se=new Uint8Array(de,0,4),ne=s._bin.readASCII(se,0,4);if(ne==="wOFF")de=n(de);else if(ne==="wOF2")throw new Error("woff2 fonts not supported");return J(s.parse(de)[0])}}const workerModule=defineWorkerModule({name:"Typr Font Parser",dependencies:[typrFactory,woff2otfFactory,parserFactory],init(s,n,u){const f=s(),y=n();return u(f,y)}});function unicodeFontResolverClientFactory(){return(function(s){var n=function(){this.buckets=new Map};n.prototype.add=function(Y){var K=Y>>5;this.buckets.set(K,(this.buckets.get(K)||0)|1<<(31&Y))},n.prototype.has=function(Y){var K=this.buckets.get(Y>>5);return K!==void 0&&(K&1<<(31&Y))!=0},n.prototype.serialize=function(){var Y=[];return this.buckets.forEach((function(K,Z){Y.push((+Z).toString(36)+":"+K.toString(36))})),Y.join(",")},n.prototype.deserialize=function(Y){var K=this;this.buckets.clear(),Y.split(",").forEach((function(Z){var J=Z.split(":");K.buckets.set(parseInt(J[0],36),parseInt(J[1],36))}))};var u=Math.pow(2,8),f=u-1,y=~f;function S(Y){var K=(function(J){return J&y})(Y).toString(16),Z=(function(J){return(J&y)+u-1})(Y).toString(16);return"codepoint-index/plane"+(Y>>16)+"/"+K+"-"+Z+".json"}function A(Y,K){var Z=Y&f,J=K.codePointAt(Z/6|0);return((J=(J||48)-48)&1<<Z%6)!=0}function w(Y,K){var Z;(Z=Y,Z.replace(/U\+/gi,"").replace(/^,+|,+$/g,"").split(/,+/).map((function(J){return J.split("-").map((function(te){return parseInt(te.trim(),16)}))}))).forEach((function(J){var te=J[0],de=J[1];de===void 0&&(de=te),K(te,de)}))}function C(Y,K){w(Y,(function(Z,J){for(var te=Z;te<=J;te++)K(te)}))}var T={},R={},I=new WeakMap,N="https://cdn.jsdelivr.net/gh/lojjic/unicode-font-resolver@v1.0.1/packages/data";function L(Y){var K=I.get(Y);return K||(K=new n,C(Y.ranges,(function(Z){return K.add(Z)})),I.set(Y,K)),K}var F,H=new Map;function z(Y,K,Z){return Y[K]?K:Y[Z]?Z:(function(J){for(var te in J)return te})(Y)}function U(Y,K){var Z=K;if(!Y.includes(Z)){Z=1/0;for(var J=0;J<Y.length;J++)Math.abs(Y[J]-K)<Math.abs(Z-K)&&(Z=Y[J])}return Z}function G(Y){return F||(F=new Set,C("9-D,20,85,A0,1680,2000-200A,2028-202F,205F,3000",(function(K){F.add(K)}))),F.has(Y)}return s.CodePointSet=n,s.clearCache=function(){T={},R={}},s.getFontsForString=function(Y,K){K===void 0&&(K={});var Z,J=K.lang;J===void 0&&(J=new RegExp("\\p{Script=Hangul}","u").test(Z=Y)?"ko":new RegExp("\\p{Script=Hiragana}|\\p{Script=Katakana}","u").test(Z)?"ja":"en");var te=K.category;te===void 0&&(te="sans-serif");var de=K.style;de===void 0&&(de="normal");var se=K.weight;se===void 0&&(se=400);var ne=(K.dataUrl||N).replace(/\/$/g,""),ge=new Map,Ee=new Uint8Array(Y.length),we={},Ie={},Be=new Array(Y.length),Me=new Map,Re=!1;function Te(ae){var be=H.get(ae);return be||(be=fetch(ne+"/"+ae).then((function(he){if(!he.ok)throw new Error(he.statusText);return he.json().then((function(ue){if(!Array.isArray(ue)||ue[0]!==1)throw new Error("Incorrect schema version; need 1, got "+ue[0]);return ue[1]}))})).catch((function(he){if(ne!==N)return Re||(console.error('unicode-font-resolver: Failed loading from dataUrl "'+ne+'", trying default CDN. '+he.message),Re=!0),ne=N,H.delete(ae),Te(ae);throw he})),H.set(ae,be)),be}for(var Se=function(ae){var be=Y.codePointAt(ae),he=S(be);Be[ae]=he,T[he]||Me.has(he)||Me.set(he,Te(he).then((function(ue){T[he]=ue}))),be>65535&&(ae++,oe=ae)},oe=0;oe<Y.length;oe++)Se(oe);return Promise.all(Me.values()).then((function(){Me.clear();for(var ae=function(he){var ue=Y.codePointAt(he),ye=null,ce=T[Be[he]],_e=void 0;for(var ke in ce){var Pe=Ie[ke];if(Pe===void 0&&(Pe=Ie[ke]=new RegExp(ke).test(J||"en")),Pe){for(var $e in _e=ke,ce[ke])if(A(ue,ce[ke][$e])){ye=$e;break}break}}if(!ye){e:for(var xe in ce)if(xe!==_e){for(var Ne in ce[xe])if(A(ue,ce[xe][Ne])){ye=Ne;break e}}}ye||(console.debug("No font coverage for U+"+ue.toString(16)),ye="latin"),Be[he]=ye,R[ye]||Me.has(ye)||Me.set(ye,Te("font-meta/"+ye+".json").then((function(je){R[ye]=je}))),ue>65535&&(he++,be=he)},be=0;be<Y.length;be++)ae(be);return Promise.all(Me.values())})).then((function(){for(var ae,be=null,he=0;he<Y.length;he++){var ue=Y.codePointAt(he);if(be&&(G(ue)||L(be).has(ue)))Ee[he]=Ee[he-1];else{be=R[Be[he]];var ye=we[be.id];if(!ye){var ce=be.typeforms,_e=z(ce,te,"sans-serif"),ke=z(ce[_e],de,"normal"),Pe=U((ae=ce[_e])===null||ae===void 0?void 0:ae[ke],se);ye=we[be.id]=ne+"/font-files/"+be.id+"/"+_e+"."+ke+"."+Pe+".woff"}var $e=ge.get(ye);$e==null&&($e=ge.size,ge.set(ye,$e)),Ee[he]=$e}ue>65535&&(he++,Ee[he]=Ee[he-1])}return{fontUrls:Array.from(ge.keys()),chars:Ee}}))},Object.defineProperty(s,"__esModule",{value:!0}),s})({})}function createFontResolver(s,n){const u=Object.create(null),f=Object.create(null);function y(A,w){const C=T=>{console.error(`Failure loading font ${A}`,T)};try{const T=new XMLHttpRequest;T.open("get",A,!0),T.responseType="arraybuffer",T.onload=function(){if(T.status>=400)C(new Error(T.statusText));else if(T.status>0)try{const R=s(T.response);R.src=A,w(R)}catch(R){C(R)}},T.onerror=C,T.send()}catch(T){C(T)}}function S(A,w){let C=u[A];C?w(C):f[A]?f[A].push(w):(f[A]=[w],y(A,T=>{T.src=A,u[A]=T,f[A].forEach(R=>R(T)),delete f[A]}))}return function(A,w,{lang:C,fonts:T=[],style:R="normal",weight:I="normal",unicodeFontsURL:N}={}){const L=new Uint8Array(A.length),F=[];A.length||G();const H=new Map,z=[];if(R!=="italic"&&(R="normal"),typeof I!="number"&&(I=I==="bold"?700:400),T&&!Array.isArray(T)&&(T=[T]),T=T.slice().filter(K=>!K.lang||K.lang.test(C)).reverse(),T.length){let te=0;(function de(se=0){for(let ne=se,ge=A.length;ne<ge;ne++){const Ee=A.codePointAt(ne);if(te===1&&F[L[ne-1]].supportsCodePoint(Ee)||ne>0&&/\s/.test(A[ne]))L[ne]=L[ne-1],te===2&&(z[z.length-1][1]=ne);else for(let we=L[ne],Ie=T.length;we<=Ie;we++)if(we===Ie){const Be=te===2?z[z.length-1]:z[z.length]=[ne,ne];Be[1]=ne,te=2}else{L[ne]=we;const{src:Be,unicodeRange:Me}=T[we];if(!Me||Y(Ee,Me)){const Re=u[Be];if(!Re){S(Be,()=>{de(ne)});return}if(Re.supportsCodePoint(Ee)){let Te=H.get(Re);typeof Te!="number"&&(Te=F.length,F.push(Re),H.set(Re,Te)),L[ne]=Te,te=1;break}}}Ee>65535&&ne+1<ge&&(L[ne+1]=L[ne],ne++,te===2&&(z[z.length-1][1]=ne))}U()})()}else z.push([0,A.length-1]),U();function U(){if(z.length){const K=z.map(Z=>A.substring(Z[0],Z[1]+1)).join(`
`);n.getFontsForString(K,{lang:C||void 0,style:R,weight:I,dataUrl:N}).then(({fontUrls:Z,chars:J})=>{const te=F.length;let de=0;z.forEach(ne=>{for(let ge=0,Ee=ne[1]-ne[0];ge<=Ee;ge++)L[ne[0]+ge]=J[de++]+te;de++});let se=0;Z.forEach((ne,ge)=>{S(ne,Ee=>{F[ge+te]=Ee,++se===Z.length&&G()})})})}else G()}function G(){w({chars:L,fonts:F})}function Y(K,Z){for(let J=0;J<Z.length;J++){const[te,de=te]=Z[J];if(te<=K&&K<=de)return!0}return!1}}}const fontResolverWorkerModule=defineWorkerModule({name:"FontResolver",dependencies:[createFontResolver,workerModule,unicodeFontResolverClientFactory],init(s,n,u){return s(n,u())}});function createTypesetter(s,n){const f=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,y="[^\\S\\u00A0]",S=new RegExp(`${y}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function A({text:F,lang:H,fonts:z,style:U,weight:G,preResolvedFonts:Y,unicodeFontsURL:K},Z){const J=({chars:te,fonts:de})=>{let se,ne;const ge=[];for(let Ee=0;Ee<te.length;Ee++)te[Ee]!==ne?(ne=te[Ee],ge.push(se={start:Ee,end:Ee,fontObj:de[te[Ee]]})):se.end=Ee;Z(ge)};Y?J(Y):s(F,J,{lang:H,fonts:z,style:U,weight:G,unicodeFontsURL:K})}function w({text:F="",font:H,lang:z,sdfGlyphSize:U=64,fontSize:G=400,fontWeight:Y=1,fontStyle:K="normal",letterSpacing:Z=0,lineHeight:J="normal",maxWidth:te=1/0,direction:de,textAlign:se="left",textIndent:ne=0,whiteSpace:ge="normal",overflowWrap:Ee="normal",anchorX:we=0,anchorY:Ie=0,metricsOnly:Be=!1,unicodeFontsURL:Me,preResolvedFonts:Re=null,includeCaretPositions:Te=!1,chunkedBoundsSize:Se=8192,colorRanges:oe=null},ae){const be=I(),he={fontLoad:0,typesetting:0};F.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),F=F.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),G=+G,Z=+Z,te=+te,J=J||"normal",ne=+ne,A({text:F,lang:z,style:K,weight:Y,fonts:typeof H=="string"?[{src:H}]:H,unicodeFontsURL:Me,preResolvedFonts:Re},ue=>{he.fontLoad=I()-be;const ye=isFinite(te);let ce=null,_e=null,ke=null,Pe=null,$e=null,xe=null,Ne=null,je=null,He=0,Ye=0,Je=ge!=="nowrap";const ot=new Map,ze=I();let pt=ne,yt=0,ut=new N;const Et=[ut];ue.forEach(Qe=>{const{fontObj:at}=Qe,{ascender:St,descender:Ct,unitsPerEm:jt,lineGap:Gt,capHeight:Ft,xHeight:ct}=at;let st=ot.get(at);if(!st){const Tt=G/jt,Kt=J==="normal"?(St-Ct+Gt)*Tt:J*G,_n=(Kt-(St-Ct)*Tt)/2,Ht=Math.min(Kt,(St-Ct)*Tt),Ot=(St+Ct)/2*Tt+Ht/2;st={index:ot.size,src:at.src,fontObj:at,fontSizeMult:Tt,unitsPerEm:jt,ascender:St*Tt,descender:Ct*Tt,capHeight:Ft*Tt,xHeight:ct*Tt,lineHeight:Kt,baseline:-_n-St*Tt,caretTop:Ot,caretBottom:Ot-Ht},ot.set(at,st)}const{fontSizeMult:nt}=st,At=F.slice(Qe.start,Qe.end+1);let Yt,ht;at.forEachGlyph(At,G,Z,(Tt,Kt,_n,Ht)=>{Kt+=yt,Ht+=Qe.start,Yt=Kt,ht=Tt;const Ot=F.charAt(Ht),cn=Tt.advanceWidth*nt,Mn=ut.count;let In;if("isEmpty"in Tt||(Tt.isWhitespace=!!Ot&&new RegExp(y).test(Ot),Tt.canBreakAfter=!!Ot&&S.test(Ot),Tt.isEmpty=Tt.xMin===Tt.xMax||Tt.yMin===Tt.yMax||f.test(Ot)),!Tt.isWhitespace&&!Tt.isEmpty&&Ye++,Je&&ye&&!Tt.isWhitespace&&Kt+cn+pt>te&&Mn){if(ut.glyphAt(Mn-1).glyphObj.canBreakAfter)In=new N,pt=-Kt;else for(let rr=Mn;rr--;)if(rr===0&&Ee==="break-word"){In=new N,pt=-Kt;break}else if(ut.glyphAt(rr).glyphObj.canBreakAfter){In=ut.splitAt(rr+1);const Ar=In.glyphAt(0).x;pt-=Ar;for(let hr=In.count;hr--;)In.glyphAt(hr).x-=Ar;break}In&&(ut.isSoftWrapped=!0,ut=In,Et.push(ut),He=te)}let On=ut.glyphAt(ut.count);On.glyphObj=Tt,On.x=Kt+pt,On.y=_n,On.width=cn,On.charIndex=Ht,On.fontData=st,Ot===`
`&&(ut=new N,Et.push(ut),pt=-(Kt+cn+Z*G)+ne)}),yt=Yt+ht.advanceWidth*nt+Z*G});let qe=0;Et.forEach(Qe=>{let at=!0;for(let St=Qe.count;St--;){const Ct=Qe.glyphAt(St);at&&!Ct.glyphObj.isWhitespace&&(Qe.width=Ct.x+Ct.width,Qe.width>He&&(He=Qe.width),at=!1);let{lineHeight:jt,capHeight:Gt,xHeight:Ft,baseline:ct}=Ct.fontData;jt>Qe.lineHeight&&(Qe.lineHeight=jt);const st=ct-Qe.baseline;st<0&&(Qe.baseline+=st,Qe.cap+=st,Qe.ex+=st),Qe.cap=Math.max(Qe.cap,Qe.baseline+Gt),Qe.ex=Math.max(Qe.ex,Qe.baseline+Ft)}Qe.baseline-=qe,Qe.cap-=qe,Qe.ex-=qe,qe+=Qe.lineHeight});let Le=0,lt=0;if(we&&(typeof we=="number"?Le=-we:typeof we=="string"&&(Le=-He*(we==="left"?0:we==="center"?.5:we==="right"?1:T(we)))),Ie&&(typeof Ie=="number"?lt=-Ie:typeof Ie=="string"&&(lt=Ie==="top"?0:Ie==="top-baseline"?-Et[0].baseline:Ie==="top-cap"?-Et[0].cap:Ie==="top-ex"?-Et[0].ex:Ie==="middle"?qe/2:Ie==="bottom"?qe:Ie==="bottom-baseline"?-Et[Et.length-1].baseline:T(Ie)*qe)),!Be){const Qe=n.getEmbeddingLevels(F,de);ce=new Uint16Array(Ye),_e=new Uint8Array(Ye),ke=new Float32Array(Ye*2),Pe={},Ne=[1/0,1/0,-1/0,-1/0],je=[],Te&&(xe=new Float32Array(F.length*4)),oe&&($e=new Uint8Array(Ye*3));let at=0,St=-1,Ct=-1,jt,Gt;if(Et.forEach((Ft,ct)=>{let{count:st,width:nt}=Ft;if(st>0){let At=0;for(let Ht=st;Ht--&&Ft.glyphAt(Ht).glyphObj.isWhitespace;)At++;let Yt=0,ht=0;if(se==="center")Yt=(He-nt)/2;else if(se==="right")Yt=He-nt;else if(se==="justify"&&Ft.isSoftWrapped){let Ht=0;for(let Ot=st-At;Ot--;)Ft.glyphAt(Ot).glyphObj.isWhitespace&&Ht++;ht=(He-nt)/Ht}if(ht||Yt){let Ht=0;for(let Ot=0;Ot<st;Ot++){let cn=Ft.glyphAt(Ot);const Mn=cn.glyphObj;cn.x+=Yt+Ht,ht!==0&&Mn.isWhitespace&&Ot<st-At&&(Ht+=ht,cn.width+=ht)}}const Tt=n.getReorderSegments(F,Qe,Ft.glyphAt(0).charIndex,Ft.glyphAt(Ft.count-1).charIndex);for(let Ht=0;Ht<Tt.length;Ht++){const[Ot,cn]=Tt[Ht];let Mn=1/0,In=-1/0;for(let On=0;On<st;On++)if(Ft.glyphAt(On).charIndex>=Ot){let rr=On,Ar=On;for(;Ar<st;Ar++){let hr=Ft.glyphAt(Ar);if(hr.charIndex>cn)break;Ar<st-At&&(Mn=Math.min(Mn,hr.x),In=Math.max(In,hr.x+hr.width))}for(let hr=rr;hr<Ar;hr++){const Yr=Ft.glyphAt(hr);Yr.x=In-(Yr.x+Yr.width-Mn)}break}}let Kt;const _n=Ht=>Kt=Ht;for(let Ht=0;Ht<st;Ht++){const Ot=Ft.glyphAt(Ht);Kt=Ot.glyphObj;const cn=Kt.index,Mn=Qe.levels[Ot.charIndex]&1;if(Mn){const In=n.getMirroredCharacter(F[Ot.charIndex]);In&&Ot.fontData.fontObj.forEachGlyph(In,0,0,_n)}if(Te){const{charIndex:In,fontData:On}=Ot,rr=Ot.x+Le,Ar=Ot.x+Ot.width+Le;xe[In*4]=Mn?Ar:rr,xe[In*4+1]=Mn?rr:Ar,xe[In*4+2]=Ft.baseline+On.caretBottom+lt,xe[In*4+3]=Ft.baseline+On.caretTop+lt;const hr=In-St;hr>1&&R(xe,St,hr),St=In}if(oe){const{charIndex:In}=Ot;for(;In>Ct;)Ct++,oe.hasOwnProperty(Ct)&&(Gt=oe[Ct])}if(!Kt.isWhitespace&&!Kt.isEmpty){const In=at++,{fontSizeMult:On,src:rr,index:Ar}=Ot.fontData,hr=Pe[rr]||(Pe[rr]={});hr[cn]||(hr[cn]={path:Kt.path,pathBounds:[Kt.xMin,Kt.yMin,Kt.xMax,Kt.yMax]});const Yr=Ot.x+Le,$r=Ot.y+Ft.baseline+lt;ke[In*2]=Yr,ke[In*2+1]=$r;const wr=Yr+Kt.xMin*On,mr=$r+Kt.yMin*On,ir=Yr+Kt.xMax*On,zn=$r+Kt.yMax*On;wr<Ne[0]&&(Ne[0]=wr),mr<Ne[1]&&(Ne[1]=mr),ir>Ne[2]&&(Ne[2]=ir),zn>Ne[3]&&(Ne[3]=zn),In%Se===0&&(jt={start:In,end:In,rect:[1/0,1/0,-1/0,-1/0]},je.push(jt)),jt.end++;const Lr=jt.rect;if(wr<Lr[0]&&(Lr[0]=wr),mr<Lr[1]&&(Lr[1]=mr),ir>Lr[2]&&(Lr[2]=ir),zn>Lr[3]&&(Lr[3]=zn),ce[In]=cn,_e[In]=Ar,oe){const Hr=In*3;$e[Hr]=Gt>>16&255,$e[Hr+1]=Gt>>8&255,$e[Hr+2]=Gt&255}}}}}),xe){const Ft=F.length-St;Ft>1&&R(xe,St,Ft)}}const We=[];ot.forEach(({index:Qe,src:at,unitsPerEm:St,ascender:Ct,descender:jt,lineHeight:Gt,capHeight:Ft,xHeight:ct})=>{We[Qe]={src:at,unitsPerEm:St,ascender:Ct,descender:jt,lineHeight:Gt,capHeight:Ft,xHeight:ct}}),he.typesetting=I()-ze,ae({glyphIds:ce,glyphFontIndices:_e,glyphPositions:ke,glyphData:Pe,fontData:We,caretPositions:xe,glyphColors:$e,chunkedBounds:je,fontSize:G,topBaseline:lt+Et[0].baseline,blockBounds:[Le,lt-qe,Le+He,lt],visibleBounds:Ne,timings:he})})}function C(F,H){w({...F,metricsOnly:!0},z=>{const[U,G,Y,K]=z.blockBounds;H({width:Y-U,height:K-G})})}function T(F){let H=F.match(/^([\d.]+)%$/),z=H?parseFloat(H[1]):NaN;return isNaN(z)?0:z/100}function R(F,H,z){const U=F[H*4],G=F[H*4+1],Y=F[H*4+2],K=F[H*4+3],Z=(G-U)/z;for(let J=0;J<z;J++){const te=(H+J)*4;F[te]=U+Z*J,F[te+1]=U+Z*(J+1),F[te+2]=Y,F[te+3]=K}}function I(){return(self.performance||Date).now()}function N(){this.data=[]}const L=["glyphObj","x","y","width","charIndex","fontData"];return N.prototype={width:0,lineHeight:0,baseline:0,cap:0,ex:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/L.length)},glyphAt(F){let H=N.flyweight;return H.data=this.data,H.index=F,H},splitAt(F){let H=new N;return H.data=this.data.splice(F*L.length),H}},N.flyweight=L.reduce((F,H,z,U)=>(Object.defineProperty(F,H,{get(){return this.data[this.index*L.length+z]},set(G){this.data[this.index*L.length+z]=G}}),F),{data:null,index:0}),{typeset:w,measure:C}}const now=()=>(self.performance||Date).now(),mainThreadGenerator=SDFGenerator();let warned;function generateSDF(s,n,u,f,y,S,A,w,C,T,R=!0){return R?generateSDF_GL(s,n,u,f,y,S,A,w,C,T).then(null,I=>(warned||(console.warn("WebGL SDF generation failed, falling back to JS",I),warned=!0),generateSDF_JS_Worker(s,n,u,f,y,S,A,w,C,T))):generateSDF_JS_Worker(s,n,u,f,y,S,A,w,C,T)}const queue=[],chunkTimeBudget=5;let timer=0;function nextChunk(){const s=now();for(;queue.length&&now()-s<chunkTimeBudget;)queue.shift()();timer=queue.length?setTimeout(nextChunk,0):0}const generateSDF_GL=(...s)=>new Promise((n,u)=>{queue.push(()=>{const f=now();try{mainThreadGenerator.webgl.generateIntoCanvas(...s),n({timing:now()-f})}catch(y){u(y)}}),timer||(timer=setTimeout(nextChunk,0))}),threadCount=4,idleTimeout=2e3,threads={};let callNum=0;function generateSDF_JS_Worker(s,n,u,f,y,S,A,w,C,T){const R="TroikaTextSDFGenerator_JS_"+callNum++%threadCount;let I=threads[R];return I||(I=threads[R]={workerModule:defineWorkerModule({name:R,workerId:R,dependencies:[SDFGenerator,now],init(N,L){const F=N().javascript.generate;return function(...H){const z=L();return{textureData:F(...H),timing:L()-z}}},getTransferables(N){return[N.textureData.buffer]}}),requests:0,idleTimer:null}),I.requests++,clearTimeout(I.idleTimer),I.workerModule(s,n,u,f,y,S).then(({textureData:N,timing:L})=>{const F=now(),H=new Uint8Array(N.length*4);for(let z=0;z<N.length;z++)H[z*4+T]=N[z];return mainThreadGenerator.webglUtils.renderImageData(A,H,w,C,s,n,1<<3-T),L+=now()-F,--I.requests===0&&(I.idleTimer=setTimeout(()=>{terminateWorker(R)},idleTimeout)),{timing:L}})}function warmUpSDFCanvas(s){s._warm||(mainThreadGenerator.webgl.isSupported(s),s._warm=!0)}const resizeWebGLCanvasWithoutClearing=mainThreadGenerator.webglUtils.resizeWebGLCanvasWithoutClearing,CONFIG={unicodeFontsURL:null,sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},tempColor=new Color;function now$1(){return(self.performance||Date).now()}const atlases=Object.create(null);function getTextRenderInfo(s,n){s=assign({},s);const u=now$1(),f=[];if(s.font&&f.push({label:"user",src:toAbsoluteURL(s.font)}),s.font=f,s.text=""+s.text,s.sdfGlyphSize=s.sdfGlyphSize||CONFIG.sdfGlyphSize,s.unicodeFontsURL=s.unicodeFontsURL||CONFIG.unicodeFontsURL,s.colorRanges!=null){let N={};for(let L in s.colorRanges)if(s.colorRanges.hasOwnProperty(L)){let F=s.colorRanges[L];typeof F!="number"&&(F=tempColor.set(F).getHex()),N[L]=F}s.colorRanges=N}Object.freeze(s);const{textureWidth:y,sdfExponent:S}=CONFIG,{sdfGlyphSize:A}=s,w=y/A*4;let C=atlases[A];if(!C){const N=document.createElement("canvas");N.width=y,N.height=A*256/w,C=atlases[A]={glyphCount:0,sdfGlyphSize:A,sdfCanvas:N,sdfTexture:new Texture(N,void 0,void 0,void 0,LinearFilter,LinearFilter),contextLost:!1,glyphsByFont:new Map},C.sdfTexture.generateMipmaps=!1,initContextLossHandling(C)}const{sdfTexture:T,sdfCanvas:R}=C;typesetInWorker(s).then(N=>{const{glyphIds:L,glyphFontIndices:F,fontData:H,glyphPositions:z,fontSize:U,timings:G}=N,Y=[],K=new Float32Array(L.length*4);let Z=0,J=0;const te=now$1(),de=H.map(we=>{let Ie=C.glyphsByFont.get(we.src);return Ie||C.glyphsByFont.set(we.src,Ie=new Map),Ie});L.forEach((we,Ie)=>{const Be=F[Ie],{src:Me,unitsPerEm:Re}=H[Be];let Te=de[Be].get(we);if(!Te){const{path:he,pathBounds:ue}=N.glyphData[Me][we],ye=Math.max(ue[2]-ue[0],ue[3]-ue[1])/A*(CONFIG.sdfMargin*A+.5),ce=C.glyphCount++,_e=[ue[0]-ye,ue[1]-ye,ue[2]+ye,ue[3]+ye];de[Be].set(we,Te={path:he,atlasIndex:ce,sdfViewBox:_e}),Y.push(Te)}const{sdfViewBox:Se}=Te,oe=z[J++],ae=z[J++],be=U/Re;K[Z++]=oe+Se[0]*be,K[Z++]=ae+Se[1]*be,K[Z++]=oe+Se[2]*be,K[Z++]=ae+Se[3]*be,L[Ie]=Te.atlasIndex}),G.quads=(G.quads||0)+(now$1()-te);const se=now$1();G.sdf={};const ne=R.height,ge=Math.ceil(C.glyphCount/w),Ee=Math.pow(2,Math.ceil(Math.log2(ge*A)));Ee>ne&&(console.info(`Increasing SDF texture size ${ne}->${Ee}`),resizeWebGLCanvasWithoutClearing(R,y,Ee),T.dispose()),Promise.all(Y.map(we=>generateGlyphSDF(we,C,s.gpuAccelerateSDF).then(({timing:Ie})=>{G.sdf[we.atlasIndex]=Ie}))).then(()=>{Y.length&&!C.contextLost&&(safariPre15Workaround(C),T.needsUpdate=!0),G.sdfTotal=now$1()-se,G.total=now$1()-u,n(Object.freeze({parameters:s,sdfTexture:T,sdfGlyphSize:A,sdfExponent:S,glyphBounds:K,glyphAtlasIndices:L,glyphColors:N.glyphColors,caretPositions:N.caretPositions,chunkedBounds:N.chunkedBounds,ascender:N.ascender,descender:N.descender,lineHeight:N.lineHeight,capHeight:N.capHeight,xHeight:N.xHeight,topBaseline:N.topBaseline,blockBounds:N.blockBounds,visibleBounds:N.visibleBounds,timings:N.timings}))})}),Promise.resolve().then(()=>{C.contextLost||warmUpSDFCanvas(R)})}function generateGlyphSDF({path:s,atlasIndex:n,sdfViewBox:u},{sdfGlyphSize:f,sdfCanvas:y,contextLost:S},A){if(S)return Promise.resolve({timing:-1});const{textureWidth:w,sdfExponent:C}=CONFIG,T=Math.max(u[2]-u[0],u[3]-u[1]),R=Math.floor(n/4),I=R%(w/f)*f,N=Math.floor(R/(w/f))*f,L=n%4;return generateSDF(f,f,s,u,T,C,y,I,N,L,A)}function initContextLossHandling(s){const n=s.sdfCanvas;n.addEventListener("webglcontextlost",u=>{console.log("Context Lost",u),u.preventDefault(),s.contextLost=!0}),n.addEventListener("webglcontextrestored",u=>{console.log("Context Restored",u),s.contextLost=!1;const f=[];s.glyphsByFont.forEach(y=>{y.forEach(S=>{f.push(generateGlyphSDF(S,s,!0))})}),Promise.all(f).then(()=>{safariPre15Workaround(s),s.sdfTexture.needsUpdate=!0})})}function preloadFont({font:s,characters:n,sdfGlyphSize:u},f){let y=Array.isArray(n)?n.join(`
`):""+n;getTextRenderInfo({font:s,sdfGlyphSize:u,text:y},f)}function assign(s,n){for(let u in n)n.hasOwnProperty(u)&&(s[u]=n[u]);return s}let linkEl;function toAbsoluteURL(s){return linkEl||(linkEl=typeof document>"u"?{}:document.createElement("a")),linkEl.href=s,linkEl.href}function safariPre15Workaround(s){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:n,sdfTexture:u}=s,{width:f,height:y}=n,S=s.sdfCanvas.getContext("webgl");let A=u.image.data;(!A||A.length!==f*y*4)&&(A=new Uint8Array(f*y*4),u.image={width:f,height:y,data:A},u.flipY=!1,u.isDataTexture=!0),S.readPixels(0,0,f,y,S.RGBA,S.UNSIGNED_BYTE,A)}}const typesetterWorkerModule=defineWorkerModule({name:"Typesetter",dependencies:[createTypesetter,fontResolverWorkerModule,bidiFactory],init(s,n,u){return s(n,u())}}),typesetInWorker=defineWorkerModule({name:"Typesetter",dependencies:[typesetterWorkerModule],init(s){return function(n){return new Promise(u=>{s.typeset(n,u)})}},getTransferables(s){const n=[];for(let u in s)s[u]&&s[u].buffer&&n.push(s[u].buffer);return n}});typesetInWorker.onMainThread;const templateGeometries={};function getTemplateGeometry(s){let n=templateGeometries[s];return n||(n=templateGeometries[s]=new PlaneGeometry(1,1,s,s).translate(.5,.5,0)),n}const glyphBoundsAttrName="aTroikaGlyphBounds",glyphIndexAttrName="aTroikaGlyphIndex",glyphColorAttrName="aTroikaGlyphColor";class GlyphsGeometry extends InstancedBufferGeometry{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new Sphere,this.boundingBox=new Box3}computeBoundingSphere(){}computeBoundingBox(){}set detail(n){if(n!==this._detail){this._detail=n,(typeof n!="number"||n<1)&&(n=1);let u=getTemplateGeometry(n);["position","normal","uv"].forEach(f=>{this.attributes[f]=u.attributes[f].clone()}),this.setIndex(u.getIndex().clone())}}get detail(){return this._detail}set curveRadius(n){n!==this._curveRadius&&(this._curveRadius=n,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(n,u,f,y,S){this.updateAttributeData(glyphBoundsAttrName,n,4),this.updateAttributeData(glyphIndexAttrName,u,1),this.updateAttributeData(glyphColorAttrName,S,3),this._blockBounds=f,this._chunkedBounds=y,this.instanceCount=u.length,this._updateBounds()}_updateBounds(){const n=this._blockBounds;if(n){const{curveRadius:u,boundingBox:f}=this;if(u){const{PI:y,floor:S,min:A,max:w,sin:C,cos:T}=Math,R=y/2,I=y*2,N=Math.abs(u),L=n[0]/N,F=n[2]/N,H=S((L+R)/I)!==S((F+R)/I)?-N:A(C(L)*N,C(F)*N),z=S((L-R)/I)!==S((F-R)/I)?N:w(C(L)*N,C(F)*N),U=S((L+y)/I)!==S((F+y)/I)?N*2:w(N-T(L)*N,N-T(F)*N);f.min.set(H,n[1],u<0?-U:0),f.max.set(z,n[3],u<0?0:U)}else f.min.set(n[0],n[1],0),f.max.set(n[2],n[3],0);f.getBoundingSphere(this.boundingSphere)}}applyClipRect(n){let u=this.getAttribute(glyphIndexAttrName).count,f=this._chunkedBounds;if(f)for(let y=f.length;y--;){u=f[y].end;let S=f[y].rect;if(S[1]<n.w&&S[3]>n.y&&S[0]<n.z&&S[2]>n.x)break}this.instanceCount=u}updateAttributeData(n,u,f){const y=this.getAttribute(n);u?y&&y.array.length===u.length?(y.array.set(u),y.needsUpdate=!0):(this.setAttribute(n,new InstancedBufferAttribute(u,f)),delete this._maxInstanceCount,this.dispose()):y&&this.deleteAttribute(n)}}const VERTEX_DEFS=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaEdgeOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,VERTEX_TRANSFORM=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaEdgeOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaEdgeOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,FRAGMENT_DEFS=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaEdgeOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,FRAGMENT_TRANSFORM=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaEdgeOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function createTextDerivedMaterial(s){const n=createDerivedMaterial(s,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new Vector2},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new Vector4(0,0,0,0)},uTroikaClipRect:{value:new Vector4(0,0,0,0)},uTroikaEdgeOffset:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new Vector2},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new Color},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new Matrix3},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:VERTEX_DEFS,vertexTransform:VERTEX_TRANSFORM,fragmentDefs:FRAGMENT_DEFS,fragmentColorTransform:FRAGMENT_TRANSFORM,customRewriter({vertexShader:u,fragmentShader:f}){let y=/\buniform\s+vec3\s+diffuse\b/;return y.test(f)&&(f=f.replace(y,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),y.test(u)||(u=u.replace(voidMainRegExp,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:u,fragmentShader:f}}});return n.transparent=!0,n.forceSinglePass=!0,Object.defineProperties(n,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),n}const defaultMaterial=new MeshBasicMaterial({color:16777215,side:DoubleSide,transparent:!0}),defaultStrokeColor=8421504,tempMat4=new Matrix4,tempVec3a=new Vector3,tempVec3b=new Vector3,tempArray=[],origin=new Vector3,defaultOrient="+x+y";function first(s){return Array.isArray(s)?s[0]:s}let getFlatRaycastMesh=()=>{const s=new Mesh(new PlaneGeometry(1,1),defaultMaterial);return getFlatRaycastMesh=()=>s,s},getCurvedRaycastMesh=()=>{const s=new Mesh(new PlaneGeometry(1,1,32,1),defaultMaterial);return getCurvedRaycastMesh=()=>s,s};const syncStartEvent={type:"syncstart"},syncCompleteEvent={type:"synccomplete"},SYNCABLE_PROPS=["font","fontSize","fontStyle","fontWeight","lang","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],COPYABLE_PROPS=SYNCABLE_PROPS.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");let Text$1=class extends Mesh{constructor(){const n=new GlyphsGeometry;super(n,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.unicodeFontsURL=null,this.fontSize=.1,this.fontWeight="normal",this.fontStyle="normal",this.lang=null,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=defaultStrokeColor,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=defaultOrient,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(n){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(n):(this._isSyncing=!0,this.dispatchEvent(syncStartEvent),getTextRenderInfo({text:this.text,font:this.font,lang:this.lang,fontSize:this.fontSize||.1,fontWeight:this.fontWeight||"normal",fontStyle:this.fontStyle||"normal",letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF,unicodeFontsURL:this.unicodeFontsURL},u=>{this._isSyncing=!1,this._textRenderInfo=u,this.geometry.updateGlyphs(u.glyphBounds,u.glyphAtlasIndices,u.blockBounds,u.chunkedBounds,u.glyphColors);const f=this._queuedSyncs;f&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{f.forEach(y=>y&&y())})),this.dispatchEvent(syncCompleteEvent),n&&n()})))}onBeforeRender(n,u,f,y,S,A){this.sync(),S.isTroikaTextMaterial&&this._prepareForRender(S)}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}createDerivedMaterial(n){return createTextDerivedMaterial(n)}get material(){let n=this._derivedMaterial;const u=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=defaultMaterial.clone());if((!n||!n.isDerivedFrom(u))&&(n=this._derivedMaterial=this.createDerivedMaterial(u),u.addEventListener("dispose",function f(){u.removeEventListener("dispose",f),n.dispose()})),this.hasOutline()){let f=n._outlineMtl;return f||(f=n._outlineMtl=Object.create(n,{id:{value:n.id+.1}}),f.isTextOutlineMaterial=!0,f.depthWrite=!1,f.map=null,n.addEventListener("dispose",function y(){n.removeEventListener("dispose",y),f.dispose()})),[f,n]}else return n}set material(n){n&&n.isTroikaTextMaterial?(this._derivedMaterial=n,this._baseMaterial=n.baseMaterial):this._baseMaterial=n}hasOutline(){return!!(this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY)}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(n){this.geometry.detail=n}get curveRadius(){return this.geometry.curveRadius}set curveRadius(n){this.geometry.curveRadius=n}get customDepthMaterial(){return first(this.material).getDepthMaterial()}set customDepthMaterial(n){}get customDistanceMaterial(){return first(this.material).getDistanceMaterial()}set customDistanceMaterial(n){}_prepareForRender(n){const u=n.isTextOutlineMaterial,f=n.uniforms,y=this.textRenderInfo;if(y){const{sdfTexture:w,blockBounds:C}=y;f.uTroikaSDFTexture.value=w,f.uTroikaSDFTextureSize.value.set(w.image.width,w.image.height),f.uTroikaSDFGlyphSize.value=y.sdfGlyphSize,f.uTroikaSDFExponent.value=y.sdfExponent,f.uTroikaTotalBounds.value.fromArray(C),f.uTroikaUseGlyphColors.value=!u&&!!y.glyphColors;let T=0,R=0,I=0,N,L,F,H=0,z=0;if(u){let{outlineWidth:G,outlineOffsetX:Y,outlineOffsetY:K,outlineBlur:Z,outlineOpacity:J}=this;T=this._parsePercent(G)||0,R=Math.max(0,this._parsePercent(Z)||0),N=J,H=this._parsePercent(Y)||0,z=this._parsePercent(K)||0}else I=Math.max(0,this._parsePercent(this.strokeWidth)||0),I&&(F=this.strokeColor,f.uTroikaStrokeColor.value.set(F??defaultStrokeColor),L=this.strokeOpacity,L==null&&(L=1)),N=this.fillOpacity;f.uTroikaEdgeOffset.value=T,f.uTroikaPositionOffset.value.set(H,z),f.uTroikaBlurRadius.value=R,f.uTroikaStrokeWidth.value=I,f.uTroikaStrokeOpacity.value=L,f.uTroikaFillOpacity.value=N??1,f.uTroikaCurveRadius.value=this.curveRadius||0;let U=this.clipRect;if(U&&Array.isArray(U)&&U.length===4)f.uTroikaClipRect.value.fromArray(U);else{const G=(this.fontSize||.1)*100;f.uTroikaClipRect.value.set(C[0]-G,C[1]-G,C[2]+G,C[3]+G)}this.geometry.applyClipRect(f.uTroikaClipRect.value)}f.uTroikaSDFDebug.value=!!this.debugSDF,n.polygonOffset=!!this.depthOffset,n.polygonOffsetFactor=n.polygonOffsetUnits=this.depthOffset||0;const S=u?this.outlineColor||0:this.color;if(S==null)delete n.color;else{const w=n.hasOwnProperty("color")?n.color:n.color=new Color;(S!==w._input||typeof S=="object")&&w.set(w._input=S)}let A=this.orientation||defaultOrient;if(A!==n._orientation){let w=f.uTroikaOrient.value;A=A.replace(/[^-+xyz]/g,"");let C=A!==defaultOrient&&A.match(/^([-+])([xyz])([-+])([xyz])$/);if(C){let[,T,R,I,N]=C;tempVec3a.set(0,0,0)[R]=T==="-"?1:-1,tempVec3b.set(0,0,0)[N]=I==="-"?-1:1,tempMat4.lookAt(origin,tempVec3a.cross(tempVec3b),tempVec3b),w.setFromMatrix4(tempMat4)}else w.identity();n._orientation=A}}_parsePercent(n){if(typeof n=="string"){let u=n.match(/^(-?[\d.]+)%$/),f=u?parseFloat(u[1]):NaN;n=(isNaN(f)?0:f/100)*this.fontSize}return n}localPositionToTextCoords(n,u=new Vector2){u.copy(n);const f=this.curveRadius;return f&&(u.x=Math.atan2(n.x,Math.abs(f)-Math.abs(n.z))*Math.abs(f)),u}worldPositionToTextCoords(n,u=new Vector2){return tempVec3a.copy(n),this.localPositionToTextCoords(this.worldToLocal(tempVec3a),u)}raycast(n,u){const{textRenderInfo:f,curveRadius:y}=this;if(f){const S=f.blockBounds,A=y?getCurvedRaycastMesh():getFlatRaycastMesh(),w=A.geometry,{position:C,uv:T}=w.attributes;for(let R=0;R<T.count;R++){let I=S[0]+T.getX(R)*(S[2]-S[0]);const N=S[1]+T.getY(R)*(S[3]-S[1]);let L=0;y&&(L=y-Math.cos(I/y)*y,I=Math.sin(I/y)*y),C.setXYZ(R,I,N,L)}w.boundingSphere=this.geometry.boundingSphere,w.boundingBox=this.geometry.boundingBox,A.matrixWorld=this.matrixWorld,A.material.side=this.material.side,tempArray.length=0,A.raycast(n,tempArray);for(let R=0;R<tempArray.length;R++)tempArray[R].object=this,u.push(tempArray[R])}}copy(n){const u=this.geometry;return super.copy(n),this.geometry=u,COPYABLE_PROPS.forEach(f=>{this[f]=n[f]}),this}clone(){return new this.constructor().copy(this)}};SYNCABLE_PROPS.forEach(s=>{const n="_private_"+s;Object.defineProperty(Text$1.prototype,s,{get(){return this[n]},set(u){u!==this[n]&&(this[n]=u,this._needsSync=!0)}})});new Box3;new Color;const Text=reactExports.forwardRef(({sdfGlyphSize:s=64,anchorX:n="center",anchorY:u="middle",font:f,fontSize:y=1,children:S,characters:A,onSync:w,...C},T)=>{const R=useThree(({invalidate:F})=>F),[I]=reactExports.useState(()=>new Text$1),[N,L]=reactExports.useMemo(()=>{const F=[];let H="";return reactExports.Children.forEach(S,z=>{typeof z=="string"||typeof z=="number"?H+=z:F.push(z)}),[F,H]},[S]);return suspend(()=>new Promise(F=>preloadFont({font:f,characters:A},F)),["troika-text",f,A]),reactExports.useLayoutEffect(()=>{I.sync(()=>{R(),w&&w(I)})}),reactExports.useEffect(()=>()=>I.dispose(),[I]),reactExports.createElement("primitive",_extends({object:I,ref:T,font:f,text:L,anchorX:n,anchorY:u,fontSize:y,sdfGlyphSize:s},C),N)});function shaderMaterial(s,n,u,f){var y;return y=class extends ShaderMaterial{constructor(S){super({vertexShader:n,fragmentShader:u,...S});for(const A in s)this.uniforms[A]=new Uniform(s[A]),Object.defineProperty(this,A,{get(){return this.uniforms[A].value},set(w){this.uniforms[A].value=w}});this.uniforms=UniformsUtils.clone(this.uniforms)}},y.key=MathUtils.generateUUID(),y}const getVersion=()=>parseInt(REVISION.replace(/\D+/g,"")),version=getVersion();let dracoLoader=null,decoderPath="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function extensions(s=!0,n=!0,u){return f=>{u&&u(f),s&&(dracoLoader||(dracoLoader=new DRACOLoader),dracoLoader.setDecoderPath(typeof s=="string"?s:decoderPath),f.setDRACOLoader(dracoLoader)),n&&f.setMeshoptDecoder(typeof MeshoptDecoder=="function"?MeshoptDecoder():MeshoptDecoder)}}const useGLTF=(s,n,u,f)=>useLoader(GLTFLoader,s,extensions(n,u,f));useGLTF.preload=(s,n,u,f)=>useLoader.preload(GLTFLoader,s,extensions(n,u,f));useGLTF.clear=s=>useLoader.clear(GLTFLoader,s);useGLTF.setDecoderPath=s=>{decoderPath=s};const GridMaterial=shaderMaterial({cellSize:.5,sectionSize:1,fadeDistance:100,fadeStrength:1,fadeFrom:1,cellThickness:.5,sectionThickness:1,cellColor:new Color,sectionColor:new Color,infiniteGrid:!1,followCamera:!1,worldCamProjPosition:new Vector3,worldPlanePosition:new Vector3},`
    varying vec3 localPosition;
    varying vec4 worldPosition;

    uniform vec3 worldCamProjPosition;
    uniform vec3 worldPlanePosition;
    uniform float fadeDistance;
    uniform bool infiniteGrid;
    uniform bool followCamera;

    void main() {
      localPosition = position.xzy;
      if (infiniteGrid) localPosition *= 1.0 + fadeDistance;
      
      worldPosition = modelMatrix * vec4(localPosition, 1.0);
      if (followCamera) {
        worldPosition.xyz += (worldCamProjPosition - worldPlanePosition);
        localPosition = (inverse(modelMatrix) * worldPosition).xyz;
      }

      gl_Position = projectionMatrix * viewMatrix * worldPosition;
    }
  `,`
    varying vec3 localPosition;
    varying vec4 worldPosition;

    uniform vec3 worldCamProjPosition;
    uniform float cellSize;
    uniform float sectionSize;
    uniform vec3 cellColor;
    uniform vec3 sectionColor;
    uniform float fadeDistance;
    uniform float fadeStrength;
    uniform float fadeFrom;
    uniform float cellThickness;
    uniform float sectionThickness;

    float getGrid(float size, float thickness) {
      vec2 r = localPosition.xz / size;
      vec2 grid = abs(fract(r - 0.5) - 0.5) / fwidth(r);
      float line = min(grid.x, grid.y) + 1.0 - thickness;
      return 1.0 - min(line, 1.0);
    }

    void main() {
      float g1 = getGrid(cellSize, cellThickness);
      float g2 = getGrid(sectionSize, sectionThickness);

      vec3 from = worldCamProjPosition*vec3(fadeFrom);
      float dist = distance(from, worldPosition.xyz);
      float d = 1.0 - min(dist / fadeDistance, 1.0);
      vec3 color = mix(cellColor, sectionColor, min(1.0, sectionThickness * g2));

      gl_FragColor = vec4(color, (g1 + g2) * pow(d, fadeStrength));
      gl_FragColor.a = mix(0.75 * gl_FragColor.a, gl_FragColor.a, g2);
      if (gl_FragColor.a <= 0.0) discard;

      #include <tonemapping_fragment>
      #include <${version>=154?"colorspace_fragment":"encodings_fragment"}>
    }
  `),Grid=reactExports.forwardRef(({args:s,cellColor:n="#000000",sectionColor:u="#2080ff",cellSize:f=.5,sectionSize:y=1,followCamera:S=!1,infiniteGrid:A=!1,fadeDistance:w=100,fadeStrength:C=1,fadeFrom:T=1,cellThickness:R=.5,sectionThickness:I=1,side:N=BackSide,...L},F)=>{extend({GridMaterial});const H=reactExports.useRef(null);reactExports.useImperativeHandle(F,()=>H.current,[]);const z=new Plane$1,U=new Vector3(0,1,0),G=new Vector3(0,0,0);useFrame(Z=>{z.setFromNormalAndCoplanarPoint(U,G).applyMatrix4(H.current.matrixWorld);const J=H.current.material,te=J.uniforms.worldCamProjPosition,de=J.uniforms.worldPlanePosition;z.projectPoint(Z.camera.position,te.value),de.value.set(0,0,0).applyMatrix4(H.current.matrixWorld)});const Y={cellSize:f,sectionSize:y,cellColor:n,sectionColor:u,cellThickness:R,sectionThickness:I},K={fadeDistance:w,fadeStrength:C,fadeFrom:T,infiniteGrid:A,followCamera:S};return reactExports.createElement("mesh",_extends({ref:H,frustumCulled:!1},L),reactExports.createElement("gridMaterial",_extends({transparent:!0,"extensions-derivatives":!0,side:N},Y,K)),reactExports.createElement("planeGeometry",{args:s}))});function useAnimations(s,n){const u=reactExports.useRef(null),[f]=reactExports.useState(()=>n?n instanceof Object3D?{current:n}:n:u),[y]=reactExports.useState(()=>new AnimationMixer(void 0));reactExports.useLayoutEffect(()=>{n&&(f.current=n instanceof Object3D?n:n.current),y._root=f.current});const S=reactExports.useRef({}),A=reactExports.useMemo(()=>{const w={};return s.forEach(C=>Object.defineProperty(w,C.name,{enumerable:!0,get(){if(f.current)return S.current[C.name]||(S.current[C.name]=y.clipAction(C,f.current))},configurable:!0})),{ref:f,clips:s,actions:w,names:s.map(C=>C.name),mixer:y}},[s]);return useFrame((w,C)=>y.update(C)),reactExports.useEffect(()=>{const w=f.current;return()=>{S.current={},y.stopAllAction(),Object.values(A.actions).forEach(C=>{w&&y.uncacheAction(C,w)})}},[s]),A}function create(s,n){const u=s+"Geometry";return reactExports.forwardRef(({args:f,children:y,...S},A)=>{const w=reactExports.useRef(null);return reactExports.useImperativeHandle(A,()=>w.current),reactExports.useLayoutEffect(()=>{n?.(w.current)}),reactExports.createElement("mesh",_extends({ref:w},S),reactExports.createElement(u,{attach:"geometry",args:f}),y)})}const Box=create("box"),Plane=create("plane"),eps=1e-5;function createShape(s,n,u){const f=new Shape,y=u-eps;return f.absarc(eps,eps,eps,-Math.PI/2,-Math.PI,!0),f.absarc(eps,n-y*2,eps,Math.PI,Math.PI/2,!0),f.absarc(s-y*2,n-y*2,eps,Math.PI/2,0,!0),f.absarc(s-y*2,eps,eps,0,-Math.PI/2,!0),f}const RoundedBox=reactExports.forwardRef(function s({args:[n=1,u=1,f=1]=[],radius:y=.05,steps:S=1,smoothness:A=4,bevelSegments:w=4,creaseAngle:C=.4,children:T,...R},I){return reactExports.createElement("mesh",_extends({ref:I},R),reactExports.createElement(RoundedBoxGeometry,{args:[n,u,f],radius:y,steps:S,smoothness:A,bevelSegments:w,creaseAngle:C}),T)}),RoundedBoxGeometry=reactExports.forwardRef(function s({args:[n=1,u=1,f=1]=[],radius:y=.05,steps:S=1,smoothness:A=4,bevelSegments:w=4,creaseAngle:C=.4,...T},R){const I=reactExports.useMemo(()=>createShape(n,u,y),[n,u,y]),N=reactExports.useMemo(()=>({depth:f-y*2,bevelEnabled:!0,bevelSegments:w*2,steps:S,bevelSize:y-eps,bevelThickness:y,curveSegments:A}),[f,y,A,w,S]),L=reactExports.useRef(null);return reactExports.useLayoutEffect(()=>{L.current&&(L.current.center(),toCreasedNormals(L.current,C))},[I,N,C]),reactExports.useImperativeHandle(R,()=>L.current),reactExports.createElement("extrudeGeometry",_extends({ref:L,args:[I,N]},T))}),getBufferForType=(s,n,u)=>{let f;switch(s){case UnsignedByteType:f=new Uint8ClampedArray(n*u*4);break;case HalfFloatType:f=new Uint16Array(n*u*4);break;case UnsignedIntType:f=new Uint32Array(n*u*4);break;case ByteType:f=new Int8Array(n*u*4);break;case ShortType:f=new Int16Array(n*u*4);break;case IntType:f=new Int32Array(n*u*4);break;case FloatType:f=new Float32Array(n*u*4);break;default:throw new Error("Unsupported data type")}return f};let _canReadPixelsResult;const canReadPixels=(s,n,u,f)=>{if(_canReadPixelsResult!==void 0)return _canReadPixelsResult;const y=new WebGLRenderTarget(1,1,f);n.setRenderTarget(y);const S=new Mesh(new PlaneGeometry,new MeshBasicMaterial({color:16777215}));n.render(S,u),n.setRenderTarget(null);const A=getBufferForType(s,y.width,y.height);return n.readRenderTargetPixels(y,0,0,y.width,y.height,A),y.dispose(),S.geometry.dispose(),S.material.dispose(),_canReadPixelsResult=A[0]!==0,_canReadPixelsResult};class QuadRenderer{_renderer;_rendererIsDisposable=!1;_material;_scene;_camera;_quad;_renderTarget;_width;_height;_type;_colorSpace;_supportsReadPixels=!0;constructor(n){this._width=n.width,this._height=n.height,this._type=n.type,this._colorSpace=n.colorSpace;const u={format:RGBAFormat,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:n.renderTargetOptions?.anisotropy!==void 0?n.renderTargetOptions?.anisotropy:1,generateMipmaps:n.renderTargetOptions?.generateMipmaps!==void 0?n.renderTargetOptions?.generateMipmaps:!1,magFilter:n.renderTargetOptions?.magFilter!==void 0?n.renderTargetOptions?.magFilter:LinearFilter,minFilter:n.renderTargetOptions?.minFilter!==void 0?n.renderTargetOptions?.minFilter:LinearFilter,samples:n.renderTargetOptions?.samples!==void 0?n.renderTargetOptions?.samples:void 0,wrapS:n.renderTargetOptions?.wrapS!==void 0?n.renderTargetOptions?.wrapS:ClampToEdgeWrapping,wrapT:n.renderTargetOptions?.wrapT!==void 0?n.renderTargetOptions?.wrapT:ClampToEdgeWrapping};if(this._material=n.material,n.renderer?this._renderer=n.renderer:(this._renderer=QuadRenderer.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new Scene$1,this._camera=new OrthographicCamera,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!canReadPixels(this._type,this._renderer,this._camera,u)){let f;this._type===HalfFloatType&&(f=this._renderer.extensions.has("EXT_color_buffer_float")?FloatType:void 0),f!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${FloatType}`),this._type=f):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new Mesh(new PlaneGeometry,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new WebGLRenderTarget(this.width,this.height,u),this._renderTarget.texture.mapping=n.renderTargetOptions?.mapping!==void 0?n.renderTargetOptions?.mapping:UVMapping}static instantiateRenderer(){const n=new WebGLRenderer;return n.setSize(128,128),n}render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(n){throw this._renderer.setRenderTarget(null),n}this._renderer.setRenderTarget(null)};toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const n=getBufferForType(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,n),n}toDataTexture(n){const u=new DataTexture(this.toArray(),this.width,this.height,RGBAFormat,this._type,n?.mapping||UVMapping,n?.wrapS||ClampToEdgeWrapping,n?.wrapT||ClampToEdgeWrapping,n?.magFilter||LinearFilter,n?.minFilter||LinearFilter,n?.anisotropy||1,LinearSRGBColorSpace$1);return u.generateMipmaps=n?.generateMipmaps!==void 0?n?.generateMipmaps:!1,u}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(n){this.disposeOnDemandRenderer(),n&&this.renderTarget.dispose(),this.material instanceof ShaderMaterial&&Object.values(this.material.uniforms).forEach(u=>{u.value instanceof Texture&&u.value.dispose()}),Object.values(this.material).forEach(u=>{u instanceof Texture&&u.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(n){this._width=n,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(n){this._height=n,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(n){this._renderTarget=n,this._width=n.width,this._height=n.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}class GainMapNotFoundError extends Error{}class XMPMetadataNotFoundError extends Error{}const getXMLValue=(s,n,u)=>{const f=new RegExp(`${n}="([^"]*)"`,"i").exec(s);if(f)return f[1];const y=new RegExp(`<${n}[^>]*>([\\s\\S]*?)</${n}>`,"i").exec(s);if(y){const S=y[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return S&&S.length===3?S.map(A=>A.replace(/<\/?rdf:li>/g,"")):y[1].trim()}if(u!==void 0)return u;throw new Error(`Can't find ${n} in gainmap metadata`)},extractXMP=s=>{let n;typeof TextDecoder<"u"?n=new TextDecoder().decode(s):n=s.toString();let u=n.indexOf("<x:xmpmeta");for(;u!==-1;){const f=n.indexOf("x:xmpmeta>",u),y=n.slice(u,f+10);try{const S=getXMLValue(y,"hdrgm:GainMapMin","0"),A=getXMLValue(y,"hdrgm:GainMapMax"),w=getXMLValue(y,"hdrgm:Gamma","1"),C=getXMLValue(y,"hdrgm:OffsetSDR","0.015625"),T=getXMLValue(y,"hdrgm:OffsetHDR","0.015625"),R=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(y),I=R?R[1]:"0",N=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(y);if(!N)throw new Error("Incomplete gainmap metadata");const L=N[1];return{gainMapMin:Array.isArray(S)?S.map(F=>parseFloat(F)):[parseFloat(S),parseFloat(S),parseFloat(S)],gainMapMax:Array.isArray(A)?A.map(F=>parseFloat(F)):[parseFloat(A),parseFloat(A),parseFloat(A)],gamma:Array.isArray(w)?w.map(F=>parseFloat(F)):[parseFloat(w),parseFloat(w),parseFloat(w)],offsetSdr:Array.isArray(C)?C.map(F=>parseFloat(F)):[parseFloat(C),parseFloat(C),parseFloat(C)],offsetHdr:Array.isArray(T)?T.map(F=>parseFloat(F)):[parseFloat(T),parseFloat(T),parseFloat(T)],hdrCapacityMin:parseFloat(I),hdrCapacityMax:parseFloat(L)}}catch{}u=n.indexOf("<x:xmpmeta",f)}};class MPFExtractor{options;constructor(n){this.options={debug:n&&n.debug!==void 0?n.debug:!1,extractFII:n&&n.extractFII!==void 0?n.extractFII:!0,extractNonFII:n&&n.extractNonFII!==void 0?n.extractNonFII:!0}}extract(n){return new Promise((u,f)=>{const y=this.options.debug,S=new DataView(n.buffer);if(S.getUint16(0)!==65496){f(new Error("Not a valid jpeg"));return}const A=S.byteLength;let w=2,C=0,T;for(;w<A;){if(++C>250){f(new Error(`Found no marker after ${C} loops `));return}if(S.getUint8(w)!==255){f(new Error(`Not a valid marker at offset 0x${w.toString(16)}, found: 0x${S.getUint8(w).toString(16)}`));return}if(T=S.getUint8(w+1),y&&console.log(`Marker: ${T.toString(16)}`),T===226){y&&console.log("Found APP2 marker (0xffe2)");const R=w+4;if(S.getUint32(R)===1297106432){const I=R+4;let N;if(S.getUint16(I)===18761)N=!1;else if(S.getUint16(I)===19789)N=!0;else{f(new Error("No valid endianness marker found in TIFF header"));return}if(S.getUint16(I+2,!N)!==42){f(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const L=S.getUint32(I+4,!N);if(L<8){f(new Error("Not valid TIFF data! (First offset less than 8)"));return}const F=I+L,H=S.getUint16(F,!N),z=F+2;let U=0;for(let Z=z;Z<z+12*H;Z+=12)S.getUint16(Z,!N)===45057&&(U=S.getUint32(Z+8,!N));const Y=F+2+H*12+4,K=[];for(let Z=Y;Z<Y+U*16;Z+=16){const J={MPType:S.getUint32(Z,!N),size:S.getUint32(Z+4,!N),dataOffset:S.getUint32(Z+8,!N),dependantImages:S.getUint32(Z+12,!N),start:-1,end:-1,isFII:!1};J.dataOffset?(J.start=I+J.dataOffset,J.isFII=!1):(J.start=0,J.isFII=!0),J.end=J.start+J.size,K.push(J)}if(this.options.extractNonFII&&K.length){const Z=new Blob([S]),J=[];for(const te of K){if(te.isFII&&!this.options.extractFII)continue;const de=Z.slice(te.start,te.end+1,"image/jpeg");J.push(de)}u(J)}}}w+=2+S.getUint16(w+2)}})}}const extractGainmapFromJPEG=async s=>{const n=extractXMP(s);if(!n)throw new XMPMetadataNotFoundError("Gain map XMP metadata not found");const f=await new MPFExtractor({extractFII:!0,extractNonFII:!0}).extract(s);if(f.length!==2)throw new GainMapNotFoundError("Gain map recovery image not found");return{sdr:new Uint8Array(await f[0].arrayBuffer()),gainMap:new Uint8Array(await f[1].arrayBuffer()),metadata:n}},getHTMLImageFromBlob=s=>new Promise((n,u)=>{const f=document.createElement("img");f.onload=()=>{n(f)},f.onerror=y=>{u(y)},f.src=URL.createObjectURL(s)});class LoaderBaseShared extends Loader{_renderer;_renderTargetOptions;_internalLoadingManager;_config;constructor(n,u){super(u),this._config=n,n.renderer&&(this._renderer=n.renderer),this._internalLoadingManager=new LoadingManager}setRenderer(n){return this._renderer=n,this}setRenderTargetOptions(n){return this._renderTargetOptions=n,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: A Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const n=this._config.createMaterial({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new Texture,sdr:new Texture});return this._config.createQuadRenderer({width:16,height:16,type:HalfFloatType,colorSpace:LinearSRGBColorSpace$1,material:n,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async processImages(n,u,f){const y=u?new Blob([u],{type:"image/jpeg"}):void 0,S=new Blob([n],{type:"image/jpeg"});let A,w,C=!1;if(typeof createImageBitmap>"u"){const T=await Promise.all([y?getHTMLImageFromBlob(y):Promise.resolve(void 0),getHTMLImageFromBlob(S)]);w=T[0],A=T[1],C=f==="flipY"}else{const T=await Promise.all([y?createImageBitmap(y,{imageOrientation:f||"flipY"}):Promise.resolve(void 0),createImageBitmap(S,{imageOrientation:f||"flipY"})]);w=T[0],A=T[1]}return{sdrImage:A,gainMapImage:w,needsFlip:C}}createTextures(n,u,f){const y=new Texture(u||new ImageData(2,2),UVMapping,ClampToEdgeWrapping,ClampToEdgeWrapping,LinearFilter,LinearMipMapLinearFilter,RGBAFormat,UnsignedByteType,1,LinearSRGBColorSpace$1);y.flipY=f,y.needsUpdate=!0;const S=new Texture(n,UVMapping,ClampToEdgeWrapping,ClampToEdgeWrapping,LinearFilter,LinearMipMapLinearFilter,RGBAFormat,UnsignedByteType,1,SRGBColorSpace$1);return S.flipY=f,S.needsUpdate=!0,{gainMap:y,sdr:S}}updateQuadRenderer(n,u,f,y,S){n.width=u.width,n.height=u.height,n.material.gainMap=f,n.material.sdr=y,n.material.gainMapMin=S.gainMapMin,n.material.gainMapMax=S.gainMapMax,n.material.offsetHdr=S.offsetHdr,n.material.offsetSdr=S.offsetSdr,n.material.gamma=S.gamma,n.material.hdrCapacityMin=S.hdrCapacityMin,n.material.hdrCapacityMax=S.hdrCapacityMax,n.material.maxDisplayBoost=Math.pow(2,S.hdrCapacityMax),n.material.needsUpdate=!0}}const vertexShader=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,fragmentShader=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class GainMapDecoderMaterial extends ShaderMaterial{_maxDisplayBoost;_hdrCapacityMin;_hdrCapacityMax;constructor({gamma:n,offsetHdr:u,offsetSdr:f,gainMapMin:y,gainMapMax:S,maxDisplayBoost:A,hdrCapacityMin:w,hdrCapacityMax:C,sdr:T,gainMap:R}){super({name:"GainMapDecoderMaterial",vertexShader,fragmentShader,uniforms:{sdr:{value:T},gainMap:{value:R},gamma:{value:new Vector3(1/n[0],1/n[1],1/n[2])},offsetHdr:{value:new Vector3().fromArray(u)},offsetSdr:{value:new Vector3().fromArray(f)},gainMapMin:{value:new Vector3().fromArray(y)},gainMapMax:{value:new Vector3().fromArray(S)},weightFactor:{value:(Math.log2(A)-w)/(C-w)}},blending:NoBlending,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=A,this._hdrCapacityMin=w,this._hdrCapacityMax=C,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(n){this.uniforms.sdr.value=n}get gainMap(){return this.uniforms.gainMap.value}set gainMap(n){this.uniforms.gainMap.value=n}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(n){this.uniforms.offsetHdr.value.fromArray(n)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(n){this.uniforms.offsetSdr.value.fromArray(n)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(n){this.uniforms.gainMapMin.value.fromArray(n)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(n){this.uniforms.gainMapMax.value.fromArray(n)}get gamma(){const n=this.uniforms.gamma.value;return[1/n.x,1/n.y,1/n.z]}set gamma(n){const u=this.uniforms.gamma.value;u.x=1/n[0],u.y=1/n[1],u.z=1/n[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(n){this._hdrCapacityMin=n,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(n){this._hdrCapacityMax=n,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(n){this._maxDisplayBoost=Math.max(1,Math.min(65504,n)),this.calculateWeight()}calculateWeight(){const n=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,n))}}class LoaderBaseWebGL extends LoaderBaseShared{constructor(n,u){super({renderer:n,createMaterial:f=>new GainMapDecoderMaterial(f),createQuadRenderer:f=>new QuadRenderer(f)},u)}async render(n,u,f,y){const{sdrImage:S,gainMapImage:A,needsFlip:w}=await this.processImages(f,y,"flipY"),{gainMap:C,sdr:T}=this.createTextures(S,A,w);this.updateQuadRenderer(n,S,C,T,u),n.render()}}class GainMapLoader extends LoaderBaseWebGL{load([n,u,f],y,S,A){const w=this.prepareQuadRenderer();let C,T,R;const I=async()=>{if(C&&T&&R){try{await this.render(w,R,C,T)}catch(se){this.manager.itemError(n),this.manager.itemError(u),this.manager.itemError(f),typeof A=="function"&&A(se),w.disposeOnDemandRenderer();return}typeof y=="function"&&y(w),this.manager.itemEnd(n),this.manager.itemEnd(u),this.manager.itemEnd(f),w.disposeOnDemandRenderer()}};let N=!0,L=0,F=0,H=!0,z=0,U=0,G=!0,Y=0,K=0;const Z=()=>{if(typeof S=="function"){const se=L+z+Y,ne=F+U+K,ge=N&&H&&G;S(new ProgressEvent("progress",{lengthComputable:ge,loaded:ne,total:se}))}};this.manager.itemStart(n),this.manager.itemStart(u),this.manager.itemStart(f);const J=new FileLoader(this._internalLoadingManager);J.setResponseType("arraybuffer"),J.setRequestHeader(this.requestHeader),J.setPath(this.path),J.setWithCredentials(this.withCredentials),J.load(n,async se=>{if(typeof se=="string")throw new Error("Invalid sdr buffer");C=se,await I()},se=>{N=se.lengthComputable,F=se.loaded,L=se.total,Z()},se=>{this.manager.itemError(n),typeof A=="function"&&A(se)});const te=new FileLoader(this._internalLoadingManager);te.setResponseType("arraybuffer"),te.setRequestHeader(this.requestHeader),te.setPath(this.path),te.setWithCredentials(this.withCredentials),te.load(u,async se=>{if(typeof se=="string")throw new Error("Invalid gainmap buffer");T=se,await I()},se=>{H=se.lengthComputable,U=se.loaded,z=se.total,Z()},se=>{this.manager.itemError(u),typeof A=="function"&&A(se)});const de=new FileLoader(this._internalLoadingManager);return de.setRequestHeader(this.requestHeader),de.setPath(this.path),de.setWithCredentials(this.withCredentials),de.load(f,async se=>{if(typeof se!="string")throw new Error("Invalid metadata string");R=JSON.parse(se),await I()},se=>{G=se.lengthComputable,K=se.loaded,Y=se.total,Z()},se=>{this.manager.itemError(f),typeof A=="function"&&A(se)}),w}}class HDRJPGLoader extends LoaderBaseWebGL{load(n,u,f,y){const S=this.prepareQuadRenderer(),A=new FileLoader(this._internalLoadingManager);return A.setResponseType("arraybuffer"),A.setRequestHeader(this.requestHeader),A.setPath(this.path),A.setWithCredentials(this.withCredentials),this.manager.itemStart(n),A.load(n,async w=>{if(typeof w=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const C=new Uint8Array(w);let T,R,I;try{const N=await extractGainmapFromJPEG(C);T=N.sdr,R=N.gainMap,I=N.metadata}catch(N){if(N instanceof XMPMetadataNotFoundError||N instanceof GainMapNotFoundError)console.warn(`Failure to reconstruct an HDR image from ${n}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),I={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},T=C;else throw N}try{await this.render(S,I,T.buffer,R?.buffer)}catch(N){this.manager.itemError(n),typeof y=="function"&&y(N),S.disposeOnDemandRenderer();return}typeof u=="function"&&u(S),this.manager.itemEnd(n),S.disposeOnDemandRenderer()},f,w=>{this.manager.itemError(n),typeof y=="function"&&y(w)}),S}}const presetsObj={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},CUBEMAP_ROOT="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",isArray=s=>Array.isArray(s),defaultFiles=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function useEnvironment({files:s=defaultFiles,path:n="",preset:u=void 0,colorSpace:f=void 0,extensions:y}={}){u&&(validatePreset(u),s=presetsObj[u],n=CUBEMAP_ROOT);const S=isArray(s),{extension:A,isCubemap:w}=getExtension(s),C=getLoader(A);if(!C)throw new Error("useEnvironment: Unrecognized file extension: "+s);const T=useThree(L=>L.gl);reactExports.useLayoutEffect(()=>{if(A!=="webp"&&A!=="jpg"&&A!=="jpeg")return;function L(){useLoader.clear(C,S?[s]:s)}T.domElement.addEventListener("webglcontextlost",L,{once:!0})},[s,T.domElement]);const R=useLoader(C,S?[s]:s,L=>{(A==="webp"||A==="jpg"||A==="jpeg")&&L.setRenderer(T),L.setPath==null||L.setPath(n),y&&y(L)});let I=S?R[0]:R;if(A==="jpg"||A==="jpeg"||A==="webp"){var N;I=(N=I.renderTarget)==null?void 0:N.texture}return I.mapping=w?CubeReflectionMapping:EquirectangularReflectionMapping,I.colorSpace=f??(w?"srgb":"srgb-linear"),I}const preloadDefaultOptions={files:defaultFiles,path:"",preset:void 0,extensions:void 0};useEnvironment.preload=s=>{const n={...preloadDefaultOptions,...s};let{files:u,path:f=""}=n;const{preset:y,extensions:S}=n;y&&(validatePreset(y),u=presetsObj[y],f=CUBEMAP_ROOT);const{extension:A}=getExtension(u);if(A==="webp"||A==="jpg"||A==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const w=getLoader(A);if(!w)throw new Error("useEnvironment: Unrecognized file extension: "+u);useLoader.preload(w,isArray(u)?[u]:u,C=>{C.setPath==null||C.setPath(f),S&&S(C)})};const clearDefaultOptins={files:defaultFiles,preset:void 0};useEnvironment.clear=s=>{const n={...clearDefaultOptins,...s};let{files:u}=n;const{preset:f}=n;f&&(validatePreset(f),u=presetsObj[f]);const{extension:y}=getExtension(u),S=getLoader(y);if(!S)throw new Error("useEnvironment: Unrecognized file extension: "+u);useLoader.clear(S,isArray(u)?[u]:u)};function validatePreset(s){if(!(s in presetsObj))throw new Error("Preset must be one of: "+Object.keys(presetsObj).join(", "))}function getExtension(s){var n;const u=isArray(s)&&s.length===6,f=isArray(s)&&s.length===3&&s.some(A=>A.endsWith("json")),y=isArray(s)?s[0]:s;return{extension:u?"cube":f?"webp":y.startsWith("data:application/exr")?"exr":y.startsWith("data:application/hdr")?"hdr":y.startsWith("data:image/jpeg")?"jpg":(n=y.split(".").pop())==null||(n=n.split("?"))==null||(n=n.shift())==null?void 0:n.toLowerCase(),isCubemap:u,isGainmap:f}}function getLoader(s){return s==="cube"?CubeTextureLoader:s==="hdr"?RGBELoader:s==="exr"?EXRLoader:s==="jpg"||s==="jpeg"?HDRJPGLoader:s==="webp"?GainMapLoader:null}const isRef=s=>s.current&&s.current.isScene,resolveScene=s=>isRef(s)?s.current:s;function setEnvProps(s,n,u,f,y={}){var S,A,w,C;y={backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...y};const T=resolveScene(n||u),R=T.background,I=T.environment,N={backgroundBlurriness:T.backgroundBlurriness,backgroundIntensity:T.backgroundIntensity,backgroundRotation:(S=(A=T.backgroundRotation)==null||A.clone==null?void 0:A.clone())!==null&&S!==void 0?S:[0,0,0],environmentIntensity:T.environmentIntensity,environmentRotation:(w=(C=T.environmentRotation)==null||C.clone==null?void 0:C.clone())!==null&&w!==void 0?w:[0,0,0]};return s!=="only"&&(T.environment=f),s&&(T.background=f),applyProps(T,y),()=>{s!=="only"&&(T.environment=I),s&&(T.background=R),applyProps(T,N)}}function EnvironmentMap({scene:s,background:n=!1,map:u,...f}){const y=useThree(S=>S.scene);return reactExports.useLayoutEffect(()=>{if(u)return setEnvProps(n,s,y,u,f)}),null}function EnvironmentCube({background:s=!1,scene:n,blur:u,backgroundBlurriness:f,backgroundIntensity:y,backgroundRotation:S,environmentIntensity:A,environmentRotation:w,...C}){const T=useEnvironment(C),R=useThree(I=>I.scene);return reactExports.useLayoutEffect(()=>setEnvProps(s,n,R,T,{backgroundBlurriness:u??f,backgroundIntensity:y,backgroundRotation:S,environmentIntensity:A,environmentRotation:w})),reactExports.useEffect(()=>()=>{T.dispose()},[T]),null}function EnvironmentPortal({children:s,near:n=.1,far:u=1e3,resolution:f=256,frames:y=1,map:S,background:A=!1,blur:w,backgroundBlurriness:C,backgroundIntensity:T,backgroundRotation:R,environmentIntensity:I,environmentRotation:N,scene:L,files:F,path:H,preset:z=void 0,extensions:U}){const G=useThree(de=>de.gl),Y=useThree(de=>de.scene),K=reactExports.useRef(null),[Z]=reactExports.useState(()=>new Scene$1),J=reactExports.useMemo(()=>{const de=new WebGLCubeRenderTarget(f);return de.texture.type=HalfFloatType,de},[f]);reactExports.useEffect(()=>()=>{J.dispose()},[J]),reactExports.useLayoutEffect(()=>{if(y===1){const de=G.autoClear;G.autoClear=!0,K.current.update(G,Z),G.autoClear=de}return setEnvProps(A,L,Y,J.texture,{backgroundBlurriness:w??C,backgroundIntensity:T,backgroundRotation:R,environmentIntensity:I,environmentRotation:N})},[s,Z,J.texture,L,Y,A,y,G]);let te=1;return useFrame(()=>{if(y===1/0||te<y){const de=G.autoClear;G.autoClear=!0,K.current.update(G,Z),G.autoClear=de,te++}}),reactExports.createElement(reactExports.Fragment,null,createPortal(reactExports.createElement(reactExports.Fragment,null,s,reactExports.createElement("cubeCamera",{ref:K,args:[n,u,J]}),F||z?reactExports.createElement(EnvironmentCube,{background:!0,files:F,preset:z,path:H,extensions:U}):S?reactExports.createElement(EnvironmentMap,{background:!0,map:S,extensions:U}):null),Z))}function EnvironmentGround(s){var n,u,f,y;const S=useEnvironment(s),A=s.map||S;reactExports.useMemo(()=>extend({GroundProjectedEnvImpl:GroundProjectedEnv}),[]),reactExports.useEffect(()=>()=>{S.dispose()},[S]);const w=reactExports.useMemo(()=>[A],[A]),C=(n=s.ground)==null?void 0:n.height,T=(u=s.ground)==null?void 0:u.radius,R=(f=(y=s.ground)==null?void 0:y.scale)!==null&&f!==void 0?f:1e3;return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(EnvironmentMap,_extends({},s,{map:A})),reactExports.createElement("groundProjectedEnvImpl",{args:w,scale:R,height:C,radius:T}))}function Environment(s){return s.ground?reactExports.createElement(EnvironmentGround,s):s.map?reactExports.createElement(EnvironmentMap,s):s.children?reactExports.createElement(EnvironmentPortal,s):reactExports.createElement(EnvironmentCube,s)}function calcPosFromAngles(s,n,u=new Vector3){const f=Math.PI*(s-.5),y=2*Math.PI*(n-.5);return u.x=Math.cos(y),u.y=Math.sin(f),u.z=Math.sin(y),u}const Sky=reactExports.forwardRef(({inclination:s=.6,azimuth:n=.1,distance:u=1e3,mieCoefficient:f=.005,mieDirectionalG:y=.8,rayleigh:S=.5,turbidity:A=10,sunPosition:w=calcPosFromAngles(s,n),...C},T)=>{const R=reactExports.useMemo(()=>new Vector3().setScalar(u),[u]),[I]=reactExports.useState(()=>new Sky$1);return reactExports.createElement("primitive",_extends({object:I,ref:T,"material-uniforms-mieCoefficient-value":f,"material-uniforms-mieDirectionalG-value":y,"material-uniforms-rayleigh-value":S,"material-uniforms-sunPosition-value":w,"material-uniforms-turbidity-value":A,scale:R},C))}),DashboardEnvironment=()=>jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("color",{attach:"background",args:["#050a14"]}),jsxRuntimeExports.jsx("fog",{attach:"fog",args:["#050a14",5,15]}),jsxRuntimeExports.jsx("ambientLight",{intensity:.5}),jsxRuntimeExports.jsx(Grid,{position:[0,-1.5,0],args:[20,20],cellSize:1,cellThickness:1,cellColor:"#00f0ff",sectionSize:5,sectionThickness:1.5,sectionColor:"#0077ff",fadeDistance:15,fadeStrength:1,followCamera:!1,infiniteGrid:!0})]}),buildingPositions=[],buildingHeights=[];for(let s=-2;s<=2;s++)for(let n=-2;n<=2;n++)Math.abs(s)<1.5&&Math.abs(n)<1.5||(buildingPositions.push([s*12,0,n*12]),buildingHeights.push(Math.random()*15+10));const CityEnvironment=()=>jsxRuntimeExports.jsxs("group",{children:[jsxRuntimeExports.jsx(Sky,{distance:45e4,sunPosition:[0,1,0],inclination:0,azimuth:.25,turbidity:5,rayleigh:1.2}),jsxRuntimeExports.jsx("ambientLight",{intensity:.4}),jsxRuntimeExports.jsx("directionalLight",{position:[10,20,5],intensity:1.5,castShadow:!0}),jsxRuntimeExports.jsx("fog",{attach:"fog",args:["#a0b4c8",10,80]}),jsxRuntimeExports.jsx(Environment,{preset:"city"}),jsxRuntimeExports.jsx(Plane,{args:[100,100],rotation:[-Math.PI/2,0,0],position:[0,-1.5,0],receiveShadow:!0,children:jsxRuntimeExports.jsx("meshStandardMaterial",{color:"#2d3436",roughness:.8,metalness:.1})}),jsxRuntimeExports.jsx(Box,{args:[32,.2,32],position:[0,-1.4,0],receiveShadow:!0,children:jsxRuntimeExports.jsx("meshStandardMaterial",{color:"#636e72",roughness:.9})}),jsxRuntimeExports.jsx("group",{position:[0,-1.5,0],children:buildingPositions.map((s,n)=>{const u=buildingHeights[n];return jsxRuntimeExports.jsx(Box,{args:[8,u,8],position:[s[0],u/2,s[2]],castShadow:!0,receiveShadow:!0,children:jsxRuntimeExports.jsx("meshStandardMaterial",{color:"#dfe6e9",roughness:.7,metalness:.3,envMapIntensity:.8})},n)})})]}),Cursor=()=>{const s=reactExports.useRef(null),n=reactExports.useRef(null),{viewport:u}=useThree(),f={uniforms:{color:{value:new Color("#00f0ff")},progress:{value:1}},vertexShader:`
        varying vec2 vUv;
        void main() {
            vUv = uv;
            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
        }
    `,fragmentShader:`
        uniform vec3 color;
        uniform float progress;
        varying vec2 vUv;
        
        #define PI 3.14159265359
        
        void main() {
            vec2 center = vec2(0.5, 0.5);
            vec2 toPixel = vUv - center;
            float angle = atan(toPixel.y, toPixel.x) + PI; // 0 to 2PI
            float normalizedAngle = angle / (2.0 * PI);
            
            // We want 360 -> 0. So if normalizedAngle < progress, show.
            // 0 is usually Right.
            
            if (normalizedAngle > progress) discard;
            
            float dist = length(toPixel);
            if (dist < 0.3 || dist > 0.5) discard; // Ring thickness
            
            gl_FragColor = vec4(color, 1.0);
        }
    `};return useFrame(()=>{const{hands:y,face:S,lastHandActivity:A,dwellProgress:w,trackingMode:C,tvCursor:T}=useStore$1.getState(),R=y.left.present?y.left:y.right,N=Date.now()-A<5e3;if(n.current&&(!N&&S.present&&w>0?(n.current.visible=!0,n.current.material.uniforms.progress.value=1-w):n.current.visible=!1),s.current)if(C==="TV"){const L=(T.x*2-1)*15,F=-(T.y*2-1)*8;s.current.position.set(L,F,0),s.current.scale.setScalar(1.5),s.current.visible=!0}else if(C==="EYE"&&N&&R.present){const L=-(R.x-.5)*u.width,F=-(R.y-.5)*u.height;s.current.position.x=MathUtils.lerp(s.current.position.x,L,.2),s.current.position.y=MathUtils.lerp(s.current.position.y,F,.2),s.current.visible=!0;const H=R.gesture==="PINCH"?.5:1;s.current.scale.setScalar(MathUtils.lerp(s.current.scale.x,H,.2))}else if(!N&&S.present){const F=-(S.x-.5)*u.width*2.5,H=-(S.y-.5)*u.height*2.5;s.current.position.x=MathUtils.lerp(s.current.position.x,F,.1),s.current.position.y=MathUtils.lerp(s.current.position.y,H,.1),s.current.visible=!0,s.current.scale.setScalar(MathUtils.lerp(s.current.scale.x,1.5,.1))}else s.current.visible=!1}),jsxRuntimeExports.jsxs("group",{ref:s,children:[jsxRuntimeExports.jsxs("mesh",{children:[jsxRuntimeExports.jsx("ringGeometry",{args:[.2,.25,32]}),jsxRuntimeExports.jsx("meshBasicMaterial",{color:"#00f0ff",transparent:!0,opacity:.8})]}),jsxRuntimeExports.jsxs("mesh",{ref:n,visible:!1,children:[jsxRuntimeExports.jsx("planeGeometry",{args:[.8,.8]}),jsxRuntimeExports.jsx("shaderMaterial",{args:[f],transparent:!0})]}),jsxRuntimeExports.jsxs("mesh",{children:[jsxRuntimeExports.jsx("circleGeometry",{args:[.08,32]}),jsxRuntimeExports.jsx("meshBasicMaterial",{color:"#ffffff"})]}),jsxRuntimeExports.jsx("pointLight",{color:"#00f0ff",intensity:2,distance:3,decay:2})]})};class SoundManager{ctx=null;masterGain=null;constructor(){try{this.ctx=new(window.AudioContext||window.webkitAudioContext),this.masterGain=this.ctx.createGain(),this.masterGain.gain.value=.3,this.masterGain.connect(this.ctx.destination)}catch{console.error("AudioContext not supported")}}playTone(n,u,f,y=!0){if(!this.ctx||!this.masterGain)return;this.ctx.state==="suspended"&&this.ctx.resume();const S=this.ctx.createOscillator(),A=this.ctx.createGain();S.type=u,S.frequency.setValueAtTime(n,this.ctx.currentTime),A.connect(this.masterGain),S.connect(A),S.start(),y&&(A.gain.setValueAtTime(1,this.ctx.currentTime),A.gain.exponentialRampToValueAtTime(.001,this.ctx.currentTime+f)),S.stop(this.ctx.currentTime+f)}playHover(){this.playTone(800,"sine",.1),this.playTone(1200,"sine",.05)}playClick(){this.playTone(400,"square",.1),this.playTone(600,"sine",.2)}playActivate(){if(!this.ctx||!this.masterGain)return;const n=this.ctx.createOscillator(),u=this.ctx.createGain();n.connect(u),u.connect(this.masterGain),n.frequency.setValueAtTime(200,this.ctx.currentTime),n.frequency.linearRampToValueAtTime(800,this.ctx.currentTime+.3),u.gain.setValueAtTime(0,this.ctx.currentTime),u.gain.linearRampToValueAtTime(1,this.ctx.currentTime+.1),u.gain.linearRampToValueAtTime(0,this.ctx.currentTime+.3),n.start(),n.stop(this.ctx.currentTime+.3)}}const playSound=new SoundManager,InteractiveBox=({position:s,color:n="#00f0ff",label:u})=>{const f=reactExports.useRef(null),y=reactExports.useRef(null),[S,A]=reactExports.useState(!1),w=reactExports.useRef(0),{selectedObject:C,setSelected:T,setHovered:R}=useStore$1(),I=C===(u||"Unknown");useFrame(L=>{if(!f.current)return;const{hands:F,face:H,trackingMode:z}=useStore$1.getState();if(z!=="MOUSE"){const G=F.left.present?F.left:F.right;let Y=!1,K=0,Z=0,J=!1;const te=L.viewport;if(z==="HAND"&&G.present?(K=-(G.x-.5)*te.width,Z=-(G.y-.5)*te.height,J=!0):z==="EYE"&&H.present&&(K=-(H.x-.5)*te.width*2.5,Z=-(H.y-.5)*te.height*2.5,J=!0),J){const de=K-s[0],se=Z-s[1];if(Y=Math.sqrt(de*de+se*se)<.6,S!==Y&&(A(Y),R(Y?u||"Box":null),Y&&playSound.playHover(),Y||useStore$1.getState().setDwellProgress(0)),z==="HAND")Y&&G.gesture==="PINCH"&&(I||(playSound.playClick(),T(u||"Unknown"),u&&__vitePreload(async()=>{const{speak:ge}=await import("./voice-DdwQ7eeA.js");return{speak:ge}},[]).then(({speak:ge})=>ge(`You selected: ${u}`)))),w.current=0;else if(Y&&!I){w.current+=1/60;const ge=Math.min(w.current/1,1);useStore$1.getState().setDwellProgress(ge),ge>=1&&(playSound.playClick(),T(u||"Unknown"),u&&__vitePreload(async()=>{const{speak:Ee}=await import("./voice-DdwQ7eeA.js");return{speak:Ee}},[]).then(({speak:Ee})=>Ee(`You selected: ${u}`)),w.current=0,useStore$1.getState().setDwellProgress(0))}else w.current=0}else S&&(A(!1),R(null),useStore$1.getState().setDwellProgress(0),w.current=0)}const U=L.clock.getElapsedTime();if(f.current){f.current.rotation.x+=I?.02:.01,f.current.rotation.y+=I?.02:0;const G=S?1.2:I?1.1:1;f.current.scale.setScalar(MathUtils.lerp(f.current.scale.x,G,.1))}if(y.current)if(I){const G=Math.sin(U*3)*.2+.6;y.current.opacity=G,y.current.wireframe=!1,y.current.emissive.set(n),y.current.emissiveIntensity=Math.sin(U*3)*.5+.5}else y.current.opacity=.8,y.current.wireframe=!S,y.current.emissive.set("#000000"),y.current.emissiveIntensity=0});const N=()=>{const{trackingMode:L}=useStore$1.getState();L==="MOUSE"&&(I||(playSound.playClick(),T(u||"Unknown"),u&&__vitePreload(async()=>{const{speak:F}=await import("./voice-DdwQ7eeA.js");return{speak:F}},[]).then(({speak:F})=>F(`You selected: ${u}`))))};return jsxRuntimeExports.jsxs("group",{position:s,children:[jsxRuntimeExports.jsxs("mesh",{ref:f,onClick:N,onPointerOver:()=>{const{trackingMode:L}=useStore$1.getState();L==="MOUSE"&&(A(!0),R(u||"Box"),playSound.playHover())},onPointerOut:()=>{const{trackingMode:L}=useStore$1.getState();L==="MOUSE"&&(A(!1),R(null))},children:[jsxRuntimeExports.jsx("boxGeometry",{args:[1,1,1]}),jsxRuntimeExports.jsx("meshStandardMaterial",{ref:y,color:n,transparent:!0,opacity:.8})]}),u&&jsxRuntimeExports.jsx(Text,{position:[0,-.8,0],fontSize:.2,color:I?"#ffffff":n,anchorX:"center",anchorY:"middle",children:u.toUpperCase()})]})},HologramPanel=({position:s,rotation:n=[0,0,0],title:u,content:f="NO DATA"})=>{const y=reactExports.useRef(null),S=reactExports.useRef(null),A=reactExports.useMemo(()=>new Array(10).fill(0).map(()=>Math.random()),[]);return useFrame(w=>{y.current&&(y.current.position.y=s[1]+Math.sin(w.clock.elapsedTime*.5)*.05)}),jsxRuntimeExports.jsxs("group",{ref:y,position:s,rotation:n,children:[jsxRuntimeExports.jsxs("mesh",{ref:S,children:[jsxRuntimeExports.jsx("planeGeometry",{args:[2,1.2]}),jsxRuntimeExports.jsx("meshPhongMaterial",{color:"#001a33",transparent:!0,opacity:.6,side:DoubleSide,shininess:100})]}),jsxRuntimeExports.jsxs("mesh",{position:[0,0,.01],children:[jsxRuntimeExports.jsx("boxGeometry",{args:[2.05,1.25,.01]}),jsxRuntimeExports.jsx("meshBasicMaterial",{color:"#00f0ff",wireframe:!0,transparent:!0,opacity:.3})]}),jsxRuntimeExports.jsxs("group",{position:[-.9,.5,.05],children:[jsxRuntimeExports.jsx(Text,{fontSize:.1,color:"#00f0ff",anchorX:"left",anchorY:"top",children:u}),jsxRuntimeExports.jsx("group",{position:[0,-.3,0],children:A.map((w,C)=>jsxRuntimeExports.jsxs("mesh",{position:[C*.18,0,0],children:[jsxRuntimeExports.jsx("planeGeometry",{args:[.1,w*.5]}),jsxRuntimeExports.jsx("meshBasicMaterial",{color:"#0077ff",transparent:!0,opacity:.8})]},C))}),jsxRuntimeExports.jsx(Text,{position:[0,-.8,0],fontSize:.05,color:"#ffffff",anchorX:"left",anchorY:"top",maxWidth:1.8,children:f})]})]})},VideoPanel=({position:s,rotation:n=[0,0,0],scale:u=[1,1,1],videoId:f})=>{const y=reactExports.useRef(null),A=useStore$1(w=>w.selectedObject)==="Security";return reactExports.useEffect(()=>{if(y.current&&y.current.contentWindow){const w=A?"playVideo":"pauseVideo";y.current.contentWindow.postMessage(JSON.stringify({event:"command",func:w,args:[]}),"*")}},[A]),jsxRuntimeExports.jsxs("group",{position:s,rotation:n,scale:u,children:[jsxRuntimeExports.jsxs("mesh",{position:[0,0,-.05],children:[jsxRuntimeExports.jsx("planeGeometry",{args:[4.2,2.4]}),jsxRuntimeExports.jsx("meshBasicMaterial",{color:"#000000"})]}),jsxRuntimeExports.jsxs("mesh",{position:[0,0,-.04],children:[jsxRuntimeExports.jsx("boxGeometry",{args:[4.3,2.5,.05]}),jsxRuntimeExports.jsx("meshBasicMaterial",{color:"#00f0ff",wireframe:!0})]}),jsxRuntimeExports.jsx(Html,{transform:!0,occlude:!0,position:[0,0,0],style:{width:"800px",height:"450px",background:"#000",border:"2px solid #00f0ff",borderRadius:"10px"},children:jsxRuntimeExports.jsx("iframe",{ref:y,width:"800",height:"450",src:`https://www.youtube.com/embed/${f}?enablejsapi=1&autoplay=0&controls=0&mute=0&loop=1&playlist=${f}`,title:"Jarvis Video",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,style:{pointerEvents:"none"}})})]})},WebPanel=({position:s,rotation:n=[0,0,0],scale:u=[1,1,1],url:f,title:y})=>{const[S,A]=reactExports.useState(!1);return jsxRuntimeExports.jsxs("group",{position:s,rotation:n,scale:u,children:[jsxRuntimeExports.jsxs("mesh",{position:[0,0,-.05],children:[jsxRuntimeExports.jsx("planeGeometry",{args:[4.2,2.4]}),jsxRuntimeExports.jsx("meshBasicMaterial",{color:"#000000",opacity:.8,transparent:!0})]}),jsxRuntimeExports.jsxs("mesh",{position:[0,0,-.04],children:[jsxRuntimeExports.jsx("boxGeometry",{args:[4.3,2.5,.05]}),jsxRuntimeExports.jsx("meshBasicMaterial",{color:S?"#00ff00":"#ffffff",wireframe:!0})]}),y&&jsxRuntimeExports.jsx(Html,{position:[0,1.4,0],transform:!0,center:!0,children:jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("div",{className:"text-white font-mono text-sm bg-black/80 px-2 py-1 border border-white/20",children:y}),S&&jsxRuntimeExports.jsx("button",{onClick:w=>{w.stopPropagation(),A(!1)},className:"text-black font-bold text-xs bg-white px-2 py-1 hover:bg-gray-200",children:"EXIT INTERACTION"})]})}),jsxRuntimeExports.jsx(Html,{transform:!0,occlude:!0,position:[0,0,0],style:{width:"800px",height:"450px",background:"#000",border:S?"2px solid #00ff00":"1px solid #ffffff",borderRadius:"4px"},children:jsxRuntimeExports.jsxs("div",{onPointerDown:w=>w.stopPropagation(),style:{width:"100%",height:"100%",position:"relative"},children:[!S&&jsxRuntimeExports.jsx("div",{onClick:()=>A(!0),style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:10,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.5)"},children:jsxRuntimeExports.jsx("span",{style:{color:"white",border:"1px solid white",padding:"10px 20px",background:"black"},children:"CLICK TO INTERACT"})}),jsxRuntimeExports.jsx("iframe",{width:"800",height:"450",src:f,title:y||"Web Panel",frameBorder:"0",style:{width:"100%",height:"100%",pointerEvents:S?"auto":"none",background:"#fff"}})]})})]})},TrackingToggle=()=>{const s=reactExports.useRef(null),n=reactExports.useRef(null),[u,f]=reactExports.useState(!1),y=reactExports.useRef(0),{trackingMode:S,setTrackingMode:A,hands:w,face:C}=useStore$1(),T=[-3,0,0],R=()=>{playSound.playClick(),A(S==="EYE"?"HAND":S==="HAND"?"MOUSE":"EYE")};return useFrame(I=>{if(!s.current)return;if(S!=="MOUSE"){const F=w.left.present?w.left:w.right,H=I.viewport;let z=!1,U=!1,G=0,Y=0;if(S==="HAND"&&F.present?(G=-(F.x-.5)*H.width,Y=-(F.y-.5)*H.height,U=!0):S==="EYE"&&C.present&&(G=-(C.x-.5)*H.width*2.5,Y=-(C.y-.5)*H.height*2.5,U=!0),U){const K=G-T[0],Z=Y-T[1];z=Math.sqrt(K*K+Z*Z)<.6,u!==z&&(f(z),z&&playSound.playHover(),z||(y.current=0)),z?(S==="HAND"&&F.gesture==="PINCH"?y.current+=1/30:y.current+=1/60,y.current>1&&(R(),y.current=0,f(!1))):y.current=0}else u&&f(!1),y.current=0}s.current.rotation.x+=.01,s.current.rotation.y+=.01;const N=u?1.2:1;s.current.scale.setScalar(MathUtils.lerp(s.current.scale.x,N,.1));const L=S==="EYE"?"#00ff00":S==="HAND"?"#ffaa00":"#888888";n.current&&(n.current.color.set(L),n.current.emissive.set(L),n.current.emissiveIntensity=u?.5:.2,n.current.wireframe=!u)}),jsxRuntimeExports.jsxs("group",{position:T,children:[jsxRuntimeExports.jsxs("mesh",{ref:s,onClick:R,onPointerOver:()=>{f(!0),playSound.playHover()},onPointerOut:()=>{f(!1),y.current=0},children:[jsxRuntimeExports.jsx("octahedronGeometry",{args:[.7,0]}),jsxRuntimeExports.jsx("meshStandardMaterial",{ref:n,transparent:!0,opacity:.8})]}),jsxRuntimeExports.jsx(Text,{position:[0,-1,0],fontSize:.15,color:"#ffffff",anchorX:"center",anchorY:"middle",children:`TRACKING: ${S}`})]})},useHandRaycaster=()=>{const s=useThree(u=>u.raycaster),n=useThree(u=>u.camera);useFrame(()=>{const{hands:u,face:f,trackingMode:y,tvCursor:S}=useStore$1.getState();if(y==="HAND"){const A=u.left.present?u.left:u.right;if(A.present){const w=-(A.x*2-1),C=-(A.y*2-1);s.setFromCamera(new Vector2(w,C),n)}}else if(y==="EYE"){if(f.present){const A=-f.rotationY*3,w=f.rotationX*3-.5;s.setFromCamera(new Vector2(A,w),n)}}else if(y==="TV"){const A=S.x*2-1,w=-(S.y*2)+1;s.setFromCamera(new Vector2(A,w),n)}})},lerpTheta=(s,n,u)=>{const y=(n-s+Math.PI)%(2*Math.PI)-Math.PI;return s+y*u},CameraController=()=>{const{camera:s}=useThree(),{hands:n,hoveredObject:u,clampSensibility:f}=useStore$1(),y=reactExports.useRef(new Vector3(0,0,0)),S=reactExports.useRef(null),A=reactExports.useRef(null),w=reactExports.useRef({radius:5,theta:0,y:1.8}),C=reactExports.useRef({thetaVelocity:0,panVelocity:new Vector3(0,0,0),yVelocity:0,damping:.95}),T=reactExports.useRef({spaceHeld:!1,shiftHeld:!1,isGrounded:!0}),R=reactExports.useRef({target:new Vector3(0,0,0),radius:5,theta:0,camY:0}),I=reactExports.useRef(!1),N=reactExports.useRef([]),L=reactExports.useRef([]);return reactExports.useEffect(()=>{const F=z=>{const{hoveredObject:U,trackingMode:G}=useStore$1.getState();if(U||G==="TV")return;if(useStore$1.getState().setCameraGoal(null),z.key===" "||z.code==="Space"){T.current.spaceHeld=!0;const{gravity:te}=useStore$1.getState();te>0&&T.current.isGrounded&&(useStore$1.getState().setCameraGoal(null),C.current.yVelocity=.15,T.current.isGrounded=!1)}z.key==="Shift"&&(T.current.shiftHeld=!0);const Y=.5,K=R.current.theta,Z=new Vector3(-Math.sin(K),0,-Math.cos(K)),J=new Vector3(Math.cos(K),0,-Math.sin(K));(z.key==="ArrowUp"||z.key==="w")&&y.current.add(Z.multiplyScalar(Y)),(z.key==="ArrowDown"||z.key==="s")&&y.current.add(Z.multiplyScalar(-Y)),(z.key==="ArrowLeft"||z.key==="a")&&y.current.add(J.multiplyScalar(-Y)),(z.key==="ArrowRight"||z.key==="d")&&y.current.add(J.multiplyScalar(Y)),(z.key==="ChannelUp"||z.key==="PageUp")&&y.current.add(Z.multiplyScalar(Y*2)),(z.key==="ChannelDown"||z.key==="PageDown")&&y.current.add(Z.multiplyScalar(-Y*2))},H=z=>{(z.key===" "||z.code==="Space")&&(T.current.spaceHeld=!1),z.key==="Shift"&&(T.current.shiftHeld=!1)};return window.addEventListener("keydown",F),window.addEventListener("keyup",H),()=>{window.removeEventListener("keydown",F),window.removeEventListener("keyup",H)}},[]),reactExports.useEffect(()=>{let F=!1,H=0,z=0,U=0,G=0;const Y=se=>{se.button===0&&(useStore$1.getState().setCameraGoal(null),F=!0,H=se.clientX,z=se.clientY,U=w.current.theta,G=w.current.y)},K=se=>{if(!F)return;const ne=(se.clientX-H)*-.005,ge=(se.clientY-z)*.02;w.current.theta=U+ne;let Ee=G+ge;Ee=Math.max(-1,Math.min(8,Ee)),w.current.y=Ee},Z=()=>{F=!1},J=se=>{if(useStore$1.getState().setCameraGoal(null),se.touches.length===1){const ne=se.touches[0];ne.clientX<200&&ne.clientY>window.innerHeight-200||(F=!0,H=ne.clientX,z=ne.clientY,U=w.current.theta,G=w.current.y)}},te=se=>{if(!F||se.touches.length!==1)return;const ne=se.touches[0],ge=(ne.clientX-H)*-.005,Ee=(ne.clientY-z)*.02;w.current.theta=U+ge;let we=G+Ee;we=Math.max(-1,Math.min(8,we)),w.current.y=we},de=()=>{F=!1};return window.addEventListener("mousedown",Y),window.addEventListener("mousemove",K),window.addEventListener("mouseup",Z),window.addEventListener("touchstart",J),window.addEventListener("touchmove",te),window.addEventListener("touchend",de),()=>{window.removeEventListener("mousedown",Y),window.removeEventListener("mousemove",K),window.removeEventListener("mouseup",Z),window.removeEventListener("touchstart",J),window.removeEventListener("touchmove",te),window.removeEventListener("touchend",de)}},[]),useFrame(({clock:F})=>{I.current||(R.current.target.copy(y.current),R.current.radius=w.current.radius,R.current.theta=w.current.theta,R.current.camY=s.position.y,I.current=!0);const{cameraGoal:H,gravity:z,minHeight:U}=useStore$1.getState();if(!(H!==null&&H.camY!==void 0))if(z===0)T.current.spaceHeld&&(w.current.y+=.05),T.current.shiftHeld&&(w.current.y=Math.max(U,w.current.y-.05));else{const ne=.008*z;C.current.yVelocity-=ne,w.current.y+=C.current.yVelocity,w.current.y<=U?(w.current.y=U,C.current.yVelocity=0,T.current.isGrounded=!0):T.current.isGrounded=!1}if(H){const ge=new Vector3(H.target.x,H.target.y,H.target.z);y.current.lerp(ge,.04),w.current.radius=MathUtils.lerp(w.current.radius,H.radius,.04),w.current.theta=lerpTheta(w.current.theta,H.theta,.04),H.camY!==void 0&&(w.current.y=MathUtils.lerp(w.current.y,H.camY,.04),C.current.yVelocity=0)}const{joystickInput:Y}=useStore$1.getState();if(Math.abs(Y.x)>.1||Math.abs(Y.y)>.1){const ge=R.current.theta,Ee=new Vector3(-Math.sin(ge),0,-Math.cos(ge)),we=new Vector3(Math.cos(ge),0,-Math.sin(ge));Y.y!==0&&y.current.add(Ee.multiplyScalar(Y.y*.1)),Y.x!==0&&y.current.add(we.multiplyScalar(Y.x*.1))}const{tvOrbitInput:K}=useStore$1.getState();if(Math.abs(K.dx)>.01||Math.abs(K.dy)>.01){const ne=.05*f,ge=.1*f;w.current.theta+=K.dx*ne;let Ee=w.current.y+K.dy*-ge;const{minHeight:we}=useStore$1.getState();Ee=Math.max(we,Math.min(8,Ee)),w.current.y=Ee}const Z=F.getElapsedTime(),J=n.right,te=n.left;if(!u){if(J.present&&J.gesture==="PINCH")if(C.current.panVelocity.set(0,0,0),!S.current)S.current={z:J.z,scale:J.scale,x:J.x,y:J.y,target:y.current.clone()},L.current=[{val:y.current.clone(),time:Z}];else{const ne=J.x-S.current.x,ge=J.y-S.current.y,Ee=20*f,we=R.current.theta,Ie=new Vector3(-Math.sin(we),0,-Math.cos(we)),Me=new Vector3(Math.cos(we),0,-Math.sin(we)).clone().multiplyScalar(ne*Ee),Re=Ie.clone().multiplyScalar(ge*Ee),Te=new Vector3().add(Me).add(Re);y.current.copy(S.current.target).add(Te),L.current.push({val:y.current.clone(),time:Z}),L.current.length>5&&L.current.shift()}else{if(S.current){if(L.current.length>=2){const ne=L.current[L.current.length-1],ge=L.current[0],Ee=ne.time-ge.time,we=ne.val.clone().sub(ge.val);if(Ee>.01){const Ie=we.divideScalar(L.current.length-1);C.current.panVelocity.copy(Ie).multiplyScalar(1.5)}}S.current=null,L.current=[]}C.current.panVelocity.lengthSq()>1e-6?(y.current.add(C.current.panVelocity),C.current.panVelocity.multiplyScalar(C.current.damping)):C.current.panVelocity.set(0,0,0)}if(te.present&&te.gesture==="PINCH")if(C.current.thetaVelocity=0,A.current){const ne=te.x-A.current.x,ge=5*f,Ee=A.current.angle+ne*ge;w.current.theta=Ee,N.current.push({val:Ee,time:Z}),N.current.length>5&&N.current.shift();const we=te.y-A.current.y,Ie=10*f;let Be=A.current.camY+we*Ie;const{minHeight:Me}=useStore$1.getState();Be=Math.max(Me,Math.min(8,Be)),w.current.y=Be}else{const ne=s.position.x-y.current.x,ge=s.position.z-y.current.z,Ee=Math.atan2(ne,ge);A.current={x:te.x,y:te.y,angle:Ee,camY:s.position.y},N.current=[{val:Ee,time:Z}]}else{if(A.current){if(N.current.length>=2){const ne=N.current[N.current.length-1],ge=N.current[0],Ee=ne.time-ge.time,we=ne.val-ge.val;if(Ee>.01){const Ie=we/(N.current.length-1);C.current.thetaVelocity=Ie*1.5}}A.current=null,N.current=[]}Math.abs(C.current.thetaVelocity)>1e-4?(w.current.theta+=C.current.thetaVelocity,C.current.thetaVelocity*=C.current.damping):C.current.thetaVelocity=0}}const de=.1;R.current.target.lerp(y.current,de),R.current.radius=MathUtils.lerp(R.current.radius,w.current.radius,de),R.current.theta=lerpTheta(R.current.theta,w.current.theta,de),R.current.camY=MathUtils.lerp(R.current.camY,w.current.y,de);const se=R.current;s.position.x=se.target.x+se.radius*Math.sin(se.theta),s.position.z=se.target.z+se.radius*Math.cos(se.theta),s.position.y=se.camY,s.lookAt(se.target),useStore$1.getState().setDebugCameraState({position:{x:s.position.x,y:s.position.y,z:s.position.z},lookAt:{x:se.target.x,y:se.target.y,z:se.target.z}})}),null},ChessAssistant=s=>{const n=reactExports.useRef(null),u=reactExports.useMemo(()=>new MeshStandardMaterial({color:15790320,roughness:.3,metalness:.4,emissive:new Color("#00f0ff"),emissiveIntensity:.5}),[]);useFrame(y=>{n.current&&(n.current.position.y=s.position[1]+Math.sin(y.clock.elapsedTime*1.5)*.1,n.current.rotation.y+=.005,u.emissiveIntensity=.6+Math.sin(y.clock.elapsedTime*4)*.5)});const f=()=>{const y=[new Vector2(.35,0),new Vector2(.3,.05),new Vector2(.25,.2),new Vector2(.22,.4),new Vector2(.3,.45),new Vector2(0,.45)],S=new Shape;S.moveTo(.2,0),S.lineTo(.25,.4),S.quadraticCurveTo(.25,.6,.1,.8),S.lineTo(.05,.9),S.lineTo(0,.9),S.lineTo(-.05,.8),S.quadraticCurveTo(-.35,.75,-.4,.5),S.lineTo(-.3,.45),S.quadraticCurveTo(-.1,.4,-.2,0),S.closePath();const A={steps:1,depth:.25,bevelEnabled:!0,bevelThickness:.05,bevelSize:.05,bevelOffset:0,bevelSegments:3};return jsxRuntimeExports.jsxs("group",{scale:[4,4,4],children:[" ",jsxRuntimeExports.jsxs("group",{children:[jsxRuntimeExports.jsx("mesh",{position:[0,.05,0],material:u,children:jsxRuntimeExports.jsx("cylinderGeometry",{args:[.4,.45,.1,32]})}),jsxRuntimeExports.jsx("mesh",{position:[0,.1,0],material:u,children:jsxRuntimeExports.jsx("latheGeometry",{args:[y,32]})})]}),jsxRuntimeExports.jsx("group",{position:[0,.55,0],rotation:[0,-Math.PI/2,0],children:jsxRuntimeExports.jsx("mesh",{position:[.075,0,-.125],material:u,children:jsxRuntimeExports.jsx("extrudeGeometry",{args:[S,A]})})})]})};return jsxRuntimeExports.jsxs("group",{ref:n,position:s.position,rotation:s.rotation,children:[f(),jsxRuntimeExports.jsxs("mesh",{position:[0,4.5,0],children:[jsxRuntimeExports.jsx("planeGeometry",{args:[3,.8]}),jsxRuntimeExports.jsx("meshBasicMaterial",{color:"black",transparent:!0,opacity:.6})]})]})},AnimeAssistant=({position:s=[9.5,0,0],rotation:n=[0,-.35,0],scale:u=.4})=>{const f=reactExports.useRef(null),y=reactExports.useRef(null),S=reactExports.useRef(null),A=reactExports.useRef(null),w=reactExports.useRef(null),C=reactExports.useRef(null),T=reactExports.useRef(null),R=reactExports.useRef(null),I=reactExports.useRef(null),N=reactExports.useRef(null),L=reactExports.useRef(null),F=reactExports.useRef(0),H=reactExports.useRef(!1);useFrame((se,ne)=>{const ge=se.clock.getElapsedTime();if(f.current&&(f.current.position.y=s[1]+Math.sin(ge*1.4)*.09*u,f.current.rotation.z=Math.sin(ge*.55)*.018),y.current&&(y.current.rotation.x=Math.sin(ge*.7)*.035,y.current.rotation.y=Math.sin(ge*1.15)*.07),S.current&&(S.current.rotation.z=Math.sin(ge*3.2)*.22-.35,S.current.rotation.x=Math.sin(ge*2.1)*.12),A.current&&(A.current.rotation.z=-Math.sin(ge*3.2)*.22+.35,A.current.rotation.x=Math.sin(ge*1.9)*.11),T.current){const Ie=1+Math.sin(ge*2.8)*.028;T.current.scale.setScalar(Ie)}const Ee=Math.sin(ge*5.2)*.011,we=Math.sin(ge*2.8)*.019;if(N.current&&(N.current.scale.setScalar(1+Ee+we*.7),N.current.position.z=.42+Math.abs(Math.sin(ge*4.1))*.006),L.current&&(L.current.scale.setScalar(1+Ee*.95+we*.7),L.current.position.z=.42+Math.abs(Math.sin(ge*4.6))*.006),R.current&&(R.current.rotation.y=Math.sin(ge*1.8)*.045),F.current+=ne,F.current>3.5+Math.random()*2.5&&!H.current&&(H.current=!0,F.current=0),H.current){const Ie=Math.sin(F.current*28)*.5+.5;w.current&&(w.current.scale.y=Math.max(.05,Ie)),C.current&&(C.current.scale.y=Math.max(.05,Ie)),Ie<.15&&(H.current=!1,F.current=0)}else w.current&&(w.current.scale.y=1),C.current&&(C.current.scale.y=1)});const z=jsxRuntimeExports.jsx("meshStandardMaterial",{color:"#ffe4d1",emissive:"#ffbb99",emissiveIntensity:.18,roughness:.65,metalness:.1}),U=jsxRuntimeExports.jsx("meshStandardMaterial",{color:"#f9e07c",emissive:"#ffe633",emissiveIntensity:.55,roughness:.35,metalness:.25}),G=jsxRuntimeExports.jsx("meshStandardMaterial",{color:"#1a0022",emissive:"#aa22ff",emissiveIntensity:.82,roughness:.12,metalness:.88,transparent:!0,opacity:.93}),Y=jsxRuntimeExports.jsx("meshStandardMaterial",{color:"#0f0018",emissive:"#cc44ff",emissiveIntensity:.6,roughness:.2,metalness:.7,side:DoubleSide}),K=jsxRuntimeExports.jsx("meshStandardMaterial",{color:"#ffffff",emissive:"#bbddff",emissiveIntensity:.4}),Z=jsxRuntimeExports.jsx("meshStandardMaterial",{color:"#3b8cff",emissive:"#66ccff",emissiveIntensity:.7}),J=jsxRuntimeExports.jsx("meshStandardMaterial",{color:"#111111"}),te=jsxRuntimeExports.jsx("meshStandardMaterial",{color:"#ff4488",emissive:"#ff2266",emissiveIntensity:.3}),de=jsxRuntimeExports.jsx("meshBasicMaterial",{color:"#bb44ff",transparent:!0,opacity:.25,side:DoubleSide});return jsxRuntimeExports.jsxs("group",{ref:f,position:s,rotation:n,scale:u,children:[jsxRuntimeExports.jsxs("mesh",{position:[0,.05,0],rotation:[-Math.PI*.5,0,0],children:[jsxRuntimeExports.jsx("ringGeometry",{args:[1.8,2.4,48]}),de]}),jsxRuntimeExports.jsxs("group",{position:[-.35,1.75,0],children:[jsxRuntimeExports.jsxs("mesh",{position:[0,-.65,0],rotation:[.12,0,.18],children:[jsxRuntimeExports.jsx("capsuleGeometry",{args:[.24,1.35,8,24]}),z]}),jsxRuntimeExports.jsxs("mesh",{position:[0,-1.35,0],rotation:[.12,0,.18],children:[jsxRuntimeExports.jsx("cylinderGeometry",{args:[.245,.24,.35,24]}),jsxRuntimeExports.jsx("meshStandardMaterial",{color:"#220022",emissive:"#9900cc",emissiveIntensity:.6})]}),jsxRuntimeExports.jsxs("mesh",{position:[0,-2.1,0],children:[jsxRuntimeExports.jsx("capsuleGeometry",{args:[.16,1.4,8,20]}),z]}),jsxRuntimeExports.jsxs("mesh",{position:[.08,-3.05,.15],rotation:[.6,0,0],children:[jsxRuntimeExports.jsx("boxGeometry",{args:[.22,.18,.55]}),jsxRuntimeExports.jsx("meshStandardMaterial",{color:"#110011",emissive:"#5500aa",emissiveIntensity:.7})]})]}),jsxRuntimeExports.jsxs("group",{position:[.35,1.75,0],children:[jsxRuntimeExports.jsxs("mesh",{position:[0,-.65,0],rotation:[.12,0,-.18],children:[jsxRuntimeExports.jsx("capsuleGeometry",{args:[.24,1.35,8,24]}),z]}),jsxRuntimeExports.jsxs("mesh",{position:[0,-1.35,0],rotation:[.12,0,-.18],children:[jsxRuntimeExports.jsx("cylinderGeometry",{args:[.245,.24,.35,24]}),jsxRuntimeExports.jsx("meshStandardMaterial",{color:"#220022",emissive:"#9900cc",emissiveIntensity:.6})]}),jsxRuntimeExports.jsxs("mesh",{position:[0,-2.1,0],children:[jsxRuntimeExports.jsx("capsuleGeometry",{args:[.16,1.4,8,20]}),z]}),jsxRuntimeExports.jsxs("mesh",{position:[-.08,-3.05,.15],rotation:[.6,0,0],children:[jsxRuntimeExports.jsx("boxGeometry",{args:[.22,.18,.55]}),jsxRuntimeExports.jsx("meshStandardMaterial",{color:"#110011",emissive:"#5500aa",emissiveIntensity:.7})]})]}),jsxRuntimeExports.jsxs("group",{ref:T,position:[0,3.1,0],children:[jsxRuntimeExports.jsxs("mesh",{position:[0,-.4,0],children:[jsxRuntimeExports.jsx("cylinderGeometry",{args:[.72,.48,.9,32,1,!0]}),G]}),jsxRuntimeExports.jsxs("mesh",{position:[0,.35,0],children:[jsxRuntimeExports.jsx("cylinderGeometry",{args:[.36,.51,1.12,28]}),G]}),jsxRuntimeExports.jsx("group",{ref:N,position:[-.33,1.22,.42],children:jsxRuntimeExports.jsxs("mesh",{children:[jsxRuntimeExports.jsx("sphereGeometry",{args:[.51,36,32]}),G]})}),jsxRuntimeExports.jsx("group",{ref:L,position:[.33,1.22,.42],children:jsxRuntimeExports.jsxs("mesh",{children:[jsxRuntimeExports.jsx("sphereGeometry",{args:[.51,36,32]}),G]})}),jsxRuntimeExports.jsxs("mesh",{position:[0,1.38,.78],rotation:[.82,0,0],children:[jsxRuntimeExports.jsx("torusGeometry",{args:[.26,.035,8,32,Math.PI*1.55]}),jsxRuntimeExports.jsx("meshBasicMaterial",{color:"#ff66bb",transparent:!0,opacity:.85})]}),jsxRuntimeExports.jsxs("mesh",{position:[0,1.25,.79],rotation:[1.1,0,0],children:[jsxRuntimeExports.jsx("cylinderGeometry",{args:[.025,.025,.55,8]}),jsxRuntimeExports.jsx("meshBasicMaterial",{color:"#ff99dd",transparent:!0,opacity:.6})]})]}),jsxRuntimeExports.jsxs("group",{ref:I,position:[-.75,4,0],children:[jsxRuntimeExports.jsxs("mesh",{position:[0,-.8,0],rotation:[.6,0,-1.35],children:[jsxRuntimeExports.jsx("capsuleGeometry",{args:[.12,1.45,8,16]}),z]}),jsxRuntimeExports.jsxs("mesh",{position:[-.4,-1.75,-.1],rotation:[.8,.3,-1.6],children:[jsxRuntimeExports.jsx("sphereGeometry",{args:[.13,16,12]}),z]})]}),jsxRuntimeExports.jsxs("group",{position:[.75,4,0],children:[jsxRuntimeExports.jsxs("mesh",{position:[0,-.8,0],rotation:[-.2,0,1.1],children:[jsxRuntimeExports.jsx("capsuleGeometry",{args:[.12,1.45,8,16]}),z]}),jsxRuntimeExports.jsxs("mesh",{position:[.35,-1.65,.1],rotation:[.4,-.5,.9],children:[jsxRuntimeExports.jsx("sphereGeometry",{args:[.13,16,12]}),z]})]}),jsxRuntimeExports.jsxs("group",{ref:y,position:[0,5.25,0],children:[jsxRuntimeExports.jsxs("mesh",{children:[jsxRuntimeExports.jsx("sphereGeometry",{args:[.55,32,32]}),z]}),jsxRuntimeExports.jsxs("group",{ref:w,position:[-.22,.18,.52],children:[jsxRuntimeExports.jsxs("mesh",{children:[jsxRuntimeExports.jsx("sphereGeometry",{args:[.19,24,24]}),K]}),jsxRuntimeExports.jsxs("mesh",{position:[0,0,.03],children:[jsxRuntimeExports.jsx("sphereGeometry",{args:[.11,20,20]}),Z]}),jsxRuntimeExports.jsxs("mesh",{position:[.02,.02,.08],children:[jsxRuntimeExports.jsx("sphereGeometry",{args:[.055,12,12]}),J]})]}),jsxRuntimeExports.jsxs("group",{ref:C,position:[.22,.18,.52],children:[jsxRuntimeExports.jsxs("mesh",{children:[jsxRuntimeExports.jsx("sphereGeometry",{args:[.19,24,24]}),K]}),jsxRuntimeExports.jsxs("mesh",{position:[0,0,.03],children:[jsxRuntimeExports.jsx("sphereGeometry",{args:[.11,20,20]}),Z]}),jsxRuntimeExports.jsxs("mesh",{position:[-.02,.02,.08],children:[jsxRuntimeExports.jsx("sphereGeometry",{args:[.055,12,12]}),J]})]}),jsxRuntimeExports.jsxs("mesh",{position:[-.24,.42,.58],rotation:[0,0,.4],children:[jsxRuntimeExports.jsx("capsuleGeometry",{args:[.04,.22,4,8]}),jsxRuntimeExports.jsx("meshStandardMaterial",{color:"#2c1f00"})]}),jsxRuntimeExports.jsxs("mesh",{position:[.24,.42,.58],rotation:[0,0,-.4],children:[jsxRuntimeExports.jsx("capsuleGeometry",{args:[.04,.22,4,8]}),jsxRuntimeExports.jsx("meshStandardMaterial",{color:"#2c1f00"})]}),jsxRuntimeExports.jsxs("mesh",{position:[0,-.18,.58],rotation:[.6,0,0],children:[jsxRuntimeExports.jsx("torusGeometry",{args:[.08,.025,8,16,Math.PI*.8]}),te]}),jsxRuntimeExports.jsxs("mesh",{position:[-.3,-.05,.6],scale:[.9,.4,1],children:[jsxRuntimeExports.jsx("sphereGeometry",{args:[.13]}),jsxRuntimeExports.jsx("meshBasicMaterial",{color:"#ff99aa",transparent:!0,opacity:.25})]}),jsxRuntimeExports.jsxs("mesh",{position:[.3,-.05,.6],scale:[.9,.4,1],children:[jsxRuntimeExports.jsx("sphereGeometry",{args:[.13]}),jsxRuntimeExports.jsx("meshBasicMaterial",{color:"#ff99aa",transparent:!0,opacity:.25})]})]}),jsxRuntimeExports.jsxs("group",{position:[0,5.25,0],children:[jsxRuntimeExports.jsxs("mesh",{position:[0,.3,-.25],scale:[1.15,1.05,.9],children:[jsxRuntimeExports.jsx("sphereGeometry",{args:[.62,28,24]}),U]}),jsxRuntimeExports.jsxs("mesh",{position:[0,.65,.42],rotation:[.6,0,0],children:[jsxRuntimeExports.jsx("cylinderGeometry",{args:[.48,.32,.45,28,1,!0]}),U]}),jsxRuntimeExports.jsxs("group",{ref:S,position:[-.55,.4,-.1],children:[jsxRuntimeExports.jsxs("mesh",{position:[0,-.9,0],rotation:[.3,.8,0],children:[jsxRuntimeExports.jsx("cylinderGeometry",{args:[.13,.09,2.1,16]}),U]}),jsxRuntimeExports.jsxs("mesh",{position:[-.3,-2.1,.4],scale:[1.2,1.1,1],children:[jsxRuntimeExports.jsx("sphereGeometry",{args:[.22]}),U]})]}),jsxRuntimeExports.jsxs("group",{ref:A,position:[.55,.4,-.1],children:[jsxRuntimeExports.jsxs("mesh",{position:[0,-.9,0],rotation:[.3,-.8,0],children:[jsxRuntimeExports.jsx("cylinderGeometry",{args:[.13,.09,2.1,16]}),U]}),jsxRuntimeExports.jsxs("mesh",{position:[.3,-2.1,.4],scale:[1.2,1.1,1],children:[jsxRuntimeExports.jsx("sphereGeometry",{args:[.22]}),U]})]}),jsxRuntimeExports.jsxs("mesh",{position:[.1,1.1,.3],rotation:[0,0,1.2],children:[jsxRuntimeExports.jsx("capsuleGeometry",{args:[.03,.38,6]}),U]})]}),jsxRuntimeExports.jsxs("group",{ref:R,position:[0,3.05,0],children:[jsxRuntimeExports.jsxs("mesh",{position:[0,-.2,0],rotation:[.2,0,0],children:[jsxRuntimeExports.jsx("coneGeometry",{args:[.92,1.1,36,1,!0]}),Y]}),jsxRuntimeExports.jsxs("mesh",{position:[0,-.35,0],rotation:[.22,0,0],scale:[1.05,1,1],children:[jsxRuntimeExports.jsx("coneGeometry",{args:[.96,.95,42,1,!0]}),Y]}),jsxRuntimeExports.jsxs("mesh",{position:[0,-.5,0],rotation:[.25,0,0],scale:[1.12,1,1],children:[jsxRuntimeExports.jsx("coneGeometry",{args:[.99,.8,48,1,!0]}),jsxRuntimeExports.jsx("meshStandardMaterial",{color:"#ffffff",emissive:"#eeccff",emissiveIntensity:.3,transparent:!0,opacity:.4})]})]}),jsxRuntimeExports.jsxs("mesh",{position:[0,3.65,.62],rotation:[.3,0,0],children:[jsxRuntimeExports.jsx("torusGeometry",{args:[.42,.035,6,24,Math.PI*1.4]}),jsxRuntimeExports.jsx("meshBasicMaterial",{color:"#ff44cc",transparent:!0,opacity:.7})]})]})},RealisticAssistant=({position:s=[-5,0,2],rotation:n=[0,0,0],scale:u=1.5,modelUrl:f="/agent/models/eve.glb",jiggleIntensity:y=1.35,debugBones:S=!1})=>{const A=reactExports.useRef(null),w=reactExports.useRef(null),C=reactExports.useRef(null),{scene:T,animations:R}=useGLTF(f),{actions:I,names:N}=useAnimations(R,T);return reactExports.useEffect(()=>{T.traverse(F=>{if(F.type==="Bone"){const H=F,z=H.name.toLowerCase();S&&console.log("Bone found:",H.name),!w.current&&(z.includes("left")||z.includes("l_")||z.includes(".l"))&&(z.includes("breast")||z.includes("boob")||z.includes("bust")||z.includes("chest"))&&(w.current=H,console.log(" Left breast bone locked ",H.name)),!C.current&&(z.includes("right")||z.includes("r_")||z.includes(".r"))&&(z.includes("breast")||z.includes("boob")||z.includes("bust")||z.includes("chest"))&&(C.current=H,console.log(" Right breast bone locked ",H.name))}}),!w.current&&!C.current&&S&&console.warn(" No breast bones found. Open eve.glb in Blender and add/rename breast bones if needed.");const L=N.find(F=>F.toLowerCase().includes("idle")||F.toLowerCase().includes("breath")||F.toLowerCase().includes("stand"))||N[0];L&&I[L]?.reset().fadeIn(.6).play()},[T,N,I,S]),useFrame(L=>{const F=L.clock.getElapsedTime();A.current&&(A.current.position.y=s[1]+Math.sin(F*1.1)*.055);const H=T.getObjectByName("Head")||T.getObjectByName("head")||T.getObjectByName("Head001");H&&H.lookAt(0,4.5,3);const z=Math.sin(F*7.8)*.028*y,U=Math.sin(F*2.3)*.019*y,G=Math.sin(F*1.4)*.012;w.current&&(w.current.rotation.x=z*.9+U+G,w.current.rotation.z=Math.sin(F*4.2)*.008*y),C.current&&(C.current.rotation.x=z*1.05+U*.95+G,C.current.rotation.z=Math.sin(F*4.6)*-.008*y)}),jsxRuntimeExports.jsx("group",{ref:A,position:s,rotation:n,scale:u,children:jsxRuntimeExports.jsx("primitive",{object:T})})},HologramButton=({position:s,label:n,onClick:u,width:f=.4,height:y=.15})=>{const S=reactExports.useRef(null),[A,w]=reactExports.useState(!1),{trackingMode:C,setHovered:T}=useStore$1();useFrame(()=>{if(!S.current)return;const L=A?1.1:1;S.current.scale.setScalar(MathUtils.lerp(S.current.scale.x,L,.2))});const R=()=>{(C==="MOUSE"||C==="TV")&&(w(!0),T(`Button: ${n}`),playSound.playHover())},I=()=>{(C==="MOUSE"||C==="TV")&&(w(!1),T(null))},N=()=>{(C==="MOUSE"||C==="TV")&&(playSound.playClick(),u())};return reactExports.useEffect(()=>{const L=()=>{A&&C==="TV"&&N()};return window.addEventListener("tv-enter-press",L),()=>window.removeEventListener("tv-enter-press",L)},[A,C,u]),jsxRuntimeExports.jsxs("group",{position:s,children:[jsxRuntimeExports.jsx(RoundedBox,{ref:S,args:[f,y,.05],radius:.02,smoothness:4,onPointerOver:R,onPointerOut:I,onClick:N,children:jsxRuntimeExports.jsx("meshPhongMaterial",{color:A?"#00f0ff":"#001a33",transparent:!0,opacity:A?.9:.7,shininess:100})}),jsxRuntimeExports.jsx(Text,{position:[0,0,.03],fontSize:.08,color:A?"#000000":"#00f0ff",anchorX:"center",anchorY:"middle",fontWeight:"bold",children:n})]})},HologramToggle=({position:s,active:n,onClick:u})=>{const f=reactExports.useRef(null),y=reactExports.useRef(null),S=reactExports.useRef(null),A=reactExports.useRef(null),[w,C]=reactExports.useState(!1),{trackingMode:T,setHovered:R}=useStore$1();useFrame(()=>{if(!y.current||!S.current||!A.current)return;const F=n?.1:-.1;y.current.position.x=MathUtils.lerp(y.current.position.x,F,.2);const H=n?new Color("#00f0ff"):new Color("#001a33");S.current.color.lerp(H,.1),S.current.opacity=MathUtils.lerp(S.current.opacity,n?.6+(w?.2:0):.3+(w?.1:0),.1);const z=n?new Color("#ffffff"):new Color("#cccccc");A.current.color.lerp(z,.2)});const I=()=>{(T==="MOUSE"||T==="TV")&&(C(!0),R("Toggle"),playSound.playHover())},N=()=>{(T==="MOUSE"||T==="TV")&&(C(!1),R(null))},L=()=>{(T==="MOUSE"||T==="TV")&&(playSound.playClick(),u())};return reactExports.useEffect(()=>{const F=()=>{w&&T==="TV"&&L()};return window.addEventListener("tv-enter-press",F),()=>window.removeEventListener("tv-enter-press",F)},[w,T,u]),jsxRuntimeExports.jsxs("group",{ref:f,position:s,onPointerOver:I,onPointerOut:N,onClick:L,children:[jsxRuntimeExports.jsx(RoundedBox,{args:[.4,.15,.04],radius:.075,smoothness:4,children:jsxRuntimeExports.jsx("meshPhongMaterial",{ref:S,transparent:!0,opacity:.3,color:"#001a33",shininess:100})}),jsxRuntimeExports.jsxs("mesh",{ref:y,position:[-.1,0,.03],children:[jsxRuntimeExports.jsx("sphereGeometry",{args:[.1,32,32]}),jsxRuntimeExports.jsx("meshBasicMaterial",{ref:A,color:"#cccccc"})]}),w&&jsxRuntimeExports.jsx(RoundedBox,{args:[.45,.2,.02],radius:.1,smoothness:4,position:[0,0,-.01],children:jsxRuntimeExports.jsx("meshBasicMaterial",{color:"#00f0ff",wireframe:!0,transparent:!0,opacity:.3})})]})},SettingsHologram=({position:s,rotation:n=[0,0,0]})=>{const u=reactExports.useRef(null),f=reactExports.useRef(null),{hdMode:y,setHdMode:S,showWebPanel:A,setShowWebPanel:w,showVideoPanel:C,setShowVideoPanel:T,showChessAssistant:R,setShowChessAssistant:I,showAnimeAssistant:N,setShowAnimeAssistant:L,showRealisticAssistant:F,setShowRealisticAssistant:H,clampSensibility:z,setClampSensibility:U,gravity:G,setGravity:Y,minHeight:K,setMinHeight:Z}=useStore$1();return useFrame(J=>{u.current&&(u.current.position.y=s[1]+Math.sin(J.clock.elapsedTime*.5)*.05)}),jsxRuntimeExports.jsxs("group",{ref:u,position:s,rotation:n,children:[jsxRuntimeExports.jsx(RoundedBox,{ref:f,args:[2.2,3.8,.02],radius:.05,smoothness:4,children:jsxRuntimeExports.jsx("meshPhongMaterial",{color:"#001a33",transparent:!0,opacity:.65,shininess:100})}),jsxRuntimeExports.jsx(RoundedBox,{args:[2.25,3.85,.01],radius:.06,smoothness:4,position:[0,0,-.01],children:jsxRuntimeExports.jsx("meshBasicMaterial",{color:"#00f0ff",wireframe:!0,transparent:!0,opacity:.15})}),jsxRuntimeExports.jsxs("group",{position:[-.9,1.7,.02],children:[jsxRuntimeExports.jsx(Text,{fontSize:.12,color:"#00f0ff",anchorX:"left",anchorY:"top",fontWeight:"bold",children:"SYS.CONFIG"}),jsxRuntimeExports.jsxs("group",{position:[0,-.3,0],children:[jsxRuntimeExports.jsx(Text,{fontSize:.08,color:"#ffffff",anchorX:"left",anchorY:"top",children:"HD Mode"}),jsxRuntimeExports.jsx(Text,{fontSize:.05,color:"#00f0ff",anchorX:"left",anchorY:"top",position:[0,-.1,0],fillOpacity:.7,children:"High-res tracking & bloom fx"}),jsxRuntimeExports.jsx(HologramToggle,{position:[1.6,-.05,0],active:y,onClick:()=>S(!y)})]}),jsxRuntimeExports.jsxs("group",{position:[0,-.7,0],children:[jsxRuntimeExports.jsx(Text,{fontSize:.08,color:"#ffffff",anchorX:"left",anchorY:"top",children:"Render Settings"}),jsxRuntimeExports.jsxs("group",{position:[0,-.2,0],children:[jsxRuntimeExports.jsx(Text,{fontSize:.06,color:"#00f0ff",anchorX:"left",anchorY:"middle",children:"Web Panel (Strategy)"}),jsxRuntimeExports.jsx(HologramToggle,{position:[1.6,0,0],active:A,onClick:()=>w(!A)})]}),jsxRuntimeExports.jsxs("group",{position:[0,-.4,0],children:[jsxRuntimeExports.jsx(Text,{fontSize:.06,color:"#00f0ff",anchorX:"left",anchorY:"middle",children:"Music Video Player"}),jsxRuntimeExports.jsx(HologramToggle,{position:[1.6,0,0],active:C,onClick:()=>T(!C)})]}),jsxRuntimeExports.jsxs("group",{position:[0,-.6,0],children:[jsxRuntimeExports.jsx(Text,{fontSize:.06,color:"#00f0ff",anchorX:"left",anchorY:"middle",children:"Chess AI Widget"}),jsxRuntimeExports.jsx(HologramToggle,{position:[1.6,0,0],active:R,onClick:()=>I(!R)})]}),jsxRuntimeExports.jsxs("group",{position:[0,-.8,0],children:[jsxRuntimeExports.jsx(Text,{fontSize:.06,color:"#00f0ff",anchorX:"left",anchorY:"middle",children:"Anime Guide Avatar"}),jsxRuntimeExports.jsx(HologramToggle,{position:[1.6,0,0],active:N,onClick:()=>L(!N)})]}),jsxRuntimeExports.jsxs("group",{position:[0,-1,0],children:[jsxRuntimeExports.jsx(Text,{fontSize:.06,color:"#00f0ff",anchorX:"left",anchorY:"middle",children:"Realistic Guide Avatar"}),jsxRuntimeExports.jsx(HologramToggle,{position:[1.6,0,0],active:F,onClick:()=>H(!F)})]})]}),jsxRuntimeExports.jsxs("group",{position:[0,-2,0],children:[jsxRuntimeExports.jsx(Text,{fontSize:.08,color:"#ffffff",anchorX:"left",anchorY:"top",children:"Physics & Movement"}),jsxRuntimeExports.jsxs("group",{position:[0,-.2,0],children:[jsxRuntimeExports.jsx(Text,{fontSize:.06,color:"#00f0ff",anchorX:"left",anchorY:"middle",children:"Gravity Scale"}),jsxRuntimeExports.jsxs("group",{position:[1.6,0,0],children:[jsxRuntimeExports.jsx(HologramButton,{position:[-.3,0,0],width:.15,height:.15,label:"-",onClick:()=>Y(Math.max(0,Number((G-.1).toFixed(1))))}),jsxRuntimeExports.jsxs(Text,{position:[0,0,.02],fontSize:.07,color:"#ffffff",anchorX:"center",anchorY:"middle",fontWeight:"bold",children:[(G*100).toFixed(0),"%"]}),jsxRuntimeExports.jsx(HologramButton,{position:[.3,0,0],width:.15,height:.15,label:"+",onClick:()=>Y(Math.min(1,Number((G+.1).toFixed(1))))})]})]}),jsxRuntimeExports.jsxs("group",{position:[0,-.4,0],children:[jsxRuntimeExports.jsx(Text,{fontSize:.06,color:"#00f0ff",anchorX:"left",anchorY:"middle",children:"Floor Limit"}),jsxRuntimeExports.jsxs("group",{position:[1.6,0,0],children:[jsxRuntimeExports.jsx(HologramButton,{position:[-.3,0,0],width:.15,height:.15,label:"-",onClick:()=>Z(Math.max(0,Number((K-.1).toFixed(1))))}),jsxRuntimeExports.jsxs(Text,{position:[0,0,.02],fontSize:.07,color:"#ffffff",anchorX:"center",anchorY:"middle",fontWeight:"bold",children:[K.toFixed(1),"m"]}),jsxRuntimeExports.jsx(HologramButton,{position:[.3,0,0],width:.15,height:.15,label:"+",onClick:()=>Z(Math.min(5,Number((K+.1).toFixed(1))))})]})]})]}),jsxRuntimeExports.jsxs("group",{position:[0,-2.9,0],children:[jsxRuntimeExports.jsx(Text,{fontSize:.08,color:"#ffffff",anchorX:"left",anchorY:"top",children:"Motion Sensitivity"}),jsxRuntimeExports.jsx(Text,{fontSize:.05,color:"#00f0ff",anchorX:"left",anchorY:"top",position:[0,-.1,0],fillOpacity:.7,children:"Hand tracking speed multiplier"}),jsxRuntimeExports.jsxs("group",{position:[1.6,-.05,0],children:[jsxRuntimeExports.jsx(HologramButton,{position:[-.3,0,0],width:.15,height:.15,label:"-",onClick:()=>U(Math.max(.1,z-.1))}),jsxRuntimeExports.jsxs(Text,{position:[0,0,.02],fontSize:.09,color:"#ffffff",anchorX:"center",anchorY:"middle",fontWeight:"bold",children:[z.toFixed(1),"x"]}),jsxRuntimeExports.jsx(HologramButton,{position:[.3,0,0],width:.15,height:.15,label:"+",onClick:()=>U(Math.min(3,z+.1))})]})]}),jsxRuntimeExports.jsxs("mesh",{position:[.9,-3.4,0],children:[jsxRuntimeExports.jsx("planeGeometry",{args:[1.9,.02]}),jsxRuntimeExports.jsx("meshBasicMaterial",{color:"#00f0ff",transparent:!0,opacity:.4})]})]})]})},useTVNavigation=()=>{const{trackingMode:s,setTrackingMode:n,tvCursor:u,setTvCursor:f,tvControlMode:y,setJoystickInput:S,setTvOrbitInput:A}=useStore$1();reactExports.useEffect(()=>{const w=C=>{const T=["2","4","6","8","5"];if(T.includes(C.key)&&s!=="TV"&&n("TV"),s!=="TV"&&!T.includes(C.key))return;let R=0,I=0;if((C.key==="ArrowUp"||C.key==="2")&&(I=-1),(C.key==="ArrowDown"||C.key==="8")&&(I=1),(C.key==="ArrowLeft"||C.key==="4")&&(R=-1),(C.key==="ArrowRight"||C.key==="6")&&(R=1),R!==0||I!==0){if(y==="CURSOR"){let L=Math.max(0,Math.min(1,u.x+R*.15)),F=Math.max(0,Math.min(1,u.y+I*.15));(L!==u.x||F!==u.y)&&f({x:L,y:F})}else y==="CAMERA"?(S({x:R*2,y:-I*2}),setTimeout(()=>S({x:0,y:0}),100)):y==="ROTATE"&&(A({dx:R*2,dy:I*2}),setTimeout(()=>A({dx:0,dy:0}),100));C.preventDefault()}(C.key==="Enter"||C.key==="5")&&(window.dispatchEvent(new CustomEvent("tv-enter-press")),C.preventDefault())};return window.addEventListener("keydown",w),()=>window.removeEventListener("keydown",w)},[s,n,u,f,y,S,A])},InteractionManager=()=>(useHandRaycaster(),useTVNavigation(),null),Scene=()=>{const{hdMode:s,showWebPanel:n,showVideoPanel:u,showChessAssistant:f,showAnimeAssistant:y,showRealisticAssistant:S,scene:A}=useStore$1();return jsxRuntimeExports.jsx(Canvas,{className:"w-full h-full block",style:{position:"absolute",top:0,left:0,width:"100vw",height:"100vh"},dpr:s?[1,2]:1,camera:{position:[0,0,5],fov:60},gl:{alpha:!0,antialias:!1},children:jsxRuntimeExports.jsxs(reactExports.Suspense,{fallback:null,children:[A==="dashboard"&&jsxRuntimeExports.jsx(DashboardEnvironment,{}),A==="city"&&jsxRuntimeExports.jsx(CityEnvironment,{}),A==="forest"&&jsxRuntimeExports.jsx(DashboardEnvironment,{})," ",jsxRuntimeExports.jsx(InteractiveBox,{position:[-1.5,0,0],label:"System"}),jsxRuntimeExports.jsx(InteractiveBox,{position:[1.5,0,0],label:"Data",color:"#ff0055"}),jsxRuntimeExports.jsx(InteractiveBox,{position:[0,1.2,0],label:"Security",color:"#00ff00"}),jsxRuntimeExports.jsx(TrackingToggle,{}),jsxRuntimeExports.jsx(HologramPanel,{position:[-2.5,1,-1],rotation:[0,.5,0],title:"SYSTEM DIAGNOSTICS",content:"Core integrity: 98%. Thermal systems optimal. Neural interface synced."}),jsxRuntimeExports.jsx(SettingsHologram,{position:[-4.8,1,-1],rotation:[0,.4,0]}),n&&jsxRuntimeExports.jsx(WebPanel,{position:[5.5,1,-1],rotation:[0,-.5,0],scale:[.35,.35,.35],url:"https://rent-a-human.github.io/chess/",title:"TACTICAL STRATEGY"}),f&&jsxRuntimeExports.jsx(ChessAssistant,{position:[-10,0,2],rotation:[0,Math.PI/4,0]}),y&&jsxRuntimeExports.jsx(AnimeAssistant,{scale:.5,position:[10,0,2],rotation:[0,-Math.PI/4,0]}),S&&jsxRuntimeExports.jsx(RealisticAssistant,{scale:1.5,position:[-5,0,2],rotation:[0,0,0],modelUrl:"/agent/models/eve.glb",jiggleIntensity:1.8,debugBones:!0}),u&&jsxRuntimeExports.jsx(VideoPanel,{position:[0,4,-2],rotation:[0,0,0],scale:[.35,.35,.35],videoId:"10mQwMDt1tw"}),jsxRuntimeExports.jsx(Cursor,{}),jsxRuntimeExports.jsx(InteractionManager,{}),jsxRuntimeExports.jsx(CameraController,{}),s&&jsxRuntimeExports.jsx(dt,{children:jsxRuntimeExports.jsx(wt,{luminanceThreshold:.2,luminanceSmoothing:.9,intensity:2})})]})})};function App(){const[s,n]=reactExports.useState(null);return useHandTracking(s),useFaceTracking(s),jsxRuntimeExports.jsxs("div",{className:"w-screen h-screen bg-jarvis-dark text-white overflow-hidden relative",children:[jsxRuntimeExports.jsx(VideoFeed,{onVideoReady:n}),jsxRuntimeExports.jsx(HandVisualizer,{}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 z-10",children:jsxRuntimeExports.jsx(Scene,{})}),jsxRuntimeExports.jsx(HudOverlay,{}),jsxRuntimeExports.jsx(SettingsOverlay,{}),jsxRuntimeExports.jsx(DebugOverlay,{}),jsxRuntimeExports.jsx(AgentOverlay,{})]})}clientExports.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));
